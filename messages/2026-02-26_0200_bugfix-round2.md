# Bug Fix Round 2 — 2026-02-26 02:00

## 수정 사항

| # | 문제 | 수정 내용 | 상태 |
|---|------|----------|------|
| 1 | 다음층 진입 시 간헐적 까만화면 | advanceFloor + giveUp 모두 timeout 안전장치(1200ms) 추가. camerafadeoutcomplete 미발생 시에도 전환 보장 | ✅ |
| 2 | 스킬버튼이 1열로 변경됨 | dom-hud.ts 재작성: 스킬 2x2 그리드 유지 (D-pad 반대편), 줍기/최근아이템/팀 버튼은 D-pad 위에 정렬 | ✅ |
| 3 | 기브업 오버레이에서 스킬 클릭됨 | confirmGiveUp 오버레이 열릴 때 setDomHudInteractive(false) 추가, No 클릭 시 true로 복원 | ✅ |

## 기술 상세

### 까만화면 안전장치 (advanceFloor / giveUp)
```typescript
let restarted = false;
const doRestart = () => {
  if (restarted) return;
  restarted = true;
  // DOM cleanup + scene transition
};
this.cameras.main.fadeOut(500, 0, 0, 0);
this.cameras.main.once("camerafadeoutcomplete", doRestart);
this.time.delayedCall(1200, doRestart); // safety fallback
```

### DOM HUD 레이아웃 (최종)
- 스킬 버튼: 2x2 그리드, D-pad 반대편
- 줍기/최근아이템/팀: D-pad 중심 X축 기준 정렬, D-pad 위
- `layoutHudButtons(hud, dpadSide, gameWidth, gameHeight)` 함수로 동적 배치

## 빌드 결과
- TypeScript 에러: 0개
- Vite 빌드: 성공 (2,330KB bundle)
