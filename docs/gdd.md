# 포켓몬 미스터리 던전 로그라이트 — 상세 기획서 (GDD) v3

> PMD 스타일 턴제 던전 크롤러 / 모바일 웹 / Phaser 3 + rot.js
> 비상업적 팬게임 (GPL v3 + CC BY-NC 4.0)

---

## 1. 게임 개요

### 한 줄 요약
"포켓몬을 모으고 키우며 랜덤 던전을 탐험하는 턴제 로그라이트"

### 핵심 차별점
- **Shattered Pixel Dungeon**의 간결한 모바일 UX
- **PMD**의 포켓몬 세계관 + 동료 모집
- **Risk of Rain 2**의 도전과제 기반 해금 시스템
- **사이클 시스템**: 같은 10개 던전이 무한히 강해지며 반복

### 플랫폼
- 모바일 웹 (세로 모드, PWA)
- Phaser 3 렌더링 + rot.js 던전 생성

### 플레이 시간
- **제한 없음**. 중간저장 지원.
- 던전별 층수가 다름 (짧은 5층 ~ 긴 15층)
- 언제든 저장하고 나갔다 이어할 수 있음

---

## 2. 핵심 게임 루프

```
 ┌──────────────────────────────────────────────────────────┐
 │                       마을 (허브)                         │
 │  [던전 선택] [팀 편성] [아이템 정리] [도전과제]            │
 └────────────────────────┬─────────────────────────────────┘
                          ▼
 ┌──────────────────────────────────────────────────────────┐
 │               던전 탐험 (중간저장 가능)                    │
 │                                                          │
 │  층 진입 → 탐색/전투/아이템 → 계단 → ... → 보스층         │
 │                                                          │
 │  💾 계단 도착 시 자동 저장 / 메뉴에서 수동 저장            │
 └────────────┬────────────────────┬────────────────────────┘
              ▼                    ▼
         클리어 성공            전멸 (사망)
         ┌─────────┐          ┌─────────┐
         │보상 전액 │          │보상 일부 │
         │모집 확정 │          │도전과제  │
         │도전과제○ │          │달성 유지 │
         └────┬────┘          └────┬────┘
              └──────────┬─────────┘
                         ▼
              마을 귀환 + 해금 반영
                         │
              ┌──────────┴──────────┐
              ▼                     ▼
        아직 남은 던전         10개 전부 클리어
        → 다음 던전 도전       → 사이클 +1 (2회차)
                               → 전 던전 강화 재등장
```

### 중간저장 시스템

| 저장 타이밍 | 방식 | 설명 |
|------------|------|------|
| 계단 도착 | 자동 저장 | 다음 층 진입 직전 상태 저장 |
| 메뉴 | 수동 저장 후 종료 | 현재 위치/상태 그대로 저장 |
| 앱 이탈 | 자동 저장 | 브라우저 `visibilitychange` 감지 |

- 저장 슬롯 1개 (런 진행 중)
- 마을 귀환 시 런 저장 삭제, 메타 저장만 유지
- **사망 시 런 저장 삭제** (로그라이트 원칙 유지)

### 데드엔드 방지 원칙

1. **스타터 1마리로 클리어 가능**: 동료/아이템은 "더 쉽게" 해줄 뿐 "필수"가 아님
2. **사망 패널티 최소화**: 소모 아이템만 유실. 포켓몬, 장비, 골드(50%), 도전과제 영구
3. **구조대 모드**: 같은 던전 3연속 사망 시 제안 (적 HP -20%, 드랍 +50%)
4. **탈출오브**: 모든 층에 1개 보장. 위험하면 마을로 귀환 가능 (보상 50%)

---

## 3. 사이클 시스템 (무한 재귀 성장)

> **콘텐츠가 무한한 게 아니라, 같은 콘텐츠가 재귀적으로 강해진다.**

### 3-1. 개념

```
사이클 1: 해변동굴 → ... → 순수의숲 (10개 던전)
    ↓ 전부 클리어
사이클 2: 같은 10개 던전, 적 +25% 강화, 새 변이 추가
    ↓ 전부 클리어
사이클 3: 같은 10개 던전, 적 +56% 강화, 변이 2종 중첩
    ↓ ...
사이클 N: 무한 반복
```

### 3-2. 사이클별 스케일링 (퍼센트 기반, 오버플로우 없음)

**적 스케일링 공식**:
```
적 스탯 = 기본 스탯 × (1.25 ^ (사이클 - 1))
```

| 사이클 | 배율 | 체감 |
|:------:|:----:|------|
| 1 | ×1.00 | 첫 클리어 도전 |
| 2 | ×1.25 | 약간 어려움 |
| 3 | ×1.56 | 꽤 어려움 |
| 5 | ×2.44 | 장비/진화 필수 |
| 10 | ×7.45 | 풀빌드 도전 |
| 20 | ×55.5 | 극한 도전 |

> 왜 퍼센트인가: 절대값 +N 방식은 고사이클에서 무의미해짐.
> 퍼센트 기반이면 사이클 50이든 100이든 "내 스탯 대비 어려움"이 일정.

**플레이어 성장과의 균형**:
- 포켓몬 레벨(스탯 성장): 선형 증가
- 장비 강화: 단계적 증가 (최대 +10 강화)
- 진화: 1~2회의 큰 점프
- → 사이클이 높아질수록 **빌드 최적화 + 플레이 실력**이 중요해짐

### 3-3. 사이클 변이 (던전마다 랜덤 1~N개 부여)

사이클 2부터 던전에 **변이**가 랜덤 부여됨. 사이클이 높을수록 변이 수 증가.

| 사이클 | 변이 수 |
|:------:|:------:|
| 1 | 0 (없음) |
| 2~3 | 1개 |
| 4~6 | 2개 |
| 7~10 | 3개 |
| 11+ | 4개 (최대) |

**변이 목록** (같은 던전이 매번 다른 경험):

| 변이 | 효과 | 전략 영향 |
|------|------|----------|
| 어둠의장막 | 시야 -2 (복도 앞만 보임) | 탐색 긴장감 극대화 |
| 몬스터러시 | 적 밀도 ×2 | 광역기/범위 기술 필수 |
| 자원부족 | 아이템 드랍 -50% | 아이템 관리 극대화 |
| 빠른발 | 모든 적 Speed +30 | 선공권 중요 |
| 타입제한 | 특정 1타입 기술만 데미지 100% (나머지 50%) | 팀 구성 변경 강제 |
| 대형화 | 보스 HP ×3, 보상 ×2 | 지구전 빌드 필요 |
| 미궁 | 맵 크기 ×1.5, 방 수 +50% | 배고픔 관리 도전 |
| 함정천국 | 함정 ×3 | 팬텀(함정면역) 가치 상승 |
| 날씨폭주 | 매 층 날씨 랜덤 변경 | 날씨 의존 빌드 리스크 |
| 엘리트화 | 적 20%가 "엘리트" (스탯 ×1.5 + 랜덤 패시브) | 위치 선정 중요 |

→ 10개 던전 × 10개 변이 × 조합 = **사실상 무한한 경우의 수**

### 3-4. 사이클 보상

| 사이클 | 보상 |
|:------:|------|
| 매 사이클 클리어 | 골드 보너스 (×사이클 수) |
| 사이클 2 진입 | "2회차" 칭호, 장비 강화 상한 +2 |
| 사이클 5 진입 | 색이 다른 포켓몬 출현 활성화 |
| 사이클 10 진입 | "숙련자" 칭호, 궁극의리본 해금 |
| 사이클 N 최고기록 | 리더보드 (로컬) |

### 3-5. 왜 오버플로우가 안 되는가

| 걱정 | 방지책 |
|------|--------|
| 적 스탯이 무한히 커짐 | 퍼센트 기반이라 "내 대비 비율"만 중요. 절대값은 의미 없음 |
| 플레이어가 무한히 강해짐 | 레벨 캡 (100), 장비 강화 캡 (+10), 진화 캡. 성장에 천장이 있음 |
| 숫자가 너무 커짐 | 표시: `HP 1.2K`, `데미지 5.4K` 식으로 축약. 내부는 정수 연산 |
| 콘텐츠 고갈 | 변이 조합이 매번 달라져서 같은 던전이 다른 경험 |
| 의미 없는 반복 | 사이클 보상 + 도전과제가 계속 열림 ("사이클 5에서 X 던전 클리어" 등) |

---

## 4. 턴 시스템 & 이동

### 기본 규칙
- **1턴 = 1행동**: 이동 1칸, 기술 사용, 아이템 사용, 대기 중 택1
- 내 턴 → 동료 AI 턴 → 적 턴 (순차)
- Speed > 100: 1턴에 2회 행동

### 이동
- 8방향 이동 (상하좌우 + 대각선)
- 조작: 이동할 타일 탭 or 스와이프 방향
- **자동 이동**: 길게 탭하면 적 만날 때까지 자동 전진

### 타일 종류 (DTEF 시스템 활용)
| 타일 | TerrainType | 설명 |
|------|-------------|------|
| 바닥 | GROUND | 누구나 이동 가능 |
| 벽 | WALL | 이동 불가. 고스트 타입은 통과 가능 (턴당 배고픔 5배 소모) |
| 물 | WATER | 물/비행 타입만 이동 가능 |

### 시야 (FOV)
- 방 안: 방 전체 보임
- 복도: 전방 2칸
- "어둠의장막" 변이: 전방 1칸만

---

## 5. 전투 시스템

### 기본 공격
- 데미지 = ATK × 타입 보정 - DEF × 0.05

### 기술 시스템 (최대 4개 장착)
- PP 소모. 이동 시 1턴당 1PP 자연 회복

| 범위 유형 | 설명 | 예시 |
|-----------|------|------|
| 정면 1칸 | 근접 | 몸통박치기, 할퀴기 |
| 정면 직선 | 원거리 관통 | 냉동빔, 10만볼트 |
| 주변 8칸 | 범위 | 지진, 파도타기 |
| 방 전체 | 광역 | 열풍, 붐볼 |
| 자신 | 버프/회복 | 칼춤, 회복 |
| 정면 2칸 | 중거리 | 불꽃세례 |

### 타입 상성 (PMD 압축 배율)
| 상성 | 배율 |
|------|------|
| 효과 굉장 | ×1.3 |
| 보통 | ×1.0 |
| 효과 별로 | ×0.8 |
| 면역 | ×0.5 |

### 상태이상
**디버프** (8종): 화상, 독, 마비, 빙결, 수면, 혼란, 풀죽음, 속박
**버프** (4종): 칼춤(ATK↑), 방어(1턴 무적), 배리어(DEF↑), 가속(2회 행동)

---

## 6. 포켓몬 활용 구조

> **모든 포켓몬이 역할을 가진다.**

### 6-1. 플레이어 팀 (최대 3마리)

- **리더**: 직접 조작
- **동료 1~2**: AI 자동 (전술: 공격적 / 신중 / 따라오기 / 거리유지)

### 6-2. 모든 포켓몬의 존재 이유

| 역할 | 수 | 왜 의미 있는가 |
|------|:--:|---------------|
| 스타터 (~25종) | 25 | 고유 패시브 → 런 스타일 결정 |
| 동료 모집 가능 (~400종) | 400 | 시너지 조합 + 사이클 빌드 다양성 |
| 적 (~500종) | 500 | 처치→도전과제 + 드랍 + 모집 후보 |
| 보스 (~30종) | 30 | 첫 클리어 보상 + 스타터 해금 |
| 진화체 (~300종) | 300 | 성장 목표 + 상위 스탯/기술풀 |

### 6-3. 시너지 보너스

| 겹침 | 효과 |
|:----:|------|
| 2마리 | 해당 타입 기술 +10% |
| 3마리 | 해당 타입 기술 +20% + 상태이상 내성 |

### 6-4. 동료 모집

- 리더가 마지막 일격 → 모집 판정

| 레어도 | 기본 모집률 |
|--------|:---------:|
| COMMON | 12% |
| UNCOMMON | 8% |
| RARE | 4% |
| EPIC | 1.5% |
| ULTRA | 0.5% |

### 6-5. 진화

| 유형 | 조건 | 예시 |
|------|------|------|
| 레벨 | 특정 레벨 | 파이리 Lv16 → 리자드 |
| 아이템 | 진화석 | 피카츄 + 천둥의돌 → 라이츄 |
| 도전과제 | 특수 조건 | 이브이 + "물 던전 5회" → 샤미드 |

---

## 7. 해금 시스템 (RoR2 참고)

### 7-1. 설계 원칙

1. **모든 해금은 도전과제**: 구체적 행동 목표
2. **진행은 영구 누적**: 사망해도, 다른 런에서도
3. **해금 즉시 알림**: RoR2 스타일
4. **도전과제 = 튜토리얼**: 초반 과제가 메카닉을 가르침

### 7-2. 스타터 해금

처음 5종 → 나머지 도전과제 해금:

| 스타터 | 타입 | 해금 조건 |
|--------|------|----------|
| **피카츄** | 전기 | 기본 |
| **이상해씨** | 풀/독 | 기본 |
| **파이리** | 불 | 기본 |
| **꼬부기** | 물 | 기본 |
| **이브이** | 노말 | 기본 |
| **리오루** | 격투 | 아무 던전 3회 클리어 |
| **치코리타** | 풀 | 동료 10마리 모집 누적 |
| **브케인** | 불 | 보스에게 약점 기술로 막타 |
| **리아코** | 물 | 물 타일 20칸 이동 누적 |
| **나옹** | 노말 | 골드 5,000 누적 획득 |
| **이상해꽃** | 풀/독 | 이상해씨를 진화시켜라 |
| **갸라도스** | 물/비행 | 잉어킹으로 던전 클리어 |
| **팬텀** | 고스트/독 | 벽 통과 100칸 누적 |
| **메타그로스** | 강철/에스퍼 | 후반 던전 1개 클리어 |
| **루카리오** | 격투/강철 | 리오루로 보스 3종 클리어 |
| **압솔** | 어둠 | 함정 50개 밟기 누적 |
| **님피아** | 요정 | 이브이를 진화시켜라 |
| **한카리아스** | 드래곤/땅 | 3마리 풀 파티 5회 클리어 |
| **미뇽** | 드래곤 | 도감 100종 목격 |
| **요루노즈쿠** | 노말/비행 | 밤 날씨에서 10층 탐험 |
| **마릴** | 물/요정 | 솔로(동료 없이) 클리어 |
| **에이스번** | 불 | 한 런에서 기술 100회 사용 |
| **거북왕** | 물 | 한 런에서 데미지 500 방어 |
| **레쿠쟈** | 드래곤/비행 | 모든 초반+중반 던전 클리어 |
| **뮤** | 에스퍼 | 모든 보스 클리어 |

**스타터 패시브** (런 스타일 결정):

| 스타터 | 패시브 | 플레이스타일 |
|--------|--------|------------|
| 피카츄 | 정전기: 인접 적 10% 마비 | 올라운더 |
| 이상해씨 | 엽록소: 맑음에서 Speed+30 | 날씨 활용 |
| 파이리 | 맹화: HP 25%↓시 불 ×1.5 | 하이리스크 |
| 꼬부기 | 급류: HP 25%↓시 물 ×1.5 | 탱커 |
| 이브이 | 적응력: 자속보정 2.0배 | 진화 전 강력 |
| 갸라도스 | 위협: 적 ATK -10% | 파티 서포트 |
| 팬텀 | 부유: 함정 무효 | 탐색 특화 |
| 압솔 | 대운: 크리티컬 +15% | 일격필살 |
| 레쿠쟈 | 에어로크: 날씨 무효 | 만능형 |
| 뮤 | 변환: 매 층 랜덤 기술 추가 | 카오스 |

### 7-3. 아이템 해금

**도전과제 달성 → 드랍풀에 추가** (RoR2 방식):

| 티어 | 기본 | 해금 | 계 |
|------|:---:|:---:|:---:|
| 소모품 | 15 | +15 | 30 |
| 장비 | 5 | +15 | 20 |
| TM | 10 | +20 | 30 |

| 아이템 | 해금 조건 |
|--------|----------|
| 부활씨 | 전투불능 3회 부활 |
| 폭발씨 | 몬스터하우스 5회 클리어 |
| 기합의띠 | HP 1로 생존 10회 |
| TM 냉동빔 | 얼음 적 50마리 처치 |
| 행운의리본 | 같은 포켓몬 5마리 모집 |
| 회복스카프 | 총 HP 회복량 10,000 |
| 날쌘발톱 | Speed 100 이상으로 10층 |

### 7-4. 던전 해금

| 던전 | 해금 조건 | 보스 |
|------|----------|------|
| 해변동굴 | 기본 | 갸라도스 |
| 작은초원 | 기본 | 로즈레이드 |
| 천둥파동동굴 | 초반 1개 클리어 | 에레키블 |
| 크리스탈동굴 | 초반 2개 클리어 | 크레세리아 |
| 마그마동굴 | 초반 2개 클리어 | 그란돈 |
| 안개숲 | 초반 2개 클리어 | 다크라이 |
| 시간의탑 | 중반 2개 클리어 | 디아루가 |
| 공간의균열 | 중반 2개 클리어 | 펄기아 |
| 숨겨진고원 | 중반 2개 클리어 | 아르세우스 |
| 순수의숲 | 후반 전부 클리어 | 뮤 |

> 항상 2개 이상 선택지 → 데드엔드 없음

### 7-5. 시설 해금

| 시설 | 해금 조건 | 용도 |
|------|----------|------|
| 자기방 | 기본 | 팀 편성, 기술 교체 |
| 던전 입구 | 기본 | 던전/사이클 선택 |
| 도감 | 기본 | 수집, 도전과제 |
| 상점 | 첫 클리어 | 아이템 구매/판매 |
| 창고 | 아이템 20개 | 보관 (확장 가능) |
| 진화의동굴 | 진화가능 포켓몬 | 진화 수행 |
| 훈련장 | 5종 보유 | 골드로 레벨업 |
| 대장간 | 사이클 2 진입 | 장비 강화 |

### 7-6. 도전과제 카테고리

| 카테고리 | 예시 | 해금 대상 | 수량 |
|----------|------|----------|:----:|
| 탐험 | "총 1,000층 탐험" | 스타터, 장비 | ~15 |
| 전투 | "효과 굉장 100회" | 아이템, TM | ~20 |
| 수집 | "도감 50종 모집" | 스타터, 시설 | ~15 |
| 특수 | "잉어킹으로 클리어" | 희귀 스타터 | ~10 |
| 던전 | "해변동굴 클리어" | 다음 던전 | ~10 |
| 사이클 | "사이클 5 돌파" | 칭호, 장비 | ~10 |
| **합계** | | | **~80** |

---

## 8. 아이템 시스템

### 아이템 존재 이유

| 카테고리 | 수 | 런 내 역할 | 메타 역할 |
|----------|:--:|-----------|----------|
| 열매 | 10 | HP회복, 상태이상해제 | 도전과제 |
| 씨앗 | 8 | 적에게 투척 | 전략 선택지 |
| 오브 | 6 | 방 전체 효과 | 위기탈출 |
| 장비 | 20 | 스탯 보정 (1인 1개) | 빌드 정의 |
| TM | 30 | 기술 가르침 (소모) | 빌드 확장 |
| 진화석 | 10 | 마을 진화용 | 수집/진화 |
| 탈출오브 | 1 | 마을 귀환 | 안전장치 |

### 장비 (빌드 정의 — 사이클 고도화의 핵심)

| 장비 | 효과 | 강화 시 (+1당) |
|------|------|-------------|
| 힘의머리띠 | ATK +10 | ATK +3 |
| 특공안경 | 기술 위력 +15% | +5% |
| 회복스카프 | 매 턴 HP +3 | +1 |
| 날쌘발톱 | Speed +20 | +5 |
| 기합의띠 | HP 1 생존 (1회/층) | 재사용 쿨다운 -1층 |
| 행운의리본 | 모집률 +15% | +3% |
| 스코프렌즈 | 크리티컬 +15% | +3% |
| 친화의리본 | 동료 AI 강화 | 동료 스탯 +2% |
| 불면스카프 | 수면/빙결 면역 | 마비/혼란도 면역 |
| 궁극의리본 | 전 스탯 +5 | 전 스탯 +2 |

**장비 강화**:
- 대장간에서 골드로 강화 (사이클 2부터)
- 기본 최대 +5, 사이클 진행 시 상한 해제:

| 사이클 | 강화 상한 |
|:------:|:-------:|
| 1 | 강화 불가 |
| 2~3 | +5 |
| 4~6 | +7 |
| 7~10 | +9 |
| 11+ | +10 (최종) |

→ **사이클이 오를수록 장비 강화가 열려서 "성장 여지"가 생김**

### 배고픔
- 게이지: 0~100
- 이동 1턴당 -0.1
- 배고픔 0: 매 턴 HP -2
- 층당 사과 1개 보장 → 데드엔드 없음

---

## 9. 던전 설계

### 9-1. 던전별 층수 (가변)

| 등급 | 던전 | 층수 | 체감 시간 |
|------|------|:----:|:--------:|
| 초반 | 해변동굴, 작은초원, 천둥파동동굴 | 5+보스 | ~8분 |
| 중반 | 크리스탈동굴, 마그마동굴, 안개숲 | 8+보스 | ~12분 |
| 후반 | 시간의탑, 공간의균열, 숨겨진고원 | 12+보스 | ~18분 |
| 엔드 | 순수의숲 | 15+보스 | ~25분 |

> 중간저장이 있으므로 길어도 괜찮다. 자투리 시간에 2~3층씩 진행 가능.

### 9-2. 층 구성

```
초반 층: 적 3~5마리, 아이템 3~4개 (사과 보장)
중반 층: 적 5~8마리, 아이템 2~3개, 날씨 발동
후반 층: 적 8~12마리, 강화 적 등장
마지막 층: 몬스터하우스 or 상점 (30% 확률)
보스 층: 보스 1마리 + 부하 2~4마리
```

### 9-3. 절차적 던전 생성

```
rot.js 던전 생성 → TerrainType[][] → DTEF 오토타일링 → Phaser 3
```

- 맵 크기: **24×18 타일**
- 방 4~8개, 복도 연결
- 계단은 시작점에서 가장 먼 방

### 9-4. 던전 목록

| # | 던전 | 타일셋 | 시너지 | 보스 |
|:-:|------|--------|--------|------|
| 1 | 해변동굴 | BeachCave | 물/땅/화석 | 갸라도스 |
| 2 | 작은초원 | TinyMeadow | 풀/벌레/요정 | 로즈레이드 |
| 3 | 천둥파동동굴 | ThunderwaveCave | 전기/강철/바위 | 에레키블 |
| 4 | 크리스탈동굴 | CrystalCave1 | 에스퍼/소리/요정 | 크레세리아 |
| 5 | 마그마동굴 | MagmaCavern3 | 불/땅/바위 | 그란돈 |
| 6 | 안개숲 | FoggyForest | 풀/독/고스트 | 다크라이 |
| 7 | 시간의탑 | TemporalTower | 강철/에스퍼/드래곤 | 디아루가 |
| 8 | 공간의균열 | SpacialRift1 | 드래곤/어둠/고스트 | 펄기아 |
| 9 | 숨겨진고원 | HiddenHighland | 비행/격투/빛 | 아르세우스 |
| 10 | 순수의숲 | PurityForest | 랜덤 3종 | 뮤 |

### 9-5. 날씨

중반 층부터 발동 (던전 시너지 연동):

| 날씨 | 효과 |
|------|------|
| 맑음 | 풀 +20% |
| 비 | 물 +20%, 불 -20% |
| 모래바람 | 바위/땅/강철 DEF+2 |
| 눈 | 얼음 +20% |
| 안개 | 시야 -1, 요정 +20% |
| 밤 | 어둠/고스트 +20% |

---

## 10. 마을 (허브)

```
┌──────────────────────────────────┐
│            마 을                   │
│                                  │
│  🏠 자기방        📖 도감        │
│  🚪 던전입구      🏪 상점        │
│  📦 창고         🔮 진화동굴     │
│  ⚔️ 훈련장       🔧 대장간      │
└──────────────────────────────────┘
```

재화: **골드** 1종만.

---

## 11. 메타 진행 설계

### 영구 (죽어도 유지)

| 요소 | 설명 |
|------|------|
| 포켓몬 | 모집하면 영구 보유 |
| 도전과제 | 누적 |
| 해금 | 영구 |
| 골드 | 클리어 100% / 사망 50% |
| 장비 | 장착 중이면 유지 |
| 도감 | 영구 |
| 사이클 진행도 | 영구 |

### 런 내 (사망 시 리셋)

| 요소 | 설명 |
|------|------|
| 소모 아이템 | 전부 유실 |
| 층 진행 | 1F부터 |
| 레벨 | 사망 시 -3레벨 |

### 성장 천장 (오버플로우 방지)

| 요소 | 캡 | 비고 |
|------|:--:|------|
| 포켓몬 레벨 | 100 | 레벨 100 이후 성장 없음 |
| 스탯 (개별) | 255 | uint8 범위 |
| 장비 강화 | +10 | 사이클 11+ 해금 |
| 기술 4슬롯 | 고정 | 더 늘지 않음 |
| 동료 | 3마리 | 고정 |
| 골드 | 999,999 | 자연스러운 상한 |

→ 플레이어 성장에 천장이 있으므로, 사이클의 ×1.25 스케일링이 언젠가 "벽"이 됨
→ 그 벽을 돌파하는 건 **빌드 최적화 + 플레이 스킬** = 진정한 엔드게임

---

## 12. 모바일 UX

### 화면 (세로 360×640)

```
┌────────────────────────────┐
│ B3F     HP ████░░  🍎 72   │
│ Lv.12   PP ████░░░  C2     │ ← C2 = 사이클 2
├────────────────────────────┤
│                            │
│         [게임 화면]         │
│        탭/스와이프 조작      │
│                            │
├────────────────────────────┤
│ [기술1][기술2][기술3][기술4]│
│ [가방] [팀] [대기] [💾저장] │ ← 저장 버튼
└────────────────────────────┘
```

### 조작

| 조작 | 동작 |
|------|------|
| 맵 탭 | 빈 타일=이동, 적=공격 |
| 스와이프 | 1칸 이동 |
| 길게 탭 | 자동 이동 |
| 기술 버튼 | 기술 → 방향 선택 |
| 💾 저장 | 저장 후 종료 or 계속 |

---

## 13. 의미 없는 요소 점검표

| 요소 | 존재 이유 | 없으면? |
|------|----------|--------|
| 배고픔 | 한 층 무한 레벨링 방지 | 난이도 붕괴 |
| 타입 상성 | 파티 조합 전략 | 1,200종 무의미 |
| 시너지 | 동료 모집 전략 | 아무나 모집 |
| 날씨 | 던전별 파티 고민 | 고정 팀 반복 |
| 장비 | 빌드 다양성 | 매번 같은 런 |
| 사이클 변이 | 같은 던전 = 다른 경험 | 반복 지루 |
| 장비 강화 | 사이클 성장 여지 | 사이클 3부터 벽 |
| 도전과제 | 장기 목표 + 해금 | "다음엔 뭐하지?" 없음 |
| 중간저장 | 긴 던전도 부담 없이 | 긴 던전 기피 |
| 탈출오브 | 데드엔드 방지 | 죽는 것 외 탈출 불가 |

**v2에서 제거/변경된 요소:**
- ~~7층 고정~~: 가변 층수 + 중간저장으로 대체
- ~~10분 제한~~: 제거. 원하는 만큼 플레이
- ~~난이도 모드 4단계~~: 사이클 시스템이 자동으로 난이도 상승
- ~~매혹/저주/부활~~: 중복 제거
- ~~복수 재화~~: 골드 하나
- ~~스택 진화~~: 던전 크롤러와 안 맞음

---

## 14. 기술적 아키텍처

### 기술 스택

| 구분 | 기술 | 용도 |
|------|------|------|
| 엔진 | Phaser 3 | 렌더링, 입력, 오디오, 타일맵 |
| 던전 생성 | rot.js | Digger/Uniform, FOV, A* |
| 언어 | TypeScript | 타입 안전성 |
| 오토타일링 | DTEF Masker (원본) | 47-state 비트마스크 |
| 저장 | localStorage + IndexedDB | 메타 + 런 중간저장 |
| 배포 | GitHub Pages (PWA) | 정적 호스팅 |
| 빌드 | Vite | 빌드/HMR |

### 저장 구조

```typescript
// localStorage: 메타 진행 (~50KB)
interface MetaSave {
  version: string
  gold: number
  cycle: number                    // 현재 사이클
  cycleProgress: DungeonId[]       // 이번 사이클에서 클리어한 던전
  pokedex: Record<PkmId, { seen: boolean; caught: boolean; evolved: boolean }>
  ownedPokemon: PokemonData[]
  team: { leader: string; members: string[] }
  challenges: Record<ChallengeId, { progress: number; completed: boolean }>
  unlocks: {
    starters: PkmId[]
    items: ItemId[]
    dungeons: DungeonId[]
    facilities: FacilityId[]
  }
  facilityLevels: Record<FacilityId, number>
  storage: ItemData[]
  settings: GameSettings
  stats: {
    totalFloors: number
    totalKills: number
    totalDeaths: number
    totalGoldEarned: number
    totalRecruits: number
    highestCycle: number
    bossesDefeated: string[]
    dungeonsCleared: string[]
  }
}

// IndexedDB: 런 중간저장 (~200KB)
interface RunSave {
  dungeonId: DungeonId
  cycle: number
  currentFloor: number
  mutations: MutationId[]          // 적용 중인 변이
  mapSeed: number                  // 맵 재생성용 시드
  team: RunPokemonState[]          // HP, PP, 상태이상 등 실시간
  inventory: ItemData[]
  explored: boolean[][]            // 탐색한 타일
  enemies: EnemyState[]            // 적 현황
  items: FloorItemState[]          // 바닥 아이템
  turnCount: number
  hunger: number
}
```

### 에셋 로딩

```
게임 시작:   UI + 타입 아이콘 + 공통 이펙트
던전 진입:   타일셋 1종 + BGM 1트랙
층 진입:     출현 포켓몬 ~10종
팀 편성:     리더/동료 스프라이트 + 초상화
```

---

## 15. 개발 로드맵

### Phase 1: MVP (한 판 돌아가기)
1. Phaser 3 + Vite 세팅 (모바일 세로)
2. rot.js 던전 생성 → DTEF 오토타일링 → 타일맵
3. 포켓몬 스프라이트 + 8방향 이동 + 카메라
4. 턴 시스템 (이동/대기/기본공격)
5. 전투 (HP/ATK/DEF + 타입상성)
6. 계단 + 보스
7. 해변동굴 1개 플레이 가능

### Phase 2: 핵심 시스템
8. 기술 (4슬롯, PP, 범위 6종)
9. 아이템 (줍기/사용/인벤토리)
10. 동료 AI (3인 파티)
11. 동료 모집
12. 배고픔
13. **중간저장 (계단/메뉴)**

### Phase 3: 메타 진행
14. 마을 + 시설
15. localStorage/IndexedDB 저장
16. 도전과제 + 해금
17. 도감
18. 진화

### Phase 4: 사이클 시스템
19. 사이클 스케일링 (×1.25 공식)
20. 변이 시스템 (10종)
21. 장비 강화 (대장간)
22. 사이클 보상/칭호

### Phase 5: 완성도
23. 던전 10개 + 날씨
24. 스타터 25종 + 패시브
25. 장비 20종 + TM 30종
26. BGM/SFX + PWA
27. 밸런싱/테스트

---

## 부록: 원본 레포 리소스 경로

```
스프라이트:      app/public/src/assets/pokemons/
초상화:         app/public/src/assets/portraits/
기술 이펙트:    app/public/src/assets/abilities{tps}/
투사체/피격:    app/public/src/assets/attacks{tps}/
상태이상:       app/public/src/assets/status{tps}/
타일셋:         app/public/src/assets/tilesets/
아이템 아이콘:   app/public/src/assets/item{tps}/
타입 아이콘:    app/public/src/assets/types/
날씨 파티클:    app/public/src/assets/environment/
사운드:         app/public/src/assets/sounds/

포켓몬 데이터:   app/models/colyseus-models/pokemon.ts
기술 로직:      app/core/abilities/abilities.ts
아이템 데이터:   app/types/enum/Item.ts
시너지:         app/types/enum/Synergy.ts
던전 매핑:      app/config/maps/regions.ts
오토타일링:     app/core/masker.ts + app/config/maps/tileset.ts
던전 생성:      app/core/design.ts + app/core/terrain.ts
애니메이션:     app/public/src/game/components/pokemon-animations.ts
프레임 타이밍:   app/types/delays.json
```
