(function(){const F=document.createElement("link").relList;if(F&&F.supports&&F.supports("modulepreload"))return;for(const B of document.querySelectorAll('link[rel="modulepreload"]'))I(B);new MutationObserver(B=>{for(const O of B)if(O.type==="childList")for(const f of O.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&I(f)}).observe(document,{childList:!0,subtree:!0});function b(B){const O={};return B.integrity&&(O.integrity=B.integrity),B.referrerPolicy&&(O.referrerPolicy=B.referrerPolicy),B.crossOrigin==="use-credentials"?O.credentials="include":B.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function I(B){if(B.ep)return;B.ep=!0;const O=b(B);fetch(B.href,O)}})();function Za(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}var si={exports:{}},Ja=si.exports,es;function Qa(){return es||(es=1,(function(G,F){(function(I,B){G.exports=B()})(Ja,()=>(()=>{var b={50792:(f=>{var x=Object.prototype.hasOwnProperty,e="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(e=!1));function m(t,s,l){this.fn=t,this.context=s,this.once=l||!1}function n(t,s,l,i,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new m(l,i||t,h),c=e?e+s:s;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],d]:t._events[c].push(d):(t._events[c]=d,t._eventsCount++),t}function r(t,s){--t._eventsCount===0?t._events=new o:delete t._events[s]}function a(){this._events=new o,this._eventsCount=0}a.prototype.eventNames=function(){var s=[],l,i;if(this._eventsCount===0)return s;for(i in l=this._events)x.call(l,i)&&s.push(e?i.slice(1):i);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(l)):s},a.prototype.listeners=function(s){var l=e?e+s:s,i=this._events[l];if(!i)return[];if(i.fn)return[i.fn];for(var h=0,d=i.length,c=new Array(d);h<d;h++)c[h]=i[h].fn;return c},a.prototype.listenerCount=function(s){var l=e?e+s:s,i=this._events[l];return i?i.fn?1:i.length:0},a.prototype.emit=function(s,l,i,h,d,c){var u=e?e+s:s;if(!this._events[u])return!1;var p=this._events[u],g=arguments.length,y,v;if(p.fn){switch(p.once&&this.removeListener(s,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,l),!0;case 3:return p.fn.call(p.context,l,i),!0;case 4:return p.fn.call(p.context,l,i,h),!0;case 5:return p.fn.call(p.context,l,i,h,d),!0;case 6:return p.fn.call(p.context,l,i,h,d,c),!0}for(v=1,y=new Array(g-1);v<g;v++)y[v-1]=arguments[v];p.fn.apply(p.context,y)}else{var S=p.length,w;for(v=0;v<S;v++)switch(p[v].once&&this.removeListener(s,p[v].fn,void 0,!0),g){case 1:p[v].fn.call(p[v].context);break;case 2:p[v].fn.call(p[v].context,l);break;case 3:p[v].fn.call(p[v].context,l,i);break;case 4:p[v].fn.call(p[v].context,l,i,h);break;default:if(!y)for(w=1,y=new Array(g-1);w<g;w++)y[w-1]=arguments[w];p[v].fn.apply(p[v].context,y)}}return!0},a.prototype.on=function(s,l,i){return n(this,s,l,i,!1)},a.prototype.once=function(s,l,i){return n(this,s,l,i,!0)},a.prototype.removeListener=function(s,l,i,h){var d=e?e+s:s;if(!this._events[d])return this;if(!l)return r(this,d),this;var c=this._events[d];if(c.fn)c.fn===l&&(!h||c.once)&&(!i||c.context===i)&&r(this,d);else{for(var u=0,p=[],g=c.length;u<g;u++)(c[u].fn!==l||h&&!c[u].once||i&&c[u].context!==i)&&p.push(c[u]);p.length?this._events[d]=p.length===1?p[0]:p:r(this,d)}return this},a.prototype.removeAllListeners=function(s){var l;return s?(l=e?e+s:s,this._events[l]&&r(this,l)):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,f.exports=a}),11517:((f,x,e)=>{var o=e(38829),m=function(n,r,a,t){for(var s=n[0],l=1;l<n.length;l++){var i=n[l];o(i,s,r,a,t),s=i}return n};f.exports=m}),80318:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s){return o(n,"angle",r,a,t,s)};f.exports=m}),60757:(f=>{var x=function(e,o,m){for(var n=0;n<e.length;n++){var r=e[n];o.call(m,r)}return e};f.exports=x}),69927:(f=>{var x=function(e,o,m){m===void 0&&(m=0);for(var n=m;n<e.length;n++){var r=e[n],a=!0;for(var t in o)r[t]!==o[t]&&(a=!1);if(a)return r}return null};f.exports=x}),32265:(f=>{var x=function(e,o,m){m===void 0&&(m=0);for(var n=e.length-1;n>=m;n--){var r=e[n],a=!0;for(var t in o)r[t]!==o[t]&&(a=!1);if(a)return r}return null};f.exports=x}),94420:((f,x,e)=>{var o=e(11879),m=e(60461),n=e(95540),r=e(29747),a=e(41481),t=new a({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1).setOrigin(0,0),s=function(l,i){i===void 0&&(i={});var h=i.hasOwnProperty("width"),d=i.hasOwnProperty("height"),c=n(i,"width",-1),u=n(i,"height",-1),p=n(i,"cellWidth",1),g=n(i,"cellHeight",p),y=n(i,"position",m.TOP_LEFT),v=n(i,"x",0),S=n(i,"y",0),w=0,T=0,C=c*p,M=u*g;t.setPosition(v,S),t.setSize(p,g);for(var E=0;E<l.length;E++)if(o(l[E],t,y),h&&c===-1)t.x+=p;else if(d&&u===-1)t.y+=g;else if(d&&!h){if(T+=g,t.y+=g,T===M&&(T=0,w+=p,t.y=S,t.x+=p,w===C))break}else if(w+=p,t.x+=p,w===C&&(w=0,T+=g,t.x=v,t.y+=g,T===M))break;return l};f.exports=s}),41721:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s){return o(n,"alpha",r,a,t,s)};f.exports=m}),67285:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s){return o(n,"x",r,a,t,s)};f.exports=m}),9074:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s,l,i){return a==null&&(a=r),o(n,"x",r,t,l,i),o(n,"y",a,s,l,i)};f.exports=m}),75222:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s){return o(n,"y",r,a,t,s)};f.exports=m}),22983:(f=>{var x=function(e,o,m,n){m===void 0&&(m=0),n===void 0&&(n=6.28);for(var r=m,a=(n-m)/e.length,t=o.x,s=o.y,l=o.radius,i=0;i<e.length;i++)e[i].x=t+l*Math.cos(r),e[i].y=s+l*Math.sin(r),r+=a;return e};f.exports=x}),95253:(f=>{var x=function(e,o,m,n){m===void 0&&(m=0),n===void 0&&(n=6.28);for(var r=m,a=(n-m)/e.length,t=o.width/2,s=o.height/2,l=0;l<e.length;l++)e[l].x=o.x+t*Math.cos(r),e[l].y=o.y+s*Math.sin(r),r+=a;return e};f.exports=x}),88505:((f,x,e)=>{var o=e(15258),m=e(26708),n=function(r,a,t){var s;t?s=m(a,t,r.length):s=o(a,r.length);for(var l=0;l<r.length;l++){var i=r[l],h=s[l];i.x=h.x,i.y=h.y}return r};f.exports=n}),41346:((f,x,e)=>{var o=e(14649),m=e(86003),n=e(49498),r=function(a,t,s){s===void 0&&(s=0);var l=o(t,!1,a.length);s>0?m(l,s):s<0&&n(l,Math.abs(s));for(var i=0;i<a.length;i++)a[i].x=l[i].x,a[i].y=l[i].y;return a};f.exports=r}),11575:((f,x,e)=>{var o=e(84993),m=function(n,r,a){var t=o({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},a),s=o({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},a),l=o({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},a);t.pop(),s.pop(),l.pop(),t=t.concat(s,l);for(var i=t.length/n.length,h=0,d=0;d<n.length;d++){var c=n[d],u=t[Math.floor(h)];c.x=u.x,c.y=u.y,h+=i}return n};f.exports=m}),29953:(f=>{var x=function(e,o,m){for(var n=0;n<e.length;n++){var r=e[n];r.anims&&r.anims.play(o,m)}return e};f.exports=x}),66979:(f=>{var x=function(e,o,m,n,r,a){n===void 0&&(n=0),r===void 0&&(r=0),a===void 0&&(a=1);var t,s=0,l=e.length;if(a===1)for(t=r;t<l;t++)e[t][o]+=m+s*n,s++;else for(t=r;t>=0;t--)e[t][o]+=m+s*n,s++;return e};f.exports=x}),43967:(f=>{var x=function(e,o,m,n,r,a){n===void 0&&(n=0),r===void 0&&(r=0),a===void 0&&(a=1);var t,s=0,l=e.length;if(a===1)for(t=r;t<l;t++)e[t][o]=m+s*n,s++;else for(t=r;t>=0;t--)e[t][o]=m+s*n,s++;return e};f.exports=x}),88926:((f,x,e)=>{var o=e(28176),m=function(n,r){for(var a=0;a<n.length;a++)o(r,n[a]);return n};f.exports=m}),33286:((f,x,e)=>{var o=e(24820),m=function(n,r){for(var a=0;a<n.length;a++)o(r,n[a]);return n};f.exports=m}),96e3:((f,x,e)=>{var o=e(65822),m=function(n,r){for(var a=0;a<n.length;a++)o(r,n[a]);return n};f.exports=m}),28789:((f,x,e)=>{var o=e(26597),m=function(n,r){for(var a=0;a<n.length;a++)o(r,n[a]);return n};f.exports=m}),97154:((f,x,e)=>{var o=e(90260),m=function(n,r){for(var a=0;a<n.length;a++)o(r,n[a]);return n};f.exports=m}),20510:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s){return o(n,"rotation",r,a,t,s)};f.exports=m}),91051:((f,x,e)=>{var o=e(1163),m=e(20339),n=function(r,a,t){for(var s=a.x,l=a.y,i=0;i<r.length;i++){var h=r[i];o(h,s,l,t,Math.max(1,m(h.x,h.y,s,l)))}return r};f.exports=n}),76332:((f,x,e)=>{var o=e(1163),m=function(n,r,a,t){var s=r.x,l=r.y;if(t===0)return n;for(var i=0;i<n.length;i++)o(n[i],s,l,a,t);return n};f.exports=m}),61619:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s){return o(n,"scaleX",r,a,t,s)};f.exports=m}),94868:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s,l,i){return a==null&&(a=r),o(n,"scaleX",r,t,l,i),o(n,"scaleY",a,s,l,i)};f.exports=m}),95532:((f,x,e)=>{var o=e(66979),m=function(n,r,a,t,s){return o(n,"scaleY",r,a,t,s)};f.exports=m}),8689:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"alpha",r,a,t,s)};f.exports=m}),2645:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t){return o(n,"blendMode",r,0,a,t)};f.exports=m}),32372:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"depth",r,a,t,s)};f.exports=m}),85373:(f=>{var x=function(e,o,m){for(var n=0;n<e.length;n++)e[n].setInteractive(o,m);return e};f.exports=x}),81583:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s,l,i){return a==null&&(a=r),o(n,"originX",r,t,l,i),o(n,"originY",a,s,l,i),n.forEach(function(h){h.updateDisplayOrigin()}),n};f.exports=m}),79939:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"rotation",r,a,t,s)};f.exports=m}),2699:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s,l,i){return a==null&&(a=r),o(n,"scaleX",r,t,l,i),o(n,"scaleY",a,s,l,i)};f.exports=m}),98739:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"scaleX",r,a,t,s)};f.exports=m}),98476:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"scaleY",r,a,t,s)};f.exports=m}),6207:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s,l,i){return a==null&&(a=r),o(n,"scrollFactorX",r,t,l,i),o(n,"scrollFactorY",a,s,l,i)};f.exports=m}),6607:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"scrollFactorX",r,a,t,s)};f.exports=m}),72248:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"scrollFactorY",r,a,t,s)};f.exports=m}),14036:(f=>{var x=function(e,o,m,n,r){for(var a=0;a<e.length;a++)e[a].setTint(o,m,n,r);return e};f.exports=x}),50159:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t){return o(n,"visible",r,0,a,t)};f.exports=m}),77597:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"x",r,a,t,s)};f.exports=m}),83194:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s,l,i){return a==null&&(a=r),o(n,"x",r,t,l,i),o(n,"y",a,s,l,i)};f.exports=m}),67678:((f,x,e)=>{var o=e(43967),m=function(n,r,a,t,s){return o(n,"y",r,a,t,s)};f.exports=m}),35850:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s){t===void 0&&(t=0),s===void 0&&(s=new o);var l,i,h=n.length;if(h===1)l=n[0].x,i=n[0].y,n[0].x=r,n[0].y=a;else{var d=1,c=0;t===0&&(c=h-1,d=h-2),l=n[c].x,i=n[c].y,n[c].x=r,n[c].y=a;for(var u=0;u<h;u++)if(!(d>=h||d===-1)){var p=n[d],g=p.x,y=p.y;p.x=l,p.y=i,l=g,i=y,t===0?d--:d++}}return s.x=l,s.y=i,s};f.exports=m}),8628:((f,x,e)=>{var o=e(33680),m=function(n){return o(n)};f.exports=m}),21837:((f,x,e)=>{var o=e(7602),m=function(n,r,a,t,s){s===void 0&&(s=!1);var l=Math.abs(t-a)/n.length,i;if(s)for(i=0;i<n.length;i++)n[i][r]+=o(i*l,a,t);else for(i=0;i<n.length;i++)n[i][r]=o(i*l,a,t);return n};f.exports=m}),21910:((f,x,e)=>{var o=e(54261),m=function(n,r,a,t,s){s===void 0&&(s=!1);var l=Math.abs(t-a)/n.length,i;if(s)for(i=0;i<n.length;i++)n[i][r]+=o(i*l,a,t);else for(i=0;i<n.length;i++)n[i][r]=o(i*l,a,t);return n};f.exports=m}),62054:(f=>{var x=function(e,o,m,n,r){if(r===void 0&&(r=!1),e.length===0)return e;if(e.length===1)return r?e[0][o]+=(n+m)/2:e[0][o]=(n+m)/2,e;var a=Math.abs(n-m)/(e.length-1),t;if(r)for(t=0;t<e.length;t++)e[t][o]+=t*a+m;else for(t=0;t<e.length;t++)e[t][o]=t*a+m;return e};f.exports=x}),79815:(f=>{var x=function(e){for(var o=0;o<e.length;o++)e[o].visible=!e[o].visible;return e};f.exports=x}),39665:((f,x,e)=>{var o=e(15994),m=function(n,r,a){a===void 0&&(a=0);for(var t=0;t<n.length;t++){var s=n[t];s.x=o(s.x,r.left-a,r.right+a),s.y=o(s.y,r.top-a,r.bottom+a)}return n};f.exports=m}),61061:((f,x,e)=>{f.exports={AlignTo:e(11517),Angle:e(80318),Call:e(60757),GetFirst:e(69927),GetLast:e(32265),GridAlign:e(94420),IncAlpha:e(41721),IncX:e(67285),IncXY:e(9074),IncY:e(75222),PlaceOnCircle:e(22983),PlaceOnEllipse:e(95253),PlaceOnLine:e(88505),PlaceOnRectangle:e(41346),PlaceOnTriangle:e(11575),PlayAnimation:e(29953),PropertyValueInc:e(66979),PropertyValueSet:e(43967),RandomCircle:e(88926),RandomEllipse:e(33286),RandomLine:e(96e3),RandomRectangle:e(28789),RandomTriangle:e(97154),Rotate:e(20510),RotateAround:e(91051),RotateAroundDistance:e(76332),ScaleX:e(61619),ScaleXY:e(94868),ScaleY:e(95532),SetAlpha:e(8689),SetBlendMode:e(2645),SetDepth:e(32372),SetHitArea:e(85373),SetOrigin:e(81583),SetRotation:e(79939),SetScale:e(2699),SetScaleX:e(98739),SetScaleY:e(98476),SetScrollFactor:e(6207),SetScrollFactorX:e(6607),SetScrollFactorY:e(72248),SetTint:e(14036),SetVisible:e(50159),SetX:e(77597),SetXY:e(83194),SetY:e(67678),ShiftPosition:e(35850),Shuffle:e(8628),SmootherStep:e(21910),SmoothStep:e(21837),Spread:e(62054),ToggleVisible:e(79815),WrapInRectangle:e(39665)}}),42099:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(74943),r=e(81957),a=e(41138),t=e(35154),s=e(90126),l=new m({initialize:function(h,d,c){this.manager=h,this.key=d,this.type="frame",this.frames=this.getFrames(h.textureManager,t(c,"frames",[]),t(c,"defaultTextureKey",null),t(c,"sortFrames",!0)),this.frameRate=t(c,"frameRate",null),this.duration=t(c,"duration",null),this.msPerFrame,this.skipMissedFrames=t(c,"skipMissedFrames",!0),this.delay=t(c,"delay",0),this.repeat=t(c,"repeat",0),this.repeatDelay=t(c,"repeatDelay",0),this.yoyo=t(c,"yoyo",!1),this.showBeforeDelay=t(c,"showBeforeDelay",!1),this.showOnStart=t(c,"showOnStart",!1),this.hideOnComplete=t(c,"hideOnComplete",!1),this.randomFrame=t(c,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(i,h,d,c){d===null&&c===null?(i.frameRate=24,i.duration=24/h*1e3):d&&c===null?(i.duration=d,i.frameRate=h/(d/1e3)):(i.frameRate=c,i.duration=h/c*1e3),i.msPerFrame=1e3/i.frameRate},addFrame:function(i){return this.addFrameAt(this.frames.length,i)},addFrameAt:function(i,h){var d=this.getFrames(this.manager.textureManager,h);if(d.length>0){if(i===0)this.frames=d.concat(this.frames);else if(i===this.frames.length)this.frames=this.frames.concat(d);else{var c=this.frames.slice(0,i),u=this.frames.slice(i);this.frames=c.concat(d,u)}this.updateFrameSequence()}return this},checkFrame:function(i){return i>=0&&i<this.frames.length},getFirstTick:function(i){i.accumulator=0,i.nextTick=i.frameRate===i.currentAnim.frameRate&&i.currentFrame.duration||i.msPerFrame},getFrameAt:function(i){return this.frames[i]},getFrames:function(i,h,d,c){c===void 0&&(c=!0);var u=[],p,g,y=1,v,S;if(typeof h=="string"){if(S=h,!i.exists(S))return console.warn('Texture "%s" not found',S),u;var w=i.get(S),T=w.getFrameNames();c&&s(T),h=[],T.forEach(function(D){h.push({key:S,frame:D})})}if(!Array.isArray(h)||h.length===0)return u;for(v=0;v<h.length;v++){var C=h[v],M=t(C,"key",d);if(M){var E=t(C,"frame",0),P=i.getFrame(M,E);if(!P){console.warn('Texture "%s" not found',M);continue}g=new a(M,E,y,P),g.duration=t(C,"duration",0),g.isFirst=!p,p&&(p.nextFrame=g,g.prevFrame=p),u.push(g),p=g,y++}}if(u.length>0){g.isLast=!0,g.nextFrame=u[0],u[0].prevFrame=g;var A=1/(u.length-1);for(v=0;v<u.length;v++)u[v].progress=v*A}return u},getNextTick:function(i){i.accumulator-=i.nextTick,i.nextTick=i.frameRate===i.currentAnim.frameRate&&i.currentFrame.duration||i.msPerFrame},getFrameByProgress:function(i){return i=o(i,0,1),r(i,this.frames,"progress")},nextFrame:function(i){var h=i.currentFrame;h.isLast?i.yoyo?this.handleYoyoFrame(i,!1):i.repeatCounter>0?i.inReverse&&i.forward?i.forward=!1:this.repeatAnimation(i):i.complete():this.updateAndGetNextTick(i,h.nextFrame)},handleYoyoFrame:function(i,h){if(h||(h=!1),i.inReverse===!h&&i.repeatCounter>0){(i.repeatDelay===0||i.pendingRepeat)&&(i.forward=h),this.repeatAnimation(i);return}if(i.inReverse!==h&&i.repeatCounter===0){i.complete();return}i.forward=h;var d=h?i.currentFrame.nextFrame:i.currentFrame.prevFrame;this.updateAndGetNextTick(i,d)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(i){var h=i.currentFrame;h.isFirst?i.yoyo?this.handleYoyoFrame(i,!0):i.repeatCounter>0?i.inReverse&&!i.forward?this.repeatAnimation(i):(i.forward=!0,this.repeatAnimation(i)):i.complete():this.updateAndGetNextTick(i,h.prevFrame)},updateAndGetNextTick:function(i,h){i.setCurrentFrame(h),this.getNextTick(i)},removeFrame:function(i){var h=this.frames.indexOf(i);return h!==-1&&this.removeFrameAt(h),this},removeFrameAt:function(i){return this.frames.splice(i,1),this.updateFrameSequence(),this},repeatAnimation:function(i){if(i._pendingStop===2){if(i._pendingStopValue===0)return i.stop();i._pendingStopValue--}i.repeatDelay>0&&!i.pendingRepeat?(i.pendingRepeat=!0,i.accumulator-=i.nextTick,i.nextTick+=i.repeatDelay):(i.repeatCounter--,i.forward?i.setCurrentFrame(i.currentFrame.nextFrame):i.setCurrentFrame(i.currentFrame.prevFrame),i.isPlaying&&(this.getNextTick(i),i.handleRepeat()))},toJSON:function(){var i={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(h){i.frames.push(h.toJSON())}),i},updateFrameSequence:function(){for(var i=this.frames.length,h=1/(i-1),d,c=0;c<i;c++)d=this.frames[c],d.index=c+1,d.isFirst=!1,d.isLast=!1,d.progress=c*h,c===0?(d.isFirst=!0,i===1?(d.isLast=!0,d.nextFrame=d,d.prevFrame=d):(d.isLast=!1,d.prevFrame=this.frames[i-1],d.nextFrame=this.frames[c+1])):c===i-1&&i>1?(d.isLast=!0,d.prevFrame=this.frames[i-2],d.nextFrame=this.frames[0]):i>1&&(d.prevFrame=this.frames[c-1],d.nextFrame=this.frames[c+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var i=0;i<this.frames.length;i++)this.frames[i].destroy();this.frames=[],this.manager=null}});f.exports=l}),41138:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t,s,l){l===void 0&&(l=!1),this.textureKey=r,this.textureFrame=a,this.index=t,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=l},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});f.exports=m}),60848:((f,x,e)=>{var o=e(42099),m=e(83419),n=e(90330),r=e(50792),a=e(74943),t=e(8443),s=e(95540),l=e(35154),i=e(36383),h=e(20283),d=e(41836),c=new m({Extends:r,initialize:function(p){r.call(this),this.game=p,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",p.events.once(t.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(t.DESTROY,this.destroy,this)},addMix:function(u,p,g){var y=this.anims,v=this.mixes,S=typeof u=="string"?u:u.key,w=typeof p=="string"?p:p.key;if(y.has(S)&&y.has(w)){var T=v.get(S);T||(T={}),T[w]=g,v.set(S,T)}return this},removeMix:function(u,p){var g=this.mixes,y=typeof u=="string"?u:u.key,v=g.get(y);if(v)if(p){var S=typeof p=="string"?p:p.key;v.hasOwnProperty(S)&&delete v[S]}else p||g.delete(y);return this},getMix:function(u,p){var g=this.mixes,y=typeof u=="string"?u:u.key,v=typeof p=="string"?p:p.key,S=g.get(y);return S&&S.hasOwnProperty(v)?S[v]:0},add:function(u,p){return this.anims.has(u)?(console.warn("Animation key exists: "+u),this):(p.key=u,this.anims.set(u,p),this.emit(a.ADD_ANIMATION,u,p),this)},exists:function(u){return this.anims.has(u)},createFromAseprite:function(u,p,g){var y=[],v=this.game.cache.json.get(u);if(!v)return console.warn("No Aseprite data found for: "+u),y;var S=this,w=l(v,"meta",null),T=l(v,"frames",null);if(w&&T){var C=l(w,"frameTags",[]);C.forEach(function(M){var E=[],P=s(M,"name",null),A=s(M,"from",0),D=s(M,"to",0),W=s(M,"direction","forward");if(P&&(!p||p&&p.indexOf(P)>-1)){for(var V=0,K=A;K<=D;K++){var X=K.toString(),R=T[X];if(R){var H=s(R,"duration",i.MAX_SAFE_INTEGER);E.push({key:u,frame:X,duration:H}),V+=H}}W==="reverse"&&(E=E.reverse());var L={key:P,frames:E,duration:V,yoyo:W==="pingpong"},N;g?g.anims&&(N=g.anims.create(L)):N=S.create(L),N&&y.push(N)}})}return y},create:function(u){var p=u.key,g=!1;return p&&(g=this.get(p),g?console.warn("AnimationManager key already exists: "+p):(g=new o(this,p,u),this.anims.set(p,g),this.emit(a.ADD_ANIMATION,p,g))),g},fromJSON:function(u,p){p===void 0&&(p=!1),p&&this.anims.clear(),typeof u=="string"&&(u=JSON.parse(u));var g=[];if(u.hasOwnProperty("anims")&&Array.isArray(u.anims)){for(var y=0;y<u.anims.length;y++)g.push(this.create(u.anims[y]));u.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=u.globalTimeScale)}else u.hasOwnProperty("key")&&u.type==="frame"&&g.push(this.create(u));return g},generateFrameNames:function(u,p){var g=l(p,"prefix",""),y=l(p,"start",0),v=l(p,"end",0),S=l(p,"suffix",""),w=l(p,"zeroPad",0),T=l(p,"outputArray",[]),C=l(p,"frames",!1);if(!this.textureManager.exists(u))return console.warn('Texture "%s" not found',u),T;var M=this.textureManager.get(u);if(!M)return T;var E;if(p)for(C||(C=h(y,v)),E=0;E<C.length;E++){var P=g+d(C[E],w,"0",1)+S;M.has(P)?T.push({key:u,frame:P}):console.warn('Frame "%s" not found in texture "%s"',P,u)}else for(C=M.getFrameNames(),E=0;E<C.length;E++)T.push({key:u,frame:C[E]});return T},generateFrameNumbers:function(u,p){var g=l(p,"start",0),y=l(p,"end",-1),v=l(p,"first",!1),S=l(p,"outputArray",[]),w=l(p,"frames",!1);if(!this.textureManager.exists(u))return console.warn('Texture "%s" not found',u),S;var T=this.textureManager.get(u);if(!T)return S;v&&T.has(v)&&S.push({key:u,frame:v}),w||(y===-1&&(y=T.frameTotal-2),w=h(g,y));for(var C=0;C<w.length;C++){var M=w[C];T.has(M)?S.push({key:u,frame:M}):console.warn('Frame "%s" not found in texture "%s"',M,u)}return S},get:function(u){return this.anims.get(u)},getAnimsFromTexture:function(u){for(var p=this.textureManager.get(u),g=p.key,y=this.anims.getArray(),v=[],S=0;S<y.length;S++)for(var w=y[S],T=w.frames,C=0;C<T.length;C++)if(T[C].textureKey===g){v.push(w.key);break}return v},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(u,p){Array.isArray(p)||(p=[p]);for(var g=0;g<p.length;g++)p[g].anims.play(u);return this},staggerPlay:function(u,p,g,y){g===void 0&&(g=0),y===void 0&&(y=!0),Array.isArray(p)||(p=[p]);var v=p.length;y||v--;for(var S=0;S<p.length;S++){var w=g<0?Math.abs(g)*(v-S):g*S;p[S].anims.playAfterDelay(u,w)}return this},remove:function(u){var p=this.get(u);return p&&(this.emit(a.REMOVE_ANIMATION,u,p),this.anims.delete(u),this.removeMix(u)),p},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(u){var p={anims:[],globalTimeScale:this.globalTimeScale};return u!==void 0&&u!==""?p.anims.push(this.anims.get(u).toJSON()):this.anims.each(function(g,y){p.anims.push(y.toJSON())}),p},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});f.exports=c}),9674:((f,x,e)=>{var o=e(42099),m=e(30976),n=e(83419),r=e(90330),a=e(74943),t=e(95540),s=new n({initialize:function(i){this.parent=i,this.animationManager=i.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(l){var i=this.parent;if(l===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,i;Array.isArray(l)||(l=[l]);for(var h=0;h<l.length;h++){var d=l[h];this.nextAnim?this.nextAnimsQueue.push(d):this.nextAnim=d}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(l){this.isPlaying&&this.stop();var i=this.animationManager,h=typeof l=="string"?l:t(l,"key",null),d=this.exists(h)?this.get(h):i.get(h);if(!d)console.warn("Missing animation: "+h);else{this.currentAnim=d;var c=d.getTotalFrames(),u=t(l,"frameRate",d.frameRate),p=t(l,"duration",d.duration);d.calculateDuration(this,c,p,u),this.delay=t(l,"delay",d.delay),this.repeat=t(l,"repeat",d.repeat),this.repeatDelay=t(l,"repeatDelay",d.repeatDelay),this.yoyo=t(l,"yoyo",d.yoyo),this.showBeforeDelay=t(l,"showBeforeDelay",d.showBeforeDelay),this.showOnStart=t(l,"showOnStart",d.showOnStart),this.hideOnComplete=t(l,"hideOnComplete",d.hideOnComplete),this.skipMissedFrames=t(l,"skipMissedFrames",d.skipMissedFrames),this.randomFrame=t(l,"randomFrame",d.randomFrame),this.timeScale=t(l,"timeScale",this.timeScale);var g=t(l,"startFrame",0);g>c&&(g=0),this.randomFrame&&(g=m(0,c-1));var y=d.frames[g];g===0&&!this.forward&&(y=d.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(l){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),l!==void 0&&this.setCurrentFrame(l),this.parent},resume:function(l){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),l!==void 0&&this.setCurrentFrame(l),this.parent},playAfterDelay:function(l,i){if(!this.isPlaying)this.delayCounter=i,this.play(l,!0);else{var h=this.nextAnim,d=this.nextAnimsQueue;h&&d.unshift(h),this.nextAnim=l,this._pendingStop=1,this._pendingStopValue=i}return this.parent},playAfterRepeat:function(l,i){if(i===void 0&&(i=1),!this.isPlaying)this.play(l);else{var h=this.nextAnim,d=this.nextAnimsQueue;h&&d.unshift(h),this.repeatCounter!==-1&&i>this.repeatCounter&&(i=this.repeatCounter),this.nextAnim=l,this._pendingStop=2,this._pendingStopValue=i}return this.parent},play:function(l,i){i===void 0&&(i=!1);var h=this.currentAnim,d=this.parent,c=typeof l=="string"?l:l.key;if(i&&this.isPlaying&&h.key===c)return d;if(h&&this.isPlaying){var u=this.animationManager.getMix(h.key,l);if(u>0)return this.playAfterDelay(l,u)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(l)},playReverse:function(l,i){i===void 0&&(i=!1);var h=typeof l=="string"?l:l.key;return i&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(l))},startAnimation:function(l){this.load(l);var i=this.currentAnim,h=this.parent;return i&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),h},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(l,i){var h=this.currentAnim;if(h){var d=this.currentFrame,c=this.parent,u=d.textureFrame;c.emit(l,h,d,c,u),i&&c.emit(i+h.key,h,d,c,u)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var l=this.currentFrame;if(!l)return 0;var i=l.progress;return this.inReverse&&(i*=-1),i},setProgress:function(l){return this.forward||(l=1-l),this.setCurrentFrame(this.currentAnim.getFrameByProgress(l)),this.parent},setRepeat:function(l){return this.repeatCounter=l===-1?Number.MAX_VALUE:l,this.parent},globalRemove:function(l,i){i===void 0&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(l,i){l===void 0&&(l=!1),i===void 0&&(i=!1);var h=this.currentAnim,d=this.parent;return h?(i&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),h.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!l,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(h.frames[0]),this.parent):d},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var l=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(l)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var l=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(l)}return this.parent},stopAfterDelay:function(l){return this._pendingStop=1,this._pendingStopValue=l,this.parent},stopAfterRepeat:function(l){return l===void 0&&(l=1),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=l,this.parent},stopOnFrame:function(l){return this._pendingStop=3,this._pendingStopValue=l,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(l,i){var h=this.currentAnim;if(!(!this.isPlaying||!h||h.paused)){if(this.accumulator+=i*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?h.nextFrame(this):h.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var d=0;do this.forward?h.nextFrame(this):h.previousFrame(this),d++;while(this.isPlaying&&this.accumulator>this.nextTick&&d<60)}}},setCurrentFrame:function(l){var i=this.parent;return this.currentFrame=l,i.texture=l.frame.texture,i.frame=l.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),l.setAlpha&&(i.alpha=l.alpha),i.setSizeToFrame(),i._originComponent&&(l.frame.customPivot?i.setOrigin(l.frame.pivotX,l.frame.pivotY):i.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===l&&this.stop()),i},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(l){return this.anims?this.anims.get(l):null},exists:function(l){return this.anims?this.anims.has(l):!1},create:function(l){var i=l.key,h=!1;return i&&(h=this.get(i),h?console.warn("Animation key already exists: "+i):(h=new o(this,i,l),this.anims||(this.anims=new r),this.anims.set(i,h))),h},createFromAseprite:function(l,i){return this.animationManager.createFromAseprite(l,i,this.parent)},generateFrameNames:function(l,i){return this.animationManager.generateFrameNames(l,i)},generateFrameNumbers:function(l,i){return this.animationManager.generateFrameNumbers(l,i)},remove:function(l){var i=this.get(l);return i&&(this.currentAnim===i&&this.stop(),this.anims.delete(l)),i},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});f.exports=s}),57090:(f=>{f.exports="add"}),25312:(f=>{f.exports="animationcomplete"}),89580:(f=>{f.exports="animationcomplete-"}),52860:(f=>{f.exports="animationrepeat"}),63850:(f=>{f.exports="animationrestart"}),99085:(f=>{f.exports="animationstart"}),28087:(f=>{f.exports="animationstop"}),1794:(f=>{f.exports="animationupdate"}),52562:(f=>{f.exports="pauseall"}),57953:(f=>{f.exports="remove"}),68339:(f=>{f.exports="resumeall"}),74943:((f,x,e)=>{f.exports={ADD_ANIMATION:e(57090),ANIMATION_COMPLETE:e(25312),ANIMATION_COMPLETE_KEY:e(89580),ANIMATION_REPEAT:e(52860),ANIMATION_RESTART:e(63850),ANIMATION_START:e(99085),ANIMATION_STOP:e(28087),ANIMATION_UPDATE:e(1794),PAUSE_ALL:e(52562),REMOVE_ANIMATION:e(57953),RESUME_ALL:e(68339)}}),60421:((f,x,e)=>{f.exports={Animation:e(42099),AnimationFrame:e(41138),AnimationManager:e(60848),AnimationState:e(9674),Events:e(74943)}}),2161:((f,x,e)=>{var o=e(83419),m=e(90330),n=e(50792),r=e(24736),a=new o({initialize:function(){this.entries=new m,this.events=new n},add:function(t,s){return this.entries.set(t,s),this.events.emit(r.ADD,this,t,s),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var s=this.get(t);return s&&(this.entries.delete(t),this.events.emit(r.REMOVE,this,t,s.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});f.exports=a}),24047:((f,x,e)=>{var o=e(2161),m=e(83419),n=e(8443),r=new m({initialize:function(t){this.game=t,this.binary=new o,this.bitmapFont=new o,this.json=new o,this.physics=new o,this.shader=new o,this.audio=new o,this.video=new o,this.text=new o,this.html=new o,this.obj=new o,this.tilemap=new o,this.xml=new o,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(a){return this.custom.hasOwnProperty(a)||(this.custom[a]=new o),this.custom[a]},destroy:function(){for(var a=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],t=0;t<a.length;t++)this[a[t]].destroy(),this[a[t]]=null;for(var s in this.custom)this.custom[s].destroy();this.custom=null,this.game=null}});f.exports=r}),51464:(f=>{f.exports="add"}),59261:(f=>{f.exports="remove"}),24736:((f,x,e)=>{f.exports={ADD:e(51464),REMOVE:e(59261)}}),83388:((f,x,e)=>{f.exports={BaseCache:e(2161),CacheManager:e(24047),Events:e(24736)}}),71911:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(39506),r=e(50792),a=e(19715),t=e(87841),s=e(61340),l=e(80333),i=e(26099),h=new o({Extends:r,Mixins:[m.AlphaSingle,m.Visible],initialize:function(c,u,p,g){c===void 0&&(c=0),u===void 0&&(u=0),p===void 0&&(p=0),g===void 0&&(g=0),r.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new t,this.dirty=!0,this._x=c,this._y=u,this._width=p,this._height=g,this._bounds=new t,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new s,this.transparent=!0,this.backgroundColor=l("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new i(p/2,g/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(d){this.renderList.push(d)},setOrigin:function(d,c){return d===void 0&&(d=.5),c===void 0&&(c=d),this.originX=d,this.originY=c,this},getScroll:function(d,c,u){u===void 0&&(u=new i);var p=this.width*.5,g=this.height*.5;return u.x=d-p,u.y=c-g,this.useBounds&&(u.x=this.clampX(u.x),u.y=this.clampY(u.y)),u},centerOnX:function(d){var c=this.width*.5;return this.midPoint.x=d,this.scrollX=d-c,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(d){var c=this.height*.5;return this.midPoint.y=d,this.scrollY=d-c,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(d,c){return this.centerOnX(d),this.centerOnY(c),this},centerToBounds:function(){if(this.useBounds){var d=this._bounds,c=this.width*.5,u=this.height*.5;this.midPoint.set(d.centerX,d.centerY),this.scrollX=d.centerX-c,this.scrollY=d.centerY-u}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(d){if(this.disableCull)return d;var c=this.matrix.matrix,u=c[0],p=c[1],g=c[2],y=c[3],v=u*y-p*g;if(!v)return d;var S=c[4],w=c[5],T=this.scrollX,C=this.scrollY,M=this.width,E=this.height,P=this.y,A=P+E,D=this.x,W=D+M,V=this.culledObjects,K=d.length;v=1/v,V.length=0;for(var X=0;X<K;++X){var R=d[X];if(!R.hasOwnProperty("width")||R.parentContainer){V.push(R);continue}var H=R.width,L=R.height,N=R.x-T*R.scrollFactorX-H*R.originX,z=R.y-C*R.scrollFactorY-L*R.originY,U=N*u+z*g+S,Y=N*p+z*y+w,$=(N+H)*u+(z+L)*g+S,Z=(N+H)*p+(z+L)*y+w;$>D&&U<W&&Z>P&&Y<A&&V.push(R)}return V},getWorldPoint:function(d,c,u){u===void 0&&(u=new i);var p=this.matrix.matrix,g=p[0],y=p[1],v=p[2],S=p[3],w=p[4],T=p[5],C=g*S-y*v;if(!C)return u.x=d,u.y=c,u;C=1/C;var M=S*C,E=-y*C,P=-v*C,A=g*C,D=(v*T-S*w)*C,W=(y*w-g*T)*C,V=Math.cos(this.rotation),K=Math.sin(this.rotation),X=this.zoomX,R=this.zoomY,H=this.scrollX,L=this.scrollY,N=d+(H*V-L*K)*X,z=c+(H*K+L*V)*R;return u.x=N*M+z*P+D,u.y=N*E+z*A+W,u},ignore:function(d){var c=this.id;Array.isArray(d)||(d=[d]);for(var u=0;u<d.length;u++){var p=d[u];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=c}return this},clampX:function(d){var c=this._bounds,u=this.displayWidth,p=c.x+(u-this.width)/2,g=Math.max(p,p+c.width-u);return d<p?d=p:d>g&&(d=g),d},clampY:function(d){var c=this._bounds,u=this.displayHeight,p=c.y+(u-this.height)/2,g=Math.max(p,p+c.height-u);return d<p?d=p:d>g&&(d=g),d},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(d){return d===void 0&&(d=0),this.rotation=n(d),this},setBackgroundColor:function(d){return d===void 0&&(d="rgba(0,0,0,0)"),this.backgroundColor=l(d),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(d,c,u,p,g){return g===void 0&&(g=!1),this._bounds.setTo(d,c,u,p),this.dirty=!0,this.useBounds=!0,g?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(d){d===void 0&&(d=new t);var c=this._bounds;return d.setTo(c.x,c.y,c.width,c.height),d},setName:function(d){return d===void 0&&(d=""),this.name=d,this},setPosition:function(d,c){return c===void 0&&(c=d),this.x=d,this.y=c,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setRoundPixels:function(d){return this.roundPixels=d,this},setScene:function(d,c){c===void 0&&(c=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=d,this.isSceneCamera=c;var u=d.sys;return this.sceneManager=u.game.scene,this.scaleManager=u.scale,this.cameraManager=u.cameras,this.updateSystem(),this},setScroll:function(d,c){return c===void 0&&(c=d),this.scrollX=d,this.scrollY=c,this},setSize:function(d,c){return c===void 0&&(c=d),this.width=d,this.height=c,this},setViewport:function(d,c,u,p){return this.x=d,this.y=c,this.width=u,this.height=p,this},setZoom:function(d,c){return d===void 0&&(d=1),c===void 0&&(c=d),d===0&&(d=.001),c===0&&(c=.001),this.zoomX=d,this.zoomY=c,this},setMask:function(d,c){return c===void 0&&(c=!0),this.mask=d,this._maskCamera=c?this.cameraManager.default:this,this},clearMask:function(d){return d===void 0&&(d=!1),d&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var d={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(d.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),d},update:function(){},setIsSceneCamera:function(d){return this.isSceneCamera=d,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var d=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,c=this.sceneManager;d&&!this._customViewport?c.customViewports++:!d&&this._customViewport&&c.customViewports--,this.dirty=!0,this._customViewport=d}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(d){this._x=d,this.updateSystem()}},y:{get:function(){return this._y},set:function(d){this._y=d,this.updateSystem()}},width:{get:function(){return this._width},set:function(d){this._width=d,this.updateSystem()}},height:{get:function(){return this._height},set:function(d){this._height=d,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(d){d!==this._scrollX&&(this._scrollX=d,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(d){d!==this._scrollY&&(this._scrollY=d,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(d){this._zoomX=d,this._zoomY=d,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(d){this._zoomX=d,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(d){this._zoomY=d,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});f.exports=h}),38058:((f,x,e)=>{var o=e(71911),m=e(67502),n=e(45319),r=e(83419),a=e(31401),t=e(20052),s=e(19715),l=e(28915),i=e(87841),h=e(26099),d=new r({Extends:o,Mixins:[a.PostPipeline],initialize:function(u,p,g,y){o.call(this,u,p,g,y),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new t.Fade(this),this.flashEffect=new t.Flash(this),this.shakeEffect=new t.Shake(this),this.panEffect=new t.Pan(this),this.rotateToEffect=new t.RotateTo(this),this.zoomEffect=new t.Zoom(this),this.lerp=new h(1,1),this.followOffset=new h,this.deadzone=null,this._follow=null},setDeadzone:function(c,u){if(c===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=c,this.deadzone.height=u):this.deadzone=new i(0,0,c,u),this._follow){var p=this.width/2,g=this.height/2,y=this._follow.x-this.followOffset.x,v=this._follow.y-this.followOffset.y;this.midPoint.set(y,v),this.scrollX=y-p,this.scrollY=v-g}m(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(c,u,p,g,y,v){return this.fadeEffect.start(!1,c,u,p,g,!0,y,v)},fadeOut:function(c,u,p,g,y,v){return this.fadeEffect.start(!0,c,u,p,g,!0,y,v)},fadeFrom:function(c,u,p,g,y,v,S){return this.fadeEffect.start(!1,c,u,p,g,y,v,S)},fade:function(c,u,p,g,y,v,S){return this.fadeEffect.start(!0,c,u,p,g,y,v,S)},flash:function(c,u,p,g,y,v,S){return this.flashEffect.start(c,u,p,g,y,v,S)},shake:function(c,u,p,g,y){return this.shakeEffect.start(c,u,p,g,y)},pan:function(c,u,p,g,y,v,S){return this.panEffect.start(c,u,p,g,y,v,S)},rotateTo:function(c,u,p,g,y,v,S){return this.rotateToEffect.start(c,u,p,g,y,v,S)},zoomTo:function(c,u,p,g,y,v){return this.zoomEffect.start(c,u,p,g,y,v)},preRender:function(){this.renderList.length=0;var c=this.width,u=this.height,p=c*.5,g=u*.5,y=this.zoomX,v=this.zoomY,S=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(y)&&Number.isInteger(v);var w=c*this.originX,T=u*this.originY,C=this._follow,M=this.deadzone,E=this.scrollX,P=this.scrollY;M&&m(M,this.midPoint.x,this.midPoint.y);var A=!1;if(C&&!this.panEffect.isRunning){var D=this.lerp,W=C.x-this.followOffset.x,V=C.y-this.followOffset.y;M?(W<M.x?E=l(E,E-(M.x-W),D.x):W>M.right&&(E=l(E,E+(W-M.right),D.x)),V<M.y?P=l(P,P-(M.y-V),D.y):V>M.bottom&&(P=l(P,P+(V-M.bottom),D.y))):(E=l(E,W-w,D.x),P=l(P,V-T,D.y)),A=!0}this.roundPixels&&(E=Math.floor(E),P=Math.floor(P)),this.useBounds&&(E=this.clampX(E),P=this.clampY(P)),this.scrollX=E,this.scrollY=P;var K=E+p,X=P+g;this.midPoint.set(K,X);var R=Math.floor(c/y+.5),H=Math.floor(u/v+.5),L=Math.floor(K-R/2+.5),N=Math.floor(X-H/2+.5);this.worldView.setTo(L,N,R,H),S.applyITRS(Math.floor(this.x+w+.5),Math.floor(this.y+T+.5),this.rotation,y,v),S.translate(-w,-T),this.shakeEffect.preRender(),A&&this.emit(s.FOLLOW_UPDATE,this,C)},setLerp:function(c,u){return c===void 0&&(c=1),u===void 0&&(u=c),this.lerp.set(c,u),this},setFollowOffset:function(c,u){return c===void 0&&(c=0),u===void 0&&(u=0),this.followOffset.set(c,u),this},startFollow:function(c,u,p,g,y,v){u===void 0&&(u=!1),p===void 0&&(p=1),g===void 0&&(g=p),y===void 0&&(y=0),v===void 0&&(v=y),this._follow=c,this.roundPixels=u,p=n(p,0,1),g=n(g,0,1),this.lerp.set(p,g),this.followOffset.set(y,v);var S=this.width/2,w=this.height/2,T=c.x-y,C=c.y-v;return this.midPoint.set(T,C),this.scrollX=T-S,this.scrollY=C-w,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(c,u){this.visible&&(this.rotateToEffect.update(c,u),this.panEffect.update(c,u),this.zoomEffect.update(c,u),this.shakeEffect.update(c,u),this.flashEffect.update(c,u),this.fadeEffect.update(c,u))},destroy:function(){this.resetFX(),o.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});f.exports=d}),32743:((f,x,e)=>{var o=e(38058),m=e(83419),n=e(95540),r=e(37277),a=e(37303),t=e(97480),s=e(44594),l=new m({initialize:function(h){this.scene=h,this.systems=h.sys,this.roundPixels=h.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,h.sys.events.once(s.BOOT,this.boot,this),h.sys.events.on(s.START,this.start,this)},boot:function(){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new o(0,0,i.scale.width,i.scale.height).setScene(this.scene),i.game.scale.on(t.RESIZE,this.onResize,this),this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){if(!this.main){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0]}var h=this.systems.events;h.on(s.UPDATE,this.update,this),h.once(s.SHUTDOWN,this.shutdown,this)},add:function(i,h,d,c,u,p){i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),u===void 0&&(u=!1),p===void 0&&(p="");var g=new o(i,h,d,c);return g.setName(p),g.setScene(this.scene),g.setRoundPixels(this.roundPixels),g.id=this.getNextID(),this.cameras.push(g),u&&(this.main=g),g},addExisting:function(i,h){h===void 0&&(h=!1);var d=this.cameras.indexOf(i);return d===-1?(i.id=this.getNextID(),i.setRoundPixels(this.roundPixels),this.cameras.push(i),h&&(this.main=i),i):null},getNextID:function(){for(var i=this.cameras,h=1,d=0;d<32;d++){for(var c=!1,u=0;u<i.length;u++){var p=i[u];if(p&&p.id===h){c=!0;continue}}if(c)h=h<<1;else return h}return 0},getTotal:function(i){i===void 0&&(i=!1);for(var h=0,d=this.cameras,c=0;c<d.length;c++){var u=d[c];(!i||i&&u.visible)&&h++}return h},fromJSON:function(i){Array.isArray(i)||(i=[i]);for(var h=this.scene.sys.scale.width,d=this.scene.sys.scale.height,c=0;c<i.length;c++){var u=i[c],p=n(u,"x",0),g=n(u,"y",0),y=n(u,"width",h),v=n(u,"height",d),S=this.add(p,g,y,v);S.name=n(u,"name",""),S.zoom=n(u,"zoom",1),S.rotation=n(u,"rotation",0),S.scrollX=n(u,"scrollX",0),S.scrollY=n(u,"scrollY",0),S.roundPixels=n(u,"roundPixels",!1),S.visible=n(u,"visible",!0);var w=n(u,"backgroundColor",!1);w&&S.setBackgroundColor(w);var T=n(u,"bounds",null);if(T){var C=n(T,"x",0),M=n(T,"y",0),E=n(T,"width",h),P=n(T,"height",d);S.setBounds(C,M,E,P)}}return this},getCamera:function(i){for(var h=this.cameras,d=0;d<h.length;d++)if(h[d].name===i)return h[d];return null},getCamerasBelowPointer:function(i){for(var h=this.cameras,d=i.x,c=i.y,u=[],p=0;p<h.length;p++){var g=h[p];g.visible&&g.inputEnabled&&a(g,d,c)&&u.unshift(g)}return u},remove:function(i,h){h===void 0&&(h=!0),Array.isArray(i)||(i=[i]);for(var d=0,c=this.cameras,u=0;u<i.length;u++){var p=c.indexOf(i[u]);p!==-1&&(h?c[p].destroy():c[p].renderList=[],c.splice(p,1),d++)}return!this.main&&c[0]&&(this.main=c[0]),d},render:function(i,h){for(var d=this.scene,c=this.cameras,u=0;u<c.length;u++){var p=c[u];if(p.visible&&p.alpha>0){p.preRender();var g=this.getVisibleChildren(h.getChildren(),p);i.render(d,g,p)}}},getVisibleChildren:function(i,h){return i.filter(function(d){return d.willRender(h)})},resetAll:function(){for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(i,h){for(var d=0;d<this.cameras.length;d++)this.cameras[d].update(i,h)},onResize:function(i,h,d,c,u){for(var p=0;p<this.cameras.length;p++){var g=this.cameras[p];g._x===0&&g._y===0&&g._width===c&&g._height===u&&g.setSize(h.width,h.height)}},resize:function(i,h){for(var d=0;d<this.cameras.length;d++)this.cameras[d].setSize(i,h)},shutdown:function(){this.main=void 0;for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();this.cameras=[];var h=this.systems.events;h.off(s.UPDATE,this.update,this),h.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(s.START,this.start,this),this.systems.events.off(s.DESTROY,this.destroy,this),this.systems.game.scale.off(t.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});r.register("CameraManager",l,"cameras"),f.exports=l}),5020:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(19715),r=new m({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,t,s,l,i,h,d,c){if(a===void 0&&(a=!0),t===void 0&&(t=1e3),s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene),!h&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=t,this.direction=a,this.progress=0,this.red=s,this.green=l,this.blue=i,this.alpha=a?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=c;var u=a?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(u,this.camera,this,t,s,l,i),this.camera},update:function(a,t){this.isRunning&&(this._elapsed+=t,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(a){if(!this.isRunning&&!this.isComplete)return!1;var t=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(a,t){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera,l=this.red/255,i=this.green/255,h=this.blue/255;return a.drawFillRect(s.x,s.y,s.width,s.height,t(h,i,l,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var a=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(a,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});f.exports=r}),10662:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(19715),r=new m({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(a,t,s,l,i,h,d){return a===void 0&&(a=250),t===void 0&&(t=255),s===void 0&&(s=255),l===void 0&&(l=255),i===void 0&&(i=!1),h===void 0&&(h=null),d===void 0&&(d=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,this.red=t,this.green=s,this.blue=l,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=h,this._onUpdateScope=d,this.camera.emit(n.FLASH_START,this.camera,this,a,t,s,l),this.camera)},update:function(a,t){this.isRunning&&(this._elapsed+=t,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(a){if(!this.isRunning)return!1;var t=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(a,t){if(!this.isRunning)return!1;var s=this.camera,l=this.red/255,i=this.green/255,h=this.blue/255;return a.drawFillRect(s.x,s.y,s.width,s.height,t(h,i,l,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});f.exports=r}),20359:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(62640),r=e(19715),a=e(26099),t=new m({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,l,i,h,d,c,u){i===void 0&&(i=1e3),h===void 0&&(h=n.Linear),d===void 0&&(d=!1),c===void 0&&(c=null),u===void 0&&(u=this.camera.scene);var p=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(s,l),p.getScroll(s,l,this.current),typeof h=="string"&&n.hasOwnProperty(h)?this.ease=n[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=u,this.camera.emit(r.PAN_START,this.camera,this,i,s,l)),p},update:function(s,l){if(this.isRunning){this._elapsed+=l;var i=o(this._elapsed/this.duration,0,1);this.progress=i;var h=this.camera;if(this._elapsed<this.duration){var d=this.ease(i);h.getScroll(this.destination.x,this.destination.y,this.current);var c=this.source.x+(this.current.x-this.source.x)*d,u=this.source.y+(this.current.y-this.source.y)*d;h.setScroll(c,u),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,i,c,u)}else h.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,i,h.scrollX,h.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});f.exports=t}),34208:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(19715),r=e(62640),a=new m({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,s,l,i,h,d,c){l===void 0&&(l=1e3),i===void 0&&(i=r.Linear),h===void 0&&(h=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene),s===void 0&&(s=!1),this.shortestPath=s;var u=t;t<0?(u=-1*t,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;u=u-Math.floor(u/p)*p;var g=this.camera;if(!h&&this.isRunning)return g;if(this.isRunning=!0,this.duration=l,this.progress=0,this.source=g.rotation,this.destination=u,typeof i=="string"&&r.hasOwnProperty(i)?this.ease=r[i]:typeof i=="function"&&(this.ease=i),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=c,this.shortestPath){var y=0,v=0;this.destination>this.source?y=Math.abs(this.destination-this.source):y=Math.abs(this.destination+p)-this.source,this.source>this.destination?v=Math.abs(this.source-this.destination):v=Math.abs(this.source+p)-this.destination,y<v?this.clockwise=!0:y>v&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,l,u),g},update:function(t,s){if(this.isRunning){this._elapsed+=s;var l=o(this._elapsed/this.duration,0,1);this.progress=l;var i=this.camera;if(this._elapsed<this.duration){var h=this.ease(l);this.current=i.rotation;var d=0,c=360*Math.PI/180,u=this.destination,p=this.current;this.clockwise===!1&&(u=this.current,p=this.destination),u>=p?d=Math.abs(u-p):d=Math.abs(u+c)-p;var g=0;this.clockwise?g=i.rotation+d*h:g=i.rotation-d*h,i.rotation=g,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,l,g)}else i.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,l,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});f.exports=a}),30330:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(19715),r=e(26099),a=new m({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.intensity=new r,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,s,l,i,h){return t===void 0&&(t=100),s===void 0&&(s=.05),l===void 0&&(l=!1),i===void 0&&(i=null),h===void 0&&(h=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=t,this.progress=0,typeof s=="number"?this.intensity.set(s):this.intensity.set(s.x,s.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=i,this._onUpdateScope=h,this.camera.emit(n.SHAKE_START,this.camera,this,t,s),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,s){if(this.isRunning)if(this._elapsed+=s,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var l=this.intensity,i=this.camera.width,h=this.camera.height,d=this.camera.zoom;this._offsetX=(Math.random()*l.x*i*2-l.x*i)*d,this._offsetY=(Math.random()*l.y*h*2-l.y*h)*d,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});f.exports=a}),45641:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(62640),r=e(19715),a=new m({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,s,l,i,h,d){s===void 0&&(s=1e3),l===void 0&&(l=n.Linear),i===void 0&&(i=!1),h===void 0&&(h=null),d===void 0&&(d=this.camera.scene);var c=this.camera;return!i&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source=c.zoom,this.destination=t,typeof l=="string"&&n.hasOwnProperty(l)?this.ease=n[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=h,this._onUpdateScope=d,this.camera.emit(r.ZOOM_START,this.camera,this,s,t)),c},update:function(t,s){this.isRunning&&(this._elapsed+=s,this.progress=o(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});f.exports=a}),20052:((f,x,e)=>{f.exports={Fade:e(5020),Flash:e(10662),Pan:e(20359),Shake:e(30330),RotateTo:e(34208),Zoom:e(45641)}}),16438:(f=>{f.exports="cameradestroy"}),32726:(f=>{f.exports="camerafadeincomplete"}),87807:(f=>{f.exports="camerafadeinstart"}),45917:(f=>{f.exports="camerafadeoutcomplete"}),95666:(f=>{f.exports="camerafadeoutstart"}),47056:(f=>{f.exports="cameraflashcomplete"}),91261:(f=>{f.exports="cameraflashstart"}),45047:(f=>{f.exports="followupdate"}),81927:(f=>{f.exports="camerapancomplete"}),74264:(f=>{f.exports="camerapanstart"}),54419:(f=>{f.exports="postrender"}),79330:(f=>{f.exports="prerender"}),93183:(f=>{f.exports="camerarotatecomplete"}),80112:(f=>{f.exports="camerarotatestart"}),62252:(f=>{f.exports="camerashakecomplete"}),86017:(f=>{f.exports="camerashakestart"}),539:(f=>{f.exports="camerazoomcomplete"}),51892:(f=>{f.exports="camerazoomstart"}),19715:((f,x,e)=>{f.exports={DESTROY:e(16438),FADE_IN_COMPLETE:e(32726),FADE_IN_START:e(87807),FADE_OUT_COMPLETE:e(45917),FADE_OUT_START:e(95666),FLASH_COMPLETE:e(47056),FLASH_START:e(91261),FOLLOW_UPDATE:e(45047),PAN_COMPLETE:e(81927),PAN_START:e(74264),POST_RENDER:e(54419),PRE_RENDER:e(79330),ROTATE_COMPLETE:e(93183),ROTATE_START:e(80112),SHAKE_COMPLETE:e(62252),SHAKE_START:e(86017),ZOOM_COMPLETE:e(539),ZOOM_START:e(51892)}}),87969:((f,x,e)=>{f.exports={Camera:e(38058),BaseCamera:e(71911),CameraManager:e(32743),Effects:e(20052),Events:e(19715)}}),63091:((f,x,e)=>{var o=e(83419),m=e(35154),n=new o({initialize:function(a){this.camera=m(a,"camera",null),this.left=m(a,"left",null),this.right=m(a,"right",null),this.up=m(a,"up",null),this.down=m(a,"down",null),this.zoomIn=m(a,"zoomIn",null),this.zoomOut=m(a,"zoomOut",null),this.zoomSpeed=m(a,"zoomSpeed",.01),this.minZoom=m(a,"minZoom",.001),this.maxZoom=m(a,"maxZoom",1e3),this.speedX=0,this.speedY=0;var t=m(a,"speed",null);typeof t=="number"?(this.speedX=t,this.speedY=t):(this.speedX=m(a,"speed.x",0),this.speedY=m(a,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var a=this.camera;this.up&&this.up.isDown?a.scrollY-=this.speedY*r|0:this.down&&this.down.isDown&&(a.scrollY+=this.speedY*r|0),this.left&&this.left.isDown?a.scrollX-=this.speedX*r|0:this.right&&this.right.isDown&&(a.scrollX+=this.speedX*r|0),this.zoomIn&&this.zoomIn.isDown?(a.zoom-=this.zoomSpeed,a.zoom<this.minZoom&&(a.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(a.zoom+=this.zoomSpeed,a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});f.exports=n}),58818:((f,x,e)=>{var o=e(83419),m=e(35154),n=new o({initialize:function(a){this.camera=m(a,"camera",null),this.left=m(a,"left",null),this.right=m(a,"right",null),this.up=m(a,"up",null),this.down=m(a,"down",null),this.zoomIn=m(a,"zoomIn",null),this.zoomOut=m(a,"zoomOut",null),this.zoomSpeed=m(a,"zoomSpeed",.01),this.minZoom=m(a,"minZoom",.001),this.maxZoom=m(a,"maxZoom",1e3),this.accelX=0,this.accelY=0;var t=m(a,"acceleration",null);typeof t=="number"?(this.accelX=t,this.accelY=t):(this.accelX=m(a,"acceleration.x",0),this.accelY=m(a,"acceleration.y",0)),this.dragX=0,this.dragY=0;var s=m(a,"drag",null);typeof s=="number"?(this.dragX=s,this.dragY=s):(this.dragX=m(a,"drag.x",0),this.dragY=m(a,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var l=m(a,"maxSpeed",null);typeof l=="number"?(this.maxSpeedX=l,this.maxSpeedY=l):(this.maxSpeedX=m(a,"maxSpeed.x",0),this.maxSpeedY=m(a,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var a=this.camera;this._speedX>0?(this._speedX-=this.dragX*r,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*r,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*r,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*r,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(a.scrollX-=this._speedX*r|0),this._speedY!==0&&(a.scrollY-=this._speedY*r|0),this._zoom!==0&&(a.zoom+=this._zoom,a.zoom<this.minZoom?a.zoom=this.minZoom:a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});f.exports=n}),38865:((f,x,e)=>{f.exports={FixedKeyControl:e(63091),SmoothedKeyControl:e(58818)}}),26638:((f,x,e)=>{f.exports={Controls:e(38865),Scene2D:e(87969)}}),8054:((f,x,e)=>{var o={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:e(10312),ScaleModes:e(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};f.exports=o}),69547:((f,x,e)=>{var o=e(83419),m=e(8054),n=e(42363),r=e(82264),a=e(95540),t=e(35154),s=e(41212),l=e(29747),i=e(75508),h=e(36060),d=e(80333),c=new o({initialize:function(p){p===void 0&&(p={});var g=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff",v=t(p,"scale",null);this.width=t(v,"width",1024,p),this.height=t(v,"height",768,p),this.zoom=t(v,"zoom",1,p),this.parent=t(v,"parent",void 0,p),this.scaleMode=t(v,v?"mode":"scaleMode",0,p),this.expandParent=t(v,"expandParent",!0,p),this.autoRound=t(v,"autoRound",!1,p),this.autoCenter=t(v,"autoCenter",0,p),this.resizeInterval=t(v,"resizeInterval",500,p),this.fullscreenTarget=t(v,"fullscreenTarget",null,p),this.minWidth=t(v,"min.width",0,p),this.maxWidth=t(v,"max.width",0,p),this.minHeight=t(v,"min.height",0,p),this.maxHeight=t(v,"max.height",0,p),this.snapWidth=t(v,"snap.width",0,p),this.snapHeight=t(v,"snap.height",0,p),this.renderType=t(p,"type",m.AUTO),this.canvas=t(p,"canvas",null),this.context=t(p,"context",null),this.canvasStyle=t(p,"canvasStyle",null),this.customEnvironment=t(p,"customEnvironment",!1),this.sceneConfig=t(p,"scene",null),this.seed=t(p,"seed",[(Date.now()*Math.random()).toString()]),i.RND=new i.RandomDataGenerator(this.seed),this.gameTitle=t(p,"title",""),this.gameURL=t(p,"url","https://phaser.io/"+m.LOG_VERSION),this.gameVersion=t(p,"version",""),this.autoFocus=t(p,"autoFocus",!0),this.stableSort=t(p,"stableSort",-1),this.stableSort===-1&&(this.stableSort=r.browser.es2019?1:0),r.features.stableSort=this.stableSort,this.domCreateContainer=t(p,"dom.createContainer",!1),this.domPointerEvents=t(p,"dom.pointerEvents","none"),this.inputKeyboard=t(p,"input.keyboard",!0),this.inputKeyboardEventTarget=t(p,"input.keyboard.target",window),this.inputKeyboardCapture=t(p,"input.keyboard.capture",[]),this.inputMouse=t(p,"input.mouse",!0),this.inputMouseEventTarget=t(p,"input.mouse.target",null),this.inputMousePreventDefaultDown=t(p,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=t(p,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=t(p,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=t(p,"input.mouse.preventDefaultWheel",!0),this.inputTouch=t(p,"input.touch",r.input.touch),this.inputTouchEventTarget=t(p,"input.touch.target",null),this.inputTouchCapture=t(p,"input.touch.capture",!0),this.inputActivePointers=t(p,"input.activePointers",1),this.inputSmoothFactor=t(p,"input.smoothFactor",0),this.inputWindowEvents=t(p,"input.windowEvents",!0),this.inputGamepad=t(p,"input.gamepad",!1),this.inputGamepadEventTarget=t(p,"input.gamepad.target",window),this.disableContextMenu=t(p,"disableContextMenu",!1),this.audio=t(p,"audio",{}),this.hideBanner=t(p,"banner",null)===!1,this.hidePhaser=t(p,"banner.hidePhaser",!1),this.bannerTextColor=t(p,"banner.text",y),this.bannerBackgroundColor=t(p,"banner.background",g),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=t(p,"fps",null),this.disablePreFX=t(p,"disablePreFX",!1),this.disablePostFX=t(p,"disablePostFX",!1);var S=t(p,"render",null);this.pipeline=t(S,"pipeline",null,p),this.autoMobilePipeline=t(S,"autoMobilePipeline",!0,p),this.defaultPipeline=t(S,"defaultPipeline",h.MULTI_PIPELINE,p),this.antialias=t(S,"antialias",!0,p),this.antialiasGL=t(S,"antialiasGL",!0,p),this.mipmapFilter=t(S,"mipmapFilter","",p),this.desynchronized=t(S,"desynchronized",!1,p),this.roundPixels=t(S,"roundPixels",!1,p),this.pixelArt=t(S,"pixelArt",this.zoom!==1,p),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=t(S,"transparent",!1,p),this.clearBeforeRender=t(S,"clearBeforeRender",!0,p),this.preserveDrawingBuffer=t(S,"preserveDrawingBuffer",!1,p),this.premultipliedAlpha=t(S,"premultipliedAlpha",!0,p),this.failIfMajorPerformanceCaveat=t(S,"failIfMajorPerformanceCaveat",!1,p),this.powerPreference=t(S,"powerPreference","default",p),this.batchSize=t(S,"batchSize",4096,p),this.maxTextures=t(S,"maxTextures",-1,p),this.maxLights=t(S,"maxLights",10,p);var w=t(p,"backgroundColor",0);this.backgroundColor=d(w),this.transparent&&(this.backgroundColor=d(0),this.backgroundColor.alpha=0),this.preBoot=t(p,"callbacks.preBoot",l),this.postBoot=t(p,"callbacks.postBoot",l),this.physics=t(p,"physics",{}),this.defaultPhysicsSystem=t(this.physics,"default",!1),this.loaderBaseURL=t(p,"loader.baseURL",""),this.loaderPath=t(p,"loader.path",""),this.loaderMaxParallelDownloads=t(p,"loader.maxParallelDownloads",r.os.android?6:32),this.loaderCrossOrigin=t(p,"loader.crossOrigin",void 0),this.loaderResponseType=t(p,"loader.responseType",""),this.loaderAsync=t(p,"loader.async",!0),this.loaderUser=t(p,"loader.user",""),this.loaderPassword=t(p,"loader.password",""),this.loaderTimeout=t(p,"loader.timeout",0),this.loaderMaxRetries=t(p,"loader.maxRetries",2),this.loaderWithCredentials=t(p,"loader.withCredentials",!1),this.loaderImageLoadType=t(p,"loader.imageLoadType","XHR"),this.loaderLocalScheme=t(p,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=t(p,"fx.glow.quality",.1),this.glowFXDistance=t(p,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var T=t(p,"plugins",null),C=n.DefaultScene;T&&(Array.isArray(T)?this.defaultPlugins=T:s(T)&&(this.installGlobalPlugins=a(T,"global",[]),this.installScenePlugins=a(T,"scene",[]),Array.isArray(T.default)?C=T.default:Array.isArray(T.defaultMerge)&&(C=C.concat(T.defaultMerge)))),this.defaultPlugins=C;var M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=t(p,"images.default",M+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=t(p,"images.missing",M+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=t(p,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=m.WEBGL:window.FORCE_CANVAS&&(this.renderType=m.CANVAS))}});f.exports=c}),86054:((f,x,e)=>{var o=e(20623),m=e(27919),n=e(8054),r=e(89357),a=function(t){var s=t.config;if((s.customEnvironment||s.canvas)&&s.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!s.customEnvironment&&!s.canvas&&s.renderType!==n.HEADLESS)if(s.renderType===n.AUTO&&(s.renderType=r.webGL?n.WEBGL:n.CANVAS),s.renderType===n.WEBGL){if(!r.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(s.renderType===n.CANVAS){if(!r.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+s.renderType);s.antialias||m.disableSmoothing();var l=t.scale.baseSize,i=l.width,h=l.height;if(s.canvas?(t.canvas=s.canvas,t.canvas.width=i,t.canvas.height=h):t.canvas=m.create(t,i,h,s.renderType),s.canvasStyle&&(t.canvas.style=s.canvasStyle),s.antialias||o.setCrisp(t.canvas),s.renderType!==n.HEADLESS){var d,c;d=e(68627),c=e(74797),s.renderType===n.WEBGL?t.renderer=new c(t):(t.renderer=new d(t),t.context=t.renderer.gameContext)}};f.exports=a}),96391:((f,x,e)=>{var o=e(8054),m=function(n){var r=n.config;if(!r.hideBanner){var a="WebGL";r.renderType===o.CANVAS?a="Canvas":r.renderType===o.HEADLESS&&(a="Headless");var t=r.audio,s=n.device.audio,l;if(s.webAudio&&!t.disableWebAudio?l="Web Audio":t.noAudio||!s.webAudio&&!s.audioData?l="No Audio":l="HTML5 Audio",n.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var i="",h=[i];if(Array.isArray(r.bannerBackgroundColor)){var d;r.bannerBackgroundColor.forEach(function(u){i=i.concat("%c "),h.push("background: "+u),d=u}),h[h.length-1]="color: "+r.bannerTextColor+"; background: "+d}else i=i.concat("%c "),h.push("color: "+r.bannerTextColor+"; background: "+r.bannerBackgroundColor);h.push("background: transparent"),r.gameTitle&&(i=i.concat(r.gameTitle),r.gameVersion&&(i=i.concat(" v"+r.gameVersion)),r.hidePhaser||(i=i.concat(" / ")));var c="";r.hidePhaser||(i=i.concat("Phaser v"+o.VERSION+c+" ("+a+" | "+l+")")),i=i.concat(" %c "+r.gameURL),h[0]=i,console.log.apply(console,h)}}};f.exports=m}),50127:((f,x,e)=>{var o=e(40366),m=e(60848),n=e(24047),r=e(27919),a=e(83419),t=e(69547),s=e(83719),l=e(86054),i=e(45893),h=e(96391),d=e(82264),c=e(57264),u=e(50792),p=e(8443),g=e(7003),y=e(37277),v=e(77332),S=e(76531),w=e(60903),T=e(69442),C=e(17130),M=e(65898),E=e(51085),P=e(14747),A=new a({initialize:function(W){this.config=new t(W),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new u,this.anims=new m(this),this.textures=new C(this),this.cache=new n(this),this.registry=new i(this,new u),this.input=new g(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=d,this.scale=new S(this,this.config),this.sound=null,this.sound=P.create(this),this.loop=new M(this,this.config.fps),this.plugins=new v(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,c(this.boot.bind(this))},boot:function(){if(!y.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),l(this),s(this),h(this),o(this.canvas,this.config.parent),this.textures.once(T.READY,this.texturesReady,this),this.events.emit(p.BOOT)},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),E(this);var D=this.events;D.on(p.HIDDEN,this.onHidden,this),D.on(p.VISIBLE,this.onVisible,this),D.on(p.BLUR,this.onBlur,this),D.on(p.FOCUS,this.onFocus,this)},step:function(D,W){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var V=this.events;V.emit(p.PRE_STEP,D,W),V.emit(p.STEP,D,W),this.scene.update(D,W),V.emit(p.POST_STEP,D,W);var K=this.renderer;K.preRender(),V.emit(p.PRE_RENDER,K,D,W),this.scene.render(K),K.postRender(),V.emit(p.POST_RENDER,K,D,W)}},headlessStep:function(D,W){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var V=this.events;V.emit(p.PRE_STEP,D,W),V.emit(p.STEP,D,W),this.scene.update(D,W),V.emit(p.POST_STEP,D,W),this.scene.isProcessing=!1,V.emit(p.PRE_RENDER,null,D,W),V.emit(p.POST_RENDER,null,D,W)}},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},pause:function(){var D=this.isPaused;this.isPaused=!0,D||this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME,this.loop.pauseDuration)},resume:function(){var D=this.isPaused;this.isPaused=!1,D&&this.events.emit(p.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(D,W){W===void 0&&(W=!1),this.pendingDestroy=!0,this.removeCanvas=D,this.noReturn=W},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(r.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});f.exports=A}),65898:((f,x,e)=>{var o=e(83419),m=e(35154),n=e(29747),r=e(43092),a=new o({initialize:function(s,l){this.game=s,this.raf=new r,this.started=!1,this.running=!1,this.minFps=m(l,"min",5),this.targetFps=m(l,"target",60),this.fpsLimit=m(l,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=m(l,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=m(l,"deltaHistory",10),this.panicMax=m(l,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=m(l,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=Math.min(this._target,this.deltaHistory[s]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t;var l=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(l,this.forceSetTimeOut,this._target)},smoothDelta:function(t){var s=this.deltaIndex,l=this.deltaHistory,i=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,t=Math.min(t,this._target)),t>this._min&&(t=l[s],t=Math.min(t,this._min)),l[s]=t,this.deltaIndex++,this.deltaIndex>=i&&(this.deltaIndex=0);for(var h=0,d=0;d<i;d++)h+=l[d];return h/=i,h},updateFPS:function(t){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0},stepLimitFPS:function(t){this.now=t;var s=Math.max(0,t-this.lastTime);this.rawDelta=s,this.time+=this.rawDelta,this.smoothStep&&(s=this.smoothDelta(s)),this.delta+=s,t>=this.nextFpsUpdate&&this.updateFPS(t),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(t,this.delta),this.delta=0),this.lastTime=t,this.frame++},step:function(t){this.now=t;var s=Math.max(0,t-this.lastTime);this.rawDelta=s,this.time+=this.rawDelta,this.smoothStep&&(s=this.smoothDelta(s)),this.delta=s,t>=this.nextFpsUpdate&&this.updateFPS(t),this.framesThisSecond++,this.callback(t,s),this.lastTime=t,this.frame++},tick:function(){var t=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(t):this.step(t)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){t===void 0&&(t=!1);var s=window.performance.now();if(!this.running){t&&(this.startTime+=-this.lastTime+(this.lastTime+s));var l=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(l,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});f.exports=a}),51085:((f,x,e)=>{var o=e(8443),m=function(n){var r,a=n.events;if(document.hidden!==void 0)r="visibilitychange";else{var t=["webkit","moz","ms"];t.forEach(function(l){document[l+"Hidden"]!==void 0&&(document.hidden=function(){return document[l+"Hidden"]},r=l+"visibilitychange")})}var s=function(l){document.hidden||l.type==="pause"?a.emit(o.HIDDEN):a.emit(o.VISIBLE)};r&&document.addEventListener(r,s,!1),window.onblur=function(){a.emit(o.BLUR)},window.onfocus=function(){a.emit(o.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()};f.exports=m}),97217:(f=>{f.exports="blur"}),47548:(f=>{f.exports="boot"}),19814:(f=>{f.exports="contextlost"}),68446:(f=>{f.exports="destroy"}),41700:(f=>{f.exports="focus"}),25432:(f=>{f.exports="hidden"}),65942:(f=>{f.exports="pause"}),59211:(f=>{f.exports="postrender"}),47789:(f=>{f.exports="poststep"}),39066:(f=>{f.exports="prerender"}),460:(f=>{f.exports="prestep"}),16175:(f=>{f.exports="ready"}),42331:(f=>{f.exports="resume"}),11966:(f=>{f.exports="step"}),32969:(f=>{f.exports="systemready"}),94830:(f=>{f.exports="visible"}),8443:((f,x,e)=>{f.exports={BLUR:e(97217),BOOT:e(47548),CONTEXT_LOST:e(19814),DESTROY:e(68446),FOCUS:e(41700),HIDDEN:e(25432),PAUSE:e(65942),POST_RENDER:e(59211),POST_STEP:e(47789),PRE_RENDER:e(39066),PRE_STEP:e(460),READY:e(16175),RESUME:e(42331),STEP:e(11966),SYSTEM_READY:e(32969),VISIBLE:e(94830)}}),42857:((f,x,e)=>{f.exports={Config:e(69547),CreateRenderer:e(86054),DebugHeader:e(96391),Events:e(8443),TimeStep:e(65898),VisibilityHandler:e(51085)}}),99584:((f,x,e)=>{var o=e(5290),m=e(27919),n=e(35154),r=function(a){var t=n(a,"data",[]),s=n(a,"canvas",null),l=n(a,"palette",o),i=n(a,"pixelWidth",1),h=n(a,"pixelHeight",i),d=n(a,"resizeCanvas",!0),c=n(a,"clearCanvas",!0),u=n(a,"preRender",null),p=n(a,"postRender",null),g=Math.floor(Math.abs(t[0].length*i)),y=Math.floor(Math.abs(t.length*h));s||(s=m.create2D(this,g,y),d=!1,c=!1),d&&(s.width=g,s.height=y);var v=s.getContext("2d",{willReadFrequently:!0});c&&v.clearRect(0,0,g,y),u&&u(s,v);for(var S=0;S<t.length;S++)for(var w=t[S],T=0;T<w.length;T++){var C=w[T];C!=="."&&C!==" "&&(v.fillStyle=l[C],v.fillRect(T*i,S*h,i,h))}return p&&p(s,v),s};f.exports=r}),15822:((f,x,e)=>{f.exports={GenerateTexture:e(99584),Palettes:e(57763)}}),5290:(f=>{f.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),23816:(f=>{f.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),9866:(f=>{f.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),77552:(f=>{f.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),92259:(f=>{f.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),57763:((f,x,e)=>{f.exports={ARNE16:e(5290),C64:e(23816),CGA:e(9866),JMP:e(77552),MSX:e(92259)}}),46728:((f,x,e)=>{var o=e(83419),m=e(36316),n=e(80021),r=e(26099),a=new o({Extends:n,initialize:function(s,l,i,h){n.call(this,"CubicBezierCurve"),Array.isArray(s)&&(h=new r(s[6],s[7]),i=new r(s[4],s[5]),l=new r(s[2],s[3]),s=new r(s[0],s[1])),this.p0=s,this.p1=l,this.p2=i,this.p3=h},getStartPoint:function(t){return t===void 0&&(t=new r),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,s){s===void 0&&(s=new r);var l=this.p0,i=this.p1,h=this.p2,d=this.p3;return s.set(m(t,l.x,i.x,h.x,d.x),m(t,l.y,i.y,h.y,d.y))},draw:function(t,s){s===void 0&&(s=32);var l=this.getPoints(s);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var i=1;i<l.length;i++)t.lineTo(l[i].x,l[i].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(t){var s=t.points,l=new r(s[0],s[1]),i=new r(s[2],s[3]),h=new r(s[4],s[5]),d=new r(s[6],s[7]);return new a(l,i,h,d)},f.exports=a}),80021:((f,x,e)=>{var o=e(83419),m=e(19217),n=e(87841),r=e(26099),a=new o({initialize:function(s){this.type=s,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new r,this._tmpVec2B=new r},draw:function(t,s){return s===void 0&&(s=32),t.strokePoints(this.getPoints(s))},getBounds:function(t,s){t||(t=new n),s===void 0&&(s=16);var l=this.getLength();s>l&&(s=l/2);var i=Math.max(1,Math.round(l/s));return m(this.getSpacedPoints(i),t)},getDistancePoints:function(t){var s=this.getLength(),l=Math.max(1,s/t);return this.getSpacedPoints(l)},getEndPoint:function(t){return t===void 0&&(t=new r),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var s=[],l,i=this.getPoint(0,this._tmpVec2A),h=0;s.push(0);for(var d=1;d<=t;d++)l=this.getPoint(d/t,this._tmpVec2B),h+=l.distance(i),s.push(h),i.copy(l);return this.cacheArcLengths=s,s},getPointAt:function(t,s){var l=this.getUtoTmapping(t);return this.getPoint(l,s)},getPoints:function(t,s,l){l===void 0&&(l=[]),t||(s?t=this.getLength()/s:t=this.defaultDivisions);for(var i=0;i<=t;i++)l.push(this.getPoint(i/t));return l},getRandomPoint:function(t){return t===void 0&&(t=new r),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,s,l){l===void 0&&(l=[]),t||(s?t=this.getLength()/s:t=this.defaultDivisions);for(var i=0;i<=t;i++){var h=this.getUtoTmapping(i/t,null,t);l.push(this.getPoint(h))}return l},getStartPoint:function(t){return t===void 0&&(t=new r),this.getPointAt(0,t)},getTangent:function(t,s){s===void 0&&(s=new r);var l=1e-4,i=t-l,h=t+l;return i<0&&(i=0),h>1&&(h=1),this.getPoint(i,this._tmpVec2A),this.getPoint(h,s),s.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,s){var l=this.getUtoTmapping(t);return this.getTangent(l,s)},getTFromDistance:function(t,s){return t<=0?0:this.getUtoTmapping(0,t,s)},getUtoTmapping:function(t,s,l){var i=this.getLengths(l),h=0,d=i.length,c;s?c=Math.min(s,i[d-1]):c=t*i[d-1];for(var u=0,p=d-1,g;u<=p;)if(h=Math.floor(u+(p-u)/2),g=i[h]-c,g<0)u=h+1;else if(g>0)p=h-1;else{p=h;break}if(h=p,i[h]===c)return h/(d-1);var y=i[h],v=i[h+1],S=v-y,w=(c-y)/S;return(h+w)/(d-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});f.exports=a}),73825:((f,x,e)=>{var o=e(83419),m=e(80021),n=e(39506),r=e(35154),a=e(43396),t=e(26099),s=new o({Extends:m,initialize:function(i,h,d,c,u,p,g,y){if(typeof i=="object"){var v=i;i=r(v,"x",0),h=r(v,"y",0),d=r(v,"xRadius",0),c=r(v,"yRadius",d),u=r(v,"startAngle",0),p=r(v,"endAngle",360),g=r(v,"clockwise",!1),y=r(v,"rotation",0)}else c===void 0&&(c=d),u===void 0&&(u=0),p===void 0&&(p=360),g===void 0&&(g=!1),y===void 0&&(y=0);m.call(this,"EllipseCurve"),this.p0=new t(i,h),this._xRadius=d,this._yRadius=c,this._startAngle=n(u),this._endAngle=n(p),this._clockwise=g,this._rotation=n(y)},getStartPoint:function(l){return l===void 0&&(l=new t),this.getPoint(0,l)},getResolution:function(l){return l*2},getPoint:function(l,i){i===void 0&&(i=new t);for(var h=Math.PI*2,d=this._endAngle-this._startAngle,c=Math.abs(d)<Number.EPSILON;d<0;)d+=h;for(;d>h;)d-=h;d<Number.EPSILON&&(c?d=0:d=h),this._clockwise&&!c&&(d===h?d=-h:d=d-h);var u=this._startAngle+l*d,p=this.p0.x+this._xRadius*Math.cos(u),g=this.p0.y+this._yRadius*Math.sin(u);if(this._rotation!==0){var y=Math.cos(this._rotation),v=Math.sin(this._rotation),S=p-this.p0.x,w=g-this.p0.y;p=S*y-w*v+this.p0.x,g=S*v+w*y+this.p0.y}return i.set(p,g)},setXRadius:function(l){return this.xRadius=l,this},setYRadius:function(l){return this.yRadius=l,this},setWidth:function(l){return this.xRadius=l/2,this},setHeight:function(l){return this.yRadius=l/2,this},setStartAngle:function(l){return this.startAngle=l,this},setEndAngle:function(l){return this.endAngle=l,this},setClockwise:function(l){return this.clockwise=l,this},setRotation:function(l){return this.rotation=l,this},x:{get:function(){return this.p0.x},set:function(l){this.p0.x=l}},y:{get:function(){return this.p0.y},set:function(l){this.p0.y=l}},xRadius:{get:function(){return this._xRadius},set:function(l){this._xRadius=l}},yRadius:{get:function(){return this._yRadius},set:function(l){this._yRadius=l}},startAngle:{get:function(){return a(this._startAngle)},set:function(l){this._startAngle=n(l)}},endAngle:{get:function(){return a(this._endAngle)},set:function(l){this._endAngle=n(l)}},clockwise:{get:function(){return this._clockwise},set:function(l){this._clockwise=l}},angle:{get:function(){return a(this._rotation)},set:function(l){this._rotation=n(l)}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=l}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});s.fromJSON=function(l){return new s(l)},f.exports=s}),33951:((f,x,e)=>{var o=e(83419),m=e(80021),n=e(19217),r=e(87841),a=e(26099),t=new o({Extends:m,initialize:function(l,i){m.call(this,"LineCurve"),Array.isArray(l)&&(i=new a(l[2],l[3]),l=new a(l[0],l[1])),this.p0=l,this.p1=i,this.arcLengthDivisions=1},getBounds:function(s){return s===void 0&&(s=new r),n([this.p0,this.p1],s)},getStartPoint:function(s){return s===void 0&&(s=new a),s.copy(this.p0)},getResolution:function(s){return s===void 0&&(s=1),s},getPoint:function(s,l){return l===void 0&&(l=new a),s===1?l.copy(this.p1):(l.copy(this.p1).subtract(this.p0).scale(s).add(this.p0),l)},getPointAt:function(s,l){return this.getPoint(s,l)},getTangent:function(s,l){return l===void 0&&(l=new a),l.copy(this.p1).subtract(this.p0).normalize(),l},getUtoTmapping:function(s,l,i){var h;if(l){var d=this.getLengths(i),c=d[d.length-1],u=Math.min(l,c);h=u/c}else h=s;return h},draw:function(s){return s.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});t.fromJSON=function(s){var l=s.points,i=new a(l[0],l[1]),h=new a(l[2],l[3]);return new t(i,h)},f.exports=t}),14744:((f,x,e)=>{var o=e(83419),m=e(80021),n=e(32112),r=e(26099),a=new o({Extends:m,initialize:function(s,l,i){m.call(this,"QuadraticBezierCurve"),Array.isArray(s)&&(i=new r(s[4],s[5]),l=new r(s[2],s[3]),s=new r(s[0],s[1])),this.p0=s,this.p1=l,this.p2=i},getStartPoint:function(t){return t===void 0&&(t=new r),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,s){s===void 0&&(s=new r);var l=this.p0,i=this.p1,h=this.p2;return s.set(n(t,l.x,i.x,h.x),n(t,l.y,i.y,h.y))},draw:function(t,s){s===void 0&&(s=32);var l=this.getPoints(s);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var i=1;i<l.length;i++)t.lineTo(l[i].x,l[i].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var s=t.points,l=new r(s[0],s[1]),i=new r(s[2],s[3]),h=new r(s[4],s[5]);return new a(l,i,h)},f.exports=a}),42534:((f,x,e)=>{var o=e(87842),m=e(83419),n=e(80021),r=e(26099),a=new m({Extends:n,initialize:function(s){s===void 0&&(s=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(s)},addPoints:function(t){for(var s=0;s<t.length;s++){var l=new r;typeof t[s]=="number"?(l.x=t[s],l.y=t[s+1],s++):Array.isArray(t[s])?(l.x=t[s][0],l.y=t[s][1]):(l.x=t[s].x,l.y=t[s].y),this.points.push(l)}return this},addPoint:function(t,s){var l=new r(t,s);return this.points.push(l),l},getStartPoint:function(t){return t===void 0&&(t=new r),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,s){s===void 0&&(s=new r);var l=this.points,i=(l.length-1)*t,h=Math.floor(i),d=i-h,c=l[h===0?h:h-1],u=l[h],p=l[h>l.length-2?l.length-1:h+1],g=l[h>l.length-3?l.length-1:h+2];return s.set(o(d,c.x,u.x,p.x,g.x),o(d,c.y,u.y,p.y,g.y))},toJSON:function(){for(var t=[],s=0;s<this.points.length;s++)t.push(this.points[s].x),t.push(this.points[s].y);return{type:this.type,points:t}}});a.fromJSON=function(t){return new a(t.points)},f.exports=a}),25410:((f,x,e)=>{f.exports={Path:e(46669),MoveTo:e(68618),CubicBezier:e(46728),Curve:e(80021),Ellipse:e(73825),Line:e(33951),QuadraticBezier:e(14744),Spline:e(42534)}}),68618:((f,x,e)=>{var o=e(83419),m=e(26099),n=new o({initialize:function(a,t){this.active=!1,this.p0=new m(a,t)},getPoint:function(r,a){return a===void 0&&(a=new m),a.copy(this.p0)},getPointAt:function(r,a){return this.getPoint(r,a)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});f.exports=n}),46669:((f,x,e)=>{var o=e(83419),m=e(46728),n=e(73825),r=e(39429),a=e(33951),t=e(68618),s=e(14744),l=e(87841),i=e(42534),h=e(26099),d=e(36383),c=new o({initialize:function(p,g){p===void 0&&(p=0),g===void 0&&(g=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new h,this._tmpVec2A=new h,this._tmpVec2B=new h,typeof p=="object"?this.fromJSON(p):this.startPoint.set(p,g)},add:function(u){return this.curves.push(u),this},circleTo:function(u,p,g){return p===void 0&&(p=!1),this.ellipseTo(u,u,0,360,p,g)},closePath:function(){var u=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return u.equals(p)||this.curves.push(new a(p,u)),this},cubicBezierTo:function(u,p,g,y,v,S){var w=this.getEndPoint(),T,C,M;return u instanceof h?(T=u,C=p,M=g):(T=new h(g,y),C=new h(v,S),M=new h(u,p)),this.add(new m(w,T,C,M))},quadraticBezierTo:function(u,p,g,y){var v=this.getEndPoint(),S,w;return u instanceof h?(S=u,w=p):(S=new h(g,y),w=new h(u,p)),this.add(new s(v,S,w))},draw:function(u,p){for(var g=0;g<this.curves.length;g++){var y=this.curves[g];y.active&&y.draw(u,p)}return u},ellipseTo:function(u,p,g,y,v,S){var w=new n(0,0,u,p,g,y,v,S),T=this.getEndPoint(this._tmpVec2A),C=w.getStartPoint(this._tmpVec2B);return T.subtract(C),w.x=T.x,w.y=T.y,this.add(w)},fromJSON:function(u){this.curves=[],this.cacheLengths=[],this.startPoint.set(u.x,u.y),this.autoClose=u.autoClose;for(var p=0;p<u.curves.length;p++){var g=u.curves[p];switch(g.type){case"LineCurve":this.add(a.fromJSON(g));break;case"EllipseCurve":this.add(n.fromJSON(g));break;case"SplineCurve":this.add(i.fromJSON(g));break;case"CubicBezierCurve":this.add(m.fromJSON(g));break;case"QuadraticBezierCurve":this.add(s.fromJSON(g));break}}return this},getBounds:function(u,p){u===void 0&&(u=new l),p===void 0&&(p=16),u.x=Number.MAX_VALUE,u.y=Number.MAX_VALUE;for(var g=new l,y=d.MIN_SAFE_INTEGER,v=d.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var w=this.curves[S];w.active&&(w.getBounds(g,p),u.x=Math.min(u.x,g.x),u.y=Math.min(u.y,g.y),y=Math.max(y,g.right),v=Math.max(v,g.bottom))}return u.right=y,u.bottom=v,u},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var u=[],p=0,g=0;g<this.curves.length;g++)p+=this.curves[g].getLength(),u.push(p);return this.cacheLengths=u,u},getCurveAt:function(u){for(var p=u*this.getLength(),g=this.getCurveLengths(),y=0;y<g.length;){if(g[y]>=p)return this.curves[y];y++}return null},getEndPoint:function(u){return u===void 0&&(u=new h),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,u):u.copy(this.startPoint),u},getLength:function(){var u=this.getCurveLengths();return u[u.length-1]},getPoint:function(u,p){p===void 0&&(p=new h);for(var g=u*this.getLength(),y=this.getCurveLengths(),v=0;v<y.length;){if(y[v]>=g){var S=y[v]-g,w=this.curves[v],T=w.getLength(),C=T===0?0:1-S/T;return w.getPointAt(C,p)}v++}return null},getPoints:function(u,p){!u&&!p&&(u=this.defaultDivisions);for(var g=[],y,v=0;v<this.curves.length;v++){var S=this.curves[v];if(S.active)for(var w=S.getResolution(u),T=S.getPoints(w,p),C=0;C<T.length;C++){var M=T[C];y&&y.equals(M)||(g.push(M),y=M)}}return this.autoClose&&g.length>1&&!g[g.length-1].equals(g[0])&&g.push(g[0]),g},getRandomPoint:function(u){return u===void 0&&(u=new h),this.getPoint(Math.random(),u)},getSpacedPoints:function(u){u===void 0&&(u=40);for(var p=[],g=0;g<=u;g++)p.push(this.getPoint(g/u));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(u){return u===void 0&&(u=new h),u.copy(this.startPoint)},getTangent:function(u,p){p===void 0&&(p=new h);for(var g=u*this.getLength(),y=this.getCurveLengths(),v=0;v<y.length;){if(y[v]>=g){var S=y[v]-g,w=this.curves[v],T=w.getLength(),C=T===0?0:1-S/T;return w.getTangentAt(C,p)}v++}return null},lineTo:function(u,p){u instanceof h?this._tmpVec2B.copy(u):typeof u=="object"?this._tmpVec2B.setFromObject(u):this._tmpVec2B.set(u,p);var g=this.getEndPoint(this._tmpVec2A);return this.add(new a([g.x,g.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(u){return u.unshift(this.getEndPoint()),this.add(new i(u))},moveTo:function(u,p){return u instanceof h?this.add(new t(u.x,u.y)):this.add(new t(u,p))},toJSON:function(){for(var u=[],p=0;p<this.curves.length;p++)u.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:u}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});r.register("path",function(u,p){return new c(u,p)}),f.exports=c}),45893:((f,x,e)=>{var o=e(83419),m=e(24882),n=new o({initialize:function(a,t){this.parent=a,this.events=t,t||(this.events=a.events?a.events:a),this.list={},this.values={},this._frozen=!1,!a.hasOwnProperty("sys")&&this.events&&this.events.once(m.DESTROY,this.destroy,this)},get:function(r){var a=this.list;if(Array.isArray(r)){for(var t=[],s=0;s<r.length;s++)t.push(a[r[s]]);return t}else return a[r]},getAll:function(){var r={};for(var a in this.list)this.list.hasOwnProperty(a)&&(r[a]=this.list[a]);return r},query:function(r){var a={};for(var t in this.list)this.list.hasOwnProperty(t)&&t.match(r)&&(a[t]=this.list[t]);return a},set:function(r,a){if(this._frozen)return this;if(typeof r=="string")return this.setValue(r,a);for(var t in r)this.setValue(t,r[t]);return this},inc:function(r,a){if(this._frozen)return this;a===void 0&&(a=1);var t=this.get(r);return t===void 0&&(t=0),this.set(r,t+a),this},toggle:function(r){return this._frozen?this:(this.set(r,!this.get(r)),this)},setValue:function(r,a){if(this._frozen)return this;if(this.has(r))this.values[r]=a;else{var t=this,s=this.list,l=this.events,i=this.parent;Object.defineProperty(this.values,r,{enumerable:!0,configurable:!0,get:function(){return s[r]},set:function(h){if(!t._frozen){var d=s[r];s[r]=h,l.emit(m.CHANGE_DATA,i,r,h,d),l.emit(m.CHANGE_DATA_KEY+r,i,h,d)}}}),s[r]=a,l.emit(m.SET_DATA,i,r,a)}return this},each:function(r,a){for(var t=[this.parent,null,void 0],s=1;s<arguments.length;s++)t.push(arguments[s]);for(var l in this.list)t[1]=l,t[2]=this.list[l],r.apply(a,t);return this},merge:function(r,a){a===void 0&&(a=!0);for(var t in r)r.hasOwnProperty(t)&&(a||!a&&!this.has(t))&&this.setValue(t,r[t]);return this},remove:function(r){if(this._frozen)return this;if(Array.isArray(r))for(var a=0;a<r.length;a++)this.removeValue(r[a]);else return this.removeValue(r);return this},removeValue:function(r){if(this.has(r)){var a=this.list[r];delete this.list[r],delete this.values[r],this.events.emit(m.REMOVE_DATA,this.parent,r,a)}return this},pop:function(r){var a=void 0;return!this._frozen&&this.has(r)&&(a=this.list[r],delete this.list[r],delete this.values[r],this.events.emit(m.REMOVE_DATA,this.parent,r,a)),a},has:function(r){return this.list.hasOwnProperty(r)},setFreeze:function(r){return this._frozen=r,this},reset:function(){for(var r in this.list)delete this.list[r],delete this.values[r];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(m.CHANGE_DATA),this.events.off(m.SET_DATA),this.events.off(m.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(r){this._frozen=!!r}},count:{get:function(){var r=0;for(var a in this.list)this.list[a]!==void 0&&r++;return r}}});f.exports=n}),63646:((f,x,e)=>{var o=e(83419),m=e(45893),n=e(37277),r=e(44594),a=new o({Extends:m,initialize:function(s){m.call(this,s,s.sys.events),this.scene=s,this.systems=s.sys,s.sys.events.once(r.BOOT,this.boot,this),s.sys.events.on(r.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){m.prototype.destroy.call(this),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",a,"data"),f.exports=a}),10700:(f=>{f.exports="changedata"}),93608:(f=>{f.exports="changedata-"}),60883:(f=>{f.exports="destroy"}),69780:(f=>{f.exports="removedata"}),22166:(f=>{f.exports="setdata"}),24882:((f,x,e)=>{f.exports={CHANGE_DATA:e(10700),CHANGE_DATA_KEY:e(93608),DESTROY:e(60883),REMOVE_DATA:e(69780),SET_DATA:e(22166)}}),44965:((f,x,e)=>{f.exports={DataManager:e(45893),DataManagerPlugin:e(63646),Events:e(24882)}}),7098:((f,x,e)=>{var o=e(84148),m={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function n(){if(typeof importScripts=="function")return m;m.audioData=!!window.Audio,m.webAudio=!!(window.AudioContext||window.webkitAudioContext);var r=document.createElement("audio"),a=!!r.canPlayType;try{if(a){var t=function(i,h){var d=r.canPlayType("audio/"+i).replace(/^no$/,"");return h?!!(d||r.canPlayType("audio/"+h).replace(/^no$/,"")):!!d};if(m.ogg=t('ogg; codecs="vorbis"'),m.opus=t('ogg; codecs="opus"',"opus"),m.mp3=t("mpeg"),m.wav=t("wav"),m.m4a=t("x-m4a"),m.aac=t("aac"),m.flac=t("flac","x-flac"),m.webm=t('webm; codecs="vorbis"'),r.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(o.edge)m.dolby=!0;else if(o.safari&&o.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var s=parseInt(RegExp.$1,10),l=parseInt(RegExp.$2,10);(s===10&&l>=11||s>10)&&(m.dolby=!0)}}}}catch{}return m}f.exports=n()}),84148:((f,x,e)=>{var o=e(25892),m={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function n(){var r=navigator.userAgent;return/Edg\/\d+/.test(r)?(m.edge=!0,m.es2019=!0):/OPR/.test(r)?(m.opera=!0,m.es2019=!0):/Chrome\/(\d+)/.test(r)&&!o.windowsPhone?(m.chrome=!0,m.chromeVersion=parseInt(RegExp.$1,10),m.es2019=m.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(m.firefox=!0,m.firefoxVersion=parseInt(RegExp.$1,10),m.es2019=m.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(r)&&o.iOS?(m.mobileSafari=!0,m.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(m.ie=!0,m.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(r)&&!o.windowsPhone?(m.safari=!0,m.safariVersion=parseInt(RegExp.$1,10),m.es2019=m.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(m.ie=!0,m.trident=!0,m.tridentVersion=parseInt(RegExp.$1,10),m.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(m.silk=!0),m}f.exports=n()}),89289:((f,x,e)=>{var o=e(27919),m={supportInverseAlpha:!1,supportNewBlendModes:!1};function n(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",s="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",l=new Image;return l.onload=function(){var i=new Image;i.onload=function(){var h=o.create2D(i,6),d=h.getContext("2d",{willReadFrequently:!0});if(d.globalCompositeOperation="multiply",d.drawImage(l,0,0),d.drawImage(i,2,0),!d.getImageData(2,0,1,1))return!1;var c=d.getImageData(2,0,1,1).data;o.remove(i),m.supportNewBlendModes=c[0]===255&&c[1]===0&&c[2]===0},i.src=t+"/wCKxvRF"+s},l.src=t+"AP804Oa6"+s,!1}function r(){var t=o.create2D(this,2),s=t.getContext("2d",{willReadFrequently:!0});s.fillStyle="rgba(10, 20, 30, 0.5)",s.fillRect(0,0,1,1);var l=s.getImageData(0,0,1,1);if(l===null)return!1;s.putImageData(l,1,0);var i=s.getImageData(1,0,1,1),h=i.data[0]===l.data[0]&&i.data[1]===l.data[1]&&i.data[2]===l.data[2]&&i.data[3]===l.data[3];return o.remove(this),h}function a(){return typeof importScripts!="function"&&document!==void 0&&(m.supportNewBlendModes=n(),m.supportInverseAlpha=r()),m}f.exports=a()}),89357:((f,x,e)=>{var o=e(25892),m=e(84148),n=e(27919),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function a(){var s=new ArrayBuffer(4),l=new Uint8Array(s),i=new Uint32Array(s);return l[0]=161,l[1]=178,l[2]=195,l[3]=212,i[0]===3569595041?!0:i[0]===2712847316?!1:null}function t(){if(typeof importScripts=="function")return r;r.canvas=!!window.CanvasRenderingContext2D;try{r.localStorage=!!localStorage.getItem}catch{r.localStorage=!1}r.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,r.fileSystem=!!window.requestFileSystem;var s=!1,l=function(){if(window.WebGLRenderingContext)try{var i=n.createWebGL(this),h=i.getContext("webgl")||i.getContext("experimental-webgl"),d=n.create2D(this),c=d.getContext("2d",{willReadFrequently:!0}),u=c.createImageData(1,1);return s=u.data instanceof Uint8ClampedArray,n.remove(i),n.remove(d),!!h}catch{return!1}return!1};return r.webGL=l(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,m.firefox&&m.firefoxVersion<21&&(r.getUserMedia=!1),!o.iOS&&(m.ie||m.firefox||m.chrome)&&(r.canvasBitBltShift=!0),(m.safari||m.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(r.littleEndian=a()),r.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&r.littleEndian!==null&&s,r}f.exports=t()}),91639:(f=>{var x={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return x;var o,m="Fullscreen",n="FullScreen",r=["request"+m,"request"+n,"webkitRequest"+m,"webkitRequest"+n,"msRequest"+m,"msRequest"+n,"mozRequest"+n,"mozRequest"+m];for(o=0;o<r.length;o++)if(document.documentElement[r[o]]){x.available=!0,x.request=r[o];break}var a=["cancel"+n,"exit"+m,"webkitCancel"+n,"webkitExit"+m,"msCancel"+n,"msExit"+m,"mozCancel"+n,"mozExit"+m];if(x.available){for(o=0;o<a.length;o++)if(document[a[o]]){x.cancel=a[o];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(x.keyboard=!0),Object.defineProperty(x,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),x}f.exports=e()}),31784:((f,x,e)=>{var o=e(84148),m={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function n(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(m.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(m.mspointer=!0),navigator.getGamepads&&(m.gamepads=!0),"onwheel"in window||o.ie&&"WheelEvent"in window?m.wheelEvent="wheel":"onmousewheel"in window?m.wheelEvent="mousewheel":o.firefox&&"MouseScrollEvent"in window&&(m.wheelEvent="DOMMouseScroll")),m}f.exports=n()}),25892:(f=>{var x={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return x;var o=navigator.userAgent;/Windows/.test(o)?x.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(x.iOS=!0,x.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),x.iOSVersion=parseInt(RegExp.$1,10)):x.macOS=!0:/Android/.test(o)?x.android=!0:/Linux/.test(o)?x.linux=!0:/iP[ao]d|iPhone/i.test(o)?(x.iOS=!0,navigator.appVersion.match(/OS (\d+)/),x.iOSVersion=parseInt(RegExp.$1,10),x.iPhone=o.toLowerCase().indexOf("iphone")!==-1,x.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?x.kindle=!0:/CrOS/.test(o)&&(x.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(x.android=!1,x.iOS=!1,x.macOS=!1,x.windows=!0,x.windowsPhone=!0);var m=/Silk/.test(o);return(x.windows||x.macOS||x.linux&&!m||x.chromeOS)&&(x.desktop=!0),(x.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(x.desktop=!1),navigator.standalone&&(x.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(x.cordova=!0),window.ejecta!==void 0&&(x.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(x.node=!0),x.node&&typeof process.versions=="object"&&(x.nodeWebkit=!!process.versions["node-webkit"],x.electron=!!process.versions.electron),/Crosswalk/.test(o)&&(x.crosswalk=!0),x.pixelRatio=window.devicePixelRatio||1,x}f.exports=e()}),43267:((f,x,e)=>{var o=e(95540),m={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function n(){if(typeof importScripts=="function")return m;var r=document.createElement("video"),a=!!r.canPlayType,t=/^no$/;try{a&&(r.canPlayType('video/ogg; codecs="theora"').replace(t,"")&&(m.ogg=!0),r.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(t,"")&&(m.h264=!0,m.mp4=!0),r.canPlayType("video/x-m4v").replace(t,"")&&(m.m4v=!0),r.canPlayType('video/webm; codecs="vp8, vorbis"').replace(t,"")&&(m.webm=!0),r.canPlayType('video/webm; codecs="vp9"').replace(t,"")&&(m.vp9=!0),r.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(t,"")&&(m.hls=!0))}catch{}return r.parentNode&&r.parentNode.removeChild(r),m.getVideoURL=function(s){Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++){var i=o(s[l],"url",s[l]);if(i.indexOf("blob:")===0)return{url:i,type:""};var h;if(i.indexOf("data:")===0?h=i.split(",")[0].match(/\/(.*?);/):h=i.match(/\.([a-zA-Z0-9]+)($|\?)/),h=o(s[l],"type",h?h[1]:"").toLowerCase(),m[h])return{url:i,type:h}}return null},m}f.exports=n()}),82264:((f,x,e)=>{f.exports={os:e(25892),browser:e(84148),features:e(89357),input:e(31784),audio:e(7098),video:e(43267),fullscreen:e(91639),canvasFeatures:e(89289)}}),89422:((f,x,e)=>{var o=e(83419),m=new Float32Array(20),n=new o({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(r){return this._matrix.set(r),this._dirty=!0,this},reset:function(){var r=this._matrix;return r.fill(0),r[0]=1,r[6]=1,r[12]=1,r[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var r=this._data;return this._dirty&&(r.set(this._matrix),r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._dirty=!1),r},brightness:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var t=r;return this.multiply([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],a)},saturate:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var t=r*2/3+1,s=(t-1)*-.5;return this.multiply([t,s,s,0,0,s,t,s,0,0,s,s,t,0,0,0,0,0,1,0],a)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1),r=r/180*Math.PI;var t=Math.cos(r),s=Math.sin(r),l=.213,i=.715,h=.072;return this.multiply([l+t*(1-l)+s*-l,i+t*-i+s*-i,h+t*-h+s*(1-h),0,0,l+t*-l+s*.143,i+t*(1-i)+s*.14,h+t*-h+s*-.283,0,0,l+t*-l+s*-.787,i+t*-i+s*i,h+t*(1-h)+s*h,0,0,0,0,0,1,0],a)},grayscale:function(r,a){return r===void 0&&(r=1),a===void 0&&(a=!1),this.saturate(-r,a)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply(n.BLACK_WHITE,r)},contrast:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var t=r+1,s=-.5*(t-1);return this.multiply([t,0,0,0,s,0,t,0,0,s,0,0,t,0,s,0,0,0,1,0],a)},negative:function(r){return r===void 0&&(r=!1),this.multiply(n.NEGATIVE,r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply(n.DESATURATE_LUMINANCE,r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply(n.SEPIA,r)},night:function(r,a){return r===void 0&&(r=.1),a===void 0&&(a=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],a)},lsd:function(r){return r===void 0&&(r=!1),this.multiply(n.LSD,r)},brown:function(r){return r===void 0&&(r=!1),this.multiply(n.BROWN,r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply(n.VINTAGE,r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply(n.KODACHROME,r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply(n.TECHNICOLOR,r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply(n.POLAROID,r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply(n.SHIFT_BGR,r)},multiply:function(r,a){a===void 0&&(a=!1),a||this.reset();var t=this._matrix,s=m;return s.set(t),t.set([s[0]*r[0]+s[1]*r[5]+s[2]*r[10]+s[3]*r[15],s[0]*r[1]+s[1]*r[6]+s[2]*r[11]+s[3]*r[16],s[0]*r[2]+s[1]*r[7]+s[2]*r[12]+s[3]*r[17],s[0]*r[3]+s[1]*r[8]+s[2]*r[13]+s[3]*r[18],s[0]*r[4]+s[1]*r[9]+s[2]*r[14]+s[3]*r[19]+s[4],s[5]*r[0]+s[6]*r[5]+s[7]*r[10]+s[8]*r[15],s[5]*r[1]+s[6]*r[6]+s[7]*r[11]+s[8]*r[16],s[5]*r[2]+s[6]*r[7]+s[7]*r[12]+s[8]*r[17],s[5]*r[3]+s[6]*r[8]+s[7]*r[13]+s[8]*r[18],s[5]*r[4]+s[6]*r[9]+s[7]*r[14]+s[8]*r[19]+s[9],s[10]*r[0]+s[11]*r[5]+s[12]*r[10]+s[13]*r[15],s[10]*r[1]+s[11]*r[6]+s[12]*r[11]+s[13]*r[16],s[10]*r[2]+s[11]*r[7]+s[12]*r[12]+s[13]*r[17],s[10]*r[3]+s[11]*r[8]+s[12]*r[13]+s[13]*r[18],s[10]*r[4]+s[11]*r[9]+s[12]*r[14]+s[13]*r[19]+s[14],s[15]*r[0]+s[16]*r[5]+s[17]*r[10]+s[18]*r[15],s[15]*r[1]+s[16]*r[6]+s[17]*r[11]+s[18]*r[16],s[15]*r[2]+s[16]*r[7]+s[17]*r[12]+s[18]*r[17],s[15]*r[3]+s[16]*r[8]+s[17]*r[13]+s[18]*r[18],s[15]*r[4]+s[16]*r[9]+s[17]*r[14]+s[18]*r[19]+s[19]]),this._dirty=!0,this}});n.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],f.exports=n}),51767:((f,x,e)=>{var o=e(83419),m=e(29747),n=new o({initialize:function(a,t,s){this._rgb=[0,0,0],this.onChangeCallback=m,this.dirty=!1,this.set(a,t,s)},set:function(r,a,t){return r===void 0&&(r=0),a===void 0&&(a=0),t===void 0&&(t=0),this._rgb=[r,a,t],this.onChange(),this},equals:function(r,a,t){var s=this._rgb;return s[0]===r&&s[1]===a&&s[2]===t},onChange:function(){this.dirty=!0;var r=this._rgb;this.onChangeCallback.call(this,r[0],r[1],r[2])},r:{get:function(){return this._rgb[0]},set:function(r){this._rgb[0]=r,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(r){this._rgb[1]=r,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(r){this._rgb[2]=r,this.onChange()}},destroy:function(){this.onChangeCallback=null}});f.exports=n}),60461:(f=>{var x={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};f.exports=x}),54312:((f,x,e)=>{var o=e(62235),m=e(35893),n=e(86327),r=e(88417),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)+l),n(t,o(s)+i),t};f.exports=a}),46768:((f,x,e)=>{var o=e(62235),m=e(26541),n=e(86327),r=e(385),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)-l),n(t,o(s)+i),t};f.exports=a}),35827:((f,x,e)=>{var o=e(62235),m=e(54380),n=e(86327),r=e(40136),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)+l),n(t,o(s)+i),t};f.exports=a}),46871:((f,x,e)=>{var o=e(66786),m=e(35893),n=e(7702),r=function(a,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),o(a,m(t)+s,n(t)+l),a};f.exports=r}),5198:((f,x,e)=>{var o=e(7702),m=e(26541),n=e(20786),r=e(385),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)-l),n(t,o(s)+i),t};f.exports=a}),11879:((f,x,e)=>{var o=e(60461),m=[];m[o.BOTTOM_CENTER]=e(54312),m[o.BOTTOM_LEFT]=e(46768),m[o.BOTTOM_RIGHT]=e(35827),m[o.CENTER]=e(46871),m[o.LEFT_CENTER]=e(5198),m[o.RIGHT_CENTER]=e(80503),m[o.TOP_CENTER]=e(89698),m[o.TOP_LEFT]=e(922),m[o.TOP_RIGHT]=e(21373),m[o.LEFT_BOTTOM]=m[o.BOTTOM_LEFT],m[o.LEFT_TOP]=m[o.TOP_LEFT],m[o.RIGHT_BOTTOM]=m[o.BOTTOM_RIGHT],m[o.RIGHT_TOP]=m[o.TOP_RIGHT];var n=function(r,a,t,s,l){return m[t](r,a,s,l)};f.exports=n}),80503:((f,x,e)=>{var o=e(7702),m=e(54380),n=e(20786),r=e(40136),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)+l),n(t,o(s)+i),t};f.exports=a}),89698:((f,x,e)=>{var o=e(35893),m=e(17717),n=e(88417),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,o(s)+l),r(t,m(s)-i),t};f.exports=a}),922:((f,x,e)=>{var o=e(26541),m=e(17717),n=e(385),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,o(s)-l),r(t,m(s)-i),t};f.exports=a}),21373:((f,x,e)=>{var o=e(54380),m=e(17717),n=e(40136),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,o(s)+l),r(t,m(s)-i),t};f.exports=a}),91660:((f,x,e)=>{f.exports={BottomCenter:e(54312),BottomLeft:e(46768),BottomRight:e(35827),Center:e(46871),LeftCenter:e(5198),QuickSet:e(11879),RightCenter:e(80503),TopCenter:e(89698),TopLeft:e(922),TopRight:e(21373)}}),71926:((f,x,e)=>{var o=e(60461),m=e(79291),n={In:e(91660),To:e(16694)};n=m(!1,n,o),f.exports=n}),21578:((f,x,e)=>{var o=e(62235),m=e(35893),n=e(88417),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,m(s)+l),r(t,o(s)+i),t};f.exports=a}),10210:((f,x,e)=>{var o=e(62235),m=e(26541),n=e(385),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,m(s)-l),r(t,o(s)+i),t};f.exports=a}),82341:((f,x,e)=>{var o=e(62235),m=e(54380),n=e(40136),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,m(s)+l),r(t,o(s)+i),t};f.exports=a}),87958:((f,x,e)=>{var o=e(62235),m=e(26541),n=e(86327),r=e(40136),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)-l),n(t,o(s)+i),t};f.exports=a}),40080:((f,x,e)=>{var o=e(7702),m=e(26541),n=e(20786),r=e(40136),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)-l),n(t,o(s)+i),t};f.exports=a}),88466:((f,x,e)=>{var o=e(26541),m=e(17717),n=e(40136),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,o(s)-l),r(t,m(s)-i),t};f.exports=a}),38829:((f,x,e)=>{var o=e(60461),m=[];m[o.BOTTOM_CENTER]=e(21578),m[o.BOTTOM_LEFT]=e(10210),m[o.BOTTOM_RIGHT]=e(82341),m[o.LEFT_BOTTOM]=e(87958),m[o.LEFT_CENTER]=e(40080),m[o.LEFT_TOP]=e(88466),m[o.RIGHT_BOTTOM]=e(19211),m[o.RIGHT_CENTER]=e(34609),m[o.RIGHT_TOP]=e(48741),m[o.TOP_CENTER]=e(49440),m[o.TOP_LEFT]=e(81288),m[o.TOP_RIGHT]=e(61323);var n=function(r,a,t,s,l){return m[t](r,a,s,l)};f.exports=n}),19211:((f,x,e)=>{var o=e(62235),m=e(54380),n=e(86327),r=e(385),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)+l),n(t,o(s)+i),t};f.exports=a}),34609:((f,x,e)=>{var o=e(7702),m=e(54380),n=e(20786),r=e(385),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,m(s)+l),n(t,o(s)+i),t};f.exports=a}),48741:((f,x,e)=>{var o=e(54380),m=e(17717),n=e(385),r=e(66737),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),n(t,o(s)+l),r(t,m(s)-i),t};f.exports=a}),49440:((f,x,e)=>{var o=e(35893),m=e(17717),n=e(86327),r=e(88417),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,o(s)+l),n(t,m(s)-i),t};f.exports=a}),81288:((f,x,e)=>{var o=e(26541),m=e(17717),n=e(86327),r=e(385),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,o(s)-l),n(t,m(s)-i),t};f.exports=a}),61323:((f,x,e)=>{var o=e(54380),m=e(17717),n=e(86327),r=e(40136),a=function(t,s,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(t,o(s)+l),n(t,m(s)-i),t};f.exports=a}),16694:((f,x,e)=>{f.exports={BottomCenter:e(21578),BottomLeft:e(10210),BottomRight:e(82341),LeftBottom:e(87958),LeftCenter:e(40080),LeftTop:e(88466),QuickSet:e(38829),RightBottom:e(19211),RightCenter:e(34609),RightTop:e(48741),TopCenter:e(49440),TopLeft:e(81288),TopRight:e(61323)}}),66786:((f,x,e)=>{var o=e(88417),m=e(20786),n=function(r,a,t){return o(r,a),m(r,t)};f.exports=n}),62235:(f=>{var x=function(e){return e.y+e.height-e.height*e.originY};f.exports=x}),72873:((f,x,e)=>{var o=e(62235),m=e(26541),n=e(54380),r=e(17717),a=e(87841),t=function(s,l){l===void 0&&(l=new a);var i=m(s),h=r(s);return l.x=i,l.y=h,l.width=n(s)-i,l.height=o(s)-h,l};f.exports=t}),35893:(f=>{var x=function(e){return e.x-e.width*e.originX+e.width*.5};f.exports=x}),7702:(f=>{var x=function(e){return e.y-e.height*e.originY+e.height*.5};f.exports=x}),26541:(f=>{var x=function(e){return e.x-e.width*e.originX};f.exports=x}),87431:(f=>{var x=function(e){return e.width*e.originX};f.exports=x}),46928:(f=>{var x=function(e){return e.height*e.originY};f.exports=x}),54380:(f=>{var x=function(e){return e.x+e.width-e.width*e.originX};f.exports=x}),17717:(f=>{var x=function(e){return e.y-e.height*e.originY};f.exports=x}),86327:(f=>{var x=function(e,o){return e.y=o-e.height+e.height*e.originY,e};f.exports=x}),88417:(f=>{var x=function(e,o){var m=e.width*e.originX;return e.x=o+m-e.width*.5,e};f.exports=x}),20786:(f=>{var x=function(e,o){var m=e.height*e.originY;return e.y=o+m-e.height*.5,e};f.exports=x}),385:(f=>{var x=function(e,o){return e.x=o+e.width*e.originX,e};f.exports=x}),40136:(f=>{var x=function(e,o){return e.x=o-e.width+e.width*e.originX,e};f.exports=x}),66737:(f=>{var x=function(e,o){return e.y=o+e.height*e.originY,e};f.exports=x}),58724:((f,x,e)=>{f.exports={CenterOn:e(66786),GetBottom:e(62235),GetBounds:e(72873),GetCenterX:e(35893),GetCenterY:e(7702),GetLeft:e(26541),GetOffsetX:e(87431),GetOffsetY:e(46928),GetRight:e(54380),GetTop:e(17717),SetBottom:e(86327),SetCenterX:e(88417),SetCenterY:e(20786),SetLeft:e(385),SetRight:e(40136),SetTop:e(66737)}}),20623:(f=>{var x={setCrisp:function(e){var o=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return o.forEach(function(m){e.style["image-rendering"]=m}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};f.exports=x}),27919:((f,x,e)=>{var o=e(8054),m=e(68703),n=[],r=!1,a=function(){var t=function(g,y,v,S,w){y===void 0&&(y=1),v===void 0&&(v=1),S===void 0&&(S=o.CANVAS),w===void 0&&(w=!1);var T,C=i(S);return C===null?(C={parent:g,canvas:document.createElement("canvas"),type:S},S===o.CANVAS&&n.push(C),T=C.canvas):(C.parent=g,T=C.canvas),w&&(C.parent=T),T.width=y,T.height=v,r&&S===o.CANVAS&&m.disable(T.getContext("2d",{willReadFrequently:!1})),T},s=function(g,y,v){return t(g,y,v,o.CANVAS)},l=function(g,y,v){return t(g,y,v,o.WEBGL)},i=function(g){if(g===void 0&&(g=o.CANVAS),g===o.WEBGL)return null;for(var y=0;y<n.length;y++){var v=n[y];if(!v.parent&&v.type===g)return v}return null},h=function(g){var y=g instanceof HTMLCanvasElement;n.forEach(function(v){(y&&v.canvas===g||!y&&v.parent===g)&&(v.parent=null,v.canvas.width=1,v.canvas.height=1)})},d=function(){var g=0;return n.forEach(function(y){y.parent&&g++}),g},c=function(){return n.length-d()},u=function(){r=!0},p=function(){r=!1};return{create2D:s,create:t,createWebGL:l,disableSmoothing:u,enableSmoothing:p,first:i,free:c,pool:n,remove:h,total:d}};f.exports=a()}),68703:(f=>{var x="",e=function(){var o=function(a){for(var t=["i","webkitI","msI","mozI","oI"],s=0;s<t.length;s++){var l=t[s]+"mageSmoothingEnabled";if(l in a)return l}return null},m=function(a){return x===""&&(x=o(a)),x&&(a[x]=!0),a},n=function(a){return x===""&&(x=o(a)),x&&(a[x]=!1),a},r=function(a){return x!==null?a[x]:null};return{disable:n,enable:m,getPrefix:o,isEnabled:r}};f.exports=e()}),65208:(f=>{var x=function(e,o){return o===void 0&&(o="none"),e.style.msTouchAction=o,e.style["ms-touch-action"]=o,e.style["touch-action"]=o,e};f.exports=x}),91610:(f=>{var x=function(e,o){o===void 0&&(o="none");var m=["-webkit-","-khtml-","-moz-","-ms-",""];return m.forEach(function(n){e.style[n+"user-select"]=o}),e.style["-webkit-touch-callout"]=o,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};f.exports=x}),26253:((f,x,e)=>{f.exports={CanvasInterpolation:e(20623),CanvasPool:e(27919),Smoothing:e(68703),TouchAction:e(65208),UserSelect:e(91610)}}),40987:((f,x,e)=>{var o=e(83419),m=e(37589),n=e(1e3),r=e(7537),a=e(87837),t=new o({initialize:function(l,i,h,d){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(l,i,h,d)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(s,l,i,h,d){return h===void 0&&(h=255),d===void 0&&(d=!0),this._locked=!0,this.red=s,this.green=l,this.blue=i,this.alpha=h,this._locked=!1,this.update(d)},setGLTo:function(s,l,i,h){return h===void 0&&(h=1),this._locked=!0,this.redGL=s,this.greenGL=l,this.blueGL=i,this.alphaGL=h,this._locked=!1,this.update(!0)},setFromRGB:function(s){return this._locked=!0,this.red=s.r,this.green=s.g,this.blue=s.b,s.hasOwnProperty("a")&&(this.alpha=s.a),this._locked=!1,this.update(!0)},setFromHSV:function(s,l,i){return r(s,l,i,this)},update:function(s){if(s===void 0&&(s=!1),this._locked)return this;var l=this.r,i=this.g,h=this.b,d=this.a;return this._color=m(l,i,h),this._color32=n(l,i,h,d),this._rgba="rgba("+l+","+i+","+h+","+d/255+")",s&&a(l,i,h,this),this},updateHSV:function(){var s=this.r,l=this.g,i=this.b;return a(s,l,i,this),this},clone:function(){return new t(this.r,this.g,this.b,this.a)},gray:function(s){return this.setTo(s,s,s)},random:function(s,l){s===void 0&&(s=0),l===void 0&&(l=255);var i=Math.floor(s+Math.random()*(l-s)),h=Math.floor(s+Math.random()*(l-s)),d=Math.floor(s+Math.random()*(l-s));return this.setTo(i,h,d)},randomGray:function(s,l){s===void 0&&(s=0),l===void 0&&(l=255);var i=Math.floor(s+Math.random()*(l-s));return this.setTo(i,i,i)},saturate:function(s){return this.s+=s/100,this},desaturate:function(s){return this.s-=s/100,this},lighten:function(s){return this.v+=s/100,this},darken:function(s){return this.v-=s/100,this},brighten:function(s){var l=this.r,i=this.g,h=this.b;return l=Math.max(0,Math.min(255,l-Math.round(255*-(s/100)))),i=Math.max(0,Math.min(255,i-Math.round(255*-(s/100)))),h=Math.max(0,Math.min(255,h-Math.round(255*-(s/100)))),this.setTo(l,i,h)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(s){this.gl[0]=Math.min(Math.abs(s),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(s){this.gl[1]=Math.min(Math.abs(s),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(s){this.gl[2]=Math.min(Math.abs(s),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(s){this.gl[3]=Math.min(Math.abs(s),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(s){s=Math.floor(Math.abs(s)),this.r=Math.min(s,255),this.gl[0]=s/255,this.update(!0)}},green:{get:function(){return this.g},set:function(s){s=Math.floor(Math.abs(s)),this.g=Math.min(s,255),this.gl[1]=s/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(s){s=Math.floor(Math.abs(s)),this.b=Math.min(s,255),this.gl[2]=s/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(s){s=Math.floor(Math.abs(s)),this.a=Math.min(s,255),this.gl[3]=s/255,this.update()}},h:{get:function(){return this._h},set:function(s){this._h=s,r(s,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(s){this._s=s,r(this._h,s,this._v,this)}},v:{get:function(){return this._v},set:function(s){this._v=s,r(this._h,this._s,s,this)}}});f.exports=t}),92728:((f,x,e)=>{var o=e(37589),m=function(n){n===void 0&&(n=1024);var r=[],a=255,t,s=255,l=0,i=0;for(t=0;t<=a;t++)r.push({r:s,g:t,b:i,color:o(s,t,i)});for(l=255,t=a;t>=0;t--)r.push({r:t,g:l,b:i,color:o(t,l,i)});for(s=0,t=0;t<=a;t++,l--)r.push({r:s,g:l,b:t,color:o(s,l,t)});for(l=0,i=255,t=0;t<=a;t++,i--,s++)r.push({r:s,g:l,b:i,color:o(s,l,i)});if(n===1024)return r;var h=[],d=0,c=1024/n;for(t=0;t<n;t++)h.push(r[Math.floor(d)]),d+=c;return h};f.exports=m}),91588:(f=>{var x=function(e){var o={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(o.a=e>>>24),o};f.exports=x}),62957:(f=>{var x=function(e){var o=e.toString(16);return o.length===1?"0"+o:o};f.exports=x}),37589:(f=>{var x=function(e,o,m){return e<<16|o<<8|m};f.exports=x}),1e3:(f=>{var x=function(e,o,m,n){return n<<24|e<<16|o<<8|m};f.exports=x}),62183:((f,x,e)=>{var o=e(40987),m=e(89528),n=function(r,a,t){var s=t,l=t,i=t;if(a!==0){var h=t<.5?t*(1+a):t+a-t*a,d=2*t-h;s=m(d,h,r+1/3),l=m(d,h,r),i=m(d,h,r-1/3)}var c=new o;return c.setGLTo(s,l,i,1)};f.exports=n}),27939:((f,x,e)=>{var o=e(7537),m=function(n,r){n===void 0&&(n=1),r===void 0&&(r=1);for(var a=[],t=0;t<=359;t++)a.push(o(t/359,n,r));return a};f.exports=m}),7537:((f,x,e)=>{var o=e(37589);function m(r,a,t,s){var l=(r+a*6)%6,i=Math.min(l,4-l,1);return Math.round(255*(s-s*t*Math.max(0,i)))}var n=function(r,a,t,s){a===void 0&&(a=1),t===void 0&&(t=1);var l=m(5,r,a,t),i=m(3,r,a,t),h=m(1,r,a,t);return s?s.setTo?s.setTo(l,i,h,s.alpha,!0):(s.r=l,s.g=i,s.b=h,s.color=o(l,i,h),s):{r:l,g:i,b:h,color:o(l,i,h)}};f.exports=n}),70238:((f,x,e)=>{var o=e(40987),m=function(n){var r=new o;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(i,h,d,c){return h+h+d+d+c+c});var a=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(a){var t=parseInt(a[1],16),s=parseInt(a[2],16),l=parseInt(a[3],16);r.setTo(t,s,l)}return r};f.exports=m}),89528:(f=>{var x=function(e,o,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?e+(o-e)*6*m:m<.5?o:m<.6666666666666666?e+(o-e)*(.6666666666666666-m)*6:e};f.exports=x}),30100:((f,x,e)=>{var o=e(40987),m=e(90664),n=function(r){var a=m(r);return new o(a.r,a.g,a.b,a.a)};f.exports=n}),90664:(f=>{var x=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};f.exports=x}),13699:((f,x,e)=>{var o=e(28915),m=e(37589),n=function(t,s,l,i,h,d,c,u){c===void 0&&(c=100),u===void 0&&(u=0);var p=u/c,g=o(t,i,p),y=o(s,h,p),v=o(l,d,p);return{r:g,g:y,b:v,a:255,color:m(g,y,v)}},r=function(t,s,l,i){return l===void 0&&(l=100),i===void 0&&(i=0),n(t.r,t.g,t.b,s.r,s.g,s.b,l,i)},a=function(t,s,l,i,h,d){return h===void 0&&(h=100),d===void 0&&(d=0),n(t.r,t.g,t.b,s,l,i,h,d)};f.exports={RGBWithRGB:n,ColorWithRGB:a,ColorWithColor:r}}),68957:((f,x,e)=>{var o=e(40987),m=function(n){return new o(n.r,n.g,n.b,n.a)};f.exports=m}),87388:((f,x,e)=>{var o=e(40987),m=function(n){var r=new o,a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());if(a){var t=parseInt(a[1],10),s=parseInt(a[2],10),l=parseInt(a[3],10),i=a[4]!==void 0?parseFloat(a[4]):1;r.setTo(t,s,l,i*255)}return r};f.exports=m}),87837:(f=>{var x=function(e,o,m,n){n===void 0&&(n={h:0,s:0,v:0}),e/=255,o/=255,m/=255;var r=Math.min(e,o,m),a=Math.max(e,o,m),t=a-r,s=0,l=a===0?0:t/a,i=a;return a!==r&&(a===e?s=(o-m)/t+(o<m?6:0):a===o?s=(m-e)/t+2:a===m&&(s=(e-o)/t+4),s/=6),n.hasOwnProperty("_h")?(n._h=s,n._s=l,n._v=i):(n.h=s,n.s=l,n.v=i),n};f.exports=x}),75723:((f,x,e)=>{var o=e(62957),m=function(n,r,a,t,s){return t===void 0&&(t=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(n<<16)+(r<<8)+a).toString(16).slice(1,7):"0x"+o(t)+o(n)+o(r)+o(a)};f.exports=m}),85386:((f,x,e)=>{var o=e(30976),m=e(40987),n=function(r,a){return r===void 0&&(r=0),a===void 0&&(a=255),new m(o(r,a),o(r,a),o(r,a))};f.exports=n}),80333:((f,x,e)=>{var o=e(70238),m=e(30100),n=e(68957),r=e(87388),a=function(t){var s=typeof t;switch(s){case"string":return t.substr(0,3).toLowerCase()==="rgb"?r(t):o(t);case"number":return m(t);case"object":return n(t)}};f.exports=a}),3956:((f,x,e)=>{var o=e(40987);o.ColorSpectrum=e(92728),o.ColorToRGBA=e(91588),o.ComponentToHex=e(62957),o.GetColor=e(37589),o.GetColor32=e(1e3),o.HexStringToColor=e(70238),o.HSLToColor=e(62183),o.HSVColorWheel=e(27939),o.HSVToRGB=e(7537),o.HueToComponent=e(89528),o.IntegerToColor=e(30100),o.IntegerToRGB=e(90664),o.Interpolate=e(13699),o.ObjectToColor=e(68957),o.RandomRGB=e(85386),o.RGBStringToColor=e(87388),o.RGBToHSV=e(87837),o.RGBToString=e(75723),o.ValueToColor=e(80333),f.exports=o}),27460:((f,x,e)=>{f.exports={Align:e(71926),BaseShader:e(73894),Bounds:e(58724),Canvas:e(26253),Color:e(3956),ColorMatrix:e(89422),Masks:e(69781),RGB:e(51767)}}),6858:((f,x,e)=>{var o=e(83419),m=e(39429),n=new o({initialize:function(a,t,s,l,i,h){t||(t=a.sys.make.image({x:s,y:l,key:i,frame:h,add:!1})),this.bitmapMask=t,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(r){this.bitmapMask=r},preRenderWebGL:function(r,a,t){r.pipelines.BITMAPMASK_PIPELINE.beginMask(this,a,t)},postRenderWebGL:function(r,a,t){r.pipelines.BITMAPMASK_PIPELINE.endMask(this,a,t)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});m.register("bitmapMask",function(r,a,t,s,l){return new n(this.scene,r,a,t,s,l)}),f.exports=n}),80661:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a){this.geometryMask=a,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return n===void 0&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,r,a){var t=n.gl;n.flush(),n.maskStack.length===0&&(t.enable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:a}),this.applyStencil(n,a,!0),n.maskCount++},applyStencil:function(n,r,a){var t=n.gl,s=this.geometryMask,l=n.maskCount,i=255;t.colorMask(!1,!1,!1,!1),a?(t.stencilFunc(t.EQUAL,l,i),t.stencilOp(t.KEEP,t.KEEP,t.INCR),l++):(t.stencilFunc(t.EQUAL,l+1,i),t.stencilOp(t.KEEP,t.KEEP,t.DECR)),this.level=l,s.renderWebGL(n,s,r),n.flush(),t.colorMask(!0,!0,!0,!0),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),this.invertAlpha?t.stencilFunc(t.NOTEQUAL,l,i):t.stencilFunc(t.EQUAL,l,i)},postRenderWebGL:function(n){var r=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var a=n.currentMask;if(n.maskStack.length===0)a.mask=null,r.disable(r.STENCIL_TEST);else{var t=n.maskStack[n.maskStack.length-1];t.mask.applyStencil(n,t.camera,!1),n.currentCameraMask.mask!==t.mask?(a.mask=t.mask,a.camera=t.camera):a.mask=null}},preRenderCanvas:function(n,r,a){var t=this.geometryMask;n.currentContext.save(),t.renderCanvas(n,t,a,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});f.exports=m}),69781:((f,x,e)=>{f.exports={BitmapMask:e(6858),GeometryMask:e(80661)}}),73894:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t,s){(!a||a==="")&&(a=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!t||t==="")&&(t=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),s===void 0&&(s=null),this.key=r,this.fragmentSrc=a,this.vertexSrc=t,this.uniforms=s}});f.exports=m}),40366:(f=>{var x=function(e,o){var m;if(o)typeof o=="string"?m=document.getElementById(o):typeof o=="object"&&o.nodeType===1&&(m=o);else if(e.parentElement||o===null)return e;return m||(m=document.body),m.appendChild(e),e};f.exports=x}),83719:((f,x,e)=>{var o=e(40366),m=function(n){var r=n.config;if(!(!r.parent||!r.domCreateContainer)){var a=document.createElement("div");a.style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+r.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=a,o(a,r.parent)}};f.exports=m}),57264:((f,x,e)=>{var o=e(25892),m=function(n){if(document.readyState==="complete"||document.readyState==="interactive"){n();return}var r=function(){document.removeEventListener("deviceready",r,!0),document.removeEventListener("DOMContentLoaded",r,!0),window.removeEventListener("load",r,!0),n()};document.body?o.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)};f.exports=m}),57811:(f=>{var x=function(e){if(!e)return window.innerHeight;var o=Math.abs(window.orientation),m={w:0,h:0},n=document.createElement("div");return n.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(n),m.w=o===90?n.offsetHeight:window.innerWidth,m.h=o===90?window.innerWidth:n.offsetHeight,document.documentElement.removeChild(n),n=null,Math.abs(window.orientation)!==90?m.h:m.w};f.exports=x}),45818:((f,x,e)=>{var o=e(13560),m=function(n,r){var a=window.screen,t=a?a.orientation||a.mozOrientation||a.msOrientation:!1;if(t&&typeof t.type=="string")return t.type;if(typeof t=="string")return t;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return o.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return o.ORIENTATION.LANDSCAPE}else return r>n?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE};f.exports=m}),74403:(f=>{var x=function(e){var o;return e!==""&&(typeof e=="string"?o=document.getElementById(e):e&&e.nodeType===1&&(o=e)),o||(o=document.body),o};f.exports=x}),56836:(f=>{var x=function(e){var o="";try{if(window.DOMParser){var m=new DOMParser;o=m.parseFromString(e,"text/xml")}else o=new ActiveXObject("Microsoft.XMLDOM"),o.loadXML(e)}catch{o=null}return!o||!o.documentElement||o.getElementsByTagName("parsererror").length?null:o};f.exports=x}),35846:(f=>{var x=function(e){e.parentNode&&e.parentNode.removeChild(e)};f.exports=x}),43092:((f,x,e)=>{var o=e(83419),m=e(29747),n=new o({initialize:function(){this.isRunning=!1,this.callback=m,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var a=this;this.step=function t(s){a.callback(s),a.isRunning&&(a.timeOutID=window.requestAnimationFrame(t))},this.stepTimeout=function t(){a.isRunning&&(a.timeOutID=window.setTimeout(t,a.delay)),a.callback(window.performance.now())}},start:function(r,a,t){this.isRunning||(this.callback=r,this.isSetTimeOut=a,this.delay=t,this.isRunning=!0,this.timeOutID=a?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=m}});f.exports=n}),84902:((f,x,e)=>{var o={AddToDOM:e(40366),DOMContentLoaded:e(57264),GetInnerHeight:e(57811),GetScreenOrientation:e(45818),GetTarget:e(74403),ParseXML:e(56836),RemoveFromDOM:e(35846),RequestAnimationFrame:e(43092)};f.exports=o}),47565:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(37277),r=new o({Extends:m,initialize:function(){m.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",r,"events"),f.exports=r}),93055:((f,x,e)=>{f.exports={EventEmitter:e(47565)}}),20122:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s){s===void 0&&(s=1),m.call(this,n.BARREL,t),this.amount=s}});f.exports=r}),32251:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h,d,c){l===void 0&&(l=1),i===void 0&&(i=1),h===void 0&&(h=1),d===void 0&&(d=1),c===void 0&&(c=4),m.call(this,n.BLOOM,t),this.steps=c,this.offsetX=l,this.offsetY=i,this.blurStrength=h,this.strength=d,this.glcolor=[1,1,1],s!=null&&(this.color=s)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var t=this.glcolor;t[0]=(a>>16&255)/255,t[1]=(a>>8&255)/255,t[2]=(a&255)/255}}});f.exports=r}),9047:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h,d,c){s===void 0&&(s=0),l===void 0&&(l=2),i===void 0&&(i=2),h===void 0&&(h=1),c===void 0&&(c=4),m.call(this,n.BLUR,t),this.quality=s,this.x=l,this.y=i,this.steps=c,this.strength=h,this.glcolor=[1,1,1],d!=null&&(this.color=d)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var t=this.glcolor;t[0]=(a>>16&255)/255,t[1]=(a>>8&255)/255,t[2]=(a&255)/255}}});f.exports=r}),27885:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h,d,c,u){s===void 0&&(s=.5),l===void 0&&(l=1),i===void 0&&(i=.2),h===void 0&&(h=!1),d===void 0&&(d=1),c===void 0&&(c=1),u===void 0&&(u=1),m.call(this,n.BOKEH,t),this.radius=s,this.amount=l,this.contrast=i,this.isTiltShift=h,this.strength=u,this.blurX=d,this.blurY=c}});f.exports=r}),12578:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h,d){s===void 0&&(s=8),h===void 0&&(h=1),d===void 0&&(d=.005),m.call(this,n.CIRCLE,t),this.scale=h,this.feather=d,this.thickness=s,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],l!=null&&(this.color=l),i!=null&&(this.backgroundColor=i)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var t=this.glcolor;t[0]=(a>>16&255)/255,t[1]=(a>>8&255)/255,t[2]=(a&255)/255}},backgroundColor:{get:function(){var a=this.glcolor2;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var t=this.glcolor2;t[0]=(a>>16&255)/255,t[1]=(a>>8&255)/255,t[2]=(a&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(a){this.glcolor2[3]=a}}});f.exports=r}),15802:((f,x,e)=>{var o=e(83419),m=e(89422),n=e(14811),r=new o({Extends:m,initialize:function(t){m.call(this),this.type=n.COLOR_MATRIX,this.gameObject=t,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});f.exports=r}),72898:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a){this.type=r,this.gameObject=a,this.active=!0},setActive:function(n){return this.active=n,this},destroy:function(){this.gameObject=null,this.active=!1}});f.exports=m}),44553:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i){s===void 0&&(s="__WHITE"),l===void 0&&(l=.005),i===void 0&&(i=.005),m.call(this,n.DISPLACEMENT,t),this.x=l,this.y=i,this.glTexture,this.setTexture(s)},setTexture:function(a){var t=this.gameObject.scene.sys.textures.getFrame(a);return t&&(this.glTexture=t.glTexture),this}});f.exports=r}),68531:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h){l===void 0&&(l=4),i===void 0&&(i=0),h===void 0&&(h=!1),m.call(this,n.GLOW,t),this.outerStrength=l,this.innerStrength=i,this.knockout=h,this.glcolor=[1,1,1,1],s!==void 0&&(this.color=s)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var t=this.glcolor;t[0]=(a>>16&255)/255,t[1]=(a>>8&255)/255,t[2]=(a&255)/255}}});f.exports=r}),37102:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h,d,c,u,p){i===void 0&&(i=.2),h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=1),p===void 0&&(p=0),m.call(this,n.GRADIENT,t),this.alpha=i,this.size=p,this.fromX=h,this.fromY=d,this.toX=c,this.toY=u,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],s!=null&&(this.color1=s),l!=null&&(this.color2=l)},color1:{get:function(){var a=this.glcolor1;return(a[0]<<16)+(a[1]<<8)+(a[2]|0)},set:function(a){var t=this.glcolor1;t[0]=a>>16&255,t[1]=a>>8&255,t[2]=a&255}},color2:{get:function(){var a=this.glcolor2;return(a[0]<<16)+(a[1]<<8)+(a[2]|0)},set:function(a){var t=this.glcolor2;t[0]=a>>16&255,t[1]=a>>8&255,t[2]=a&255}}});f.exports=r}),86886:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s){s===void 0&&(s=1),m.call(this,n.PIXELATE,t),this.amount=s}});f.exports=r}),92322:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h,d,c,u){s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=.1),h===void 0&&(h=1),c===void 0&&(c=6),u===void 0&&(u=1),m.call(this,n.SHADOW,t),this.x=s,this.y=l,this.decay=i,this.power=h,this.glcolor=[0,0,0,1],this.samples=c,this.intensity=u,d!==void 0&&(this.color=d)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var t=this.glcolor;t[0]=(a>>16&255)/255,t[1]=(a>>8&255)/255,t[2]=(a&255)/255}}});f.exports=r}),39563:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h){s===void 0&&(s=.5),l===void 0&&(l=.5),i===void 0&&(i=3),h===void 0&&(h=!1),m.call(this,n.SHINE,t),this.speed=s,this.lineWidth=l,this.gradient=i,this.reveal=h}});f.exports=r}),56448:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h){s===void 0&&(s=.5),l===void 0&&(l=.5),i===void 0&&(i=.5),h===void 0&&(h=.5),m.call(this,n.VIGNETTE,t),this.x=s,this.y=l,this.radius=i,this.strength=h}});f.exports=r}),38433:((f,x,e)=>{var o=e(83419),m=e(72898),n=e(14811),r=new o({Extends:m,initialize:function(t,s,l,i,h){s===void 0&&(s=.1),l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=!1),m.call(this,n.WIPE,t),this.progress=0,this.wipeWidth=s,this.direction=l,this.axis=i,this.reveal=h}});f.exports=r}),14811:(f=>{var x={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};f.exports=x}),66064:((f,x,e)=>{var o=e(79291),m=e(14811),n={Barrel:e(20122),Controller:e(72898),Bloom:e(32251),Blur:e(9047),Bokeh:e(27885),Circle:e(12578),ColorMatrix:e(15802),Displacement:e(44553),Glow:e(68531),Gradient:e(37102),Pixelate:e(86886),Shadow:e(92322),Shine:e(39563),Vignette:e(56448),Wipe:e(38433)};n=o(!1,n,m),f.exports=n}),25305:((f,x,e)=>{var o=e(10312),m=e(23568),n=function(r,a,t){a.x=m(t,"x",0),a.y=m(t,"y",0),a.depth=m(t,"depth",0),a.flipX=m(t,"flipX",!1),a.flipY=m(t,"flipY",!1);var s=m(t,"scale",null);typeof s=="number"?a.setScale(s):s!==null&&(a.scaleX=m(s,"x",1),a.scaleY=m(s,"y",1));var l=m(t,"scrollFactor",null);typeof l=="number"?a.setScrollFactor(l):l!==null&&(a.scrollFactorX=m(l,"x",1),a.scrollFactorY=m(l,"y",1)),a.rotation=m(t,"rotation",0);var i=m(t,"angle",null);i!==null&&(a.angle=i),a.alpha=m(t,"alpha",1);var h=m(t,"origin",null);if(typeof h=="number")a.setOrigin(h);else if(h!==null){var d=m(h,"x",.5),c=m(h,"y",.5);a.setOrigin(d,c)}a.blendMode=m(t,"blendMode",o.NORMAL),a.visible=m(t,"visible",!0);var u=m(t,"add",!0);return u&&r.sys.displayList.add(a),a.preUpdate&&r.sys.updateList.add(a),a};f.exports=n}),13059:((f,x,e)=>{var o=e(23568),m=function(n,r){var a=o(r,"anims",null);if(a===null)return n;if(typeof a=="string")n.anims.play(a);else if(typeof a=="object"){var t=n.anims,s=o(a,"key",void 0);if(s){var l=o(a,"startFrame",void 0),i=o(a,"delay",0),h=o(a,"repeat",0),d=o(a,"repeatDelay",0),c=o(a,"yoyo",!1),u=o(a,"play",!1),p=o(a,"delayedPlay",0),g={key:s,delay:i,repeat:h,repeatDelay:d,yoyo:c,startFrame:l};u?t.play(g):p>0?t.playAfterDelay(g,p):t.load(g)}}return n};f.exports=m}),8050:((f,x,e)=>{var o=e(83419),m=e(73162),n=e(37277),r=e(51708),a=e(44594),t=e(19186),s=new o({Extends:m,initialize:function(i){m.call(this,i),this.sortChildrenFlag=!1,this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(l){l.displayList&&l.displayList!==this&&l.removeFromDisplayList(),l.parentContainer&&l.parentContainer.remove(l),l.displayList||(this.queueDepthSort(),l.displayList=this,l.emit(r.ADDED_TO_SCENE,l,this.scene),this.events.emit(a.ADDED_TO_SCENE,l,this.scene))},removeChildCallback:function(l){this.queueDepthSort(),l.displayList=null,l.emit(r.REMOVED_FROM_SCENE,l,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,l,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(t(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(l,i){return l._depth-i._depth},getChildren:function(){return this.list},shutdown:function(){for(var l=this.list,i=l.length;i--;)l[i]&&l[i].destroy(!0);l.length=0,this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",s,"displayList"),f.exports=s}),95643:((f,x,e)=>{var o=e(83419),m=e(53774),n=e(45893),r=e(50792),a=e(51708),t=e(44594),s=new o({Extends:r,initialize:function(i,h){r.call(this),this.scene=i,this.displayList=null,this.type=h,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),i.sys.queueDepthSort()},setActive:function(l){return this.active=l,this},setName:function(l){return this.name=l,this},setState:function(l){return this.state=l,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(l,i){return this.data||(this.data=new n(this)),this.data.set(l,i),this},incData:function(l,i){return this.data||(this.data=new n(this)),this.data.inc(l,i),this},toggleData:function(l){return this.data||(this.data=new n(this)),this.data.toggle(l),this},getData:function(l){return this.data||(this.data=new n(this)),this.data.get(l)},setInteractive:function(l,i,h){return this.scene.sys.input.enable(this,l,i,h),this},disableInteractive:function(l){return l===void 0&&(l=!1),this.scene.sys.input.disable(this,l),this},removeInteractive:function(l){return l===void 0&&(l=!1),this.scene.sys.input.clear(this),l&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return m(this)},willRender:function(l){var i=this.displayList&&this.displayList.active?this.displayList.willRender(l):!0;return!(!i||s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},getIndexList:function(){for(var l=this,i=this.parentContainer,h=[];i&&(h.unshift(i.getIndex(l)),l=i,i.parentContainer);)i=i.parentContainer;return this.displayList?h.unshift(this.displayList.getIndex(l)):h.unshift(this.scene.sys.displayList.getIndex(l)),h},addToDisplayList:function(l){return l===void 0&&(l=this.scene.sys.displayList),this.displayList&&this.displayList!==l&&this.removeFromDisplayList(),l.exists(this)||(this.displayList=l,l.add(this,!0),l.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),l.events.emit(t.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var l=this.displayList||this.scene.sys.displayList;return l&&l.exists(this)&&(l.remove(this,!0),l.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),l.events.emit(t.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var l=null;return this.parentContainer?l=this.parentContainer.list:this.displayList&&(l=this.displayList.list),l},destroy:function(l){!this.scene||this.ignoreDestroy||(l===void 0&&(l=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,l),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});s.RENDER_MASK=15,f.exports=s}),44603:((f,x,e)=>{var o=e(83419),m=e(37277),n=e(44594),r=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(a,t){r.prototype.hasOwnProperty(a)||(r.prototype[a]=t)},r.remove=function(a){r.prototype.hasOwnProperty(a)&&delete r.prototype[a]},m.register("GameObjectCreator",r,"make"),f.exports=r}),39429:((f,x,e)=>{var o=e(83419),m=e(37277),n=e(44594),r=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(a){return(a.renderCanvas||a.renderWebGL)&&this.displayList.add(a),a.preUpdate&&this.updateList.add(a),a},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(a,t){r.prototype.hasOwnProperty(a)||(r.prototype[a]=t)},r.remove=function(a){r.prototype.hasOwnProperty(a)&&delete r.prototype[a]},m.register("GameObjectFactory",r,"add"),f.exports=r}),91296:((f,x,e)=>{var o=e(61340),m=new o,n=new o,r=new o,a={camera:m,sprite:n,calc:r},t=function(s,l,i){var h=m,d=n,c=r;return d.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),h.copyFrom(l.matrix),i?(h.multiplyWithOffset(i,-l.scrollX*s.scrollFactorX,-l.scrollY*s.scrollFactorY),d.e=s.x,d.f=s.y):(d.e-=l.scrollX*s.scrollFactorX,d.f-=l.scrollY*s.scrollFactorY),h.multiply(d,c),a};f.exports=t}),45027:((f,x,e)=>{var o=e(83419),m=e(25774),n=e(37277),r=e(44594),a=new o({Extends:m,initialize:function(s){m.call(this),this.checkQueue=!0,this.scene=s,this.systems=s.sys,s.sys.events.once(r.BOOT,this.boot,this),s.sys.events.on(r.START,this.start,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(r.PRE_UPDATE,this.update,this),t.on(r.UPDATE,this.sceneUpdate,this),t.once(r.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,s){for(var l=this._active,i=l.length,h=0;h<i;h++){var d=l[h];d.active&&d.preUpdate.call(d,t,s)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var s=this.systems.events;s.off(r.PRE_UPDATE,this.update,this),s.off(r.UPDATE,this.sceneUpdate,this),s.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",a,"updateList"),f.exports=a}),3217:(f=>{var x=function(e,o,m,n,r,a,t,s,l,i,h,d,c,u,p){var g=m.x-o.displayOriginX+r,y=m.y-o.displayOriginY+a,v=g+m.w,S=y+m.h,w=t.a,T=t.b,C=t.c,M=t.d,E=t.e,P=t.f,A=g*w+y*C+E,D=g*T+y*M+P,W=g*w+S*C+E,V=g*T+S*M+P,K=v*w+S*C+E,X=v*T+S*M+P,R=v*w+y*C+E,H=v*T+y*M+P;s&&(A=Math.round(A),D=Math.round(D),W=Math.round(W),V=Math.round(V),K=Math.round(K),X=Math.round(X),R=Math.round(R),H=Math.round(H)),e.batchQuad(o,A,D,W,V,K,X,R,H,n.u0,n.v0,n.u1,n.v1,l,i,h,d,c,u,p)};f.exports=x}),53048:(f=>{var x=function(e,o,m,n){if(m===void 0&&(m=!1),n===void 0)return n={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},n;var r=e.text,a=r.length,t=e.maxWidth,s=e.wordWrapCharCode,l=Number.MAX_VALUE,i=Number.MAX_VALUE,h=0,d=0,c=e.fontData.chars,u=e.fontData.lineHeight,p=e.letterSpacing,g=e.lineSpacing,y=0,v=0,S=0,w=null,T=e._align,C=0,M=0,E=e.fontSize/e.fontData.size,P=E*e.scaleX,A=E*e.scaleY,D=null,W=0,V=[],K=Number.MAX_VALUE,X=0,R=0,H=0,L,N,z,U=[],Y=[],$=null,Z=function(we,Ae){for(var Se=0,Ce=0;Ce<we.length;Ce++){var Ee=we.charCodeAt(Ce),Fe=Ae.chars[Ee];Fe&&(Se+=Fe.xAdvance)}return Se*P};if(t>0){z=r.split(`
`);var Q=[];for(L=0;L<z.length;L++){var q=z[L],j="",_="",te="",se="";for(N=0;N<q.length;N++)if(S=q.charCodeAt(N),j+=q[N],S===s||N===q.length-1){se=te+j;var ie=Z(se,e.fontData);ie<=t?te=se:(_=_.slice(0,-1),_+=(_?`
`:"")+te,te=j),j=""}_=_.slice(0,-1),_+=(_?`
`:"")+te,Q.push(_)}r=Q.join(`
`),n.wrappedText=r,a=r.length}var ne=0;for(L=0;L<a;L++){if(S=r.charCodeAt(L),S===10){$!==null&&(U.push({word:$.word,i:$.i,x:$.x*P,y:$.y*A,w:$.w*P,h:$.h*A}),$=null),D=null,V[R]=H,H>X&&(X=H),H<K&&(K=H),R++,H=0,y=0,v=(u+g)*R;continue}if(w=c[S],!!w){if(C=y,M=v,D!==null){var he=w.kerning[W];C+=he!==void 0?he:0}l>C&&(l=C),i>M&&(i=M);var ue=C+w.xAdvance,ae=M+u;h<ue&&(h=ue),d<ae&&(d=ae);var oe=w.xOffset+w.xAdvance+(he!==void 0?he:0);S===s?$!==null&&(U.push({word:$.word,i:$.i,x:$.x*P,y:$.y*A,w:$.w*P,h:$.h*A}),$=null):($===null&&($={word:"",i:ne,x:y,y:v,w:0,h:u}),$.word=$.word.concat(r[L]),$.w+=oe),Y.push({i:ne,idx:L,char:r[L],code:S,x:(w.xOffset+C)*E,y:(w.yOffset+v)*E,w:w.width*E,h:w.height*E,t:v*E,r:ue*E,b:u*E,line:R,glyph:w}),y+=w.xAdvance+p+(he!==void 0?he:0),D=w,W=S,H=ue*E,ne++}}if($!==null&&U.push({word:$.word,i:$.i,x:$.x*P,y:$.y*A,w:$.w*P,h:$.h*A}),V[R]=H,H>X&&(X=H),H<K&&(K=H),T>0)for(var le=0;le<Y.length;le++){var fe=Y[le];if(T===1){var de=(X-V[fe.line])/2;fe.x+=de,fe.r+=de}else if(T===2){var me=X-V[fe.line];fe.x+=me,fe.r+=me}}var pe=n.local,ve=n.global;return z=n.lines,pe.x=l*E,pe.y=i*E,pe.width=h*E,pe.height=d*E,ve.x=e.x-e._displayOriginX+l*P,ve.y=e.y-e._displayOriginY+i*A,ve.width=h*P,ve.height=d*A,z.shortest=K,z.longest=X,z.lengths=V,o&&(pe.x=Math.ceil(pe.x),pe.y=Math.ceil(pe.y),pe.width=Math.ceil(pe.width),pe.height=Math.ceil(pe.height),ve.x=Math.ceil(ve.x),ve.y=Math.ceil(ve.y),ve.width=Math.ceil(ve.width),ve.height=Math.ceil(ve.height),z.shortest=Math.ceil(K),z.longest=Math.ceil(X)),m&&(e._displayOriginX=e.originX*pe.width,e._displayOriginY=e.originY*pe.height,ve.x=e.x-e._displayOriginX*e.scaleX,ve.y=e.y-e._displayOriginY*e.scaleY,o&&(ve.x=Math.ceil(ve.x),ve.y=Math.ceil(ve.y))),n.words=U,n.characters=Y,n.lines.height=u,n.scale=E,n.scaleX=e.scaleX,n.scaleY=e.scaleY,n};f.exports=x}),61327:((f,x,e)=>{var o=e(21859),m=function(n,r,a,t,s,l,i){var h=n.sys.textures.get(a),d=h.get(t),c=n.sys.cache.xml.get(s);if(d&&c){var u=o(c,d,l,i,h);return n.sys.cache.bitmapFont.add(r,{data:u,texture:a,frame:t,fromAtlas:!0}),!0}else return!1};f.exports=m}),6925:((f,x,e)=>{var o=e(35154),m=function(n,r){var a=r.width,t=r.height,s=Math.floor(a/2),l=Math.floor(t/2),i=o(r,"chars","");if(i!==""){var h=o(r,"image",""),d=n.sys.textures.getFrame(h),c=d.cutX,u=d.cutY,p=d.source.width,g=d.source.height,y=o(r,"offset.x",0),v=o(r,"offset.y",0),S=o(r,"spacing.x",0),w=o(r,"spacing.y",0),T=o(r,"lineSpacing",0),C=o(r,"charsPerRow",null);C===null&&(C=p/a,C>i.length&&(C=i.length));for(var M=y,E=v,P={retroFont:!0,font:h,size:a,lineHeight:t+T,chars:{}},A=0,D=0;D<i.length;D++){var W=i.charCodeAt(D),V=(c+M)/p,K=(u+E)/g,X=(c+M+a)/p,R=(u+E+t)/g;P.chars[W]={x:M,y:E,width:a,height:t,centerX:s,centerY:l,xOffset:0,yOffset:0,xAdvance:a,data:{},kerning:{},u0:V,v0:K,u1:X,v1:R},A++,A===C?(A=0,M=y,E+=t+w):M+=a+S}var H={data:P,frame:null,texture:h};return H}};f.exports=m}),21859:(f=>{function x(o,m){return parseInt(o.getAttribute(m),10)}var e=function(o,m,n,r,a){n===void 0&&(n=0),r===void 0&&(r=0);var t=m.cutX,s=m.cutY,l=m.source.width,i=m.source.height,h=m.sourceIndex,d={},c=o.getElementsByTagName("info")[0],u=o.getElementsByTagName("common")[0];d.font=c.getAttribute("face"),d.size=x(c,"size"),d.lineHeight=x(u,"lineHeight")+r,d.chars={};var p=o.getElementsByTagName("char"),g=m!==void 0&&m.trimmed;if(g)var y=m.height,v=m.width;for(var S=0;S<p.length;S++){var w=p[S],T=x(w,"id"),C=String.fromCharCode(T),M=x(w,"x"),E=x(w,"y"),P=x(w,"width"),A=x(w,"height");g&&(M<v&&(v=M),E<y&&(y=E)),g&&y!==0&&v!==0&&(M-=m.x,E-=m.y);var D=(t+M)/l,W=(s+E)/i,V=(t+M+P)/l,K=(s+E+A)/i;if(d.chars[T]={x:M,y:E,width:P,height:A,centerX:Math.floor(P/2),centerY:Math.floor(A/2),xOffset:x(w,"xoffset"),yOffset:x(w,"yoffset"),xAdvance:x(w,"xadvance")+n,data:{},kerning:{},u0:D,v0:W,u1:V,v1:K},a&&P!==0&&A!==0){var X=a.add(C,h,M,E,P,A);X&&X.setUVs(P,A,D,W,V,K)}}var R=o.getElementsByTagName("kerning");for(S=0;S<R.length;S++){var H=R[S],L=x(H,"first"),N=x(H,"second"),z=x(H,"amount");d.chars[N].kerning[L]=z}return d};f.exports=e}),196:((f,x,e)=>{var o=e(87662),m=e(79291),n={Parse:e(6925)};n=m(!1,n,o),f.exports=n}),87662:(f=>{var x={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};f.exports=x}),2638:((f,x,e)=>{var o=e(22186),m=e(83419),n=e(12310),r=new m({Extends:o,Mixins:[n],initialize:function(t,s,l,i,h,d,c){o.call(this,t,s,l,i,h,d,c),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(a,t){return this.cropWidth=a,this.cropHeight=t,this},setDisplayCallback:function(a){return this.displayCallback=a,this},setScrollX:function(a){return this.scrollX=a,this},setScrollY:function(a){return this.scrollY=a,this}});f.exports=r}),86741:((f,x,e)=>{var o=e(20926),m=function(n,r,a,t){var s=r._text,l=s.length,i=n.currentContext;if(!(l===0||!o(n,i,r,a,t))){a.addToRenderList(r);var h=r.fromAtlas?r.frame:r.texture.frames.__BASE,d=r.displayCallback,c=r.callbackData,u=r.fontData.chars,p=r.fontData.lineHeight,g=r._letterSpacing,y=0,v=0,S=0,w=null,T=0,C=0,M=0,E=0,P=0,A=0,D=null,W=0,V=r.frame.source.image,K=h.cutX,X=h.cutY,R=0,H=0,L=r._fontSize/r.fontData.size,N=r._align,z=0,U=0;r.getTextBounds(!1);var Y=r._bounds.lines;N===1?U=(Y.longest-Y.lengths[0])/2:N===2&&(U=Y.longest-Y.lengths[0]),i.translate(-r.displayOriginX,-r.displayOriginY);var $=a.roundPixels;r.cropWidth>0&&r.cropHeight>0&&(i.beginPath(),i.rect(0,0,r.cropWidth,r.cropHeight),i.clip());for(var Z=0;Z<l;Z++){if(H=L,R=0,S=s.charCodeAt(Z),S===10){z++,N===1?U=(Y.longest-Y.lengths[z])/2:N===2&&(U=Y.longest-Y.lengths[z]),y=0,v+=p,D=null;continue}if(w=u[S],!!w){if(T=K+w.x,C=X+w.y,M=w.width,E=w.height,P=w.xOffset+y-r.scrollX,A=w.yOffset+v-r.scrollY,D!==null){var Q=w.kerning[W];P+=Q!==void 0?Q:0}if(d){c.index=Z,c.charCode=S,c.x=P,c.y=A,c.scale=H,c.rotation=R,c.data=w.data;var q=d(c);P=q.x,A=q.y,H=q.scale,R=q.rotation}P*=H,A*=H,P+=U,y+=w.xAdvance+g+(Q!==void 0?Q:0),D=w,W=S,!(M===0||E===0||S===32)&&($&&(P=Math.round(P),A=Math.round(A)),i.save(),i.translate(P,A),i.rotate(R),i.scale(H,H),i.drawImage(V,T,C,M,E,0,0,M,E),i.restore())}}i.restore()}};f.exports=m}),11164:((f,x,e)=>{var o=e(2638),m=e(25305),n=e(44603),r=e(23568);n.register("dynamicBitmapText",function(a,t){a===void 0&&(a={});var s=r(a,"font",""),l=r(a,"text",""),i=r(a,"size",!1),h=new o(this.scene,0,0,s,l,i);return t!==void 0&&(a.add=t),m(this.scene,h,a),h})}),72566:((f,x,e)=>{var o=e(2638),m=e(39429);m.register("dynamicBitmapText",function(n,r,a,t,s){return this.displayList.add(new o(this.scene,n,r,a,t,s))})}),12310:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(73482),n=e(86741),f.exports={renderWebGL:m,renderCanvas:n}}),73482:((f,x,e)=>{var o=e(91296),m=e(61340),n=e(70554),r=new m,a=function(t,s,l,i){var h=s.text,d=h.length;if(d!==0){l.addToRenderList(s);var c=t.pipelines.set(s.pipeline,s),u=o(s,l,i);t.pipelines.preBatch(s);var p=u.sprite,g=u.calc,y=r,v=s.cropWidth>0||s.cropHeight>0;v&&(c.flush(),t.pushScissor(g.tx,g.ty,s.cropWidth*g.scaleX,s.cropHeight*g.scaleY));var S=s.frame,w=S.glTexture,T=s.tintFill,C=n.getTintAppendFloatAlpha(s.tintTopLeft,l.alpha*s._alphaTL),M=n.getTintAppendFloatAlpha(s.tintTopRight,l.alpha*s._alphaTR),E=n.getTintAppendFloatAlpha(s.tintBottomLeft,l.alpha*s._alphaBL),P=n.getTintAppendFloatAlpha(s.tintBottomRight,l.alpha*s._alphaBR),A=c.setGameObject(s),D=0,W=0,V=0,K=0,X=s.letterSpacing,R,H=0,L=0,N,z=s.scrollX,U=s.scrollY,Y=s.fontData,$=Y.chars,Z=Y.lineHeight,Q=s.fontSize/Y.size,q=0,j=s._align,_=0,te=0,se=s.getTextBounds(!1);s.maxWidth>0&&(h=se.wrappedText,d=h.length);var ie=s._bounds.lines;j===1?te=(ie.longest-ie.lengths[0])/2:j===2&&(te=ie.longest-ie.lengths[0]);for(var ne=l.roundPixels,he=s.displayCallback,ue=s.callbackData,ae=0;ae<d;ae++){if(V=h.charCodeAt(ae),V===10){_++,j===1?te=(ie.longest-ie.lengths[_])/2:j===2&&(te=ie.longest-ie.lengths[_]),D=0,W+=Z,N=null;continue}if(R=$[V],!!R){H=R.width,L=R.height;var oe=R.xOffset+D-z,le=R.yOffset+W-U;if(N!==null){var fe=R.kerning[K]||0;oe+=fe,D+=fe}if(D+=R.xAdvance+X,N=R,K=V,!(H===0||L===0||V===32)){if(Q=s.fontSize/s.fontData.size,q=0,he){ue.color=0,ue.tint.topLeft=C,ue.tint.topRight=M,ue.tint.bottomLeft=E,ue.tint.bottomRight=P,ue.index=ae,ue.charCode=V,ue.x=oe,ue.y=le,ue.scale=Q,ue.rotation=q,ue.data=R.data;var de=he(ue);oe=de.x,le=de.y,Q=de.scale,q=de.rotation,de.color?(C=de.color,M=de.color,E=de.color,P=de.color):(C=de.tint.topLeft,M=de.tint.topRight,E=de.tint.bottomLeft,P=de.tint.bottomRight),C=n.getTintAppendFloatAlpha(C,l.alpha*s._alphaTL),M=n.getTintAppendFloatAlpha(M,l.alpha*s._alphaTR),E=n.getTintAppendFloatAlpha(E,l.alpha*s._alphaBL),P=n.getTintAppendFloatAlpha(P,l.alpha*s._alphaBR)}oe*=Q,le*=Q,oe-=s.displayOriginX,le-=s.displayOriginY,oe+=te,y.applyITRS(oe,le,q,Q,Q),g.multiply(y,p);var me=R.u0,pe=R.v0,ve=R.u1,we=R.v1,Ae=H,Se=L,Ce=p.e,Ee=p.f,Fe=Se*p.c+p.e,Re=Se*p.d+p.f,Oe=Ae*p.a+Se*p.c+p.e,Le=Ae*p.b+Se*p.d+p.f,je=Ae*p.a+p.e,at=Ae*p.b+p.f;ne&&(Ce=Math.round(Ce),Ee=Math.round(Ee),Fe=Math.round(Fe),Re=Math.round(Re),Oe=Math.round(Oe),Le=Math.round(Le),je=Math.round(je),at=Math.round(at)),c.shouldFlush(6)&&(c.flush(),A=c.setGameObject(s)),c.batchQuad(s,Ce,Ee,Fe,Re,Oe,Le,je,at,me,pe,ve,we,C,M,E,P,T,w,A)}}}v&&(c.flush(),t.popScissor()),t.pipelines.postBatch(s)}};f.exports=a}),22186:((f,x,e)=>{var o=e(83419),m=e(45319),n=e(31401),r=e(95643),a=e(53048),t=e(61327),s=e(21859),l=e(87841),i=e(18658),h=new o({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,i],initialize:function(c,u,p,g,y,v,S){y===void 0&&(y=""),S===void 0&&(S=0),r.call(this,c,"BitmapText"),this.font=g;var w=this.scene.sys.cache.bitmapFont.get(g);if(!w)throw new Error("Invalid BitmapText key: "+g);this.fontData=w.data,this._text="",this._fontSize=v||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=S,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=w.fromAtlas,this.setTexture(w.texture,w.frame),this.setPosition(u,p),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(y)},setLeftAlign:function(){return this._align=h.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=h.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=h.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(d){return this._fontSize=d,this._dirty=!0,this},setLetterSpacing:function(d){return d===void 0&&(d=0),this._letterSpacing=d,this._dirty=!0,this},setLineSpacing:function(d){return d===void 0&&(d=0),this.lineSpacing=d,this},setText:function(d){return!d&&d!==0&&(d=""),Array.isArray(d)&&(d=d.join(`
`)),d!==this.text&&(this._text=d.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(d,c,u,p){return d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=0),p===void 0&&(p=.5),this.dropShadowX=d,this.dropShadowY=c,this.dropShadowColor=u,this.dropShadowAlpha=p,this},setCharacterTint:function(d,c,u,p,g,y,v){d===void 0&&(d=0),c===void 0&&(c=1),u===void 0&&(u=!1),p===void 0&&(p=-1),g===void 0&&(g=p,y=p,v=p);var S=this.text.length;c===-1&&(c=S),d<0&&(d=S+d),d=m(d,0,S-1);for(var w=m(d+c,d,S),T=this.charColors,C=d;C<w;C++){var M=T[C];if(p===-1)T[C]=null;else{var E=u?1:0;M?(M.tintEffect=E,M.tintTL=p,M.tintTR=g,M.tintBL=y,M.tintBR=v):T[C]={tintEffect:E,tintTL:p,tintTR:g,tintBL:y,tintBR:v}}}return this},setWordTint:function(d,c,u,p,g,y,v){c===void 0&&(c=1);for(var S=this.getTextBounds(),w=S.words,T=typeof d=="number",C=0,M=0;M<w.length;M++){var E=w[M];if((T&&M===d||!T&&E.word===d)&&(this.setCharacterTint(E.i,E.word.length,u,p,g,y,v),C++,C===c))return this}return this},getTextBounds:function(d){var c=this._bounds;return(this._dirty||d||this.scaleX!==c.scaleX||this.scaleY!==c.scaleY)&&(a(this,d,!0,c),this._dirty=!1),c},getCharacterAt:function(d,c,u){for(var p=this.getLocalPoint(d,c,null,u),g=this.getTextBounds(),y=g.characters,v=new l,S=0;S<y.length;S++){var w=y[S];if(v.setTo(w.x,w.t,w.r-w.x,w.b),v.contains(p.x,p.y))return w}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(d,c,u){c===void 0&&(c=this._fontSize),u===void 0&&(u=this._align);var p=this.scene.sys.cache.bitmapFont.get(d);return p&&(this.font=d,this.fontData=p.data,this._fontSize=c,this._align=u,this.fromAtlas=p.fromAtlas===!0,this.setTexture(p.texture,p.frame),a(this,!1,!0,this._bounds)),this},setMaxWidth:function(d,c){return this._maxWidth=d,this._dirty=!0,c!==void 0&&(this.wordWrapCharCode=c),this},setDisplaySize:function(d,c){this.setScale(1,1),this.getTextBounds(!1);var u=d/this.width,p=c/this.height;return this.setScale(u,p),this},align:{set:function(d){this._align=d,this._dirty=!0},get:function(){return this._align}},text:{set:function(d){this.setText(d)},get:function(){return this._text}},fontSize:{set:function(d){this._fontSize=d,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(d){this._letterSpacing=d,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(d){this._lineSpacing=d,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(d){this._maxWidth=d,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(d){this.setScaleX(1),this.getTextBounds(!1);var c=d/this.width;this.setScaleX(c)},get:function(){return this.width}},displayHeight:{set:function(d){this.setScaleY(1),this.getTextBounds(!1);var c=d/this.height;this.setScaleY(c)},get:function(){return this.height}},toJSON:function(){var d=n.ToJSON(this),c={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return d.data=c,d},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});h.ALIGN_LEFT=0,h.ALIGN_CENTER=1,h.ALIGN_RIGHT=2,h.ParseFromAtlas=t,h.ParseXMLBitmapFont=s,f.exports=h}),37289:((f,x,e)=>{var o=e(20926),m=function(n,r,a,t){var s=r._text,l=s.length,i=n.currentContext;if(!(l===0||!o(n,i,r,a,t))){a.addToRenderList(r);var h=r.fromAtlas?r.frame:r.texture.frames.__BASE,d=r.fontData.chars,c=r.fontData.lineHeight,u=r._letterSpacing,p=r._lineSpacing,g=0,y=0,v=0,S=null,w=0,T=0,C=0,M=0,E=0,P=0,A=null,D=0,W=h.source.image,V=h.cutX,K=h.cutY,X=r._fontSize/r.fontData.size,R=r._align,H=0,L=0,N=r.getTextBounds(!1);r.maxWidth>0&&(s=N.wrappedText,l=s.length);var z=r._bounds.lines;R===1?L=(z.longest-z.lengths[0])/2:R===2&&(L=z.longest-z.lengths[0]),i.translate(-r.displayOriginX,-r.displayOriginY);for(var U=a.roundPixels,Y=0;Y<l;Y++){if(v=s.charCodeAt(Y),v===10){H++,R===1?L=(z.longest-z.lengths[H])/2:R===2&&(L=z.longest-z.lengths[H]),g=0,y+=c+p,A=null;continue}if(S=d[v],!!S){if(w=V+S.x,T=K+S.y,C=S.width,M=S.height,E=S.xOffset+g,P=S.yOffset+y,A!==null){var $=S.kerning[D];E+=$!==void 0?$:0}E*=X,P*=X,E+=L,g+=S.xAdvance+u+($!==void 0?$:0),A=S,D=v,!(C===0||M===0||v===32)&&(U&&(E=Math.round(E),P=Math.round(P)),i.save(),i.translate(E,P),i.scale(X,X),i.drawImage(W,w,T,C,M,0,0,C,M),i.restore())}}i.restore()}};f.exports=m}),57336:((f,x,e)=>{var o=e(22186),m=e(25305),n=e(44603),r=e(23568),a=e(35154);n.register("bitmapText",function(t,s){t===void 0&&(t={});var l=a(t,"font",""),i=r(t,"text",""),h=r(t,"size",!1),d=a(t,"align",0),c=new o(this.scene,0,0,l,i,h,d);return s!==void 0&&(t.add=s),m(this.scene,c,t),c})}),34914:((f,x,e)=>{var o=e(22186),m=e(39429);m.register("bitmapText",function(n,r,a,t,s,l){return this.displayList.add(new o(this.scene,n,r,a,t,s,l))})}),18658:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(33590),n=e(37289),f.exports={renderWebGL:m,renderCanvas:n}}),33590:((f,x,e)=>{var o=e(3217),m=e(91296),n=e(70554),r=function(a,t,s,l){var i=t._text,h=i.length;if(h!==0){s.addToRenderList(t);var d=a.pipelines.set(t.pipeline,t),c=m(t,s,l).calc;a.pipelines.preBatch(t);var u=s.roundPixels,p=s.alpha,g=t.charColors,y=t.tintFill,v=n.getTintAppendFloatAlpha,S=v(t.tintTopLeft,p*t._alphaTL),w=v(t.tintTopRight,p*t._alphaTR),T=v(t.tintBottomLeft,p*t._alphaBL),C=v(t.tintBottomRight,p*t._alphaBR),M=t.frame.glTexture,E=d.setGameObject(t),P=t.getTextBounds(!1),A,D,W,V=P.characters,K=t.dropShadowX,X=t.dropShadowY,R=K!==0||X!==0;if(R){var H=t.dropShadowColor,L=t.dropShadowAlpha,N=v(H,p*L*t._alphaTL),z=v(H,p*L*t._alphaTR),U=v(H,p*L*t._alphaBL),Y=v(H,p*L*t._alphaBR);for(A=0;A<V.length;A++)D=V[A],W=D.glyph,!(D.code===32||W.width===0||W.height===0)&&o(d,t,D,W,K,X,c,u,N,z,U,Y,1,M,E)}for(A=0;A<V.length;A++)if(D=V[A],W=D.glyph,!(D.code===32||W.width===0||W.height===0))if(d.shouldFlush(6)&&(d.flush(),E=d.setGameObject(t)),g[D.i]){var $=g[D.i],Z=$.tintEffect,Q=v($.tintTL,p*t._alphaTL),q=v($.tintTR,p*t._alphaTR),j=v($.tintBL,p*t._alphaBL),_=v($.tintBR,p*t._alphaBR);o(d,t,D,W,0,0,c,u,Q,q,j,_,Z,M,E)}else o(d,t,D,W,0,0,c,u,S,w,T,C,y,M,E);a.pipelines.postBatch(t)}};f.exports=r}),6107:((f,x,e)=>{var o=e(48011),m=e(46590),n=e(83419),r=e(31401),a=e(4327),t=e(95643),s=e(73162),l=new n({Extends:t,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,o],initialize:function(h,d,c,u,p){t.call(this,h,"Blitter"),this.setTexture(u,p),this.setPosition(d,c),this.initPipeline(),this.initPostPipeline(),this.children=new s,this.renderList=[],this.dirty=!1},create:function(i,h,d,c,u){c===void 0&&(c=!0),u===void 0&&(u=this.children.length),d===void 0?d=this.frame:d instanceof a||(d=this.texture.get(d));var p=new m(this,i,h,d,c);return this.children.addAt(p,u,!1),this.dirty=!0,p},createFromCallback:function(i,h,d,c){for(var u=this.createMultiple(h,d,c),p=0;p<u.length;p++){var g=u[p];i.call(this,g,p)}return u},createMultiple:function(i,h,d){h===void 0&&(h=this.frame.name),d===void 0&&(d=!0),Array.isArray(h)||(h=[h]);var c=[],u=this;return h.forEach(function(p){for(var g=0;g<i;g++)c.push(u.create(0,0,p,d))}),c},childCanRender:function(i){return i.visible&&i.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});f.exports=l}),72396:(f=>{var x=function(e,o,m,n){var r=o.getRenderList();if(r.length!==0){var a=e.currentContext,t=m.alpha*o.alpha;if(t!==0){m.addToRenderList(o),a.globalCompositeOperation=e.blendModes[o.blendMode],a.imageSmoothingEnabled=!o.frame.source.scaleMode;var s=o.x-m.scrollX*o.scrollFactorX,l=o.y-m.scrollY*o.scrollFactorY;a.save(),n&&n.copyToContext(a);for(var i=m.roundPixels,h=0;h<r.length;h++){var d=r[h],c=d.flipX||d.flipY,u=d.frame,p=u.canvasData,g=u.x,y=u.y,v=1,S=1,w=d.alpha*t;w!==0&&(a.globalAlpha=w,c?(d.flipX&&(v=-1,g-=p.width),d.flipY&&(S=-1,y-=p.height),p.width>0&&p.height>0&&(a.save(),a.translate(d.x+s,d.y+l),a.scale(v,S),a.drawImage(u.source.image,p.x,p.y,p.width,p.height,g,y,p.width,p.height),a.restore())):(i&&(g=Math.round(g),y=Math.round(y)),p.width>0&&p.height>0&&a.drawImage(u.source.image,p.x,p.y,p.width,p.height,g+d.x+s,y+d.y+l,p.width,p.height)))}a.restore()}}};f.exports=x}),9403:((f,x,e)=>{var o=e(6107),m=e(25305),n=e(44603),r=e(23568);n.register("blitter",function(a,t){a===void 0&&(a={});var s=r(a,"key",null),l=r(a,"frame",null),i=new o(this.scene,0,0,s,l);return t!==void 0&&(a.add=t),m(this.scene,i,a),i})}),12709:((f,x,e)=>{var o=e(6107),m=e(39429);m.register("blitter",function(n,r,a,t){return this.displayList.add(new o(this.scene,n,r,a,t))})}),48011:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(99485),n=e(72396),f.exports={renderWebGL:m,renderCanvas:n}}),99485:((f,x,e)=>{var o=e(61340),m=e(70554),n=new o,r=function(a,t,s,l){var i=t.getRenderList(),h=s.alpha*t.alpha;if(!(i.length===0||h===0)){s.addToRenderList(t);var d=a.pipelines.set(this.pipeline,t),c=s.scrollX*t.scrollFactorX,u=s.scrollY*t.scrollFactorY,p=n.copyFrom(s.matrix);l&&(p.multiplyWithOffset(l,-c,-u),c=0,u=0);var g=t.x-c,y=t.y-u,v=-1,S=!1,w=s.roundPixels;a.pipelines.preBatch(t);for(var T=0;T<i.length;T++){var C=i[T],M=C.frame,E=C.alpha*h;if(E!==0){var P=M.width,A=M.height,D=g+C.x+M.x,W=y+C.y+M.y;C.flipX&&(P*=-1,D+=M.width),C.flipY&&(A*=-1,W+=M.height);var V=p.setQuad(D,W,D+P,W+A,w),K=m.getTintAppendFloatAlpha(C.tint,E);if(M.sourceIndex!==v){var X=d.setGameObject(t,M);v=M.sourceIndex}d.batchQuad(t,V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],M.u0,M.v0,M.u1,M.v1,K,K,K,K,S,M.glTexture,X)&&(v=-1)}}a.pipelines.postBatch(t)}};f.exports=r}),46590:((f,x,e)=>{var o=e(83419),m=e(4327),n=new o({initialize:function(a,t,s,l,i){this.parent=a,this.x=t,this.y=s,this.frame=l,this.data={},this.tint=16777215,this._visible=i,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(r){return r===void 0?this.frame=this.parent.frame:r instanceof m&&r.texture===this.parent.texture?this.frame=r:this.frame=this.parent.texture.get(r),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(r,a,t){return this.x=r,this.y=a,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,t&&this.setFrame(t),this},setPosition:function(r,a){return this.x=r,this.y=a,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,a){return this.flipX=r,this.flipY=a,this},setVisible:function(r){return this.visible=r,this},setAlpha:function(r){return this.alpha=r,this},setTint:function(r){return this.tint=r,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(r){this.parent.dirty|=this._visible!==r,this._visible=r}},alpha:{get:function(){return this._alpha},set:function(r){this.parent.dirty|=this._alpha>0!=r>0,this._alpha=r}}});f.exports=n}),16005:((f,x,e)=>{var o=e(45319),m=2,n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r,a,t,s){return r===void 0&&(r=1),a===void 0?this.alpha=r:(this._alphaTL=o(r,0,1),this._alphaTR=o(a,0,1),this._alphaBL=o(t,0,1),this._alphaBR=o(s,0,1)),this},alpha:{get:function(){return this._alpha},set:function(r){var a=o(r,0,1);this._alpha=a,this._alphaTL=a,this._alphaTR=a,this._alphaBL=a,this._alphaBR=a,a===0?this.renderFlags&=~m:this.renderFlags|=m}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(r){var a=o(r,0,1);this._alphaTL=a,a!==0&&(this.renderFlags|=m)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(r){var a=o(r,0,1);this._alphaTR=a,a!==0&&(this.renderFlags|=m)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(r){var a=o(r,0,1);this._alphaBL=a,a!==0&&(this.renderFlags|=m)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(r){var a=o(r,0,1);this._alphaBR=a,a!==0&&(this.renderFlags|=m)}}};f.exports=n}),88509:((f,x,e)=>{var o=e(45319),m=2,n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r){return r===void 0&&(r=1),this.alpha=r,this},alpha:{get:function(){return this._alpha},set:function(r){var a=o(r,0,1);this._alpha=a,a===0?this.renderFlags&=~m:this.renderFlags|=m}}};f.exports=n}),90065:((f,x,e)=>{var o=e(10312),m={_blendMode:o.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=o[n]),n|=0,n>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};f.exports=m}),94215:(f=>{var x={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,o){return this.width=e,this.height=o,this},setDisplaySize:function(e,o){return this.displayWidth=e,this.displayHeight=o,this}};f.exports=x}),61683:(f=>{var x={texture:null,frame:null,isCropped:!1,setCrop:function(e,o,m,n){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,o,m,n,this.flipX,this.flipY);else{var r=e;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};f.exports=x}),89272:((f,x,e)=>{var o=e(37105),m={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this},setToTop:function(){var n=this.getDisplayList();return n&&o.BringToTop(n,this),this},setToBack:function(){var n=this.getDisplayList();return n&&o.SendToBack(n,this),this},setAbove:function(n){var r=this.getDisplayList();return r&&n&&o.MoveAbove(r,this,n),this},setBelow:function(n){var r=this.getDisplayList();return r&&n&&o.MoveBelow(r,this,n),this}};f.exports=m}),47059:((f,x,e)=>{var o=e(83419),m=e(66064),n=e(19133),r=new o({initialize:function(t,s){this.gameObject=t,this.isPost=s,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(a){return a===void 0&&(a=0),this.padding=a,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(a){if(!this.isPost){var t=this.gameObject.scene.sys.renderer;t&&t.pipelines?(this.gameObject.pipeline=t.pipelines.FX_PIPELINE,a!==void 0&&(this.padding=a),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var a=this.list,t=0;t<a.length;t++)a[t].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(a){var t;if(this.isPost){var s=this.gameObject.getPostPipeline(String(a.type));for(Array.isArray(s)||(s=[s]),t=0;t<s.length;t++){var l=s[t];if(l.controller===a){this.gameObject.removePostPipeline(l),a.destroy();break}}}else{var i=this.list;for(t=0;t<i.length;t++)i[t]===a&&(n(i,t),a.destroy())}return this.gameObject},disable:function(a){return a===void 0&&(a=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,a&&this.clear(),this.gameObject},add:function(a,t){if(this.isPost){var s=String(a.type);this.gameObject.setPostPipeline(s,t);var l=this.gameObject.getPostPipeline(s);if(l)return Array.isArray(l)&&(l=l.pop()),l&&(l.controller=a),a}else return this.enabled||this.enable(),this.list.push(a),a},addGlow:function(a,t,s,l,i,h){return this.add(new m.Glow(this.gameObject,a,t,s,l),{quality:i,distance:h})},addShadow:function(a,t,s,l,i,h,d){return this.add(new m.Shadow(this.gameObject,a,t,s,l,i,h,d))},addPixelate:function(a){return this.add(new m.Pixelate(this.gameObject,a))},addVignette:function(a,t,s,l){return this.add(new m.Vignette(this.gameObject,a,t,s,l))},addShine:function(a,t,s,l){return this.add(new m.Shine(this.gameObject,a,t,s,l))},addBlur:function(a,t,s,l,i,h){return this.add(new m.Blur(this.gameObject,a,t,s,l,i,h))},addGradient:function(a,t,s,l,i,h,d,c){return this.add(new m.Gradient(this.gameObject,a,t,s,l,i,h,d,c))},addBloom:function(a,t,s,l,i,h){return this.add(new m.Bloom(this.gameObject,a,t,s,l,i,h))},addColorMatrix:function(){return this.add(new m.ColorMatrix(this.gameObject))},addCircle:function(a,t,s,l,i){return this.add(new m.Circle(this.gameObject,a,t,s,l,i))},addBarrel:function(a){return this.add(new m.Barrel(this.gameObject,a))},addDisplacement:function(a,t,s){return this.add(new m.Displacement(this.gameObject,a,t,s))},addWipe:function(a,t,s){return this.add(new m.Wipe(this.gameObject,a,t,s))},addReveal:function(a,t,s){return this.add(new m.Wipe(this.gameObject,a,t,s,!0))},addBokeh:function(a,t,s){return this.add(new m.Bokeh(this.gameObject,a,t,s))},addTiltShift:function(a,t,s,l,i,h){return this.add(new m.Bokeh(this.gameObject,a,t,s,!0,l,i,h))},destroy:function(){this.clear(),this.gameObject=null}});f.exports=r}),54434:(f=>{var x={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,o){return this.flipX=e,this.flipY=o,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};f.exports=x}),8004:((f,x,e)=>{var o=e(87841),m=e(11520),n=e(26099),r={prepareBoundsOutput:function(a,t){if(t===void 0&&(t=!1),this.rotation!==0&&m(a,this.x,this.y,this.rotation),t&&this.parentContainer){var s=this.parentContainer.getBoundsTransformMatrix();s.transformPoint(a.x,a.y,a)}return a},getCenter:function(a,t){return a===void 0&&(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,t)},getTopLeft:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,t)},getTopCenter:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,t)},getTopRight:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,t)},getLeftCenter:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,t)},getRightCenter:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,t)},getBottomLeft:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,t)},getBottomCenter:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,t)},getBottomRight:function(a,t){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,t)},getBounds:function(a){a===void 0&&(a=new o);var t,s,l,i,h,d,c,u;if(this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(a),p.transformPoint(a.x,a.y,a),t=a.x,s=a.y,this.getTopRight(a),p.transformPoint(a.x,a.y,a),l=a.x,i=a.y,this.getBottomLeft(a),p.transformPoint(a.x,a.y,a),h=a.x,d=a.y,this.getBottomRight(a),p.transformPoint(a.x,a.y,a),c=a.x,u=a.y}else this.getTopLeft(a),t=a.x,s=a.y,this.getTopRight(a),l=a.x,i=a.y,this.getBottomLeft(a),h=a.x,d=a.y,this.getBottomRight(a),c=a.x,u=a.y;return a.x=Math.min(t,l,h,c),a.y=Math.min(s,i,d,u),a.width=Math.max(t,l,h,c)-a.x,a.height=Math.max(s,i,d,u)-a.y,a}};f.exports=r}),8573:((f,x,e)=>{var o=e(6858),m=e(80661),n={mask:null,setMask:function(r){return this.mask=r,this},clearMask:function(r){return r===void 0&&(r=!1),r&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(r,a,t,s,l){return r===void 0&&(this.texture||this.shader||this.geom)&&(r=this),new o(this.scene,r,a,t,s,l)},createGeometryMask:function(r){return r===void 0&&(this.type==="Graphics"||this.geom)&&(r=this),new m(this.scene,r)}};f.exports=n}),27387:(f=>{var x={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,o){return e===void 0&&(e=.5),o===void 0&&(o=e),this.originX=e,this.originY=o,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,o){return e===void 0&&(e=0),o===void 0&&(o=e),this.displayOriginX=e,this.displayOriginY=o,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};f.exports=x}),37640:((f,x,e)=>{var o=e(39506),m=e(57355),n=e(35154),r=e(86353),a=e(26099),t={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:r.PLAYING_FORWARD,setPath:function(s,l){l===void 0&&(l=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=s,l&&this.startFollow(l),this},setRotateToPath:function(s,l){return l===void 0&&(l=0),this.rotateToPath=s,this.pathRotationOffset=l,this},isFollowing:function(){var s=this.pathTween;return s&&s.isPlaying()},startFollow:function(s,l){s===void 0&&(s={}),l===void 0&&(l=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),typeof s=="number"&&(s={duration:s}),s.from=n(s,"from",0),s.to=n(s,"to",1);var h=m(s,"positionOnPath",!1);this.rotateToPath=m(s,"rotateToPath",!1),this.pathRotationOffset=n(s,"rotationOffset",0);var d=n(s,"startAt",l);if(d&&(s.onStart=function(u){var p=u.data[0];p.progress=d,p.elapsed=p.duration*d;var g=p.ease(p.progress);p.current=p.start+(p.end-p.start)*g,p.setTargetValue()}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),s.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(s),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=r.PLAYING_FORWARD,this.rotateToPath){var c=this.path.getPoint(.1);this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=s,this},pauseFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.pause(),this},resumeFollow:function(){var s=this.pathTween;return s&&s.isPaused()&&s.resume(),this},stopFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this},pathUpdate:function(){var s=this.pathTween;if(s&&s.data){var l=s.data[0],i=this.pathDelta,h=this.pathVector;if(i.copy(h).negate(),l.state===r.COMPLETE){this.path.getPoint(l.end,h),i.add(h),h.add(this.pathOffset),this.setPosition(h.x,h.y);return}else if(l.state!==r.PLAYING_FORWARD&&l.state!==r.PLAYING_BACKWARD)return;this.path.getPoint(s.getValue(),h),i.add(h),h.add(this.pathOffset);var d=this.x,c=this.y;this.setPosition(h.x,h.y);var u=this.x-d,p=this.y-c;if(u===0&&p===0)return;if(l.state!==this._prevDirection){this._prevDirection=l.state;return}this.rotateToPath&&(this.rotation=Math.atan2(p,u)+o(this.pathRotationOffset))}}};f.exports=t}),72699:((f,x,e)=>{var o=e(62644),m={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(n){this.pipelineData={};var r=this.scene.sys.renderer;if(!r)return!1;var a=r.pipelines;if(a){n===void 0&&(n=a.default);var t=a.get(n);if(t)return this.defaultPipeline=t,this.pipeline=t,!0}return!1},setPipeline:function(n,r,a){var t=this.scene.sys.renderer;if(!t)return this;var s=t.pipelines;if(s){var l=s.get(n);l&&(this.pipeline=l),r&&(this.pipelineData=a?o(r):r)}return this},setPipelineData:function(n,r){var a=this.pipelineData;return r===void 0?delete a[n]:a[n]=r,this},resetPipeline:function(n){return n===void 0&&(n=!1),this.pipeline=this.defaultPipeline,n&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};f.exports=m}),17581:((f,x,e)=>{var o=e(62644),m=e(47059),n=e(19133),r={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(a){this.postPipelines=[],this.postPipelineData={},this.postFX=new m(this,!0),a&&(this.preFX=new m(this,!1))},setPostPipeline:function(a,t,s){var l=this.scene.sys.renderer;if(!l)return this;var i=l.pipelines;if(i){Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;h++){var d=i.getPostPipeline(a[h],this,t);d&&this.postPipelines.push(d)}t&&(this.postPipelineData=s?o(t):t)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(a,t){var s=this.postPipelineData;return t===void 0?delete s[a]:s[a]=t,this},getPostPipeline:function(a){for(var t=typeof a=="string",s=this.postPipelines,l=[],i=0;i<s.length;i++){var h=s[i];(t&&h.name===a||!t&&h instanceof a)&&l.push(h)}return l.length===1?l[0]:l},resetPostPipeline:function(a){a===void 0&&(a=!1);for(var t=this.postPipelines,s=0;s<t.length;s++)t[s].destroy();this.postPipelines=[],this.hasPostPipeline=!1,a&&(this.postPipelineData={})},removePostPipeline:function(a){for(var t=typeof a=="string",s=this.postPipelines,l=s.length-1;l>=0;l--){var i=s[l];(t&&i.name===a||!t&&i===a)&&(i.destroy(),n(s,l))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};f.exports=r}),80227:(f=>{var x={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,o){return o===void 0&&(o=e),this.scrollFactorX=e,this.scrollFactorY=o,this}};f.exports=x}),16736:(f=>{var x={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=this.width,o.hitArea.height=this.height),this},setSize:function(e,o){return this.width=e,this.height=o,this},setDisplaySize:function(e,o){return this.displayWidth=e,this.displayHeight=o,this}};f.exports=x}),37726:((f,x,e)=>{var o=e(4327),m=8,n={texture:null,frame:null,isCropped:!1,setTexture:function(r,a,t,s){return this.texture=this.scene.sys.textures.get(r),this.setFrame(a,t,s)},setFrame:function(r,a,t){return a===void 0&&(a=!0),t===void 0&&(t=!0),r instanceof o?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&t&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};f.exports=n}),79812:((f,x,e)=>{var o=e(4327),m=8,n={texture:null,frame:null,isCropped:!1,setCrop:function(r,a,t,s){if(r===void 0)this.isCropped=!1;else if(this.frame){if(typeof r=="number")this.frame.setCropUVs(this._crop,r,a,t,s,this.flipX,this.flipY);else{var l=r;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(r,a){return this.texture=this.scene.sys.textures.get(r),this.setFrame(a)},setFrame:function(r,a,t){return a===void 0&&(a=!0),t===void 0&&(t=!0),r instanceof o?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&t&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};f.exports=n}),27472:(f=>{var x={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,o,m,n){return e===void 0&&(e=16777215),o===void 0&&(o=e,m=e,n=e),this.tintTopLeft=e,this.tintTopRight=o,this.tintBottomLeft=m,this.tintBottomRight=n,this.tintFill=!1,this},setTintFill:function(e,o,m,n){return this.setTint(e,o,m,n),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};f.exports=x}),53774:(f=>{var x=function(e){var o={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(o.textureKey=e.texture.key,o.frameKey=e.frame.name),o};f.exports=x}),16901:((f,x,e)=>{var o=e(36383),m=e(61340),n=e(85955),r=e(86554),a=e(30954),t=e(26099),s=4,l={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(i){this._scaleX=i,this._scaleY=i,i===0?this.renderFlags&=~s:this.renderFlags|=s}},scaleX:{get:function(){return this._scaleX},set:function(i){this._scaleX=i,i===0?this.renderFlags&=~s:this._scaleY!==0&&(this.renderFlags|=s)}},scaleY:{get:function(){return this._scaleY},set:function(i){this._scaleY=i,i===0?this.renderFlags&=~s:this._scaleX!==0&&(this.renderFlags|=s)}},angle:{get:function(){return a(this._rotation*o.RAD_TO_DEG)},set:function(i){this.rotation=a(i)*o.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(i){this._rotation=r(i)}},setPosition:function(i,h,d,c){return i===void 0&&(i=0),h===void 0&&(h=i),d===void 0&&(d=0),c===void 0&&(c=0),this.x=i,this.y=h,this.z=d,this.w=c,this},copyPosition:function(i){return i.x!==void 0&&(this.x=i.x),i.y!==void 0&&(this.y=i.y),i.z!==void 0&&(this.z=i.z),i.w!==void 0&&(this.w=i.w),this},setRandomPosition:function(i,h,d,c){return i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),this.x=i+Math.random()*d,this.y=h+Math.random()*c,this},setRotation:function(i){return i===void 0&&(i=0),this.rotation=i,this},setAngle:function(i){return i===void 0&&(i=0),this.angle=i,this},setScale:function(i,h){return i===void 0&&(i=1),h===void 0&&(h=i),this.scaleX=i,this.scaleY=h,this},setX:function(i){return i===void 0&&(i=0),this.x=i,this},setY:function(i){return i===void 0&&(i=0),this.y=i,this},setZ:function(i){return i===void 0&&(i=0),this.z=i,this},setW:function(i){return i===void 0&&(i=0),this.w=i,this},getLocalTransformMatrix:function(i){return i===void 0&&(i=new m),i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(i,h){i===void 0&&(i=new m);var d=this.parentContainer;if(!d)return this.getLocalTransformMatrix(i);var c=!1;for(h||(h=new m,c=!0),i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);d;)h.applyITRS(d.x,d.y,d._rotation,d._scaleX,d._scaleY),h.multiply(i,i),d=d.parentContainer;return c&&h.destroy(),i},getLocalPoint:function(i,h,d,c){d||(d=new t),c||(c=this.scene.sys.cameras.main);var u=c.scrollX,p=c.scrollY,g=i+u*this.scrollFactorX-u,y=h+p*this.scrollFactorY-p;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(g,y,d):n(g,y,this.x,this.y,this.rotation,this.scaleX,this.scaleY,d),this._originComponent&&(d.x+=this._displayOriginX,d.y+=this._displayOriginY),d},getWorldPoint:function(i,h,d){i===void 0&&(i=new t);var c=this.parentContainer;if(!c)return i.x=this.x,i.y=this.y,i;var u=this.getWorldTransformMatrix(h,d);return i.x=u.tx,i.y=u.ty,i},getParentRotation:function(){for(var i=0,h=this.parentContainer;h;)i+=h.rotation,h=h.parentContainer;return i}};f.exports=l}),61340:((f,x,e)=>{var o=e(83419),m=e(36383),n=e(26099),r=new o({initialize:function(t,s,l,i,h,d){t===void 0&&(t=1),s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=1),h===void 0&&(h=0),d===void 0&&(d=0),this.matrix=new Float32Array([t,s,l,i,h,d,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(a){this.matrix[0]=a}},b:{get:function(){return this.matrix[1]},set:function(a){this.matrix[1]=a}},c:{get:function(){return this.matrix[2]},set:function(a){this.matrix[2]=a}},d:{get:function(){return this.matrix[3]},set:function(a){this.matrix[3]=a}},e:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},f:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},tx:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},ty:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var a=this.matrix,t=a[0],s=a[1],l=a[2],i=a[3];return t||s?s>0?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX):l||i?m.TAU-(i>0?Math.acos(-l/this.scaleY):-Math.acos(l/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var a=this.matrix;return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,this},translate:function(a,t){var s=this.matrix;return s[4]=s[0]*a+s[2]*t+s[4],s[5]=s[1]*a+s[3]*t+s[5],this},scale:function(a,t){var s=this.matrix;return s[0]*=a,s[1]*=a,s[2]*=t,s[3]*=t,this},rotate:function(a){var t=Math.sin(a),s=Math.cos(a),l=this.matrix,i=l[0],h=l[1],d=l[2],c=l[3];return l[0]=i*s+d*t,l[1]=h*s+c*t,l[2]=i*-t+d*s,l[3]=h*-t+c*s,this},multiply:function(a,t){var s=this.matrix,l=a.matrix,i=s[0],h=s[1],d=s[2],c=s[3],u=s[4],p=s[5],g=l[0],y=l[1],v=l[2],S=l[3],w=l[4],T=l[5],C=t===void 0?s:t.matrix;return C[0]=g*i+y*d,C[1]=g*h+y*c,C[2]=v*i+S*d,C[3]=v*h+S*c,C[4]=w*i+T*d+u,C[5]=w*h+T*c+p,C},multiplyWithOffset:function(a,t,s){var l=this.matrix,i=a.matrix,h=l[0],d=l[1],c=l[2],u=l[3],p=l[4],g=l[5],y=t*h+s*c+p,v=t*d+s*u+g,S=i[0],w=i[1],T=i[2],C=i[3],M=i[4],E=i[5];return l[0]=S*h+w*c,l[1]=S*d+w*u,l[2]=T*h+C*c,l[3]=T*d+C*u,l[4]=M*h+E*c+y,l[5]=M*d+E*u+v,this},transform:function(a,t,s,l,i,h){var d=this.matrix,c=d[0],u=d[1],p=d[2],g=d[3],y=d[4],v=d[5];return d[0]=a*c+t*p,d[1]=a*u+t*g,d[2]=s*c+l*p,d[3]=s*u+l*g,d[4]=i*c+h*p+y,d[5]=i*u+h*g+v,this},transformPoint:function(a,t,s){s===void 0&&(s={x:0,y:0});var l=this.matrix,i=l[0],h=l[1],d=l[2],c=l[3],u=l[4],p=l[5];return s.x=a*i+t*d+u,s.y=a*h+t*c+p,s},invert:function(){var a=this.matrix,t=a[0],s=a[1],l=a[2],i=a[3],h=a[4],d=a[5],c=t*i-s*l;return a[0]=i/c,a[1]=-s/c,a[2]=-l/c,a[3]=t/c,a[4]=(l*d-i*h)/c,a[5]=-(t*d-s*h)/c,this},copyFrom:function(a){var t=this.matrix;return t[0]=a.a,t[1]=a.b,t[2]=a.c,t[3]=a.d,t[4]=a.e,t[5]=a.f,this},copyFromArray:function(a){var t=this.matrix;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],this},copyToContext:function(a){var t=this.matrix;return a.transform(t[0],t[1],t[2],t[3],t[4],t[5]),a},setToContext:function(a){return a.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),a},copyToArray:function(a){var t=this.matrix;return a===void 0?a=[t[0],t[1],t[2],t[3],t[4],t[5]]:(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5]),a},setTransform:function(a,t,s,l,i,h){var d=this.matrix;return d[0]=a,d[1]=t,d[2]=s,d[3]=l,d[4]=i,d[5]=h,this},decomposeMatrix:function(){var a=this.decomposedMatrix,t=this.matrix,s=t[0],l=t[1],i=t[2],h=t[3],d=s*h-l*i;if(a.translateX=t[4],a.translateY=t[5],s||l){var c=Math.sqrt(s*s+l*l);a.rotation=l>0?Math.acos(s/c):-Math.acos(s/c),a.scaleX=c,a.scaleY=d/c}else if(i||h){var u=Math.sqrt(i*i+h*h);a.rotation=Math.PI*.5-(h>0?Math.acos(-i/u):-Math.acos(i/u)),a.scaleX=d/u,a.scaleY=u}else a.rotation=0,a.scaleX=0,a.scaleY=0;return a},applyITRS:function(a,t,s,l,i){var h=this.matrix,d=Math.sin(s),c=Math.cos(s);return h[4]=a,h[5]=t,h[0]=c*l,h[1]=d*l,h[2]=-d*i,h[3]=c*i,this},applyInverse:function(a,t,s){s===void 0&&(s=new n);var l=this.matrix,i=l[0],h=l[1],d=l[2],c=l[3],u=l[4],p=l[5],g=1/(i*c+d*-h);return s.x=c*g*a+-d*g*t+(p*d-u*c)*g,s.y=i*g*t+-h*g*a+(-p*i+u*h)*g,s},setQuad:function(a,t,s,l,i,h){i===void 0&&(i=!1),h===void 0&&(h=this.quad);var d=this.matrix,c=d[0],u=d[1],p=d[2],g=d[3],y=d[4],v=d[5],S=a*c+t*p+y,w=a*u+t*g+v,T=a*c+l*p+y,C=a*u+l*g+v,M=s*c+l*p+y,E=s*u+l*g+v,P=s*c+t*p+y,A=s*u+t*g+v;if(i){var D=Math.floor(S+.5),W=Math.floor(w+.5),V=D-S,K=W-w;h[0]=D,h[1]=W,h[2]=T+V,h[3]=C+K,h[4]=M+V,h[5]=E+K,h[6]=P+V,h[7]=A+K}else h[0]=S,h[1]=w,h[2]=T,h[3]=C,h[4]=M,h[5]=E,h[6]=P,h[7]=A;return h},getX:function(a,t){return a*this.a+t*this.c+this.e},getY:function(a,t){return a*this.b+t*this.d+this.f},getXRound:function(a,t,s){var l=this.getX(a,t);return s&&(l=Math.floor(l+.5)),l},getYRound:function(a,t,s){var l=this.getY(a,t);return s&&(l=Math.floor(l+.5)),l},getCSSMatrix:function(){var a=this.matrix;return"matrix("+a[0]+","+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});f.exports=r}),59715:(f=>{var x=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(o){o?(this._visible=!0,this.renderFlags|=x):(this._visible=!1,this.renderFlags&=~x)}},setVisible:function(o){return this.visible=o,this}};f.exports=e}),31401:((f,x,e)=>{f.exports={Alpha:e(16005),AlphaSingle:e(88509),BlendMode:e(90065),ComputedSize:e(94215),Crop:e(61683),Depth:e(89272),Flip:e(54434),FX:e(47059),GetBounds:e(8004),Mask:e(8573),Origin:e(27387),PathFollower:e(37640),Pipeline:e(72699),PostPipeline:e(17581),ScrollFactor:e(80227),Size:e(16736),Texture:e(37726),TextureCrop:e(79812),Tint:e(27472),ToJSON:e(53774),Transform:e(16901),TransformMatrix:e(61340),Visible:e(59715)}}),31559:((f,x,e)=>{var o=e(37105),m=e(10312),n=e(83419),r=e(31401),a=e(51708),t=e(95643),s=e(87841),l=e(29959),i=e(36899),h=e(26099),d=new r.TransformMatrix,c=new n({Extends:t,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.Mask,r.PostPipeline,r.Transform,r.Visible,l],initialize:function(p,g,y,v){t.call(this,p,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new r.TransformMatrix,this._sortKey="",this._sysEvents=p.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(g,y),this.setBlendMode(m.SKIP_CHECK),v&&this.add(v)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(u){return u===void 0&&(u=!0),this.exclusive=u,this},getBounds:function(u){if(u===void 0&&(u=new s),u.setTo(this.x,this.y,0,0),this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix(),g=p.transformPoint(this.x,this.y);u.setTo(g.x,g.y,0,0)}if(this.list.length>0){var y=this.list,v=new s,S=!1;u.setEmpty();for(var w=0;w<y.length;w++){var T=y[w];T.getBounds&&(T.getBounds(v),S?i(v,u,u):(u.setTo(v.x,v.y,v.width,v.height),S=!0))}}return u},addHandler:function(u){u.once(a.DESTROY,this.onChildDestroyed,this),this.exclusive&&(u.parentContainer&&u.parentContainer.remove(u),u.parentContainer=this,u.removeFromDisplayList(),u.addedToScene())},removeHandler:function(u){u.off(a.DESTROY,this.remove,this),this.exclusive&&(u.parentContainer=null,u.removedFromScene(),u.addToDisplayList())},pointToContainer:function(u,p){p===void 0&&(p=new h),this.parentContainer?this.parentContainer.pointToContainer(u,p):(p.x=u.x,p.y=u.y);var g=d;return g.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),g.invert(),g.transformPoint(u.x,u.y,p),p},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(d,this.localTransform)},add:function(u){return o.Add(this.list,u,this.maxSize,this.addHandler,this),this},addAt:function(u,p){return o.AddAt(this.list,u,p,this.maxSize,this.addHandler,this),this},getAt:function(u){return this.list[u]},getIndex:function(u){return this.list.indexOf(u)},sort:function(u,p){return u?(p===void 0&&(p=function(g,y){return g[u]-y[u]}),o.StableSort(this.list,p),this):this},getByName:function(u){return o.GetFirst(this.list,"name",u)},getRandom:function(u,p){return o.GetRandom(this.list,u,p)},getFirst:function(u,p,g,y){return o.GetFirst(this.list,u,p,g,y)},getAll:function(u,p,g,y){return o.GetAll(this.list,u,p,g,y)},count:function(u,p,g,y){return o.CountAllMatching(this.list,u,p,g,y)},swap:function(u,p){return o.Swap(this.list,u,p),this},moveTo:function(u,p){return o.MoveTo(this.list,u,p),this},moveAbove:function(u,p){return o.MoveAbove(this.list,u,p),this},moveBelow:function(u,p){return o.MoveBelow(this.list,u,p),this},remove:function(u,p){var g=o.Remove(this.list,u,this.removeHandler,this);if(p&&g){Array.isArray(g)||(g=[g]);for(var y=0;y<g.length;y++)g[y].destroy()}return this},removeAt:function(u,p){var g=o.RemoveAt(this.list,u,this.removeHandler,this);return p&&g&&g.destroy(),this},removeBetween:function(u,p,g){var y=o.RemoveBetween(this.list,u,p,this.removeHandler,this);if(g)for(var v=0;v<y.length;v++)y[v].destroy();return this},removeAll:function(u){var p=this.list;if(u){for(var g=0;g<p.length;g++)p[g]&&p[g].scene&&(p[g].off(a.DESTROY,this.onChildDestroyed,this),p[g].destroy());this.list=[]}else o.RemoveBetween(p,0,p.length,this.removeHandler,this);return this},bringToTop:function(u){return o.BringToTop(this.list,u),this},sendToBack:function(u){return o.SendToBack(this.list,u),this},moveUp:function(u){return o.MoveUp(this.list,u),this},moveDown:function(u){return o.MoveDown(this.list,u),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(u,p,g){var y=o.Replace(this.list,u,p);return y&&(this.addHandler(p),this.removeHandler(u),g&&u.destroy()),this},exists:function(u){return this.list.indexOf(u)>-1},setAll:function(u,p,g,y){return o.SetAll(this.list,u,p,g,y),this},each:function(u,p){var g=[null],y,v=this.list.slice(),S=v.length;for(y=2;y<arguments.length;y++)g.push(arguments[y]);for(y=0;y<S;y++)g[0]=v[y],u.apply(p,g);return this},iterate:function(u,p){var g=[null],y;for(y=2;y<arguments.length;y++)g.push(arguments[y]);for(y=0;y<this.list.length;y++)g[0]=this.list[y],u.apply(p,g);return this},setScrollFactor:function(u,p,g){return p===void 0&&(p=u),g===void 0&&(g=!1),this.scrollFactorX=u,this.scrollFactorY=p,g&&(o.SetAll(this.list,"scrollFactorX",u),o.SetAll(this.list,"scrollFactorY",p)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(u){o.Remove(this.list,u),this.exclusive&&(u.parentContainer=null,u.removedFromScene())}});f.exports=c}),53584:(f=>{var x=function(e,o,m,n){m.addToRenderList(o);var r=o.list;if(r.length!==0){var a=o.localTransform;n?(a.loadIdentity(),a.multiply(n),a.translate(o.x,o.y),a.rotate(o.rotation),a.scale(o.scaleX,o.scaleY)):a.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var t=o.blendMode!==-1;t||e.setBlendMode(0);var s=o._alpha,l=o.scrollFactorX,i=o.scrollFactorY;o.mask&&o.mask.preRenderCanvas(e,null,m);for(var h=0;h<r.length;h++){var d=r[h];if(d.willRender(m)){var c=d.alpha,u=d.scrollFactorX,p=d.scrollFactorY;!t&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode),d.setScrollFactor(u*l,p*i),d.setAlpha(c*s),d.renderCanvas(e,d,m,a),d.setAlpha(c),d.setScrollFactor(u,p)}}o.mask&&o.mask.postRenderCanvas(e)}};f.exports=x}),77143:((f,x,e)=>{var o=e(25305),m=e(31559),n=e(44603),r=e(23568),a=e(95540);n.register("container",function(t,s){t===void 0&&(t={});var l=r(t,"x",0),i=r(t,"y",0),h=a(t,"children",null),d=new m(this.scene,l,i,h);return s!==void 0&&(t.add=s),o(this.scene,d,t),d})}),24961:((f,x,e)=>{var o=e(31559),m=e(39429);m.register("container",function(n,r,a){return this.displayList.add(new o(this.scene,n,r,a))})}),29959:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(72249),n=e(53584),f.exports={renderWebGL:m,renderCanvas:n}}),72249:(f=>{var x=function(e,o,m,n){m.addToRenderList(o);var r=o.list,a=r.length;if(a!==0){var t=o.localTransform;n?(t.loadIdentity(),t.multiply(n),t.translate(o.x,o.y),t.rotate(o.rotation),t.scale(o.scaleX,o.scaleY)):t.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),e.pipelines.preBatch(o);var s=o.blendMode!==-1;s||e.setBlendMode(0);for(var l=o.alpha,i=o.scrollFactorX,h=o.scrollFactorY,d=0;d<a;d++){var c=r[d];if(c.willRender(m)){var u,p,g,y;if(c.alphaTopLeft!==void 0)u=c.alphaTopLeft,p=c.alphaTopRight,g=c.alphaBottomLeft,y=c.alphaBottomRight;else{var v=c.alpha;u=v,p=v,g=v,y=v}var S=c.scrollFactorX,w=c.scrollFactorY;!s&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var T=c.mask;T&&T.preRenderWebGL(e,c,m);var C=c.type;C!==e.currentType&&(e.newType=!0,e.currentType=C),e.nextTypeMatch=d<a-1?r[d+1].type===e.currentType:!1,c.setScrollFactor(S*i,w*h),c.setAlpha(u*l,p*l,g*l,y*l),c.renderWebGL(e,c,m,t,o),c.setAlpha(u,p,g,y),c.setScrollFactor(S,w),T&&T.postRenderWebGL(e,m),e.newType=!1}}e.pipelines.postBatch(o)}};f.exports=x}),47407:(f=>{f.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),3069:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(441),r=e(95643),a=e(41212),t=e(35846),s=e(44594),l=e(61369),i=new o({Extends:r,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Origin,m.ScrollFactor,m.Transform,m.Visible,n],initialize:function(d,c,u,p,g,y){if(r.call(this,d,"DOMElement"),this.parent=d.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=d.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new l,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(c,u),typeof p=="string"?p[0]==="#"?this.setElement(p.substr(1),g,y):this.createElement(p,g,y):p&&this.setElement(p,g,y),d.sys.events.on(s.SLEEP,this.handleSceneEvent,this),d.sys.events.on(s.WAKE,this.handleSceneEvent,this),d.sys.events.on(s.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(h){var d=this.node,c=d.style;d&&(c.display=h.settings.visible?"block":"none")},setSkew:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this.skewX=h,this.skewY=d,this},setPerspective:function(h){return this.parent.style.perspective=h+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(h){this.parent.style.perspective=h+"px"}},addListener:function(h){if(this.node){h=h.split(" ");for(var d=0;d<h.length;d++)this.node.addEventListener(h[d],this.handler,!1)}return this},removeListener:function(h){if(this.node){h=h.split(" ");for(var d=0;d<h.length;d++)this.node.removeEventListener(h[d],this.handler)}return this},dispatchNativeEvent:function(h){this.emit(h.type,h)},createElement:function(h,d,c){return this.setElement(document.createElement(h),d,c)},setElement:function(h,d,c){this.removeElement();var u;if(typeof h=="string"?(h[0]==="#"&&(h=h.substr(1)),u=document.getElementById(h)):typeof h=="object"&&h.nodeType===1&&(u=h),!u)return this;if(this.node=u,d&&a(d))for(var p in d)u.style[p]=d[p];else typeof d=="string"&&(u.style=d);return u.style.zIndex="0",u.style.display="inline",u.style.position="absolute",u.phaser=this,this.parent.appendChild(u),c&&(u.innerText=c),this.updateSize()},createFromCache:function(h,d){var c=this.cache.get(h);return c&&this.createFromHTML(c,d),this},createFromHTML:function(h,d){d===void 0&&(d="div"),this.removeElement();var c=document.createElement(d);return this.node=c,c.style.zIndex="0",c.style.display="inline",c.style.position="absolute",c.phaser=this,this.parent.appendChild(c),c.innerHTML=h,this.updateSize()},removeElement:function(){return this.node&&(t(this.node),this.node=null),this},updateSize:function(){var h=this.node;return this.width=h.clientWidth,this.height=h.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(h,d){if(this.node){for(var c=this.node.querySelectorAll("*"),u=0;u<c.length;u++)if(c[u][h]===d)return c[u]}return null},getChildByID:function(h){return this.getChildByProperty("id",h)},getChildByName:function(h){return this.getChildByProperty("name",h)},setClassName:function(h){return this.node&&(this.node.className=h,this.updateSize()),this},setText:function(h){return this.node&&(this.node.innerText=h,this.updateSize()),this},setHTML:function(h){return this.node&&(this.node.innerHTML=h,this.updateSize()),this},preRender:function(){var h=this.parentContainer,d=this.node;d&&h&&!h.willRender()&&(d.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(s.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(s.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(s.PRE_RENDER,this.preRender,this)}});f.exports=i}),49381:((f,x,e)=>{var o=e(47407),m=e(95643),n=e(61340),r=new n,a=new n,t=new n,s=function(l,i,h,d){if(i.node){var c=i.node.style,u=i.scene.sys.settings;if(!c||!u.visible||m.RENDER_MASK!==i.renderFlags||i.cameraFilter!==0&&i.cameraFilter&h.id||i.parentContainer&&!i.parentContainer.willRender()){c.display="none";return}var p=i.parentContainer,g=h.alpha*i.alpha;p&&(g*=p.alpha);var y=r,v=a,S=t,w=0,T=0,C="0%",M="0%";d?(w=i.width*i.scaleX*i.originX,T=i.height*i.scaleY*i.originY,v.applyITRS(i.x-w,i.y-T,i.rotation,i.scaleX,i.scaleY),y.copyFrom(h.matrix),y.multiplyWithOffset(d,-h.scrollX*i.scrollFactorX,-h.scrollY*i.scrollFactorY),v.e=i.x-w,v.f=i.y-T,y.multiply(v,S)):(w=i.width*i.originX,T=i.height*i.originY,v.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),y.copyFrom(h.matrix),C=100*i.originX+"%",M=100*i.originY+"%",v.e-=h.scrollX*i.scrollFactorX,v.f-=h.scrollY*i.scrollFactorY,y.multiply(v,S),S.e-=w,S.f-=T),i.transformOnly||(c.display="block",c.opacity=g,c.zIndex=i._depth,c.pointerEvents=i.pointerEvents,c.mixBlendMode=o[i._blendMode]),c.transform=S.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",c.transformOrigin=C+" "+M}};f.exports=s}),2611:((f,x,e)=>{var o=e(3069),m=e(39429);m.register("dom",function(n,r,a,t,s){var l=new o(this.scene,n,r,a,t,s);return this.displayList.add(l),l})}),441:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(49381),n=e(49381),f.exports={renderWebGL:m,renderCanvas:n}}),62980:(f=>{f.exports="addedtoscene"}),41337:(f=>{f.exports="destroy"}),44947:(f=>{f.exports="removedfromscene"}),49358:(f=>{f.exports="complete"}),35163:(f=>{f.exports="created"}),97249:(f=>{f.exports="error"}),19483:(f=>{f.exports="locked"}),56059:(f=>{f.exports="loop"}),26772:(f=>{f.exports="metadata"}),64437:(f=>{f.exports="playing"}),83411:(f=>{f.exports="play"}),75780:(f=>{f.exports="seeked"}),67799:(f=>{f.exports="seeking"}),63500:(f=>{f.exports="stalled"}),55541:(f=>{f.exports="stop"}),53208:(f=>{f.exports="textureready"}),4992:(f=>{f.exports="unlocked"}),12:(f=>{f.exports="unsupported"}),51708:((f,x,e)=>{f.exports={ADDED_TO_SCENE:e(62980),DESTROY:e(41337),REMOVED_FROM_SCENE:e(44947),VIDEO_COMPLETE:e(49358),VIDEO_CREATED:e(35163),VIDEO_ERROR:e(97249),VIDEO_LOCKED:e(19483),VIDEO_LOOP:e(56059),VIDEO_METADATA:e(26772),VIDEO_PLAY:e(83411),VIDEO_PLAYING:e(64437),VIDEO_SEEKED:e(75780),VIDEO_SEEKING:e(67799),VIDEO_STALLED:e(63500),VIDEO_STOP:e(55541),VIDEO_TEXTURE:e(53208),VIDEO_UNLOCKED:e(4992),VIDEO_UNSUPPORTED:e(12)}}),42421:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(95643),r=e(64993),a=new o({Extends:n,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.Origin,m.ScrollFactor,m.Size,m.Texture,m.Tint,m.Transform,m.Visible,r],initialize:function(s){n.call(this,s,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});f.exports=a}),70217:(()=>{}),56315:((f,x,e)=>{var o=e(42421),m=e(39429);m.register("extern",function(){var n=new o(this.scene);return this.displayList.add(n),n})}),64993:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(80287),n=e(70217),f.exports={renderWebGL:m,renderCanvas:n}}),80287:((f,x,e)=>{var o=e(91296),m=function(n,r,a,t){n.pipelines.clear();var s=o(r,a,t).calc;r.render.call(r,n,a,s),n.pipelines.rebind()};f.exports=m}),85592:(f=>{f.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),43831:((f,x,e)=>{var o=e(71911),m=e(83419),n=e(85592),r=e(31401),a=e(8497),t=e(95643),s=e(95540),l=e(35154),i=e(36383),h=e(84503),d=new m({Extends:t,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.Transform,r.Visible,r.ScrollFactor,h],initialize:function(u,p){var g=l(p,"x",0),y=l(p,"y",0);t.call(this,u,"Graphics"),this.setPosition(g,y),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(p)},setDefaultStyles:function(c){return l(c,"lineStyle",null)&&(this.defaultStrokeWidth=l(c,"lineStyle.width",1),this.defaultStrokeColor=l(c,"lineStyle.color",16777215),this.defaultStrokeAlpha=l(c,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),l(c,"fillStyle",null)&&(this.defaultFillColor=l(c,"fillStyle.color",16777215),this.defaultFillAlpha=l(c,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(c,u,p){return p===void 0&&(p=1),this.commandBuffer.push(n.LINE_STYLE,c,u,p),this._lineWidth=c,this},fillStyle:function(c,u){return u===void 0&&(u=1),this.commandBuffer.push(n.FILL_STYLE,c,u),this},fillGradientStyle:function(c,u,p,g,y,v,S,w){return y===void 0&&(y=1),v===void 0&&(v=y),S===void 0&&(S=y),w===void 0&&(w=y),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,y,v,S,w,c,u,p,g),this},lineGradientStyle:function(c,u,p,g,y,v){return v===void 0&&(v=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,c,v,u,p,g,y),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(c){return this.fillCircle(c.x,c.y,c.radius)},strokeCircleShape:function(c){return this.strokeCircle(c.x,c.y,c.radius)},fillCircle:function(c,u,p){return this.beginPath(),this.arc(c,u,p,0,i.PI2),this.fillPath(),this},strokeCircle:function(c,u,p){return this.beginPath(),this.arc(c,u,p,0,i.PI2),this.strokePath(),this},fillRectShape:function(c){return this.fillRect(c.x,c.y,c.width,c.height)},strokeRectShape:function(c){return this.strokeRect(c.x,c.y,c.width,c.height)},fillRect:function(c,u,p,g){return this.commandBuffer.push(n.FILL_RECT,c,u,p,g),this},strokeRect:function(c,u,p,g){var y=this._lineWidth/2,v=c-y,S=c+y;return this.beginPath(),this.moveTo(c,u),this.lineTo(c,u+g),this.strokePath(),this.beginPath(),this.moveTo(c+p,u),this.lineTo(c+p,u+g),this.strokePath(),this.beginPath(),this.moveTo(v,u),this.lineTo(S+p,u),this.strokePath(),this.beginPath(),this.moveTo(v,u+g),this.lineTo(S+p,u+g),this.strokePath(),this},fillRoundedRect:function(c,u,p,g,y){y===void 0&&(y=20);var v=y,S=y,w=y,T=y;typeof y!="number"&&(v=s(y,"tl",20),S=s(y,"tr",20),w=s(y,"bl",20),T=s(y,"br",20));var C=v>=0,M=S>=0,E=w>=0,P=T>=0;return v=Math.abs(v),S=Math.abs(S),w=Math.abs(w),T=Math.abs(T),this.beginPath(),this.moveTo(c+v,u),this.lineTo(c+p-S,u),M?this.arc(c+p-S,u+S,S,-i.TAU,0):this.arc(c+p,u,S,Math.PI,i.TAU,!0),this.lineTo(c+p,u+g-T),P?this.arc(c+p-T,u+g-T,T,0,i.TAU):this.arc(c+p,u+g,T,-i.TAU,Math.PI,!0),this.lineTo(c+w,u+g),E?this.arc(c+w,u+g-w,w,i.TAU,Math.PI):this.arc(c,u+g,w,0,-i.TAU,!0),this.lineTo(c,u+v),C?this.arc(c+v,u+v,v,-Math.PI,-i.TAU):this.arc(c,u,v,i.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(c,u,p,g,y){y===void 0&&(y=20);var v=y,S=y,w=y,T=y,C=Math.min(p,g)/2;typeof y!="number"&&(v=s(y,"tl",20),S=s(y,"tr",20),w=s(y,"bl",20),T=s(y,"br",20));var M=v>=0,E=S>=0,P=w>=0,A=T>=0;return v=Math.min(Math.abs(v),C),S=Math.min(Math.abs(S),C),w=Math.min(Math.abs(w),C),T=Math.min(Math.abs(T),C),this.beginPath(),this.moveTo(c+v,u),this.lineTo(c+p-S,u),this.moveTo(c+p-S,u),E?this.arc(c+p-S,u+S,S,-i.TAU,0):this.arc(c+p,u,S,Math.PI,i.TAU,!0),this.lineTo(c+p,u+g-T),this.moveTo(c+p,u+g-T),A?this.arc(c+p-T,u+g-T,T,0,i.TAU):this.arc(c+p,u+g,T,-i.TAU,Math.PI,!0),this.lineTo(c+w,u+g),this.moveTo(c+w,u+g),P?this.arc(c+w,u+g-w,w,i.TAU,Math.PI):this.arc(c,u+g,w,0,-i.TAU,!0),this.lineTo(c,u+v),this.moveTo(c,u+v),M?this.arc(c+v,u+v,v,-Math.PI,-i.TAU):this.arc(c,u,v,i.TAU,0,!0),this.strokePath(),this},fillPointShape:function(c,u){return this.fillPoint(c.x,c.y,u)},fillPoint:function(c,u,p){return!p||p<1?p=1:(c-=p/2,u-=p/2),this.commandBuffer.push(n.FILL_RECT,c,u,p,p),this},fillTriangleShape:function(c){return this.fillTriangle(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)},strokeTriangleShape:function(c){return this.strokeTriangle(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)},fillTriangle:function(c,u,p,g,y,v){return this.commandBuffer.push(n.FILL_TRIANGLE,c,u,p,g,y,v),this},strokeTriangle:function(c,u,p,g,y,v){return this.commandBuffer.push(n.STROKE_TRIANGLE,c,u,p,g,y,v),this},strokeLineShape:function(c){return this.lineBetween(c.x1,c.y1,c.x2,c.y2)},lineBetween:function(c,u,p,g){return this.beginPath(),this.moveTo(c,u),this.lineTo(p,g),this.strokePath(),this},lineTo:function(c,u){return this.commandBuffer.push(n.LINE_TO,c,u),this},moveTo:function(c,u){return this.commandBuffer.push(n.MOVE_TO,c,u),this},strokePoints:function(c,u,p,g){u===void 0&&(u=!1),p===void 0&&(p=!1),g===void 0&&(g=c.length),this.beginPath(),this.moveTo(c[0].x,c[0].y);for(var y=1;y<g;y++)this.lineTo(c[y].x,c[y].y);return u&&this.lineTo(c[0].x,c[0].y),p&&this.closePath(),this.strokePath(),this},fillPoints:function(c,u,p,g){u===void 0&&(u=!1),p===void 0&&(p=!1),g===void 0&&(g=c.length),this.beginPath(),this.moveTo(c[0].x,c[0].y);for(var y=1;y<g;y++)this.lineTo(c[y].x,c[y].y);return u&&this.lineTo(c[0].x,c[0].y),p&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(c,u){u===void 0&&(u=32);var p=c.getPoints(u);return this.strokePoints(p,!0)},strokeEllipse:function(c,u,p,g,y){y===void 0&&(y=32);var v=new a(c,u,p,g),S=v.getPoints(y);return this.strokePoints(S,!0)},fillEllipseShape:function(c,u){u===void 0&&(u=32);var p=c.getPoints(u);return this.fillPoints(p,!0)},fillEllipse:function(c,u,p,g,y){y===void 0&&(y=32);var v=new a(c,u,p,g),S=v.getPoints(y);return this.fillPoints(S,!0)},arc:function(c,u,p,g,y,v,S){return v===void 0&&(v=!1),S===void 0&&(S=0),this.commandBuffer.push(n.ARC,c,u,p,g,y,v,S),this},slice:function(c,u,p,g,y,v,S){return v===void 0&&(v=!1),S===void 0&&(S=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,c,u),this.commandBuffer.push(n.ARC,c,u,p,g,y,v,S),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(c,u){return this.commandBuffer.push(n.TRANSLATE,c,u),this},scaleCanvas:function(c,u){return this.commandBuffer.push(n.SCALE,c,u),this},rotateCanvas:function(c){return this.commandBuffer.push(n.ROTATE,c),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(c,u,p){var g=this.scene.sys,y=g.game.renderer;u===void 0&&(u=g.scale.width),p===void 0&&(p=g.scale.height),d.TargetCamera.setScene(this.scene),d.TargetCamera.setViewport(0,0,u,p),d.TargetCamera.scrollX=this.x,d.TargetCamera.scrollY=this.y;var v,S,w={willReadFrequently:!0};if(typeof c=="string")if(g.textures.exists(c)){v=g.textures.get(c);var T=v.getSourceImage();T instanceof HTMLCanvasElement&&(S=T.getContext("2d",w))}else v=g.textures.createCanvas(c,u,p),S=v.getSourceImage().getContext("2d",w);else c instanceof HTMLCanvasElement&&(S=c.getContext("2d",w));return S&&(this.renderCanvas(y,this,d.TargetCamera,null,S,!1),v&&v.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});d.TargetCamera=new o,f.exports=d}),32768:((f,x,e)=>{var o=e(85592),m=e(20926),n=function(r,a,t,s,l,i){var h=a.commandBuffer,d=h.length,c=l||r.currentContext;if(!(d===0||!m(r,c,a,t,s))){t.addToRenderList(a);var u=1,p=1,g=0,y=0,v=1,S=0,w=0,T=0;c.beginPath();for(var C=0;C<d;++C){var M=h[C];switch(M){case o.ARC:c.arc(h[C+1],h[C+2],h[C+3],h[C+4],h[C+5],h[C+6]),C+=7;break;case o.LINE_STYLE:v=h[C+1],g=h[C+2],u=h[C+3],S=(g&16711680)>>>16,w=(g&65280)>>>8,T=g&255,c.strokeStyle="rgba("+S+","+w+","+T+","+u+")",c.lineWidth=v,C+=3;break;case o.FILL_STYLE:y=h[C+1],p=h[C+2],S=(y&16711680)>>>16,w=(y&65280)>>>8,T=y&255,c.fillStyle="rgba("+S+","+w+","+T+","+p+")",C+=2;break;case o.BEGIN_PATH:c.beginPath();break;case o.CLOSE_PATH:c.closePath();break;case o.FILL_PATH:i||c.fill();break;case o.STROKE_PATH:i||c.stroke();break;case o.FILL_RECT:i?c.rect(h[C+1],h[C+2],h[C+3],h[C+4]):c.fillRect(h[C+1],h[C+2],h[C+3],h[C+4]),C+=4;break;case o.FILL_TRIANGLE:c.beginPath(),c.moveTo(h[C+1],h[C+2]),c.lineTo(h[C+3],h[C+4]),c.lineTo(h[C+5],h[C+6]),c.closePath(),i||c.fill(),C+=6;break;case o.STROKE_TRIANGLE:c.beginPath(),c.moveTo(h[C+1],h[C+2]),c.lineTo(h[C+3],h[C+4]),c.lineTo(h[C+5],h[C+6]),c.closePath(),i||c.stroke(),C+=6;break;case o.LINE_TO:c.lineTo(h[C+1],h[C+2]),C+=2;break;case o.MOVE_TO:c.moveTo(h[C+1],h[C+2]),C+=2;break;case o.LINE_FX_TO:c.lineTo(h[C+1],h[C+2]),C+=5;break;case o.MOVE_FX_TO:c.moveTo(h[C+1],h[C+2]),C+=5;break;case o.SAVE:c.save();break;case o.RESTORE:c.restore();break;case o.TRANSLATE:c.translate(h[C+1],h[C+2]),C+=2;break;case o.SCALE:c.scale(h[C+1],h[C+2]),C+=2;break;case o.ROTATE:c.rotate(h[C+1]),C+=1;break;case o.GRADIENT_FILL_STYLE:C+=5;break;case o.GRADIENT_LINE_STYLE:C+=6;break}}c.restore()}};f.exports=n}),87079:((f,x,e)=>{var o=e(44603),m=e(43831);o.register("graphics",function(n,r){n===void 0&&(n={}),r!==void 0&&(n.add=r);var a=new m(this.scene,n);return n.add&&this.scene.sys.displayList.add(a),a})}),1201:((f,x,e)=>{var o=e(43831),m=e(39429);m.register("graphics",function(n){return this.displayList.add(new o(this.scene,n))})}),84503:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(77545),n=e(32768),n=e(32768),f.exports={renderWebGL:m,renderCanvas:n}}),77545:((f,x,e)=>{var o=e(85592),m=e(91296),n=e(61340),r=e(70554),a=function(h,d,c){this.x=h,this.y=d,this.width=c},t=function(h,d,c){this.points=[],this.pointsLength=1,this.points[0]=new a(h,d,c)},s=[],l=new n,i=function(h,d,c,u){if(d.commandBuffer.length!==0){c.addToRenderList(d);var p=h.pipelines.set(d.pipeline,d);h.pipelines.preBatch(d);for(var g=m(d,c,u).calc,y=l.loadIdentity(),v=d.commandBuffer,S=c.alpha*d.alpha,w=1,T=p.fillTint,C=p.strokeTint,M=0,E=0,P=0,A=.01,D=Math.PI*2,W,V=[],K=0,X=!0,R=null,H=r.getTintAppendFloatAlpha,L=0;L<v.length;L++)switch(W=v[L],W){case o.BEGIN_PATH:{V.length=0,R=null,X=!0;break}case o.CLOSE_PATH:{X=!1,R&&R.points.length&&R.points.push(R.points[0]);break}case o.FILL_PATH:{for(K=0;K<V.length;K++)p.batchFillPath(V[K].points,y,g);break}case o.STROKE_PATH:{for(K=0;K<V.length;K++)p.batchStrokePath(V[K].points,w,X,y,g);break}case o.LINE_STYLE:{w=v[++L];var N=v[++L],z=v[++L]*S,U=H(N,z);C.TL=U,C.TR=U,C.BL=U,C.BR=U;break}case o.FILL_STYLE:{var Y=v[++L],$=v[++L]*S,Z=H(Y,$);T.TL=Z,T.TR=Z,T.BL=Z,T.BR=Z;break}case o.GRADIENT_FILL_STYLE:{var Q=v[++L]*S,q=v[++L]*S,j=v[++L]*S,_=v[++L]*S;T.TL=H(v[++L],Q),T.TR=H(v[++L],q),T.BL=H(v[++L],j),T.BR=H(v[++L],_);break}case o.GRADIENT_LINE_STYLE:{w=v[++L];var te=v[++L]*S;C.TL=H(v[++L],te),C.TR=H(v[++L],te),C.BL=H(v[++L],te),C.BR=H(v[++L],te);break}case o.ARC:{var se=0,ie=v[++L],ne=v[++L],he=v[++L],ue=v[++L],ae=v[++L],oe=v[++L],le=v[++L];for(ae-=ue,oe?ae<-D?ae=-D:ae>0&&(ae=-D+ae%D):ae>D?ae=D:ae<0&&(ae=D+ae%D),R===null&&(R=new t(ie+Math.cos(ue)*he,ne+Math.sin(ue)*he,w),V.push(R),se+=A);se<1+le;)P=ae*se+ue,M=ie+Math.cos(P)*he,E=ne+Math.sin(P)*he,R.points.push(new a(M,E,w)),se+=A;P=ae+ue,M=ie+Math.cos(P)*he,E=ne+Math.sin(P)*he,R.points.push(new a(M,E,w));break}case o.FILL_RECT:{p.batchFillRect(v[++L],v[++L],v[++L],v[++L],y,g);break}case o.FILL_TRIANGLE:{p.batchFillTriangle(v[++L],v[++L],v[++L],v[++L],v[++L],v[++L],y,g);break}case o.STROKE_TRIANGLE:{p.batchStrokeTriangle(v[++L],v[++L],v[++L],v[++L],v[++L],v[++L],w,y,g);break}case o.LINE_TO:{R!==null?R.points.push(new a(v[++L],v[++L],w)):(R=new t(v[++L],v[++L],w),V.push(R));break}case o.MOVE_TO:{R=new t(v[++L],v[++L],w),V.push(R);break}case o.SAVE:{s.push(y.copyToArray());break}case o.RESTORE:{y.copyFromArray(s.pop());break}case o.TRANSLATE:{ie=v[++L],ne=v[++L],y.translate(ie,ne);break}case o.SCALE:{ie=v[++L],ne=v[++L],y.scale(ie,ne);break}case o.ROTATE:{y.rotate(v[++L]);break}}h.pipelines.postBatch(d)}};f.exports=i}),26479:((f,x,e)=>{var o=e(61061),m=e(83419),n=e(51708),r=e(50792),a=e(46710),t=e(95540),s=e(35154),l=e(97022),i=e(41212),h=e(88492),d=e(35072),c=e(68287),u=new m({Extends:r,initialize:function(g,y,v){r.call(this),v?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?i(y[0])&&(v=y,y=null):i(y)&&(v=y,y=null),this.scene=g,this.children=new d,this.isParent=!0,this.type="Group",this.classType=t(v,"classType",c),this.name=t(v,"name",""),this.active=t(v,"active",!0),this.maxSize=t(v,"maxSize",-1),this.defaultKey=t(v,"defaultKey",null),this.defaultFrame=t(v,"defaultFrame",null),this.runChildUpdate=t(v,"runChildUpdate",!1),this.createCallback=t(v,"createCallback",null),this.removeCallback=t(v,"removeCallback",null),this.createMultipleCallback=t(v,"createMultipleCallback",null),this.internalCreateCallback=t(v,"internalCreateCallback",null),this.internalRemoveCallback=t(v,"internalRemoveCallback",null),y&&this.addMultiple(y),v&&this.createMultiple(v),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(p,g,y,v,S,w){if(p===void 0&&(p=0),g===void 0&&(g=0),y===void 0&&(y=this.defaultKey),v===void 0&&(v=this.defaultFrame),S===void 0&&(S=!0),w===void 0&&(w=!0),this.isFull())return null;var T=new this.classType(this.scene,p,g,y,v);return T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList(),T.visible=S,T.setActive(w),this.add(T),T},createMultiple:function(p){if(this.isFull())return[];Array.isArray(p)||(p=[p]);var g=[];if(p[0].key)for(var y=0;y<p.length;y++){var v=this.createFromConfig(p[y]);g=g.concat(v)}return g},createFromConfig:function(p){if(this.isFull())return[];this.classType=t(p,"classType",this.classType);var g=t(p,"key",void 0),y=t(p,"frame",null),v=t(p,"visible",!0),S=t(p,"active",!0),w=[];if(g===void 0)return w;Array.isArray(g)||(g=[g]),Array.isArray(y)||(y=[y]);var T=t(p,"repeat",0),C=t(p,"randomKey",!1),M=t(p,"randomFrame",!1),E=t(p,"yoyo",!1),P=t(p,"quantity",!1),A=t(p,"frameQuantity",1),D=t(p,"max",0),W=h(g,y,{max:D,qty:P||A,random:C,randomB:M,repeat:T,yoyo:E});p.createCallback&&(this.createCallback=p.createCallback),p.removeCallback&&(this.removeCallback=p.removeCallback),p.internalCreateCallback&&(this.internalCreateCallback=p.internalCreateCallback),p.internalRemoveCallback&&(this.internalRemoveCallback=p.internalRemoveCallback);for(var V=0;V<W.length;V++){var K=this.create(0,0,W[V].a,W[V].b,v,S);if(!K)break;w.push(K)}if(l(p,"setXY")){var X=s(p,"setXY.x",0),R=s(p,"setXY.y",0),H=s(p,"setXY.stepX",0),L=s(p,"setXY.stepY",0);o.SetXY(w,X,R,H,L)}if(l(p,"setRotation")){var N=s(p,"setRotation.value",0),z=s(p,"setRotation.step",0);o.SetRotation(w,N,z)}if(l(p,"setScale")){var U=s(p,"setScale.x",1),Y=s(p,"setScale.y",U),$=s(p,"setScale.stepX",0),Z=s(p,"setScale.stepY",0);o.SetScale(w,U,Y,$,Z)}if(l(p,"setOrigin")){var Q=s(p,"setOrigin.x",.5),q=s(p,"setOrigin.y",Q),j=s(p,"setOrigin.stepX",0),_=s(p,"setOrigin.stepY",0);o.SetOrigin(w,Q,q,j,_)}if(l(p,"setAlpha")){var te=s(p,"setAlpha.value",1),se=s(p,"setAlpha.step",0);o.SetAlpha(w,te,se)}if(l(p,"setDepth")){var ie=s(p,"setDepth.value",0),ne=s(p,"setDepth.step",0);o.SetDepth(w,ie,ne)}if(l(p,"setScrollFactor")){var he=s(p,"setScrollFactor.x",1),ue=s(p,"setScrollFactor.y",he),ae=s(p,"setScrollFactor.stepX",0),oe=s(p,"setScrollFactor.stepY",0);o.SetScrollFactor(w,he,ue,ae,oe)}var le=t(p,"hitArea",null),fe=t(p,"hitAreaCallback",null);le&&o.SetHitArea(w,le,fe);var de=t(p,"gridAlign",!1);return de&&o.GridAlign(w,de),this.createMultipleCallback&&this.createMultipleCallback.call(this,w),w},preUpdate:function(p,g){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),v=0;v<y.length;v++){var S=y[v];S.active&&S.update(p,g)}},add:function(p,g){return g===void 0&&(g=!1),this.isFull()?this:(this.children.set(p),this.internalCreateCallback&&this.internalCreateCallback.call(this,p),this.createCallback&&this.createCallback.call(this,p),g&&(p.addToDisplayList(this.scene.sys.displayList),p.addToUpdateList()),p.on(n.DESTROY,this.remove,this),this)},addMultiple:function(p,g){if(g===void 0&&(g=!1),Array.isArray(p))for(var y=0;y<p.length;y++)this.add(p[y],g);return this},remove:function(p,g,y){return g===void 0&&(g=!1),y===void 0&&(y=!1),this.children.contains(p)?(this.children.delete(p),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,p),this.removeCallback&&this.removeCallback.call(this,p),p.off(n.DESTROY,this.remove,this),y?p.destroy():g&&(p.removeFromDisplayList(),p.removeFromUpdateList()),this):this},clear:function(p,g){p===void 0&&(p=!1),g===void 0&&(g=!1);for(var y=this.children,v=0;v<y.size;v++){var S=y.entries[v];S.off(n.DESTROY,this.remove,this),g?S.destroy():p&&(S.removeFromDisplayList(),S.removeFromUpdateList())}return this.children.clear(),this},contains:function(p){return this.children.contains(p)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(p,g,y,v){return a(this.children.entries,p,g,y,v)},getFirst:function(p,g,y,v,S,w,T){return this.getHandler(!0,1,p,g,y,v,S,w,T)},getFirstNth:function(p,g,y,v,S,w,T,C){return this.getHandler(!0,p,g,y,v,S,w,T,C)},getLast:function(p,g,y,v,S,w,T){return this.getHandler(!1,1,p,g,y,v,S,w,T)},getLastNth:function(p,g,y,v,S,w,T,C){return this.getHandler(!1,p,g,y,v,S,w,T,C)},getHandler:function(p,g,y,v,S,w,T,C,M){y===void 0&&(y=!1),v===void 0&&(v=!1);var E,P,A=0,D=this.children.entries;if(p)for(P=0;P<D.length;P++)if(E=D[P],E.active===y){if(A++,A===g)break}else E=null;else for(P=D.length-1;P>=0;P--)if(E=D[P],E.active===y){if(A++,A===g)break}else E=null;return E?(typeof S=="number"&&(E.x=S),typeof w=="number"&&(E.y=w),E):v?this.create(S,w,T,C,M):null},get:function(p,g,y,v,S){return this.getFirst(!1,!0,p,g,y,v,S)},getFirstAlive:function(p,g,y,v,S,w){return this.getFirst(!0,p,g,y,v,S,w)},getFirstDead:function(p,g,y,v,S,w){return this.getFirst(!1,p,g,y,v,S,w)},playAnimation:function(p,g){return o.PlayAnimation(this.children.entries,p,g),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(p){p===void 0&&(p=!0);for(var g=0,y=0;y<this.children.size;y++)this.children.entries[y].active===p&&g++;return g},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var p=this.getTotalUsed(),g=this.maxSize===-1?999999999999:this.maxSize;return g-p},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},propertyValueSet:function(p,g,y,v,S){return o.PropertyValueSet(this.children.entries,p,g,y,v,S),this},propertyValueInc:function(p,g,y,v,S){return o.PropertyValueInc(this.children.entries,p,g,y,v,S),this},setX:function(p,g){return o.SetX(this.children.entries,p,g),this},setY:function(p,g){return o.SetY(this.children.entries,p,g),this},setXY:function(p,g,y,v){return o.SetXY(this.children.entries,p,g,y,v),this},incX:function(p,g){return o.IncX(this.children.entries,p,g),this},incY:function(p,g){return o.IncY(this.children.entries,p,g),this},incXY:function(p,g,y,v){return o.IncXY(this.children.entries,p,g,y,v),this},shiftPosition:function(p,g,y){return o.ShiftPosition(this.children.entries,p,g,y),this},angle:function(p,g){return o.Angle(this.children.entries,p,g),this},rotate:function(p,g){return o.Rotate(this.children.entries,p,g),this},rotateAround:function(p,g){return o.RotateAround(this.children.entries,p,g),this},rotateAroundDistance:function(p,g,y){return o.RotateAroundDistance(this.children.entries,p,g,y),this},setAlpha:function(p,g){return o.SetAlpha(this.children.entries,p,g),this},setTint:function(p,g,y,v){return o.SetTint(this.children.entries,p,g,y,v),this},setOrigin:function(p,g,y,v){return o.SetOrigin(this.children.entries,p,g,y,v),this},scaleX:function(p,g){return o.ScaleX(this.children.entries,p,g),this},scaleY:function(p,g){return o.ScaleY(this.children.entries,p,g),this},scaleXY:function(p,g,y,v){return o.ScaleXY(this.children.entries,p,g,y,v),this},setDepth:function(p,g){return o.SetDepth(this.children.entries,p,g),this},setBlendMode:function(p){return o.SetBlendMode(this.children.entries,p),this},setHitArea:function(p,g){return o.SetHitArea(this.children.entries,p,g),this},shuffle:function(){return o.Shuffle(this.children.entries),this},kill:function(p){this.children.contains(p)&&p.setActive(!1)},killAndHide:function(p){this.children.contains(p)&&(p.setActive(!1),p.setVisible(!1))},setVisible:function(p,g,y){return o.SetVisible(this.children.entries,p,g,y),this},toggleVisible:function(){return o.ToggleVisible(this.children.entries),this},destroy:function(p,g){p===void 0&&(p=!1),g===void 0&&(g=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(g,p),this.scene=void 0,this.children=void 0)}});f.exports=u}),94975:((f,x,e)=>{var o=e(44603),m=e(26479);o.register("group",function(n){return new m(this.scene,null,n)})}),3385:((f,x,e)=>{var o=e(26479),m=e(39429);m.register("group",function(n,r){return this.updateList.add(new o(this.scene,n,r))})}),88571:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(95643),r=e(59819),a=new o({Extends:n,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.TextureCrop,m.Tint,m.Transform,m.Visible,r],initialize:function(s,l,i,h,d){n.call(this,s,"Image"),this._crop=this.resetCropObject(),this.setTexture(h,d),this.setPosition(l,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});f.exports=a}),40652:(f=>{var x=function(e,o,m,n){m.addToRenderList(o),e.batchSprite(o,o.frame,m,n)};f.exports=x}),82459:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(88571);m.register("image",function(a,t){a===void 0&&(a={});var s=n(a,"key",null),l=n(a,"frame",null),i=new r(this.scene,0,0,s,l);return t!==void 0&&(a.add=t),o(this.scene,i,a),i})}),2117:((f,x,e)=>{var o=e(88571),m=e(39429);m.register("image",function(n,r,a,t){return this.displayList.add(new o(this.scene,n,r,a,t))})}),59819:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(99517),n=e(40652),f.exports={renderWebGL:m,renderCanvas:n}}),99517:(f=>{var x=function(e,o,m,n){m.addToRenderList(o),this.pipeline.batchSprite(o,m,n)};f.exports=x}),77856:((f,x,e)=>{var o={Events:e(51708),DisplayList:e(8050),GameObjectCreator:e(44603),GameObjectFactory:e(39429),UpdateList:e(45027),Components:e(31401),GetCalcMatrix:e(91296),BuildGameObject:e(25305),BuildGameObjectAnimation:e(13059),GameObject:e(95643),BitmapText:e(22186),Blitter:e(6107),Bob:e(46590),Container:e(31559),DOMElement:e(3069),DynamicBitmapText:e(2638),Extern:e(42421),Graphics:e(43831),Group:e(26479),Image:e(88571),Layer:e(93595),Particles:e(18404),PathFollower:e(1159),RenderTexture:e(591),RetroFont:e(196),Rope:e(77757),Sprite:e(68287),Text:e(50171),GetTextSize:e(14220),MeasureText:e(79557),TextStyle:e(35762),TileSprite:e(20839),Zone:e(41481),Video:e(18471),Shape:e(17803),Arc:e(23629),Curve:e(89),Ellipse:e(19921),Grid:e(30479),IsoBox:e(61475),IsoTriangle:e(16933),Line:e(57847),Polygon:e(24949),Rectangle:e(74561),Star:e(55911),Triangle:e(36931),Factories:{Blitter:e(12709),Container:e(24961),DOMElement:e(2611),DynamicBitmapText:e(72566),Extern:e(56315),Graphics:e(1201),Group:e(3385),Image:e(2117),Layer:e(20005),Particles:e(676),PathFollower:e(90145),RenderTexture:e(60505),Rope:e(96819),Sprite:e(46409),StaticBitmapText:e(34914),Text:e(68005),TileSprite:e(91681),Zone:e(84175),Video:e(89025),Arc:e(42563),Curve:e(40511),Ellipse:e(1543),Grid:e(34137),IsoBox:e(3933),IsoTriangle:e(49803),Line:e(2481),Polygon:e(64827),Rectangle:e(87959),Star:e(93697),Triangle:e(45245)},Creators:{Blitter:e(9403),Container:e(77143),DynamicBitmapText:e(11164),Graphics:e(87079),Group:e(94975),Image:e(82459),Layer:e(25179),Particles:e(92730),RenderTexture:e(34495),Rope:e(26209),Sprite:e(15567),StaticBitmapText:e(57336),Text:e(71259),TileSprite:e(14167),Zone:e(95261),Video:e(11511)}};o.Shader=e(20071),o.Mesh=e(4703),o.NineSlice=e(28103),o.PointLight=e(80321),o.Plane=e(33663),o.Factories.Shader=e(74177),o.Factories.Mesh=e(9225),o.Factories.NineSlice=e(47521),o.Factories.PointLight=e(71255),o.Factories.Plane=e(30985),o.Creators.Shader=e(54935),o.Creators.Mesh=e(20527),o.Creators.NineSlice=e(28279),o.Creators.PointLight=e(39829),o.Creators.Plane=e(56015),o.Light=e(41432),o.LightsManager=e(61356),o.LightsPlugin=e(88992),f.exports=o}),93595:((f,x,e)=>{var o=e(10312),m=e(83419),n=e(31401),r=e(53774),a=e(45893),t=e(50792),s=e(51708),l=e(73162),i=e(33963),h=e(44594),d=e(19186),c=new m({Extends:l,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.PostPipeline,n.Visible,t,i],initialize:function(p,g){l.call(this,p),t.call(this),this.scene=p,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=p.sys,this.events=p.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),g&&this.add(g),p.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(u,p){return this.data||(this.data=new a(this)),this.data.set(u,p),this},incData:function(u,p){return this.data||(this.data=new a(this)),this.data.inc(u,p),this},toggleData:function(u){return this.data||(this.data=new a(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new a(this)),this.data.get(u)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(u){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,p=this.parentContainer,g=[];p&&(g.unshift(p.getIndex(u)),u=p,p.parentContainer);)p=p.parentContainer;return g.unshift(this.displayList.getIndex(u)),g},addChildCallback:function(u){var p=u.displayList;p&&p!==this&&u.removeFromDisplayList(),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(s.ADDED_TO_SCENE,u,this.scene),this.events.emit(h.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(s.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,u,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(d(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,p){return u._depth-p._depth},getChildren:function(){return this.list},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(s.ADDED_TO_SCENE,this,this.scene),u.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(s.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var u=null;return this.parentContainer?u=this.parentContainer.list:this.displayList&&(u=this.displayList.list),u},destroy:function(u){if(!(!this.scene||this.ignoreDestroy)){this.emit(s.DESTROY,this);for(var p=this.list;p.length;)p[0].destroy(u);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});f.exports=c}),2956:(f=>{var x=function(e,o,m){var n=o.list;if(n.length!==0){o.depthSort();var r=o.blendMode!==-1;r||e.setBlendMode(0);var a=o._alpha;o.mask&&o.mask.preRenderCanvas(e,null,m);for(var t=0;t<n.length;t++){var s=n[t];if(s.willRender(m)){var l=s.alpha;!r&&s.blendMode!==e.currentBlendMode&&e.setBlendMode(s.blendMode),s.setAlpha(l*a),s.renderCanvas(e,s,m),s.setAlpha(l)}}o.mask&&o.mask.postRenderCanvas(e)}};f.exports=x}),25179:((f,x,e)=>{var o=e(25305),m=e(93595),n=e(44603),r=e(23568);n.register("layer",function(a,t){a===void 0&&(a={});var s=r(a,"children",null),l=new m(this.scene,s);return t!==void 0&&(a.add=t),o(this.scene,l,a),l})}),20005:((f,x,e)=>{var o=e(93595),m=e(39429);m.register("layer",function(n){return this.displayList.add(new o(this.scene,n))})}),33963:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(15869),n=e(2956),f.exports={renderWebGL:m,renderCanvas:n}}),15869:(f=>{var x=function(e,o,m){var n=o.list,r=n.length;if(r!==0){o.depthSort(),e.pipelines.preBatch(o);var a=o.blendMode!==-1;a||e.setBlendMode(0);for(var t=o.alpha,s=0;s<r;s++){var l=n[s];if(l.willRender(m)){var i,h,d,c;if(l.alphaTopLeft!==void 0)i=l.alphaTopLeft,h=l.alphaTopRight,d=l.alphaBottomLeft,c=l.alphaBottomRight;else{var u=l.alpha;i=u,h=u,d=u,c=u}!a&&l.blendMode!==e.currentBlendMode&&e.setBlendMode(l.blendMode);var p=l.mask;p&&p.preRenderWebGL(e,l,m);var g=l.type;g!==e.currentType&&(e.newType=!0,e.currentType=g),e.nextTypeMatch=s<r-1?n[s+1].type===e.currentType:!1,l.setAlpha(i*t,h*t,d*t,c*t),l.renderWebGL(e,l,m),l.setAlpha(i,h,d,c),p&&p.postRenderWebGL(e,m),e.newType=!1}}e.pipelines.postBatch(o)}};f.exports=x}),41432:((f,x,e)=>{var o=e(96503),m=e(83419),n=e(31401),r=e(51767),a=e(70554),t=new m({Extends:o,Mixins:[n.Origin,n.ScrollFactor,n.Visible],initialize:function(l,i,h,d,c,u,p){o.call(this,l,i,h),this.color=new r(d,c,u),this.intensity=p,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(h)},displayWidth:{get:function(){return this.diameter},set:function(s){this.diameter=s}},displayHeight:{get:function(){return this.diameter},set:function(s){this.diameter=s}},width:{get:function(){return this.diameter},set:function(s){this.diameter=s}},height:{get:function(){return this.diameter},set:function(s){this.diameter=s}},willRender:function(s){return!(t.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&s.id)},setColor:function(s){var l=a.getFloatsFromUintRGB(s);return this.color.set(l[0],l[1],l[2]),this},setIntensity:function(s){return this.intensity=s,this},setRadius:function(s){return this.radius=s,this}});t.RENDER_MASK=15,f.exports=t}),61356:((f,x,e)=>{var o=e(81491),m=e(83419),n=e(20339),r=e(41432),a=e(80321),t=e(51767),s=e(19133),l=e(19186),i=e(70554),h=new m({initialize:function(){this.lights=[],this.ambientColor=new t(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(d,c,u,p,g,y){return this.systems.displayList.add(new a(this.scene,d,c,u,p,g,y))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(d){for(var c=this.lights,u=d.worldView,p=[],g=0;g<c.length;g++){var y=c[g];y.willRender(d)&&o(y,u)&&p.push({light:y,distance:n(y.x,y.y,u.centerX,u.centerY)})}return p.length>this.maxLights&&(l(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(d,c){return d.distance>=c.distance},setAmbientColor:function(d){var c=i.getFloatsFromUintRGB(d);return this.ambientColor.set(c[0],c[1],c[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(d,c,u,p,g){d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=128),p===void 0&&(p=16777215),g===void 0&&(g=1);var y=i.getFloatsFromUintRGB(p),v=new r(d,c,u,y[0],y[1],y[2],g);return this.lights.push(v),v},removeLight:function(d){var c=this.lights.indexOf(d);return c>=0&&s(this.lights,c),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});f.exports=h}),88992:((f,x,e)=>{var o=e(83419),m=e(61356),n=e(37277),r=e(44594),a=new o({Extends:m,initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once(r.BOOT,this.boot,this),m.call(this)},boot:function(){var t=this.systems.events;t.on(r.SHUTDOWN,this.shutdown,this),t.on(r.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",a,"lights"),f.exports=a}),4703:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(39506),r=e(83997),a=e(95643),t=e(34684),s=e(92515),l=e(91296),i=e(37867),h=e(29807),d=e(43396),c=e(19186),u=e(25836),p=e(39318),g=new o({Extends:a,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.Texture,m.Transform,m.Visible,h],initialize:function(v,S,w,T,C,M,E,P,A,D,W,V){S===void 0&&(S=0),w===void 0&&(w=0),T===void 0&&(T="__WHITE"),a.call(this,v,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new u,this.modelScale=new u(1,1,1),this.modelRotation=new u,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new i,this.viewPosition=new u,this.viewMatrix=new i,this.projectionMatrix=new i,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var K=v.sys.renderer;this.setPosition(S,w),this.setTexture(T,C),this.setSize(K.width,K.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(K.width,K.height),M&&this.addVertices(M,E,P,A,D,W,V)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(u.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=u.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,v,S,w,T){return S===void 0&&(S=45),w===void 0&&(w=.01),T===void 0&&(T=1e3),this.fov=S,this.projectionMatrix.perspective(n(S),y/v,w,T),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,v,S,w){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),v===void 0&&(v=1),S===void 0&&(S=-1e3),w===void 0&&(w=1e3),this.fov=0,this.projectionMatrix.ortho(-y,y,-v,v,S,w),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,v,S,w,T,C,M,E,P){var A=this.scene.sys.cache.obj.get(y),D;return A&&(D=t(A,this,v,S,w,T,C,M,E,P)),(!D||D.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",y),this},sortByDepth:function(y,v){return y.depth-v.depth},depthSort:function(){return c(this.faces,this.sortByDepth),this},addVertex:function(y,v,S,w,T,C,M){var E=new p(y,v,S,w,T,C,M);return this.vertices.push(E),E},addFace:function(y,v,S){var w=new r(y,v,S);return this.faces.push(w),this.dirtyCache[9]=-1,w},addVertices:function(y,v,S,w,T,C,M){var E=s(y,v,S,w,T,C,M);return E?(this.faces=this.faces.concat(E.faces),this.vertices=this.vertices.concat(E.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},hasFaceAt:function(y,v,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var w=l(this,S).calc,T=this.faces,C=0;C<T.length;C++){var M=T[C];if(M.contains(y,v,w))return!0}return!1},getFaceAt:function(y,v,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var w=l(this,S).calc,T=this.faces,C=[],M=0;M<T.length;M++){var E=T[M];E.contains(y,v,w)&&C.push(E)}return c(C,this.sortByDepth)},setDebug:function(y,v){return this.debugGraphic=y,!y&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,v=this.modelRotation,S=this.modelScale,w=this.dirtyCache,T=y.x,C=y.y,M=y.z,E=v.x,P=v.y,A=v.z,D=S.x,W=S.y,V=S.z,K=this.getFaceCount(),X=w[0],R=w[1],H=w[2],L=w[3],N=w[4],z=w[5],U=w[6],Y=w[7],$=w[8],Z=w[9];return w[0]=T,w[1]=C,w[2]=M,w[3]=E,w[4]=P,w[5]=A,w[6]=D,w[7]=W,w[8]=V,w[9]=K,X!==T||R!==C||H!==M||L!==E||N!==P||z!==A||U!==D||Y!==W||$!==V||Z!==K},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var v=this.width,S=this.height,w=this.viewMatrix,T=this.viewPosition;y[10]&&(w.identity(),w.translate(T),w.invert(),y[10]=0);var C=this.transformMatrix;C.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=T.z,E=this.faces,P=0;P<E.length;P++)E[P].transformCoordinatesLocal(C,v,S,M);this.depthSort()}},renderDebug:function(y,v){for(var S=y.debugGraphic,w=0;w<v.length;w++){var T=v[w],C=T.vertex1.tx,M=T.vertex1.ty,E=T.vertex2.tx,P=T.vertex2.ty,A=T.vertex3.tx,D=T.vertex3.ty;S.strokeTriangle(C,M,E,P,A,D)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(y){y===void 0&&(y={});var v=(function(S,w,T){for(var C=this.faces,M=0;M<C.length;M++){var E=C[M];if(E.contains(w,T))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,y,v),this},setTint:function(y){y===void 0&&(y=16777215);for(var v=this.vertices,S=0;S<v.length;S++)v[S].color=y;return this},uvScroll:function(y,v){for(var S=this.faces,w=0;w<S.length;w++)S[w].scrollUV(y,v);return this},uvScale:function(y,v){for(var S=this.faces,w=0;w<S.length;w++)S[w].scaleUV(y,v);return this},tint:{set:function(y){this.setTint(y)}},rotateX:{get:function(){return d(this.modelRotation.x)},set:function(y){this.modelRotation.x=n(y)}},rotateY:{get:function(){return d(this.modelRotation.y)},set:function(y){this.modelRotation.y=n(y)}},rotateZ:{get:function(){return d(this.modelRotation.z)},set:function(y){this.modelRotation.z=n(y)}}});f.exports=g}),36488:(f=>{var x=function(){};f.exports=x}),20527:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(35154),a=e(4703);m.register("mesh",function(t,s){t===void 0&&(t={});var l=n(t,"key",null),i=n(t,"frame",null),h=r(t,"vertices",[]),d=r(t,"uvs",[]),c=r(t,"indicies",[]),u=r(t,"containsZ",!1),p=r(t,"normals",[]),g=r(t,"colors",16777215),y=r(t,"alphas",1),v=new a(this.scene,0,0,l,i,h,d,c,u,p,g,y);return s!==void 0&&(t.add=s),o(this.scene,v,t),v})}),9225:((f,x,e)=>{var o=e(4703),m=e(39429);m.register("mesh",function(n,r,a,t,s,l,i,h,d,c,u){return this.displayList.add(new o(this.scene,n,r,a,t,s,l,i,h,d,c,u))})}),29807:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(48833),n=e(36488),f.exports={renderWebGL:m,renderCanvas:n}}),48833:((f,x,e)=>{var o=e(91296),m=function(n,r,a,t){var s=r.faces,l=s.length;if(l!==0){a.addToRenderList(r);var i=n.pipelines.set(r.pipeline,r),h=o(r,a,t).calc;n.pipelines.preBatch(r);for(var d=i.setGameObject(r),c=i.vertexViewF32,u=i.vertexViewU32,p=i.vertexCount*i.currentShader.vertexComponentCount-1,g=r.tintFill,y=[],v=r.debugCallback,S=h.a,w=h.b,T=h.c,C=h.d,M=h.e,E=h.f,P=r.viewPosition.z,A=r.hideCCW,D=a.roundPixels,W=a.alpha*r.alpha,V=0,K=0;K<l;K++){var X=s[K];X.isInView(a,A,P,W,S,w,T,C,M,E,D)&&(i.shouldFlush(3)&&(i.flush(),d=i.setGameObject(r),p=i.vertexCount*i.currentShader.vertexComponentCount-1),p=X.load(c,u,p,d,g),V++,i.vertexCount+=3,i.currentBatch.count=i.vertexCount-i.currentBatch.start,v&&y.push(X))}r.totalFrame+=V,v&&v.call(r,r,y),n.pipelines.postBatch(r)}};f.exports=m}),28103:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(95643),r=e(78023),a=e(39318),t=new o({Extends:n,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,r],initialize:function(l,i,h,d,c,u,p,g,y,v,S){n.call(this,l,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var w=l.textures.getFrame(d,c);this.is3Slice=!v&&!S,w&&w.scale9&&(this.is3Slice=w.is3Slice);for(var T=this.is3Slice?18:54,C=0;C<T;C++)this.vertices.push(new a);this.setPosition(i,h),this.setTexture(d,c),this.setSlices(u,p,g,y,v,S,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(s,l,i,h,d,c,u){i===void 0&&(i=10),h===void 0&&(h=10),d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=!1);var p=this.frame,g=!1;if(this.is3Slice&&u&&d!==0&&c!==0&&(g=!0),g)console.warn("Cannot change 9 slice to 3 slice");else{if(p&&p.scale9&&!u){var y=p.data.scale9Borders,v=y.x,S=y.y;i=v,h=p.width-y.w-v,d=S,c=p.height-y.h-S,s===void 0&&(s=p.width),l===void 0&&(l=p.height)}else s===void 0&&(s=256),l===void 0&&(l=256);this._width=s,this._height=l,this.leftWidth=i,this.rightWidth=h,this.topHeight=d,this.bottomHeight=c,this.is3Slice&&(l=p.height,this._height=l,this.topHeight=l,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var s=this.leftWidth,l=this.rightWidth,i=this.topHeight,h=this.bottomHeight,d=this.frame.width,c=this.frame.height;this.updateQuadUVs(0,0,0,s/d,i/c),this.updateQuadUVs(6,s/d,0,1-l/d,i/c),this.updateQuadUVs(12,1-l/d,0,1,i/c),this.is3Slice||(this.updateQuadUVs(18,0,i/c,s/d,1-h/c),this.updateQuadUVs(24,s/d,i/c,1-l/d,1-h/c),this.updateQuadUVs(30,1-l/d,i/c,1,1-h/c),this.updateQuadUVs(36,0,1-h/c,s/d,1),this.updateQuadUVs(42,s/d,1-h/c,1-l/d,1),this.updateQuadUVs(48,1-l/d,1-h/c,1,1))},updateVertices:function(){var s=this.leftWidth,l=this.rightWidth,i=this.topHeight,h=this.bottomHeight,d=this.width,c=this.height;this.updateQuad(0,-.5,.5,-.5+s/d,.5-i/c),this.updateQuad(6,-.5+s/d,.5,.5-l/d,.5-i/c),this.updateQuad(12,.5-l/d,.5,.5,.5-i/c),this.is3Slice||(this.updateQuad(18,-.5,.5-i/c,-.5+s/d,-.5+h/c),this.updateQuad(24,-.5+s/d,.5-i/c,.5-l/d,-.5+h/c),this.updateQuad(30,.5-l/d,.5-i/c,.5,-.5+h/c),this.updateQuad(36,-.5,-.5+h/c,-.5+s/d,-.5),this.updateQuad(42,-.5+s/d,-.5+h/c,.5-l/d,-.5),this.updateQuad(48,.5-l/d,-.5+h/c,.5,-.5))},updateQuad:function(s,l,i,h,d){var c=this.width,u=this.height,p=this.originX,g=this.originY,y=this.vertices;y[s+0].resize(l,i,c,u,p,g),y[s+1].resize(l,d,c,u,p,g),y[s+2].resize(h,i,c,u,p,g),y[s+3].resize(l,d,c,u,p,g),y[s+4].resize(h,d,c,u,p,g),y[s+5].resize(h,i,c,u,p,g)},updateQuadUVs:function(s,l,i,h,d){var c=this.vertices,u=this.frame,p=u.u0,g=u.v0,y=u.u1,v=u.v1;if(p!==0||y!==1){var S=y-p;l=p+l*S,h=p+h*S}if(g!==0||v!==1){var w=v-g;i=g+i*w,d=g+d*w}c[s+0].setUVs(l,i),c[s+1].setUVs(l,d),c[s+2].setUVs(h,i),c[s+3].setUVs(l,d),c[s+4].setUVs(h,d),c[s+5].setUVs(h,i)},clearTint:function(){return this.setTint(16777215),this},setTint:function(s){return s===void 0&&(s=16777215),this.tint=s,this.tintFill=!1,this},setTintFill:function(s){return this.setTint(s),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(s){this._width=Math.max(s,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(s){this.is3Slice||(this._height=Math.max(s,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,l){this.width=s,this.height=l,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},setDisplaySize:function(s,l){return this.displayWidth=s,this.displayHeight=l,this},originX:{get:function(){return this._originX},set:function(s){this._originX=s,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(s){this._originY=s,this.updateVertices()}},setOrigin:function(s,l){return s===void 0&&(s=.5),l===void 0&&(l=s),this._originX=s,this._originY=l,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var s=this.frame.height;this._height=s,this.topHeight=s,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});f.exports=t}),28279:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(35154),a=e(28103);m.register("nineslice",function(t,s){t===void 0&&(t={});var l=n(t,"key",null),i=n(t,"frame",null),h=r(t,"width",256),d=r(t,"height",256),c=r(t,"leftWidth",10),u=r(t,"rightWidth",10),p=r(t,"topHeight",0),g=r(t,"bottomHeight",0),y=new a(this.scene,0,0,l,i,h,d,c,u,p,g);return s!==void 0&&(t.add=s),o(this.scene,y,t),y})}),47521:((f,x,e)=>{var o=e(28103),m=e(39429);m.register("nineslice",function(n,r,a,t,s,l,i,h,d,c){return this.displayList.add(new o(this.scene,n,r,a,t,s,l,i,h,d,c))})}),78023:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(52230),f.exports={renderWebGL:m,renderCanvas:n}}),52230:((f,x,e)=>{var o=e(91296),m=e(70554),n=function(r,a,t,s){var l=a.vertices,i=l.length;if(i!==0){t.addToRenderList(a);var h=r.pipelines.set(a.pipeline,a),d=o(a,t,s,!1).calc;r.pipelines.preBatch(a);var c=h.setGameObject(a),u=h.vertexViewF32,p=h.vertexViewU32,g=h.vertexCount*h.currentShader.vertexComponentCount-1,y=t.roundPixels,v=a.tintFill,S=t.alpha*a.alpha,w=m.getTintAppendFloatAlpha(a.tint,S),T=h.vertexAvailable(),C=-1;T<i&&(C=T);for(var M=0;M<i;M++){var E=l[M];M===C&&(h.flush(),c=h.setGameObject(a),g=0),u[++g]=d.getXRound(E.vx,E.vy,y),u[++g]=d.getYRound(E.vx,E.vy,y),u[++g]=E.u,u[++g]=E.v,u[++g]=c,u[++g]=v,p[++g]=w,h.vertexCount++,h.currentBatch.count=h.vertexCount-h.currentBatch.start}r.pipelines.postBatch(a)}};f.exports=n}),76472:((f,x,e)=>{var o=e(83419),m=e(44777),n=e(37589),r=e(6113),a=e(91389),t=e(90664),s=new o({Extends:m,initialize:function(i){m.call(this,i,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var l=this.propertyValue,i=l,h=this.defaultEmit,d=this.defaultUpdate;if(this.method===9){this.start=l[0],this.ease=r("Linear"),this.interpolation=a("linear"),h=this.easedValueEmit,d=this.easeValueUpdate,i=l[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var c=0;c<l.length;c++){var u=t(l[c]);this.r.push(u.r),this.g.push(u.g),this.b.push(u.b)}}return this.onEmit=h,this.onUpdate=d,this.current=i,this},setEase:function(l){this.easeName=l,this.ease=r(l)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(l,i,h){var d=this.ease(h),c=this.interpolation(this.r,d),u=this.interpolation(this.g,d),p=this.interpolation(this.b,d),g=n(c,u,p);return this.current=g,g}});f.exports=s}),44777:((f,x,e)=>{var o=e(30976),m=e(45319),n=e(83419),r=e(99472),a=e(6113),t=e(95540),s=e(91389),l=e(77720),i=e(15994),h=new n({initialize:function(c,u,p){p===void 0&&(p=!1),this.propertyKey=c,this.propertyValue=u,this.defaultValue=u,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(d,c){d===void 0&&(d={}),c&&(this.propertyKey=c),this.propertyValue=t(d,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(d){var c;switch(this.method){case 1:case 3:case 8:c=d;break;case 2:this.propertyValue.indexOf(d)>=0&&(c=d);break;case 4:var u=(this.end-this.start)/this.steps;c=l(d,u),this.counter=c;break;case 5:case 6:case 7:c=m(d,this.start,this.end);break;case 9:c=this.start[0];break}return this.current=c,this},getMethod:function(){var d=this.propertyValue;if(d===null)return 0;var c=typeof d;if(c==="number")return 1;if(Array.isArray(d))return 2;if(c==="function")return 3;if(c==="object"){if(this.hasBoth(d,"start","end"))return this.has(d,"steps")?4:5;if(this.hasBoth(d,"min","max"))return 6;if(this.has(d,"random"))return 7;if(this.hasEither(d,"onEmit","onUpdate"))return 8;if(this.hasEither(d,"values","interpolation"))return 9}return 0},setMethods:function(){var d=this.propertyValue,c=d,u=this.defaultEmit,p=this.defaultUpdate;switch(this.method){case 1:u=this.staticValueEmit;break;case 2:u=this.randomStaticValueEmit,c=d[0];break;case 3:this._onEmit=d,u=this.proxyEmit,c=this.defaultValue;break;case 4:this.start=d.start,this.end=d.end,this.steps=d.steps,this.counter=this.start,this.yoyo=this.has(d,"yoyo")?d.yoyo:!1,this.direction=0,u=this.steppedEmit,c=this.start;break;case 5:this.start=d.start,this.end=d.end;var g=this.has(d,"ease")?d.ease:"Linear";this.ease=a(g,d.easeParams),u=this.has(d,"random")&&d.random?this.randomRangedValueEmit:this.easedValueEmit,p=this.easeValueUpdate,c=this.start;break;case 6:this.start=d.min,this.end=d.max,u=this.has(d,"int")&&d.int?this.randomRangedIntEmit:this.randomRangedValueEmit,c=this.start;break;case 7:var y=d.random;Array.isArray(y)&&(this.start=y[0],this.end=y[1]),u=this.randomRangedIntEmit,c=this.start;break;case 8:this._onEmit=this.has(d,"onEmit")?d.onEmit:this.defaultEmit,this._onUpdate=this.has(d,"onUpdate")?d.onUpdate:this.defaultUpdate,u=this.proxyEmit,p=this.proxyUpdate,c=this.defaultValue;break;case 9:this.start=d.values;var v=this.has(d,"ease")?d.ease:"Linear";this.ease=a(v,d.easeParams),this.interpolation=s(d.interpolation),u=this.easedValueEmit,p=this.easeValueUpdate,c=this.start[0];break}return this.onEmit=u,this.onUpdate=p,this.current=c,this},has:function(d,c){return d.hasOwnProperty(c)},hasBoth:function(d,c,u){return d.hasOwnProperty(c)&&d.hasOwnProperty(u)},hasEither:function(d,c,u){return d.hasOwnProperty(c)||d.hasOwnProperty(u)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(d,c,u,p){return p},proxyEmit:function(d,c,u){var p=this._onEmit(d,c,u);return this.current=p,p},proxyUpdate:function(d,c,u,p){var g=this._onUpdate(d,c,u,p);return this.current=g,g},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var d=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[d],this.current},randomRangedValueEmit:function(d,c){var u=r(this.start,this.end);return d&&d.data[c]&&(d.data[c].min=u,d.data[c].max=this.end),this.current=u,u},randomRangedIntEmit:function(d,c){var u=o(this.start,this.end);return d&&d.data[c]&&(d.data[c].min=u,d.data[c].max=this.end),this.current=u,u},steppedEmit:function(){var d=this.counter,c=d,u=(this.end-this.start)/this.steps;if(this.yoyo){var p;this.direction===0?(c+=u,c>=this.end&&(p=c-this.end,c=this.end-p,this.direction=1)):(c-=u,c<=this.start&&(p=this.start-c,c=this.start+p,this.direction=0)),this.counter=c}else this.counter=i(c+u,this.start,this.end);return this.current=d,d},easedValueEmit:function(d,c){if(d&&d.data[c]){var u=d.data[c];u.min=this.start,u.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(d,c,u){var p=d.data[c],g,y=this.ease(u);return this.interpolation?g=this.interpolation(this.start,y):g=(p.max-p.min)*y+p.min,this.current=g,g},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});f.exports=h}),24502:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(20286),r=new o({Extends:n,initialize:function(t,s,l,i,h){if(typeof t=="object"){var d=t;t=m(d,"x",0),s=m(d,"y",0),l=m(d,"power",0),i=m(d,"epsilon",100),h=m(d,"gravity",50)}else t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=100),h===void 0&&(h=50);n.call(this,t,s,!0),this._gravity=h,this._power=l*h,this._epsilon=i*i},update:function(a,t){var s=this.x-a.x,l=this.y-a.y,i=s*s+l*l;if(i!==0){var h=Math.sqrt(i);i<this._epsilon&&(i=this._epsilon);var d=this._power*t/(i*h)*100;a.velocityX+=s*d,a.velocityY+=l*d}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var t=this.power;this._gravity=a,this.power=t}}});f.exports=r}),56480:((f,x,e)=>{var o=e(9674),m=e(45319),n=e(83419),r=e(39506),a=e(87841),t=e(11520),s=e(26099),l=new n({initialize:function(h){this.emitter=h,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new s,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=h.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new o(this)),this.bounds=new a},emit:function(i,h,d,c,u,p){return this.emitter.emit(i,h,d,c,u,p)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(i,h){i===void 0&&(i=0),h===void 0&&(h=0),this.x=i,this.y=h},fire:function(i,h){var d=this.emitter,c=d.ops,u=d.getAnim();if(u?this.anims.play(u):(this.frame=d.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(d.getEmitZone(this),i===void 0?this.x+=c.x.onEmit(this,"x"):c.x.steps>0?this.x+=i+c.x.onEmit(this,"x"):this.x+=i,h===void 0?this.y+=c.y.onEmit(this,"y"):c.y.steps>0?this.y+=h+c.y.onEmit(this,"y"):this.y+=h,this.life=c.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=c.delay.onEmit(this,"delay"),this.holdCurrent=c.hold.onEmit(this,"hold"),this.scaleX=c.scaleX.onEmit(this,"scaleX"),this.scaleY=c.scaleY.active?c.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=c.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),d.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&d.getDeathZone(this))return this.lifeCurrent=0,!1;var p=c.speedX.onEmit(this,"speedX"),g=c.speedY.active?c.speedY.onEmit(this,"speedY"):p;if(d.radial){var y=r(c.angle.onEmit(this,"angle"));this.velocityX=Math.cos(y)*Math.abs(p),this.velocityY=Math.sin(y)*Math.abs(g)}else if(d.moveTo){var v=c.moveToX.onEmit(this,"moveToX"),S=c.moveToY.onEmit(this,"moveToY"),w=this.life/1e3;this.velocityX=(v-this.x)/w,this.velocityY=(S-this.y)/w}else this.velocityX=p,this.velocityY=g;return d.acceleration&&(this.accelerationX=c.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=c.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=c.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=c.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=c.bounce.onEmit(this,"bounce"),this.alpha=c.alpha.onEmit(this,"alpha"),c.color.active?this.tint=c.color.onEmit(this,"tint"):this.tint=c.tint.onEmit(this,"tint"),!0},update:function(i,h,d){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=i,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=i,!1;this.anims&&this.anims.update(0,i);var c=this.emitter,u=c.ops,p=1-this.lifeCurrent/this.life;if(this.lifeT=p,this.x=u.x.onUpdate(this,"x",p,this.x),this.y=u.y.onUpdate(this,"y",p,this.y),c.moveTo){var g=u.moveToX.onUpdate(this,"moveToX",p,c.moveToX),y=u.moveToY.onUpdate(this,"moveToY",p,c.moveToY),v=this.lifeCurrent/1e3;this.velocityX=(g-this.x)/v,this.velocityY=(y-this.y)/v}return this.computeVelocity(c,i,h,d,p),this.scaleX=u.scaleX.onUpdate(this,"scaleX",p,this.scaleX),u.scaleY.active?this.scaleY=u.scaleY.onUpdate(this,"scaleY",p,this.scaleY):this.scaleY=this.scaleX,this.angle=u.rotate.onUpdate(this,"rotate",p,this.angle),this.rotation=r(this.angle),c.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=m(u.alpha.onUpdate(this,"alpha",p,this.alpha),0,1),u.color.active?this.tint=u.color.onUpdate(this,"color",p,this.tint):this.tint=u.tint.onUpdate(this,"tint",p,this.tint),this.lifeCurrent-=i,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(i,h,d,c,u){var p=i.ops,g=this.velocityX,y=this.velocityY,v=p.accelerationX.onUpdate(this,"accelerationX",u,this.accelerationX),S=p.accelerationY.onUpdate(this,"accelerationY",u,this.accelerationY),w=p.maxVelocityX.onUpdate(this,"maxVelocityX",u,this.maxVelocityX),T=p.maxVelocityY.onUpdate(this,"maxVelocityY",u,this.maxVelocityY);this.bounce=p.bounce.onUpdate(this,"bounce",u,this.bounce),g+=i.gravityX*d+v*d,y+=i.gravityY*d+S*d,g=m(g,-w,w),y=m(y,-T,T),this.velocityX=g,this.velocityY=y,this.x+=g*d,this.y+=y*d,i.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var C=0;C<c.length;C++){var M=c[C];M.active&&M.update(this,h,d,u)}},setSizeToFrame:function(){},getBounds:function(i){i===void 0&&(i=this.emitter.getWorldTransformMatrix());var h=Math.abs(i.scaleX)*this.scaleX,d=Math.abs(i.scaleY)*this.scaleY,c=this.x,u=this.y,p=this.rotation,g=this.frame.width*h/2,y=this.frame.height*d/2,v=this.bounds,S=new s(c-g,u-y),w=new s(c+g,u-y),T=new s(c-g,u+y),C=new s(c+g,u+y);return p!==0&&(t(S,c,u,p),t(w,c,u,p),t(T,c,u,p),t(C,c,u,p)),i.transformPoint(S.x,S.y,S),i.transformPoint(w.x,w.y,w),i.transformPoint(T.x,T.y,T),i.transformPoint(C.x,C.y,C),v.x=Math.min(S.x,w.x,T.x,C.x),v.y=Math.min(S.y,w.y,T.y,C.y),v.width=Math.max(S.x,w.x,T.x,C.x)-v.x,v.height=Math.max(S.y,w.y,T.y,C.y)-v.y,v},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});f.exports=l}),69601:((f,x,e)=>{var o=e(83419),m=e(20286),n=e(87841),r=new o({Extends:m,initialize:function(t,s,l,i,h,d,c,u){h===void 0&&(h=!0),d===void 0&&(d=!0),c===void 0&&(c=!0),u===void 0&&(u=!0),m.call(this,t,s,!0),this.bounds=new n(t,s,l,i),this.collideLeft=h,this.collideRight=d,this.collideTop=c,this.collideBottom=u},update:function(a){var t=this.bounds,s=-a.bounce,l=a.worldPosition;l.x<t.x&&this.collideLeft?(a.x+=t.x-l.x,a.velocityX*=s):l.x>t.right&&this.collideRight&&(a.x-=l.x-t.right,a.velocityX*=s),l.y<t.y&&this.collideTop?(a.y+=t.y-l.y,a.velocityY*=s):l.y>t.bottom&&this.collideBottom&&(a.y-=l.y-t.bottom,a.velocityY*=s)}});f.exports=r}),31600:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(53774),r=e(43459),a=e(26388),t=e(19909),s=e(76472),l=e(44777),i=e(20696),h=e(95643),d=e(95540),c=e(26546),u=e(24502),p=e(69036),g=e(1985),y=e(97022),v=e(86091),S=e(73162),w=e(20074),T=e(269),C=e(56480),M=e(69601),E=e(68875),P=e(87841),A=e(59996),D=e(72905),W=e(90668),V=e(19186),K=e(61340),X=e(26099),R=e(15994),H=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],L=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],N=new o({Extends:h,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,W],initialize:function(U,Y,$,Z,Q){h.call(this,U,"ParticleEmitter"),this.particleClass=C,this.config=null,this.ops={accelerationX:new l("accelerationX",0),accelerationY:new l("accelerationY",0),alpha:new l("alpha",1),angle:new l("angle",{min:0,max:360},!0),bounce:new l("bounce",0),color:new s("color"),delay:new l("delay",0,!0),hold:new l("hold",0,!0),lifespan:new l("lifespan",1e3,!0),maxVelocityX:new l("maxVelocityX",1e4),maxVelocityY:new l("maxVelocityY",1e4),moveToX:new l("moveToX",0),moveToY:new l("moveToY",0),quantity:new l("quantity",1,!0),rotate:new l("rotate",0),scaleX:new l("scaleX",1),scaleY:new l("scaleY",1),speedX:new l("speedX",0,!0),speedY:new l("speedY",0,!0),tint:new l("tint",16777215),x:new l("x",0),y:new l("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new X,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new K,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new S(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(Y,$),this.setTexture(Z),Q&&this.setConfig(Q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(z){if(!z)return this;this.config=z;var U=0,Y="",$=this.ops;for(U=0;U<L.length;U++)Y=L[U],$[Y].loadConfig(z);for(U=0;U<H.length;U++)Y=H[U],y(z,Y)&&(this[Y]=d(z,Y));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=p(z,["moveToX","moveToY"]),y(z,"speed")&&($.speedX.loadConfig(z,"speed"),$.speedY.active=!1),(g(z,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),y(z,"scale")&&($.scaleX.loadConfig(z,"scale"),$.scaleY.active=!1),y(z,"callbackScope")){var Z=d(z,"callbackScope",null);this.emitCallbackScope=Z,this.deathCallbackScope=Z}if(y(z,"emitZone")&&this.addEmitZone(z.emitZone),y(z,"deathZone")&&this.addDeathZone(z.deathZone),y(z,"bounds")){var Q=this.addParticleBounds(z.bounds);Q.collideLeft=d(z,"collideLeft",!0),Q.collideRight=d(z,"collideRight",!0),Q.collideTop=d(z,"collideTop",!0),Q.collideBottom=d(z,"collideBottom",!0)}return y(z,"followOffset")&&this.followOffset.setFromObject(d(z,"followOffset",0)),y(z,"texture")&&this.setTexture(z.texture),y(z,"frame")?this.setEmitterFrame(z.frame):y(z,"anim")&&this.setAnim(z.anim),y(z,"reserve")&&this.reserve(z.reserve),y(z,"advance")&&this.fastForward(z.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(i.START,this),this},updateConfig:function(z){return z&&(this.config?this.setConfig(T(this.config,z)):this.setConfig(z)),this},toJSON:function(){var z=n(this),U=0,Y="";for(U=0;U<H.length;U++)Y=H[U],z[Y]=this[Y];var $=this.ops;for(U=0;U<L.length;U++)Y=L[U],$[Y]&&(z[Y]=$[Y].toJSON());return $.speedY.active||(delete z.speedX,z.speed=$.speedX.toJSON()),this.scaleX===this.scaleY&&(delete z.scaleX,delete z.scaleY,z.scale=$.scaleX.toJSON()),z},resetCounters:function(z,U){var Y=this.counters;Y.fill(0),Y[0]=z,U&&(Y[5]=1)},startFollow:function(z,U,Y,$){return U===void 0&&(U=0),Y===void 0&&(Y=0),$===void 0&&($=!1),this.follow=z,this.followOffset.set(U,Y),this.trackVisible=$,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var z=this.frames,U=z.length,Y;return U===1?Y=z[0]:this.randomFrame?Y=c(z):(Y=z[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===U&&(this.currentFrame=0))),this.texture.get(Y)},setEmitterFrame:function(z,U,Y){U===void 0&&(U=!0),Y===void 0&&(Y=1),this.randomFrame=U,this.frameQuantity=Y,this.currentFrame=0;var $=typeof z;if(this.frames.length=0,Array.isArray(z))this.frames=this.frames.concat(z);else if($==="string"||$==="number")this.frames.push(z);else if($==="object"){var Z=z;z=d(Z,"frames",null),z&&(this.frames=this.frames.concat(z));var Q=d(Z,"cycle",!1);this.randomFrame=!Q,this.frameQuantity=d(Z,"quantity",Y)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var z=this.anims,U=z.length;if(U===0)return null;if(U===1)return z[0];if(this.randomAnim)return c(z);var Y=z[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=R(this.currentAnim+1,0,U)),Y},setAnim:function(z,U,Y){U===void 0&&(U=!0),Y===void 0&&(Y=1),this.randomAnim=U,this.animQuantity=Y,this.currentAnim=0;var $=typeof z;if(this.anims.length=0,Array.isArray(z))this.anims=this.anims.concat(z);else if($==="string")this.anims.push(z);else if($==="object"){var Z=z;z=d(Z,"anims",null),z&&(this.anims=this.anims.concat(z));var Q=d(Z,"cycle",!1);this.randomAnim=!Q,this.animQuantity=d(Z,"quantity",Y)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(z){return z===void 0&&(z=!0),this.radial=z,this},addParticleBounds:function(z,U,Y,$,Z,Q,q,j){if(typeof z=="object"){var _=z;z=_.x,U=_.y,Y=y(_,"w")?_.w:_.width,$=y(_,"h")?_.h:_.height}return this.addParticleProcessor(new M(z,U,Y,$,Z,Q,q,j))},setParticleSpeed:function(z,U){return U===void 0&&(U=z),this.ops.speedX.onChange(z),z===U?this.ops.speedY.active=!1:this.ops.speedY.onChange(U),this.radial=!0,this},setParticleScale:function(z,U){return z===void 0&&(z=1),U===void 0&&(U=z),this.ops.scaleX.onChange(z),this.ops.scaleY.onChange(U),this},setParticleGravity:function(z,U){return this.gravityX=z,this.gravityY=U,this},setParticleAlpha:function(z){return this.ops.alpha.onChange(z),this},setParticleTint:function(z){return this.ops.tint.onChange(z),this},setEmitterAngle:function(z){return this.ops.angle.onChange(z),this},setParticleLifespan:function(z){return this.ops.lifespan.onChange(z),this},setQuantity:function(z){return this.quantity=z,this},setFrequency:function(z,U){return this.frequency=z,this.flowCounter=z>0?z:0,U&&(this.quantity=U),this},addDeathZone:function(z){Array.isArray(z)||(z=[z]);for(var U,Y=[],$=0;$<z.length;$++)if(U=z[$],U instanceof a)Y.push(U);else if(typeof U.contains=="function")U=new a(U,!0),Y.push(U);else{var Z=d(U,"type","onEnter"),Q=d(U,"source",null);if(Q&&typeof Q.contains=="function"){var q=Z==="onEnter";U=new a(Q,q),Y.push(U)}}return this.deathZones=this.deathZones.concat(Y),Y},removeDeathZone:function(z){return D(this.deathZones,z),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(z){Array.isArray(z)||(z=[z]);for(var U,Y=[],$=0;$<z.length;$++)if(U=z[$],U instanceof E||U instanceof t)Y.push(U);else{var Z=d(U,"source",null);if(Z){var Q=d(U,"type","random");if(Q==="random"&&typeof Z.getRandomPoint=="function")U=new E(Z),Y.push(U);else if(Q==="edge"&&typeof Z.getPoints=="function"){var q=d(U,"quantity",1),j=d(U,"stepRate",0),_=d(U,"yoyo",!1),te=d(U,"seamless",!0),se=d(U,"total",-1);U=new t(Z,q,j,_,te,se),Y.push(U)}}}return this.emitZones=this.emitZones.concat(Y),Y},removeEmitZone:function(z){return D(this.emitZones,z),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(z){var U=this.emitZones,Y=U.length;if(Y!==0){var $=U[this.zoneIndex];$.getPoint(z),$.total>-1&&(this.zoneTotal++,this.zoneTotal===$.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===Y&&(this.zoneIndex=0)))}},getDeathZone:function(z){for(var U=this.deathZones,Y=0;Y<U.length;Y++){var $=U[Y];if($.willKill(z))return this.emit(i.DEATH_ZONE,this,z,$),!0}return!1},setEmitZone:function(z){var U;return isFinite(z)?U=z:U=this.emitZones.indexOf(z),U>=0&&(this.zoneIndex=U),this},addParticleProcessor:function(z){return this.processors.exists(z)||(z.emitter&&z.emitter.removeParticleProcessor(z),this.processors.add(z),z.emitter=this),z},removeParticleProcessor:function(z){return this.processors.exists(z)&&(this.processors.remove(z,!0),z.emitter=null),z},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(z){return this.addParticleProcessor(new u(z))},reserve:function(z){var U=this.dead;if(this.maxParticles>0){var Y=this.getParticleCount();Y+z>this.maxParticles&&(z=this.maxParticles-(Y+z))}for(var $=0;$<z;$++)U.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(z,U){return z===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof z=="function"&&(this.emitCallback=z,U&&(this.emitCallbackScope=U)),this},onParticleDeath:function(z,U){return z===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof z=="function"&&(this.deathCallback=z,U&&(this.deathCallbackScope=U)),this},killAll:function(){for(var z=this.dead,U=this.alive;U.length>0;)z.push(U.pop());return this},forEachAlive:function(z,U){for(var Y=this.alive,$=Y.length,Z=0;Z<$;Z++)z.call(U,Y[Z],this);return this},forEachDead:function(z,U){for(var Y=this.dead,$=Y.length,Z=0;Z<$;Z++)z.call(U,Y[Z],this);return this},start:function(z,U){return z===void 0&&(z=0),this.emitting||(z>0&&this.fastForward(z),this.emitting=!0,this.resetCounters(this.frequency,!0),U!==void 0&&(this.duration=Math.abs(U)),this.emit(i.START,this)),this},stop:function(z){return z===void 0&&(z=!1),this.emitting&&(this.emitting=!1,z&&this.killAll(),this.emit(i.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(z,U){return z===void 0&&(z=""),U===void 0&&(U=this.true),this.sortProperty=z,this.sortOrderAsc=U,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(z){return this.sortProperty!==""?z=this.depthSortCallback:z=null,this.sortCallback=z,this},depthSort:function(){return V(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(z,U){var Y=this.sortProperty;return this.sortOrderAsc?z[Y]-U[Y]:U[Y]-z[Y]},flow:function(z,U,Y){return U===void 0&&(U=1),this.emitting=!1,this.frequency=z,this.quantity=U,Y!==void 0&&(this.stopAfter=Y),this.start()},explode:function(z,U,Y){this.frequency=-1,this.resetCounters(-1,!0);var $=this.emitParticle(z,U,Y);return this.emit(i.EXPLODE,this,$),$},emitParticleAt:function(z,U,Y){return this.emitParticle(Y,z,U)},emitParticle:function(z,U,Y){if(!this.atLimit()){z===void 0&&(z=this.ops.quantity.onEmit());for(var $=this.dead,Z=this.stopAfter,Q=this.follow?this.follow.x+this.followOffset.x:U,q=this.follow?this.follow.y+this.followOffset.y:Y,j=0;j<z;j++){var _=$.pop();if(_||(_=new this.particleClass(this)),_.fire(Q,q)?(this.particleBringToTop?this.alive.push(_):this.alive.unshift(_),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,_,this)):this.dead.push(_),Z>0&&(this.stopCounter++,this.stopCounter>=Z)||this.atLimit())break}return _}},fastForward:function(z,U){U===void 0&&(U=1e3/60);var Y=0;for(this.skipping=!0;Y<Math.abs(z);)this.preUpdate(0,U),Y+=U;return this.skipping=!1,this},preUpdate:function(z,U){U*=this.timeScale;var Y=U/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var $=this.getProcessors(),Z=this.alive,Q=this.dead,q=0,j=[],_=Z.length;for(q=0;q<_;q++){var te=Z[q];te.update(U,Y,$)&&j.push({index:q,particle:te})}if(_=j.length,_>0){var se=this.deathCallback,ie=this.deathCallbackScope;for(q=_-1;q>=0;q--){var ne=j[q];Z.splice(ne.index,1),Q.push(ne.particle),se&&se.call(ie,ne.particle),ne.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Z.length===0&&(this.completeFlag=0,this.emit(i.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=U;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=U,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(z){for(var U=this.getWorldTransformMatrix(),Y=this.alive,$=Y.length,Z=[],Q=0;Q<$;Q++){var q=Y[Q];A(z,q.getBounds(U))&&Z.push(q)}return Z},getBounds:function(z,U,Y,$){z===void 0&&(z=0),U===void 0&&(U=0),Y===void 0&&(Y=1e3/60),$===void 0&&($=new P);var Z=this.getWorldTransformMatrix(),Q,q,j=this.alive,_=!1;if($.setTo(0,0,0,0),U>0){var te=0;for(this.skipping=!0;te<Math.abs(U);){for(this.preUpdate(0,Y),Q=0;Q<j.length;Q++)q=j[Q].getBounds(Z),_?w($,q):(_=!0,r(q,$));te+=Y}this.skipping=!1}else for(Q=0;Q<j.length;Q++)q=j[Q].getBounds(Z),_?w($,q):(_=!0,r(q,$));return z>0&&v($,z,z),$},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(z){this.ops.x.onChange(z)}},particleY:{get:function(){return this.ops.y.current},set:function(z){this.ops.y.onChange(z)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(z){this.ops.accelerationX.onChange(z)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(z){this.ops.accelerationY.onChange(z)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(z){this.ops.maxVelocityX.onChange(z)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(z){this.ops.maxVelocityY.onChange(z)}},speed:{get:function(){return this.ops.speedX.current},set:function(z){this.ops.speedX.onChange(z),this.ops.speedY.onChange(z)}},speedX:{get:function(){return this.ops.speedX.current},set:function(z){this.ops.speedX.onChange(z)}},speedY:{get:function(){return this.ops.speedY.current},set:function(z){this.ops.speedY.onChange(z)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(z){this.ops.moveToX.onChange(z)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(z){this.ops.moveToY.onChange(z)}},bounce:{get:function(){return this.ops.bounce.current},set:function(z){this.ops.bounce.onChange(z)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(z){this.ops.scaleX.onChange(z)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(z){this.ops.scaleY.onChange(z)}},particleColor:{get:function(){return this.ops.color.current},set:function(z){this.ops.color.onChange(z)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(z){this.ops.color.setEase(z)}},particleTint:{get:function(){return this.ops.tint.current},set:function(z){this.ops.tint.onChange(z)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(z){this.ops.alpha.onChange(z)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(z){this.ops.lifespan.onChange(z)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(z){this.ops.angle.onChange(z)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(z){this.ops.rotate.onChange(z)}},quantity:{get:function(){return this.ops.quantity.current},set:function(z){this.ops.quantity.onChange(z)}},delay:{get:function(){return this.ops.delay.current},set:function(z){this.ops.delay.onChange(z)}},hold:{get:function(){return this.ops.hold.current},set:function(z){this.ops.hold.onChange(z)}},flowCounter:{get:function(){return this.counters[0]},set:function(z){this.counters[0]=z}},frameCounter:{get:function(){return this.counters[1]},set:function(z){this.counters[1]=z}},animCounter:{get:function(){return this.counters[2]},set:function(z){this.counters[2]=z}},elapsed:{get:function(){return this.counters[3]},set:function(z){this.counters[3]=z}},stopCounter:{get:function(){return this.counters[4]},set:function(z){this.counters[4]=z}},completeFlag:{get:function(){return this.counters[5]},set:function(z){this.counters[5]=z}},zoneIndex:{get:function(){return this.counters[6]},set:function(z){this.counters[6]=z}},zoneTotal:{get:function(){return this.counters[7]},set:function(z){this.counters[7]=z}},currentFrame:{get:function(){return this.counters[8]},set:function(z){this.counters[8]=z}},currentAnim:{get:function(){return this.counters[9]},set:function(z){this.counters[9]=z}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var z,U=this.ops;for(z=0;z<L.length;z++){var Y=L[z];U[Y].destroy()}for(z=0;z<this.alive.length;z++)this.alive[z].destroy();for(z=0;z<this.dead.length;z++)this.dead[z].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});f.exports=N}),9871:((f,x,e)=>{var o=e(59996),m=e(61340),n=new m,r=new m,a=new m,t=new m,s=function(l,i,h,d){var c=n,u=r,p=a,g=t;d?(g.loadIdentity(),g.multiply(d),g.translate(i.x,i.y),g.rotate(i.rotation),g.scale(i.scaleX,i.scaleY)):g.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var y=l.currentContext,v=h.roundPixels,S=h.alpha,w=i.alpha,T=i.alive,C=T.length,M=i.viewBounds;if(!(!i.visible||C===0||M&&!o(M,h.worldView))){i.sortCallback&&i.depthSort(),h.addToRenderList(i);var E=i.scrollFactorX,P=i.scrollFactorY;y.save(),y.globalCompositeOperation=l.blendModes[i.blendMode];for(var A=0;A<C;A++){var D=T[A],W=D.alpha*w*S;if(!(W<=0||D.scaleX===0||D.scaleY===0)){p.applyITRS(D.x,D.y,D.rotation,D.scaleX,D.scaleY),c.copyFrom(h.matrix),c.multiplyWithOffset(g,-h.scrollX*E,-h.scrollY*P),p.e=D.x,p.f=D.y,c.multiply(p,u);var V=D.frame,K=V.canvasData;if(K.width>0&&K.height>0){var X=-V.halfWidth,R=-V.halfHeight;y.globalAlpha=W,y.save(),u.setToContext(y),v&&(X=Math.round(X),R=Math.round(R)),y.imageSmoothingEnabled=!V.source.scaleMode,y.drawImage(V.source.image,K.x,K.y,K.width,K.height,X,R,K.width,K.height),y.restore()}}}y.restore()}};f.exports=s}),92730:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(95540),a=e(31600);m.register("particles",function(t,s){t===void 0&&(t={});var l=n(t,"key",null),i=r(t,"config",null),h=new a(this.scene,0,0,l);return s!==void 0&&(t.add=s),o(this.scene,h,t),i&&h.setConfig(i),h})}),676:((f,x,e)=>{var o=e(39429),m=e(31600);o.register("particles",function(n,r,a,t){return n!==void 0&&typeof n=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new m(this.scene,n,r,a,t))})}),90668:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(21188),n=e(9871),f.exports={renderWebGL:m,renderCanvas:n}}),21188:((f,x,e)=>{var o=e(59996),m=e(61340),n=e(70554),r=new m,a=new m,t=new m,s=new m,l=function(i,h,d,c){var u=i.pipelines.set(h.pipeline),p=r,g=a,y=t,v=s;c?(v.loadIdentity(),v.multiply(c),v.translate(h.x,h.y),v.rotate(h.rotation),v.scale(h.scaleX,h.scaleY)):v.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var S=n.getTintAppendFloatAlpha,w=d.alpha,T=h.alpha;i.pipelines.preBatch(h);var C=h.alive,M=C.length,E=h.viewBounds;if(!(M===0||E&&!o(E,d.worldView))){h.sortCallback&&h.depthSort(),d.addToRenderList(h),p.copyFrom(d.matrix),p.multiplyWithOffset(v,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),i.setBlendMode(h.blendMode),h.mask&&(h.mask.preRenderWebGL(i,h,d),i.pipelines.set(h.pipeline));for(var P=h.tintFill,A,D,W=0;W<M;W++){var V=C[W],K=V.alpha*T*w;if(!(K<=0||V.scaleX===0||V.scaleY===0)){y.applyITRS(V.x,V.y,V.rotation,V.scaleX,V.scaleY),y.e=V.x,y.f=V.y,p.multiply(y,g);var X=V.frame;X.glTexture!==D&&(D=X.glTexture,A=u.setGameObject(h,X));var R=-X.halfWidth,H=-X.halfHeight,L=g.setQuad(R,H,R+X.width,H+X.height),N=S(V.tint,K);u.shouldFlush(6)&&(u.flush(),A=u.setGameObject(h,X)),u.batchQuad(h,L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],X.u0,X.v0,X.u1,X.v1,N,N,N,N,P,D,A)}}h.mask&&h.mask.postRenderWebGL(i,d),i.pipelines.postBatch(h)}};f.exports=l}),20286:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t){r===void 0&&(r=0),a===void 0&&(a=0),t===void 0&&(t=!0),this.emitter,this.x=r,this.y=a,this.active=t},update:function(){},destroy:function(){this.emitter=null}});f.exports=m}),9774:(f=>{f.exports="complete"}),812:(f=>{f.exports="deathzone"}),30522:(f=>{f.exports="explode"}),96695:(f=>{f.exports="start"}),18677:(f=>{f.exports="stop"}),20696:((f,x,e)=>{f.exports={COMPLETE:e(9774),DEATH_ZONE:e(812),EXPLODE:e(30522),START:e(96695),STOP:e(18677)}}),18404:((f,x,e)=>{f.exports={EmitterColorOp:e(76472),EmitterOp:e(44777),Events:e(20696),GravityWell:e(24502),Particle:e(56480),ParticleBounds:e(69601),ParticleEmitter:e(31600),ParticleProcessor:e(20286),Zones:e(21024)}}),26388:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a){this.source=r,this.killOnEnter=a},willKill:function(n){var r=n.worldPosition,a=this.source.contains(r.x,r.y);return a&&this.killOnEnter||!a&&!this.killOnEnter}});f.exports=m}),19909:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t,s,l,i){s===void 0&&(s=!1),l===void 0&&(l=!0),i===void 0&&(i=-1),this.source=r,this.points=[],this.quantity=a,this.stepRate=t,this.yoyo=s,this.counter=-1,this.seamless=l,this._length=0,this._direction=0,this.total=i,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var n=this.points[0],r=this.points[this.points.length-1];n.x===r.x&&n.y===r.y&&this.points.pop()}var a=this._length;return this._length=this.points.length,this._length<a&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var r=this.points[this.counter];r&&(n.x=r.x,n.y=r.y)}});f.exports=m}),68875:((f,x,e)=>{var o=e(83419),m=e(26099),n=new o({initialize:function(a){this.source=a,this._tempVec=new m,this.total=-1},getPoint:function(r){var a=this._tempVec;this.source.getRandomPoint(a),r.x=a.x,r.y=a.y}});f.exports=n}),21024:((f,x,e)=>{f.exports={DeathZone:e(26388),EdgeZone:e(19909),RandomZone:e(68875)}}),1159:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(68287),r=new o({Extends:n,Mixins:[m.PathFollower],initialize:function(t,s,l,i,h,d){n.call(this,t,l,i,h,d),this.path=s},preUpdate:function(a,t){this.anims.update(a,t),this.pathUpdate(a)}});f.exports=r}),90145:((f,x,e)=>{var o=e(39429),m=e(1159);o.register("follower",function(n,r,a,t,s){var l=new m(this.scene,n,r,a,t,s);return this.displayList.add(l),this.updateList.add(l),l})}),33663:((f,x,e)=>{var o=e(9674),m=e(83419),n=e(48803),r=e(90664),a=e(4703),t=e(45650),s=new m({Extends:a,initialize:function(i,h,d,c,u,p,g,y){c||(c="__DEFAULT"),a.call(this,i,h,d,c,u),this.type="Plane",this.anims=new o(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(p,g,y),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(l,i,h){l===void 0&&(l=8),i===void 0&&(i=8),h===void 0&&(h=!1);var d=!1;return h&&(d=!0),this.gridWidth=l,this.gridHeight=i,this.isTiled=h,this.clear(),n({mesh:this,widthSegments:l,heightSegments:i,isOrtho:!1,tile:h,flipY:d}),this},setSizeToFrame:function(l){l===void 0&&(l=!0);var i=this.frame;if(this.setPerspective(this.width/i.width,this.height/i.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!l)return this;var h=this.gridWidth,d=this.gridHeight,c=this.vertices,u=i.u0,p=i.u1,g=i.v0,y=i.v1,v,S,w=0;if(this.isTiled)for(g=i.v1,y=i.v0,S=0;S<d;S++)for(v=0;v<h;v++)c[w++].setUVs(u,y),c[w++].setUVs(u,g),c[w++].setUVs(p,y),c[w++].setUVs(u,g),c[w++].setUVs(p,g),c[w++].setUVs(p,y);else{var T=h+1,C=d+1,M=p-u,E=y-g,P=[];for(S=0;S<C;S++)for(v=0;v<T;v++){var A=u+M*(v/h),D=g+E*(S/d);P.push(A,D)}for(S=0;S<d;S++)for(v=0;v<h;v++){var W=(v+T*S)*2,V=(v+T*(S+1))*2,K=(v+1+T*(S+1))*2,X=(v+1+T*S)*2;c[w++].setUVs(P[W],P[W+1]),c[w++].setUVs(P[V],P[V+1]),c[w++].setUVs(P[X],P[X+1]),c[w++].setUVs(P[V],P[V+1]),c[w++].setUVs(P[K],P[K+1]),c[w++].setUVs(P[X],P[X+1])}}return this},setViewHeight:function(l){l===void 0&&(l=this.frame.height);var i=this.fov*(Math.PI/180);this.viewPosition.z=this.height/l/Math.tan(i/2),this.dirtyCache[10]=1},createCheckerboard:function(l,i,h,d,c){l===void 0&&(l=16777215),i===void 0&&(i=255),h===void 0&&(h=255),d===void 0&&(d=255),c===void 0&&(c=128);for(var u=r(l),p=r(i),g=[],y=0;y<16;y++)for(var v=0;v<16;v++)y<8&&v<8||y>7&&v>7?g.push(u.r,u.g,u.b,h):g.push(p.r,p.g,p.b,d);var S=this.scene.sys.textures.addUint8Array(t(),new Uint8Array(g),16,16);return this.removeCheckerboard(),this.setTexture(S),this.setSizeToFrame(),this.setViewHeight(c),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(l,i){return this.anims.play(l,i)},playReverse:function(l,i){return this.anims.playReverse(l,i)},playAfterDelay:function(l,i){return this.anims.playAfterDelay(l,i)},playAfterRepeat:function(l,i){return this.anims.playAfterRepeat(l,i)},stop:function(){return this.anims.stop()},stopAfterDelay:function(l){return this.anims.stopAfterDelay(l)},stopAfterRepeat:function(l){return this.anims.stopAfterRepeat(l)},stopOnFrame:function(l){return this.anims.stopOnFrame(l)},preUpdate:function(l,i){a.prototype.preUpdate.call(this,l,i),this.anims.update(l,i)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});f.exports=s}),56015:((f,x,e)=>{var o=e(25305),m=e(13059),n=e(44603),r=e(23568),a=e(35154),t=e(33663);n.register("plane",function(s,l){s===void 0&&(s={});var i=r(s,"key",null),h=r(s,"frame",null),d=a(s,"width",8),c=a(s,"height",8),u=a(s,"tile",!1),p=new t(this.scene,0,0,i,h,d,c,u);l!==void 0&&(s.add=l);var g=a(s,"checkerboard",null);if(g){var y=a(g,"color1",16777215),v=a(g,"color2",255),S=a(g,"alpha1",255),w=a(g,"alpha2",255),T=a(g,"height",128);p.createCheckerboard(y,v,S,w,T)}return o(this.scene,p,s),m(p,s),p})}),30985:((f,x,e)=>{var o=e(33663),m=e(39429);m.register("plane",function(n,r,a,t,s,l,i){return this.displayList.add(new o(this.scene,n,r,a,t,s,l,i))})}),80321:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(95643),r=e(30100),a=e(36060),t=e(67277),s=new o({Extends:n,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible,t],initialize:function(i,h,d,c,u,p,g){c===void 0&&(c=16777215),u===void 0&&(u=128),p===void 0&&(p=1),g===void 0&&(g=.1),n.call(this,i,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(h,d),this.color=r(c),this.intensity=p,this.attenuation=g,this.width=u*2,this.height=u*2,this._radius=u},radius:{get:function(){return this._radius},set:function(l){this._radius=l,this.width=l*2,this.height=l*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});f.exports=s}),39829:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(80321);m.register("pointlight",function(a,t){a===void 0&&(a={});var s=n(a,"color",16777215),l=n(a,"radius",128),i=n(a,"intensity",1),h=n(a,"attenuation",.1),d=new r(this.scene,0,0,s,l,i,h);return t!==void 0&&(a.add=t),o(this.scene,d,a),d})}),71255:((f,x,e)=>{var o=e(39429),m=e(80321);o.register("pointlight",function(n,r,a,t,s,l){return this.displayList.add(new m(this.scene,n,r,a,t,s,l))})}),67277:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(57787),f.exports={renderWebGL:m,renderCanvas:n}}),57787:((f,x,e)=>{var o=e(91296),m=function(n,r,a,t){a.addToRenderList(r);var s=n.pipelines.set(r.pipeline),l=o(r,a,t).calc,i=r.width,h=r.height,d=-r._radius,c=-r._radius,u=d+i,p=c+h,g=l.getX(0,0),y=l.getY(0,0),v=l.getX(d,c),S=l.getY(d,c),w=l.getX(d,p),T=l.getY(d,p),C=l.getX(u,p),M=l.getY(u,p),E=l.getX(u,c),P=l.getY(u,c);n.pipelines.preBatch(r),s.batchPointLight(r,a,v,S,w,T,C,M,E,P,g,y),n.pipelines.postBatch(r)};f.exports=m}),591:((f,x,e)=>{var o=e(83419),m=e(81320),n=e(88571),r=new o({Extends:n,initialize:function(t,s,l,i,h,d){s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=32),h===void 0&&(h=32),d===void 0&&(d=!0);var c=new m(t.sys.textures,"",i,h,d);n.call(this,t,s,l,c),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(a,t){this.width=a,this.height=t,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=a,s.hitArea.height=t),this},resize:function(a,t,s){return this.texture.setSize(a,t,s),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(a){var t=this.texture;return t.key=a,t.manager.addDynamicTexture(t)&&(this._saved=!0),t},fill:function(a,t,s,l,i,h){return this.texture.fill(a,t,s,l,i,h),this},clear:function(){return this.texture.clear(),this},stamp:function(a,t,s,l,i){return this.texture.stamp(a,t,s,l,i),this},erase:function(a,t,s){return this.texture.erase(a,t,s),this},draw:function(a,t,s,l,i){return this.texture.draw(a,t,s,l,i),this},drawFrame:function(a,t,s,l,i,h){return this.texture.drawFrame(a,t,s,l,i,h),this},repeat:function(a,t,s,l,i,h,d,c,u){return this.texture.repeat(a,t,s,l,i,h,d,c,u),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(a,t,s,l,i){return this.texture.batchDraw(a,t,s,l,i),this},batchDrawFrame:function(a,t,s,l,i,h){return this.texture.batchDrawFrame(a,t,s,l,i,h),this},endDraw:function(a){return this.texture.endDraw(a),this},snapshotArea:function(a,t,s,l,i,h,d){return this.texture.snapshotArea(a,t,s,l,i,h,d),this},snapshot:function(a,t,s){return this.snapshotArea(0,0,this.width,this.height,a,t,s)},snapshotPixel:function(a,t,s){return this.snapshotArea(a,t,1,1,s,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});f.exports=r}),34495:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(591);m.register("renderTexture",function(a,t){a===void 0&&(a={});var s=n(a,"x",0),l=n(a,"y",0),i=n(a,"width",32),h=n(a,"height",32),d=new r(this.scene,s,l,i,h);return t!==void 0&&(a.add=t),o(this.scene,d,a),d})}),60505:((f,x,e)=>{var o=e(39429),m=e(591);o.register("renderTexture",function(n,r,a,t){return this.displayList.add(new m(this.scene,n,r,a,t))})}),77757:((f,x,e)=>{var o=e(9674),m=e(83419),n=e(31401),r=e(95643),a=e(36060),t=e(38745),s=e(26099),l=new m({Extends:r,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.PostPipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,t],initialize:function(h,d,c,u,p,g,y,v,S){u===void 0&&(u="__DEFAULT"),g===void 0&&(g=2),y===void 0&&(y=!0),r.call(this,h,"Rope"),this.anims=new o(this),this.points=g,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=u==="__DEFAULT",this.dirty=!1,this.horizontal=y,this._flipX=!1,this._flipY=!1,this._perp=new s,this.debugCallback=null,this.debugGraphic=null,this.setTexture(u,p),this.setPosition(d,c),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(g)&&this.resizeArrays(g.length),this.setPoints(g,v,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(i,h){var d=this.anims.currentFrame;this.anims.update(i,h),this.anims.currentFrame!==d&&(this.updateUVs(),this.updateVertices())},play:function(i,h,d){return this.anims.play(i,h,d),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(i,h,d){return i===void 0&&(i=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(i,h,d))},setVertical:function(i,h,d){return i===void 0&&(i=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(i,h,d)):this},setTintFill:function(i){return i===void 0&&(i=!1),this.tintFill=i,this},setAlphas:function(i,h){var d=this.points.length;if(d<1)return this;var c=this.alphas;i===void 0?i=[1]:!Array.isArray(i)&&h===void 0&&(i=[i]);var u,p=0;if(h!==void 0)for(u=0;u<d;u++)p=u*2,c[p]=i,c[p+1]=h;else if(i.length===d)for(u=0;u<d;u++)p=u*2,c[p]=i[u],c[p+1]=i[u];else{var g=i[0];for(u=0;u<d;u++)p=u*2,i.length>p&&(g=i[p]),c[p]=g,i.length>p+1&&(g=i[p+1]),c[p+1]=g}return this},setColors:function(i){var h=this.points.length;if(h<1)return this;var d=this.colors;i===void 0?i=[16777215]:Array.isArray(i)||(i=[i]);var c,u=0;if(i.length===h)for(c=0;c<h;c++)u=c*2,d[u]=i[c],d[u+1]=i[c];else{var p=i[0];for(c=0;c<h;c++)u=c*2,i.length>u&&(p=i[u]),d[u]=p,i.length>u+1&&(p=i[u+1]),d[u+1]=p}return this},setPoints:function(i,h,d){if(i===void 0&&(i=2),typeof i=="number"){var c=i;c<2&&(c=2),i=[];var u,p,g;if(this.horizontal)for(g=-this.frame.halfWidth,p=this.frame.width/(c-1),u=0;u<c;u++)i.push({x:g+u*p,y:0});else for(g=-this.frame.halfHeight,p=this.frame.height/(c-1),u=0;u<c;u++)i.push({x:0,y:g+u*p})}var y=i.length,v=this.points.length;return y<1?(console.warn("Rope: Not enough points given"),this):(y===1&&(i.unshift({x:0,y:0}),y++),v!==y&&this.resizeArrays(y),this.dirty=!0,this.points=i,this.updateUVs(),h!=null&&this.setColors(h),d!=null&&this.setAlphas(d),this)},updateUVs:function(){for(var i=this.uv,h=this.points.length,d=this.frame.u0,c=this.frame.v0,u=this.frame.u1,p=this.frame.v1,g=(u-d)/(h-1),y=(p-c)/(h-1),v=0;v<h;v++){var S=v*4,w,T,C,M;this.horizontal?(this._flipX?(w=u-v*g,C=u-v*g):(w=d+v*g,C=d+v*g),this._flipY?(T=p,M=c):(T=c,M=p)):(this._flipX?(w=d,C=u):(w=u,C=d),this._flipY?(T=p-v*y,M=p-v*y):(T=c+v*y,M=c+v*y)),i[S+0]=w,i[S+1]=T,i[S+2]=C,i[S+3]=M}return this},resizeArrays:function(i){var h=this.colors,d=this.alphas;this.vertices=new Float32Array(i*4),this.uv=new Float32Array(i*4),h=new Uint32Array(i*2),d=new Float32Array(i*2);for(var c=0;c<i*2;c++)h[c]=16777215,d[c]=1;return this.colors=h,this.alphas=d,this.dirty=!0,this},updateVertices:function(){var i=this._perp,h=this.points,d=this.vertices,c=h.length;if(this.dirty=!1,!(c<1)){for(var u,p=h[0],g=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,y=0;y<c;y++){var v=h[y],S=y*4;y<c-1?u=h[y+1]:u=v,i.x=u.y-p.y,i.y=-(u.x-p.x);var w=i.length();i.x/=w,i.y/=w,i.x*=g,i.y*=g,d[S]=v.x+i.x,d[S+1]=v.y+i.y,d[S+2]=v.x-i.x,d[S+3]=v.y-i.y,p=v}return this}},setDebug:function(i,h){return this.debugGraphic=i,!i&&!h?this.debugCallback=null:h?this.debugCallback=h:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(i,h,d){var c=i.debugGraphic,u=d[0],p=d[1],g=d[2],y=d[3];c.lineBetween(u,p,g,y);for(var v=4;v<h;v+=4){var S=d[v+0],w=d[v+1],T=d[v+2],C=d[v+3];c.lineBetween(u,p,S,w),c.lineBetween(g,y,T,C),c.lineBetween(g,y,S,w),c.lineBetween(S,w,T,C),u=S,p=w,g=T,y=C}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(i){return this._flipX=i,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(i){return this._flipY=i,this.updateUVs()}}});f.exports=l}),95262:(f=>{var x=function(){};f.exports=x}),26209:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(35154),a=e(77757);m.register("rope",function(t,s){t===void 0&&(t={});var l=n(t,"key",null),i=n(t,"frame",null),h=n(t,"horizontal",!0),d=r(t,"points",void 0),c=r(t,"colors",void 0),u=r(t,"alphas",void 0),p=new a(this.scene,0,0,l,i,d,h,c,u);return s!==void 0&&(t.add=s),o(this.scene,p,t),p})}),96819:((f,x,e)=>{var o=e(77757),m=e(39429);m.register("rope",function(n,r,a,t,s,l,i,h){return this.displayList.add(new o(this.scene,n,r,a,t,s,l,i,h))})}),38745:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(20439),n=e(95262),f.exports={renderWebGL:m,renderCanvas:n}}),20439:((f,x,e)=>{var o=e(91296),m=e(70554),n=function(r,a,t,s){t.addToRenderList(a);var l=r.pipelines.set(a.pipeline,a),i=o(a,t,s).calc,h=a.vertices,d=a.uv,c=a.colors,u=a.alphas,p=a.alpha,g=m.getTintAppendFloatAlpha,y=t.roundPixels,v=h.length,S=Math.floor(v*.5);l.flush(),r.pipelines.preBatch(a);var w=l.setGameObject(a),T=l.vertexViewF32,C=l.vertexViewU32,M=l.vertexCount*l.currentShader.vertexComponentCount-1,E=0,P=a.tintFill;a.dirty&&a.updateVertices();for(var A=a.debugCallback,D=[],W=0;W<v;W+=2){var V=h[W+0],K=h[W+1],X=V*i.a+K*i.c+i.e,R=V*i.b+K*i.d+i.f;y&&(X=Math.round(X),R=Math.round(R)),T[++M]=X,T[++M]=R,T[++M]=d[W+0],T[++M]=d[W+1],T[++M]=w,T[++M]=P,C[++M]=g(c[E],t.alpha*(u[E]*p)),E++,A&&(D[W+0]=X,D[W+1]=R)}A&&A.call(a,a,v,D),l.vertexCount+=S,l.currentBatch.count=l.vertexCount-l.currentBatch.start,r.pipelines.postBatch(a)};f.exports=n}),20071:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(95643),r=e(95540),a=e(79291),t=e(61622),s=e(25479),l=e(61340),i=e(95428),h=e(92503),d=new o({Extends:n,Mixins:[m.ComputedSize,m.Depth,m.GetBounds,m.Mask,m.Origin,m.ScrollFactor,m.Transform,m.Visible,s],initialize:function(u,p,g,y,v,S,w,T){g===void 0&&(g=0),y===void 0&&(y=0),v===void 0&&(v=128),S===void 0&&(S=128),n.call(this,u,"Shader"),this.blendMode=-1,this.shader;var C=u.sys.renderer;this.renderer=C,this.gl=C.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=C.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=C.width,this._rendererHeight=C.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(g,y),this.setSize(v,S),this.setOrigin(.5,.5),this.setShader(p,w,T),this.renderer.on(h.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(c){return this.renderToTexture?!0:!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,u){if(!this.renderToTexture){var p=this.width,g=this.height,y=this.renderer;this.glTexture=y.createTextureFromSource(null,p,g,0),this.framebuffer=y.createFramebuffer(p,g,this.glTexture,!1),this._rendererWidth=p,this._rendererHeight=g,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture))}return this.shader&&(y.pipelines.clear(),this.load(),this.flush(),y.pipelines.rebind()),this},setShader:function(c,u,p){if(this.renderer.contextLost)return this._deferSetShader={key:c,textures:u,textureData:p},this;if(u===void 0&&(u=[]),typeof c=="string"){var g=this.scene.sys.cache.shader;if(!g.has(c))return console.warn("Shader missing: "+c),this;this.shader=g.get(c)}else this.shader=c;var y=this.gl,v=this.renderer;this.program&&v.deleteProgram(this.program);var S=v.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);y.uniformMatrix4fv(y.getUniformLocation(S.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),y.uniformMatrix4fv(y.getUniformLocation(S.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(S.webGLProgram,"uResolution"),this.width,this.height),this.program=S;var w=new Date,T={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[w.getFullYear(),w.getMonth(),w.getDate(),w.getHours()*60*60+w.getMinutes()*60+w.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,T):this.uniforms=T;for(var C=0;C<4;C++)u[C]&&this.setSampler2D("iChannel"+C,u[C],C,p);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,u,p,g){if(this.renderer.contextLost){this._deferProjOrtho={left:c,right:u,bottom:p,top:g};return}var y=-1e3,v=1e3,S=1/(c-u),w=1/(p-g),T=1/(y-v),C=this.projectionMatrix;C[0]=-2*S,C[5]=-2*w,C[10]=2*T,C[12]=(c+u)*S,C[13]=(g+p)*w,C[14]=(v+y)*T;var M=this.program,E=this.gl,P=this.renderer;P.setProgram(M),E.uniformMatrix4fv(E.getUniformLocation(M.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=u,this._rendererHeight=p},initUniforms:function(){var c=this.renderer.glFuncMap,u=this.program;this._textureCount=0;for(var p in this.uniforms){var g=this.uniforms[p],y=g.type,v=c[y];g.uniformLocation=this.renderer.createUniformLocation(u,p),y!=="sampler2D"&&(g.glMatrix=v.matrix,g.glValueLength=v.length,g.glFunc=v.func)}},setSampler2DBuffer:function(c,u,p,g,y,v){y===void 0&&(y=0),v===void 0&&(v={});var S=this.uniforms[c];return S.value=u,v.width=p,v.height=g,S.textureData=v,this._textureCount=y,this.initSampler2D(S),this},setSampler2D:function(c,u,p,g){p===void 0&&(p=0);var y=this.scene.sys.textures;if(y.exists(u)){var v=y.getFrame(u);if(v.glTexture&&v.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,v.glTexture,v.width,v.height,p,g);var S=this.uniforms[c],w=v.source;S.textureKey=u,S.source=w.image,S.value=v.glTexture,w.isGLTexture&&(g||(g={}),g.width=w.width,g.height=w.height),g&&(S.textureData=g),this._textureCount=p,this.initSampler2D(S)}return this},setUniform:function(c,u){return t(this.uniforms,c,u),this},getUniform:function(c){return r(this.uniforms,c,null)},setChannel0:function(c,u){return this.setSampler2D("iChannel0",c,0,u)},setChannel1:function(c,u){return this.setSampler2D("iChannel1",c,1,u)},setChannel2:function(c,u){return this.setSampler2D("iChannel2",c,2,u)},setChannel3:function(c,u){return this.setSampler2D("iChannel3",c,3,u)},initSampler2D:function(c){if(c.value){var u=c.textureData;if(u&&!c.value.isRenderTexture){var p=this.gl,g=c.value,y=p[r(u,"magFilter","linear").toUpperCase()],v=p[r(u,"minFilter","linear").toUpperCase()],S=p[r(u,"wrapS","repeat").toUpperCase()],w=p[r(u,"wrapT","repeat").toUpperCase()],T=p[r(u,"format","rgba").toUpperCase()],C=r(u,"flipY",!1),M=r(u,"width",g.width),E=r(u,"height",g.height),P=r(u,"source",g.pixels);u.repeat&&(S=p.REPEAT,w=p.REPEAT),u.width&&(P=null),g.update(P,M,E,C,S,w,v,y,T)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var c=this.gl,u=this.uniforms,p,g,y,v,S,w=0;for(var T in u)p=u[T],y=p.glFunc,g=p.glValueLength,v=p.uniformLocation,S=p.value,S!==null&&(g===1?p.glMatrix?y.call(c,v.webGLUniformLocation,p.transpose,S):y.call(c,v.webGLUniformLocation,S):g===2?y.call(c,v.webGLUniformLocation,S.x,S.y):g===3?y.call(c,v.webGLUniformLocation,S.x,S.y,S.z):g===4?y.call(c,v.webGLUniformLocation,S.x,S.y,S.z,S.w):p.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+w),c.bindTexture(c.TEXTURE_2D,S.webGLTexture),c.uniform1i(v.webGLUniformLocation,w),w++))},load:function(c){var u=this.gl,p=this.width,g=this.height,y=this.renderer,v=this.program,S=this.viewMatrix;if(!this.renderToTexture){var w=-this._displayOriginX,T=-this._displayOriginY;S[0]=c[0],S[1]=c[1],S[4]=c[2],S[5]=c[3],S[8]=c[4],S[9]=c[5],S[12]=S[0]*w+S[4]*T,S[13]=S[1]*w+S[5]*T}u.useProgram(v.webGLProgram),u.uniformMatrix4fv(u.getUniformLocation(v.webGLProgram,"uViewMatrix"),!1,S),u.uniformMatrix4fv(u.getUniformLocation(v.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),u.uniform2f(u.getUniformLocation(v.webGLProgram,"uResolution"),this.width,this.height);var C=this.uniforms,M=C.resolution;M.value.x=p,M.value.y=g,C.time.value=y.game.loop.getDuration();var E=this.pointer;if(E){var P=C.mouse,A=E.x/p,D=1-E.y/g;P.value.x=A.toFixed(2),P.value.y=D.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,u=this.height,p=this.program,g=this.gl,y=this.vertexBuffer,v=this.renderer,S=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(v.setFramebuffer(this.framebuffer),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)),g.bindBuffer(g.ARRAY_BUFFER,y.webGLBuffer);var w=g.getAttribLocation(p.webGLProgram,"inPosition");w!==-1&&(g.enableVertexAttribArray(w),g.vertexAttribPointer(w,2,g.FLOAT,!1,S,0));var T=this.vertexViewF32;T[3]=u,T[4]=c,T[5]=u,T[8]=c,T[9]=u,T[10]=c;var C=6;g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,C*S)),g.drawArrays(g.TRIANGLES,0,C),this.renderToTexture&&v.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var c=this._deferSetShader.key,u=this._deferSetShader.textures,p=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(c,u,p)}if(this._deferProjOrtho!==null){var g=this._deferProjOrtho.left,y=this._deferProjOrtho.right,v=this._deferProjOrtho.bottom,S=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(g,y,v,S)}},preDestroy:function(){var c=this.renderer;c.off(h.RESTORE_WEBGL,this.onContextRestored,this),c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(c.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),i(this.uniforms,function(u){c.deleteUniformLocation(u.uniformLocation),u.uniformLocation=null})}});f.exports=d}),80464:(f=>{var x=function(){};f.exports=x}),54935:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(20071);m.register("shader",function(a,t){a===void 0&&(a={});var s=n(a,"key",null),l=n(a,"x",0),i=n(a,"y",0),h=n(a,"width",128),d=n(a,"height",128),c=new r(this.scene,s,l,i,h,d);return t!==void 0&&(a.add=t),o(this.scene,c,a),c})}),74177:((f,x,e)=>{var o=e(20071),m=e(39429);m.register("shader",function(n,r,a,t,s,l,i){return this.displayList.add(new o(this.scene,n,r,a,t,s,l,i))})}),25479:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(19257),n=e(80464),f.exports={renderWebGL:m,renderCanvas:n}}),19257:((f,x,e)=>{var o=e(91296),m=function(n,r,a,t){if(r.shader){if(a.addToRenderList(r),n.pipelines.clear(),r.renderToTexture)r.load(),r.flush();else{var s=o(r,a,t).calc;(n.width!==r._rendererWidth||n.height!==r._rendererHeight)&&r.projOrtho(0,n.width,n.height,0),r.load(s.matrix),r.flush()}n.pipelines.rebind()}};f.exports=m}),10441:((f,x,e)=>{var o=e(70554),m=function(n,r,a,t,s,l){for(var i=o.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*t),h=a.pathData,d=a.pathIndexes,c=0;c<d.length;c+=3){var u=d[c]*2,p=d[c+1]*2,g=d[c+2]*2,y=h[u+0]-s,v=h[u+1]-l,S=h[p+0]-s,w=h[p+1]-l,T=h[g+0]-s,C=h[g+1]-l,M=r.getX(y,v),E=r.getY(y,v),P=r.getX(S,w),A=r.getY(S,w),D=r.getX(T,C),W=r.getY(T,C);n.batchTri(a,M,E,P,A,D,W,0,0,1,1,i,i,i,2)}};f.exports=m}),65960:(f=>{var x=function(e,o,m,n){var r=m||o.fillColor,a=n||o.fillAlpha,t=(r&16711680)>>>16,s=(r&65280)>>>8,l=r&255;e.fillStyle="rgba("+t+","+s+","+l+","+a+")"};f.exports=x}),75177:(f=>{var x=function(e,o,m,n){var r=m||o.strokeColor,a=n||o.strokeAlpha,t=(r&16711680)>>>16,s=(r&65280)>>>8,l=r&255;e.strokeStyle="rgba("+t+","+s+","+l+","+a+")",e.lineWidth=o.lineWidth};f.exports=x}),17803:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(95643),r=e(23031),a=new o({Extends:n,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible],initialize:function(s,l,i){l===void 0&&(l="Shape"),n.call(this,s,l),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new r,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(t,s){return s===void 0&&(s=1),t===void 0?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=s,this.isFilled=!0),this},setStrokeStyle:function(t,s,l){return l===void 0&&(l=1),t===void 0?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=s,this.strokeAlpha=l,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,s){return this.width=t,this.height=s,this},setDisplaySize:function(t,s){return this.displayWidth=t,this.displayHeight=s,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});f.exports=a}),34682:((f,x,e)=>{var o=e(70554),m=function(n,r,a,t,s){var l=n.strokeTint,i=o.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*a);l.TL=i,l.TR=i,l.BL=i,l.BR=i;var h=r.pathData,d=h.length-1,c=r.lineWidth,u=c/2,p=h[0]-t,g=h[1]-s;r.closePath||(d-=2);for(var y=2;y<d;y+=2){var v=h[y]-t,S=h[y+1]-s;n.batchLine(p,g,v,S,u,u,c,y-2,r.closePath?y===d-1:!1),p=v,g=S}};f.exports=m}),23629:((f,x,e)=>{var o=e(13609),m=e(83419),n=e(39506),r=e(94811),a=e(96503),t=e(36383),s=e(17803),l=new m({Extends:s,Mixins:[o],initialize:function(h,d,c,u,p,g,y,v,S){d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=128),p===void 0&&(p=0),g===void 0&&(g=360),y===void 0&&(y=!1),s.call(this,h,"Arc",new a(0,0,u)),this._startAngle=p,this._endAngle=g,this._anticlockwise=y,this._iterations=.01,this.setPosition(d,c);var w=this.geom.radius*2;this.setSize(w,w),v!==void 0&&this.setFillStyle(v,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(i){this._iterations=i,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(i){this.geom.radius=i;var h=i*2;this.setSize(h,h),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(i){this._startAngle=i,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(i){this._endAngle=i,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(i){this._anticlockwise=i,this.updateData()}},setRadius:function(i){return this.radius=i,this},setIterations:function(i){return i===void 0&&(i=.01),this.iterations=i,this},setStartAngle:function(i,h){return this._startAngle=i,h!==void 0&&(this._anticlockwise=h),this.updateData()},setEndAngle:function(i,h){return this._endAngle=i,h!==void 0&&(this._anticlockwise=h),this.updateData()},updateData:function(){var i=this._iterations,h=i,d=this.geom.radius,c=n(this._startAngle),u=n(this._endAngle),p=this._anticlockwise,g=d,y=d;u-=c,p?u<-t.PI2?u=-t.PI2:u>0&&(u=-t.PI2+u%t.PI2):u>t.PI2?u=t.PI2:u<0&&(u=t.PI2+u%t.PI2);for(var v=[g+Math.cos(c)*d,y+Math.sin(c)*d],S;h<1;)S=u*h+c,v.push(g+Math.cos(S)*d,y+Math.sin(S)*d),h+=i;return S=u+c,v.push(g+Math.cos(S)*d,y+Math.sin(S)*d),v.push(g+Math.cos(c)*d,y+Math.sin(c)*d),this.pathIndexes=r(v),this.pathData=v,this}});f.exports=l}),42542:((f,x,e)=>{var o=e(39506),m=e(65960),n=e(75177),r=e(20926),a=function(t,s,l,i){l.addToRenderList(s);var h=t.currentContext;if(r(t,h,s,l,i)){var d=s.radius;h.beginPath(),h.arc(d-s.originX*(d*2),d-s.originY*(d*2),d,o(s._startAngle),o(s._endAngle),s.anticlockwise),s.closePath&&h.closePath(),s.isFilled&&(m(h,s),h.fill()),s.isStroked&&(n(h,s),h.stroke()),h.restore()}};f.exports=a}),42563:((f,x,e)=>{var o=e(23629),m=e(39429);m.register("arc",function(n,r,a,t,s,l,i,h){return this.displayList.add(new o(this.scene,n,r,a,t,s,l,i,h))}),m.register("circle",function(n,r,a,t,s){return this.displayList.add(new o(this.scene,n,r,a,0,360,!1,t,s))})}),13609:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(41447),n=e(42542),f.exports={renderWebGL:m,renderCanvas:n}}),41447:((f,x,e)=>{var o=e(91296),m=e(10441),n=e(34682),r=function(a,t,s,l){s.addToRenderList(t);var i=a.pipelines.set(t.pipeline),h=o(t,s,l),d=i.calcMatrix.copyFrom(h.calc),c=t._displayOriginX,u=t._displayOriginY,p=s.alpha*t.alpha;a.pipelines.preBatch(t),t.isFilled&&m(i,d,t,p,c,u),t.isStroked&&n(i,t,p,c,u),a.pipelines.postBatch(t)};f.exports=r}),89:((f,x,e)=>{var o=e(83419),m=e(33141),n=e(94811),r=e(87841),a=e(17803),t=new o({Extends:a,Mixins:[m],initialize:function(l,i,h,d,c,u){i===void 0&&(i=0),h===void 0&&(h=0),a.call(this,l,"Curve",d),this._smoothness=32,this._curveBounds=new r,this.closePath=!1,this.setPosition(i,h),c!==void 0&&this.setFillStyle(c,u),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){var s=this._curveBounds,l=this._smoothness;this.geom.getBounds(s,l),this.setSize(s.width,s.height),this.updateDisplayOrigin();for(var i=[],h=this.geom.getPoints(l),d=0;d<h.length;d++)i.push(h[d].x,h[d].y);return i.push(h[0].x,h[0].y),this.pathIndexes=n(i),this.pathData=i,this}});f.exports=t}),3170:((f,x,e)=>{var o=e(65960),m=e(75177),n=e(20926),r=function(a,t,s,l){s.addToRenderList(t);var i=a.currentContext;if(n(a,i,t,s,l)){var h=t._displayOriginX+t._curveBounds.x,d=t._displayOriginY+t._curveBounds.y,c=t.pathData,u=c.length-1,p=c[0]-h,g=c[1]-d;i.beginPath(),i.moveTo(p,g),t.closePath||(u-=2);for(var y=2;y<u;y+=2){var v=c[y]-h,S=c[y+1]-d;i.lineTo(v,S)}t.closePath&&i.closePath(),t.isFilled&&(o(i,t),i.fill()),t.isStroked&&(m(i,t),i.stroke()),i.restore()}};f.exports=r}),40511:((f,x,e)=>{var o=e(39429),m=e(89);o.register("curve",function(n,r,a,t,s){return this.displayList.add(new m(this.scene,n,r,a,t,s))})}),33141:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(53987),n=e(3170),f.exports={renderWebGL:m,renderCanvas:n}}),53987:((f,x,e)=>{var o=e(10441),m=e(91296),n=e(34682),r=function(a,t,s,l){s.addToRenderList(t);var i=a.pipelines.set(t.pipeline),h=m(t,s,l),d=i.calcMatrix.copyFrom(h.calc),c=t._displayOriginX+t._curveBounds.x,u=t._displayOriginY+t._curveBounds.y,p=s.alpha*t.alpha;a.pipelines.preBatch(t),t.isFilled&&o(i,d,t,p,c,u),t.isStroked&&n(i,t,p,c,u),a.pipelines.postBatch(t)};f.exports=r}),19921:((f,x,e)=>{var o=e(83419),m=e(94811),n=e(54205),r=e(8497),a=e(17803),t=new o({Extends:a,Mixins:[n],initialize:function(l,i,h,d,c,u,p){i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=128),c===void 0&&(c=128),a.call(this,l,"Ellipse",new r(d/2,c/2,d,c)),this._smoothness=64,this.setPosition(i,h),this.width=d,this.height=c,u!==void 0&&this.setFillStyle(u,p),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSize:function(s,l){return this.width=s,this.height=l,this.geom.setPosition(s/2,l/2),this.geom.setSize(s,l),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){for(var s=[],l=this.geom.getPoints(this._smoothness),i=0;i<l.length;i++)s.push(l[i].x,l[i].y);return s.push(l[0].x,l[0].y),this.pathIndexes=m(s),this.pathData=s,this}});f.exports=t}),7930:((f,x,e)=>{var o=e(65960),m=e(75177),n=e(20926),r=function(a,t,s,l){s.addToRenderList(t);var i=a.currentContext;if(n(a,i,t,s,l)){var h=t._displayOriginX,d=t._displayOriginY,c=t.pathData,u=c.length-1,p=c[0]-h,g=c[1]-d;i.beginPath(),i.moveTo(p,g),t.closePath||(u-=2);for(var y=2;y<u;y+=2){var v=c[y]-h,S=c[y+1]-d;i.lineTo(v,S)}i.closePath(),t.isFilled&&(o(i,t),i.fill()),t.isStroked&&(m(i,t),i.stroke()),i.restore()}};f.exports=r}),1543:((f,x,e)=>{var o=e(19921),m=e(39429);m.register("ellipse",function(n,r,a,t,s,l){return this.displayList.add(new o(this.scene,n,r,a,t,s,l))})}),54205:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(19467),n=e(7930),f.exports={renderWebGL:m,renderCanvas:n}}),19467:((f,x,e)=>{var o=e(10441),m=e(91296),n=e(34682),r=function(a,t,s,l){s.addToRenderList(t);var i=a.pipelines.set(t.pipeline),h=m(t,s,l),d=i.calcMatrix.copyFrom(h.calc),c=t._displayOriginX,u=t._displayOriginY,p=s.alpha*t.alpha;a.pipelines.preBatch(t),t.isFilled&&o(i,d,t,p,c,u),t.isStroked&&n(i,t,p,c,u),a.pipelines.postBatch(t)};f.exports=r}),30479:((f,x,e)=>{var o=e(83419),m=e(17803),n=e(26015),r=new o({Extends:m,Mixins:[n],initialize:function(t,s,l,i,h,d,c,u,p,g,y){s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=128),h===void 0&&(h=128),d===void 0&&(d=32),c===void 0&&(c=32),m.call(this,t,"Grid",null),this.cellWidth=d,this.cellHeight=c,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(s,l),this.setSize(i,h),this.setFillStyle(u,p),g!==void 0&&this.setOutlineStyle(g,y),this.updateDisplayOrigin()},setFillStyle:function(a,t){return t===void 0&&(t=1),a===void 0?this.showCells=!1:(this.fillColor=a,this.fillAlpha=t,this.showCells=!0),this},setAltFillStyle:function(a,t){return t===void 0&&(t=1),a===void 0?this.showAltCells=!1:(this.altFillColor=a,this.altFillAlpha=t,this.showAltCells=!0),this},setOutlineStyle:function(a,t){return t===void 0&&(t=1),a===void 0?this.showOutline=!1:(this.outlineFillColor=a,this.outlineFillAlpha=t,this.showOutline=!0),this}});f.exports=r}),49912:((f,x,e)=>{var o=e(65960),m=e(75177),n=e(20926),r=function(a,t,s,l){s.addToRenderList(t);var i=a.currentContext;if(n(a,i,t,s,l)){var h=-t._displayOriginX,d=-t._displayOriginY,c=s.alpha*t.alpha,u=t.width,p=t.height,g=t.cellWidth,y=t.cellHeight,v=Math.ceil(u/g),S=Math.ceil(p/y),w=g,T=y,C=g-(v*g-u),M=y-(S*y-p),E=t.showCells,P=t.showAltCells,A=t.showOutline,D=0,W=0,V=0,K=0,X=0;if(A&&(w--,T--,C===g&&C--,M===y&&M--),E&&t.fillAlpha>0)for(o(i,t),W=0;W<S;W++)for(P&&(V=W%2),D=0;D<v;D++){if(P&&V){V=0;continue}V++,K=D<v-1?w:C,X=W<S-1?T:M,i.fillRect(h+D*g,d+W*y,K,X)}if(P&&t.altFillAlpha>0)for(o(i,t,t.altFillColor,t.altFillAlpha*c),W=0;W<S;W++)for(P&&(V=W%2),D=0;D<v;D++){if(P&&!V){V=1;continue}V=0,K=D<v-1?w:C,X=W<S-1?T:M,i.fillRect(h+D*g,d+W*y,K,X)}if(A&&t.outlineFillAlpha>0){for(m(i,t,t.outlineFillColor,t.outlineFillAlpha*c),D=1;D<v;D++){var R=D*g;i.beginPath(),i.moveTo(R+h,d),i.lineTo(R+h,p+d),i.stroke()}for(W=1;W<S;W++){var H=W*y;i.beginPath(),i.moveTo(h,H+d),i.lineTo(h+u,H+d),i.stroke()}}i.restore()}};f.exports=r}),34137:((f,x,e)=>{var o=e(39429),m=e(30479);o.register("grid",function(n,r,a,t,s,l,i,h,d,c){return this.displayList.add(new m(this.scene,n,r,a,t,s,l,i,h,d,c))})}),26015:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(46161),n=e(49912),f.exports={renderWebGL:m,renderCanvas:n}}),46161:((f,x,e)=>{var o=e(91296),m=e(70554),n=function(r,a,t,s){t.addToRenderList(a);var l=r.pipelines.set(a.pipeline),i=o(a,t,s),h=l.calcMatrix.copyFrom(i.calc);h.translate(-a._displayOriginX,-a._displayOriginY);var d=t.alpha*a.alpha,c=a.width,u=a.height,p=a.cellWidth,g=a.cellHeight,y=Math.ceil(c/p),v=Math.ceil(u/g),S=p,w=g,T=p-(y*p-c),C=g-(v*g-u),M,E,P=a.showCells,A=a.showAltCells,D=a.showOutline,W=0,V=0,K=0,X=0,R=0;if(D&&(S--,w--,T===p&&T--,C===g&&C--),r.pipelines.preBatch(a),P&&a.fillAlpha>0)for(M=l.fillTint,E=m.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*d),M.TL=E,M.TR=E,M.BL=E,M.BR=E,V=0;V<v;V++)for(A&&(K=V%2),W=0;W<y;W++){if(A&&K){K=0;continue}K++,X=W<y-1?S:T,R=V<v-1?w:C,l.batchFillRect(W*p,V*g,X,R)}if(A&&a.altFillAlpha>0)for(M=l.fillTint,E=m.getTintAppendFloatAlpha(a.altFillColor,a.altFillAlpha*d),M.TL=E,M.TR=E,M.BL=E,M.BR=E,V=0;V<v;V++)for(A&&(K=V%2),W=0;W<y;W++){if(A&&!K){K=1;continue}K=0,X=W<y-1?S:T,R=V<v-1?w:C,l.batchFillRect(W*p,V*g,X,R)}if(D&&a.outlineFillAlpha>0){var H=l.strokeTint,L=m.getTintAppendFloatAlpha(a.outlineFillColor,a.outlineFillAlpha*d);for(H.TL=L,H.TR=L,H.BL=L,H.BR=L,W=1;W<y;W++){var N=W*p;l.batchLine(N,0,N,u,a.lineWidth,a.lineWidth,1,0,!1)}for(V=1;V<v;V++){var z=V*g;l.batchLine(0,z,c,z,a.lineWidth,a.lineWidth,1,0,!1)}}r.pipelines.postBatch(a)};f.exports=n}),61475:((f,x,e)=>{var o=e(99651),m=e(83419),n=e(17803),r=new m({Extends:n,Mixins:[o],initialize:function(t,s,l,i,h,d,c,u){s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=48),h===void 0&&(h=32),d===void 0&&(d=15658734),c===void 0&&(c=10066329),u===void 0&&(u=13421772),n.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=d,this.fillLeft=c,this.fillRight=u,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(s,l),this.setSize(i,h),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setFaces:function(a,t,s){return a===void 0&&(a=!0),t===void 0&&(t=!0),s===void 0&&(s=!0),this.showTop=a,this.showLeft=t,this.showRight=s,this},setFillStyle:function(a,t,s){return this.fillTop=a,this.fillLeft=t,this.fillRight=s,this.isFilled=!0,this}});f.exports=r}),11508:((f,x,e)=>{var o=e(65960),m=e(20926),n=function(r,a,t,s){t.addToRenderList(a);var l=r.currentContext;if(m(r,l,a,t,s)&&a.isFilled){var i=a.width,h=a.height,d=i/2,c=i/a.projection;a.showTop&&(o(l,a,a.fillTop),l.beginPath(),l.moveTo(-d,-h),l.lineTo(0,-c-h),l.lineTo(d,-h),l.lineTo(d,-1),l.lineTo(0,c-1),l.lineTo(-d,-1),l.lineTo(-d,-h),l.fill()),a.showLeft&&(o(l,a,a.fillLeft),l.beginPath(),l.moveTo(-d,0),l.lineTo(0,c),l.lineTo(0,c-h),l.lineTo(-d,-h),l.lineTo(-d,0),l.fill()),a.showRight&&(o(l,a,a.fillRight),l.beginPath(),l.moveTo(d,0),l.lineTo(0,c),l.lineTo(0,c-h),l.lineTo(d,-h),l.lineTo(d,0),l.fill()),l.restore()}};f.exports=n}),3933:((f,x,e)=>{var o=e(39429),m=e(61475);o.register("isobox",function(n,r,a,t,s,l,i){return this.displayList.add(new m(this.scene,n,r,a,t,s,l,i))})}),99651:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(68149),n=e(11508),f.exports={renderWebGL:m,renderCanvas:n}}),68149:((f,x,e)=>{var o=e(91296),m=e(70554),n=function(r,a,t,s){t.addToRenderList(a);var l=r.pipelines.set(a.pipeline),i=o(a,t,s),h=l.calcMatrix.copyFrom(i.calc),d=a.width,c=a.height,u=d/2,p=d/a.projection,g=t.alpha*a.alpha;if(a.isFilled){var y,v,S,w,T,C,M,E,P;r.pipelines.preBatch(a),a.showTop&&(y=m.getTintAppendFloatAlpha(a.fillTop,g),v=h.getX(-u,-c),S=h.getY(-u,-c),w=h.getX(0,-p-c),T=h.getY(0,-p-c),C=h.getX(u,-c),M=h.getY(u,-c),E=h.getX(0,p-c),P=h.getY(0,p-c),l.batchQuad(a,v,S,w,T,C,M,E,P,0,0,1,1,y,y,y,y,2)),a.showLeft&&(y=m.getTintAppendFloatAlpha(a.fillLeft,g),v=h.getX(-u,0),S=h.getY(-u,0),w=h.getX(0,p),T=h.getY(0,p),C=h.getX(0,p-c),M=h.getY(0,p-c),E=h.getX(-u,-c),P=h.getY(-u,-c),l.batchQuad(a,v,S,w,T,C,M,E,P,0,0,1,1,y,y,y,y,2)),a.showRight&&(y=m.getTintAppendFloatAlpha(a.fillRight,g),v=h.getX(u,0),S=h.getY(u,0),w=h.getX(0,p),T=h.getY(0,p),C=h.getX(0,p-c),M=h.getY(0,p-c),E=h.getX(u,-c),P=h.getY(u,-c),l.batchQuad(a,v,S,w,T,C,M,E,P,0,0,1,1,y,y,y,y,2)),r.pipelines.postBatch(a)}};f.exports=n}),16933:((f,x,e)=>{var o=e(83419),m=e(60561),n=e(17803),r=new o({Extends:n,Mixins:[m],initialize:function(t,s,l,i,h,d,c,u,p){s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i=48),h===void 0&&(h=32),d===void 0&&(d=!1),c===void 0&&(c=15658734),u===void 0&&(u=10066329),p===void 0&&(p=13421772),n.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=c,this.fillLeft=u,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=d,this.isFilled=!0,this.setPosition(s,l),this.setSize(i,h),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setReversed:function(a){return this.isReversed=a,this},setFaces:function(a,t,s){return a===void 0&&(a=!0),t===void 0&&(t=!0),s===void 0&&(s=!0),this.showTop=a,this.showLeft=t,this.showRight=s,this},setFillStyle:function(a,t,s){return this.fillTop=a,this.fillLeft=t,this.fillRight=s,this.isFilled=!0,this}});f.exports=r}),79590:((f,x,e)=>{var o=e(65960),m=e(20926),n=function(r,a,t,s){t.addToRenderList(a);var l=r.currentContext;if(m(r,l,a,t,s)&&a.isFilled){var i=a.width,h=a.height,d=i/2,c=i/a.projection,u=a.isReversed;a.showTop&&u&&(o(l,a,a.fillTop),l.beginPath(),l.moveTo(-d,-h),l.lineTo(0,-c-h),l.lineTo(d,-h),l.lineTo(0,c-h),l.fill()),a.showLeft&&(o(l,a,a.fillLeft),l.beginPath(),u?(l.moveTo(-d,-h),l.lineTo(0,c),l.lineTo(0,c-h)):(l.moveTo(-d,0),l.lineTo(0,c),l.lineTo(0,c-h)),l.fill()),a.showRight&&(o(l,a,a.fillRight),l.beginPath(),u?(l.moveTo(d,-h),l.lineTo(0,c),l.lineTo(0,c-h)):(l.moveTo(d,0),l.lineTo(0,c),l.lineTo(0,c-h)),l.fill()),l.restore()}};f.exports=n}),49803:((f,x,e)=>{var o=e(39429),m=e(16933);o.register("isotriangle",function(n,r,a,t,s,l,i,h){return this.displayList.add(new m(this.scene,n,r,a,t,s,l,i,h))})}),60561:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(51503),n=e(79590),f.exports={renderWebGL:m,renderCanvas:n}}),51503:((f,x,e)=>{var o=e(91296),m=e(70554),n=function(r,a,t,s){t.addToRenderList(a);var l=r.pipelines.set(a.pipeline),i=o(a,t,s),h=l.calcMatrix.copyFrom(i.calc),d=a.width,c=a.height,u=d/2,p=d/a.projection,g=a.isReversed,y=t.alpha*a.alpha;if(a.isFilled){r.pipelines.preBatch(a);var v,S,w,T,C,M,E;if(a.showTop&&g){v=m.getTintAppendFloatAlpha(a.fillTop,y),S=h.getX(-u,-c),w=h.getY(-u,-c),T=h.getX(0,-p-c),C=h.getY(0,-p-c),M=h.getX(u,-c),E=h.getY(u,-c);var P=h.getX(0,p-c),A=h.getY(0,p-c);l.batchQuad(a,S,w,T,C,M,E,P,A,0,0,1,1,v,v,v,v,2)}a.showLeft&&(v=m.getTintAppendFloatAlpha(a.fillLeft,y),g?(S=h.getX(-u,-c),w=h.getY(-u,-c),T=h.getX(0,p),C=h.getY(0,p),M=h.getX(0,p-c),E=h.getY(0,p-c)):(S=h.getX(-u,0),w=h.getY(-u,0),T=h.getX(0,p),C=h.getY(0,p),M=h.getX(0,p-c),E=h.getY(0,p-c)),l.batchTri(a,S,w,T,C,M,E,0,0,1,1,v,v,v,2)),a.showRight&&(v=m.getTintAppendFloatAlpha(a.fillRight,y),g?(S=h.getX(u,-c),w=h.getY(u,-c),T=h.getX(0,p),C=h.getY(0,p),M=h.getX(0,p-c),E=h.getY(0,p-c)):(S=h.getX(u,0),w=h.getY(u,0),T=h.getX(0,p),C=h.getY(0,p),M=h.getX(0,p-c),E=h.getY(0,p-c)),l.batchTri(a,S,w,T,C,M,E,0,0,1,1,v,v,v,2)),r.pipelines.postBatch(a)}};f.exports=n}),57847:((f,x,e)=>{var o=e(83419),m=e(17803),n=e(23031),r=e(36823),a=new o({Extends:m,Mixins:[r],initialize:function(s,l,i,h,d,c,u,p,g){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=128),u===void 0&&(u=0),m.call(this,s,"Line",new n(h,d,c,u));var y=Math.max(1,this.geom.right-this.geom.left),v=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(l,i),this.setSize(y,v),p!==void 0&&this.setStrokeStyle(1,p,g),this.updateDisplayOrigin()},setLineWidth:function(t,s){return s===void 0&&(s=t),this._startWidth=t,this._endWidth=s,this.lineWidth=t,this},setTo:function(t,s,l,i){return this.geom.setTo(t,s,l,i),this}});f.exports=a}),17440:((f,x,e)=>{var o=e(75177),m=e(20926),n=function(r,a,t,s){t.addToRenderList(a);var l=r.currentContext;if(m(r,l,a,t,s)){var i=a._displayOriginX,h=a._displayOriginY;a.isStroked&&(o(l,a),l.beginPath(),l.moveTo(a.geom.x1-i,a.geom.y1-h),l.lineTo(a.geom.x2-i,a.geom.y2-h),l.stroke()),l.restore()}};f.exports=n}),2481:((f,x,e)=>{var o=e(39429),m=e(57847);o.register("line",function(n,r,a,t,s,l,i,h){return this.displayList.add(new m(this.scene,n,r,a,t,s,l,i,h))})}),36823:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(77385),n=e(17440),f.exports={renderWebGL:m,renderCanvas:n}}),77385:((f,x,e)=>{var o=e(91296),m=e(70554),n=function(r,a,t,s){t.addToRenderList(a);var l=r.pipelines.set(a.pipeline),i=o(a,t,s);l.calcMatrix.copyFrom(i.calc);var h=a._displayOriginX,d=a._displayOriginY,c=t.alpha*a.alpha;if(r.pipelines.preBatch(a),a.isStroked){var u=l.strokeTint,p=m.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*c);u.TL=p,u.TR=p,u.BL=p,u.BR=p,l.batchLine(a.geom.x1-h,a.geom.y1-d,a.geom.x2-h,a.geom.y2-d,a._startWidth/2,a._endWidth/2,1,0,!1,i.sprite,i.camera)}r.pipelines.postBatch(a)};f.exports=n}),24949:((f,x,e)=>{var o=e(90273),m=e(83419),n=e(94811),r=e(13829),a=e(25717),t=e(17803),s=e(5469),l=new m({Extends:t,Mixins:[o],initialize:function(h,d,c,u,p,g){d===void 0&&(d=0),c===void 0&&(c=0),t.call(this,h,"Polygon",new a(u));var y=r(this.geom);this.setPosition(d,c),this.setSize(y.width,y.height),p!==void 0&&this.setFillStyle(p,g),this.updateDisplayOrigin(),this.updateData()},smooth:function(i){i===void 0&&(i=1);for(var h=0;h<i;h++)s(this.geom);return this.updateData()},setTo:function(i){this.geom.setTo(i);var h=r(this.geom);return this.setSize(h.width,h.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var i=[],h=this.geom.points,d=0;d<h.length;d++)i.push(h[d].x,h[d].y);return i.push(h[0].x,h[0].y),this.pathIndexes=n(i),this.pathData=i,this}});f.exports=l}),38710:((f,x,e)=>{var o=e(65960),m=e(75177),n=e(20926),r=function(a,t,s,l){s.addToRenderList(t);var i=a.currentContext;if(n(a,i,t,s,l)){var h=t._displayOriginX,d=t._displayOriginY,c=t.pathData,u=c.length-1,p=c[0]-h,g=c[1]-d;i.beginPath(),i.moveTo(p,g),t.closePath||(u-=2);for(var y=2;y<u;y+=2){var v=c[y]-h,S=c[y+1]-d;i.lineTo(v,S)}t.closePath&&i.closePath(),t.isFilled&&(o(i,t),i.fill()),t.isStroked&&(m(i,t),i.stroke()),i.restore()}};f.exports=r}),64827:((f,x,e)=>{var o=e(39429),m=e(24949);o.register("polygon",function(n,r,a,t,s){return this.displayList.add(new m(this.scene,n,r,a,t,s))})}),90273:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(73695),n=e(38710),f.exports={renderWebGL:m,renderCanvas:n}}),73695:((f,x,e)=>{var o=e(10441),m=e(91296),n=e(34682),r=function(a,t,s,l){s.addToRenderList(t);var i=a.pipelines.set(t.pipeline),h=m(t,s,l),d=i.calcMatrix.copyFrom(h.calc),c=t._displayOriginX,u=t._displayOriginY,p=s.alpha*t.alpha;a.pipelines.preBatch(t),t.isFilled&&o(i,d,t,p,c,u),t.isStroked&&n(i,t,p,c,u),a.pipelines.postBatch(t)};f.exports=r}),74561:((f,x,e)=>{var o=e(83419),m=e(94811),n=e(87841),r=e(17803),a=e(95597),t=new o({Extends:r,Mixins:[a],initialize:function(l,i,h,d,c,u,p){i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=128),c===void 0&&(c=128),r.call(this,l,"Rectangle",new n(0,0,d,c)),this.radius=20,this.isRounded=!1,this.setPosition(i,h),this.setSize(d,c),u!==void 0&&this.setFillStyle(u,p),this.updateDisplayOrigin(),this.updateData()},setRounded:function(s){return s===void 0&&(s=16),this.radius=s,this.isRounded=s>0,this.updateRoundedData()},setSize:function(s,l){this.width=s,this.height=l,this.geom.setSize(s,l),this.updateData(),this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=s,i.hitArea.height=l),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var s=[],l=this.geom,i=this._tempLine;return l.getLineA(i),s.push(i.x1,i.y1,i.x2,i.y2),l.getLineB(i),s.push(i.x2,i.y2),l.getLineC(i),s.push(i.x2,i.y2),l.getLineD(i),s.push(i.x2,i.y2),this.pathData=s,this},updateRoundedData:function(){var s=[],l=this.width/2,i=this.height/2,h=Math.min(l,i),d=Math.min(this.radius,h),c=l,u=i,p=Math.max(1,Math.floor(d/5));return this.arcTo(s,c-l+d,u-i+d,d,Math.PI,Math.PI*1.5,p),s.push(c+l-d,u-i),this.arcTo(s,c+l-d,u-i+d,d,Math.PI*1.5,Math.PI*2,p),s.push(c+l,u+i-d),this.arcTo(s,c+l-d,u+i-d,d,0,Math.PI*.5,p),s.push(c-l+d,u+i),this.arcTo(s,c-l+d,u+i-d,d,Math.PI*.5,Math.PI,p),s.push(c-l,u-i+d),this.pathIndexes=m(s),this.pathData=s,this},arcTo:function(s,l,i,h,d,c,u){for(var p=(c-d)/u,g=0;g<=u;g++){var y=d+p*g;s.push(l+Math.cos(y)*h,i+Math.sin(y)*h)}}});f.exports=t}),48682:((f,x,e)=>{var o=e(65960),m=e(75177),n=e(20926),r=function(t,s,l,i,h,d){var c=Math.min(i/2,h/2),u=Math.min(d,c);if(u===0){t.rect(s,l,i,h);return}t.moveTo(s+u,l),t.lineTo(s+i-u,l),t.arcTo(s+i,l,s+i,l+u,u),t.lineTo(s+i,l+h-u),t.arcTo(s+i,l+h,s+i-u,l+h,u),t.lineTo(s+u,l+h),t.arcTo(s,l+h,s,l+h-u,u),t.lineTo(s,l+u),t.arcTo(s,l,s+u,l,u),t.closePath()},a=function(t,s,l,i){l.addToRenderList(s);var h=t.currentContext;if(n(t,h,s,l,i)){var d=s._displayOriginX,c=s._displayOriginY;s.isFilled&&(o(h,s),s.isRounded?(h.beginPath(),r(h,-d,-c,s.width,s.height,s.radius),h.fill()):h.fillRect(-d,-c,s.width,s.height)),s.isStroked&&(m(h,s),h.beginPath(),s.isRounded?r(h,-d,-c,s.width,s.height,s.radius):h.rect(-d,-c,s.width,s.height),h.stroke()),h.restore()}};f.exports=a}),87959:((f,x,e)=>{var o=e(39429),m=e(74561);o.register("rectangle",function(n,r,a,t,s,l){return this.displayList.add(new m(this.scene,n,r,a,t,s,l))})}),95597:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(52059),n=e(48682),f.exports={renderWebGL:m,renderCanvas:n}}),52059:((f,x,e)=>{var o=e(10441),m=e(91296),n=e(34682),r=e(70554),a=function(t,s,l,i){l.addToRenderList(s);var h=t.pipelines.set(s.pipeline),d=m(s,l,i);h.calcMatrix.copyFrom(d.calc);var c=s._displayOriginX,u=s._displayOriginY,p=l.alpha*s.alpha;if(t.pipelines.preBatch(s),s.isRounded&&s.isFilled)o(h,d.calc,s,p,c,u);else if(s.isFilled){var g=h.fillTint,y=r.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*p);g.TL=y,g.TR=y,g.BL=y,g.BR=y,h.batchFillRect(-c,-u,s.width,s.height)}s.isStroked&&n(h,s,p,c,u),t.pipelines.postBatch(s)};f.exports=a}),55911:((f,x,e)=>{var o=e(81991),m=e(83419),n=e(94811),r=e(17803),a=new m({Extends:r,Mixins:[o],initialize:function(s,l,i,h,d,c,u,p){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=5),d===void 0&&(d=32),c===void 0&&(c=64),r.call(this,s,"Star",null),this._points=h,this._innerRadius=d,this._outerRadius=c,this.setPosition(l,i),this.setSize(c*2,c*2),u!==void 0&&this.setFillStyle(u,p),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],s=this._points,l=this._innerRadius,i=this._outerRadius,h=Math.PI/2*3,d=Math.PI/s,c=i,u=i;t.push(c,u+-i);for(var p=0;p<s;p++)t.push(c+Math.cos(h)*i,u+Math.sin(h)*i),h+=d,t.push(c+Math.cos(h)*l,u+Math.sin(h)*l),h+=d;return t.push(c,u+-i),this.pathIndexes=n(t),this.pathData=t,this}});f.exports=a}),64272:((f,x,e)=>{var o=e(65960),m=e(75177),n=e(20926),r=function(a,t,s,l){s.addToRenderList(t);var i=a.currentContext;if(n(a,i,t,s,l)){var h=t._displayOriginX,d=t._displayOriginY,c=t.pathData,u=c.length-1,p=c[0]-h,g=c[1]-d;i.beginPath(),i.moveTo(p,g),t.closePath||(u-=2);for(var y=2;y<u;y+=2){var v=c[y]-h,S=c[y+1]-d;i.lineTo(v,S)}i.closePath(),t.isFilled&&(o(i,t),i.fill()),t.isStroked&&(m(i,t),i.stroke()),i.restore()}};f.exports=r}),93697:((f,x,e)=>{var o=e(55911),m=e(39429);m.register("star",function(n,r,a,t,s,l,i){return this.displayList.add(new o(this.scene,n,r,a,t,s,l,i))})}),81991:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(57017),n=e(64272),f.exports={renderWebGL:m,renderCanvas:n}}),57017:((f,x,e)=>{var o=e(10441),m=e(91296),n=e(34682),r=function(a,t,s,l){s.addToRenderList(t);var i=a.pipelines.set(t.pipeline),h=m(t,s,l),d=i.calcMatrix.copyFrom(h.calc),c=t._displayOriginX,u=t._displayOriginY,p=s.alpha*t.alpha;a.pipelines.preBatch(t),t.isFilled&&o(i,d,t,p,c,u),t.isStroked&&n(i,t,p,c,u),a.pipelines.postBatch(t)};f.exports=r}),36931:((f,x,e)=>{var o=e(83419),m=e(17803),n=e(16483),r=e(96195),a=new o({Extends:m,Mixins:[r],initialize:function(s,l,i,h,d,c,u,p,g,y,v){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=128),c===void 0&&(c=64),u===void 0&&(u=0),p===void 0&&(p=128),g===void 0&&(g=128),m.call(this,s,"Triangle",new n(h,d,c,u,p,g));var S=this.geom.right-this.geom.left,w=this.geom.bottom-this.geom.top;this.setPosition(l,i),this.setSize(S,w),y!==void 0&&this.setFillStyle(y,v),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,s,l,i,h,d){return this.geom.setTo(t,s,l,i,h,d),this.updateData()},updateData:function(){var t=[],s=this.geom,l=this._tempLine;return s.getLineA(l),t.push(l.x1,l.y1,l.x2,l.y2),s.getLineB(l),t.push(l.x2,l.y2),s.getLineC(l),t.push(l.x2,l.y2),this.pathData=t,this}});f.exports=a}),85172:((f,x,e)=>{var o=e(65960),m=e(75177),n=e(20926),r=function(a,t,s,l){s.addToRenderList(t);var i=a.currentContext;if(n(a,i,t,s,l)){var h=t._displayOriginX,d=t._displayOriginY,c=t.geom.x1-h,u=t.geom.y1-d,p=t.geom.x2-h,g=t.geom.y2-d,y=t.geom.x3-h,v=t.geom.y3-d;i.beginPath(),i.moveTo(c,u),i.lineTo(p,g),i.lineTo(y,v),i.closePath(),t.isFilled&&(o(i,t),i.fill()),t.isStroked&&(m(i,t),i.stroke()),i.restore()}};f.exports=r}),45245:((f,x,e)=>{var o=e(39429),m=e(36931);o.register("triangle",function(n,r,a,t,s,l,i,h,d,c){return this.displayList.add(new m(this.scene,n,r,a,t,s,l,i,h,d,c))})}),96195:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(83253),n=e(85172),f.exports={renderWebGL:m,renderCanvas:n}}),83253:((f,x,e)=>{var o=e(91296),m=e(34682),n=e(70554),r=function(a,t,s,l){s.addToRenderList(t);var i=a.pipelines.set(t.pipeline),h=o(t,s,l);i.calcMatrix.copyFrom(h.calc);var d=t._displayOriginX,c=t._displayOriginY,u=s.alpha*t.alpha;if(a.pipelines.preBatch(t),t.isFilled){var p=i.fillTint,g=n.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*u);p.TL=g,p.TR=g,p.BL=g,p.BR=g;var y=t.geom.x1-d,v=t.geom.y1-c,S=t.geom.x2-d,w=t.geom.y2-c,T=t.geom.x3-d,C=t.geom.y3-c;i.batchFillTriangle(y,v,S,w,T,C,h.sprite,h.camera)}t.isStroked&&m(i,t,u,d,c),a.pipelines.postBatch(t)};f.exports=r}),68287:((f,x,e)=>{var o=e(9674),m=e(83419),n=e(31401),r=e(95643),a=e(92751),t=new m({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,a],initialize:function(l,i,h,d,c){r.call(this,l,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(d,c),this.setPosition(i,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,l){this.anims.update(s,l)},play:function(s,l){return this.anims.play(s,l)},playReverse:function(s,l){return this.anims.playReverse(s,l)},playAfterDelay:function(s,l){return this.anims.playAfterDelay(s,l)},playAfterRepeat:function(s,l){return this.anims.playAfterRepeat(s,l)},chain:function(s){return this.anims.chain(s)},stop:function(){return this.anims.stop()},stopAfterDelay:function(s){return this.anims.stopAfterDelay(s)},stopAfterRepeat:function(s){return this.anims.stopAfterRepeat(s)},stopOnFrame:function(s){return this.anims.stopOnFrame(s)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});f.exports=t}),76552:(f=>{var x=function(e,o,m,n){m.addToRenderList(o),e.batchSprite(o,o.frame,m,n)};f.exports=x}),15567:((f,x,e)=>{var o=e(25305),m=e(13059),n=e(44603),r=e(23568),a=e(68287);n.register("sprite",function(t,s){t===void 0&&(t={});var l=r(t,"key",null),i=r(t,"frame",null),h=new a(this.scene,0,0,l,i);return s!==void 0&&(t.add=s),o(this.scene,h,t),m(h,t),h})}),46409:((f,x,e)=>{var o=e(39429),m=e(68287);o.register("sprite",function(n,r,a,t){return this.displayList.add(new m(this.scene,n,r,a,t))})}),92751:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(9409),n=e(76552),f.exports={renderWebGL:m,renderCanvas:n}}),9409:(f=>{var x=function(e,o,m,n){m.addToRenderList(o),o.pipeline.batchSprite(o,m,n)};f.exports=x}),14220:(f=>{var x=function(e,o,m){var n=e.canvas,r=e.context,a=e.style,t=[],s=0,l=m.length;a.maxLines>0&&a.maxLines<m.length&&(l=a.maxLines),a.syncFont(n,r);for(var i=e.letterSpacing,h=0;h<l;h++){var d=a.strokeThickness;if(i===0)d+=r.measureText(m[h]).width;else{for(var c=m[h],u=0;u<c.length;u++)d+=r.measureText(c[u]).width;c.length>1&&(d+=i*(c.length-1))}a.wordWrap&&(d-=r.measureText(" ").width),t[h]=Math.ceil(d),s=Math.max(s,t[h])}var p=o.fontSize+a.strokeThickness,g=p*l,y=e.lineSpacing;return l>1&&(g+=y*(l-1)),{width:s,height:g,lines:l,lineWidths:t,lineSpacing:y,lineHeight:p}};f.exports=x}),79557:((f,x,e)=>{var o=e(27919),m=function(n){var r=o.create(this),a=r.getContext("2d",{willReadFrequently:!0});n.syncFont(r,a);var t=a.measureText(n.testString);if("actualBoundingBoxAscent"in t){var s=t.actualBoundingBoxAscent,l=t.actualBoundingBoxDescent;return o.remove(r),{ascent:s,descent:l,fontSize:s+l}}var i=Math.ceil(t.width*n.baselineX),h=i,d=2*h;h=h*n.baselineY|0,r.width=i,r.height=d,a.fillStyle="#f00",a.fillRect(0,0,i,d),a.font=n._font,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(n.testString,0,h);var c={ascent:0,descent:0,fontSize:0},u=a.getImageData(0,0,i,d);if(!u)return c.ascent=h,c.descent=h+6,c.fontSize=c.ascent+c.descent,o.remove(r),c;var p=u.data,g=p.length,y=i*4,v,S,w=0,T=!1;for(v=0;v<h;v++){for(S=0;S<y;S+=4)if(p[w+S]!==255){T=!0;break}if(!T)w+=y;else break}for(c.ascent=h-v,w=g-y,T=!1,v=d;v>h;v--){for(S=0;S<y;S+=4)if(p[w+S]!==255){T=!0;break}if(!T)w-=y;else break}return c.descent=v-h,c.fontSize=c.ascent+c.descent,o.remove(r),c};f.exports=m}),50171:((f,x,e)=>{var o=e(40366),m=e(27919),n=e(83419),r=e(31401),a=e(95643),t=e(14220),s=e(35154),l=e(35846),i=e(61771),h=e(35762),d=e(45650),c=new n({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,i],initialize:function(p,g,y,v,S){g===void 0&&(g=0),y===void 0&&(y=0),a.call(this,p,"Text"),this.renderer=p.sys.renderer,this.setPosition(g,y),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=m.create(this),this.context,this.style=new h(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=d(),this.texture=p.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(v),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),S&&S.letterSpacing&&this.setLetterSpacing(S.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(u){var p=this.style;if(p.wordWrapCallback){var g=p.wordWrapCallback.call(p.wordWrapCallbackScope,u,this);return Array.isArray(g)&&(g=g.join(`
`)),g}else return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(u,this.context,this.style.wordWrapWidth):this.basicWordWrap(u,this.context,this.style.wordWrapWidth):u},advancedWordWrap:function(u,p,g){for(var y="",v=u.replace(/ +/gi," ").split(this.splitRegExp),S=v.length,w=0;w<S;w++){var T=v[w],C="";T=T.replace(/^ *|\s*$/gi,"");var M=T.length*this.letterSpacing,E=p.measureText(T).width+M;if(E<g){y+=T+`
`;continue}for(var P=g,A=T.split(" "),D=0;D<A.length;D++){var W=A[D],V=W+" ",K=V.length*this.letterSpacing,X=p.measureText(V).width+K;if(X>P){if(D===0){for(var R=V;R.length;){R=R.slice(0,-1);var H=R.length*this.letterSpacing;if(X=p.measureText(R).width+H,X<=P)break}if(!R.length)throw new Error("wordWrapWidth < a single character");var L=W.substr(R.length);A[D]=L,C+=R}var N=A[D].length?D:D+1,z=A.slice(N).join(" ").replace(/[ \n]*$/gi,"");v.splice(w+1,0,z),S=v.length;break}else C+=V,P-=X}y+=C.replace(/[ \n]*$/gi,"")+`
`}return y=y.replace(/[\s|\n]*$/gi,""),y},basicWordWrap:function(u,p,g){for(var y="",v=u.split(this.splitRegExp),S=v.length-1,w=p.measureText(" ").width,T=0;T<=S;T++){for(var C=g,M=v[T].split(" "),E=M.length-1,P=0;P<=E;P++){var A=M[P],D=A.length*this.letterSpacing,W=p.measureText(A).width+D,V=W;P<E&&(V+=w),V>C&&P>0&&(y+=`
`,C=g),y+=A,P<E?(y+=" ",C-=V):C-=W}T<S&&(y+=`
`)}return y},getWrappedText:function(u){u===void 0&&(u=this._text),this.style.syncFont(this.canvas,this.context);var p=this.runWordWrap(u);return p.split(this.splitRegExp)},setText:function(u){return!u&&u!==0&&(u=""),Array.isArray(u)&&(u=u.join(`
`)),u!==this._text&&(this._text=u.toString(),this.updateText()),this},appendText:function(u,p){p===void 0&&(p=!0),!u&&u!==0&&(u=""),Array.isArray(u)&&(u=u.join(`
`)),u=u.toString();var g=this._text.concat(p?`
`+u:u);return g!==this._text&&(this._text=g,this.updateText()),this},setStyle:function(u){return this.style.setStyle(u)},setFont:function(u){return this.style.setFont(u)},setFontFamily:function(u){return this.style.setFontFamily(u)},setFontSize:function(u){return this.style.setFontSize(u)},setFontStyle:function(u){return this.style.setFontStyle(u)},setFixedSize:function(u,p){return this.style.setFixedSize(u,p)},setBackgroundColor:function(u){return this.style.setBackgroundColor(u)},setFill:function(u){return this.style.setFill(u)},setColor:function(u){return this.style.setColor(u)},setStroke:function(u,p){return this.style.setStroke(u,p)},setShadow:function(u,p,g,y,v,S){return this.style.setShadow(u,p,g,y,v,S)},setShadowOffset:function(u,p){return this.style.setShadowOffset(u,p)},setShadowColor:function(u){return this.style.setShadowColor(u)},setShadowBlur:function(u){return this.style.setShadowBlur(u)},setShadowStroke:function(u){return this.style.setShadowStroke(u)},setShadowFill:function(u){return this.style.setShadowFill(u)},setWordWrapWidth:function(u,p){return this.style.setWordWrapWidth(u,p)},setWordWrapCallback:function(u,p){return this.style.setWordWrapCallback(u,p)},setAlign:function(u){return this.style.setAlign(u)},setResolution:function(u){return this.style.setResolution(u)},setLineSpacing:function(u){return this.lineSpacing=u,this.updateText()},setLetterSpacing:function(u){return this.letterSpacing=u,this.updateText()},setPadding:function(u,p,g,y){if(typeof u=="object"){var v=u,S=s(v,"x",null);S!==null?(u=S,g=S):(u=s(v,"left",0),g=s(v,"right",u));var w=s(v,"y",null);w!==null?(p=w,y=w):(p=s(v,"top",0),y=s(v,"bottom",p))}else u===void 0&&(u=0),p===void 0&&(p=u),g===void 0&&(g=u),y===void 0&&(y=p);return this.padding.left=u,this.padding.top=p,this.padding.right=g,this.padding.bottom=y,this.updateText()},setMaxLines:function(u){return this.style.setMaxLines(u)},setRTL:function(u){u===void 0&&(u=!0);var p=this.style;return p.rtl===u?this:(p.rtl=u,u?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),p.align==="left"?p.align="right":p.align==="right"&&(p.align="left"),this)},updateText:function(){var u=this.canvas,p=this.context,g=this.style,y=g.resolution,v=g.metrics;g.syncFont(u,p);var S=this._text;(g.wordWrapWidth||g.wordWrapCallback)&&(S=this.runWordWrap(this._text));var w=S.split(this.splitRegExp),T=t(this,v,w),C=this.padding,M;g.fixedWidth===0?(this.width=T.width+C.left+C.right,M=T.width):(this.width=g.fixedWidth,M=this.width-C.left-C.right,M<T.width&&(M=T.width)),g.fixedHeight===0?this.height=T.height+C.top+C.bottom:this.height=g.fixedHeight;var E=this.width,P=this.height;this.updateDisplayOrigin(),E*=y,P*=y,E=Math.max(E,1),P=Math.max(P,1),u.width!==E||u.height!==P?(u.width=E,u.height=P,this.frame.setSize(E,P),g.syncFont(u,p),g.rtl&&(p.direction="rtl")):p.clearRect(0,0,E,P),p.save(),p.scale(y,y),g.backgroundColor&&(p.fillStyle=g.backgroundColor,p.fillRect(0,0,E,P)),g.syncStyle(u,p),p.translate(C.left,C.top);for(var A,D,W=0;W<T.lines;W++){if(A=g.strokeThickness/2,D=g.strokeThickness/2+W*T.lineHeight+v.ascent,W>0&&(D+=T.lineSpacing*W),g.rtl)A=E-A-C.left-C.right;else if(g.align==="right")A+=M-T.lineWidths[W];else if(g.align==="center")A+=(M-T.lineWidths[W])/2;else if(g.align==="justify"){var V=.85;if(T.lineWidths[W]/T.width>=V){var K=T.width-T.lineWidths[W],X=p.measureText(" ").width,R=w[W].trim(),H=R.split(" ");K+=(w[W].length-R.length)*X;for(var L=Math.floor(K/X),N=0;L>0;)H[N]+=" ",N=(N+1)%(H.length-1||1),--L;w[W]=H.join(" ")}}this.autoRound&&(A=Math.round(A),D=Math.round(D));var z=this.letterSpacing;if(g.strokeThickness&&z===0&&(g.syncShadow(p,g.shadowStroke),p.strokeText(w[W],A,D)),g.color)if(g.syncShadow(p,g.shadowFill),z!==0)for(var U=0,Y=w[W].split(""),$=0;$<Y.length;$++)g.strokeThickness&&(g.syncShadow(p,g.shadowStroke),p.strokeText(Y[$],A+U,D),g.syncShadow(p,g.shadowFill)),p.fillText(Y[$],A+U,D),U+=p.measureText(Y[$]).width+z;else p.fillText(w[W],A,D)}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(u,this.frame.source.glTexture,!0));var Z=this.input;return Z&&!Z.customHitArea&&(Z.hitArea.width=this.width,Z.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(u){this.setText(u)}},toJSON:function(){var u=r.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return u.data=p,u},preDestroy:function(){l(this.canvas),m.remove(this.canvas);var u=this.texture;u&&u.destroy()}});f.exports=c}),79724:(f=>{var x=function(e,o,m,n){o.width===0||o.height===0||(m.addToRenderList(o),e.batchSprite(o,o.frame,m,n))};f.exports=x}),71259:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(50171);m.register("text",function(a,t){a===void 0&&(a={});var s=n(a,"text",""),l=n(a,"style",null),i=n(a,"padding",null);i!==null&&(l.padding=i);var h=new r(this.scene,0,0,s,l);return t!==void 0&&(a.add=t),o(this.scene,h,a),h.autoRound=n(a,"autoRound",!0),h.resolution=n(a,"resolution",1),h})}),68005:((f,x,e)=>{var o=e(50171),m=e(39429);m.register("text",function(n,r,a,t){return this.displayList.add(new o(this.scene,n,r,a,t))})}),61771:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(34397),n=e(79724),f.exports={renderWebGL:m,renderCanvas:n}}),35762:((f,x,e)=>{var o=e(83419),m=e(23568),n=e(35154),r=e(79557),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},t=new o({initialize:function(l,i){this.parent=l,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0)},setStyle:function(s,l,i){l===void 0&&(l=!0),i===void 0&&(i=!1);for(var h in a){var d=i?a[h][1]:this[h];h==="wordWrapCallback"||h==="wordWrapCallbackScope"?this[h]=n(s,a[h][0],d):s&&h==="fontSize"&&typeof s.fontSize=="number"?this[h]=s.fontSize.toString()+"px":this[h]=m(s,a[h][0],d)}var c=n(s,"font",null);c!==null&&this.setFont(c,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var u=n(s,"fill",null);u!==null&&(this.color=u);var p=n(s,"metrics",!1);return p?this.metrics={ascent:n(p,"ascent",0),descent:n(p,"descent",0),fontSize:n(p,"fontSize",0)}:(l||!this.metrics)&&(this.metrics=r(this)),l?this.parent.updateText():this.parent},syncFont:function(s,l){l.font=this._font},syncStyle:function(s,l){l.textBaseline="alphabetic",l.fillStyle=this.color,l.strokeStyle=this.stroke,l.lineWidth=this.strokeThickness,l.lineCap="round",l.lineJoin="round"},syncShadow:function(s,l){l?(s.shadowOffsetX=this.shadowOffsetX,s.shadowOffsetY=this.shadowOffsetY,s.shadowColor=this.shadowColor,s.shadowBlur=this.shadowBlur):(s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowColor=0,s.shadowBlur=0)},update:function(s){return s&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=r(this)),this.parent.updateText()},setFont:function(s,l){l===void 0&&(l=!0);var i=s,h="",d="";if(typeof s!="string")i=n(s,"fontFamily","Courier"),h=n(s,"fontSize","16px"),d=n(s,"fontStyle","");else{var c=s.split(" "),u=0;d=c.length>2?c[u++]:"",h=c[u++]||"16px",i=c[u++]||"Courier"}return(i!==this.fontFamily||h!==this.fontSize||d!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=h,this.fontStyle=d,l&&this.update(!0)),this.parent},setFontFamily:function(s){return this.fontFamily!==s&&(this.fontFamily=s,this.update(!0)),this.parent},setFontStyle:function(s){return this.fontStyle!==s&&(this.fontStyle=s,this.update(!0)),this.parent},setFontSize:function(s){return typeof s=="number"&&(s=s.toString()+"px"),this.fontSize!==s&&(this.fontSize=s,this.update(!0)),this.parent},setTestString:function(s){return this.testString=s,this.update(!0)},setFixedSize:function(s,l){return this.fixedWidth=s,this.fixedHeight=l,s&&(this.parent.width=s),l&&(this.parent.height=l),this.update(!1)},setBackgroundColor:function(s){return this.backgroundColor=s,this.update(!1)},setFill:function(s){return this.color=s,this.update(!1)},setColor:function(s){return this.color=s,this.update(!1)},setResolution:function(s){return this.resolution=s,this.update(!1)},setStroke:function(s,l){return l===void 0&&(l=this.strokeThickness),s===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==s||this.strokeThickness!==l)&&(this.stroke=s,this.strokeThickness=l,this.update(!0)),this.parent},setShadow:function(s,l,i,h,d,c){return s===void 0&&(s=0),l===void 0&&(l=0),i===void 0&&(i="#000"),h===void 0&&(h=0),d===void 0&&(d=!1),c===void 0&&(c=!0),this.shadowOffsetX=s,this.shadowOffsetY=l,this.shadowColor=i,this.shadowBlur=h,this.shadowStroke=d,this.shadowFill=c,this.update(!1)},setShadowOffset:function(s,l){return s===void 0&&(s=0),l===void 0&&(l=s),this.shadowOffsetX=s,this.shadowOffsetY=l,this.update(!1)},setShadowColor:function(s){return s===void 0&&(s="#000"),this.shadowColor=s,this.update(!1)},setShadowBlur:function(s){return s===void 0&&(s=0),this.shadowBlur=s,this.update(!1)},setShadowStroke:function(s){return this.shadowStroke=s,this.update(!1)},setShadowFill:function(s){return this.shadowFill=s,this.update(!1)},setWordWrapWidth:function(s,l){return l===void 0&&(l=!1),this.wordWrapWidth=s,this.wordWrapUseAdvanced=l,this.update(!1)},setWordWrapCallback:function(s,l){return l===void 0&&(l=null),this.wordWrapCallback=s,this.wordWrapCallbackScope=l,this.update(!1)},setAlign:function(s){return s===void 0&&(s="left"),this.align=s,this.update(!1)},setMaxLines:function(s){return s===void 0&&(s=0),this.maxLines=s,this.update(!1)},getTextMetrics:function(){var s=this.metrics;return{ascent:s.ascent,descent:s.descent,fontSize:s.fontSize}},toJSON:function(){var s={};for(var l in a)s[l]=this[l];return s.metrics=this.getTextMetrics(),s},destroy:function(){this.parent=void 0}});f.exports=t}),34397:((f,x,e)=>{var o=e(70554),m=function(n,r,a,t){if(!(r.width===0||r.height===0)){a.addToRenderList(r);var s=r.frame,l=s.width,i=s.height,h=o.getTintAppendFloatAlpha,d=n.pipelines.set(r.pipeline,r),c=d.setTexture2D(s.glTexture,r);d.batchTexture(r,s.glTexture,l,i,r.x,r.y,l/r.style.resolution,i/r.style.resolution,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,l,i,h(r.tintTopLeft,a.alpha*r._alphaTL),h(r.tintTopRight,a.alpha*r._alphaTR),h(r.tintBottomLeft,a.alpha*r._alphaBL),h(r.tintBottomRight,a.alpha*r._alphaBR),r.tintFill,0,0,a,t,!1,c)}};f.exports=m}),20839:((f,x,e)=>{var o=e(27919),m=e(83419),n=e(31401),r=e(95643),a=e(98439),t=e(68703),s=e(56295),l=e(45650),i=e(26099),h=8,d=new m({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,s],initialize:function(u,p,g,y,v,S,w){var T=u.sys.renderer;r.call(this,u,"TileSprite");var C=u.sys.textures.get(S),M=C.get(w);M.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),C=u.sys.textures.get("__MISSING"),M=C.get()),C.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),C=u.sys.textures.get("__MISSING"),M=C.get()),!y||!v?(y=y||M.width,v=v||M.height):(y=Math.floor(y),v=Math.floor(v)),this._tilePosition=new i,this._tileScale=new i(1,1),this.dirty=!1,this.renderer=T,this.canvas=o.create(this,y,v),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=C,this.displayFrame=M,this._crop=this.resetCropObject(),this._textureKey=l(),this.texture=u.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=a(M.width),this.potHeight=a(M.height),this.fillCanvas=o.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(p,g),this.setSize(y,v),this.setFrame(w),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(c,u){return this.displayTexture=this.scene.sys.textures.get(c),this.setFrame(u)},setFrame:function(c){var u=this.displayTexture.get(c);return this.potWidth=a(u.width),this.potHeight=a(u.height),this.canvas.width=0,!u.cutWidth||!u.cutHeight?this.renderFlags&=~h:this.renderFlags|=h,this.displayFrame=u,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(c,u){return c!==void 0&&(this.tilePositionX=c),u!==void 0&&(this.tilePositionY=u),this},setTileScale:function(c,u){return c===void 0&&(c=this.tileScaleX),u===void 0&&(u=c),this.tileScaleX=c,this.tileScaleY=u,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var c=this.displayFrame;if(c.source.isRenderTexture||c.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var u=this.fillContext,p=this.fillCanvas,g=this.potWidth,y=this.potHeight;(!this.renderer||!this.renderer.gl)&&(g=c.cutWidth,y=c.cutHeight),u.clearRect(0,0,g,y),p.width=g,p.height=y,u.drawImage(c.source.image,c.cutX,c.cutY,c.cutWidth,c.cutHeight,0,0,g,y),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(p,this.fillPattern):this.fillPattern=u.createPattern(p,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var c=this.canvas;if((c.width!==this.width||c.height!==this.height)&&(c.width=this.width,c.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var u=this.context;this.scene.sys.game.config.antialias||t.disable(u);var p=this._tileScale.x,g=this._tileScale.y,y=this._tilePosition.x,v=this._tilePosition.y;u.clearRect(0,0,this.width,this.height),u.save(),u.scale(p,g),u.translate(-y,-v),u.fillStyle=this.fillPattern,u.fillRect(y,v,this.width/p,this.height/g),u.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),o.remove(this.canvas),o.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var c=this.texture;c&&c.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(c){this._tilePosition.x=c,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(c){this._tilePosition.y=c,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(c){this._tileScale.x=c,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(c){this._tileScale.y=c,this.dirty=!0}}});f.exports=d}),46992:(f=>{var x=function(e,o,m,n){o.updateCanvas(),m.addToRenderList(o),e.batchSprite(o,o.frame,m,n)};f.exports=x}),14167:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(20839);m.register("tileSprite",function(a,t){a===void 0&&(a={});var s=n(a,"x",0),l=n(a,"y",0),i=n(a,"width",512),h=n(a,"height",512),d=n(a,"key",""),c=n(a,"frame",""),u=new r(this.scene,s,l,i,h,d,c);return t!==void 0&&(a.add=t),o(this.scene,u,a),u})}),91681:((f,x,e)=>{var o=e(20839),m=e(39429);m.register("tileSprite",function(n,r,a,t,s,l){return this.displayList.add(new o(this.scene,n,r,a,t,s,l))})}),56295:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(18553),n=e(46992),f.exports={renderWebGL:m,renderCanvas:n}}),18553:((f,x,e)=>{var o=e(70554),m=function(n,r,a,t){r.updateCanvas();var s=r.width,l=r.height;if(!(s===0||l===0)){a.addToRenderList(r);var i=o.getTintAppendFloatAlpha,h=n.pipelines.set(r.pipeline,r),d=h.setTexture2D(r.fillPattern,r);h.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,s,l,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*s,r.originY*l,0,0,s,l,i(r.tintTopLeft,a.alpha*r._alphaTL),i(r.tintTopRight,a.alpha*r._alphaTR),i(r.tintBottomLeft,a.alpha*r._alphaBL),i(r.tintBottomRight,a.alpha*r._alphaBR),r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,a,t,!1,d)}};f.exports=m}),18471:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(31401),r=e(51708),a=e(8443),t=e(95643),s=e(36383),l=e(14463),i=e(45650),h=e(10247),d=new m({Extends:t,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.TextureCrop,n.Tint,n.Transform,n.Visible,h],initialize:function(u,p,g,y){t.call(this,u,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=i(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var v=u.sys.game;this._device=v.device.video,this.setPosition(p,g),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),v.events.on(a.PAUSE,this.globalPause,this),v.events.on(a.RESUME,this.globalResume,this);var S=u.sys.sound;S&&S.on(l.GLOBAL_MUTE,this.globalMute,this),y&&this.load(y)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(c){var u=this.scene.sys.cache.video.get(c);return u?(this.cacheKey=c,this.loadHandler(u.url,u.noAudio,u.crossOrigin)):console.warn("No video in cache for key: "+c),this},changeSource:function(c,u,p,g,y){u===void 0&&(u=!0),p===void 0&&(p=!1),this.cacheKey!==c&&(this.load(c),u&&this.play(p,g,y))},getVideoKey:function(){return this.cacheKey},loadURL:function(c,u,p){u===void 0&&(u=!1);var g=this._device.getVideoURL(c);return g?(this.cacheKey="",this.loadHandler(g.url,u,p)):console.warn("No supported video format found for "+c),this},loadMediaStream:function(c,u,p){return this.loadHandler(null,u,p,c)},loadHandler:function(c,u,p,g){u||(u=!1);var y=this.video;if(y?(this.removeLoadEventHandlers(),this.stop()):(y=document.createElement("video"),y.controls=!1,y.setAttribute("playsinline","playsinline"),y.setAttribute("preload","auto"),y.setAttribute("disablePictureInPicture","true")),u?(y.muted=!0,y.defaultMuted=!0,y.setAttribute("autoplay","autoplay")):(y.muted=!1,y.defaultMuted=!1,y.removeAttribute("autoplay")),p?y.setAttribute("crossorigin",p):y.removeAttribute("crossorigin"),g)if("srcObject"in y)try{y.srcObject=g}catch(S){if(S.name!=="TypeError")throw S;y.src=URL.createObjectURL(g)}else y.src=URL.createObjectURL(g);else y.src=c;this.retry=0,this.video=y,this._playCalled=!1,y.load(),this.addLoadEventHandlers();var v=this.scene.sys.textures.get(this._key);return this.setTexture(v),this},requestVideoFrame:function(c,u){var p=this.video;if(p){var g=u.width,y=u.height,v=this.videoTexture,S=this.videoTextureSource,w=!v||S.source!==p;w?(this._codePaused=p.paused,this._codeMuted=p.muted,v?(S.source=p,S.width=g,S.height=y,v.get().setSize(g,y)):(v=this.scene.sys.textures.create(this._key,p,g,y),v.add("__BASE",0,0,0,g,y),this.setTexture(v),this.videoTexture=v,this.videoTextureSource=v.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(r.VIDEO_TEXTURE,this,v)),this.setSizeToFrame(),this.updateDisplayOrigin()):S.update(),this.isStalled=!1,this.metadata=u;var T=u.mediaTime;w&&(this._lastUpdate=T,this.emit(r.VIDEO_CREATED,this,g,y),this.frameReady||(this.frameReady=!0,this.emit(r.VIDEO_PLAY,this))),this._playingMarker?T>=this._markerOut&&(p.loop?(p.currentTime=this._markerIn,this.emit(r.VIDEO_LOOP,this)):(this.stop(!1),this.emit(r.VIDEO_COMPLETE,this))):T<this._lastUpdate&&this.emit(r.VIDEO_LOOP,this),this._lastUpdate=T,this._getFrame?(this.removeEventHandlers(),p.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(c,u,p){u===void 0&&(u=-1),p===void 0&&(p=s.MAX_SAFE_INTEGER);var g=this.video;return!g||this.isPlaying()?(g||console.warn("Video not loaded"),this):(c===void 0&&(c=g.loop),g.loop=c,this._markerIn=u,this._markerOut=p,this._playingMarker=u>-1&&p>u&&p<s.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=g.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var c=this.video;return!c||this.isPlaying()?(c||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=c.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var c=this.video;c&&(c.addEventListener("error",this._loadCallbackHandler),c.addEventListener("abort",this._loadCallbackHandler),c.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var c=this.video;c&&(c.removeEventListener("error",this._loadCallbackHandler),c.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var c=this.video;if(c){var u=this._callbacks;for(var p in u)c.addEventListener(p,u[p])}},removeEventHandlers:function(){var c=this.video;if(c){var u=this._callbacks;for(var p in u)c.removeEventListener(p,u[p])}},createPlayPromise:function(c){c===void 0&&(c=!0);var u=this.video,p=u.play();if(p!==void 0){var g=this.playSuccess.bind(this),y=this.playError.bind(this);if(!c){var v=this;y=function(){v.failedPlayAttempts++}}p.then(g).catch(y)}else u.addEventListener("playing",this._callbacks.legacy),c||this.failedPlayAttempts++},addMarker:function(c,u,p){return!isNaN(u)&&u>=0&&!isNaN(p)&&p>u&&(this.markers[c]=[u,p]),this},playMarker:function(c,u){var p=this.markers[c];return p&&this.play(u,p[0],p[1]),this},removeMarker:function(c){return delete this.markers[c],this},snapshot:function(c,u){return c===void 0&&(c=this.width),u===void 0&&(u=this.height),this.snapshotArea(0,0,this.width,this.height,c,u)},snapshotArea:function(c,u,p,g,y,v){c===void 0&&(c=0),u===void 0&&(u=0),p===void 0&&(p=this.width),g===void 0&&(g=this.height),y===void 0&&(y=p),v===void 0&&(v=g);var S=this.video,w=this.snapshotTexture;return w?(w.setSize(y,v),S&&w.context.drawImage(S,c,u,p,g,0,0,y,v)):(w=this.scene.sys.textures.createCanvas(i(),y,v),this.snapshotTexture=w,S&&w.context.drawImage(S,c,u,p,g,0,0,y,v)),w.update()},saveSnapshotTexture:function(c){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,c):this.snapshotTexture=this.scene.sys.textures.createCanvas(c,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(r.VIDEO_UNLOCKED,this));var c=this.scene.sys.sound;c&&c.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(c){var u=c.name;u==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(r.VIDEO_LOCKED,this)):u==="NotSupportedError"?(this.stop(!1),this.emit(r.VIDEO_UNSUPPORTED,this,c)):(this.stop(!1),this.emit(r.VIDEO_ERROR,this,c))},legacyPlayHandler:function(){var c=this.video;c&&(this.playSuccess(),c.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(r.VIDEO_PLAYING,this)},loadErrorHandler:function(c){this.stop(!1),this.emit(r.VIDEO_ERROR,this,c)},metadataHandler:function(c){this.emit(r.VIDEO_METADATA,this,c)},setSizeToFrame:function(c){c||(c=this.frame),this.width=c.realWidth,this.height=c.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this},stalledHandler:function(c){this.isStalled=!0,this.emit(r.VIDEO_STALLED,this,c)},completeHandler:function(){this._playCalled=!1,this.emit(r.VIDEO_COMPLETE,this)},preUpdate:function(c,u){var p=this.video;!p||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=u,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(c){var u=this.video;if(u){var p=u.duration;if(p!==1/0&&!isNaN(p)){var g=p*c;this.setCurrentTime(g)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(c){var u=this.video;if(u){if(typeof c=="string"){var p=c[0],g=parseFloat(c.substr(1));p==="+"?c=u.currentTime+g:p==="-"&&(c=u.currentTime-g)}u.currentTime=c}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(r.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(r.VIDEO_SEEKED,this)},getProgress:function(){var c=this.video;if(c){var u=c.duration;if(u!==1/0&&!isNaN(u))return c.currentTime/u}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(c){c===void 0&&(c=!0),this._codeMuted=c;var u=this.video;return u&&(u.muted=this._systemMuted?!0:c),this},isMuted:function(){return this._codeMuted},globalMute:function(c,u){this._systemMuted=u;var p=this.video;p&&(p.muted=this._codeMuted?!0:u)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(c){c===void 0&&(c=!0);var u=this.video;return this._codePaused=c,u&&!u.ended&&(c?u.paused||(this.removeEventHandlers(),u.pause()):c||(this._playCalled?u.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(c){return c===void 0&&(c=1),this.video&&(this.video.volume=o(c,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(c){return this.video&&(this.video.playbackRate=c),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(c){return c===void 0&&(c=!0),this.video&&(this.video.loop=c),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(c,u){return u===void 0&&(u=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,c),this.videoTextureSource.setFlipY(u)),this._key=c,this.flipY=u,!!this.videoTexture},stop:function(c){c===void 0&&(c=!0);var u=this.video;return u&&(this.removeEventHandlers(),u.cancelVideoFrameCallback(this._rfvCallbackId),u.pause()),this.retry=0,this._playCalled=!1,c&&this.emit(r.VIDEO_STOP,this),this},removeVideoElement:function(){var c=this.video;if(c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("autoplay"),c.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var c=this.scene.sys.game.events;c.off(a.PAUSE,this.globalPause,this),c.off(a.RESUME,this.globalResume,this);var u=this.scene.sys.sound;u&&u.off(l.GLOBAL_MUTE,this.globalMute,this)}});f.exports=d}),58352:(f=>{var x=function(e,o,m,n){o.videoTexture&&(m.addToRenderList(o),e.batchSprite(o,o.frame,m,n))};f.exports=x}),11511:((f,x,e)=>{var o=e(25305),m=e(44603),n=e(23568),r=e(18471);m.register("video",function(a,t){a===void 0&&(a={});var s=n(a,"key",null),l=new r(this.scene,0,0,s);return t!==void 0&&(a.add=t),o(this.scene,l,a),l})}),89025:((f,x,e)=>{var o=e(18471),m=e(39429);m.register("video",function(n,r,a){return this.displayList.add(new o(this.scene,n,r,a))})}),10247:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(29849),n=e(58352),f.exports={renderWebGL:m,renderCanvas:n}}),29849:(f=>{var x=function(e,o,m,n){o.videoTexture&&(m.addToRenderList(o),o.pipeline.batchSprite(o,m,n))};f.exports=x}),41481:((f,x,e)=>{var o=e(10312),m=e(96503),n=e(87902),r=e(83419),a=e(31401),t=e(95643),s=e(87841),l=e(37303),i=new r({Extends:t,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(d,c,u,p,g){p===void 0&&(p=1),g===void 0&&(g=p),t.call(this,d,"Zone"),this.setPosition(c,u),this.width=p,this.height=g,this.blendMode=o.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(h){this.scaleX=h/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(h){this.scaleY=h/this.height}},setSize:function(h,d,c){c===void 0&&(c=!0),this.width=h,this.height=d,this.updateDisplayOrigin();var u=this.input;return c&&u&&!u.customHitArea&&(u.hitArea.width=h,u.hitArea.height=d),this},setDisplaySize:function(h,d){return this.displayWidth=h,this.displayHeight=d,this},setCircleDropZone:function(h){return this.setDropZone(new m(0,0,h),n)},setRectangleDropZone:function(h,d){return this.setDropZone(new s(0,0,h,d),l)},setDropZone:function(h,d){return this.input||this.setInteractive(h,d,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(h,d,c){c.addToRenderList(d)},renderWebGL:function(h,d,c){c.addToRenderList(d)}});f.exports=i}),95261:((f,x,e)=>{var o=e(44603),m=e(23568),n=e(41481);o.register("zone",function(r){var a=m(r,"x",0),t=m(r,"y",0),s=m(r,"width",1),l=m(r,"height",s);return new n(this.scene,a,t,s,l)})}),84175:((f,x,e)=>{var o=e(41481),m=e(39429);m.register("zone",function(n,r,a,t){return this.displayList.add(new o(this.scene,n,r,a,t))})}),95166:(f=>{var x=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};f.exports=x}),96503:((f,x,e)=>{var o=e(83419),m=e(87902),n=e(26241),r=e(79124),a=e(23777),t=e(28176),s=new o({initialize:function(i,h,d){i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=0),this.type=a.CIRCLE,this.x=i,this.y=h,this._radius=d,this._diameter=d*2},contains:function(l,i){return m(this,l,i)},getPoint:function(l,i){return n(this,l,i)},getPoints:function(l,i,h){return r(this,l,i,h)},getRandomPoint:function(l){return t(this,l)},setTo:function(l,i,h){return this.x=l,this.y=i,this._radius=h,this._diameter=h*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(l,i){return i===void 0&&(i=l),this.x=l,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(l){this._radius=l,this._diameter=l*2}},diameter:{get:function(){return this._diameter},set:function(l){this._diameter=l,this._radius=l*.5}},left:{get:function(){return this.x-this._radius},set:function(l){this.x=l+this._radius}},right:{get:function(){return this.x+this._radius},set:function(l){this.x=l-this._radius}},top:{get:function(){return this.y-this._radius},set:function(l){this.y=l+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(l){this.y=l-this._radius}}});f.exports=s}),71562:(f=>{var x=function(e){return 2*(Math.PI*e.radius)};f.exports=x}),92110:((f,x,e)=>{var o=e(2141),m=function(n,r,a){return a===void 0&&(a=new o),a.x=n.x+n.radius*Math.cos(r),a.y=n.y+n.radius*Math.sin(r),a};f.exports=m}),42250:((f,x,e)=>{var o=e(96503),m=function(n){return new o(n.x,n.y,n.radius)};f.exports=m}),87902:(f=>{var x=function(e,o,m){if(e.radius>0&&o>=e.left&&o<=e.right&&m>=e.top&&m<=e.bottom){var n=(e.x-o)*(e.x-o),r=(e.y-m)*(e.y-m);return n+r<=e.radius*e.radius}else return!1};f.exports=x}),5698:((f,x,e)=>{var o=e(87902),m=function(n,r){return o(n,r.x,r.y)};f.exports=m}),70588:((f,x,e)=>{var o=e(87902),m=function(n,r){return o(n,r.x,r.y)&&o(n,r.right,r.y)&&o(n,r.x,r.bottom)&&o(n,r.right,r.bottom)};f.exports=m}),26394:(f=>{var x=function(e,o){return o.setTo(e.x,e.y,e.radius)};f.exports=x}),76278:(f=>{var x=function(e,o){return e.x===o.x&&e.y===o.y&&e.radius===o.radius};f.exports=x}),2074:((f,x,e)=>{var o=e(87841),m=function(n,r){return r===void 0&&(r=new o),r.x=n.left,r.y=n.top,r.width=n.diameter,r.height=n.diameter,r};f.exports=m}),26241:((f,x,e)=>{var o=e(92110),m=e(62945),n=e(36383),r=e(2141),a=function(t,s,l){l===void 0&&(l=new r);var i=m(s,0,n.PI2);return o(t,i,l)};f.exports=a}),79124:((f,x,e)=>{var o=e(71562),m=e(92110),n=e(62945),r=e(36383),a=function(t,s,l,i){i===void 0&&(i=[]),!s&&l>0&&(s=o(t)/l);for(var h=0;h<s;h++){var d=n(h/s,0,r.PI2);i.push(m(t,d))}return i};f.exports=a}),50884:(f=>{var x=function(e,o,m){return e.x+=o,e.y+=m,e};f.exports=x}),39212:(f=>{var x=function(e,o){return e.x+=o.x,e.y+=o.y,e};f.exports=x}),28176:((f,x,e)=>{var o=e(2141),m=function(n,r){r===void 0&&(r=new o);var a=2*Math.PI*Math.random(),t=Math.random()+Math.random(),s=t>1?2-t:t,l=s*Math.cos(a),i=s*Math.sin(a);return r.x=n.x+l*n.radius,r.y=n.y+i*n.radius,r};f.exports=m}),88911:((f,x,e)=>{var o=e(96503);o.Area=e(95166),o.Circumference=e(71562),o.CircumferencePoint=e(92110),o.Clone=e(42250),o.Contains=e(87902),o.ContainsPoint=e(5698),o.ContainsRect=e(70588),o.CopyFrom=e(26394),o.Equals=e(76278),o.GetBounds=e(2074),o.GetPoint=e(26241),o.GetPoints=e(79124),o.Offset=e(50884),o.OffsetPoint=e(39212),o.Random=e(28176),f.exports=o}),23777:(f=>{var x={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};f.exports=x}),78874:(f=>{var x=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};f.exports=x}),92990:(f=>{var x=function(e){var o=e.width/2,m=e.height/2,n=Math.pow(o-m,2)/Math.pow(o+m,2);return Math.PI*(o+m)*(1+3*n/(10+Math.sqrt(4-3*n)))};f.exports=x}),79522:((f,x,e)=>{var o=e(2141),m=function(n,r,a){a===void 0&&(a=new o);var t=n.width/2,s=n.height/2;return a.x=n.x+t*Math.cos(r),a.y=n.y+s*Math.sin(r),a};f.exports=m}),58102:((f,x,e)=>{var o=e(8497),m=function(n){return new o(n.x,n.y,n.width,n.height)};f.exports=m}),81154:(f=>{var x=function(e,o,m){if(e.width<=0||e.height<=0)return!1;var n=(o-e.x)/e.width,r=(m-e.y)/e.height;return n*=n,r*=r,n+r<.25};f.exports=x}),46662:((f,x,e)=>{var o=e(81154),m=function(n,r){return o(n,r.x,r.y)};f.exports=m}),1632:((f,x,e)=>{var o=e(81154),m=function(n,r){return o(n,r.x,r.y)&&o(n,r.right,r.y)&&o(n,r.x,r.bottom)&&o(n,r.right,r.bottom)};f.exports=m}),65534:(f=>{var x=function(e,o){return o.setTo(e.x,e.y,e.width,e.height)};f.exports=x}),8497:((f,x,e)=>{var o=e(83419),m=e(81154),n=e(90549),r=e(48320),a=e(23777),t=e(24820),s=new o({initialize:function(i,h,d,c){i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=0),this.type=a.ELLIPSE,this.x=i,this.y=h,this.width=d,this.height=c},contains:function(l,i){return m(this,l,i)},getPoint:function(l,i){return n(this,l,i)},getPoints:function(l,i,h){return r(this,l,i,h)},getRandomPoint:function(l){return t(this,l)},setTo:function(l,i,h,d){return this.x=l,this.y=i,this.width=h,this.height=d,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(l,i){return i===void 0&&(i=l),this.x=l,this.y=i,this},setSize:function(l,i){return i===void 0&&(i=l),this.width=l,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(l){this.x=l+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(l){this.y=l+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});f.exports=s}),36146:(f=>{var x=function(e,o){return e.x===o.x&&e.y===o.y&&e.width===o.width&&e.height===o.height};f.exports=x}),23694:((f,x,e)=>{var o=e(87841),m=function(n,r){return r===void 0&&(r=new o),r.x=n.left,r.y=n.top,r.width=n.width,r.height=n.height,r};f.exports=m}),90549:((f,x,e)=>{var o=e(79522),m=e(62945),n=e(36383),r=e(2141),a=function(t,s,l){l===void 0&&(l=new r);var i=m(s,0,n.PI2);return o(t,i,l)};f.exports=a}),48320:((f,x,e)=>{var o=e(92990),m=e(79522),n=e(62945),r=e(36383),a=function(t,s,l,i){i===void 0&&(i=[]),!s&&l>0&&(s=o(t)/l);for(var h=0;h<s;h++){var d=n(h/s,0,r.PI2);i.push(m(t,d))}return i};f.exports=a}),73424:(f=>{var x=function(e,o,m){return e.x+=o,e.y+=m,e};f.exports=x}),44808:(f=>{var x=function(e,o){return e.x+=o.x,e.y+=o.y,e};f.exports=x}),24820:((f,x,e)=>{var o=e(2141),m=function(n,r){r===void 0&&(r=new o);var a=Math.random()*Math.PI*2,t=Math.sqrt(Math.random());return r.x=n.x+t*Math.cos(a)*n.width/2,r.y=n.y+t*Math.sin(a)*n.height/2,r};f.exports=m}),49203:((f,x,e)=>{var o=e(8497);o.Area=e(78874),o.Circumference=e(92990),o.CircumferencePoint=e(79522),o.Clone=e(58102),o.Contains=e(81154),o.ContainsPoint=e(46662),o.ContainsRect=e(1632),o.CopyFrom=e(65534),o.Equals=e(36146),o.GetBounds=e(23694),o.GetPoint=e(90549),o.GetPoints=e(48320),o.Offset=e(73424),o.OffsetPoint=e(44808),o.Random=e(24820),f.exports=o}),55738:((f,x,e)=>{var o=e(23777),m=e(79291),n={Circle:e(88911),Ellipse:e(49203),Intersects:e(91865),Line:e(2529),Mesh:e(73090),Point:e(43711),Polygon:e(58423),Rectangle:e(93232),Triangle:e(84435)};n=m(!1,n,o),f.exports=n}),2044:((f,x,e)=>{var o=e(20339),m=function(n,r){return o(n.x,n.y,r.x,r.y)<=n.radius+r.radius};f.exports=m}),81491:(f=>{var x=function(e,o){var m=o.width/2,n=o.height/2,r=Math.abs(e.x-o.x-m),a=Math.abs(e.y-o.y-n),t=m+e.radius,s=n+e.radius;if(r>t||a>s)return!1;if(r<=m||a<=n)return!0;var l=r-m,i=a-n,h=l*l,d=i*i,c=e.radius*e.radius;return h+d<=c};f.exports=x}),63376:((f,x,e)=>{var o=e(2141),m=e(2044),n=function(r,a,t){if(t===void 0&&(t=[]),m(r,a)){var s=r.x,l=r.y,i=r.radius,h=a.x,d=a.y,c=a.radius,u,p,g,y,v;if(l===d)v=(c*c-i*i-h*h+s*s)/(2*(s-h)),u=1,p=-2*d,g=h*h+v*v-2*h*v+d*d-c*c,y=p*p-4*u*g,y===0?t.push(new o(v,-p/(2*u))):y>0&&(t.push(new o(v,(-p+Math.sqrt(y))/(2*u))),t.push(new o(v,(-p-Math.sqrt(y))/(2*u))));else{var S=(s-h)/(l-d),w=(c*c-i*i-h*h+s*s-d*d+l*l)/(2*(l-d));u=S*S+1,p=2*l*S-2*w*S-2*s,g=s*s+l*l+w*w-i*i-2*l*w,y=p*p-4*u*g,y===0?(v=-p/(2*u),t.push(new o(v,w-v*S))):y>0&&(v=(-p+Math.sqrt(y))/(2*u),t.push(new o(v,w-v*S)),v=(-p-Math.sqrt(y))/(2*u),t.push(new o(v,w-v*S)))}}return t};f.exports=n}),97439:((f,x,e)=>{var o=e(4042),m=e(81491),n=function(r,a,t){if(t===void 0&&(t=[]),m(r,a)){var s=a.getLineA(),l=a.getLineB(),i=a.getLineC(),h=a.getLineD();o(s,r,t),o(l,r,t),o(i,r,t),o(h,r,t)}return t};f.exports=n}),4042:((f,x,e)=>{var o=e(2141),m=e(80462),n=function(r,a,t){if(t===void 0&&(t=[]),m(r,a)){var s=r.x1,l=r.y1,i=r.x2,h=r.y2,d=a.x,c=a.y,u=a.radius,p=i-s,g=h-l,y=s-d,v=l-c,S=p*p+g*g,w=2*(p*y+g*v),T=y*y+v*v-u*u,C=w*w-4*S*T,M,E;if(C===0){var P=-w/(2*S);M=s+P*p,E=l+P*g,P>=0&&P<=1&&t.push(new o(M,E))}else if(C>0){var A=(-w-Math.sqrt(C))/(2*S);M=s+A*p,E=l+A*g,A>=0&&A<=1&&t.push(new o(M,E));var D=(-w+Math.sqrt(C))/(2*S);M=s+D*p,E=l+D*g,D>=0&&D<=1&&t.push(new o(M,E))}}return t};f.exports=n}),36100:((f,x,e)=>{var o=e(25836),m=function(n,r,a,t){a===void 0&&(a=!1);var s=n.x1,l=n.y1,i=n.x2,h=n.y2,d=r.x1,c=r.y1,u=r.x2,p=r.y2,g=i-s,y=h-l,v=u-d,S=p-c,w=g*S-y*v;if(w===0)return null;var T,C,M;if(a){if(T=(g*(c-l)+y*(s-d))/(v*y-S*g),g!==0)C=(d+v*T-s)/g;else if(y!==0)C=(c+S*T-l)/y;else return null;if(C<0||T<0||T>1)return null;M=C}else{if(T=((d-s)*S-(c-l)*v)/w,C=((l-c)*g-(s-d)*y)/w,T<0||T>1||C<0||C>1)return null;M=T}return t===void 0&&(t=new o),t.set(s+g*M,l+y*M,M)};f.exports=m}),3073:((f,x,e)=>{var o=e(36100),m=e(23031),n=e(25836),r=new m,a=new n,t=function(s,l,i,h){i===void 0&&(i=!1),h===void 0&&(h=new n);var d=!1;h.set(),a.set();for(var c=l[l.length-1],u=0;u<l.length;u++){var p=l[u];r.setTo(c.x,c.y,p.x,p.y),c=p,o(s,r,i,a)&&(!d||a.z<h.z)&&(h.copy(a),d=!0)}return d?h:null};f.exports=t}),56362:((f,x,e)=>{var o=e(25836),m=e(61369),n=e(3073),r=new o,a=function(t,s,l,i){i===void 0&&(i=new m),Array.isArray(s)||(s=[s]);var h=!1;i.set(),r.set();for(var d=0;d<s.length;d++)n(t,s[d].points,l,r)&&(!h||r.z<i.z)&&(i.set(r.x,r.y,r.z,d),h=!0);return h?i:null};f.exports=a}),60646:((f,x,e)=>{var o=e(2141),m=e(76112),n=e(92773),r=function(a,t,s){if(s===void 0&&(s=[]),n(a,t))for(var l=t.getLineA(),i=t.getLineB(),h=t.getLineC(),d=t.getLineD(),c=[new o,new o,new o,new o],u=[m(l,a,c[0]),m(i,a,c[1]),m(h,a,c[2]),m(d,a,c[3])],p=0;p<4;p++)u[p]&&s.push(c[p]);return s};f.exports=r}),71147:((f,x,e)=>{var o=e(61369),m=e(56362),n=e(23031),r=new n;function a(l,i,h,d,c){var u=Math.cos(l),p=Math.sin(l);r.setTo(i,h,i+u,h+p);var g=m(r,d,!0);g&&c.push(new o(g.x,g.y,l,g.w))}function t(l,i){return l.z-i.z}var s=function(l,i,h){Array.isArray(h)||(h=[h]);for(var d=[],c=[],u=0;u<h.length;u++)for(var p=h[u].points,g=0;g<p.length;g++){var y=Math.atan2(p[g].y-i,p[g].x-l);c.indexOf(y)===-1&&(a(y,l,i,h,d),a(y-1e-5,l,i,h,d),a(y+1e-5,l,i,h,d),c.push(y))}return d.sort(t)};f.exports=s}),68389:((f,x,e)=>{var o=e(87841),m=e(59996),n=function(r,a,t){return t===void 0&&(t=new o),m(r,a)&&(t.x=Math.max(r.x,a.x),t.y=Math.max(r.y,a.y),t.width=Math.min(r.right,a.right)-t.x,t.height=Math.min(r.bottom,a.bottom)-t.y),t};f.exports=n}),52784:((f,x,e)=>{var o=e(60646),m=e(59996),n=function(r,a,t){if(t===void 0&&(t=[]),m(r,a)){var s=r.getLineA(),l=r.getLineB(),i=r.getLineC(),h=r.getLineD();o(s,a,t),o(l,a,t),o(i,a,t),o(h,a,t)}return t};f.exports=n}),26341:((f,x,e)=>{var o=e(89265),m=e(60646),n=function(r,a,t){if(t===void 0&&(t=[]),o(r,a)){var s=a.getLineA(),l=a.getLineB(),i=a.getLineC();m(s,r,t),m(l,r,t),m(i,r,t)}return t};f.exports=n}),38720:((f,x,e)=>{var o=e(4042),m=e(67636),n=function(r,a,t){if(t===void 0&&(t=[]),m(r,a)){var s=r.getLineA(),l=r.getLineB(),i=r.getLineC();o(s,a,t),o(l,a,t),o(i,a,t)}return t};f.exports=n}),13882:((f,x,e)=>{var o=e(2141),m=e(2822),n=e(76112),r=function(a,t,s){if(s===void 0&&(s=[]),m(a,t))for(var l=a.getLineA(),i=a.getLineB(),h=a.getLineC(),d=[new o,new o,new o],c=[n(l,t,d[0]),n(i,t,d[1]),n(h,t,d[2])],u=0;u<3;u++)c[u]&&s.push(d[u]);return s};f.exports=r}),75636:((f,x,e)=>{var o=e(82944),m=e(13882),n=function(r,a,t){if(t===void 0&&(t=[]),o(r,a)){var s=a.getLineA(),l=a.getLineB(),i=a.getLineC();m(r,s,t),m(r,l,t),m(r,i,t)}return t};f.exports=n}),80462:((f,x,e)=>{var o=e(87902),m=e(2141),n=new m,r=function(a,t,s){if(s===void 0&&(s=n),o(t,a.x1,a.y1))return s.x=a.x1,s.y=a.y1,!0;if(o(t,a.x2,a.y2))return s.x=a.x2,s.y=a.y2,!0;var l=a.x2-a.x1,i=a.y2-a.y1,h=t.x-a.x1,d=t.y-a.y1,c=l*l+i*i,u=l,p=i;if(c>0){var g=(h*l+d*i)/c;u*=g,p*=g}s.x=a.x1+u,s.y=a.y1+p;var y=u*u+p*p;return y<=c&&u*l+p*i>=0&&o(t,s.x,s.y)};f.exports=r}),76112:(f=>{var x=function(e,o,m){var n=e.x1,r=e.y1,a=e.x2,t=e.y2,s=o.x1,l=o.y1,i=o.x2,h=o.y2;if(n===a&&r===t||s===i&&l===h)return!1;var d=(h-l)*(a-n)-(i-s)*(t-r);if(d===0)return!1;var c=((i-s)*(r-l)-(h-l)*(n-s))/d,u=((a-n)*(r-l)-(t-r)*(n-s))/d;return c<0||c>1||u<0||u>1?!1:(m&&(m.x=n+c*(a-n),m.y=r+c*(t-r)),!0)};f.exports=x}),92773:(f=>{var x=function(e,o){var m=e.x1,n=e.y1,r=e.x2,a=e.y2,t=o.x,s=o.y,l=o.right,i=o.bottom,h=0;if(m>=t&&m<=l&&n>=s&&n<=i||r>=t&&r<=l&&a>=s&&a<=i)return!0;if(m<t&&r>=t){if(h=n+(a-n)*(t-m)/(r-m),h>s&&h<=i)return!0}else if(m>l&&r<=l&&(h=n+(a-n)*(l-m)/(r-m),h>=s&&h<=i))return!0;if(n<s&&a>=s){if(h=m+(r-m)*(s-n)/(a-n),h>=t&&h<=l)return!0}else if(n>i&&a<=i&&(h=m+(r-m)*(i-n)/(a-n),h>=t&&h<=l))return!0;return!1};f.exports=x}),16204:(f=>{var x=function(e,o,m){m===void 0&&(m=1);var n=o.x1,r=o.y1,a=o.x2,t=o.y2,s=e.x,l=e.y,i=(a-n)*(a-n)+(t-r)*(t-r);if(i===0)return!1;var h=((s-n)*(a-n)+(l-r)*(t-r))/i;if(h<0)return Math.sqrt((n-s)*(n-s)+(r-l)*(r-l))<=m;if(h>=0&&h<=1){var d=((r-l)*(a-n)-(n-s)*(t-r))/i;return Math.abs(d)*Math.sqrt(i)<=m}else return Math.sqrt((a-s)*(a-s)+(t-l)*(t-l))<=m};f.exports=x}),14199:((f,x,e)=>{var o=e(16204),m=function(n,r){if(!o(n,r))return!1;var a=Math.min(r.x1,r.x2),t=Math.max(r.x1,r.x2),s=Math.min(r.y1,r.y2),l=Math.max(r.y1,r.y2);return n.x>=a&&n.x<=t&&n.y>=s&&n.y<=l};f.exports=m}),59996:(f=>{var x=function(e,o){return e.width<=0||e.height<=0||o.width<=0||o.height<=0?!1:!(e.right<o.x||e.bottom<o.y||e.x>o.right||e.y>o.bottom)};f.exports=x}),89265:((f,x,e)=>{var o=e(76112),m=e(37303),n=e(48653),r=e(77493),a=function(t,s){if(s.left>t.right||s.right<t.left||s.top>t.bottom||s.bottom<t.top)return!1;var l=s.getLineA(),i=s.getLineB(),h=s.getLineC();if(m(t,l.x1,l.y1)||m(t,l.x2,l.y2)||m(t,i.x1,i.y1)||m(t,i.x2,i.y2)||m(t,h.x1,h.y1)||m(t,h.x2,h.y2))return!0;var d=t.getLineA(),c=t.getLineB(),u=t.getLineC(),p=t.getLineD();if(o(l,d)||o(l,c)||o(l,u)||o(l,p)||o(i,d)||o(i,c)||o(i,u)||o(i,p)||o(h,d)||o(h,c)||o(h,u)||o(h,p))return!0;var g=r(t),y=n(s,g,!0);return y.length>0};f.exports=a}),84411:(f=>{var x=function(e,o,m,n,r,a){return a===void 0&&(a=0),!(o>e.right+a||m<e.left-a||n>e.bottom+a||r<e.top-a)};f.exports=x}),67636:((f,x,e)=>{var o=e(80462),m=e(10690),n=function(r,a){return r.left>a.right||r.right<a.left||r.top>a.bottom||r.bottom<a.top?!1:!!(m(r,a.x,a.y)||o(r.getLineA(),a)||o(r.getLineB(),a)||o(r.getLineC(),a))};f.exports=n}),2822:((f,x,e)=>{var o=e(76112),m=function(n,r){return!!(n.contains(r.x1,r.y1)||n.contains(r.x2,r.y2)||o(n.getLineA(),r)||o(n.getLineB(),r)||o(n.getLineC(),r))};f.exports=m}),82944:((f,x,e)=>{var o=e(48653),m=e(71694),n=e(76112),r=function(a,t){if(a.left>t.right||a.right<t.left||a.top>t.bottom||a.bottom<t.top)return!1;var s=a.getLineA(),l=a.getLineB(),i=a.getLineC(),h=t.getLineA(),d=t.getLineB(),c=t.getLineC();if(n(s,h)||n(s,d)||n(s,c)||n(l,h)||n(l,d)||n(l,c)||n(i,h)||n(i,d)||n(i,c))return!0;var u=m(a),p=o(t,u,!0);return p.length>0||(u=m(t),p=o(a,u,!0),p.length>0)};f.exports=r}),91865:((f,x,e)=>{f.exports={CircleToCircle:e(2044),CircleToRectangle:e(81491),GetCircleToCircle:e(63376),GetCircleToRectangle:e(97439),GetLineToCircle:e(4042),GetLineToLine:e(36100),GetLineToPoints:e(3073),GetLineToPolygon:e(56362),GetLineToRectangle:e(60646),GetRaysFromPointToPolygon:e(71147),GetRectangleIntersection:e(68389),GetRectangleToRectangle:e(52784),GetRectangleToTriangle:e(26341),GetTriangleToCircle:e(38720),GetTriangleToLine:e(13882),GetTriangleToTriangle:e(75636),LineToCircle:e(80462),LineToLine:e(76112),LineToRectangle:e(92773),PointToLine:e(16204),PointToLineSegment:e(14199),RectangleToRectangle:e(59996),RectangleToTriangle:e(89265),RectangleToValues:e(84411),TriangleToCircle:e(67636),TriangleToLine:e(2822),TriangleToTriangle:e(82944)}}),91938:(f=>{var x=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};f.exports=x}),84993:(f=>{var x=function(e,o,m){o===void 0&&(o=1),m===void 0&&(m=[]);var n=Math.round(e.x1),r=Math.round(e.y1),a=Math.round(e.x2),t=Math.round(e.y2),s=Math.abs(a-n),l=Math.abs(t-r),i=n<a?1:-1,h=r<t?1:-1,d=s-l;m.push({x:n,y:r});for(var c=1;!(n===a&&r===t);){var u=d<<1;u>-l&&(d-=l,n+=i),u<s&&(d+=s,r+=h),c%o===0&&m.push({x:n,y:r}),c++}return m};f.exports=x}),36469:(f=>{var x=function(e,o,m){var n=o-(e.x1+e.x2)/2,r=m-(e.y1+e.y2)/2;return e.x1+=n,e.y1+=r,e.x2+=n,e.y2+=r,e};f.exports=x}),31116:((f,x,e)=>{var o=e(23031),m=function(n){return new o(n.x1,n.y1,n.x2,n.y2)};f.exports=m}),59944:(f=>{var x=function(e,o){return o.setTo(e.x1,e.y1,e.x2,e.y2)};f.exports=x}),59220:(f=>{var x=function(e,o){return e.x1===o.x1&&e.y1===o.y1&&e.x2===o.x2&&e.y2===o.y2};f.exports=x}),78177:((f,x,e)=>{var o=e(35001),m=function(n,r,a){a===void 0&&(a=r);var t=o(n),s=n.x2-n.x1,l=n.y2-n.y1;return r&&(n.x1=n.x1-s/t*r,n.y1=n.y1-l/t*r),a&&(n.x2=n.x2+s/t*a,n.y2=n.y2+l/t*a),n};f.exports=m}),26708:((f,x,e)=>{var o=e(52816),m=e(6113),n=e(2141),r=function(a,t,s,l,i){l===void 0&&(l=0),i===void 0&&(i=[]);var h=[],d=a.x1,c=a.y1,u=a.x2-d,p=a.y2-c,g=m(t,i),y,v,S=s-1;for(y=0;y<S;y++)v=g(y/S),h.push(new n(d+u*v,c+p*v));if(v=g(1),h.push(new n(d+u*v,c+p*v)),l>0){var w=h[0],T=[w];for(y=1;y<h.length-1;y++){var C=h[y];o(w,C)>=l&&(T.push(C),w=C)}var M=h[h.length-1];return o(w,M)<l&&T.pop(),T.push(M),T}else return h};f.exports=r}),32125:((f,x,e)=>{var o=e(2141),m=function(n,r){return r===void 0&&(r=new o),r.x=(n.x1+n.x2)/2,r.y=(n.y1+n.y2)/2,r};f.exports=m}),99569:((f,x,e)=>{var o=e(2141),m=function(n,r,a){a===void 0&&(a=new o);var t=n.x1,s=n.y1,l=n.x2,i=n.y2,h=(l-t)*(l-t)+(i-s)*(i-s);if(h===0)return a;var d=((r.x-t)*(l-t)+(r.y-s)*(i-s))/h;return a.x=t+d*(l-t),a.y=s+d*(i-s),a};f.exports=m}),34638:((f,x,e)=>{var o=e(36383),m=e(91938),n=e(2141),r=function(a,t){t===void 0&&(t=new n);var s=m(a)-o.TAU;return t.x=Math.cos(s),t.y=Math.sin(s),t};f.exports=r}),13151:((f,x,e)=>{var o=e(2141),m=function(n,r,a){return a===void 0&&(a=new o),a.x=n.x1+(n.x2-n.x1)*r,a.y=n.y1+(n.y2-n.y1)*r,a};f.exports=m}),15258:((f,x,e)=>{var o=e(35001),m=e(2141),n=function(r,a,t,s){s===void 0&&(s=[]),!a&&t>0&&(a=o(r)/t);for(var l=r.x1,i=r.y1,h=r.x2,d=r.y2,c=0;c<a;c++){var u=c/a,p=l+(h-l)*u,g=i+(d-i)*u;s.push(new m(p,g))}return s};f.exports=n}),26408:(f=>{var x=function(e,o){var m=e.x1,n=e.y1,r=e.x2,a=e.y2,t=(r-m)*(r-m)+(a-n)*(a-n);if(t===0)return!1;var s=((n-o.y)*(r-m)-(m-o.x)*(a-n))/t;return Math.abs(s)*Math.sqrt(t)};f.exports=x}),98770:(f=>{var x=function(e){return Math.abs(e.y1-e.y2)};f.exports=x}),35001:(f=>{var x=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};f.exports=x}),23031:((f,x,e)=>{var o=e(83419),m=e(13151),n=e(15258),r=e(23777),a=e(65822),t=e(26099),s=new o({initialize:function(i,h,d,c){i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=0),this.type=r.LINE,this.x1=i,this.y1=h,this.x2=d,this.y2=c},getPoint:function(l,i){return m(this,l,i)},getPoints:function(l,i,h){return n(this,l,i,h)},getRandomPoint:function(l){return a(this,l)},setTo:function(l,i,h,d){return l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=0),this.x1=l,this.y1=i,this.x2=h,this.y2=d,this},setFromObjects:function(l,i){return this.x1=l.x,this.y1=l.y,this.x2=i.x,this.y2=i.y,this},getPointA:function(l){return l===void 0&&(l=new t),l.set(this.x1,this.y1),l},getPointB:function(l){return l===void 0&&(l=new t),l.set(this.x2,this.y2),l},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(l){this.x1<=this.x2?this.x1=l:this.x2=l}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(l){this.x1>this.x2?this.x1=l:this.x2=l}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(l){this.y1<=this.y2?this.y1=l:this.y2=l}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(l){this.y1>this.y2?this.y1=l:this.y2=l}}});f.exports=s}),64795:((f,x,e)=>{var o=e(36383),m=e(15994),n=e(91938),r=function(a){var t=n(a)-o.TAU;return m(t,-Math.PI,Math.PI)};f.exports=r}),52616:((f,x,e)=>{var o=e(36383),m=e(91938),n=function(r){return Math.cos(m(r)-o.TAU)};f.exports=n}),87231:((f,x,e)=>{var o=e(36383),m=e(91938),n=function(r){return Math.sin(m(r)-o.TAU)};f.exports=n}),89662:(f=>{var x=function(e,o,m){return e.x1+=o,e.y1+=m,e.x2+=o,e.y2+=m,e};f.exports=x}),71165:(f=>{var x=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};f.exports=x}),65822:((f,x,e)=>{var o=e(2141),m=function(n,r){r===void 0&&(r=new o);var a=Math.random();return r.x=n.x1+a*(n.x2-n.x1),r.y=n.y1+a*(n.y2-n.y1),r};f.exports=m}),69777:((f,x,e)=>{var o=e(91938),m=e(64795),n=function(r,a){return 2*m(a)-Math.PI-o(r)};f.exports=n}),39706:((f,x,e)=>{var o=e(64400),m=function(n,r){var a=(n.x1+n.x2)/2,t=(n.y1+n.y2)/2;return o(n,a,t,r)};f.exports=m}),82585:((f,x,e)=>{var o=e(64400),m=function(n,r,a){return o(n,r.x,r.y,a)};f.exports=m}),64400:(f=>{var x=function(e,o,m,n){var r=Math.cos(n),a=Math.sin(n),t=e.x1-o,s=e.y1-m;return e.x1=t*r-s*a+o,e.y1=t*a+s*r+m,t=e.x2-o,s=e.y2-m,e.x2=t*r-s*a+o,e.y2=t*a+s*r+m,e};f.exports=x}),62377:(f=>{var x=function(e,o,m,n,r){return e.x1=o,e.y1=m,e.x2=o+Math.cos(n)*r,e.y2=m+Math.sin(n)*r,e};f.exports=x}),71366:(f=>{var x=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};f.exports=x}),10809:(f=>{var x=function(e){return Math.abs(e.x1-e.x2)};f.exports=x}),2529:((f,x,e)=>{var o=e(23031);o.Angle=e(91938),o.BresenhamPoints=e(84993),o.CenterOn=e(36469),o.Clone=e(31116),o.CopyFrom=e(59944),o.Equals=e(59220),o.Extend=e(78177),o.GetEasedPoints=e(26708),o.GetMidPoint=e(32125),o.GetNearestPoint=e(99569),o.GetNormal=e(34638),o.GetPoint=e(13151),o.GetPoints=e(15258),o.GetShortestDistance=e(26408),o.Height=e(98770),o.Length=e(35001),o.NormalAngle=e(64795),o.NormalX=e(52616),o.NormalY=e(87231),o.Offset=e(89662),o.PerpSlope=e(71165),o.Random=e(65822),o.ReflectAngle=e(69777),o.Rotate=e(39706),o.RotateAroundPoint=e(82585),o.RotateAroundXY=e(64400),o.SetToAngle=e(62377),o.Slope=e(71366),o.Width=e(10809),f.exports=o}),83997:((f,x,e)=>{var o=e(83419),m=e(87841),n=e(26099);function r(t,s,l,i){var h=t-l,d=s-i,c=h*h+d*d;return Math.sqrt(c)}var a=new o({initialize:function(s,l,i){this.vertex1=s,this.vertex2=l,this.vertex3=i,this.bounds=new m,this._inCenter=new n},getInCenter:function(t){t===void 0&&(t=!0);var s=this.vertex1,l=this.vertex2,i=this.vertex3,h,d,c,u,p,g;t?(h=s.x,d=s.y,c=l.x,u=l.y,p=i.x,g=i.y):(h=s.vx,d=s.vy,c=l.vx,u=l.vy,p=i.vx,g=i.vy);var y=r(p,g,c,u),v=r(h,d,p,g),S=r(c,u,h,d),w=y+v+S;return this._inCenter.set((h*y+c*v+p*S)/w,(d*y+u*v+g*S)/w)},contains:function(t,s,l){var i=this.vertex1,h=this.vertex2,d=this.vertex3,c=i.vx,u=i.vy,p=h.vx,g=h.vy,y=d.vx,v=d.vy;if(l){var S=l.a,w=l.b,T=l.c,C=l.d,M=l.e,E=l.f;c=i.vx*S+i.vy*T+M,u=i.vx*w+i.vy*C+E,p=h.vx*S+h.vy*T+M,g=h.vx*w+h.vy*C+E,y=d.vx*S+d.vy*T+M,v=d.vx*w+d.vy*C+E}var P=y-c,A=v-u,D=p-c,W=g-u,V=t-c,K=s-u,X=P*P+A*A,R=P*D+A*W,H=P*V+A*K,L=D*D+W*W,N=D*V+W*K,z=X*L-R*R,U=z===0?0:1/z,Y=(L*H-R*N)*U,$=(X*N-R*H)*U;return Y>=0&&$>=0&&Y+$<1},isCounterClockwise:function(t){var s=this.vertex1,l=this.vertex2,i=this.vertex3,h=(l.vx-s.vx)*(i.vy-s.vy)-(l.vy-s.vy)*(i.vx-s.vx);return t<=0?h>=0:h<0},load:function(t,s,l,i,h){return l=this.vertex1.load(t,s,l,i,h),l=this.vertex2.load(t,s,l,i,h),l=this.vertex3.load(t,s,l,i,h),l},transformCoordinatesLocal:function(t,s,l,i){return this.vertex1.transformCoordinatesLocal(t,s,l,i),this.vertex2.transformCoordinatesLocal(t,s,l,i),this.vertex3.transformCoordinatesLocal(t,s,l,i),this},updateBounds:function(){var t=this.vertex1,s=this.vertex2,l=this.vertex3,i=this.bounds;return i.x=Math.min(t.vx,s.vx,l.vx),i.y=Math.min(t.vy,s.vy,l.vy),i.width=Math.max(t.vx,s.vx,l.vx)-i.x,i.height=Math.max(t.vy,s.vy,l.vy)-i.y,this},isInView:function(t,s,l,i,h,d,c,u,p,g,y){this.update(i,h,d,c,u,p,g,y);var v=this.vertex1,S=this.vertex2,w=this.vertex3;if(v.ta<=0&&S.ta<=0&&w.ta<=0||s&&!this.isCounterClockwise(l))return!1;var T=this.bounds;T.x=Math.min(v.tx,S.tx,w.tx),T.y=Math.min(v.ty,S.ty,w.ty),T.width=Math.max(v.tx,S.tx,w.tx)-T.x,T.height=Math.max(v.ty,S.ty,w.ty)-T.y;var C=t.x+t.width,M=t.y+t.height;return T.width<=0||T.height<=0||t.width<=0||t.height<=0?!1:!(T.right<t.x||T.bottom<t.y||T.x>C||T.y>M)},scrollUV:function(t,s){return this.vertex1.scrollUV(t,s),this.vertex2.scrollUV(t,s),this.vertex3.scrollUV(t,s),this},scaleUV:function(t,s){return this.vertex1.scaleUV(t,s),this.vertex2.scaleUV(t,s),this.vertex3.scaleUV(t,s),this},setColor:function(t){return this.vertex1.color=t,this.vertex2.color=t,this.vertex3.color=t,this},update:function(t,s,l,i,h,d,c,u){return this.vertex1.update(s,l,i,h,d,c,u,t),this.vertex2.update(s,l,i,h,d,c,u,t),this.vertex3.update(s,l,i,h,d,c,u,t),this},translate:function(t,s){s===void 0&&(s=0);var l=this.vertex1,i=this.vertex2,h=this.vertex3;return l.x+=t,l.y+=s,i.x+=t,i.y+=s,h.x+=t,h.y+=s,this},x:{get:function(){return this.getInCenter().x},set:function(t){var s=this.getInCenter();this.translate(t-s.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var s=this.getInCenter();this.translate(0,t-s.y)}},alpha:{get:function(){var t=this.vertex1,s=this.vertex2,l=this.vertex3;return(t.alpha+s.alpha+l.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,s=this.vertex2,l=this.vertex3;return(t.vz+s.vz+l.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});f.exports=a}),48803:((f,x,e)=>{var o=e(83997),m=e(95540),n=e(37867),r=e(25836),a=e(39318),t=new r,s=new r,l=new n,i=function(h){var d=m(h,"mesh"),c=m(h,"texture",null),u=m(h,"frame"),p=m(h,"width",1),g=m(h,"height",p),y=m(h,"widthSegments",1),v=m(h,"heightSegments",y),S=m(h,"x",0),w=m(h,"y",0),T=m(h,"z",0),C=m(h,"rotateX",0),M=m(h,"rotateY",0),E=m(h,"rotateZ",0),P=m(h,"zIsUp",!0),A=m(h,"isOrtho",d?d.dirtyCache[11]:!1),D=m(h,"colors",[16777215]),W=m(h,"alphas",[1]),V=m(h,"tile",!1),K=m(h,"flipY",!1),X=m(h,"width",null),R={faces:[],verts:[]};t.set(S,w,T),s.set(C,M,E),l.fromRotationXYTranslation(s,t,P);var H;if(!c&&d)c=d.texture,u||(H=d.frame);else if(d&&typeof c=="string")c=d.scene.sys.textures.get(c);else if(!c)return R;H||(H=c.get(u)),!X&&A&&c&&d&&(p=H.width/d.height,g=H.height/d.height);var L=p/2,N=g/2,z=Math.floor(y),U=Math.floor(v),Y=z+1,$=U+1,Z=p/z,Q=g/U,q=[],j=[],_,te,se=0,ie=1,ne=0,he=1;H&&(se=H.u0,ie=H.u1,K?(ne=H.v1,he=H.v0):(ne=H.v0,he=H.v1));var ue=ie-se,ae=he-ne;for(te=0;te<$;te++){var oe=te*Q-N;for(_=0;_<Y;_++){var le=_*Z-L;j.push(le,-oe);var fe=se+ue*(_/z),de=ne+ae*(te/U);q.push(fe,de)}}Array.isArray(D)||(D=[D]),Array.isArray(W)||(W=[W]);var me=0,pe=0;for(te=0;te<U;te++)for(_=0;_<z;_++){var ve=(_+Y*te)*2,we=(_+Y*(te+1))*2,Ae=(_+1+Y*(te+1))*2,Se=(_+1+Y*te)*2,Ce=D[pe],Ee=W[me],Fe=new a(j[ve],j[ve+1],0,q[ve],q[ve+1],Ce,Ee).transformMat4(l),Re=new a(j[we],j[we+1],0,q[we],q[we+1],Ce,Ee).transformMat4(l),Oe=new a(j[Se],j[Se+1],0,q[Se],q[Se+1],Ce,Ee).transformMat4(l),Le=new a(j[we],j[we+1],0,q[we],q[we+1],Ce,Ee).transformMat4(l),je=new a(j[Ae],j[Ae+1],0,q[Ae],q[Ae+1],Ce,Ee).transformMat4(l),at=new a(j[Se],j[Se+1],0,q[Se],q[Se+1],Ce,Ee).transformMat4(l);V&&(Fe.setUVs(se,he),Re.setUVs(se,ne),Oe.setUVs(ie,he),Le.setUVs(se,ne),je.setUVs(ie,ne),at.setUVs(ie,he)),pe++,pe===D.length&&(pe=0),me++,me===W.length&&(me=0),R.verts.push(Fe,Re,Oe,Le,je,at),R.faces.push(new o(Fe,Re,Oe),new o(Le,je,at))}return d&&(d.faces=d.faces.concat(R.faces),d.vertices=d.vertices.concat(R.verts)),R};f.exports=i}),34684:((f,x,e)=>{var o=e(83997),m=e(37867),n=e(25836),r=e(39318),a=new n,t=new n,s=new m,l=function(i,h,d,c,u,p,g,y,v,S){d===void 0&&(d=1),c===void 0&&(c=0),u===void 0&&(u=0),p===void 0&&(p=0),g===void 0&&(g=0),y===void 0&&(y=0),v===void 0&&(v=0),S===void 0&&(S=!0);var w={faces:[],verts:[]},T=i.materials;a.set(c,u,p),t.set(g,y,v),s.fromRotationXYTranslation(t,a,S);for(var C=0;C<i.models.length;C++)for(var M=i.models[C],E=M.vertices,P=M.textureCoords,A=M.faces,D=0;D<A.length;D++){var W=A[D],V=W.vertices[0],K=W.vertices[1],X=W.vertices[2],R=E[V.vertexIndex],H=E[K.vertexIndex],L=E[X.vertexIndex],N=V.textureCoordsIndex,z=K.textureCoordsIndex,U=X.textureCoordsIndex,Y=N===-1?{u:0,v:1}:P[N],$=z===-1?{u:0,v:0}:P[z],Z=U===-1?{u:1,v:1}:P[U],Q=16777215;W.material!==""&&T[W.material]&&(Q=T[W.material]);var q=new r(R.x*d,R.y*d,R.z*d,Y.u,Y.v,Q).transformMat4(s),j=new r(H.x*d,H.y*d,H.z*d,$.u,$.v,Q).transformMat4(s),_=new r(L.x*d,L.y*d,L.z*d,Z.u,Z.v,Q).transformMat4(s);w.verts.push(q,j,_),w.faces.push(new o(q,j,_))}return h&&(h.faces=h.faces.concat(w.faces),h.vertices=h.vertices.concat(w.verts)),w};f.exports=l}),92515:((f,x,e)=>{var o=e(83997),m=e(39318),n=function(r,a,t,s,l,i,h,d){if(s===void 0&&(s=!1),i===void 0&&(i=16777215),h===void 0&&(h=1),d===void 0&&(d=!1),r.length!==a.length&&!s){console.warn("GenerateVerts: vertices and uvs count not equal");return}var c={faces:[],vertices:[]},u,p,g,y,v,S,w,T,C,M,E,P=s?3:2,A=Array.isArray(i),D=Array.isArray(h);if(Array.isArray(t)&&t.length>0)for(u=0;u<t.length;u++){var W=t[u],V=t[u]*2,K=t[u]*P;p=r[K],g=r[K+1],y=s?r[K+2]:0,v=a[V],S=a[V+1],d&&(S=1-S),w=A?i[W]:i,T=D?h[W]:h,C=0,M=0,E=0,l&&(C=l[K],M=l[K+1],E=s?l[K+2]:0),c.vertices.push(new m(p,g,y,v,S,w,T,C,M,E))}else{var X=0,R=0;for(u=0;u<r.length;u+=P)p=r[u],g=r[u+1],y=s?r[u+2]:0,v=a[X],S=a[X+1],w=A?i[R]:i,T=D?h[R]:h,C=0,M=0,E=0,l&&(C=l[u],M=l[u+1],E=s?l[u+2]:0),c.vertices.push(new m(p,g,y,v,S,w,T,C,M,E)),X+=2,R++}for(u=0;u<c.vertices.length;u+=3){var H=c.vertices[u],L=c.vertices[u+1],N=c.vertices[u+2];c.faces.push(new o(H,L,N))}return c};f.exports=n}),85048:(f=>{var x=!0,e="untitled",o="",m="";function n(p){var g=p.indexOf("#");return g>-1?p.substring(0,g):p}function r(p){return p.models.length===0&&p.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),o="",p.models[p.models.length-1]}function a(p,g){var y=p.length>=2?p[1]:e;g.models.push({faces:[],name:y,textureCoords:[],vertexNormals:[],vertices:[]}),o=""}function t(p){p.length===2&&(o=p[1])}function s(p,g){var y=p.length,v=y>=2?parseFloat(p[1]):0,S=y>=3?parseFloat(p[2]):0,w=y>=4?parseFloat(p[3]):0;r(g).vertices.push({x:v,y:S,z:w})}function l(p,g){var y=p.length,v=y>=2?parseFloat(p[1]):0,S=y>=3?parseFloat(p[2]):0,w=y>=4?parseFloat(p[3]):0;isNaN(v)&&(v=0),isNaN(S)&&(S=0),isNaN(w)&&(w=0),x&&(S=1-S),r(g).textureCoords.push({u:v,v:S,w})}function i(p,g){var y=p.length,v=y>=2?parseFloat(p[1]):0,S=y>=3?parseFloat(p[2]):0,w=y>=4?parseFloat(p[3]):0;r(g).vertexNormals.push({x:v,y:S,z:w})}function h(p,g){var y=p.length-1;if(!(y<3)){for(var v={group:o,material:m,vertices:[]},S=0;S<y;S++){var w=p[S+1],T=w.split("/"),C=T.length;if(!(C<1||C>3)){var M=0,E=0,P=0;M=parseInt(T[0],10),C>1&&T[1]!==""&&(E=parseInt(T[1],10)),C>2&&(P=parseInt(T[2],10)),M!==0&&(M<0&&(M=r(g).vertices.length+1+M),E-=1,M-=1,P-=1,v.vertices.push({textureCoordsIndex:E,vertexIndex:M,vertexNormalIndex:P}))}}r(g).faces.push(v)}}function d(p,g){p.length>=2&&g.materialLibraries.push(p[1])}function c(p){p.length>=2&&(m=p[1])}var u=function(p,g){g===void 0&&(g=!0),x=g;var y={materials:{},materialLibraries:[],models:[]};o="",m="";for(var v=p.split(`
`),S=0;S<v.length;S++){var w=n(v[S]),T=w.replace(/\s\s+/g," ").trim().split(" ");switch(T[0].toLowerCase()){case"o":a(T,y);break;case"g":t(T);break;case"v":s(T,y);break;case"vt":l(T,y);break;case"vn":i(T,y);break;case"f":h(T,y);break;case"mtllib":d(T,y);break;case"usemtl":c(T);break}}return y};f.exports=u}),61485:((f,x,e)=>{var o=e(37589),m=function(n){for(var r={},a=n.split(`
`),t="",s=0;s<a.length;s++){var l=a[s].trim();if(!(l.indexOf("#")===0||l==="")){var i=l.replace(/\s\s+/g," ").trim().split(" ");switch(i[0].toLowerCase()){case"newmtl":{t=i[1];break}case"kd":{var h=Math.floor(i[1]*255),d=i.length>=2?Math.floor(i[2]*255):h,c=i.length>=3?Math.floor(i[3]*255):h;r[t]=o(h,d,c);break}}}}return r};f.exports=m}),92570:(f=>{var x=function(e,o,m,n){var r,a;if(m===void 0&&n===void 0){var t=e.getInCenter();r=t.x,a=t.y}var s=Math.cos(o),l=Math.sin(o),i=e.vertex1,h=e.vertex2,d=e.vertex3,c=i.x-r,u=i.y-a;i.set(c*s-u*l+r,c*l+u*s+a),c=h.x-r,u=h.y-a,h.set(c*s-u*l+r,c*l+u*s+a),c=d.x-r,u=d.y-a,d.set(c*s-u*l+r,c*l+u*s+a)};f.exports=x}),39318:((f,x,e)=>{var o=e(83419),m=e(70554),n=e(25836),r=new o({Extends:n,initialize:function(t,s,l,i,h,d,c,u,p,g){d===void 0&&(d=16777215),c===void 0&&(c=1),u===void 0&&(u=0),p===void 0&&(p=0),g===void 0&&(g=0),n.call(this,t,s,l),this.vx=0,this.vy=0,this.vz=0,this.nx=u,this.ny=p,this.nz=g,this.u=i,this.v=h,this.color=d,this.alpha=c,this.tx=0,this.ty=0,this.ta=0,this.tu=i,this.tv=h},setUVs:function(a,t){return this.u=a,this.v=t,this.tu=a,this.tv=t,this},scrollUV:function(a,t){return this.tu+=a,this.tv+=t,this},scaleUV:function(a,t){return this.tu=this.u*a,this.tv=this.v*t,this},transformCoordinatesLocal:function(a,t,s,l){var i=this.x,h=this.y,d=this.z,c=a.val,u=i*c[0]+h*c[4]+d*c[8]+c[12],p=i*c[1]+h*c[5]+d*c[9]+c[13],g=i*c[2]+h*c[6]+d*c[10]+c[14],y=i*c[3]+h*c[7]+d*c[11]+c[15];this.vx=u/y*t,this.vy=-(p/y)*s,l<=0?this.vz=g/y:this.vz=-(g/y)},resize:function(a,t,s,l,i,h){return this.x=a,this.y=t,this.vx=this.x*s,this.vy=-this.y*l,this.vz=0,i<.5?this.vx+=s*(.5-i):i>.5&&(this.vx-=s*(i-.5)),h<.5?this.vy+=l*(.5-h):h>.5&&(this.vy-=l*(h-.5)),this},update:function(a,t,s,l,i,h,d,c){var u=this.vx*a+this.vy*s+i,p=this.vx*t+this.vy*l+h;return d&&(u=Math.round(u),p=Math.round(p)),this.tx=u,this.ty=p,this.ta=this.alpha*c,this},load:function(a,t,s,l,i){return a[++s]=this.tx,a[++s]=this.ty,a[++s]=this.tu,a[++s]=this.tv,a[++s]=l,a[++s]=i,t[++s]=m.getTintAppendFloatAlpha(this.color,this.ta),s}});f.exports=r}),73090:((f,x,e)=>{var o={Face:e(83997),GenerateGridVerts:e(48803),GenerateObjVerts:e(34684),GenerateVerts:e(92515),ParseObj:e(85048),ParseObjMaterial:e(61485),RotateFace:e(92570),Vertex:e(39318)};f.exports=o}),96550:(f=>{var x=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};f.exports=x}),99706:((f,x,e)=>{var o=e(2141),m=function(n){return new o(n.x,n.y)};f.exports=m}),68010:(f=>{var x=function(e,o){return o.setTo(e.x,e.y)};f.exports=x}),27814:(f=>{var x=function(e,o){return e.x===o.x&&e.y===o.y};f.exports=x}),73565:(f=>{var x=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};f.exports=x}),87555:((f,x,e)=>{var o=e(2141),m=function(n,r){if(r===void 0&&(r=new o),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var a=n.length;if(a<1)throw new Error("GetCentroid points array must not be empty");if(a===1)r.x=n[0].x,r.y=n[0].y;else{for(var t=0;t<a;t++)r.x+=n[t].x,r.y+=n[t].y;r.x/=a,r.y/=a}return r};f.exports=m}),28793:(f=>{var x=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};f.exports=x}),44405:(f=>{var x=function(e){return e.x*e.x+e.y*e.y};f.exports=x}),20873:((f,x,e)=>{var o=e(87841),m=function(n,r){r===void 0&&(r=new o);for(var a=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,i=0;i<n.length;i++){var h=n[i];h.x>a&&(a=h.x),h.x<t&&(t=h.x),h.y>s&&(s=h.y),h.y<l&&(l=h.y)}return r.x=t,r.y=l,r.width=a-t,r.height=s-l,r};f.exports=m}),26152:((f,x,e)=>{var o=e(2141),m=function(n,r,a,t){return a===void 0&&(a=0),t===void 0&&(t=new o),t.x=n.x+(r.x-n.x)*a,t.y=n.y+(r.y-n.y)*a,t};f.exports=m}),55767:(f=>{var x=function(e){return e.setTo(e.y,e.x)};f.exports=x}),79432:((f,x,e)=>{var o=e(2141),m=function(n,r){return r===void 0&&(r=new o),r.setTo(-n.x,-n.y)};f.exports=m}),2141:((f,x,e)=>{var o=e(83419),m=e(23777),n=new o({initialize:function(a,t){a===void 0&&(a=0),t===void 0&&(t=a),this.type=m.POINT,this.x=a,this.y=t},setTo:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.x=r,this.y=a,this}});f.exports=n}),72930:((f,x,e)=>{var o=e(2141),m=e(44405),n=function(r,a,t){t===void 0&&(t=new o);var s=r.x*a.x+r.y*a.y,l=s/m(a);return l!==0&&(t.x=l*a.x,t.y=l*a.y),t};f.exports=n}),62880:((f,x,e)=>{var o=e(2141),m=function(n,r,a){a===void 0&&(a=new o);var t=n.x*r.x+n.y*r.y;return t!==0&&(a.x=t*r.x,a.y=t*r.y),a};f.exports=m}),15093:((f,x,e)=>{var o=e(28793),m=function(n,r){if(n.x!==0||n.y!==0){var a=o(n);n.x/=a,n.y/=a}return n.x*=r,n.y*=r,n};f.exports=m}),43711:((f,x,e)=>{var o=e(2141);o.Ceil=e(96550),o.Clone=e(99706),o.CopyFrom=e(68010),o.Equals=e(27814),o.Floor=e(73565),o.GetCentroid=e(87555),o.GetMagnitude=e(28793),o.GetMagnitudeSq=e(44405),o.GetRectangleFromPoints=e(20873),o.Interpolate=e(26152),o.Invert=e(55767),o.Negative=e(79432),o.Project=e(72930),o.ProjectUnit=e(62880),o.SetMagnitude=e(15093),f.exports=o}),12306:((f,x,e)=>{var o=e(25717),m=function(n){return new o(n.points)};f.exports=m}),63814:(f=>{var x=function(e,o,m){for(var n=!1,r=-1,a=e.points.length-1;++r<e.points.length;a=r){var t=e.points[r].x,s=e.points[r].y,l=e.points[a].x,i=e.points[a].y;(s<=m&&m<i||i<=m&&m<s)&&o<(l-t)*(m-s)/(i-s)+t&&(n=!n)}return n};f.exports=x}),99338:((f,x,e)=>{var o=e(63814),m=function(n,r){return o(n,r.x,r.y)};f.exports=m}),94811:(f=>{function x(R,H,L){L=L||2;var N=H&&H.length,z=N?H[0]*L:R.length,U=e(R,0,z,L,!0),Y=[];if(!U||U.next===U.prev)return Y;var $,Z,Q,q,j,_,te;if(N&&(U=s(R,H,U,L)),R.length>80*L){$=Q=R[0],Z=q=R[1];for(var se=L;se<z;se+=L)j=R[se],_=R[se+1],j<$&&($=j),_<Z&&(Z=_),j>Q&&(Q=j),_>q&&(q=_);te=Math.max(Q-$,q-Z),te=te!==0?32767/te:0}return m(U,Y,L,$,Z,te,0),Y}function e(R,H,L,N,z){var U,Y;if(z===X(R,H,L,N)>0)for(U=H;U<L;U+=N)Y=W(U,R[U],R[U+1],Y);else for(U=L-N;U>=H;U-=N)Y=W(U,R[U],R[U+1],Y);return Y&&w(Y,Y.next)&&(V(Y),Y=Y.next),Y}function o(R,H){if(!R)return R;H||(H=R);var L=R,N;do if(N=!1,!L.steiner&&(w(L,L.next)||S(L.prev,L,L.next)===0)){if(V(L),L=H=L.prev,L===L.next)break;N=!0}else L=L.next;while(N||L!==H);return H}function m(R,H,L,N,z,U,Y){if(R){!Y&&U&&c(R,N,z,U);for(var $=R,Z,Q;R.prev!==R.next;){if(Z=R.prev,Q=R.next,U?r(R,N,z,U):n(R)){H.push(Z.i/L|0),H.push(R.i/L|0),H.push(Q.i/L|0),V(R),R=Q.next,$=Q.next;continue}if(R=Q,R===$){Y?Y===1?(R=a(o(R),H,L),m(R,H,L,N,z,U,2)):Y===2&&t(R,H,L,N,z,U):m(o(R),H,L,N,z,U,1);break}}}}function n(R){var H=R.prev,L=R,N=R.next;if(S(H,L,N)>=0)return!1;for(var z=H.x,U=L.x,Y=N.x,$=H.y,Z=L.y,Q=N.y,q=z<U?z<Y?z:Y:U<Y?U:Y,j=$<Z?$<Q?$:Q:Z<Q?Z:Q,_=z>U?z>Y?z:Y:U>Y?U:Y,te=$>Z?$>Q?$:Q:Z>Q?Z:Q,se=N.next;se!==H;){if(se.x>=q&&se.x<=_&&se.y>=j&&se.y<=te&&y(z,$,U,Z,Y,Q,se.x,se.y)&&S(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function r(R,H,L,N){var z=R.prev,U=R,Y=R.next;if(S(z,U,Y)>=0)return!1;for(var $=z.x,Z=U.x,Q=Y.x,q=z.y,j=U.y,_=Y.y,te=$<Z?$<Q?$:Q:Z<Q?Z:Q,se=q<j?q<_?q:_:j<_?j:_,ie=$>Z?$>Q?$:Q:Z>Q?Z:Q,ne=q>j?q>_?q:_:j>_?j:_,he=p(te,se,H,L,N),ue=p(ie,ne,H,L,N),ae=R.prevZ,oe=R.nextZ;ae&&ae.z>=he&&oe&&oe.z<=ue;){if(ae.x>=te&&ae.x<=ie&&ae.y>=se&&ae.y<=ne&&ae!==z&&ae!==Y&&y($,q,Z,j,Q,_,ae.x,ae.y)&&S(ae.prev,ae,ae.next)>=0||(ae=ae.prevZ,oe.x>=te&&oe.x<=ie&&oe.y>=se&&oe.y<=ne&&oe!==z&&oe!==Y&&y($,q,Z,j,Q,_,oe.x,oe.y)&&S(oe.prev,oe,oe.next)>=0))return!1;oe=oe.nextZ}for(;ae&&ae.z>=he;){if(ae.x>=te&&ae.x<=ie&&ae.y>=se&&ae.y<=ne&&ae!==z&&ae!==Y&&y($,q,Z,j,Q,_,ae.x,ae.y)&&S(ae.prev,ae,ae.next)>=0)return!1;ae=ae.prevZ}for(;oe&&oe.z<=ue;){if(oe.x>=te&&oe.x<=ie&&oe.y>=se&&oe.y<=ne&&oe!==z&&oe!==Y&&y($,q,Z,j,Q,_,oe.x,oe.y)&&S(oe.prev,oe,oe.next)>=0)return!1;oe=oe.nextZ}return!0}function a(R,H,L){var N=R;do{var z=N.prev,U=N.next.next;!w(z,U)&&T(z,N,N.next,U)&&P(z,U)&&P(U,z)&&(H.push(z.i/L|0),H.push(N.i/L|0),H.push(U.i/L|0),V(N),V(N.next),N=R=U),N=N.next}while(N!==R);return o(N)}function t(R,H,L,N,z,U){var Y=R;do{for(var $=Y.next.next;$!==Y.prev;){if(Y.i!==$.i&&v(Y,$)){var Z=D(Y,$);Y=o(Y,Y.next),Z=o(Z,Z.next),m(Y,H,L,N,z,U,0),m(Z,H,L,N,z,U,0);return}$=$.next}Y=Y.next}while(Y!==R)}function s(R,H,L,N){var z=[],U,Y,$,Z,Q;for(U=0,Y=H.length;U<Y;U++)$=H[U]*N,Z=U<Y-1?H[U+1]*N:R.length,Q=e(R,$,Z,N,!1),Q===Q.next&&(Q.steiner=!0),z.push(g(Q));for(z.sort(l),U=0;U<z.length;U++)L=i(z[U],L);return L}function l(R,H){return R.x-H.x}function i(R,H){var L=h(R,H);if(!L)return H;var N=D(L,R);return o(N,N.next),o(L,L.next)}function h(R,H){var L=H,N=R.x,z=R.y,U=-1/0,Y;do{if(z<=L.y&&z>=L.next.y&&L.next.y!==L.y){var $=L.x+(z-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if($<=N&&$>U&&(U=$,Y=L.x<L.next.x?L:L.next,$===N))return Y}L=L.next}while(L!==H);if(!Y)return null;var Z=Y,Q=Y.x,q=Y.y,j=1/0,_;L=Y;do N>=L.x&&L.x>=Q&&N!==L.x&&y(z<q?N:U,z,Q,q,z<q?U:N,z,L.x,L.y)&&(_=Math.abs(z-L.y)/(N-L.x),P(L,R)&&(_<j||_===j&&(L.x>Y.x||L.x===Y.x&&d(Y,L)))&&(Y=L,j=_)),L=L.next;while(L!==Z);return Y}function d(R,H){return S(R.prev,R,H.prev)<0&&S(H.next,R,R.next)<0}function c(R,H,L,N){var z=R;do z.z===0&&(z.z=p(z.x,z.y,H,L,N)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==R);z.prevZ.nextZ=null,z.prevZ=null,u(z)}function u(R){var H,L,N,z,U,Y,$,Z,Q=1;do{for(L=R,R=null,U=null,Y=0;L;){for(Y++,N=L,$=0,H=0;H<Q&&($++,N=N.nextZ,!!N);H++);for(Z=Q;$>0||Z>0&&N;)$!==0&&(Z===0||!N||L.z<=N.z)?(z=L,L=L.nextZ,$--):(z=N,N=N.nextZ,Z--),U?U.nextZ=z:R=z,z.prevZ=U,U=z;L=N}U.nextZ=null,Q*=2}while(Y>1);return R}function p(R,H,L,N,z){return R=(R-L)*z|0,H=(H-N)*z|0,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,R|H<<1}function g(R){var H=R,L=R;do(H.x<L.x||H.x===L.x&&H.y<L.y)&&(L=H),H=H.next;while(H!==R);return L}function y(R,H,L,N,z,U,Y,$){return(z-Y)*(H-$)>=(R-Y)*(U-$)&&(R-Y)*(N-$)>=(L-Y)*(H-$)&&(L-Y)*(U-$)>=(z-Y)*(N-$)}function v(R,H){return R.next.i!==H.i&&R.prev.i!==H.i&&!E(R,H)&&(P(R,H)&&P(H,R)&&A(R,H)&&(S(R.prev,R,H.prev)||S(R,H.prev,H))||w(R,H)&&S(R.prev,R,R.next)>0&&S(H.prev,H,H.next)>0)}function S(R,H,L){return(H.y-R.y)*(L.x-H.x)-(H.x-R.x)*(L.y-H.y)}function w(R,H){return R.x===H.x&&R.y===H.y}function T(R,H,L,N){var z=M(S(R,H,L)),U=M(S(R,H,N)),Y=M(S(L,N,R)),$=M(S(L,N,H));return!!(z!==U&&Y!==$||z===0&&C(R,L,H)||U===0&&C(R,N,H)||Y===0&&C(L,R,N)||$===0&&C(L,H,N))}function C(R,H,L){return H.x<=Math.max(R.x,L.x)&&H.x>=Math.min(R.x,L.x)&&H.y<=Math.max(R.y,L.y)&&H.y>=Math.min(R.y,L.y)}function M(R){return R>0?1:R<0?-1:0}function E(R,H){var L=R;do{if(L.i!==R.i&&L.next.i!==R.i&&L.i!==H.i&&L.next.i!==H.i&&T(L,L.next,R,H))return!0;L=L.next}while(L!==R);return!1}function P(R,H){return S(R.prev,R,R.next)<0?S(R,H,R.next)>=0&&S(R,R.prev,H)>=0:S(R,H,R.prev)<0||S(R,R.next,H)<0}function A(R,H){var L=R,N=!1,z=(R.x+H.x)/2,U=(R.y+H.y)/2;do L.y>U!=L.next.y>U&&L.next.y!==L.y&&z<(L.next.x-L.x)*(U-L.y)/(L.next.y-L.y)+L.x&&(N=!N),L=L.next;while(L!==R);return N}function D(R,H){var L=new K(R.i,R.x,R.y),N=new K(H.i,H.x,H.y),z=R.next,U=H.prev;return R.next=H,H.prev=R,L.next=z,z.prev=L,N.next=L,L.prev=N,U.next=N,N.prev=U,N}function W(R,H,L,N){var z=new K(R,H,L);return N?(z.next=N.next,z.prev=N,N.next.prev=z,N.next=z):(z.prev=z,z.next=z),z}function V(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function K(R,H,L){this.i=R,this.x=H,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}x.deviation=function(R,H,L,N){var z=H&&H.length,U=z?H[0]*L:R.length,Y=Math.abs(X(R,0,U,L));if(z)for(var $=0,Z=H.length;$<Z;$++){var Q=H[$]*L,q=$<Z-1?H[$+1]*L:R.length;Y-=Math.abs(X(R,Q,q,L))}var j=0;for($=0;$<N.length;$+=3){var _=N[$]*L,te=N[$+1]*L,se=N[$+2]*L;j+=Math.abs((R[_]-R[se])*(R[te+1]-R[_+1])-(R[_]-R[te])*(R[se+1]-R[_+1]))}return Y===0&&j===0?0:Math.abs((j-Y)/Y)};function X(R,H,L,N){for(var z=0,U=H,Y=L-N;U<L;U+=N)z+=(R[Y]-R[U])*(R[U+1]+R[Y+1]),Y=U;return z}x.flatten=function(R){for(var H=R[0][0].length,L={vertices:[],holes:[],dimensions:H},N=0,z=0;z<R.length;z++){for(var U=0;U<R[z].length;U++)for(var Y=0;Y<H;Y++)L.vertices.push(R[z][U][Y]);z>0&&(N+=R[z-1].length,L.holes.push(N))}return L},f.exports=x}),13829:((f,x,e)=>{var o=e(87841),m=function(n,r){r===void 0&&(r=new o);for(var a=1/0,t=1/0,s=-a,l=-t,i,h=0;h<n.points.length;h++)i=n.points[h],a=Math.min(a,i.x),t=Math.min(t,i.y),s=Math.max(s,i.x),l=Math.max(l,i.y);return r.x=a,r.y=t,r.width=s-a,r.height=l-t,r};f.exports=m}),26173:(f=>{var x=function(e,o){o===void 0&&(o=[]);for(var m=0;m<e.points.length;m++)o.push(e.points[m].x),o.push(e.points[m].y);return o};f.exports=x}),9564:((f,x,e)=>{var o=e(35001),m=e(23031),n=e(30052),r=function(a,t,s,l){l===void 0&&(l=[]);var i=a.points,h=n(a);!t&&s>0&&(t=h/s);for(var d=0;d<t;d++)for(var c=h*(d/t),u=0,p=0;p<i.length;p++){var g=i[p],y=i[(p+1)%i.length],v=new m(g.x,g.y,y.x,y.y),S=o(v);if(c<u||c>u+S){u+=S;continue}var w=v.getPoint((c-u)/S);l.push(w);break}return l};f.exports=r}),30052:((f,x,e)=>{var o=e(35001),m=e(23031),n=function(r){for(var a=r.points,t=0,s=0;s<a.length;s++){var l=a[s],i=a[(s+1)%a.length],h=new m(l.x,l.y,i.x,i.y);t+=o(h)}return t};f.exports=n}),25717:((f,x,e)=>{var o=e(83419),m=e(63814),n=e(9564),r=e(23777),a=new o({initialize:function(s){this.type=r.POLYGON,this.area=0,this.points=[],s&&this.setTo(s)},contains:function(t,s){return m(this,t,s)},setTo:function(t){if(this.area=0,this.points=[],typeof t=="string"&&(t=t.split(" ")),!Array.isArray(t))return this;for(var s,l=0;l<t.length;l++)s={x:0,y:0},typeof t[l]=="number"||typeof t[l]=="string"?(s.x=parseFloat(t[l]),s.y=parseFloat(t[l+1]),l++):Array.isArray(t[l])?(s.x=t[l][0],s.y=t[l][1]):(s.x=t[l].x,s.y=t[l].y),this.points.push(s);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t=0,s,l,i=0;i<this.points.length-1;i++)s=this.points[i],l=this.points[i+1],t+=(l.x-s.x)*(s.y+l.y);return s=this.points[0],l=this.points[this.points.length-1],t+=(s.x-l.x)*(l.y+s.y),this.area=-t*.5,this.area},getPoints:function(t,s,l){return n(this,t,s,l)}});f.exports=a}),8133:(f=>{var x=function(e){return e.points.reverse(),e};f.exports=x}),29524:(f=>{function x(a,t){var s=a.x-t.x,l=a.y-t.y;return s*s+l*l}function e(a,t,s){var l=t.x,i=t.y,h=s.x-l,d=s.y-i;if(h!==0||d!==0){var c=((a.x-l)*h+(a.y-i)*d)/(h*h+d*d);c>1?(l=s.x,i=s.y):c>0&&(l+=h*c,i+=d*c)}return h=a.x-l,d=a.y-i,h*h+d*d}function o(a,t){for(var s=a[0],l=[s],i,h=1,d=a.length;h<d;h++)i=a[h],x(i,s)>t&&(l.push(i),s=i);return s!==i&&l.push(i),l}function m(a,t,s,l,i){for(var h=l,d,c=t+1;c<s;c++){var u=e(a[c],a[t],a[s]);u>h&&(d=c,h=u)}h>l&&(d-t>1&&m(a,t,d,l,i),i.push(a[d]),s-d>1&&m(a,d,s,l,i))}function n(a,t){var s=a.length-1,l=[a[0]];return m(a,0,s,t,l),l.push(a[s]),l}var r=function(a,t,s){t===void 0&&(t=1),s===void 0&&(s=!1);var l=a.points;if(l.length>2){var i=t*t;s||(l=o(l,i)),a.setTo(n(l,i))}return a};f.exports=r}),5469:(f=>{var x=function(o,m){return o[0]=m[0],o[1]=m[1],o},e=function(o){var m,n=[],r=o.points;for(m=0;m<r.length;m++)n.push([r[m].x,r[m].y]);var a=[];for(n.length>0&&a.push(x([0,0],n[0])),m=0;m<n.length-1;m++){var t=n[m],s=n[m+1],l=t[0],i=t[1],h=s[0],d=s[1];a.push([.85*l+.15*h,.85*i+.15*d]),a.push([.15*l+.85*h,.15*i+.85*d])}return n.length>1&&a.push(x([0,0],n[n.length-1])),o.setTo(a)};f.exports=e}),24709:(f=>{var x=function(e,o,m){for(var n=e.points,r=0;r<n.length;r++)n[r].x+=o,n[r].y+=m;return e};f.exports=x}),58423:((f,x,e)=>{var o=e(25717);o.Clone=e(12306),o.Contains=e(63814),o.ContainsPoint=e(99338),o.Earcut=e(94811),o.GetAABB=e(13829),o.GetNumberArray=e(26173),o.GetPoints=e(9564),o.Perimeter=e(30052),o.Reverse=e(8133),o.Simplify=e(29524),o.Smooth=e(5469),o.Translate=e(24709),f.exports=o}),62224:(f=>{var x=function(e){return e.width*e.height};f.exports=x}),98615:(f=>{var x=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};f.exports=x}),31688:(f=>{var x=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};f.exports=x}),67502:(f=>{var x=function(e,o,m){return e.x=o-e.width/2,e.y=m-e.height/2,e};f.exports=x}),65085:((f,x,e)=>{var o=e(87841),m=function(n){return new o(n.x,n.y,n.width,n.height)};f.exports=m}),37303:(f=>{var x=function(e,o,m){return e.width<=0||e.height<=0?!1:e.x<=o&&e.x+e.width>=o&&e.y<=m&&e.y+e.height>=m};f.exports=x}),96553:((f,x,e)=>{var o=e(37303),m=function(n,r){return o(n,r.x,r.y)};f.exports=m}),70273:(f=>{var x=function(e,o){return o.width*o.height>e.width*e.height?!1:o.x>e.x&&o.x<e.right&&o.right>e.x&&o.right<e.right&&o.y>e.y&&o.y<e.bottom&&o.bottom>e.y&&o.bottom<e.bottom};f.exports=x}),43459:(f=>{var x=function(e,o){return o.setTo(e.x,e.y,e.width,e.height)};f.exports=x}),77493:(f=>{var x=function(e,o){return o===void 0&&(o=[]),o.push({x:e.x,y:e.y}),o.push({x:e.right,y:e.y}),o.push({x:e.right,y:e.bottom}),o.push({x:e.x,y:e.bottom}),o};f.exports=x}),9219:(f=>{var x=function(e,o){return e.x===o.x&&e.y===o.y&&e.width===o.width&&e.height===o.height};f.exports=x}),53751:((f,x,e)=>{var o=e(8249),m=function(n,r){var a=o(n);return a<o(r)?n.setSize(r.height*a,r.height):n.setSize(r.width,r.width/a),n.setPosition(r.centerX-n.width/2,r.centerY-n.height/2)};f.exports=m}),16088:((f,x,e)=>{var o=e(8249),m=function(n,r){var a=o(n);return a>o(r)?n.setSize(r.height*a,r.height):n.setSize(r.width,r.width/a),n.setPosition(r.centerX-n.width/2,r.centerY-n.height/2)};f.exports=m}),80774:(f=>{var x=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};f.exports=x}),83859:(f=>{var x=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};f.exports=x}),19217:((f,x,e)=>{var o=e(87841),m=e(36383),n=function(r,a){if(a===void 0&&(a=new o),r.length===0)return a;for(var t=Number.MAX_VALUE,s=Number.MAX_VALUE,l=m.MIN_SAFE_INTEGER,i=m.MIN_SAFE_INTEGER,h,d,c,u=0;u<r.length;u++)h=r[u],Array.isArray(h)?(d=h[0],c=h[1]):(d=h.x,c=h.y),t=Math.min(t,d),s=Math.min(s,c),l=Math.max(l,d),i=Math.max(i,c);return a.x=t,a.y=s,a.width=l-t,a.height=i-s,a};f.exports=n}),9477:((f,x,e)=>{var o=e(87841),m=function(n,r,a,t,s){return s===void 0&&(s=new o),s.setTo(Math.min(n,a),Math.min(r,t),Math.abs(n-a),Math.abs(r-t))};f.exports=m}),8249:(f=>{var x=function(e){return e.height===0?NaN:e.width/e.height};f.exports=x}),27165:((f,x,e)=>{var o=e(2141),m=function(n,r){return r===void 0&&(r=new o),r.x=n.centerX,r.y=n.centerY,r};f.exports=m}),20812:((f,x,e)=>{var o=e(13019),m=e(2141),n=function(r,a,t){if(t===void 0&&(t=new m),a<=0||a>=1)return t.x=r.x,t.y=r.y,t;var s=o(r)*a;return a>.5?(s-=r.width+r.height,s<=r.width?(t.x=r.right-s,t.y=r.bottom):(t.x=r.x,t.y=r.bottom-(s-r.width))):s<=r.width?(t.x=r.x+s,t.y=r.y):(t.x=r.right,t.y=r.y+(s-r.width)),t};f.exports=n}),34819:((f,x,e)=>{var o=e(20812),m=e(13019),n=function(r,a,t,s){s===void 0&&(s=[]),!a&&t>0&&(a=m(r)/t);for(var l=0;l<a;l++){var i=l/a;s.push(o(r,i))}return s};f.exports=n}),51313:((f,x,e)=>{var o=e(2141),m=function(n,r){return r===void 0&&(r=new o),r.x=n.width,r.y=n.height,r};f.exports=m}),86091:((f,x,e)=>{var o=e(67502),m=function(n,r,a){var t=n.centerX,s=n.centerY;return n.setSize(n.width+r*2,n.height+a*2),o(n,t,s)};f.exports=m}),53951:((f,x,e)=>{var o=e(87841),m=e(59996),n=function(r,a,t){return t===void 0&&(t=new o),m(r,a)?(t.x=Math.max(r.x,a.x),t.y=Math.max(r.y,a.y),t.width=Math.min(r.right,a.right)-t.x,t.height=Math.min(r.bottom,a.bottom)-t.y):t.setEmpty(),t};f.exports=n}),14649:((f,x,e)=>{var o=e(13019),m=e(2141),n=function(r,a,t,s){if(s===void 0&&(s=[]),!a&&!t)return s;a?t=Math.round(o(r)/a):a=o(r)/t;for(var l=r.x,i=r.y,h=0,d=0;d<t;d++)switch(s.push(new m(l,i)),h){case 0:l+=a,l>=r.right&&(h=1,i+=l-r.right,l=r.right);break;case 1:i+=a,i>=r.bottom&&(h=2,l-=i-r.bottom,i=r.bottom);break;case 2:l-=a,l<=r.left&&(h=3,i-=r.left-l,l=r.left);break;case 3:i-=a,i<=r.top&&(h=0,i=r.top);break}return s};f.exports=n}),33595:(f=>{var x=function(e,o){for(var m=e.x,n=e.right,r=e.y,a=e.bottom,t=0;t<o.length;t++)m=Math.min(m,o[t].x),n=Math.max(n,o[t].x),r=Math.min(r,o[t].y),a=Math.max(a,o[t].y);return e.x=m,e.y=r,e.width=n-m,e.height=a-r,e};f.exports=x}),20074:(f=>{var x=function(e,o){var m=Math.min(e.x,o.x),n=Math.max(e.right,o.right);e.x=m,e.width=n-m;var r=Math.min(e.y,o.y),a=Math.max(e.bottom,o.bottom);return e.y=r,e.height=a-r,e};f.exports=x}),92171:(f=>{var x=function(e,o,m){var n=Math.min(e.x,o),r=Math.max(e.right,o);e.x=n,e.width=r-n;var a=Math.min(e.y,m),t=Math.max(e.bottom,m);return e.y=a,e.height=t-a,e};f.exports=x}),42981:(f=>{var x=function(e,o,m){return e.x+=o,e.y+=m,e};f.exports=x}),46907:(f=>{var x=function(e,o){return e.x+=o.x,e.y+=o.y,e};f.exports=x}),60170:(f=>{var x=function(e,o){return e.x<o.right&&e.right>o.x&&e.y<o.bottom&&e.bottom>o.y};f.exports=x}),13019:(f=>{var x=function(e){return 2*(e.width+e.height)};f.exports=x}),85133:((f,x,e)=>{var o=e(2141),m=e(39506),n=function(r,a,t){t===void 0&&(t=new o),a=m(a);var s=Math.sin(a),l=Math.cos(a),i=l>0?r.width/2:r.width/-2,h=s>0?r.height/2:r.height/-2;return Math.abs(i*s)<Math.abs(h*l)?h=i*s/l:i=h*l/s,t.x=i+r.centerX,t.y=h+r.centerY,t};f.exports=n}),26597:((f,x,e)=>{var o=e(2141),m=function(n,r){return r===void 0&&(r=new o),r.x=n.x+Math.random()*n.width,r.y=n.y+Math.random()*n.height,r};f.exports=m}),86470:((f,x,e)=>{var o=e(30976),m=e(70273),n=e(2141),r=function(a,t,s){if(s===void 0&&(s=new n),m(a,t))switch(o(0,3)){case 0:s.x=a.x+Math.random()*(t.right-a.x),s.y=a.y+Math.random()*(t.top-a.y);break;case 1:s.x=t.x+Math.random()*(a.right-t.x),s.y=t.bottom+Math.random()*(a.bottom-t.bottom);break;case 2:s.x=a.x+Math.random()*(t.x-a.x),s.y=t.y+Math.random()*(a.bottom-t.y);break;case 3:s.x=t.right+Math.random()*(a.right-t.right),s.y=a.y+Math.random()*(t.bottom-a.y);break}return s};f.exports=r}),87841:((f,x,e)=>{var o=e(83419),m=e(37303),n=e(20812),r=e(34819),a=e(23777),t=e(23031),s=e(26597),l=new o({initialize:function(h,d,c,u){h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=0),this.type=a.RECTANGLE,this.x=h,this.y=d,this.width=c,this.height=u},contains:function(i,h){return m(this,i,h)},getPoint:function(i,h){return n(this,i,h)},getPoints:function(i,h,d){return r(this,i,h,d)},getRandomPoint:function(i){return s(this,i)},setTo:function(i,h,d,c){return this.x=i,this.y=h,this.width=d,this.height=c,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(i,h){return h===void 0&&(h=i),this.x=i,this.y=h,this},setSize:function(i,h){return h===void 0&&(h=i),this.width=i,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(i){return i===void 0&&(i=new t),i.setTo(this.x,this.y,this.right,this.y),i},getLineB:function(i){return i===void 0&&(i=new t),i.setTo(this.right,this.y,this.right,this.bottom),i},getLineC:function(i){return i===void 0&&(i=new t),i.setTo(this.right,this.bottom,this.x,this.bottom),i},getLineD:function(i){return i===void 0&&(i=new t),i.setTo(this.x,this.bottom,this.x,this.y),i},left:{get:function(){return this.x},set:function(i){i>=this.right?this.width=0:this.width=this.right-i,this.x=i}},right:{get:function(){return this.x+this.width},set:function(i){i<=this.x?this.width=0:this.width=i-this.x}},top:{get:function(){return this.y},set:function(i){i>=this.bottom?this.height=0:this.height=this.bottom-i,this.y=i}},bottom:{get:function(){return this.y+this.height},set:function(i){i<=this.y?this.height=0:this.height=i-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(i){this.x=i-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(i){this.y=i-this.height/2}}});f.exports=l}),94845:(f=>{var x=function(e,o){return e.width===o.width&&e.height===o.height};f.exports=x}),31730:(f=>{var x=function(e,o,m){return m===void 0&&(m=o),e.width*=o,e.height*=m,e};f.exports=x}),36899:((f,x,e)=>{var o=e(87841),m=function(n,r,a){a===void 0&&(a=new o);var t=Math.min(n.x,r.x),s=Math.min(n.y,r.y),l=Math.max(n.right,r.right)-t,i=Math.max(n.bottom,r.bottom)-s;return a.setTo(t,s,l,i)};f.exports=m}),93232:((f,x,e)=>{var o=e(87841);o.Area=e(62224),o.Ceil=e(98615),o.CeilAll=e(31688),o.CenterOn=e(67502),o.Clone=e(65085),o.Contains=e(37303),o.ContainsPoint=e(96553),o.ContainsRect=e(70273),o.CopyFrom=e(43459),o.Decompose=e(77493),o.Equals=e(9219),o.FitInside=e(53751),o.FitOutside=e(16088),o.Floor=e(80774),o.FloorAll=e(83859),o.FromPoints=e(19217),o.FromXY=e(9477),o.GetAspectRatio=e(8249),o.GetCenter=e(27165),o.GetPoint=e(20812),o.GetPoints=e(34819),o.GetSize=e(51313),o.Inflate=e(86091),o.Intersection=e(53951),o.MarchingAnts=e(14649),o.MergePoints=e(33595),o.MergeRect=e(20074),o.MergeXY=e(92171),o.Offset=e(42981),o.OffsetPoint=e(46907),o.Overlaps=e(60170),o.Perimeter=e(13019),o.PerimeterPoint=e(85133),o.Random=e(26597),o.RandomOutside=e(86470),o.SameDimensions=e(94845),o.Scale=e(31730),o.Union=e(36899),f.exports=o}),41658:(f=>{var x=function(e){var o=e.x1,m=e.y1,n=e.x2,r=e.y2,a=e.x3,t=e.y3;return Math.abs(((a-o)*(r-m)-(n-o)*(t-m))/2)};f.exports=x}),39208:((f,x,e)=>{var o=e(16483),m=function(n,r,a){var t=a*(Math.sqrt(3)/2),s=n,l=r,i=n+a/2,h=r+t,d=n-a/2,c=r+t;return new o(s,l,i,h,d,c)};f.exports=m}),39545:((f,x,e)=>{var o=e(94811),m=e(16483),n=function(r,a,t,s,l){a===void 0&&(a=null),t===void 0&&(t=1),s===void 0&&(s=1),l===void 0&&(l=[]);for(var i=o(r,a),h,d,c,u,p,g,y,v,S,w=0;w<i.length;w+=3)h=i[w],d=i[w+1],c=i[w+2],u=r[h*2]*t,p=r[h*2+1]*s,g=r[d*2]*t,y=r[d*2+1]*s,v=r[c*2]*t,S=r[c*2+1]*s,l.push(new m(u,p,g,y,v,S));return l};f.exports=n}),90301:((f,x,e)=>{var o=e(16483),m=function(n,r,a,t){t===void 0&&(t=a);var s=n,l=r,i=n,h=r-t,d=n+a,c=r;return new o(s,l,i,h,d,c)};f.exports=m}),23707:((f,x,e)=>{var o=e(97523),m=e(13584),n=function(r,a,t,s){s===void 0&&(s=o);var l=s(r),i=a-l.x,h=t-l.y;return m(r,i,h)};f.exports=n}),97523:((f,x,e)=>{var o=e(2141),m=function(n,r){return r===void 0&&(r=new o),r.x=(n.x1+n.x2+n.x3)/3,r.y=(n.y1+n.y2+n.y3)/3,r};f.exports=m}),24951:((f,x,e)=>{var o=e(26099);function m(r,a,t,s){return r*s-a*t}var n=function(r,a){a===void 0&&(a=new o);var t=r.x3,s=r.y3,l=r.x1-t,i=r.y1-s,h=r.x2-t,d=r.y2-s,c=2*m(l,i,h,d),u=m(i,l*l+i*i,d,h*h+d*d),p=m(l,l*l+i*i,h,h*h+d*d);return a.x=t-u/c,a.y=s+p/c,a};f.exports=n}),85614:((f,x,e)=>{var o=e(96503),m=function(n,r){r===void 0&&(r=new o);var a=n.x1,t=n.y1,s=n.x2,l=n.y2,i=n.x3,h=n.y3,d=s-a,c=l-t,u=i-a,p=h-t,g=d*(a+s)+c*(t+l),y=u*(a+i)+p*(t+h),v=2*(d*(h-l)-c*(i-s)),S,w;if(Math.abs(v)<1e-6){var T=Math.min(a,s,i),C=Math.min(t,l,h);S=(Math.max(a,s,i)-T)*.5,w=(Math.max(t,l,h)-C)*.5,r.x=T+S,r.y=C+w,r.radius=Math.sqrt(S*S+w*w)}else r.x=(p*g-c*y)/v,r.y=(d*y-u*g)/v,S=r.x-a,w=r.y-t,r.radius=Math.sqrt(S*S+w*w);return r};f.exports=m}),74422:((f,x,e)=>{var o=e(16483),m=function(n){return new o(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};f.exports=m}),10690:(f=>{var x=function(e,o,m){var n=e.x3-e.x1,r=e.y3-e.y1,a=e.x2-e.x1,t=e.y2-e.y1,s=o-e.x1,l=m-e.y1,i=n*n+r*r,h=n*a+r*t,d=n*s+r*l,c=a*a+t*t,u=a*s+t*l,p=i*c-h*h,g=p===0?0:1/p,y=(c*d-h*u)*g,v=(i*u-h*d)*g;return y>=0&&v>=0&&y+v<1};f.exports=x}),48653:(f=>{var x=function(e,o,m,n){m===void 0&&(m=!1),n===void 0&&(n=[]);for(var r=e.x3-e.x1,a=e.y3-e.y1,t=e.x2-e.x1,s=e.y2-e.y1,l=r*r+a*a,i=r*t+a*s,h=t*t+s*s,d=l*h-i*i,c=d===0?0:1/d,u,p,g,y,v,S,w=e.x1,T=e.y1,C=0;C<o.length&&(g=o[C].x-w,y=o[C].y-T,v=r*g+a*y,S=t*g+s*y,u=(h*v-i*S)*c,p=(l*S-i*v)*c,!(u>=0&&p>=0&&u+p<1&&(n.push({x:o[C].x,y:o[C].y}),m)));C++);return n};f.exports=x}),96006:((f,x,e)=>{var o=e(10690),m=function(n,r){return o(n,r.x,r.y)};f.exports=m}),71326:(f=>{var x=function(e,o){return o.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};f.exports=x}),71694:(f=>{var x=function(e,o){return o===void 0&&(o=[]),o.push({x:e.x1,y:e.y1}),o.push({x:e.x2,y:e.y2}),o.push({x:e.x3,y:e.y3}),o};f.exports=x}),33522:(f=>{var x=function(e,o){return e.x1===o.x1&&e.y1===o.y1&&e.x2===o.x2&&e.y2===o.y2&&e.x3===o.x3&&e.y3===o.y3};f.exports=x}),20437:((f,x,e)=>{var o=e(2141),m=e(35001),n=function(r,a,t){t===void 0&&(t=new o);var s=r.getLineA(),l=r.getLineB(),i=r.getLineC();if(a<=0||a>=1)return t.x=s.x1,t.y=s.y1,t;var h=m(s),d=m(l),c=m(i),u=h+d+c,p=u*a,g=0;return p<h?(g=p/h,t.x=s.x1+(s.x2-s.x1)*g,t.y=s.y1+(s.y2-s.y1)*g):p>h+d?(p-=h+d,g=p/c,t.x=i.x1+(i.x2-i.x1)*g,t.y=i.y1+(i.y2-i.y1)*g):(p-=h,g=p/d,t.x=l.x1+(l.x2-l.x1)*g,t.y=l.y1+(l.y2-l.y1)*g),t};f.exports=n}),80672:((f,x,e)=>{var o=e(35001),m=e(2141),n=function(r,a,t,s){s===void 0&&(s=[]);var l=r.getLineA(),i=r.getLineB(),h=r.getLineC(),d=o(l),c=o(i),u=o(h),p=d+c+u;!a&&t>0&&(a=p/t);for(var g=0;g<a;g++){var y=p*(g/a),v=0,S=new m;y<d?(v=y/d,S.x=l.x1+(l.x2-l.x1)*v,S.y=l.y1+(l.y2-l.y1)*v):y>d+c?(y-=d+c,v=y/u,S.x=h.x1+(h.x2-h.x1)*v,S.y=h.y1+(h.y2-h.y1)*v):(y-=d,v=y/c,S.x=i.x1+(i.x2-i.x1)*v,S.y=i.y1+(i.y2-i.y1)*v),s.push(S)}return s};f.exports=n}),39757:((f,x,e)=>{var o=e(2141);function m(r,a,t,s){var l=r-t,i=a-s,h=l*l+i*i;return Math.sqrt(h)}var n=function(r,a){a===void 0&&(a=new o);var t=r.x1,s=r.y1,l=r.x2,i=r.y2,h=r.x3,d=r.y3,c=m(h,d,l,i),u=m(t,s,h,d),p=m(l,i,t,s),g=c+u+p;return a.x=(t*c+l*u+h*p)/g,a.y=(s*c+i*u+d*p)/g,a};f.exports=n}),13584:(f=>{var x=function(e,o,m){return e.x1+=o,e.y1+=m,e.x2+=o,e.y2+=m,e.x3+=o,e.y3+=m,e};f.exports=x}),1376:((f,x,e)=>{var o=e(35001),m=function(n){var r=n.getLineA(),a=n.getLineB(),t=n.getLineC();return o(r)+o(a)+o(t)};f.exports=m}),90260:((f,x,e)=>{var o=e(2141),m=function(n,r){r===void 0&&(r=new o);var a=n.x2-n.x1,t=n.y2-n.y1,s=n.x3-n.x1,l=n.y3-n.y1,i=Math.random(),h=Math.random();return i+h>=1&&(i=1-i,h=1-h),r.x=n.x1+(a*i+s*h),r.y=n.y1+(t*i+l*h),r};f.exports=m}),52172:((f,x,e)=>{var o=e(99614),m=e(39757),n=function(r,a){var t=m(r);return o(r,t.x,t.y,a)};f.exports=n}),49907:((f,x,e)=>{var o=e(99614),m=function(n,r,a){return o(n,r.x,r.y,a)};f.exports=m}),99614:(f=>{var x=function(e,o,m,n){var r=Math.cos(n),a=Math.sin(n),t=e.x1-o,s=e.y1-m;return e.x1=t*r-s*a+o,e.y1=t*a+s*r+m,t=e.x2-o,s=e.y2-m,e.x2=t*r-s*a+o,e.y2=t*a+s*r+m,t=e.x3-o,s=e.y3-m,e.x3=t*r-s*a+o,e.y3=t*a+s*r+m,e};f.exports=x}),16483:((f,x,e)=>{var o=e(83419),m=e(10690),n=e(20437),r=e(80672),a=e(23777),t=e(23031),s=e(90260),l=new o({initialize:function(h,d,c,u,p,g){h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=a.TRIANGLE,this.x1=h,this.y1=d,this.x2=c,this.y2=u,this.x3=p,this.y3=g},contains:function(i,h){return m(this,i,h)},getPoint:function(i,h){return n(this,i,h)},getPoints:function(i,h,d){return r(this,i,h,d)},getRandomPoint:function(i){return s(this,i)},setTo:function(i,h,d,c,u,p){return i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=0),p===void 0&&(p=0),this.x1=i,this.y1=h,this.x2=d,this.y2=c,this.x3=u,this.y3=p,this},getLineA:function(i){return i===void 0&&(i=new t),i.setTo(this.x1,this.y1,this.x2,this.y2),i},getLineB:function(i){return i===void 0&&(i=new t),i.setTo(this.x2,this.y2,this.x3,this.y3),i},getLineC:function(i){return i===void 0&&(i=new t),i.setTo(this.x3,this.y3,this.x1,this.y1),i},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(i){var h=0;this.x1<=this.x2&&this.x1<=this.x3?h=this.x1-i:this.x2<=this.x1&&this.x2<=this.x3?h=this.x2-i:h=this.x3-i,this.x1-=h,this.x2-=h,this.x3-=h}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(i){var h=0;this.x1>=this.x2&&this.x1>=this.x3?h=this.x1-i:this.x2>=this.x1&&this.x2>=this.x3?h=this.x2-i:h=this.x3-i,this.x1-=h,this.x2-=h,this.x3-=h}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(i){var h=0;this.y1<=this.y2&&this.y1<=this.y3?h=this.y1-i:this.y2<=this.y1&&this.y2<=this.y3?h=this.y2-i:h=this.y3-i,this.y1-=h,this.y2-=h,this.y3-=h}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(i){var h=0;this.y1>=this.y2&&this.y1>=this.y3?h=this.y1-i:this.y2>=this.y1&&this.y2>=this.y3?h=this.y2-i:h=this.y3-i,this.y1-=h,this.y2-=h,this.y3-=h}}});f.exports=l}),84435:((f,x,e)=>{var o=e(16483);o.Area=e(41658),o.BuildEquilateral=e(39208),o.BuildFromPolygon=e(39545),o.BuildRight=e(90301),o.CenterOn=e(23707),o.Centroid=e(97523),o.CircumCenter=e(24951),o.CircumCircle=e(85614),o.Clone=e(74422),o.Contains=e(10690),o.ContainsArray=e(48653),o.ContainsPoint=e(96006),o.CopyFrom=e(71326),o.Decompose=e(71694),o.Equals=e(33522),o.GetPoint=e(20437),o.GetPoints=e(80672),o.InCenter=e(39757),o.Perimeter=e(1376),o.Offset=e(13584),o.Random=e(90260),o.Rotate=e(52172),o.RotateAroundPoint=e(49907),o.RotateAroundXY=e(99614),f.exports=o}),74457:(f=>{var x=function(e,o,m){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:o,hitAreaCallback:m,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};f.exports=x}),84409:(f=>{var x=function(e,o){return function(m,n,r,a){var t=e.getPixelAlpha(n,r,a.texture.key,a.frame.name);return t&&t>=o}};f.exports=x}),7003:((f,x,e)=>{var o=e(83419),m=e(93301),n=e(50792),r=e(8214),a=e(8443),t=e(78970),s=e(85098),l=e(42515),i=e(36210),h=e(61340),d=e(85955),c=new o({initialize:function(p,g){this.game=p,this.scaleManager,this.canvas,this.config=g,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=g.inputKeyboard?new t(this):null,this.mouse=g.inputMouse?new s(this):null,this.touch=g.inputTouch?new i(this):null,this.pointers=[],this.pointersTotal=g.inputActivePointers;for(var y=0;y<=this.pointersTotal;y++){var v=new l(this,y);v.smoothFactor=g.inputSmoothFactor,this.pointers.push(v)}this.mousePointer=g.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new h,this._tempMatrix2=new h,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],p.events.once(a.BOOT,this.boot,this)},boot:function(){var u=this.game,p=u.events;this.canvas=u.canvas,this.scaleManager=u.scale,this.events.emit(r.MANAGER_BOOT),p.on(a.PRE_RENDER,this.preRender,this),p.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(u){this.isOver=!0,this.events.emit(r.GAME_OVER,u)},setCanvasOut:function(u){this.isOver=!1,this.events.emit(r.GAME_OUT,u)},preRender:function(){var u=this.game.loop.now,p=this.game.loop.delta,g=this.game.scene.getScenes(!0,!0);this.time=u,this.events.emit(r.MANAGER_UPDATE);for(var y=0;y<g.length;y++){var v=g[y];if(v.sys.input&&v.sys.input.updatePoll(u,p)&&this.globalTopOnly)return}},setDefaultCursor:function(u){this.defaultCursor=u,this.canvas.style.cursor!==u&&(this.canvas.style.cursor=u)},setCursor:function(u){u.cursor&&(this.canvas.style.cursor=u.cursor)},resetCursor:function(u,p){(p||u&&u.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(u){u===void 0&&(u=1);var p=[];this.pointersTotal+u>10&&(u=10-this.pointersTotal);for(var g=0;g<u;g++){var y=this.pointers.length,v=new l(this,y);v.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(v),this.pointersTotal++,p.push(v)}return p},updateInputPlugins:function(u,p){var g=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var y=0;y<g.length;y++){var v=g[y];if(v.sys.input){var S=v.sys.input.update(u,p);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(u){for(var p=this.pointers,g=[],y=0;y<u.changedTouches.length;y++)for(var v=u.changedTouches[y],S=1;S<p.length;S++){var w=p[S];if(!w.active){w.touchstart(v,u),this.activePointer=w,g.push(w);break}}this.updateInputPlugins(m.TOUCH_START,g)},onTouchMove:function(u){for(var p=this.pointers,g=[],y=0;y<u.changedTouches.length;y++)for(var v=u.changedTouches[y],S=1;S<p.length;S++){var w=p[S];if(w.active&&w.identifier===v.identifier){var T=document.elementFromPoint(v.clientX,v.clientY),C=T===this.canvas;!this.isOver&&C?this.setCanvasOver(u):this.isOver&&!C&&this.setCanvasOut(u),this.isOver&&(w.touchmove(v,u),this.activePointer=w,g.push(w));break}}this.updateInputPlugins(m.TOUCH_MOVE,g)},onTouchEnd:function(u){for(var p=this.pointers,g=[],y=0;y<u.changedTouches.length;y++)for(var v=u.changedTouches[y],S=1;S<p.length;S++){var w=p[S];if(w.active&&w.identifier===v.identifier){w.touchend(v,u),g.push(w);break}}this.updateInputPlugins(m.TOUCH_END,g)},onTouchCancel:function(u){for(var p=this.pointers,g=[],y=0;y<u.changedTouches.length;y++)for(var v=u.changedTouches[y],S=1;S<p.length;S++){var w=p[S];if(w.active&&w.identifier===v.identifier){w.touchcancel(v,u),g.push(w);break}}this.updateInputPlugins(m.TOUCH_CANCEL,g)},onMouseDown:function(u){var p=this.mousePointer;p.down(u),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(m.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(u){var p=this.mousePointer;p.move(u),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(m.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(u){var p=this.mousePointer;p.up(u),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(m.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(u){var p=this.mousePointer;p.wheel(u),this.activePointer=p,this.updateInputPlugins(m.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(u){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(r.POINTERLOCK_CHANGE,u,p)},inputCandidate:function(u,p){var g=u.input;if(!g||!g.enabled||!u.willRender(p))return!1;var y=!0,v=u.parentContainer;if(v)do{if(!v.willRender(p)){y=!1;break}v=v.parentContainer}while(v);return y},hitTest:function(u,p,g,y){y===void 0&&(y=this._tempHitTest);var v=this._tempPoint,S=g.scrollX,w=g.scrollY;y.length=0;var T=u.x,C=u.y;g.getWorldPoint(T,C,v),u.worldX=v.x,u.worldY=v.y;for(var M={x:0,y:0},E=this._tempMatrix,P=this._tempMatrix2,A=0;A<p.length;A++){var D=p[A];if(this.inputCandidate(D,g)){var W=v.x+S*D.scrollFactorX-S,V=v.y+w*D.scrollFactorY-w;D.parentContainer?(D.getWorldTransformMatrix(E,P),E.applyInverse(W,V,M)):d(W,V,D.x,D.y,D.rotation,D.scaleX,D.scaleY,M),this.pointWithinHitArea(D,M.x,M.y)&&y.push(D)}}return y},pointWithinHitArea:function(u,p,g){p+=u.displayOriginX,g+=u.displayOriginY;var y=u.input;return y&&y.hitAreaCallback(y.hitArea,p,g,u)?(y.localX=p,y.localY=g,!0):!1},pointWithinInteractiveObject:function(u,p,g){return u.hitArea?(p+=u.gameObject.displayOriginX,g+=u.gameObject.displayOriginY,u.localX=p,u.localY=g,u.hitAreaCallback(u.hitArea,p,g,u)):!1},transformPointer:function(u,p,g,y){var v=u.position,S=u.prevPosition;S.x=v.x,S.y=v.y;var w=this.scaleManager.transformX(p),T=this.scaleManager.transformY(g),C=u.smoothFactor;!y||C===0?(v.x=w,v.y=T):(v.x=w*C+S.x*(1-C),v.y=T*C+S.y*(1-C))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var u=0;u<this.pointers.length;u++)this.pointers[u].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});f.exports=c}),48205:((f,x,e)=>{var o=e(96503),m=e(87902),n=e(83419),r=e(93301),a=e(74457),t=e(84409),s=e(20339),l=e(8497),i=e(81154),h=e(8214),d=e(50792),c=e(95540),u=e(23777),p=e(89639),g=e(41212),y=e(37277),v=e(87841),S=e(37303),w=e(44594),T=e(16483),C=e(10690),M=new n({Extends:d,initialize:function(P){d.call(this),this.scene=P,this.systems=P.sys,this.settings=P.sys.settings,this.manager=P.sys.game.input,this.pluginEvents=new d,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var A={cancelled:!1};this._eventContainer={stopPropagation:function(){A.cancelled=!0}},this._eventData=A,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,P.sys.events.once(w.BOOT,this.boot,this),P.sys.events.on(w.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(w.DESTROY,this.destroy,this),this.pluginEvents.emit(h.BOOT)},start:function(){var E=this.systems.events;E.on(w.TRANSITION_START,this.transitionIn,this),E.on(w.TRANSITION_OUT,this.transitionOut,this),E.on(w.TRANSITION_COMPLETE,this.transitionComplete,this),E.on(w.PRE_UPDATE,this.preUpdate,this),E.once(w.SHUTDOWN,this.shutdown,this),this.manager.events.on(h.GAME_OUT,this.onGameOut,this),this.manager.events.on(h.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(h.START)},onGameOver:function(E){this.isActive()&&this.emit(h.GAME_OVER,E.timeStamp,E)},onGameOut:function(E){this.isActive()&&this.emit(h.GAME_OUT,E.timeStamp,E)},preUpdate:function(){this.pluginEvents.emit(h.PRE_UPDATE);var E=this._pendingRemoval,P=this._pendingInsertion,A=E.length,D=P.length;if(!(A===0&&D===0)){for(var W=this._list,V=0;V<A;V++){var K=E[V],X=W.indexOf(K);X>-1&&(W.splice(X,1),this.clear(K,!0))}this._pendingRemoval.length=0,this._list=W.concat(P.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(E){this.manager&&this.manager.setCursor(E)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(E,P){if(!this.isActive())return!1;if(this.pluginEvents.emit(h.UPDATE,E,P),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var A,D=this.manager,W=D.pointers;for(A=0;A<W.length;A++)W[A].updateMotion();if(this._list.length===0)return!1;var V=this.pollRate;if(V===-1)return!1;if(V>0)if(this._pollTimer-=P,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(A=0;A<W.length;A++){var X=0,R=W[A];this._tempZones=[],this._temp=this.hitTestPointer(R),this.sortGameObjects(this._temp,R),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),X+=this.processOverOutEvents(R),this.getDragState(R)===2&&this.processDragThresholdEvent(R,E),X>0&&(K=!0)}return K},update:function(E,P){if(!this.isActive())return!1;for(var A=!1,D=0;D<P.length;D++){var W=0,V=P[D];switch(this._tempZones=[],this._temp=this.hitTestPointer(V),this.sortGameObjects(this._temp,V),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),E){case r.MOUSE_DOWN:W+=this.processDragDownEvent(V),W+=this.processDownEvents(V),W+=this.processOverOutEvents(V);break;case r.MOUSE_UP:W+=this.processDragUpEvent(V),W+=this.processUpEvents(V),W+=this.processOverOutEvents(V);break;case r.TOUCH_START:W+=this.processDragDownEvent(V),W+=this.processDownEvents(V),W+=this.processOverEvents(V);break;case r.TOUCH_END:case r.TOUCH_CANCEL:W+=this.processDragUpEvent(V),W+=this.processUpEvents(V),W+=this.processOutEvents(V);break;case r.MOUSE_MOVE:case r.TOUCH_MOVE:W+=this.processDragMoveEvent(V),W+=this.processMoveEvents(V),W+=this.processOverOutEvents(V);break;case r.MOUSE_WHEEL:W+=this.processWheelEvent(V);break}W>0&&(A=!0)}return this._updatedThisFrame=!0,A},clear:function(E,P){P===void 0&&(P=!1),this.disable(E);var A=E.input;A&&(this.removeDebug(E),this.manager.resetCursor(A),A.gameObject=void 0,A.target=void 0,A.hitArea=void 0,A.hitAreaCallback=void 0,A.callbackContext=void 0,E.input=null),P||this.queueForRemoval(E);var D=this._draggable.indexOf(E);return D>-1&&this._draggable.splice(D,1),E},disable:function(E,P){P===void 0&&(P=!1);var A=E.input;A&&(A.enabled=!1,A.dragState=0);for(var D=this._drag,W=this._over,V=this.manager,K=0,X;K<V.pointers.length;K++)X=D[K].indexOf(E),X>-1&&D[K].splice(X,1),X=W[K].indexOf(E),X>-1&&W[K].splice(X,1);return P&&this.resetCursor(),this},enable:function(E,P,A,D){return D===void 0&&(D=!1),E.input?E.input.enabled=!0:this.setHitArea(E,P,A),E.input&&D&&!E.input.dropZone&&(E.input.dropZone=D),this},hitTestPointer:function(E){for(var P=this.cameras.getCamerasBelowPointer(E),A=0;A<P.length;A++){for(var D=P[A],W=this.manager.hitTest(E,this._list,D),V=0;V<W.length;V++){var K=W[V];K.input.dropZone&&this._tempZones.push(K)}if(W.length>0)return E.camera=D,W}return E.camera=P[0],[]},processDownEvents:function(E){var P=0,A=this._temp,D=this._eventData,W=this._eventContainer;D.cancelled=!1;for(var V=0;V<A.length;V++){var K=A[V];if(!(!K.input||!K.input.enabled)&&(P++,K.emit(h.GAMEOBJECT_POINTER_DOWN,E,K.input.localX,K.input.localY,W),D.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(h.GAMEOBJECT_DOWN,E,K,W),D.cancelled||!this.isActive())))break}return!D.cancelled&&this.isActive()&&(E.downElement===this.manager.game.canvas?this.emit(h.POINTER_DOWN,E,A):this.emit(h.POINTER_DOWN_OUTSIDE,E)),P},getDragState:function(E){return this._dragState[E.id]},setDragState:function(E,P){this._dragState[E.id]=P},processDragThresholdEvent:function(E,P){var A=!1,D=this.dragTimeThreshold,W=this.dragDistanceThreshold;if((W>0&&s(E.x,E.y,E.downX,E.downY)>=W||D>0&&P>=E.downTime+D)&&(A=!0),A)return this.setDragState(E,3),this.processDragStartList(E)},processDragStartList:function(E){if(this.getDragState(E)!==3)return 0;var P=this._drag[E.id];P.length>1&&(P=P.slice(0));for(var A=0;A<P.length;A++){var D=P[A],W=D.input;W.dragState=2,W.dragStartX=D.x,W.dragStartY=D.y,W.dragStartXGlobal=E.worldX,W.dragStartYGlobal=E.worldY,W.dragStartCamera=E.camera,W.dragX=W.dragStartXGlobal-W.dragStartX,W.dragY=W.dragStartYGlobal-W.dragStartY,D.emit(h.GAMEOBJECT_DRAG_START,E,W.dragX,W.dragY),this.emit(h.DRAG_START,E,D)}return this.setDragState(E,4),P.length},processDragDownEvent:function(E){var P=this._temp;if(this._draggable.length===0||P.length===0||!E.primaryDown||this.getDragState(E)!==0)return 0;this.setDragState(E,1);for(var A=[],D=0;D<P.length;D++){var W=P[D];W.input.draggable&&W.input.dragState===0&&A.push(W)}return A.length===0?(this.setDragState(E,0),0):(A.length>1&&(this.sortGameObjects(A,E),this.topOnly&&A.splice(1)),this._drag[E.id]=A,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(E,3),this.processDragStartList(E)):(this.setDragState(E,2),0))},processDragMoveEvent:function(E){if(this.getDragState(E)===2&&this.processDragThresholdEvent(E,this.manager.game.loop.now),this.getDragState(E)!==4)return 0;var P=this._tempZones,A=this._drag[E.id];A.length>1&&(A=A.slice(0));for(var D=0;D<A.length;D++){var W=A[D],V=W.input,K=V.target;if(K){var X=P.indexOf(K);X===0?(W.emit(h.GAMEOBJECT_DRAG_OVER,E,K),this.emit(h.DRAG_OVER,E,W,K)):X>0?(W.emit(h.GAMEOBJECT_DRAG_LEAVE,E,K),this.emit(h.DRAG_LEAVE,E,W,K),V.target=P[0],K=V.target,W.emit(h.GAMEOBJECT_DRAG_ENTER,E,K),this.emit(h.DRAG_ENTER,E,W,K)):(W.emit(h.GAMEOBJECT_DRAG_LEAVE,E,K),this.emit(h.DRAG_LEAVE,E,W,K),P[0]?(V.target=P[0],K=V.target,W.emit(h.GAMEOBJECT_DRAG_ENTER,E,K),this.emit(h.DRAG_ENTER,E,W,K)):V.target=null)}else!K&&P[0]&&(V.target=P[0],K=V.target,W.emit(h.GAMEOBJECT_DRAG_ENTER,E,K),this.emit(h.DRAG_ENTER,E,W,K));var R,H,L=E.positionToCamera(V.dragStartCamera);if(!W.parentContainer)R=L.x-V.dragX,H=L.y-V.dragY;else{var N=L.x-V.dragStartXGlobal,z=L.y-V.dragStartYGlobal,U=W.getParentRotation(),Y=N*Math.cos(U)+z*Math.sin(U),$=z*Math.cos(U)-N*Math.sin(U);Y*=1/W.parentContainer.scaleX,$*=1/W.parentContainer.scaleY,R=Y+V.dragStartX,H=$+V.dragStartY}W.emit(h.GAMEOBJECT_DRAG,E,R,H),this.emit(h.DRAG,E,W,R,H)}return A.length},processDragUpEvent:function(E){var P=this._drag[E.id];P.length>1&&(P=P.slice(0));for(var A=0;A<P.length;A++){var D=P[A],W=D.input;if(W&&W.dragState===2){W.dragState=0,W.dragX=W.localX-D.displayOriginX,W.dragY=W.localY-D.displayOriginY,W.dragStartCamera=null;var V=!1,K=W.target;K&&(D.emit(h.GAMEOBJECT_DROP,E,K),this.emit(h.DROP,E,D,K),W.target=null,V=!0),D.input&&D.input.enabled&&(D.emit(h.GAMEOBJECT_DRAG_END,E,W.dragX,W.dragY,V),this.emit(h.DRAG_END,E,D,V))}}return this.setDragState(E,0),P.splice(0),0},processMoveEvents:function(E){var P=0,A=this._temp,D=this._eventData,W=this._eventContainer;D.cancelled=!1;for(var V=0;V<A.length;V++){var K=A[V];if(!(!K.input||!K.input.enabled)&&(P++,K.emit(h.GAMEOBJECT_POINTER_MOVE,E,K.input.localX,K.input.localY,W),D.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(h.GAMEOBJECT_MOVE,E,K,W),D.cancelled||!this.isActive()||this.topOnly)))break}return!D.cancelled&&this.isActive()&&this.emit(h.POINTER_MOVE,E,A),P},processWheelEvent:function(E){var P=0,A=this._temp,D=this._eventData,W=this._eventContainer;D.cancelled=!1;for(var V=E.deltaX,K=E.deltaY,X=E.deltaZ,R=0;R<A.length;R++){var H=A[R];if(!(!H.input||!H.input.enabled)&&(P++,H.emit(h.GAMEOBJECT_POINTER_WHEEL,E,V,K,X,W),D.cancelled||!this.isActive()||H.input&&H.input.enabled&&(this.emit(h.GAMEOBJECT_WHEEL,E,H,V,K,X,W),D.cancelled||!this.isActive())))break}return!D.cancelled&&this.isActive()&&this.emit(h.POINTER_WHEEL,E,A,V,K,X),P},processOverEvents:function(E){var P=this._temp,A=0,D=P.length,W=[];if(D>0){var V=this.manager,K=this._eventData,X=this._eventContainer;K.cancelled=!1;for(var R=0;R<D;R++){var H=P[R];if(!(!H.input||!H.input.enabled)&&(W.push(H),V.setCursor(H.input),H.emit(h.GAMEOBJECT_POINTER_OVER,E,H.input.localX,H.input.localY,X),A++,K.cancelled||!this.isActive()||H.input&&H.input.enabled&&(this.emit(h.GAMEOBJECT_OVER,E,H,X),K.cancelled||!this.isActive())))break}!K.cancelled&&this.isActive()&&this.emit(h.POINTER_OVER,E,W)}return this._over[E.id]=W,A},processOutEvents:function(E){var P=this._over[E.id],A=0,D=P.length;if(D>0){var W=this.manager,V=this._eventData,K=this._eventContainer;V.cancelled=!1,this.sortGameObjects(P,E);for(var X=0;X<D;X++){var R=P[X];if(R=P[X],!(!R.input||!R.input.enabled)&&(W.resetCursor(R.input),R.emit(h.GAMEOBJECT_POINTER_OUT,E,K),A++,V.cancelled||!this.isActive()||R.input&&R.input.enabled&&(this.emit(h.GAMEOBJECT_OUT,E,R,K),V.cancelled||!this.isActive())))break}!V.cancelled&&this.isActive()&&this.emit(h.POINTER_OUT,E,P),this._over[E.id]=[]}return A},processOverOutEvents:function(E){var P=this._temp,A,D,W=[],V=[],K=[],X=this._over[E.id],R=this._drag[E.id],H=this.manager;for(A=0;A<X.length;A++)D=X[A],P.indexOf(D)===-1&&R.indexOf(D)===-1?W.push(D):K.push(D);for(A=0;A<P.length;A++)D=P[A],X.indexOf(D)===-1&&V.push(D);var L=W.length,N=0,z=this._eventData,U=this._eventContainer;if(z.cancelled=!1,L>0){for(this.sortGameObjects(W,E),A=0;A<L&&(D=W[A],!(!(!D.input||!D.input.enabled)&&(H.resetCursor(D.input),D.emit(h.GAMEOBJECT_POINTER_OUT,E,U),N++,z.cancelled||!this.isActive()||D.input&&D.input.enabled&&(this.emit(h.GAMEOBJECT_OUT,E,D,U),z.cancelled||!this.isActive()))));A++);(!z.cancelled||this.isActive())&&this.emit(h.POINTER_OUT,E,W)}if(L=V.length,z.cancelled=!1,L>0){for(this.sortGameObjects(V,E),A=0;A<L&&(D=V[A],!(!(!D.input||!D.input.enabled)&&(H.setCursor(D.input),D.emit(h.GAMEOBJECT_POINTER_OVER,E,D.input.localX,D.input.localY,U),N++,z.cancelled||!this.isActive()||D.input&&D.input.enabled&&(this.emit(h.GAMEOBJECT_OVER,E,D,U),z.cancelled||!this.isActive()))));A++);!z.cancelled&&this.isActive()&&this.emit(h.POINTER_OVER,E,V)}return X=K.concat(V),this._over[E.id]=this.sortGameObjects(X,E),N},processUpEvents:function(E){var P=this._temp,A=this._eventData,D=this._eventContainer;A.cancelled=!1;for(var W=0;W<P.length;W++){var V=P[W];if(!(!V.input||!V.input.enabled)&&(V.emit(h.GAMEOBJECT_POINTER_UP,E,V.input.localX,V.input.localY,D),A.cancelled||!this.isActive()||V.input&&V.input.enabled&&(this.emit(h.GAMEOBJECT_UP,E,V,D),A.cancelled||!this.isActive())))break}return!A.cancelled&&this.isActive()&&(E.upElement===this.manager.game.canvas?this.emit(h.POINTER_UP,E,P):this.emit(h.POINTER_UP_OUTSIDE,E)),P.length},forceDownState:function(E,P){this.forceState(E,P,h.GAMEOBJECT_POINTER_DOWN,h.GAMEOBJECT_DOWN,!1)},forceUpState:function(E,P){this.forceState(E,P,h.GAMEOBJECT_POINTER_UP,h.GAMEOBJECT_UP,!1)},forceOverState:function(E,P){this.forceState(E,P,h.GAMEOBJECT_POINTER_OVER,h.GAMEOBJECT_OVER,!0)},forceOutState:function(E,P){this.forceState(E,P,h.GAMEOBJECT_POINTER_OUT,h.GAMEOBJECT_OUT,!1)},forceState:function(E,P,A,D,W){var V=this._eventData,K=this._eventContainer;V.cancelled=!1,P.input&&P.input.enabled&&(P.emit(A,E,P.input.localX,P.input.localY,K),W&&this.setCursor(P.input),!V.cancelled&&this.isActive()&&P.input&&P.input.enabled&&this.emit(D,E,P,K))},queueForInsertion:function(E){return this._pendingInsertion.indexOf(E)===-1&&this._list.indexOf(E)===-1&&this._pendingInsertion.push(E),this},queueForRemoval:function(E){return this._pendingRemoval.push(E),this},setDraggable:function(E,P){P===void 0&&(P=!0),Array.isArray(E)||(E=[E]);for(var A=0;A<E.length;A++){var D=E[A];D.input.draggable=P;var W=this._draggable.indexOf(D);P&&W===-1?this._draggable.push(D):!P&&W>-1&&this._draggable.splice(W,1)}return this},makePixelPerfect:function(E){E===void 0&&(E=1);var P=this.systems.textures;return t(P,E)},setHitArea:function(E,P,A){if(P===void 0)return this.setHitAreaFromTexture(E);Array.isArray(E)||(E=[E]);var D=!1,W=!1,V=!1,K=!1,X=!1,R=!0;if(g(P)&&Object.keys(P).length){var H=P,L=E.some(function($){return $.hasOwnProperty("faces")});if(!L){P=c(H,"hitArea",null),A=c(H,"hitAreaCallback",null),X=c(H,"pixelPerfect",!1);var N=c(H,"alphaTolerance",1);X&&(P={},A=this.makePixelPerfect(N))}D=c(H,"draggable",!1),W=c(H,"dropZone",!1),V=c(H,"cursor",!1),K=c(H,"useHandCursor",!1),(!P||!A)&&(this.setHitAreaFromTexture(E),R=!1)}else typeof P=="function"&&!A&&(A=P,P={});for(var z=0;z<E.length;z++){var U=E[z];if(X&&U.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var Y=U.input?U.input:a(U,P,A);Y.customHitArea=R,Y.dropZone=W,Y.cursor=K?"pointer":V,U.input=Y,D&&this.setDraggable(U),this.queueForInsertion(U)}return this},setHitAreaCircle:function(E,P,A,D,W){W===void 0&&(W=m);var V=new o(P,A,D);return this.setHitArea(E,V,W)},setHitAreaEllipse:function(E,P,A,D,W,V){V===void 0&&(V=i);var K=new l(P,A,D,W);return this.setHitArea(E,K,V)},setHitAreaFromTexture:function(E,P){P===void 0&&(P=S),Array.isArray(E)||(E=[E]);for(var A=0;A<E.length;A++){var D=E[A],W=D.frame,V=0,K=0;if(D.width?(V=D.width,K=D.height):W&&(V=W.realWidth,K=W.realHeight),D.type==="Container"&&(V===0||K===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}V!==0&&K!==0&&(D.input=a(D,new v(0,0,V,K),P),this.queueForInsertion(D))}return this},setHitAreaRectangle:function(E,P,A,D,W,V){V===void 0&&(V=S);var K=new v(P,A,D,W);return this.setHitArea(E,K,V)},setHitAreaTriangle:function(E,P,A,D,W,V,K,X){X===void 0&&(X=C);var R=new T(P,A,D,W,V,K);return this.setHitArea(E,R,X)},enableDebug:function(E,P){P===void 0&&(P=65280);var A=E.input;if(!A||!A.hitArea)return this;var D=A.hitArea,W=D.type,V=A.hitAreaDebug,K=this.systems.add,X=this.systems.updateList;V&&(X.remove(V),V.destroy(),V=null);var R=0,H=0;switch(W){case u.CIRCLE:V=K.arc(0,0,D.radius),R=D.x-D.radius,H=D.y-D.radius;break;case u.ELLIPSE:V=K.ellipse(0,0,D.width,D.height),R=D.x-D.width/2,H=D.y-D.height/2;break;case u.LINE:V=K.line(0,0,D.x1,D.y1,D.x2,D.y2);break;case u.POLYGON:V=K.polygon(0,0,D.points);break;case u.RECTANGLE:V=K.rectangle(0,0,D.width,D.height),R=D.x,H=D.y;break;case u.TRIANGLE:V=K.triangle(0,0,D.x1,D.y1,D.x2,D.y2,D.x3,D.y3);break}return V&&(V.isFilled=!1,V.strokeColor=P,V.preUpdate=function(){V.setVisible(E.visible),V.setStrokeStyle(1/E.scale,V.strokeColor),V.setDisplayOrigin(E.displayOriginX,E.displayOriginY);var L=E.x,N=E.y,z=E.rotation,U=E.scaleX,Y=E.scaleY;if(E.parentContainer){var $=E.getWorldTransformMatrix();L=$.tx,N=$.ty,z=$.rotation,U=$.scaleX,Y=$.scaleY}V.setRotation(z),V.setScale(U,Y),V.setPosition(L+R*U,N+H*Y),V.setScrollFactor(E.scrollFactorX,E.scrollFactorY),V.setDepth(E.depth)},X.add(V),A.hitAreaDebug=V),this},removeDebug:function(E){var P=E.input;if(P&&P.hitAreaDebug){var A=P.hitAreaDebug;A.destroy(),P.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(E){return this.pollRate=E,this._pollTimer=0,this},setGlobalTopOnly:function(E){return this.manager.globalTopOnly=E,this},setTopOnly:function(E){return this.topOnly=E,this},sortGameObjects:function(E,P){if(E.length<2||!P.camera)return E;var A=P.camera.renderList;return E.sort(function(D,W){var V=Math.max(A.indexOf(D),0),K=Math.max(A.indexOf(W),0);return K-V})},sortDropZones:function(E){return E.length<2?E:(this.scene.sys.depthSort(),E.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(E,P){if(!E.parentContainer&&!P.parentContainer)return this.displayList.getIndex(P)-this.displayList.getIndex(E);if(E.parentContainer===P.parentContainer)return P.parentContainer.getIndex(P)-E.parentContainer.getIndex(E);if(E.parentContainer===P)return-1;if(P.parentContainer===E)return 1;for(var A=E.getIndexList(),D=P.getIndexList(),W=Math.min(A.length,D.length),V=0;V<W;V++){var K=A[V],X=D[V];if(K!==X)return X-K}return D.length-A.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(E){return this.manager.addPointer(E)},setDefaultCursor:function(E){return this.manager.setDefaultCursor(E),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(h.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var E=0;E<10;E++)this._drag[E]=[],this._over[E]=[];this.removeAllListeners();var P=this.manager;P.canvas.style.cursor=P.defaultCursor;var A=this.systems.events;A.off(w.TRANSITION_START,this.transitionIn,this),A.off(w.TRANSITION_OUT,this.transitionOut,this),A.off(w.TRANSITION_COMPLETE,this.transitionComplete,this),A.off(w.PRE_UPDATE,this.preUpdate,this),P.events.off(h.GAME_OUT,this.onGameOut,this),P.events.off(h.GAME_OVER,this.onGameOver,this),A.off(w.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var E=this.manager.pointers,P=0;P<E.length;P++)E[P].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(h.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(w.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",M,"input"),f.exports=M}),89639:((f,x,e)=>{var o=e(35154),m={},n={};n.register=function(r,a,t,s,l){m[r]={plugin:a,mapping:t,settingsKey:s,configKey:l}},n.getPlugin=function(r){return m[r]},n.install=function(r){var a=r.scene.sys,t=a.settings.input,s=a.game.config;for(var l in m){var i=m[l].plugin,h=m[l].mapping,d=m[l].settingsKey,c=m[l].configKey;o(t,d,s[c])&&(r[h]=new i(r))}},n.remove=function(r){m.hasOwnProperty(r)&&delete m[r]},f.exports=n}),42515:((f,x,e)=>{var o=e(31040),m=e(83419),n=e(20339),r=e(43855),a=e(47235),t=e(26099),s=e(25892),l=new m({initialize:function(h,d){this.manager=h,this.id=d,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new t,this.prevPosition=new t,this.midPoint=new t(-1,-1),this.velocity=new t,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=d===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(i){var h=i.getWorldPoint(this.x,this.y);return this.worldX=h.x,this.worldY=h.y,this},positionToCamera:function(i,h){return i.getWorldPoint(this.x,this.y,h)},updateMotion:function(){var i=this.position.x,h=this.position.y,d=this.midPoint.x,c=this.midPoint.y;if(!(i===d&&h===c)){var u=a(this.motionFactor,d,i),p=a(this.motionFactor,c,h);r(u,i,.1)&&(u=i),r(p,h,.1)&&(p=h),this.midPoint.set(u,p);var g=i-u,y=h-p;this.velocity.set(g,y),this.angle=o(u,p,i,h),this.distance=Math.sqrt(g*g+y*y)}},up:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=i.timeStamp,this.wasTouch=!1)},down:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),s.macOS&&i.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=i.timeStamp),this.wasTouch=!1},move:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.locked&&(this.movementX=i.movementX||i.mozMovementX||i.webkitMovementX||0,this.movementY=i.movementY||i.mozMovementY||i.webkitMovementY||0),this.moveTime=i.timeStamp,this.wasTouch=!1},wheel:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.deltaX=i.deltaX,this.deltaY=i.deltaY,this.deltaZ=i.deltaZ,this.wasTouch=!1},touchstart:function(i,h){i.pointerId&&(this.pointerId=i.pointerId),this.identifier=i.identifier,this.target=i.target,this.active=!0,this.buttons=1,this.event=h,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=h.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(i,h){this.event=h,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.moveTime=h.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(i,h){this.buttons=0,this.event=h,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=h.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(i,h){this.buttons=0,this.event=h,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=h.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(i,h){i===void 0&&(i=10),h===void 0&&(h=[]);for(var d=this.prevPosition.x,c=this.prevPosition.y,u=this.position.x,p=this.position.y,g=0;g<i;g++){var y=1/i*g;h[g]={x:a(y,d,u),y:a(y,c,p)}}return h},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},time:{get:function(){return this.event?this.event.timeStamp:0}}});f.exports=l}),93301:(f=>{var x={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};f.exports=x}),7179:(f=>{f.exports="boot"}),85375:(f=>{f.exports="destroy"}),39843:(f=>{f.exports="dragend"}),23388:(f=>{f.exports="dragenter"}),16133:(f=>{f.exports="drag"}),27829:(f=>{f.exports="dragleave"}),53904:(f=>{f.exports="dragover"}),56058:(f=>{f.exports="dragstart"}),2642:(f=>{f.exports="drop"}),88171:(f=>{f.exports="gameobjectdown"}),36147:(f=>{f.exports="dragend"}),71692:(f=>{f.exports="dragenter"}),96149:(f=>{f.exports="drag"}),81285:(f=>{f.exports="dragleave"}),74048:(f=>{f.exports="dragover"}),21322:(f=>{f.exports="dragstart"}),49378:(f=>{f.exports="drop"}),86754:(f=>{f.exports="gameobjectmove"}),86433:(f=>{f.exports="gameobjectout"}),60709:(f=>{f.exports="gameobjectover"}),24081:(f=>{f.exports="pointerdown"}),11172:(f=>{f.exports="pointermove"}),18907:(f=>{f.exports="pointerout"}),95579:(f=>{f.exports="pointerover"}),35368:(f=>{f.exports="pointerup"}),26972:(f=>{f.exports="wheel"}),47078:(f=>{f.exports="gameobjectup"}),73802:(f=>{f.exports="gameobjectwheel"}),56718:(f=>{f.exports="gameout"}),25936:(f=>{f.exports="gameover"}),27503:(f=>{f.exports="boot"}),50852:(f=>{f.exports="process"}),96438:(f=>{f.exports="update"}),59152:(f=>{f.exports="pointerlockchange"}),47777:(f=>{f.exports="pointerdown"}),27957:(f=>{f.exports="pointerdownoutside"}),19444:(f=>{f.exports="pointermove"}),54251:(f=>{f.exports="pointerout"}),18667:(f=>{f.exports="pointerover"}),27192:(f=>{f.exports="pointerup"}),24652:(f=>{f.exports="pointerupoutside"}),45132:(f=>{f.exports="wheel"}),44512:(f=>{f.exports="preupdate"}),15757:(f=>{f.exports="shutdown"}),41637:(f=>{f.exports="start"}),93802:(f=>{f.exports="update"}),8214:((f,x,e)=>{f.exports={BOOT:e(7179),DESTROY:e(85375),DRAG_END:e(39843),DRAG_ENTER:e(23388),DRAG:e(16133),DRAG_LEAVE:e(27829),DRAG_OVER:e(53904),DRAG_START:e(56058),DROP:e(2642),GAME_OUT:e(56718),GAME_OVER:e(25936),GAMEOBJECT_DOWN:e(88171),GAMEOBJECT_DRAG_END:e(36147),GAMEOBJECT_DRAG_ENTER:e(71692),GAMEOBJECT_DRAG:e(96149),GAMEOBJECT_DRAG_LEAVE:e(81285),GAMEOBJECT_DRAG_OVER:e(74048),GAMEOBJECT_DRAG_START:e(21322),GAMEOBJECT_DROP:e(49378),GAMEOBJECT_MOVE:e(86754),GAMEOBJECT_OUT:e(86433),GAMEOBJECT_OVER:e(60709),GAMEOBJECT_POINTER_DOWN:e(24081),GAMEOBJECT_POINTER_MOVE:e(11172),GAMEOBJECT_POINTER_OUT:e(18907),GAMEOBJECT_POINTER_OVER:e(95579),GAMEOBJECT_POINTER_UP:e(35368),GAMEOBJECT_POINTER_WHEEL:e(26972),GAMEOBJECT_UP:e(47078),GAMEOBJECT_WHEEL:e(73802),MANAGER_BOOT:e(27503),MANAGER_PROCESS:e(50852),MANAGER_UPDATE:e(96438),POINTER_DOWN:e(47777),POINTER_DOWN_OUTSIDE:e(27957),POINTER_MOVE:e(19444),POINTER_OUT:e(54251),POINTER_OVER:e(18667),POINTER_UP:e(27192),POINTER_UP_OUTSIDE:e(24652),POINTER_WHEEL:e(45132),POINTERLOCK_CHANGE:e(59152),PRE_UPDATE:e(44512),SHUTDOWN:e(15757),START:e(41637),UPDATE:e(93802)}}),97421:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a){this.pad=r,this.events=r.events,this.index=a,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});f.exports=m}),28884:((f,x,e)=>{var o=e(83419),m=e(92734),n=new o({initialize:function(a,t){this.pad=a,this.events=a.manager,this.index=t,this.value=0,this.threshold=1,this.pressed=!1},update:function(r){this.value=r;var a=this.pad,t=this.index;r>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(m.BUTTON_DOWN,a,this,r),this.pad.emit(m.GAMEPAD_BUTTON_DOWN,t,r,this)):this.pressed&&(this.pressed=!1,this.events.emit(m.BUTTON_UP,a,this,r),this.pad.emit(m.GAMEPAD_BUTTON_UP,t,r,this))},destroy:function(){this.pad=null,this.events=null}});f.exports=n}),99125:((f,x,e)=>{var o=e(97421),m=e(28884),n=e(83419),r=e(50792),a=e(26099),t=new n({Extends:r,initialize:function(l,i){r.call(this),this.manager=l,this.pad=i,this.id=i.id,this.index=i.index;for(var h=[],d=0;d<i.buttons.length;d++)h.push(new m(this,d));this.buttons=h;var c=[];for(d=0;d<i.axes.length;d++)c.push(new o(this,d));this.axes=c,this.vibration=i.vibrationActuator;var u={value:0,pressed:!1};this._LCLeft=h[14]?h[14]:u,this._LCRight=h[15]?h[15]:u,this._LCTop=h[12]?h[12]:u,this._LCBottom=h[13]?h[13]:u,this._RCLeft=h[2]?h[2]:u,this._RCRight=h[1]?h[1]:u,this._RCTop=h[3]?h[3]:u,this._RCBottom=h[0]?h[0]:u,this._FBLeftTop=h[4]?h[4]:u,this._FBLeftBottom=h[6]?h[6]:u,this._FBRightTop=h[5]?h[5]:u,this._FBRightBottom=h[7]?h[7]:u;var p={value:0};this._HAxisLeft=c[0]?c[0]:p,this._VAxisLeft=c[1]?c[1]:p,this._HAxisRight=c[2]?c[2]:p,this._VAxisRight=c[3]?c[3]:p,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(s){return this.axes[s].getValue()},setAxisThreshold:function(s){for(var l=0;l<this.axes.length;l++)this.axes[l].threshold=s},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(s){return this.buttons[s].value},isButtonDown:function(s){return this.buttons[s].pressed},update:function(s){if(!(s.timestamp<this._created)){var l,i=this.buttons,h=s.buttons,d=i.length;for(l=0;l<d;l++)i[l].update(h[l].value);var c=this.axes,u=s.axes;for(d=c.length,l=0;l<d;l++)c[l].update(u[l]);d>=2&&(this.leftStick.set(c[0].getValue(),c[1].getValue()),d>=4&&this.rightStick.set(c[2].getValue(),c[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var s;for(s=0;s<this.buttons.length;s++)this.buttons[s].destroy();for(s=0;s<this.axes.length;s++)this.axes[s].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});f.exports=t}),56654:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(92734),r=e(99125),a=e(35154),t=e(89639),s=e(8214),l=new o({Extends:m,initialize:function(h){m.call(this),this.scene=h.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=h,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,h.pluginEvents.once(s.BOOT,this.boot,this),h.pluginEvents.on(s.START,this.start,this)},boot:function(){var i=this.scene.sys.game,h=this.settings.input,d=i.config;this.enabled=a(h,"gamepad",d.inputGamepad)&&i.device.input.gamepads,this.target=a(h,"gamepad.target",d.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var i=this,h=this.target,d=function(c){c.defaultPrevented||!i.isActive()||(i.refreshPads(),i.queue.push(c))};this.onGamepadHandler=d,h.addEventListener("gamepadconnected",d,!1),h.addEventListener("gamepaddisconnected",d,!1),this.sceneInputPlugin.pluginEvents.on(s.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(s.UPDATE,this.update);for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].removeAllListeners()},disconnectAll:function(){for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].pad.connected=!1},refreshPads:function(){var i=navigator.getGamepads();if(!i)this.disconnectAll();else for(var h=this.gamepads,d=0;d<i.length;d++){var c=i[d];if(c){var u=c.id,p=c.index,g=h[p];if(g)g.id!==u?(g.destroy(),h[p]=new r(this,c)):g.update(c);else{var y=new r(this,c);h[p]=y,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=y):this._pad3=y:this._pad2=y:this._pad1=y}}}},getAll:function(){for(var i=[],h=this.gamepads,d=0;d<h.length;d++)h[d]&&i.push(h[d]);return i},getPad:function(i){for(var h=this.gamepads,d=0;d<h.length;d++)if(h[d]&&h[d].index===i)return h[d]},update:function(){if(this.enabled){this.refreshPads();var i=this.queue.length;if(i!==0)for(var h=this.queue.splice(0,i),d=0;d<i;d++){var c=h[d],u=this.getPad(c.gamepad.index);c.type==="gamepadconnected"?this.emit(n.CONNECTED,u,c):c.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,u,c)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var i=0;i<this.gamepads.length;i++)this.gamepads[i]&&this.gamepads[i].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});t.register("GamepadPlugin",l,"gamepad","gamepad","inputGamepad"),f.exports=l}),89651:(f=>{f.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),65294:(f=>{f.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),90089:(f=>{f.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),64894:((f,x,e)=>{f.exports={DUALSHOCK_4:e(65294),SNES_USB:e(89651),XBOX_360:e(90089)}}),46008:(f=>{f.exports="down"}),7629:(f=>{f.exports="up"}),42206:(f=>{f.exports="connected"}),86544:(f=>{f.exports="disconnected"}),94784:(f=>{f.exports="down"}),14325:(f=>{f.exports="up"}),92734:((f,x,e)=>{f.exports={BUTTON_DOWN:e(46008),BUTTON_UP:e(7629),CONNECTED:e(42206),DISCONNECTED:e(86544),GAMEPAD_BUTTON_DOWN:e(94784),GAMEPAD_BUTTON_UP:e(14325)}}),48646:((f,x,e)=>{f.exports={Axis:e(97421),Button:e(28884),Events:e(92734),Gamepad:e(99125),GamepadPlugin:e(56654),Configs:e(64894)}}),14350:((f,x,e)=>{var o=e(93301),m=e(79291),n={CreatePixelPerfectHandler:e(84409),CreateInteractiveObject:e(74457),Events:e(8214),Gamepad:e(48646),InputManager:e(7003),InputPlugin:e(48205),InputPluginCache:e(89639),Keyboard:e(51442),Mouse:e(87078),Pointer:e(42515),Touch:e(95618)};n=m(!1,n,o),f.exports=n}),78970:((f,x,e)=>{var o=e(72905),m=e(83419),n=e(8443),r=e(8214),a=e(46032),t=e(29747),s=new m({initialize:function(i){this.manager=i,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=t,this.onKeyUp=t,i.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputKeyboard,this.target=l.inputKeyboardEventTarget,this.addCapture(l.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var l=this;this.onKeyDown=function(h){if(!(h.defaultPrevented||!l.enabled||!l.manager)){l.queue.push(h),l.manager.events.emit(r.MANAGER_PROCESS);var d=h.altKey||h.ctrlKey||h.shiftKey||h.metaKey;l.preventDefault&&!d&&l.captures.indexOf(h.keyCode)>-1&&h.preventDefault()}},this.onKeyUp=function(h){if(!(h.defaultPrevented||!l.enabled||!l.manager)){l.queue.push(h),l.manager.events.emit(r.MANAGER_PROCESS);var d=h.altKey||h.ctrlKey||h.shiftKey||h.metaKey;l.preventDefault&&!d&&l.captures.indexOf(h.keyCode)>-1&&h.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var l=this.target;l.removeEventListener("keydown",this.onKeyDown,!1),l.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(l){typeof l=="string"&&(l=l.split(",")),Array.isArray(l)||(l=[l]);for(var i=this.captures,h=0;h<l.length;h++){var d=l[h];typeof d=="string"&&(d=a[d.trim().toUpperCase()]),i.indexOf(d)===-1&&i.push(d)}this.preventDefault=i.length>0},removeCapture:function(l){typeof l=="string"&&(l=l.split(",")),Array.isArray(l)||(l=[l]);for(var i=this.captures,h=0;h<l.length;h++){var d=l[h];typeof d=="string"&&(d=a[d.toUpperCase()]),o(i,d)}this.preventDefault=i.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});f.exports=s}),28846:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(95922),r=e(8443),a=e(35154),t=e(8214),s=e(89639),l=e(30472),i=e(46032),h=e(87960),d=e(74600),c=e(44594),u=e(56583),p=new o({Extends:m,initialize:function(y){m.call(this),this.game=y.systems.game,this.scene=y.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=y,this.manager=y.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,y.pluginEvents.once(t.BOOT,this.boot,this),y.pluginEvents.on(t.START,this.start,this)},boot:function(){var g=this.settings.input;this.enabled=a(g,"keyboard",!0);var y=a(g,"keyboard.capture",null);y&&this.addCaptures(y),this.sceneInputPlugin.pluginEvents.once(t.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(t.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(t.SHUTDOWN,this.shutdown,this),this.game.events.on(r.BLUR,this.resetKeys,this),this.scene.sys.events.on(c.PAUSE,this.resetKeys,this),this.scene.sys.events.on(c.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(g){return this.manager.addCapture(g),this},removeCapture:function(g){return this.manager.removeCapture(g),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:i.UP,down:i.DOWN,left:i.LEFT,right:i.RIGHT,space:i.SPACE,shift:i.SHIFT})},addKeys:function(g,y,v){y===void 0&&(y=!0),v===void 0&&(v=!1);var S={};if(typeof g=="string"){g=g.split(",");for(var w=0;w<g.length;w++){var T=g[w].trim();T&&(S[T]=this.addKey(T,y,v))}}else for(var C in g)S[C]=this.addKey(g[C],y,v);return S},addKey:function(g,y,v){y===void 0&&(y=!0),v===void 0&&(v=!1);var S=this.keys;if(g instanceof l){var w=S.indexOf(g);return w>-1?S[w]=g:S[g.keyCode]=g,y&&this.addCapture(g.keyCode),g.setEmitOnRepeat(v),g}return typeof g=="string"&&(g=i[g.toUpperCase()]),S[g]||(S[g]=new l(this,g),y&&this.addCapture(g),S[g].setEmitOnRepeat(v)),S[g]},removeKey:function(g,y,v){y===void 0&&(y=!1),v===void 0&&(v=!1);var S=this.keys,w;if(g instanceof l){var T=S.indexOf(g);T>-1&&(w=this.keys[T],this.keys[T]=void 0)}else typeof g=="string"&&(g=i[g.toUpperCase()]);return S[g]&&(w=S[g],S[g]=void 0),w&&(w.plugin=null,v&&this.removeCapture(w.keyCode),y&&w.destroy()),this},removeAllKeys:function(g,y){g===void 0&&(g=!1),y===void 0&&(y=!1);for(var v=this.keys,S=0;S<v.length;S++){var w=v[S];w&&(v[S]=void 0,y&&this.removeCapture(w.keyCode),g&&w.destroy())}return this},createCombo:function(g,y){return new h(this,g,y)},checkDown:function(g,y){if(y===void 0&&(y=0),this.enabled&&g.isDown){var v=u(this.time-g.timeDown,y);if(v>g._tick)return g._tick=v,!0}return!1},update:function(){var g=this.manager.queue,y=g.length;if(!(!this.isActive()||y===0))for(var v=this.keys,S=0;S<y;S++){var w=g[S],T=w.keyCode,C=v[T],M=!1;w.cancelled===void 0&&(w.cancelled=0,w.stopImmediatePropagation=function(){w.cancelled=1},w.stopPropagation=function(){w.cancelled=-1}),w.cancelled!==-1&&(T===this.prevCode&&w.timeStamp===this.prevTime&&w.type===this.prevType||(this.prevCode=T,this.prevTime=w.timeStamp,this.prevType=w.type,w.type==="keydown"?(C&&(M=C.isDown,C.onDown(w)),!w.cancelled&&(!C||!M)&&(d[T]&&this.emit(n.KEY_DOWN+d[T],w),w.cancelled||this.emit(n.ANY_KEY_DOWN,w))):(C&&C.onUp(w),w.cancelled||(d[T]&&this.emit(n.KEY_UP+d[T],w),w.cancelled||this.emit(n.ANY_KEY_UP,w))),w.cancelled===1&&(w.cancelled=0)))}},resetKeys:function(){for(var g=this.keys,y=0;y<g.length;y++)g[y]&&g[y].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(t.MANAGER_PROCESS,this.update,this),this.game.events.off(r.BLUR,this.resetKeys),this.scene.sys.events.off(c.PAUSE,this.resetKeys,this),this.scene.sys.events.off(c.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var g=this.keys,y=0;y<g.length;y++)g[y]&&g[y].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});s.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),f.exports=p}),66970:(f=>{var x=function(e,o){return o.timeLastMatched=e.timeStamp,o.index++,o.index===o.size?!0:(o.current=o.keyCodes[o.index],!1)};f.exports=x}),87960:((f,x,e)=>{var o=e(83419),m=e(95922),n=e(95540),r=e(68769),a=e(92803),t=new o({initialize:function(l,i,h){if(h===void 0&&(h={}),i.length<2)return!1;this.manager=l,this.enabled=!0,this.keyCodes=[];for(var d=0;d<i.length;d++){var c=i[d];typeof c=="string"?this.keyCodes.push(c.toUpperCase().charCodeAt(0)):typeof c=="number"?this.keyCodes.push(c):c.hasOwnProperty("keyCode")&&this.keyCodes.push(c.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(h,"resetOnWrongKey",!0),this.maxKeyDelay=n(h,"maxKeyDelay",0),this.resetOnMatch=n(h,"resetOnMatch",!1),this.deleteOnMatch=n(h,"deleteOnMatch",!1);var u=this,p=function(g){if(!(u.matched||!u.enabled)){var y=r(g,u);y&&(u.manager.emit(m.COMBO_MATCH,u,g),u.resetOnMatch?a(u):u.deleteOnMatch&&u.destroy())}};this.onKeyDown=p,this.manager.on(m.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(m.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});f.exports=t}),68769:((f,x,e)=>{var o=e(66970),m=function(n,r){if(r.matched)return!0;var a=!1,t=!1;if(n.keyCode===r.current)if(r.index>0&&r.maxKeyDelay>0){var s=r.timeLastMatched+r.maxKeyDelay;n.timeStamp<=s&&(t=!0,a=o(n,r))}else t=!0,a=o(n,r);return!t&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),a&&(r.timeLastMatched=n.timeStamp,r.matched=!0,r.timeMatched=n.timeStamp),a};f.exports=m}),92803:(f=>{var x=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};f.exports=x}),92612:(f=>{f.exports="keydown"}),23345:(f=>{f.exports="keyup"}),21957:(f=>{f.exports="keycombomatch"}),44743:(f=>{f.exports="down"}),3771:(f=>{f.exports="keydown-"}),46358:(f=>{f.exports="keyup-"}),75674:(f=>{f.exports="up"}),95922:((f,x,e)=>{f.exports={ANY_KEY_DOWN:e(92612),ANY_KEY_UP:e(23345),COMBO_MATCH:e(21957),DOWN:e(44743),KEY_DOWN:e(3771),KEY_UP:e(46358),UP:e(75674)}}),51442:((f,x,e)=>{f.exports={Events:e(95922),KeyboardManager:e(78970),KeyboardPlugin:e(28846),Key:e(30472),KeyCodes:e(46032),KeyCombo:e(87960),AdvanceKeyCombo:e(66970),ProcessKeyCombo:e(68769),ResetKeyCombo:e(92803),JustDown:e(90229),JustUp:e(38796),DownDuration:e(37015),UpDuration:e(41170)}}),37015:(f=>{var x=function(e,o){o===void 0&&(o=50);var m=e.plugin.game.loop.time-e.timeDown;return e.isDown&&m<o};f.exports=x}),90229:(f=>{var x=function(e){return e._justDown?(e._justDown=!1,!0):!1};f.exports=x}),38796:(f=>{var x=function(e){return e._justUp?(e._justUp=!1,!0):!1};f.exports=x}),30472:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(95922),r=new o({Extends:m,initialize:function(t,s){m.call(this),this.plugin=t,this.keyCode=s,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(a){return this.emitOnRepeat=a,this},onDown:function(a){this.originalEvent=a,this.enabled&&(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.location=a.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,a):(this.isDown=!0,this.isUp=!1,this.timeDown=a.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,a)))},onUp:function(a){this.originalEvent=a,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=a.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,a))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});f.exports=r}),46032:(f=>{var x={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};f.exports=x}),74600:((f,x,e)=>{var o=e(46032),m={};for(var n in o)m[o[n]]=n;f.exports=m}),41170:(f=>{var x=function(e,o){o===void 0&&(o=50);var m=e.plugin.game.loop.time-e.timeUp;return e.isUp&&m<o};f.exports=x}),85098:((f,x,e)=>{var o=e(83419),m=e(89357),n=e(8214),r=e(29747),a=new o({initialize:function(s){this.manager=s,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=r,this.onMouseDown=r,this.onMouseUp=r,this.onMouseDownWindow=r,this.onMouseUpWindow=r,this.onMouseOver=r,this.onMouseOut=r,this.onMouseWheel=r,this.pointerLockChange=r,this.isTop=!0,s.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),this},requestPointerLock:function(){if(m.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){m.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var s=this,l=this.manager,i=l.canvas,h=window&&window.focus&&l.game.config.autoFocus;this.onMouseMove=function(c){!c.defaultPrevented&&s.enabled&&l&&l.enabled&&(l.onMouseMove(c),s.preventDefaultMove&&c.preventDefault())},this.onMouseDown=function(c){h&&window.focus(),!c.defaultPrevented&&s.enabled&&l&&l.enabled&&(l.onMouseDown(c),s.preventDefaultDown&&c.target===i&&c.preventDefault())},this.onMouseDownWindow=function(c){c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents||!c.defaultPrevented&&s.enabled&&l&&l.enabled&&c.target!==i&&l.onMouseDown(c)},this.onMouseUp=function(c){!c.defaultPrevented&&s.enabled&&l&&l.enabled&&(l.onMouseUp(c),s.preventDefaultUp&&c.target===i&&c.preventDefault())},this.onMouseUpWindow=function(c){c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents||!c.defaultPrevented&&s.enabled&&l&&l.enabled&&c.target!==i&&l.onMouseUp(c)},this.onMouseOver=function(c){!c.defaultPrevented&&s.enabled&&l&&l.enabled&&l.setCanvasOver(c)},this.onMouseOut=function(c){!c.defaultPrevented&&s.enabled&&l&&l.enabled&&l.setCanvasOut(c)},this.onMouseWheel=function(c){!c.defaultPrevented&&s.enabled&&l&&l.enabled&&l.onMouseWheel(c),s.preventDefaultWheel&&c.target===i&&c.preventDefault()};var d={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,d),t.addEventListener("mouseout",this.onMouseOut,d),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,d),window&&l.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,d),window.top.addEventListener("mouseup",this.onMouseUpWindow,d)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,d),window.addEventListener("mouseup",this.onMouseUpWindow,d),this.isTop=!1}m.pointerLock&&(this.pointerLockChange=function(c){var u=s.target;s.locked=document.pointerLockElement===u||document.mozPointerLockElement===u||document.webkitPointerLockElement===u,l.onPointerLockChange(c)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&(t=this.isTop?window.top:window,t.removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),m.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});f.exports=a}),87078:((f,x,e)=>{f.exports={MouseManager:e(85098)}}),36210:((f,x,e)=>{var o=e(83419),m=e(8214),n=e(29747),r=new o({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.isTop=!0,t.events.once(m.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputTouch,this.target=a.inputTouchEventTarget,this.capture=a.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},startListeners:function(){var a=this.target;if(a){var t=this,s=this.manager,l=s.canvas,i=window&&window.focus&&s.game.config.autoFocus;this.onTouchMove=function(u){!u.defaultPrevented&&t.enabled&&s&&s.enabled&&(s.onTouchMove(u),t.capture&&u.cancelable&&u.preventDefault())},this.onTouchStart=function(u){i&&window.focus(),!u.defaultPrevented&&t.enabled&&s&&s.enabled&&(s.onTouchStart(u),t.capture&&u.cancelable&&u.target===l&&u.preventDefault())},this.onTouchStartWindow=function(u){!u.defaultPrevented&&t.enabled&&s&&s.enabled&&u.target!==l&&s.onTouchStart(u)},this.onTouchEnd=function(u){!u.defaultPrevented&&t.enabled&&s&&s.enabled&&(s.onTouchEnd(u),t.capture&&u.cancelable&&u.target===l&&u.preventDefault())},this.onTouchEndWindow=function(u){!u.defaultPrevented&&t.enabled&&s&&s.enabled&&u.target!==l&&s.onTouchEnd(u)},this.onTouchCancel=function(u){!u.defaultPrevented&&t.enabled&&s&&s.enabled&&(s.onTouchCancel(u),t.capture&&u.preventDefault())},this.onTouchCancelWindow=function(u){!u.defaultPrevented&&t.enabled&&s&&s.enabled&&s.onTouchCancel(u)};var h=this.capture,d={passive:!0},c={passive:!1};if(a.addEventListener("touchstart",this.onTouchStart,h?c:d),a.addEventListener("touchmove",this.onTouchMove,h?c:d),a.addEventListener("touchend",this.onTouchEnd,h?c:d),a.addEventListener("touchcancel",this.onTouchCancel,h?c:d),window&&s.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,c),window.top.addEventListener("touchend",this.onTouchEndWindow,c),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,c)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,c),window.addEventListener("touchend",this.onTouchEndWindow,c),window.addEventListener("touchcancel",this.onTouchCancelWindow,c),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("touchstart",this.onTouchStart),a.removeEventListener("touchmove",this.onTouchMove),a.removeEventListener("touchend",this.onTouchEnd),a.removeEventListener("touchcancel",this.onTouchCancel),window&&(a=this.isTop?window.top:window,a.removeEventListener("touchstart",this.onTouchStartWindow),a.removeEventListener("touchend",this.onTouchEndWindow),a.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});f.exports=r}),95618:((f,x,e)=>{f.exports={TouchManager:e(36210)}}),41299:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(54899),r=e(95540),a=e(98356),t=e(3374),s=e(84376),l=e(92638),i=new o({initialize:function(d,c){if(this.loader=d,this.cache=r(c,"cache",!1),this.type=r(c,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=r(c,"key",!1);var u=this.key;if(d.prefix&&d.prefix!==""&&(this.key=d.prefix+u),!this.key)throw new Error("Invalid File key: "+this.key);var p=r(c,"url");p===void 0?p=d.path+u+"."+r(c,"extension",""):typeof p=="string"&&!p.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(p=d.path+p),this.url=p,this.src="",this.xhrSettings=l(r(c,"responseType",void 0)),r(c,"xhrSettings",!1)&&(this.xhrSettings=t(this.xhrSettings,r(c,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?m.FILE_POPULATED:m.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(c,"config",{}),this.multiFile,this.linkFile,this.base64=typeof p=="string"&&p.indexOf("data:")===0,this.retryAttempts=r(c,"maxRetries",d.maxRetries)},setLink:function(h){this.linkFile=h,h.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===m.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=m.FILE_LOADING,this.src=a(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=s(this,this.loader.xhr)}},onLoad:function(h,d){var c=h.responseURL&&this.loader.localSchemes.some(function(g){return h.responseURL.indexOf(g)===0}),u=c&&d.target.status===0,p=!(d.target&&d.target.status!==200)||u;h.readyState===4&&h.status>=400&&h.status<=599&&(p=!1),this.state=m.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,p)},onBase64Load:function(h){this.xhrLoader=h,this.state=m.FILE_LOADED,this.percentComplete=1,this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(h){h.lengthComputable&&(this.bytesLoaded=h.loaded,this.bytesTotal=h.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=m.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=m.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=m.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(h){if(this.state!==m.FILE_PENDING_DESTROY){h===void 0&&(h=this.data);var d=this.key,c=this.type;this.loader.emit(n.FILE_COMPLETE,d,c,h),this.loader.emit(n.FILE_KEY_COMPLETE+c+"-"+d,d,c,h),this.loader.flagForRemoval(this),this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});i.createObjectURL=function(h,d,c){if(typeof URL=="function")h.src=URL.createObjectURL(d);else{var u=new FileReader;u.onload=function(){h.removeAttribute("crossOrigin"),h.src="data:"+(d.type||c)+";base64,"+u.result.split(",")[1]},u.onerror=h.onerror,u.readAsDataURL(d)}},i.revokeObjectURL=function(h){typeof URL=="function"&&URL.revokeObjectURL(h.src)},f.exports=i}),74099:(f=>{var x={},e={install:function(o){for(var m in x)o[m]=x[m]},register:function(o,m){x[o]=m},destroy:function(){x={}}};f.exports=e}),98356:(f=>{var x=function(e,o){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:o+e.url:!1};f.exports=x}),74261:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(35072),r=e(50792),a=e(54899),t=e(74099),s=e(95540),l=e(35154),i=e(41212),h=e(37277),d=e(44594),c=e(92638),u=new o({Extends:r,initialize:function(g){r.call(this);var y=g.sys.game.config,v=g.sys.settings.loader;this.scene=g,this.systems=g.sys,this.cacheManager=g.sys.cache,this.textureManager=g.sys.textures,this.sceneManager=g.sys.game.scene,t.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(s(v,"baseURL",y.loaderBaseURL)),this.setPath(s(v,"path",y.loaderPath)),this.setPrefix(s(v,"prefix",y.loaderPrefix)),this.maxParallelDownloads=s(v,"maxParallelDownloads",y.loaderMaxParallelDownloads),this.xhr=c(s(v,"responseType",y.loaderResponseType),s(v,"async",y.loaderAsync),s(v,"user",y.loaderUser),s(v,"password",y.loaderPassword),s(v,"timeout",y.loaderTimeout),s(v,"withCredentials",y.loaderWithCredentials)),this.crossOrigin=s(v,"crossOrigin",y.loaderCrossOrigin),this.imageLoadType=s(v,"imageLoadType",y.loaderImageLoadType),this.localSchemes=s(v,"localScheme",y.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=m.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=s(v,"maxRetries",y.loaderMaxRetries),g.sys.events.once(d.BOOT,this.boot,this),g.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},setBaseURL:function(p){return p===void 0&&(p=""),p!==""&&p.substr(-1)!=="/"&&(p=p.concat("/")),this.baseURL=p,this},setPath:function(p){return p===void 0&&(p=""),p!==""&&p.substr(-1)!=="/"&&(p=p.concat("/")),this.path=p,this},setPrefix:function(p){return p===void 0&&(p=""),this.prefix=p,this},setCORS:function(p){return this.crossOrigin=p,this},addFile:function(p){Array.isArray(p)||(p=[p]);for(var g=0;g<p.length;g++){var y=p[g];this.keyExists(y)||(this.list.set(y),this.emit(a.ADD,y.key,y.type,this,y),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(p){var g=p.hasCacheConflict();return g||this.list.iterate(function(y){if(y.type===p.type&&y.key===p.key)return g=!0,!1}),!g&&this.isLoading()&&(this.inflight.iterate(function(y){if(y.type===p.type&&y.key===p.key)return g=!0,!1}),this.queue.iterate(function(y){if(y.type===p.type&&y.key===p.key)return g=!0,!1})),g},addPack:function(p,g){if(typeof g=="string"){var y=l(p,g);y&&(p={packKey:y})}var v=0,S=this.baseURL,w=this.path,T=this.prefix;for(var C in p)if(Object.prototype.hasOwnProperty.call(p,C)){var M=p[C],E=s(M,"baseURL",S),P=s(M,"path",w),A=s(M,"prefix",T),D=s(M,"files",null),W=s(M,"defaultType","void");if(Array.isArray(D)){this.setBaseURL(E),this.setPath(P),this.setPrefix(A);for(var V=0;V<D.length;V++){var K=D[V],X=K.hasOwnProperty("type")?K.type:W;this[X]&&(this[X](K),v++)}}}return this.setBaseURL(S),this.setPath(w),this.setPrefix(T),v>0},removePack:function(p,g){var y=this.systems.anims,v=this.cacheManager,S=this.textureManager,w={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},T;if(i(p))T=p;else if(T=v.json.get(p),!T){console.warn("Asset Pack not found in JSON cache:",p);return}g&&(T={_:T[g]});for(var C in T){var M=T[C],E=s(M,"prefix",""),P=s(M,"files"),A=s(M,"defaultType");if(Array.isArray(P))for(var D=0;D<P.length;D++){var W=P[D],V=W.hasOwnProperty("type")?W.type:A;if(!V){console.warn("No type:",W);continue}var K=E+W.key;if(V==="animation"&&y.remove(K),!((V==="aseprite"||V==="atlas"||V==="atlasXML"||V==="htmlTexture"||V==="image"||V==="multiatlas"||V==="spritesheet"||V==="svg"||V==="texture"||V==="unityAtlas")&&(S.remove(K),!w[V]))){if(V==="pack"){this.removePack(K,W.dataKey);continue}if(V==="spine"){var X=v.custom.spine.get(K);if(!X)continue;var R=X.prefix===void 0?"":X.prefix;v.custom.spine.remove(K);var H=v.custom.spineTextures.get(K);if(!H)continue;v.custom.spineTextures.remove(K);for(var L=0;L<H.pages.length;L++){var N=H.pages[L],z=R+N.name,U=K+":"+z;S.exists(U)?S.remove(U):S.remove(z)}}var Y=w[V];if(Y!==null){if(!Y){console.warn("Unknown type:",V);continue}var $=v[Y];$.remove(K)}}}}},isLoading:function(){return this.state===m.LOADER_LOADING||this.state===m.LOADER_PROCESSING},isReady:function(){return this.state===m.LOADER_IDLE||this.state===m.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),this.list.size===0?this.loadComplete():(this.state=m.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(d.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===m.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(p){if((p.state===m.FILE_POPULATED||p.state===m.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(p),this.list.delete(p),p.crossOrigin||(p.crossOrigin=this.crossOrigin),p.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(p,g){this.inflight&&(this.inflight.delete(p),this.updateProgress(),g?(this.totalComplete++,this.queue.set(p),this.emit(a.FILE_LOAD,p),p.onProcess()):(this.totalFailed++,this._deleteQueue.set(p),this.emit(a.FILE_LOAD_ERROR,p),this.fileProcessComplete(p)))},fileProcessComplete:function(p){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(p.state===m.FILE_ERRORED?p.multiFile&&p.multiFile.onFileFailed(p):p.state===m.FILE_COMPLETE&&(p.multiFile?p.multiFile.isReadyToProcess()&&(p.multiFile.addToCache(),p.multiFile.pendingDestroy()):(p.addToCache(),p.pendingDestroy())),this.queue.delete(p),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=m.LOADER_COMPLETE,this.systems.events.off(d.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(p){this._deleteQueue.set(p)},saveJSON:function(p,g){return this.save(JSON.stringify(p),g)},save:function(p,g,y){g===void 0&&(g="file.json"),y===void 0&&(y="application/json");var v=new Blob([p],{type:y}),S=URL.createObjectURL(v),w=document.createElement("a");return w.download=g,w.textContent="Download "+g,w.href=S,w.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var p=this.systems.game.config,g=this.systems.settings.loader;this.setBaseURL(s(g,"baseURL",p.loaderBaseURL)),this.setPath(s(g,"path",p.loaderPath)),this.setPrefix(s(g,"prefix",p.loaderPrefix)),this.state=m.LOADER_IDLE},shutdown:function(){this.reset(),this.state=m.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=m.LOADER_DESTROYED,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});h.register("Loader",u,"load"),f.exports=u}),3374:((f,x,e)=>{var o=e(79291),m=e(92638),n=function(r,a){var t=r===void 0?m():o({},r);if(a)for(var s in a)a[s]!==void 0&&(t[s]=a[s]);return t};f.exports=n}),26430:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(54899),r=new o({initialize:function(t,s,l,i){var h=[];i.forEach(function(u){u&&h.push(u)}),this.loader=t,this.type=s,this.key=l;var d=this.key;t.prefix&&t.prefix!==""&&(this.key=t.prefix+d),this.multiKeyIndex=t.multiKeyIndex++,this.files=h,this.state=m.FILE_PENDING,this.complete=!1,this.pending=h.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var c=0;c<h.length;c++)h[c].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(a){return this.files.push(a),a.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(a){var t=this.files.indexOf(a);t!==-1&&this.pending--},onFileFailed:function(a){var t=this.files.indexOf(a);t!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,a.type,a.key))},pendingDestroy:function(){if(this.state!==m.FILE_PENDING_DESTROY){var a=this.key,t=this.type;this.loader.emit(n.FILE_COMPLETE,a,t),this.loader.emit(n.FILE_KEY_COMPLETE+t+"-"+a,a,t),this.loader.flagForRemoval(this);for(var s=0;s<this.files.length;s++)this.files[s].pendingDestroy();this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});f.exports=r}),84376:((f,x,e)=>{var o=e(3374),m=function(n,r){var a=o(r,n.xhrSettings);if(n.base64){var t=n.url.split(";base64,").pop()||n.url.split(",").pop(),s;n.xhrSettings.responseType==="arraybuffer"?s={response:Uint8Array.from(atob(t),function(h){return h.charCodeAt(0)}).buffer}:s={responseText:atob(t)},n.onBase64Load(s);return}var l=new XMLHttpRequest;if(l.open("GET",n.src,a.async,a.user,a.password),l.responseType=n.xhrSettings.responseType,l.timeout=a.timeout,a.headers)for(var i in a.headers)l.setRequestHeader(i,a.headers[i]);return a.header&&a.headerValue&&l.setRequestHeader(a.header,a.headerValue),a.requestedWith&&l.setRequestHeader("X-Requested-With",a.requestedWith),a.overrideMimeType&&l.overrideMimeType(a.overrideMimeType),a.withCredentials&&(l.withCredentials=!0),l.onload=n.onLoad.bind(n,l),l.onerror=n.onError.bind(n,l),l.onprogress=n.onProgress.bind(n),l.ontimeout=n.onError.bind(n,l),l.send(),l};f.exports=m}),92638:(f=>{var x=function(e,o,m,n,r,a){return e===void 0&&(e=""),o===void 0&&(o=!0),m===void 0&&(m=""),n===void 0&&(n=""),r===void 0&&(r=0),a===void 0&&(a=!1),{responseType:e,async:o,user:m,password:n,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a}};f.exports=x}),23906:(f=>{var x={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};f.exports=x}),42155:(f=>{f.exports="addfile"}),38991:(f=>{f.exports="complete"}),27540:(f=>{f.exports="filecomplete"}),87464:(f=>{f.exports="filecomplete-"}),94486:(f=>{f.exports="loaderror"}),13035:(f=>{f.exports="load"}),38144:(f=>{f.exports="fileprogress"}),97520:(f=>{f.exports="postprocess"}),85595:(f=>{f.exports="progress"}),55680:(f=>{f.exports="start"}),54899:((f,x,e)=>{f.exports={ADD:e(42155),COMPLETE:e(38991),FILE_COMPLETE:e(27540),FILE_KEY_COMPLETE:e(87464),FILE_LOAD_ERROR:e(94486),FILE_LOAD:e(13035),FILE_PROGRESS:e(38144),POST_PROCESS:e(97520),PROGRESS:e(85595),START:e(55680)}}),14135:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(518),r=e(54899),a=new o({Extends:n,initialize:function(s,l,i,h,d){n.call(this,s,l,i,h,d),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});m.register("animation",function(t,s,l,i){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new a(this,t[h]));else this.addFile(new a(this,t,s,i,l));return this}),f.exports=a}),76272:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(19550),a=e(41212),t=e(518),s=e(26430),l=new o({Extends:s,initialize:function(h,d,c,u,p,g){var y,v;if(a(d)){var S=d;d=n(S,"key"),y=new r(h,{key:d,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),v=new t(h,{key:d,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","json"),xhrSettings:n(S,"atlasXhrSettings")})}else y=new r(h,d,c,p),v=new t(h,d,u,g);y.linkFile?s.call(this,h,"atlasjson",d,[y,v,y.linkFile]):s.call(this,h,"atlasjson",d,[y,v])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,h.data,d),h.addToCache(),this.complete=!0}}});m.register("aseprite",function(i,h,d,c,u){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,d,c,u),this.addFile(p.files);return this}),f.exports=l}),38734:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(19550),a=e(41212),t=e(518),s=e(26430),l=new o({Extends:s,initialize:function(h,d,c,u,p,g){var y,v;if(a(d)){var S=d;d=n(S,"key"),y=new r(h,{key:d,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),v=new t(h,{key:d,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","json"),xhrSettings:n(S,"atlasXhrSettings")})}else y=new r(h,d,c,p),v=new t(h,d,u,g);y.linkFile?s.call(this,h,"atlasjson",d,[y,v,y.linkFile]):s.call(this,h,"atlasjson",d,[y,v])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,h.data,d),this.complete=!0}}});m.register("atlas",function(i,h,d,c,u){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,d,c,u),this.addFile(p.files);return this}),f.exports=l}),74599:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(19550),a=e(41212),t=e(26430),s=e(57318),l=new o({Extends:t,initialize:function(h,d,c,u,p,g){var y,v;if(a(d)){var S=d;d=n(S,"key"),y=new r(h,{key:d,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),v=new s(h,{key:d,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","xml"),xhrSettings:n(S,"atlasXhrSettings")})}else y=new r(h,d,c,p),v=new s(h,d,u,g);y.linkFile?t.call(this,h,"atlasxml",d,[y,v,y.linkFile]):t.call(this,h,"atlasxml",d,[y,v])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(i.key,i.data,h.data,d),this.complete=!0}}});m.register("atlasXML",function(i,h,d,c,u){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,d,c,u),this.addFile(p.files);return this}),f.exports=l}),21097:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(89749),s=e(41212),l=new o({Extends:n,initialize:function(h,d,c,u,p){if(s(d)){var g=d;d=a(g,"key"),u=a(g,"xhrSettings"),p=a(g,"context",p)}var y={type:"audio",cache:h.cacheManager.audio,extension:c.type,responseType:"arraybuffer",key:d,url:c.url,xhrSettings:u,config:{context:p}};n.call(this,h,y)},onProcess:function(){this.state=m.FILE_PROCESSING;var i=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(h){i.data=h,i.onProcessComplete()},function(h){console.error("Error decoding audio: "+i.key+" - ",h?h.message:null),i.onProcessError()}),this.config.context=null}});l.create=function(i,h,d,c,u){var p=i.systems.game,g=p.config.audio,y=p.device.audio;s(h)&&(d=a(h,"url",[]),c=a(h,"config",{}));var v=l.getAudioURL(p,d);return v?y.webAudio&&!g.disableWebAudio?new l(i,h,v,u,p.sound.context):new t(i,h,v,c):(console.warn('No audio URLs for "%s" can play on this device',h),null)},l.getAudioURL=function(i,h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var c=a(h[d],"url",h[d]);if(c.indexOf("blob:")===0||c.indexOf("data:")===0)return{url:c,type:""};var u=c.match(/\.([a-zA-Z0-9]+)($|\?)/);if(u=a(h[d],"type",u?u[1]:"").toLowerCase(),i.device.audio[u])return{url:c,type:u}}return null},r.register("audio",function(i,h,d,c){var u=this.systems.game,p=u.config.audio,g=u.device.audio;if(p.noAudio||!g.webAudio&&!g.audioData)return this;var y;if(Array.isArray(i))for(var v=0;v<i.length;v++)y=l.create(this,i[v]),y&&this.addFile(y);else y=l.create(this,i,h,d,c),y&&this.addFile(y);return this}),f.exports=l}),89524:((f,x,e)=>{var o=e(21097),m=e(83419),n=e(74099),r=e(95540),a=e(41212),t=e(518),s=e(26430),l=new m({Extends:s,initialize:function(h,d,c,u,p,g,y){if(a(d)){var v=d;d=r(v,"key"),c=r(v,"jsonURL"),u=r(v,"audioURL"),p=r(v,"audioConfig"),g=r(v,"audioXhrSettings"),y=r(v,"jsonXhrSettings")}var S;if(!u)S=new t(h,d,c,y),s.call(this,h,"audiosprite",d,[S]),this.config.resourceLoad=!0,this.config.audioConfig=p,this.config.audioXhrSettings=g;else{var w=o.create(h,d,u,p,g);w&&(S=new t(h,d,c,y),s.call(this,h,"audiosprite",d,[w,S]),this.config.resourceLoad=!1)}},onFileComplete:function(i){var h=this.files.indexOf(i);if(h!==-1&&(this.pending--,this.config.resourceLoad&&i.type==="json"&&i.data.hasOwnProperty("resources"))){var d=i.data.resources,c=r(this.config,"audioConfig"),u=r(this.config,"audioXhrSettings"),p=o.create(this.loader,i.key,d,c,u);p&&(this.addToMultiFile(p),this.loader.addFile(p))}},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1];i.addToCache(),h.addToCache(),this.complete=!0}}});n.register("audioSprite",function(i,h,d,c,u,p){var g=this.systems.game,y=g.config.audio,v=g.device.audio;if(y&&y.noAudio||!v.webAudio&&!v.audioData)return this;var S;if(Array.isArray(i))for(var w=0;w<i.length;w++)S=new l(this,i[w]),S.files&&this.addFile(S.files);else S=new l(this,i,h,d,c,u,p),S.files&&this.addFile(S.files);return this})}),85722:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c,u){var p="bin";if(t(h)){var g=h;h=a(g,"key"),d=a(g,"url"),c=a(g,"xhrSettings"),p=a(g,"extension",p),u=a(g,"dataType",u)}var y={type:"binary",cache:i.cacheManager.binary,extension:p,responseType:"arraybuffer",key:h,url:d,xhrSettings:c,config:{dataType:u}};n.call(this,i,y)},onProcess:function(){this.state=m.FILE_PROCESSING;var l=this.config.dataType;this.data=l?new l(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});r.register("binary",function(l,i,h,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new s(this,l[c]));else this.addFile(new s(this,l,i,d,h));return this}),f.exports=s}),97025:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(19550),a=e(41212),t=e(26430),s=e(21859),l=e(57318),i=new o({Extends:t,initialize:function(d,c,u,p,g,y){var v,S;if(a(c)){var w=c;c=n(w,"key"),v=new r(d,{key:c,url:n(w,"textureURL"),extension:n(w,"textureExtension","png"),normalMap:n(w,"normalMap"),xhrSettings:n(w,"textureXhrSettings")}),S=new l(d,{key:c,url:n(w,"fontDataURL"),extension:n(w,"fontDataExtension","xml"),xhrSettings:n(w,"fontDataXhrSettings")})}else v=new r(d,c,u,g),S=new l(d,c,p,y);v.linkFile?t.call(this,d,"bitmapfont",c,[v,S,v.linkFile]):t.call(this,d,"bitmapfont",c,[v,S])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],d=this.files[1];h.addToCache();var c=h.cache.get(h.key),u=s(d.data,h.cache.getFrame(h.key),0,0,c);this.loader.cacheManager.bitmapFont.add(h.key,{data:u,texture:h.key,frame:null}),this.complete=!0}}});m.register("bitmapFont",function(h,d,c,u,p){var g;if(Array.isArray(h))for(var y=0;y<h.length;y++)g=new i(this,h[y]),this.addFile(g.files);else g=new i(this,h,d,c,u,p),this.addFile(g.files);return this}),f.exports=i}),16024:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c){var u="css";if(t(h)){var p=h;h=a(p,"key"),d=a(p,"url"),c=a(p,"xhrSettings"),u=a(p,"extension",u)}var g={type:"script",cache:!1,extension:u,responseType:"text",key:h,url:d,xhrSettings:c};n.call(this,i,g)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("css",function(l,i,h){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new s(this,l[d]));else this.addFile(new s(this,l,i,h));return this}),f.exports=s}),69559:((f,x,e)=>{var o=e(38734),m=e(85722),n=e(83419),r=e(74099),a=e(95540),t=e(19550),s=e(41212),l=e(518),i=e(31403),h=e(46975),d=e(59327),c=e(26430),u=e(82038),p=e(55222),g=new n({Extends:c,initialize:function(v,S,w,T){if(w.multiAtlasURL){var C=new l(v,{key:S,url:w.multiAtlasURL,xhrSettings:T,config:w});c.call(this,v,"texture",S,[C])}else{var M=w.textureURL.substr(w.textureURL.length-3);w.type||(w.type=M.toLowerCase()==="ktx"?"KTX":"PVR");var E=new m(v,{key:S,url:w.textureURL,extension:M,xhrSettings:T,config:w});if(w.atlasURL){var P=new l(v,{key:S,url:w.atlasURL,xhrSettings:T,config:w});c.call(this,v,"texture",S,[E,P])}else c.call(this,v,"texture",S,[E])}this.config=w},onFileComplete:function(y){var v=this.files.indexOf(y);if(v!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(y.type==="json"&&y.data.hasOwnProperty("textures")){var S=y.data.textures,w=this.config,T=this.loader,C=T.baseURL,M=T.path,E=T.prefix,P=a(w,"multiBaseURL",this.baseURL),A=a(w,"multiPath",this.path),D=a(w,"prefix",this.prefix),W=a(w,"textureXhrSettings");P&&T.setBaseURL(P),A&&T.setPath(A),D&&T.setPrefix(D);for(var V=0;V<S.length;V++){var K=S[V].image,X="CMA"+this.multiKeyIndex+"_"+K,R=new m(T,X,K,W);if(this.addToMultiFile(R),T.addFile(R),S[V].normalMap){var H=new m(T,X,S[V].normalMap,W);H.type="normalMap",R.setLink(H),this.addToMultiFile(H),T.addFile(H)}}T.setBaseURL(C),T.setPath(M),T.setPrefix(E)}}},addToCache:function(){function y(P){console.warn('Compressed Texture Invalid: "'+C.key+'". '+P)}if(this.isReadyToProcess()){var v=this.config;if(v.multiAtlasURL)this.addMultiToCache();else{var S=this.loader.systems.renderer,w=this.loader.textureManager,T,C=this.files[0],M=this.files[1];if(v.type==="PVR"?T=u(C.data):v.type==="KTX"&&(T=i(C.data),T||y("KTX file contains unsupported format.")),T&&!p(T)&&(y("Texture dimensions failed verification. Check the texture format specifications for "+v.format+" 0x"+T.internalFormat.toString(16)+"."),T=null),T&&!S.supportsCompressedTexture(v.format,T.internalFormat)&&(y("Texture format "+v.format+" with internal format "+T.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),T=null),T){T.format=S.getCompressedTextureName(v.format,T.internalFormat);var E=M&&M.data?M.data:null;w.addCompressedTexture(C.key,T,E)}}this.complete=!0}},addMultiToCache:function(){for(var y=this.config,v=this.files[0],S=[],w=[],T=[],C=this.loader.systems.renderer,M=this.loader.textureManager,E,P=1;P<this.files.length;P++){var A=this.files[P];if(A.type!=="normalMap")for(var D=A.key.indexOf("_"),W=A.key.substr(D+1),V=A.data,K=0;K<v.data.textures.length;K++){var X=v.data.textures[K];if(X.image===W){y.type==="PVR"?E=u(V):y.type==="KTX"&&(E=i(V)),E&&C.supportsCompressedTexture(y.format,E.internalFormat)&&(E.format=C.getCompressedTextureName(y.format,E.internalFormat),w.push(E),S.push(X),A.linkFile&&T.push(A.linkFile.data));break}}}T.length===0&&(T=void 0),M.addAtlasJSONArray(this.key,w,S,T),this.complete=!0}});r.register("texture",function(y,v,S){var w=this.systems.renderer,T=function(M,E,P,A){var D={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(s(E)){var W=E;E=a(W,"key"),P=a(W,"url"),A=a(W,"xhrSettings")}var V=!1;for(var K in P)if(w.supportsCompressedTexture(K)){var X=P[K];typeof X=="string"?D.textureURL=X:D=h(X,D),D.format=K.toUpperCase(),V=!0;break}if(!V)console.warn("No supported compressed texture format or IMG fallback",E);else if(D.format==="IMG"){var R,H;D.multiAtlasURL?(H=new d(M,E,D.multiAtlasURL,D.multiPath,D.multiBaseURL,A),R=H.files):D.atlasURL?(H=new o(M,E,D.textureURL,D.atlasURL,A),R=H.files):R=new t(M,E,D.textureURL,A),M.addFile(R)}else{var L=new g(M,E,D,A);M.addFile(L.files)}};if(Array.isArray(y))for(var C=0;C<y.length;C++)T(this,y[C]);else T(this,y,v,S);return this}),f.exports=g}),87674:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(98356),s=e(41212),l=new o({Extends:n,initialize:function(h,d,c,u,p,g){var y="ttf";if(s(d)){var v=d;d=a(v,"key"),c=a(v,"url"),u=a(v,"format","truetype"),p=a(v,"descriptors",null),g=a(v,"xhrSettings"),y=a(v,"extension",y)}else u===void 0&&(u="truetype");var S={type:"font",cache:!1,extension:y,responseType:"text",key:d,url:c,xhrSettings:g};n.call(this,h,S),this.data={format:u,descriptors:p},this.state=m.FILE_POPULATED},onProcess:function(){this.state=m.FILE_PROCESSING,this.src=t(this,this.loader.baseURL);var i,h=this.key,d="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?i=new FontFace(h,d,this.data.descriptors):i=new FontFace(h,d);var c=this;i.load().then(function(){document.fonts.add(i),document.body.classList.add("fonts-loaded"),c.onProcessComplete()}).catch(function(){console.warn("Font failed to load",d),c.onProcessComplete()})}});r.register("font",function(i,h,d,c,u){if(Array.isArray(i))for(var p=0;p<i.length;p++)this.addFile(new l(this,i[p]));else this.addFile(new l(this,i,h,d,c,u));return this}),f.exports=l}),47931:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=e(73894),l=new o({Extends:n,initialize:function(h,d,c,u,p){var g="glsl";if(t(d)){var y=d;d=a(y,"key"),c=a(y,"url"),u=a(y,"shaderType","fragment"),p=a(y,"xhrSettings"),g=a(y,"extension",g)}else u===void 0&&(u="fragment");var v={type:"glsl",cache:h.cacheManager.shader,extension:g,responseType:"text",key:d,url:c,config:{shaderType:u},xhrSettings:p};n.call(this,h,v)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i=this.data.split(`
`),h=this.extractBlock(i,0);if(h)for(;h;){var d=this.getShaderName(h.header),c=this.getShaderType(h.header),u=this.getShaderUniforms(h.header),p=h.shader;if(this.cache.has(d)){var g=this.cache.get(d);c==="fragment"?g.fragmentSrc=p:g.vertexSrc=p,g.uniforms||(g.uniforms=u)}else c==="fragment"?this.cache.add(d,new s(d,p,"",u)):this.cache.add(d,new s(d,"",p,u));h=this.extractBlock(i,h.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new s(this.key,this.data)):this.cache.add(this.key,new s(this.key,"",this.data))},getShaderName:function(i){for(var h=0;h<i.length;h++){var d=i[h].trim();if(d.substring(0,5)==="name:")return d.substring(5).trim()}return this.key},getShaderType:function(i){for(var h=0;h<i.length;h++){var d=i[h].trim();if(d.substring(0,5)==="type:")return d.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(i){for(var h={},d=0;d<i.length;d++){var c=i[d].trim();if(c.substring(0,8)==="uniform."){var u=c.indexOf(":");if(u){var p=c.substring(8,u);try{h[p]=JSON.parse(c.substring(u+1))}catch{console.warn("Invalid uniform JSON: "+p)}}}}return h},extractBlock:function(i,h){for(var d=-1,c=-1,u=-1,p=!1,g=!1,y=[],v=[],S=h;S<i.length;S++){var w=i[S].trim();if(w==="---")if(d===-1)d=S,p=!0;else if(p)c=S,p=!1,g=!0;else{g=!1;break}else p?y.push(w):g&&(v.push(w),u=S)}return!p&&c!==-1?{header:y,shader:v.join(`
`),offset:u}:null}});r.register("glsl",function(i,h,d,c){if(Array.isArray(i))for(var u=0;u<i.length;u++)this.addFile(new l(this,i[u]));else this.addFile(new l(this,i,h,d,c));return this}),f.exports=l}),89749:((f,x,e)=>{var o=e(83419),m=e(54899),n=e(41299),r=e(95540),a=e(98356),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c){if(t(h)){var u=h;h=r(u,"key"),c=r(u,"config",c)}var p={type:"audio",cache:i.cacheManager.audio,extension:d.type,key:h,url:d.url,config:c};n.call(this,i,p),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var l=0;l<this.data.length;l++){var i=this.data[l];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(l){var i=l.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(m.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var l=this.config&&this.config.instances||1;this.filesTotal=l,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<l;i++){var h=new Audio;h.dataset||(h.dataset={}),h.dataset.name=this.key+("0"+i).slice(-2),h.dataset.used="false",this.locked?h.dataset.locked="true":(h.dataset.locked="false",h.preload="auto",h.oncanplaythrough=this.onProgress.bind(this),h.onerror=this.onError.bind(this)),this.data.push(h)}for(i=0;i<this.data.length;i++)h=this.data[i],h.src=a(this,this.loader.baseURL),this.locked||h.load();this.locked&&setTimeout(this.onLoad.bind(this))}});f.exports=s}),88470:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c){var u="html";if(t(h)){var p=h;h=a(p,"key"),d=a(p,"url"),c=a(p,"xhrSettings"),u=a(p,"extension",u)}var g={type:"text",cache:i.cacheManager.html,extension:u,responseType:"text",key:h,url:d,xhrSettings:c};n.call(this,i,g)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",function(l,i,h){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new s(this,l[d]));else this.addFile(new s(this,l,i,h));return this}),f.exports=s}),14643:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c,u,p){c===void 0&&(c=512),u===void 0&&(u=512);var g="html";if(t(h)){var y=h;h=a(y,"key"),d=a(y,"url"),p=a(y,"xhrSettings"),g=a(y,"extension",g),c=a(y,"width",c),u=a(y,"height",u)}var v={type:"html",cache:i.textureManager,extension:g,responseType:"text",key:h,url:d,xhrSettings:p,config:{width:c,height:u}};n.call(this,i,v)},onProcess:function(){this.state=m.FILE_PROCESSING;var l=this.config.width,i=this.config.height,h=[];h.push('<svg width="'+l+'px" height="'+i+'px" viewBox="0 0 '+l+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),h.push('<foreignObject width="100%" height="100%">'),h.push('<body xmlns="http://www.w3.org/1999/xhtml">'),h.push(this.xhrLoader.responseText),h.push("</body>"),h.push("</foreignObject>"),h.push("</svg>");var d=[h.join(`
`)],c=this;try{var u=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{c.state=m.FILE_ERRORED,c.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(c.data),c.onProcessError()},n.createObjectURL(this.data,u,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("htmlTexture",function(l,i,h,d,c){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new s(this,l[u]));else this.addFile(new s(this,l,i,h,d,c));return this}),f.exports=s}),19550:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=e(98356),l=new o({Extends:n,initialize:function i(h,d,c,u,p){var g="png",y;if(t(d)){var v=d;d=a(v,"key"),c=a(v,"url"),y=a(v,"normalMap"),u=a(v,"xhrSettings"),g=a(v,"extension",g),p=a(v,"frameConfig")}Array.isArray(c)&&(y=c[1],c=c[0]);var S={type:"image",cache:h.textureManager,extension:g,responseType:"blob",key:d,url:c,xhrSettings:u,config:p};if(n.call(this,h,S),y){var w=new i(h,this.key,y,u,p);w.type="normalMap",this.setLink(w),h.addFile(w)}this.useImageElementLoad=h.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var i=this;this.data.onload=function(){n.revokeObjectURL(i.data),i.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(i.data),i.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var i=this.state;this.state=m.FILE_PROCESSING,i===m.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=m.FILE_LOADING,this.src=s(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var i=this;this.data.onload=function(){i.state=m.FILE_LOADED,i.loader.nextFile(i,!0)},this.data.onerror=function(){i.loader.nextFile(i,!1)},this.data.src=this.src},addToCache:function(){var i=this.linkFile;i?i.state>=m.FILE_COMPLETE&&(i.type==="spritesheet"?i.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,i.data,this.data):this.cache.addImage(this.key,this.data,i.data)):this.cache.addImage(this.key,this.data)}});r.register("image",function(i,h,d){if(Array.isArray(i))for(var c=0;c<i.length;c++)this.addFile(new l(this,i[c]));else this.addFile(new l(this,i,h,d));return this}),f.exports=l}),518:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(35154),s=e(41212),l=new o({Extends:n,initialize:function(h,d,c,u,p){var g="json";if(s(d)){var y=d;d=a(y,"key"),c=a(y,"url"),u=a(y,"xhrSettings"),g=a(y,"extension",g),p=a(y,"dataKey",p)}var v={type:"json",cache:h.cacheManager.json,extension:g,responseType:"text",key:d,url:c,xhrSettings:u,config:p};n.call(this,h,v),s(c)&&(p?this.data=t(c,p):this.data=c,this.state=m.FILE_POPULATED)},onProcess:function(){if(this.state!==m.FILE_POPULATED){this.state=m.FILE_PROCESSING;try{var i=JSON.parse(this.xhrLoader.responseText)}catch(d){throw this.onProcessError(),d}var h=this.config;typeof h=="string"?this.data=t(i,h,i):this.data=i}this.onProcessComplete()}});r.register("json",function(i,h,d,c){if(Array.isArray(i))for(var u=0;u<i.length;u++)this.addFile(new l(this,i[u]));else this.addFile(new l(this,i,h,c,d));return this}),f.exports=l}),59327:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(19550),a=e(41212),t=e(518),s=e(26430),l=new o({Extends:s,initialize:function(h,d,c,u,p,g,y){if(a(d)){var v=d;d=n(v,"key"),n(v,"url",!1)?c=n(v,"url"):c=n(v,"atlasURL"),g=n(v,"xhrSettings"),u=n(v,"path"),p=n(v,"baseURL"),y=n(v,"textureXhrSettings")}var S=new t(h,d,c,g);s.call(this,h,"multiatlas",d,[S]),this.config.path=u,this.config.baseURL=p,this.config.textureXhrSettings=y},onFileComplete:function(i){var h=this.files.indexOf(i);if(h!==-1&&(this.pending--,i.type==="json"&&i.data.hasOwnProperty("textures"))){var d=i.data.textures,c=this.config,u=this.loader,p=u.baseURL,g=u.path,y=u.prefix,v=n(c,"baseURL",this.baseURL),S=n(c,"path",this.path),w=n(c,"prefix",this.prefix),T=n(c,"textureXhrSettings");u.setBaseURL(v),u.setPath(S),u.setPrefix(w);for(var C=0;C<d.length;C++){var M=d[C].image,E="MA"+this.multiKeyIndex+"_"+M,P=new r(u,E,M,T);if(this.addToMultiFile(P),u.addFile(P),d[C].normalMap){var A=new r(u,E,d[C].normalMap,T);A.type="normalMap",P.setLink(A),this.addToMultiFile(A),u.addFile(A)}}u.setBaseURL(p),u.setPath(g),u.setPrefix(y)}},addToCache:function(){if(this.isReadyToProcess()){for(var i=this.files[0],h=[],d=[],c=[],u=1;u<this.files.length;u++){var p=this.files[u];if(p.type!=="normalMap")for(var g=p.key.indexOf("_"),y=p.key.substr(g+1),v=p.data,S=0;S<i.data.textures.length;S++){var w=i.data.textures[S];if(w.image===y){d.push(v),h.push(w),p.linkFile&&c.push(p.linkFile.data);break}}}c.length===0&&(c=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,d,h,c),this.complete=!0}}});m.register("multiatlas",function(i,h,d,c,u){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,d,c,u),this.addFile(p.files);return this}),f.exports=l}),99297:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(41212),a=e(26430),t=e(34328),s=new o({Extends:a,initialize:function(i,h,d,c){var u="js",p=[];if(r(h)){var g=h;h=n(g,"key"),d=n(g,"url"),c=n(g,"xhrSettings"),u=n(g,"extension",u)}Array.isArray(d)||(d=[d]);for(var y=0;y<d.length;y++){var v=new t(i,{key:h+"_"+y.toString(),url:d[y],extension:u,xhrSettings:c});v.onProcess=function(){this.onProcessComplete()},p.push(v)}a.call(this,i,"scripts",h,p)},addToCache:function(){if(this.isReadyToProcess()){for(var l=0;l<this.files.length;l++){var i=this.files[l];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});m.register("scripts",function(l,i,h){var d;if(Array.isArray(l))for(var c=0;c<l.length;c++)d=new s(this,l[c]),this.addFile(d.files);else d=new s(this,l,i,h),this.addFile(d.files);return this}),f.exports=s}),41846:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(41212),a=e(26430),t=e(85048),s=e(61485),l=e(78776),i=new o({Extends:a,initialize:function(d,c,u,p,g,y){var v,S,w=d.cacheManager.obj;if(r(c)){var T=c;c=n(T,"key"),v=new l(d,{key:c,type:"obj",cache:w,url:n(T,"url"),extension:n(T,"extension","obj"),xhrSettings:n(T,"xhrSettings"),config:{flipUV:n(T,"flipUV",g)}}),p=n(T,"matURL"),p&&(S=new l(d,{key:c,type:"mat",cache:w,url:p,extension:n(T,"matExtension","mat"),xhrSettings:n(T,"xhrSettings")}))}else v=new l(d,{key:c,url:u,type:"obj",cache:w,extension:"obj",xhrSettings:y,config:{flipUV:g}}),p&&(S=new l(d,{key:c,url:p,type:"mat",cache:w,extension:"mat",xhrSettings:y}));a.call(this,d,"obj",c,[v,S])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],d=this.files[1],c=t(h.data,h.config.flipUV);d&&(c.materials=s(d.data)),h.cache.add(h.key,c),this.complete=!0}}});m.register("obj",function(h,d,c,u,p){var g;if(Array.isArray(h))for(var y=0;y<h.length;y++)g=new i(this,h[y]),this.addFile(g.files);else g=new i(this,h,d,c,u,p),this.addFile(g.files);return this}),f.exports=i}),58610:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(74099),r=e(518),a=new o({Extends:r,initialize:function(s,l,i,h,d){r.call(this,s,l,i,h,d),this.type="packfile"},onProcess:function(){if(this.state!==m.FILE_POPULATED&&(this.state=m.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var t={};t[this.config]=this.data,this.data=t}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(t,s,l,i){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new a(this,t[h]));else this.addFile(new a(this,t,s,i,l));return this}),f.exports=a}),48988:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c,u,p){var g="js";if(t(h)){var y=h;h=a(y,"key"),d=a(y,"url"),p=a(y,"xhrSettings"),g=a(y,"extension",g),c=a(y,"start"),u=a(y,"mapping")}var v={type:"plugin",cache:!1,extension:g,responseType:"text",key:h,url:d,xhrSettings:p,config:{start:c,mapping:u}};n.call(this,i,v),typeof d=="function"&&(this.data=d,this.state=m.FILE_POPULATED)},onProcess:function(){var l=this.loader.systems.plugins,i=this.config,h=a(i,"start",!1),d=a(i,"mapping",null);if(this.state===m.FILE_POPULATED)l.install(this.key,this.data,h,d);else{this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var c=l.install(this.key,window[this.key],h,d);(h||d)&&(this.loader.systems[d]=c,this.loader.scene[d]=c)}this.onProcessComplete()}});r.register("plugin",function(l,i,h,d,c){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new s(this,l[u]));else this.addFile(new s(this,l,i,h,d,c));return this}),f.exports=s}),67397:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c,u){var p="svg";if(t(h)){var g=h;h=a(g,"key"),d=a(g,"url"),c=a(g,"svgConfig",{}),u=a(g,"xhrSettings"),p=a(g,"extension",p)}var y={type:"svg",cache:i.textureManager,extension:p,responseType:"text",key:h,url:d,xhrSettings:u,config:{width:a(c,"width"),height:a(c,"height"),scale:a(c,"scale")}};n.call(this,i,y)},onProcess:function(){this.state=m.FILE_PROCESSING;var l=this.xhrLoader.responseText,i=[l],h=this.config.width,d=this.config.height,c=this.config.scale;e:if(h&&d||c){var u=null,p=new DOMParser;u=p.parseFromString(l,"text/xml");var g=u.getElementsByTagName("svg")[0],y=g.hasAttribute("viewBox"),v=parseFloat(g.getAttribute("width")),S=parseFloat(g.getAttribute("height"));if(!y&&v&&S)g.setAttribute("viewBox","0  0 "+v+" "+S);else if(y&&!v&&!S){var w=g.getAttribute("viewBox").split(/\s+|,/);v=w[2],S=w[3]}if(c)if(v&&S)h=v*c,d=S*c;else break e;g.setAttribute("width",h.toString()+"px"),g.setAttribute("height",d.toString()+"px"),i=[new XMLSerializer().serializeToString(g)]}try{var T=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var C=this,M=!1;this.data.onload=function(){M||n.revokeObjectURL(C.data),C.onProcessComplete()},this.data.onerror=function(){M?C.onProcessError():(M=!0,n.revokeObjectURL(C.data),C.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},n.createObjectURL(this.data,T,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("svg",function(l,i,h,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new s(this,l[c]));else this.addFile(new s(this,l,i,h,d));return this}),f.exports=s}),88423:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c){var u="js";if(t(h)){var p=h;h=a(p,"key"),d=a(p,"url"),c=a(p,"xhrSettings"),u=a(p,"extension",u)}var g={type:"text",extension:u,responseType:"text",key:h,url:d,xhrSettings:c};n.call(this,i,g)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),i=eval;this.loader.sceneManager.add(this.key,i(l)),this.complete=!0}});r.register("sceneFile",function(l,i,h){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new s(this,l[d]));else this.addFile(new s(this,l,i,h));return this}),f.exports=s}),56812:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c,u,p){var g="js";if(t(h)){var y=h;h=a(y,"key"),d=a(y,"url"),p=a(y,"xhrSettings"),g=a(y,"extension",g),c=a(y,"systemKey"),u=a(y,"sceneKey")}var v={type:"scenePlugin",cache:!1,extension:g,responseType:"text",key:h,url:d,xhrSettings:p,config:{systemKey:c,sceneKey:u}};n.call(this,i,v),typeof d=="function"&&(this.data=d,this.state=m.FILE_POPULATED)},onProcess:function(){var l=this.loader.systems.plugins,i=this.config,h=this.key,d=a(i,"systemKey",h),c=a(i,"sceneKey",h);this.state===m.FILE_POPULATED?l.installScenePlugin(d,this.data,c,this.loader.scene,!0):(this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),l.installScenePlugin(d,window[this.key],c,this.loader.scene,!0)),this.onProcessComplete()}});r.register("scenePlugin",function(l,i,h,d,c){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new s(this,l[u]));else this.addFile(new s(this,l,i,h,d,c));return this}),f.exports=s}),34328:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c,u){var p="js";if(t(h)){var g=h;h=a(g,"key"),d=a(g,"url"),c=a(g,"type","script"),u=a(g,"xhrSettings"),p=a(g,"extension",p)}else c===void 0&&(c="script");var y={type:c,cache:!1,extension:p,responseType:"text",key:h,url:d,xhrSettings:u};n.call(this,i,y)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("script",function(l,i,h,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new s(this,l[c]));else this.addFile(new s(this,l,i,h,d));return this}),f.exports=s}),85035:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(74099),r=e(19550),a=new o({Extends:r,initialize:function(s,l,i,h,d){r.call(this,s,l,i,d,h),this.type="spritesheet"},addToCache:function(){var t=this.linkFile;t?t.state>=m.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,t.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,t.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});n.register("spritesheet",function(t,s,l,i){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new a(this,t[h]));else this.addFile(new a(this,t,s,l,i));return this}),f.exports=a}),78776:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=new o({Extends:n,initialize:function(i,h,d,c){var u="text",p="txt",g=i.cacheManager.text;if(t(h)){var y=h;h=a(y,"key"),d=a(y,"url"),c=a(y,"xhrSettings"),p=a(y,"extension",p),u=a(y,"type",u),g=a(y,"cache",g)}var v={type:u,cache:g,extension:p,responseType:"text",key:h,url:d,xhrSettings:c};n.call(this,i,v)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",function(l,i,h){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new s(this,l[d]));else this.addFile(new s(this,l,i,h));return this}),f.exports=s}),49477:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=e(80341),l=new o({Extends:n,initialize:function(h,d,c,u){var p="csv";if(t(d)){var g=d;d=a(g,"key"),c=a(g,"url"),u=a(g,"xhrSettings"),p=a(g,"extension",p)}var y={type:"tilemapCSV",cache:h.cacheManager.tilemap,extension:p,responseType:"text",key:d,url:c,xhrSettings:u};n.call(this,h,y),this.tilemapFormat=s.CSV},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,i)}});r.register("tilemapCSV",function(i,h,d){if(Array.isArray(i))for(var c=0;c<i.length;c++)this.addFile(new l(this,i[c]));else this.addFile(new l(this,i,h,d));return this}),f.exports=l}),40807:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(518),r=e(80341),a=new o({Extends:n,initialize:function(s,l,i,h){n.call(this,s,l,i,h),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var t={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,t)}});m.register("tilemapImpact",function(t,s,l){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,s,l));return this}),f.exports=a}),56775:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(518),r=e(80341),a=new o({Extends:n,initialize:function(s,l,i,h){n.call(this,s,l,i,h),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var t={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,t)}});m.register("tilemapTiledJSON",function(t,s,l){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,s,l));return this}),f.exports=a}),25771:((f,x,e)=>{var o=e(83419),m=e(74099),n=e(95540),r=e(19550),a=e(41212),t=e(26430),s=e(78776),l=new o({Extends:t,initialize:function(h,d,c,u,p,g){var y,v;if(a(d)){var S=d;d=n(S,"key"),y=new r(h,{key:d,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),v=new s(h,{key:d,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","txt"),xhrSettings:n(S,"atlasXhrSettings")})}else y=new r(h,d,c,p),v=new s(h,d,u,g);y.linkFile?t.call(this,h,"unityatlas",d,[y,v,y.linkFile]):t.call(this,h,"unityatlas",d,[y,v])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(i.key,i.data,h.data,d),this.complete=!0}}});m.register("unityAtlas",function(i,h,d,c,u){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,d,c,u),this.addFile(p.files);return this}),f.exports=l}),33720:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(98356),t=e(95540),s=e(41212),l=new o({Extends:n,initialize:function(h,d,c,u){if(u===void 0&&(u=!1),s(d)){var p=d;d=t(p,"key"),c=t(p,"url",[]),u=t(p,"noAudio",!1)}var g=h.systems.game.device.video.getVideoURL(c);g||console.warn("VideoFile: No supported format for "+d);var y={type:"video",cache:h.cacheManager.video,extension:g.type,key:d,url:g.url,config:{noAudio:u}};n.call(this,h,y)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=a(this,this.loader.baseURL),this.state=m.FILE_LOADED,this.loader.nextFile(this,!0)}});r.register("video",function(i,h,d){if(Array.isArray(i))for(var c=0;c<i.length;c++)this.addFile(new l(this,i[c]));else this.addFile(new l(this,i,h,d));return this}),f.exports=l}),57318:((f,x,e)=>{var o=e(83419),m=e(23906),n=e(41299),r=e(74099),a=e(95540),t=e(41212),s=e(56836),l=new o({Extends:n,initialize:function(h,d,c,u){var p="xml";if(t(d)){var g=d;d=a(g,"key"),c=a(g,"url"),u=a(g,"xhrSettings"),p=a(g,"extension",p)}var y={type:"xml",cache:h.cacheManager.xml,extension:p,responseType:"text",key:d,url:c,xhrSettings:u};n.call(this,h,y)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=s(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});r.register("xml",function(i,h,d){if(Array.isArray(i))for(var c=0;c<i.length;c++)this.addFile(new l(this,i[c]));else this.addFile(new l(this,i,h,d));return this}),f.exports=l}),64589:((f,x,e)=>{f.exports={AnimationJSONFile:e(14135),AsepriteFile:e(76272),AtlasJSONFile:e(38734),AtlasXMLFile:e(74599),AudioFile:e(21097),AudioSpriteFile:e(89524),BinaryFile:e(85722),BitmapFontFile:e(97025),CompressedTextureFile:e(69559),CSSFile:e(16024),FontFile:e(87674),GLSLFile:e(47931),HTML5AudioFile:e(89749),HTMLFile:e(88470),HTMLTextureFile:e(14643),ImageFile:e(19550),JSONFile:e(518),MultiAtlasFile:e(59327),MultiScriptFile:e(99297),OBJFile:e(41846),PackFile:e(58610),PluginFile:e(48988),SceneFile:e(88423),ScenePluginFile:e(56812),ScriptFile:e(34328),SpriteSheetFile:e(85035),SVGFile:e(67397),TextFile:e(78776),TilemapCSVFile:e(49477),TilemapImpactFile:e(40807),TilemapJSONFile:e(56775),UnityAtlasFile:e(25771),VideoFile:e(33720),XMLFile:e(57318)}}),57777:((f,x,e)=>{var o=e(23906),m=e(79291),n={Events:e(54899),FileTypes:e(64589),File:e(41299),FileTypesManager:e(74099),GetURL:e(98356),LoaderPlugin:e(74261),MergeXHRSettings:e(3374),MultiFile:e(26430),XHRLoader:e(84376),XHRSettings:e(92638)};n=m(!1,n,o),f.exports=n}),53307:(f=>{var x=function(e){for(var o=0,m=0;m<e.length;m++)o+=+e[m];return o/e.length};f.exports=x}),85710:((f,x,e)=>{var o=e(6411),m=function(n,r){return o(n)/o(r)/o(n-r)};f.exports=m}),30976:(f=>{var x=function(e,o){return Math.floor(Math.random()*(o-e+1)+e)};f.exports=x}),87842:(f=>{var x=function(e,o,m,n,r){var a=(n-o)*.5,t=(r-m)*.5,s=e*e,l=e*s;return(2*m-2*n+a+t)*l+(-3*m+3*n-2*a-t)*s+a*e+m};f.exports=x}),26302:(f=>{var x=function(e,o,m){o===void 0&&(o=0),m===void 0&&(m=10);var n=Math.pow(m,-o);return Math.ceil(e*n)/n};f.exports=x}),45319:(f=>{var x=function(e,o,m){return Math.max(o,Math.min(m,e))};f.exports=x}),39506:((f,x,e)=>{var o=e(36383),m=function(n){return n*o.DEG_TO_RAD};f.exports=m}),61241:(f=>{var x=function(e,o){return Math.abs(e-o)};f.exports=x}),38857:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(37867),r=e(29747),a=new n,t=new m({initialize:function s(l,i,h,d){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d=s.DefaultOrder),this._x=l,this._y=i,this._z=h,this._order=d,this.onChangeCallback=r},x:{get:function(){return this._x},set:function(s){this._x=s,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(s){this._y=s,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(s){this._z=s,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(s){this._order=s,this.onChangeCallback(this)}},set:function(s,l,i,h){return h===void 0&&(h=this._order),this._x=s,this._y=l,this._z=i,this._order=h,this.onChangeCallback(this),this},copy:function(s){return this.set(s.x,s.y,s.z,s.order)},setFromQuaternion:function(s,l,i){return l===void 0&&(l=this._order),i===void 0&&(i=!1),a.fromQuat(s),this.setFromRotationMatrix(a,l,i)},setFromRotationMatrix:function(s,l,i){l===void 0&&(l=this._order),i===void 0&&(i=!1);var h=s.val,d=h[0],c=h[4],u=h[8],p=h[1],g=h[5],y=h[9],v=h[2],S=h[6],w=h[10],T=0,C=0,M=0,E=.99999;switch(l){case"XYZ":{C=Math.asin(o(u,-1,1)),Math.abs(u)<E?(T=Math.atan2(-y,w),M=Math.atan2(-c,d)):T=Math.atan2(S,g);break}case"YXZ":{T=Math.asin(-o(y,-1,1)),Math.abs(y)<E?(C=Math.atan2(u,w),M=Math.atan2(p,g)):C=Math.atan2(-v,d);break}case"ZXY":{T=Math.asin(o(S,-1,1)),Math.abs(S)<E?(C=Math.atan2(-v,w),M=Math.atan2(-c,g)):M=Math.atan2(p,d);break}case"ZYX":{C=Math.asin(-o(v,-1,1)),Math.abs(v)<E?(T=Math.atan2(S,w),M=Math.atan2(p,d)):M=Math.atan2(-c,g);break}case"YZX":{M=Math.asin(o(p,-1,1)),Math.abs(p)<E?(T=Math.atan2(-y,g),C=Math.atan2(-v,d)):C=Math.atan2(u,w);break}case"XZY":{M=Math.asin(-o(c,-1,1)),Math.abs(c)<E?(T=Math.atan2(S,g),C=Math.atan2(u,d)):T=Math.atan2(-y,w);break}}return this._x=T,this._y=C,this._z=M,this._order=l,i&&this.onChangeCallback(this),this}});t.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],t.DefaultOrder="XYZ",f.exports=t}),6411:(f=>{var x=function(e){if(e===0)return 1;for(var o=e;--e;)o*=e;return o};f.exports=x}),99472:(f=>{var x=function(e,o){return Math.random()*(o-e)+e};f.exports=x}),77623:(f=>{var x=function(e,o,m){o===void 0&&(o=0),m===void 0&&(m=10);var n=Math.pow(m,-o);return Math.floor(e*n)/n};f.exports=x}),62945:((f,x,e)=>{var o=e(45319),m=function(n,r,a){return n=o(n,0,1),(a-r)*n+r};f.exports=m}),38265:(f=>{var x=function(e,o){return e/o/1e3};f.exports=x}),78702:(f=>{var x=function(e){return e==parseFloat(e)?!(e%2):void 0};f.exports=x}),94883:(f=>{var x=function(e){return e===parseFloat(e)?!(e%2):void 0};f.exports=x}),28915:(f=>{var x=function(e,o,m){return(o-e)*m+e};f.exports=x}),94908:(f=>{var x=function(e,o,m){return m===void 0&&(m=0),e.clone().lerp(o,m)};f.exports=x}),94434:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r){this.val=new Float32Array(9),r?this.copy(r):this.identity()},clone:function(){return new m(this)},set:function(n){return this.copy(n)},copy:function(n){var r=this.val,a=n.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this},fromMat4:function(n){var r=n.val,a=this.val;return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[4],a[4]=r[5],a[5]=r[6],a[6]=r[8],a[7]=r[9],a[8]=r[10],this},fromArray:function(n){var r=this.val;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,r=n[1],a=n[2],t=n[5];return n[1]=n[3],n[2]=n[6],n[3]=r,n[5]=n[7],n[6]=a,n[7]=t,this},invert:function(){var n=this.val,r=n[0],a=n[1],t=n[2],s=n[3],l=n[4],i=n[5],h=n[6],d=n[7],c=n[8],u=c*l-i*d,p=-c*s+i*h,g=d*s-l*h,y=r*u+a*p+t*g;return y?(y=1/y,n[0]=u*y,n[1]=(-c*a+t*d)*y,n[2]=(i*a-t*l)*y,n[3]=p*y,n[4]=(c*r-t*h)*y,n[5]=(-i*r+t*s)*y,n[6]=g*y,n[7]=(-d*r+a*h)*y,n[8]=(l*r-a*s)*y,this):null},adjoint:function(){var n=this.val,r=n[0],a=n[1],t=n[2],s=n[3],l=n[4],i=n[5],h=n[6],d=n[7],c=n[8];return n[0]=l*c-i*d,n[1]=t*d-a*c,n[2]=a*i-t*l,n[3]=i*h-s*c,n[4]=r*c-t*h,n[5]=t*s-r*i,n[6]=s*d-l*h,n[7]=a*h-r*d,n[8]=r*l-a*s,this},determinant:function(){var n=this.val,r=n[0],a=n[1],t=n[2],s=n[3],l=n[4],i=n[5],h=n[6],d=n[7],c=n[8];return r*(c*l-i*d)+a*(-c*s+i*h)+t*(d*s-l*h)},multiply:function(n){var r=this.val,a=r[0],t=r[1],s=r[2],l=r[3],i=r[4],h=r[5],d=r[6],c=r[7],u=r[8],p=n.val,g=p[0],y=p[1],v=p[2],S=p[3],w=p[4],T=p[5],C=p[6],M=p[7],E=p[8];return r[0]=g*a+y*l+v*d,r[1]=g*t+y*i+v*c,r[2]=g*s+y*h+v*u,r[3]=S*a+w*l+T*d,r[4]=S*t+w*i+T*c,r[5]=S*s+w*h+T*u,r[6]=C*a+M*l+E*d,r[7]=C*t+M*i+E*c,r[8]=C*s+M*h+E*u,this},translate:function(n){var r=this.val,a=n.x,t=n.y;return r[6]=a*r[0]+t*r[3]+r[6],r[7]=a*r[1]+t*r[4]+r[7],r[8]=a*r[2]+t*r[5]+r[8],this},rotate:function(n){var r=this.val,a=r[0],t=r[1],s=r[2],l=r[3],i=r[4],h=r[5],d=Math.sin(n),c=Math.cos(n);return r[0]=c*a+d*l,r[1]=c*t+d*i,r[2]=c*s+d*h,r[3]=c*l-d*a,r[4]=c*i-d*t,r[5]=c*h-d*s,this},scale:function(n){var r=this.val,a=n.x,t=n.y;return r[0]=a*r[0],r[1]=a*r[1],r[2]=a*r[2],r[3]=t*r[3],r[4]=t*r[4],r[5]=t*r[5],this},fromQuat:function(n){var r=n.x,a=n.y,t=n.z,s=n.w,l=r+r,i=a+a,h=t+t,d=r*l,c=r*i,u=r*h,p=a*i,g=a*h,y=t*h,v=s*l,S=s*i,w=s*h,T=this.val;return T[0]=1-(p+y),T[3]=c+w,T[6]=u-S,T[1]=c-w,T[4]=1-(d+y),T[7]=g+v,T[2]=u+S,T[5]=g-v,T[8]=1-(d+p),this},normalFromMat4:function(n){var r=n.val,a=this.val,t=r[0],s=r[1],l=r[2],i=r[3],h=r[4],d=r[5],c=r[6],u=r[7],p=r[8],g=r[9],y=r[10],v=r[11],S=r[12],w=r[13],T=r[14],C=r[15],M=t*d-s*h,E=t*c-l*h,P=t*u-i*h,A=s*c-l*d,D=s*u-i*d,W=l*u-i*c,V=p*w-g*S,K=p*T-y*S,X=p*C-v*S,R=g*T-y*w,H=g*C-v*w,L=y*C-v*T,N=M*L-E*H+P*R+A*X-D*K+W*V;return N?(N=1/N,a[0]=(d*L-c*H+u*R)*N,a[1]=(c*X-h*L-u*K)*N,a[2]=(h*H-d*X+u*V)*N,a[3]=(l*H-s*L-i*R)*N,a[4]=(t*L-l*X+i*K)*N,a[5]=(s*X-t*H-i*V)*N,a[6]=(w*W-T*D+C*A)*N,a[7]=(T*P-S*W-C*E)*N,a[8]=(S*D-w*P+C*M)*N,this):null}});f.exports=m}),37867:((f,x,e)=>{var o=e(83419),m=e(25836),n=1e-6,r=new o({initialize:function(d){this.val=new Float32Array(16),d?this.copy(d):this.identity()},clone:function(){return new r(this)},set:function(h){return this.copy(h)},setValues:function(h,d,c,u,p,g,y,v,S,w,T,C,M,E,P,A){var D=this.val;return D[0]=h,D[1]=d,D[2]=c,D[3]=u,D[4]=p,D[5]=g,D[6]=y,D[7]=v,D[8]=S,D[9]=w,D[10]=T,D[11]=C,D[12]=M,D[13]=E,D[14]=P,D[15]=A,this},copy:function(h){var d=h.val;return this.setValues(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])},fromArray:function(h){return this.setValues(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(h,d,c){var u=a.fromQuat(c),p=u.val,g=d.x,y=d.y,v=d.z;return this.setValues(p[0]*g,p[1]*g,p[2]*g,0,p[4]*y,p[5]*y,p[6]*y,0,p[8]*v,p[9]*v,p[10]*v,0,h.x,h.y,h.z,1)},xyz:function(h,d,c){this.identity();var u=this.val;return u[12]=h,u[13]=d,u[14]=c,this},scaling:function(h,d,c){this.zero();var u=this.val;return u[0]=h,u[5]=d,u[10]=c,u[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var h=this.val,d=h[1],c=h[2],u=h[3],p=h[6],g=h[7],y=h[11];return h[1]=h[4],h[2]=h[8],h[3]=h[12],h[4]=d,h[6]=h[9],h[7]=h[13],h[8]=c,h[9]=p,h[11]=h[14],h[12]=u,h[13]=g,h[14]=y,this},getInverse:function(h){return this.copy(h),this.invert()},invert:function(){var h=this.val,d=h[0],c=h[1],u=h[2],p=h[3],g=h[4],y=h[5],v=h[6],S=h[7],w=h[8],T=h[9],C=h[10],M=h[11],E=h[12],P=h[13],A=h[14],D=h[15],W=d*y-c*g,V=d*v-u*g,K=d*S-p*g,X=c*v-u*y,R=c*S-p*y,H=u*S-p*v,L=w*P-T*E,N=w*A-C*E,z=w*D-M*E,U=T*A-C*P,Y=T*D-M*P,$=C*D-M*A,Z=W*$-V*Y+K*U+X*z-R*N+H*L;return Z?(Z=1/Z,this.setValues((y*$-v*Y+S*U)*Z,(u*Y-c*$-p*U)*Z,(P*H-A*R+D*X)*Z,(C*R-T*H-M*X)*Z,(v*z-g*$-S*N)*Z,(d*$-u*z+p*N)*Z,(A*K-E*H-D*V)*Z,(w*H-C*K+M*V)*Z,(g*Y-y*z+S*L)*Z,(c*z-d*Y-p*L)*Z,(E*R-P*K+D*W)*Z,(T*K-w*R-M*W)*Z,(y*N-g*U-v*L)*Z,(d*U-c*N+u*L)*Z,(P*V-E*X-A*W)*Z,(w*X-T*V+C*W)*Z)):this},adjoint:function(){var h=this.val,d=h[0],c=h[1],u=h[2],p=h[3],g=h[4],y=h[5],v=h[6],S=h[7],w=h[8],T=h[9],C=h[10],M=h[11],E=h[12],P=h[13],A=h[14],D=h[15];return this.setValues(y*(C*D-M*A)-T*(v*D-S*A)+P*(v*M-S*C),-(c*(C*D-M*A)-T*(u*D-p*A)+P*(u*M-p*C)),c*(v*D-S*A)-y*(u*D-p*A)+P*(u*S-p*v),-(c*(v*M-S*C)-y*(u*M-p*C)+T*(u*S-p*v)),-(g*(C*D-M*A)-w*(v*D-S*A)+E*(v*M-S*C)),d*(C*D-M*A)-w*(u*D-p*A)+E*(u*M-p*C),-(d*(v*D-S*A)-g*(u*D-p*A)+E*(u*S-p*v)),d*(v*M-S*C)-g*(u*M-p*C)+w*(u*S-p*v),g*(T*D-M*P)-w*(y*D-S*P)+E*(y*M-S*T),-(d*(T*D-M*P)-w*(c*D-p*P)+E*(c*M-p*T)),d*(y*D-S*P)-g*(c*D-p*P)+E*(c*S-p*y),-(d*(y*M-S*T)-g*(c*M-p*T)+w*(c*S-p*y)),-(g*(T*A-C*P)-w*(y*A-v*P)+E*(y*C-v*T)),d*(T*A-C*P)-w*(c*A-u*P)+E*(c*C-u*T),-(d*(y*A-v*P)-g*(c*A-u*P)+E*(c*v-u*y)),d*(y*C-v*T)-g*(c*C-u*T)+w*(c*v-u*y))},determinant:function(){var h=this.val,d=h[0],c=h[1],u=h[2],p=h[3],g=h[4],y=h[5],v=h[6],S=h[7],w=h[8],T=h[9],C=h[10],M=h[11],E=h[12],P=h[13],A=h[14],D=h[15],W=d*y-c*g,V=d*v-u*g,K=d*S-p*g,X=c*v-u*y,R=c*S-p*y,H=u*S-p*v,L=w*P-T*E,N=w*A-C*E,z=w*D-M*E,U=T*A-C*P,Y=T*D-M*P,$=C*D-M*A;return W*$-V*Y+K*U+X*z-R*N+H*L},multiply:function(h){var d=this.val,c=d[0],u=d[1],p=d[2],g=d[3],y=d[4],v=d[5],S=d[6],w=d[7],T=d[8],C=d[9],M=d[10],E=d[11],P=d[12],A=d[13],D=d[14],W=d[15],V=h.val,K=V[0],X=V[1],R=V[2],H=V[3];return d[0]=K*c+X*y+R*T+H*P,d[1]=K*u+X*v+R*C+H*A,d[2]=K*p+X*S+R*M+H*D,d[3]=K*g+X*w+R*E+H*W,K=V[4],X=V[5],R=V[6],H=V[7],d[4]=K*c+X*y+R*T+H*P,d[5]=K*u+X*v+R*C+H*A,d[6]=K*p+X*S+R*M+H*D,d[7]=K*g+X*w+R*E+H*W,K=V[8],X=V[9],R=V[10],H=V[11],d[8]=K*c+X*y+R*T+H*P,d[9]=K*u+X*v+R*C+H*A,d[10]=K*p+X*S+R*M+H*D,d[11]=K*g+X*w+R*E+H*W,K=V[12],X=V[13],R=V[14],H=V[15],d[12]=K*c+X*y+R*T+H*P,d[13]=K*u+X*v+R*C+H*A,d[14]=K*p+X*S+R*M+H*D,d[15]=K*g+X*w+R*E+H*W,this},multiplyLocal:function(h){var d=this.val,c=h.val;return this.setValues(d[0]*c[0]+d[1]*c[4]+d[2]*c[8]+d[3]*c[12],d[0]*c[1]+d[1]*c[5]+d[2]*c[9]+d[3]*c[13],d[0]*c[2]+d[1]*c[6]+d[2]*c[10]+d[3]*c[14],d[0]*c[3]+d[1]*c[7]+d[2]*c[11]+d[3]*c[15],d[4]*c[0]+d[5]*c[4]+d[6]*c[8]+d[7]*c[12],d[4]*c[1]+d[5]*c[5]+d[6]*c[9]+d[7]*c[13],d[4]*c[2]+d[5]*c[6]+d[6]*c[10]+d[7]*c[14],d[4]*c[3]+d[5]*c[7]+d[6]*c[11]+d[7]*c[15],d[8]*c[0]+d[9]*c[4]+d[10]*c[8]+d[11]*c[12],d[8]*c[1]+d[9]*c[5]+d[10]*c[9]+d[11]*c[13],d[8]*c[2]+d[9]*c[6]+d[10]*c[10]+d[11]*c[14],d[8]*c[3]+d[9]*c[7]+d[10]*c[11]+d[11]*c[15],d[12]*c[0]+d[13]*c[4]+d[14]*c[8]+d[15]*c[12],d[12]*c[1]+d[13]*c[5]+d[14]*c[9]+d[15]*c[13],d[12]*c[2]+d[13]*c[6]+d[14]*c[10]+d[15]*c[14],d[12]*c[3]+d[13]*c[7]+d[14]*c[11]+d[15]*c[15])},premultiply:function(h){return this.multiplyMatrices(h,this)},multiplyMatrices:function(h,d){var c=h.val,u=d.val,p=c[0],g=c[4],y=c[8],v=c[12],S=c[1],w=c[5],T=c[9],C=c[13],M=c[2],E=c[6],P=c[10],A=c[14],D=c[3],W=c[7],V=c[11],K=c[15],X=u[0],R=u[4],H=u[8],L=u[12],N=u[1],z=u[5],U=u[9],Y=u[13],$=u[2],Z=u[6],Q=u[10],q=u[14],j=u[3],_=u[7],te=u[11],se=u[15];return this.setValues(p*X+g*N+y*$+v*j,S*X+w*N+T*$+C*j,M*X+E*N+P*$+A*j,D*X+W*N+V*$+K*j,p*R+g*z+y*Z+v*_,S*R+w*z+T*Z+C*_,M*R+E*z+P*Z+A*_,D*R+W*z+V*Z+K*_,p*H+g*U+y*Q+v*te,S*H+w*U+T*Q+C*te,M*H+E*U+P*Q+A*te,D*H+W*U+V*Q+K*te,p*L+g*Y+y*q+v*se,S*L+w*Y+T*q+C*se,M*L+E*Y+P*q+A*se,D*L+W*Y+V*q+K*se)},translate:function(h){return this.translateXYZ(h.x,h.y,h.z)},translateXYZ:function(h,d,c){var u=this.val;return u[12]=u[0]*h+u[4]*d+u[8]*c+u[12],u[13]=u[1]*h+u[5]*d+u[9]*c+u[13],u[14]=u[2]*h+u[6]*d+u[10]*c+u[14],u[15]=u[3]*h+u[7]*d+u[11]*c+u[15],this},scale:function(h){return this.scaleXYZ(h.x,h.y,h.z)},scaleXYZ:function(h,d,c){var u=this.val;return u[0]=u[0]*h,u[1]=u[1]*h,u[2]=u[2]*h,u[3]=u[3]*h,u[4]=u[4]*d,u[5]=u[5]*d,u[6]=u[6]*d,u[7]=u[7]*d,u[8]=u[8]*c,u[9]=u[9]*c,u[10]=u[10]*c,u[11]=u[11]*c,this},makeRotationAxis:function(h,d){var c=Math.cos(d),u=Math.sin(d),p=1-c,g=h.x,y=h.y,v=h.z,S=p*g,w=p*y;return this.setValues(S*g+c,S*y-u*v,S*v+u*y,0,S*y+u*v,w*y+c,w*v-u*g,0,S*v-u*y,w*v+u*g,p*v*v+c,0,0,0,0,1)},rotate:function(h,d){var c=this.val,u=d.x,p=d.y,g=d.z,y=Math.sqrt(u*u+p*p+g*g);if(Math.abs(y)<n)return this;y=1/y,u*=y,p*=y,g*=y;var v=Math.sin(h),S=Math.cos(h),w=1-S,T=c[0],C=c[1],M=c[2],E=c[3],P=c[4],A=c[5],D=c[6],W=c[7],V=c[8],K=c[9],X=c[10],R=c[11],H=c[12],L=c[13],N=c[14],z=c[15],U=u*u*w+S,Y=p*u*w+g*v,$=g*u*w-p*v,Z=u*p*w-g*v,Q=p*p*w+S,q=g*p*w+u*v,j=u*g*w+p*v,_=p*g*w-u*v,te=g*g*w+S;return this.setValues(T*U+P*Y+V*$,C*U+A*Y+K*$,M*U+D*Y+X*$,E*U+W*Y+R*$,T*Z+P*Q+V*q,C*Z+A*Q+K*q,M*Z+D*Q+X*q,E*Z+W*Q+R*q,T*j+P*_+V*te,C*j+A*_+K*te,M*j+D*_+X*te,E*j+W*_+R*te,H,L,N,z)},rotateX:function(h){var d=this.val,c=Math.sin(h),u=Math.cos(h),p=d[4],g=d[5],y=d[6],v=d[7],S=d[8],w=d[9],T=d[10],C=d[11];return d[4]=p*u+S*c,d[5]=g*u+w*c,d[6]=y*u+T*c,d[7]=v*u+C*c,d[8]=S*u-p*c,d[9]=w*u-g*c,d[10]=T*u-y*c,d[11]=C*u-v*c,this},rotateY:function(h){var d=this.val,c=Math.sin(h),u=Math.cos(h),p=d[0],g=d[1],y=d[2],v=d[3],S=d[8],w=d[9],T=d[10],C=d[11];return d[0]=p*u-S*c,d[1]=g*u-w*c,d[2]=y*u-T*c,d[3]=v*u-C*c,d[8]=p*c+S*u,d[9]=g*c+w*u,d[10]=y*c+T*u,d[11]=v*c+C*u,this},rotateZ:function(h){var d=this.val,c=Math.sin(h),u=Math.cos(h),p=d[0],g=d[1],y=d[2],v=d[3],S=d[4],w=d[5],T=d[6],C=d[7];return d[0]=p*u+S*c,d[1]=g*u+w*c,d[2]=y*u+T*c,d[3]=v*u+C*c,d[4]=S*u-p*c,d[5]=w*u-g*c,d[6]=T*u-y*c,d[7]=C*u-v*c,this},fromRotationTranslation:function(h,d){var c=h.x,u=h.y,p=h.z,g=h.w,y=c+c,v=u+u,S=p+p,w=c*y,T=c*v,C=c*S,M=u*v,E=u*S,P=p*S,A=g*y,D=g*v,W=g*S;return this.setValues(1-(M+P),T+W,C-D,0,T-W,1-(w+P),E+A,0,C+D,E-A,1-(w+M),0,d.x,d.y,d.z,1)},fromQuat:function(h){var d=h.x,c=h.y,u=h.z,p=h.w,g=d+d,y=c+c,v=u+u,S=d*g,w=d*y,T=d*v,C=c*y,M=c*v,E=u*v,P=p*g,A=p*y,D=p*v;return this.setValues(1-(C+E),w+D,T-A,0,w-D,1-(S+E),M+P,0,T+A,M-P,1-(S+C),0,0,0,0,1)},frustum:function(h,d,c,u,p,g){var y=1/(d-h),v=1/(u-c),S=1/(p-g);return this.setValues(p*2*y,0,0,0,0,p*2*v,0,0,(d+h)*y,(u+c)*v,(g+p)*S,-1,0,0,g*p*2*S,0)},perspective:function(h,d,c,u){var p=1/Math.tan(h/2),g=1/(c-u);return this.setValues(p/d,0,0,0,0,p,0,0,0,0,(u+c)*g,-1,0,0,2*u*c*g,0)},perspectiveLH:function(h,d,c,u){return this.setValues(2*c/h,0,0,0,0,2*c/d,0,0,0,0,-u/(c-u),1,0,0,c*u/(c-u),0)},ortho:function(h,d,c,u,p,g){var y=h-d,v=c-u,S=p-g;return y=y===0?y:1/y,v=v===0?v:1/v,S=S===0?S:1/S,this.setValues(-2*y,0,0,0,0,-2*v,0,0,0,0,2*S,0,(h+d)*y,(u+c)*v,(g+p)*S,1)},lookAtRH:function(h,d,c){var u=this.val;return i.subVectors(h,d),i.lengthSq()===0&&(i.z=1),i.normalize(),s.crossVectors(c,i),s.lengthSq()===0&&(Math.abs(c.z)===1?i.x+=1e-4:i.z+=1e-4,i.normalize(),s.crossVectors(c,i)),s.normalize(),l.crossVectors(i,s),u[0]=s.x,u[1]=s.y,u[2]=s.z,u[4]=l.x,u[5]=l.y,u[6]=l.z,u[8]=i.x,u[9]=i.y,u[10]=i.z,this},lookAt:function(h,d,c){var u=h.x,p=h.y,g=h.z,y=c.x,v=c.y,S=c.z,w=d.x,T=d.y,C=d.z;if(Math.abs(u-w)<n&&Math.abs(p-T)<n&&Math.abs(g-C)<n)return this.identity();var M=u-w,E=p-T,P=g-C,A=1/Math.sqrt(M*M+E*E+P*P);M*=A,E*=A,P*=A;var D=v*P-S*E,W=S*M-y*P,V=y*E-v*M;A=Math.sqrt(D*D+W*W+V*V),A?(A=1/A,D*=A,W*=A,V*=A):(D=0,W=0,V=0);var K=E*V-P*W,X=P*D-M*V,R=M*W-E*D;return A=Math.sqrt(K*K+X*X+R*R),A?(A=1/A,K*=A,X*=A,R*=A):(K=0,X=0,R=0),this.setValues(D,K,M,0,W,X,E,0,V,R,P,0,-(D*u+W*p+V*g),-(K*u+X*p+R*g),-(M*u+E*p+P*g),1)},yawPitchRoll:function(h,d,c){this.zero(),a.zero(),t.zero();var u=this.val,p=a.val,g=t.val,y=Math.sin(c),v=Math.cos(c);return u[10]=1,u[15]=1,u[0]=v,u[1]=y,u[4]=-y,u[5]=v,y=Math.sin(d),v=Math.cos(d),p[0]=1,p[15]=1,p[5]=v,p[10]=v,p[9]=-y,p[6]=y,y=Math.sin(h),v=Math.cos(h),g[5]=1,g[15]=1,g[0]=v,g[2]=-y,g[8]=y,g[10]=v,this.multiplyLocal(a),this.multiplyLocal(t),this},setWorldMatrix:function(h,d,c,u,p){return this.yawPitchRoll(h.y,h.x,h.z),a.scaling(c.x,c.y,c.z),t.xyz(d.x,d.y,d.z),this.multiplyLocal(a),this.multiplyLocal(t),u&&this.multiplyLocal(u),p&&this.multiplyLocal(p),this},multiplyToMat4:function(h,d){var c=this.val,u=h.val,p=c[0],g=c[1],y=c[2],v=c[3],S=c[4],w=c[5],T=c[6],C=c[7],M=c[8],E=c[9],P=c[10],A=c[11],D=c[12],W=c[13],V=c[14],K=c[15],X=u[0],R=u[1],H=u[2],L=u[3],N=u[4],z=u[5],U=u[6],Y=u[7],$=u[8],Z=u[9],Q=u[10],q=u[11],j=u[12],_=u[13],te=u[14],se=u[15];return d.setValues(X*p+R*S+H*M+L*D,R*g+R*w+H*E+L*W,H*y+R*T+H*P+L*V,L*v+R*C+H*A+L*K,N*p+z*S+U*M+Y*D,N*g+z*w+U*E+Y*W,N*y+z*T+U*P+Y*V,N*v+z*C+U*A+Y*K,$*p+Z*S+Q*M+q*D,$*g+Z*w+Q*E+q*W,$*y+Z*T+Q*P+q*V,$*v+Z*C+Q*A+q*K,j*p+_*S+te*M+se*D,j*g+_*w+te*E+se*W,j*y+_*T+te*P+se*V,j*v+_*C+te*A+se*K)},fromRotationXYTranslation:function(h,d,c){var u=d.x,p=d.y,g=d.z,y=Math.sin(h.x),v=Math.cos(h.x),S=Math.sin(h.y),w=Math.cos(h.y),T=u,C=p,M=g,E=-y,P=0-E*S,A=0-v*S,D=E*w,W=v*w;return c||(T=w*u+S*g,C=P*u+v*p+D*g,M=A*u+y*p+W*g),this.setValues(w,P,A,0,0,v,y,0,S,D,W,0,T,C,M,1)},getMaxScaleOnAxis:function(){var h=this.val,d=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],c=h[4]*h[4]+h[5]*h[5]+h[6]*h[6],u=h[8]*h[8]+h[9]*h[9]+h[10]*h[10];return Math.sqrt(Math.max(d,c,u))}}),a=new r,t=new r,s=new m,l=new m,i=new m;f.exports=r}),86883:(f=>{var x=function(e,o,m){return Math.min(e+o,m)};f.exports=x}),50040:(f=>{var x=function(e){var o=e.length;if(o===0)return 0;e.sort(function(n,r){return n-r});var m=Math.floor(o/2);return o%2===0?(e[m]+e[m-1])/2:e[m]};f.exports=x}),37204:(f=>{var x=function(e,o,m){return Math.max(e-o,m)};f.exports=x}),65201:(f=>{var x=function(e,o,m,n){m===void 0&&(m=o+1);var r=(e-o)/(m-o);return r>1?n!==void 0?(r=(n-e)/(n-m),r<0&&(r=0)):r=1:r<0&&(r=0),r};f.exports=x}),15746:((f,x,e)=>{var o=e(83419),m=e(94434),n=e(29747),r=e(25836),a=1e-6,t=new Int8Array([1,2,0]),s=new Float32Array([0,0,0]),l=new r(1,0,0),i=new r(0,1,0),h=new r,d=new m,c=new o({initialize:function(p,g,y,v){this.onChangeCallback=n,this.set(p,g,y,v)},x:{get:function(){return this._x},set:function(u){this._x=u,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(u){this._y=u,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(u){this._z=u,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(u){this._w=u,this.onChangeCallback(this)}},copy:function(u){return this.set(u)},set:function(u,p,g,y,v){return v===void 0&&(v=!0),typeof u=="object"?(this._x=u.x||0,this._y=u.y||0,this._z=u.z||0,this._w=u.w||0):(this._x=u||0,this._y=p||0,this._z=g||0,this._w=y||0),v&&this.onChangeCallback(this),this},add:function(u){return this._x+=u.x,this._y+=u.y,this._z+=u.z,this._w+=u.w,this.onChangeCallback(this),this},subtract:function(u){return this._x-=u.x,this._y-=u.y,this._z-=u.z,this._w-=u.w,this.onChangeCallback(this),this},scale:function(u){return this._x*=u,this._y*=u,this._z*=u,this._w*=u,this.onChangeCallback(this),this},length:function(){var u=this.x,p=this.y,g=this.z,y=this.w;return Math.sqrt(u*u+p*p+g*g+y*y)},lengthSq:function(){var u=this.x,p=this.y,g=this.z,y=this.w;return u*u+p*p+g*g+y*y},normalize:function(){var u=this.x,p=this.y,g=this.z,y=this.w,v=u*u+p*p+g*g+y*y;return v>0&&(v=1/Math.sqrt(v),this._x=u*v,this._y=p*v,this._z=g*v,this._w=y*v),this.onChangeCallback(this),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,p){p===void 0&&(p=0);var g=this.x,y=this.y,v=this.z,S=this.w;return this.set(g+p*(u.x-g),y+p*(u.y-y),v+p*(u.z-v),S+p*(u.w-S))},rotationTo:function(u,p){var g=u.x*p.x+u.y*p.y+u.z*p.z;return g<-.999999?(h.copy(l).cross(u).length()<a&&h.copy(i).cross(u),h.normalize(),this.setAxisAngle(h,Math.PI)):g>.999999?this.set(0,0,0,1):(h.copy(u).cross(p),this._x=h.x,this._y=h.y,this._z=h.z,this._w=1+g,this.normalize())},setAxes:function(u,p,g){var y=d.val;return y[0]=p.x,y[3]=p.y,y[6]=p.z,y[1]=g.x,y[4]=g.y,y[7]=g.z,y[2]=-u.x,y[5]=-u.y,y[8]=-u.z,this.fromMat3(d).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(u,p){p=p*.5;var g=Math.sin(p);return this.set(g*u.x,g*u.y,g*u.z,Math.cos(p))},multiply:function(u){var p=this.x,g=this.y,y=this.z,v=this.w,S=u.x,w=u.y,T=u.z,C=u.w;return this.set(p*C+v*S+g*T-y*w,g*C+v*w+y*S-p*T,y*C+v*T+p*w-g*S,v*C-p*S-g*w-y*T)},slerp:function(u,p){var g=this.x,y=this.y,v=this.z,S=this.w,w=u.x,T=u.y,C=u.z,M=u.w,E=g*w+y*T+v*C+S*M;E<0&&(E=-E,w=-w,T=-T,C=-C,M=-M);var P=1-p,A=p;if(1-E>a){var D=Math.acos(E),W=Math.sin(D);P=Math.sin((1-p)*D)/W,A=Math.sin(p*D)/W}return this.set(P*g+A*w,P*y+A*T,P*v+A*C,P*S+A*M)},invert:function(){var u=this.x,p=this.y,g=this.z,y=this.w,v=u*u+p*p+g*g+y*y,S=v?1/v:0;return this.set(-u*S,-p*S,-g*S,y*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(u){u*=.5;var p=this.x,g=this.y,y=this.z,v=this.w,S=Math.sin(u),w=Math.cos(u);return this.set(p*w+v*S,g*w+y*S,y*w-g*S,v*w-p*S)},rotateY:function(u){u*=.5;var p=this.x,g=this.y,y=this.z,v=this.w,S=Math.sin(u),w=Math.cos(u);return this.set(p*w-y*S,g*w+v*S,y*w+p*S,v*w-g*S)},rotateZ:function(u){u*=.5;var p=this.x,g=this.y,y=this.z,v=this.w,S=Math.sin(u),w=Math.cos(u);return this.set(p*w+g*S,g*w-p*S,y*w+v*S,v*w-y*S)},calculateW:function(){var u=this.x,p=this.y,g=this.z;return this.w=-Math.sqrt(1-u*u-p*p-g*g),this},setFromEuler:function(u,p){var g=u.x/2,y=u.y/2,v=u.z/2,S=Math.cos(g),w=Math.cos(y),T=Math.cos(v),C=Math.sin(g),M=Math.sin(y),E=Math.sin(v);switch(u.order){case"XYZ":{this.set(C*w*T+S*M*E,S*M*T-C*w*E,S*w*E+C*M*T,S*w*T-C*M*E,p);break}case"YXZ":{this.set(C*w*T+S*M*E,S*M*T-C*w*E,S*w*E-C*M*T,S*w*T+C*M*E,p);break}case"ZXY":{this.set(C*w*T-S*M*E,S*M*T+C*w*E,S*w*E+C*M*T,S*w*T-C*M*E,p);break}case"ZYX":{this.set(C*w*T-S*M*E,S*M*T+C*w*E,S*w*E-C*M*T,S*w*T+C*M*E,p);break}case"YZX":{this.set(C*w*T+S*M*E,S*M*T+C*w*E,S*w*E-C*M*T,S*w*T-C*M*E,p);break}case"XZY":{this.set(C*w*T-S*M*E,S*M*T-C*w*E,S*w*E+C*M*T,S*w*T+C*M*E,p);break}}return this},setFromRotationMatrix:function(u){var p=u.val,g=p[0],y=p[4],v=p[8],S=p[1],w=p[5],T=p[9],C=p[2],M=p[6],E=p[10],P=g+w+E,A;return P>0?(A=.5/Math.sqrt(P+1),this.set((M-T)*A,(v-C)*A,(S-y)*A,.25/A)):g>w&&g>E?(A=2*Math.sqrt(1+g-w-E),this.set(.25*A,(y+S)/A,(v+C)/A,(M-T)/A)):w>E?(A=2*Math.sqrt(1+w-g-E),this.set((y+S)/A,.25*A,(T+M)/A,(v-C)/A)):(A=2*Math.sqrt(1+E-g-w),this.set((v+C)/A,(T+M)/A,.25*A,(S-y)/A)),this},fromMat3:function(u){var p=u.val,g=p[0]+p[4]+p[8],y;if(g>0)y=Math.sqrt(g+1),this.w=.5*y,y=.5/y,this._x=(p[7]-p[5])*y,this._y=(p[2]-p[6])*y,this._z=(p[3]-p[1])*y;else{var v=0;p[4]>p[0]&&(v=1),p[8]>p[v*3+v]&&(v=2);var S=t[v],w=t[S];y=Math.sqrt(p[v*3+v]-p[S*3+S]-p[w*3+w]+1),s[v]=.5*y,y=.5/y,s[S]=(p[S*3+v]+p[v*3+S])*y,s[w]=(p[w*3+v]+p[v*3+w])*y,this._x=s[0],this._y=s[1],this._z=s[2],this._w=(p[w*3+S]-p[S*3+w])*y}return this.onChangeCallback(this),this}});f.exports=c}),43396:((f,x,e)=>{var o=e(36383),m=function(n){return n*o.RAD_TO_DEG};f.exports=m}),74362:(f=>{var x=function(e,o){o===void 0&&(o=1);var m=Math.random()*2*Math.PI;return e.x=Math.cos(m)*o,e.y=Math.sin(m)*o,e};f.exports=x}),60706:(f=>{var x=function(e,o){o===void 0&&(o=1);var m=Math.random()*2*Math.PI,n=Math.random()*2-1,r=Math.sqrt(1-n*n)*o;return e.x=Math.cos(m)*r,e.y=Math.sin(m)*r,e.z=n*o,e};f.exports=x}),67421:(f=>{var x=function(e,o){return o===void 0&&(o=1),e.x=(Math.random()*2-1)*o,e.y=(Math.random()*2-1)*o,e.z=(Math.random()*2-1)*o,e.w=(Math.random()*2-1)*o,e};f.exports=x}),36305:(f=>{var x=function(e,o){var m=e.x,n=e.y;return e.x=m*Math.cos(o)-n*Math.sin(o),e.y=m*Math.sin(o)+n*Math.cos(o),e};f.exports=x}),11520:(f=>{var x=function(e,o,m,n){var r=Math.cos(n),a=Math.sin(n),t=e.x-o,s=e.y-m;return e.x=t*r-s*a+o,e.y=t*a+s*r+m,e};f.exports=x}),1163:(f=>{var x=function(e,o,m,n,r){var a=n+Math.atan2(e.y-m,e.x-o);return e.x=o+r*Math.cos(a),e.y=m+r*Math.sin(a),e};f.exports=x}),70336:(f=>{var x=function(e,o,m,n,r){return e.x=o+r*Math.cos(n),e.y=m+r*Math.sin(n),e};f.exports=x}),72678:((f,x,e)=>{var o=e(25836),m=e(37867),n=e(15746),r=new m,a=new n,t=new o,s=function(l,i,h){return a.setAxisAngle(i,h),r.fromRotationTranslation(a,t.set(0,0,0)),l.transformMat4(r)};f.exports=s}),2284:(f=>{var x=function(e){return e>0?Math.ceil(e):Math.floor(e)};f.exports=x}),41013:(f=>{var x=function(e,o,m){o===void 0&&(o=0),m===void 0&&(m=10);var n=Math.pow(m,-o);return Math.round(e*n)/n};f.exports=x}),16922:(f=>{var x=function(e,o,m,n){o===void 0&&(o=1),m===void 0&&(m=1),n===void 0&&(n=1),n*=Math.PI/e;for(var r=[],a=[],t=0;t<e;t++)m-=o*n,o+=m*n,r[t]=m,a[t]=o;return{sin:a,cos:r,length:e}};f.exports=x}),7602:(f=>{var x=function(e,o,m){return e<=o?0:e>=m?1:(e=(e-o)/(m-o),e*e*(3-2*e))};f.exports=x}),54261:(f=>{var x=function(e,o,m){return e=Math.max(0,Math.min(1,(e-o)/(m-o))),e*e*e*(e*(e*6-15)+10)};f.exports=x}),44408:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t){t===void 0&&(t=new o);var s=0,l=0,i=r*a;return n>0&&n<=i&&(n>r-1?(l=Math.floor(n/r),s=n-l*r):s=n),t.set(s,l)};f.exports=m}),85955:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s,l,i,h){h===void 0&&(h=new o);var d=Math.sin(s),c=Math.cos(s),u=c*l,p=d*l,g=-d*i,y=c*i,v=1/(u*y+g*-p);return h.x=y*v*n+-g*v*r+(t*g-a*y)*v,h.y=u*v*r+-p*v*n+(-t*u+a*p)*v,h};f.exports=m}),26099:((f,x,e)=>{var o=e(83419),m=e(43855),n=new o({initialize:function(a,t){this.x=0,this.y=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0):(t===void 0&&(t=a),this.x=a||0,this.y=t||0)},clone:function(){return new n(this.x,this.y)},copy:function(r){return this.x=r.x||0,this.y=r.y||0,this},setFromObject:function(r){return this.x=r.x||0,this.y=r.y||0,this},set:function(r,a){return a===void 0&&(a=r),this.x=r,this.y=a,this},setTo:function(r,a){return this.set(r,a)},setToPolar:function(r,a){return a==null&&(a=1),this.x=Math.cos(r)*a,this.y=Math.sin(r)*a,this},equals:function(r){return this.x===r.x&&this.y===r.y},fuzzyEquals:function(r,a){return m(this.x,r.x,a)&&m(this.y,r.y,a)},angle:function(){var r=Math.atan2(this.y,this.x);return r<0&&(r+=2*Math.PI),r},setAngle:function(r){return this.setToPolar(r,this.length())},add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r):(this.x=0,this.y=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(r){var a=r.x-this.x,t=r.y-this.y;return Math.sqrt(a*a+t*t)},distanceSq:function(r){var a=r.x-this.x,t=r.y-this.y;return a*a+t*t},length:function(){var r=this.x,a=this.y;return Math.sqrt(r*r+a*a)},setLength:function(r){return this.normalize().scale(r)},lengthSq:function(){var r=this.x,a=this.y;return r*r+a*a},normalize:function(){var r=this.x,a=this.y,t=r*r+a*a;return t>0&&(t=1/Math.sqrt(t),this.x=r*t,this.y=a*t),this},normalizeRightHand:function(){var r=this.x;return this.x=this.y*-1,this.y=r,this},normalizeLeftHand:function(){var r=this.x;return this.x=this.y,this.y=r*-1,this},dot:function(r){return this.x*r.x+this.y*r.y},cross:function(r){return this.x*r.y-this.y*r.x},lerp:function(r,a){a===void 0&&(a=0);var t=this.x,s=this.y;return this.x=t+a*(r.x-t),this.y=s+a*(r.y-s),this},transformMat3:function(r){var a=this.x,t=this.y,s=r.val;return this.x=s[0]*a+s[3]*t+s[6],this.y=s[1]*a+s[4]*t+s[7],this},transformMat4:function(r){var a=this.x,t=this.y,s=r.val;return this.x=s[0]*a+s[4]*t+s[12],this.y=s[1]*a+s[5]*t+s[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(r){var a=this.length();return a&&a>r&&this.scale(r/a),this},reflect:function(r){return r=r.clone().normalize(),this.subtract(r.scale(2*this.dot(r)))},mirror:function(r){return this.reflect(r).negate()},rotate:function(r){var a=Math.cos(r),t=Math.sin(r);return this.set(a*this.x-t*this.y,t*this.x+a*this.y)},project:function(r){var a=this.dot(r)/r.dot(r);return this.copy(r).scale(a)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),f.exports=n}),25836:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t){this.x=0,this.y=0,this.z=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=a||0,this.z=t||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new m(this.x,this.y,this.z)},addVectors:function(n,r){return this.x=n.x+r.x,this.y=n.y+r.y,this.z=n.z+r.z,this},subVectors:function(n,r){return this.x=n.x-r.x,this.y=n.y-r.y,this.z=n.z-r.z,this},crossVectors:function(n,r){var a=n.x,t=n.y,s=n.z,l=r.x,i=r.y,h=r.z;return this.x=t*h-s*i,this.y=s*l-a*h,this.z=a*i-t*l,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,r,a){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=r||0,this.z=a||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,r){return this.fromArray(n.val,r*4)},fromArray:function(n,r){return r===void 0&&(r=0),this.x=n[r],this.y=n[r+1],this.z=n[r+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,r){return this.x+=n.x*r,this.y+=n.y*r,this.z+=n.z*r||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var r=n.x-this.x,a=n.y-this.y,t=n.z-this.z||0;return Math.sqrt(r*r+a*a+t*t)},distanceSq:function(n){var r=n.x-this.x,a=n.y-this.y,t=n.z-this.z||0;return r*r+a*a+t*t},length:function(){var n=this.x,r=this.y,a=this.z;return Math.sqrt(n*n+r*r+a*a)},lengthSq:function(){var n=this.x,r=this.y,a=this.z;return n*n+r*r+a*a},normalize:function(){var n=this.x,r=this.y,a=this.z,t=n*n+r*r+a*a;return t>0&&(t=1/Math.sqrt(t),this.x=n*t,this.y=r*t,this.z=a*t),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var r=this.x,a=this.y,t=this.z,s=n.x,l=n.y,i=n.z;return this.x=a*i-t*l,this.y=t*s-r*i,this.z=r*l-a*s,this},lerp:function(n,r){r===void 0&&(r=0);var a=this.x,t=this.y,s=this.z;return this.x=a+r*(n.x-a),this.y=t+r*(n.y-t),this.z=s+r*(n.z-s),this},applyMatrix3:function(n){var r=this.x,a=this.y,t=this.z,s=n.val;return this.x=s[0]*r+s[3]*a+s[6]*t,this.y=s[1]*r+s[4]*a+s[7]*t,this.z=s[2]*r+s[5]*a+s[8]*t,this},applyMatrix4:function(n){var r=this.x,a=this.y,t=this.z,s=n.val,l=1/(s[3]*r+s[7]*a+s[11]*t+s[15]);return this.x=(s[0]*r+s[4]*a+s[8]*t+s[12])*l,this.y=(s[1]*r+s[5]*a+s[9]*t+s[13])*l,this.z=(s[2]*r+s[6]*a+s[10]*t+s[14])*l,this},transformMat3:function(n){var r=this.x,a=this.y,t=this.z,s=n.val;return this.x=r*s[0]+a*s[3]+t*s[6],this.y=r*s[1]+a*s[4]+t*s[7],this.z=r*s[2]+a*s[5]+t*s[8],this},transformMat4:function(n){var r=this.x,a=this.y,t=this.z,s=n.val;return this.x=s[0]*r+s[4]*a+s[8]*t+s[12],this.y=s[1]*r+s[5]*a+s[9]*t+s[13],this.z=s[2]*r+s[6]*a+s[10]*t+s[14],this},transformCoordinates:function(n){var r=this.x,a=this.y,t=this.z,s=n.val,l=r*s[0]+a*s[4]+t*s[8]+s[12],i=r*s[1]+a*s[5]+t*s[9]+s[13],h=r*s[2]+a*s[6]+t*s[10]+s[14],d=r*s[3]+a*s[7]+t*s[11]+s[15];return this.x=l/d,this.y=i/d,this.z=h/d,this},transformQuat:function(n){var r=this.x,a=this.y,t=this.z,s=n.x,l=n.y,i=n.z,h=n.w,d=h*r+l*t-i*a,c=h*a+i*r-s*t,u=h*t+s*a-l*r,p=-s*r-l*a-i*t;return this.x=d*h+p*-s+c*-i-u*-l,this.y=c*h+p*-l+u*-s-d*-i,this.z=u*h+p*-i+d*-l-c*-s,this},project:function(n){var r=this.x,a=this.y,t=this.z,s=n.val,l=s[0],i=s[1],h=s[2],d=s[3],c=s[4],u=s[5],p=s[6],g=s[7],y=s[8],v=s[9],S=s[10],w=s[11],T=s[12],C=s[13],M=s[14],E=s[15],P=1/(r*d+a*g+t*w+E);return this.x=(r*l+a*c+t*y+T)*P,this.y=(r*i+a*u+t*v+C)*P,this.z=(r*h+a*p+t*S+M)*P,this},projectViewMatrix:function(n,r){return this.applyMatrix4(n).applyMatrix4(r)},unprojectViewMatrix:function(n,r){return this.applyMatrix4(n).applyMatrix4(r)},unproject:function(n,r){var a=n.x,t=n.y,s=n.z,l=n.w,i=this.x-a,h=l-this.y-1-t,d=this.z;return this.x=2*i/s-1,this.y=2*h/l-1,this.z=2*d-1,this.project(r)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});m.ZERO=new m,m.RIGHT=new m(1,0,0),m.LEFT=new m(-1,0,0),m.UP=new m(0,-1,0),m.DOWN=new m(0,1,0),m.FORWARD=new m(0,0,1),m.BACK=new m(0,0,-1),m.ONE=new m(1,1,1),f.exports=m}),61369:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t,s){this.x=0,this.y=0,this.z=0,this.w=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=a||0,this.z=t||0,this.w=s||0)},clone:function(){return new m(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,r,a,t){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=r||0,this.z=a||0,this.w=t||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,r=this.y,a=this.z,t=this.w;return Math.sqrt(n*n+r*r+a*a+t*t)},lengthSq:function(){var n=this.x,r=this.y,a=this.z,t=this.w;return n*n+r*r+a*a+t*t},normalize:function(){var n=this.x,r=this.y,a=this.z,t=this.w,s=n*n+r*r+a*a+t*t;return s>0&&(s=1/Math.sqrt(s),this.x=n*s,this.y=r*s,this.z=a*s,this.w=t*s),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,r){r===void 0&&(r=0);var a=this.x,t=this.y,s=this.z,l=this.w;return this.x=a+r*(n.x-a),this.y=t+r*(n.y-t),this.z=s+r*(n.z-s),this.w=l+r*(n.w-l),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var r=n.x-this.x,a=n.y-this.y,t=n.z-this.z||0,s=n.w-this.w||0;return Math.sqrt(r*r+a*a+t*t+s*s)},distanceSq:function(n){var r=n.x-this.x,a=n.y-this.y,t=n.z-this.z||0,s=n.w-this.w||0;return r*r+a*a+t*t+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var r=this.x,a=this.y,t=this.z,s=this.w,l=n.val;return this.x=l[0]*r+l[4]*a+l[8]*t+l[12]*s,this.y=l[1]*r+l[5]*a+l[9]*t+l[13]*s,this.z=l[2]*r+l[6]*a+l[10]*t+l[14]*s,this.w=l[3]*r+l[7]*a+l[11]*t+l[15]*s,this},transformQuat:function(n){var r=this.x,a=this.y,t=this.z,s=n.x,l=n.y,i=n.z,h=n.w,d=h*r+l*t-i*a,c=h*a+i*r-s*t,u=h*t+s*a-l*r,p=-s*r-l*a-i*t;return this.x=d*h+p*-s+c*-i-u*-l,this.y=c*h+p*-l+u*-s-d*-i,this.z=u*h+p*-i+d*-l-c*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});m.prototype.sub=m.prototype.subtract,m.prototype.mul=m.prototype.multiply,m.prototype.div=m.prototype.divide,m.prototype.dist=m.prototype.distance,m.prototype.distSq=m.prototype.distanceSq,m.prototype.len=m.prototype.length,m.prototype.lenSq=m.prototype.lengthSq,f.exports=m}),60417:(f=>{var x=function(e,o,m){return Math.abs(e-o)<=m};f.exports=x}),15994:(f=>{var x=function(e,o,m){var n=m-o;return o+((e-o)%n+n)%n};f.exports=x}),31040:(f=>{var x=function(e,o,m,n){return Math.atan2(n-o,m-e)};f.exports=x}),55495:(f=>{var x=function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)};f.exports=x}),128:(f=>{var x=function(e,o){return Math.atan2(o.x-e.x,o.y-e.y)};f.exports=x}),41273:(f=>{var x=function(e,o,m,n){return Math.atan2(m-e,n-o)};f.exports=x}),1432:((f,x,e)=>{var o=e(36383),m=function(n){return n>Math.PI&&(n-=o.PI2),Math.abs(((n+o.TAU)%o.PI2-o.PI2)%o.PI2)};f.exports=m}),49127:((f,x,e)=>{var o=e(12407),m=function(n,r){return o(r-n)};f.exports=m}),52285:((f,x,e)=>{var o=e(12407),m=2*Math.PI,n=function(r,a){var t=o(a-r);return t>0&&(t-=m),t};f.exports=n}),67317:((f,x,e)=>{var o=e(86554),m=function(n,r){return o(r-n)};f.exports=m}),12407:(f=>{var x=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};f.exports=x}),53993:((f,x,e)=>{var o=e(99472),m=function(){return o(-Math.PI,Math.PI)};f.exports=m}),86564:((f,x,e)=>{var o=e(99472),m=function(){return o(-180,180)};f.exports=m}),90154:((f,x,e)=>{var o=e(12407),m=function(n){return o(n+Math.PI)};f.exports=m}),48736:((f,x,e)=>{var o=e(36383),m=function(n,r,a){return a===void 0&&(a=.05),n===r||(Math.abs(r-n)<=a||Math.abs(r-n)>=o.PI2-a?n=r:(Math.abs(r-n)>Math.PI&&(r<n?r+=o.PI2:r-=o.PI2),r>n?n+=a:r<n&&(n-=a))),n};f.exports=m}),61430:(f=>{var x=function(e,o){var m=o-e;if(m===0)return 0;var n=Math.floor((m- -180)/360);return m-n*360};f.exports=x}),86554:((f,x,e)=>{var o=e(15994),m=function(n){return o(n,-Math.PI,Math.PI)};f.exports=m}),30954:((f,x,e)=>{var o=e(15994),m=function(n){return o(n,-180,180)};f.exports=m}),25588:((f,x,e)=>{f.exports={Between:e(31040),BetweenPoints:e(55495),BetweenPointsY:e(128),BetweenY:e(41273),CounterClockwise:e(1432),GetClockwiseDistance:e(49127),GetCounterClockwiseDistance:e(52285),GetShortestDistance:e(67317),Normalize:e(12407),Random:e(53993),RandomDegrees:e(86564),Reverse:e(90154),RotateTo:e(48736),ShortestBetween:e(61430),Wrap:e(86554),WrapDegrees:e(30954)}}),36383:(f=>{var x={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};f.exports=x}),20339:(f=>{var x=function(e,o,m,n){var r=e-m,a=o-n;return Math.sqrt(r*r+a*a)};f.exports=x}),52816:(f=>{var x=function(e,o){var m=e.x-o.x,n=e.y-o.y;return Math.sqrt(m*m+n*n)};f.exports=x}),64559:(f=>{var x=function(e,o){var m=e.x-o.x,n=e.y-o.y;return m*m+n*n};f.exports=x}),82340:(f=>{var x=function(e,o,m,n){return Math.max(Math.abs(e-m),Math.abs(o-n))};f.exports=x}),14390:(f=>{var x=function(e,o,m,n,r){return r===void 0&&(r=2),Math.sqrt(Math.pow(m-e,r)+Math.pow(n-o,r))};f.exports=x}),2243:(f=>{var x=function(e,o,m,n){return Math.abs(e-m)+Math.abs(o-n)};f.exports=x}),89774:(f=>{var x=function(e,o,m,n){var r=e-m,a=o-n;return r*r+a*a};f.exports=x}),50994:((f,x,e)=>{f.exports={Between:e(20339),BetweenPoints:e(52816),BetweenPointsSquared:e(64559),Chebyshev:e(82340),Power:e(14390),Snake:e(2243),Squared:e(89774)}}),62640:((f,x,e)=>{var o=e(54178),m=e(41521),n=e(79980),r=e(85433),a=e(99140),t=e(48857),s=e(81596),l=e(59133),i=e(98516),h=e(35248),d=e(82500),c=e(49752);f.exports={Power0:s,Power1:l.Out,Power2:r.Out,Power3:i.Out,Power4:h.Out,Linear:s,Quad:l.Out,Cubic:r.Out,Quart:i.Out,Quint:h.Out,Sine:d.Out,Expo:t.Out,Circ:n.Out,Elastic:a.Out,Back:o.Out,Bounce:m.Out,Stepped:c,"Quad.easeIn":l.In,"Cubic.easeIn":r.In,"Quart.easeIn":i.In,"Quint.easeIn":h.In,"Sine.easeIn":d.In,"Expo.easeIn":t.In,"Circ.easeIn":n.In,"Elastic.easeIn":a.In,"Back.easeIn":o.In,"Bounce.easeIn":m.In,"Quad.easeOut":l.Out,"Cubic.easeOut":r.Out,"Quart.easeOut":i.Out,"Quint.easeOut":h.Out,"Sine.easeOut":d.Out,"Expo.easeOut":t.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":a.Out,"Back.easeOut":o.Out,"Bounce.easeOut":m.Out,"Quad.easeInOut":l.InOut,"Cubic.easeInOut":r.InOut,"Quart.easeInOut":i.InOut,"Quint.easeInOut":h.InOut,"Sine.easeInOut":d.InOut,"Expo.easeInOut":t.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":o.InOut,"Bounce.easeInOut":m.InOut}}),1639:(f=>{var x=function(e,o){return o===void 0&&(o=1.70158),e*e*((o+1)*e-o)};f.exports=x}),50099:(f=>{var x=function(e,o){o===void 0&&(o=1.70158);var m=o*1.525;return(e*=2)<1?.5*(e*e*((m+1)*e-m)):.5*((e-=2)*e*((m+1)*e+m)+2)};f.exports=x}),41286:(f=>{var x=function(e,o){return o===void 0&&(o=1.70158),--e*e*((o+1)*e+o)+1};f.exports=x}),54178:((f,x,e)=>{f.exports={In:e(1639),Out:e(41286),InOut:e(50099)}}),59590:(f=>{var x=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};f.exports=x}),41788:(f=>{var x=function(e){var o=!1;return e<.5?(e=1-e*2,o=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,o?(1-e)*.5:e*.5+.5};f.exports=x}),69905:(f=>{var x=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};f.exports=x}),41521:((f,x,e)=>{f.exports={In:e(59590),Out:e(69905),InOut:e(41788)}}),91861:(f=>{var x=function(e){return 1-Math.sqrt(1-e*e)};f.exports=x}),4177:(f=>{var x=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};f.exports=x}),57512:(f=>{var x=function(e){return Math.sqrt(1- --e*e)};f.exports=x}),79980:((f,x,e)=>{f.exports={In:e(91861),Out:e(57512),InOut:e(4177)}}),51150:(f=>{var x=function(e){return e*e*e};f.exports=x}),82820:(f=>{var x=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};f.exports=x}),35033:(f=>{var x=function(e){return--e*e*e+1};f.exports=x}),85433:((f,x,e)=>{f.exports={In:e(51150),Out:e(35033),InOut:e(82820)}}),69965:(f=>{var x=function(e,o,m){if(o===void 0&&(o=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var n=m/4;return o<1?o=1:n=m*Math.asin(1/o)/(2*Math.PI),-(o*Math.pow(2,10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/m))};f.exports=x}),50665:(f=>{var x=function(e,o,m){if(o===void 0&&(o=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var n=m/4;return o<1?o=1:n=m*Math.asin(1/o)/(2*Math.PI),(e*=2)<1?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/m)):o*Math.pow(2,-10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/m)*.5+1};f.exports=x}),7744:(f=>{var x=function(e,o,m){if(o===void 0&&(o=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var n=m/4;return o<1?o=1:n=m*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*e)*Math.sin((e-n)*(2*Math.PI)/m)+1};f.exports=x}),99140:((f,x,e)=>{f.exports={In:e(69965),Out:e(7744),InOut:e(50665)}}),24590:(f=>{var x=function(e){return Math.pow(2,10*(e-1))-.001};f.exports=x}),87844:(f=>{var x=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};f.exports=x}),89433:(f=>{var x=function(e){return 1-Math.pow(2,-10*e)};f.exports=x}),48857:((f,x,e)=>{f.exports={In:e(24590),Out:e(89433),InOut:e(87844)}}),48820:((f,x,e)=>{f.exports={Back:e(54178),Bounce:e(41521),Circular:e(79980),Cubic:e(85433),Elastic:e(99140),Expo:e(48857),Linear:e(81596),Quadratic:e(59133),Quartic:e(98516),Quintic:e(35248),Sine:e(82500),Stepped:e(49752)}}),7147:(f=>{var x=function(e){return e};f.exports=x}),81596:((f,x,e)=>{f.exports=e(7147)}),34826:(f=>{var x=function(e){return e*e};f.exports=x}),20544:(f=>{var x=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};f.exports=x}),92029:(f=>{var x=function(e){return e*(2-e)};f.exports=x}),59133:((f,x,e)=>{f.exports={In:e(34826),Out:e(92029),InOut:e(20544)}}),64413:(f=>{var x=function(e){return e*e*e*e};f.exports=x}),78137:(f=>{var x=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};f.exports=x}),45840:(f=>{var x=function(e){return 1- --e*e*e*e};f.exports=x}),98516:((f,x,e)=>{f.exports={In:e(64413),Out:e(45840),InOut:e(78137)}}),87745:(f=>{var x=function(e){return e*e*e*e*e};f.exports=x}),16509:(f=>{var x=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};f.exports=x}),17868:(f=>{var x=function(e){return--e*e*e*e*e+1};f.exports=x}),35248:((f,x,e)=>{f.exports={In:e(87745),Out:e(17868),InOut:e(16509)}}),80461:(f=>{var x=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};f.exports=x}),34025:(f=>{var x=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};f.exports=x}),52768:(f=>{var x=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};f.exports=x}),82500:((f,x,e)=>{f.exports={In:e(80461),Out:e(52768),InOut:e(34025)}}),72251:(f=>{var x=function(e,o){return o===void 0&&(o=1),e<=0?0:e>=1?1:((o*e|0)+1)*(1/o)};f.exports=x}),49752:((f,x,e)=>{f.exports=e(72251)}),75698:(f=>{var x=function(e,o){return o===void 0&&(o=1e-4),Math.ceil(e-o)};f.exports=x}),43855:(f=>{var x=function(e,o,m){return m===void 0&&(m=1e-4),Math.abs(e-o)<m};f.exports=x}),25777:(f=>{var x=function(e,o){return o===void 0&&(o=1e-4),Math.floor(e+o)};f.exports=x}),5470:(f=>{var x=function(e,o,m){return m===void 0&&(m=1e-4),e>o-m};f.exports=x}),94977:(f=>{var x=function(e,o,m){return m===void 0&&(m=1e-4),e<o+m};f.exports=x}),48379:((f,x,e)=>{f.exports={Ceil:e(75698),Equal:e(43855),Floor:e(25777),GreaterThan:e(5470),LessThan:e(94977)}}),75508:((f,x,e)=>{var o=e(36383),m=e(79291),n={Angle:e(25588),Distance:e(50994),Easing:e(48820),Fuzzy:e(48379),Interpolation:e(38289),Pow2:e(49001),Snap:e(73697),RandomDataGenerator:e(28453),Average:e(53307),Bernstein:e(85710),Between:e(30976),CatmullRom:e(87842),CeilTo:e(26302),Clamp:e(45319),DegToRad:e(39506),Difference:e(61241),Euler:e(38857),Factorial:e(6411),FloatBetween:e(99472),FloorTo:e(77623),FromPercent:e(62945),GetSpeed:e(38265),IsEven:e(78702),IsEvenStrict:e(94883),Linear:e(28915),LinearXY:e(94908),MaxAdd:e(86883),Median:e(50040),MinSub:e(37204),Percent:e(65201),RadToDeg:e(43396),RandomXY:e(74362),RandomXYZ:e(60706),RandomXYZW:e(67421),Rotate:e(36305),RotateAround:e(11520),RotateAroundDistance:e(1163),RotateTo:e(70336),RoundAwayFromZero:e(2284),RoundTo:e(41013),SinCosTableGenerator:e(16922),SmootherStep:e(54261),SmoothStep:e(7602),ToXY:e(44408),TransformXY:e(85955),Within:e(60417),Wrap:e(15994),Vector2:e(26099),Vector3:e(25836),Vector4:e(61369),Matrix3:e(94434),Matrix4:e(37867),Quaternion:e(15746),RotateVec3:e(72678)};n=m(!1,n,o),f.exports=n}),89318:((f,x,e)=>{var o=e(85710),m=function(n,r){for(var a=0,t=n.length-1,s=0;s<=t;s++)a+=Math.pow(1-r,t-s)*Math.pow(r,s)*n[s]*o(t,s);return a};f.exports=m}),77259:((f,x,e)=>{var o=e(87842),m=function(n,r){var a=n.length-1,t=a*r,s=Math.floor(t);return n[0]===n[a]?(r<0&&(s=Math.floor(t=a*(1+r))),o(t-s,n[(s-1+a)%a],n[s],n[(s+1)%a],n[(s+2)%a])):r<0?n[0]-(o(-t,n[0],n[0],n[1],n[1])-n[0]):r>1?n[a]-(o(t-a,n[a],n[a],n[a-1],n[a-1])-n[a]):o(t-s,n[s?s-1:0],n[s],n[a<s+1?a:s+1],n[a<s+2?a:s+2])};f.exports=m}),36316:(f=>{function x(r,a){var t=1-r;return t*t*t*a}function e(r,a){var t=1-r;return 3*t*t*r*a}function o(r,a){return 3*(1-r)*r*r*a}function m(r,a){return r*r*r*a}var n=function(r,a,t,s,l){return x(r,a)+e(r,t)+o(r,s)+m(r,l)};f.exports=n}),28392:((f,x,e)=>{var o=e(28915),m=function(n,r){var a=n.length-1,t=a*r,s=Math.floor(t);return r<0?o(n[0],n[1],t):r>1?o(n[a],n[a-1],a-t):o(n[s],n[s+1>a?a:s+1],t-s)};f.exports=m}),32112:(f=>{function x(n,r){var a=1-n;return a*a*r}function e(n,r){return 2*(1-n)*n*r}function o(n,r){return n*n*r}var m=function(n,r,a,t){return x(n,r)+e(n,a)+o(n,t)};f.exports=m}),47235:((f,x,e)=>{var o=e(7602),m=function(n,r,a){return r+(a-r)*o(n,0,1)};f.exports=m}),50178:((f,x,e)=>{var o=e(54261),m=function(n,r,a){return r+(a-r)*o(n,0,1)};f.exports=m}),38289:((f,x,e)=>{f.exports={Bezier:e(89318),CatmullRom:e(77259),CubicBezier:e(36316),Linear:e(28392),QuadraticBezier:e(32112),SmoothStep:e(47235),SmootherStep:e(50178)}}),98439:(f=>{var x=function(e){var o=Math.log(e)/.6931471805599453;return 1<<Math.ceil(o)};f.exports=x}),50030:(f=>{var x=function(e,o){return e>0&&(e&e-1)===0&&o>0&&(o&o-1)===0};f.exports=x}),81230:(f=>{var x=function(e){return e>0&&(e&e-1)===0};f.exports=x}),49001:((f,x,e)=>{f.exports={GetNext:e(98439),IsSize:e(50030),IsValue:e(81230)}}),28453:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r){r===void 0&&(r=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],r&&this.init(r)},rnd:function(){var n=2091639*this.s0+this.c*23283064365386963e-26;return this.c=n|0,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var r,a=this.n;n=n.toString();for(var t=0;t<n.length;t++)a+=n.charCodeAt(t),r=.02519603282416938*a,a=r>>>0,r-=a,r*=a,a=r>>>0,r-=a,a+=r*4294967296;return this.n=a,(a>>>0)*23283064365386963e-26},init:function(n){typeof n=="string"?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!n)for(var r=0;r<n.length&&n[r]!=null;r++){var a=n[r];this.s0-=this.hash(a),this.s0+=~~(this.s0<0),this.s1-=this.hash(a),this.s1+=~~(this.s1<0),this.s2-=this.hash(a),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(n,r){return Math.floor(this.realInRange(0,r-n+1)+n)},between:function(n,r){return Math.floor(this.realInRange(0,r-n+1)+n)},realInRange:function(n,r){return this.frac()*(r-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",r="";for(r=n="";n++<36;r+=~n%5|n*3&4?(n^15?8^this.frac()*(n^20?16:4):4).toString(16):"-");return r},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-.5)+.5)]},timestamp:function(n,r){return this.realInRange(n||9466848e5,r||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return typeof n=="string"&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var r=n.length-1,a=r;a>0;a--){var t=Math.floor(this.frac()*(a+1)),s=n[t];n[t]=n[a],n[a]=s}return n}});f.exports=m}),63448:(f=>{var x=function(e,o,m,n){return m===void 0&&(m=0),o===0?e:(e-=m,e=o*Math.ceil(e/o),n?(m+e)/o:m+e)};f.exports=x}),56583:(f=>{var x=function(e,o,m,n){return m===void 0&&(m=0),o===0?e:(e-=m,e=o*Math.floor(e/o),n?(m+e)/o:m+e)};f.exports=x}),77720:(f=>{var x=function(e,o,m,n){return m===void 0&&(m=0),o===0?e:(e-=m,e=o*Math.round(e/o),n?(m+e)/o:m+e)};f.exports=x}),73697:((f,x,e)=>{f.exports={Ceil:e(63448),Floor:e(56583),To:e(77720)}}),85454:((f,x,e)=>{e(63595);var o=e(8054),m=e(79291),n={Actions:e(61061),Animations:e(60421),BlendModes:e(10312),Cache:e(83388),Cameras:e(26638),Core:e(42857),Class:e(83419),Create:e(15822),Curves:e(25410),Data:e(44965),Display:e(27460),DOM:e(84902),Events:e(93055),FX:e(66064),Game:e(50127),GameObjects:e(77856),Geom:e(55738),Input:e(14350),Loader:e(57777),Math:e(75508),Physics:e(44563),Plugins:e(18922),Renderer:e(36909),Scale:e(93364),ScaleModes:e(29795),Scene:e(97482),Scenes:e(62194),Structs:e(41392),Textures:e(27458),Tilemaps:e(62501),Time:e(90291),Tweens:e(43066),Utils:e(91799)};n.Sound=e(23717),n=m(!1,n,o),f.exports=n,e.g.Phaser=n}),71289:((f,x,e)=>{var o=e(83419),m=e(92209),n=e(88571),r=new o({Extends:n,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Collision,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(t,s,l,i,h){n.call(this,t,s,l,i,h),this.body=null}});f.exports=r}),86689:((f,x,e)=>{var o=e(83419),m=e(39506),n=e(20339),r=e(89774),a=e(66022),t=e(95540),s=e(46975),l=e(72441),i=e(47956),h=e(37277),d=e(44594),c=e(26099),u=e(82248),p=new o({initialize:function(y){this.scene=y,this.systems=y.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,y.sys.events.once(d.BOOT,this.boot,this),y.sys.events.on(d.START,this.start,this)},boot:function(){this.world=new u(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new u(this.scene,this.config),this.add=new a(this.world));var g=this.systems.events;t(this.config,"customUpdate",!1)||g.on(d.UPDATE,this.world.update,this.world),g.on(d.POST_UPDATE,this.world.postUpdate,this.world),g.once(d.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(d.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(d.UPDATE,this.world.update,this.world)},getConfig:function(){var g=this.systems.game.config.physics,y=this.systems.settings.physics,v=s(t(y,"arcade",{}),t(g,"arcade",{}));return v},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(g,y,v,S,w){return v===void 0&&(v=null),S===void 0&&(S=null),w===void 0&&(w=v),this.world.collideObjects(g,y,v,S,w,!0)},collide:function(g,y,v,S,w){return v===void 0&&(v=null),S===void 0&&(S=null),w===void 0&&(w=v),this.world.collideObjects(g,y,v,S,w,!1)},collideTiles:function(g,y,v,S,w){return this.world.collideTiles(g,y,v,S,w)},overlapTiles:function(g,y,v,S,w){return this.world.overlapTiles(g,y,v,S,w)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(g,y,v,S,w,T){S===void 0&&(S=60);var C=Math.atan2(v-g.y,y-g.x);return g.body.acceleration.setToPolar(C,S),w!==void 0&&T!==void 0&&g.body.maxVelocity.set(w,T),C},accelerateToObject:function(g,y,v,S,w){return this.accelerateTo(g,y.x,y.y,v,S,w)},closest:function(g,y){y||(y=this.world.bodies.entries);for(var v=Number.MAX_VALUE,S=null,w=g.x,T=g.y,C=y.length,M=0;M<C;M++){var E=y[M],P=E.body||E;if(!(g===E||g===P||g===P.gameObject||g===P.center)){var A=r(w,T,P.center.x,P.center.y);A<v&&(S=E,v=A)}}return S},furthest:function(g,y){y||(y=this.world.bodies.entries);for(var v=-1,S=null,w=g.x,T=g.y,C=y.length,M=0;M<C;M++){var E=y[M],P=E.body||E;if(!(g===E||g===P||g===P.gameObject||g===P.center)){var A=r(w,T,P.center.x,P.center.y);A>v&&(S=E,v=A)}}return S},moveTo:function(g,y,v,S,w){S===void 0&&(S=60),w===void 0&&(w=0);var T=Math.atan2(v-g.y,y-g.x);return w>0&&(S=n(g.x,g.y,y,v)/(w/1e3)),g.body.velocity.setToPolar(T,S),T},moveToObject:function(g,y,v,S){return this.moveTo(g,y.x,y.y,v,S)},velocityFromAngle:function(g,y,v){return y===void 0&&(y=60),v===void 0&&(v=new c),v.setToPolar(m(g),y)},velocityFromRotation:function(g,y,v){return y===void 0&&(y=60),v===void 0&&(v=new c),v.setToPolar(g,y)},overlapRect:function(g,y,v,S,w,T){return i(this.world,g,y,v,S,w,T)},overlapCirc:function(g,y,v,S,w){return l(this.world,g,y,v,S,w)},shutdown:function(){if(this.world){var g=this.systems.events;g.off(d.UPDATE,this.world.update,this.world),g.off(d.POST_UPDATE,this.world.postUpdate,this.world),g.off(d.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});h.register("ArcadePhysics",p,"arcadePhysics"),f.exports=p}),13759:((f,x,e)=>{var o=e(83419),m=e(92209),n=e(68287),r=new o({Extends:n,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Collision,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(t,s,l,i,h){n.call(this,t,s,l,i,h),this.body=null}});f.exports=r}),37742:((f,x,e)=>{var o=e(83419),m=e(78389),n=e(37747),r=e(63012),a=e(43396),t=e(87841),s=e(37303),l=e(95829),i=e(26099),h=new o({Mixins:[m],initialize:function(c,u){var p=64,g=64,y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},v=u!==void 0;v&&u.displayWidth&&(p=u.displayWidth,g=u.displayHeight),v||(u=y),this.world=c,this.gameObject=v?u:void 0,this.isBody=!0,this.transform={x:u.x,y:u.y,rotation:u.angle,scaleX:u.scaleX,scaleY:u.scaleY,displayOriginX:u.displayOriginX,displayOriginY:u.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new i,this.position=new i(u.x-u.scaleX*u.displayOriginX,u.y-u.scaleY*u.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=u.angle,this.preRotation=u.angle,this.width=p,this.height=g,this.sourceWidth=p,this.sourceHeight=g,u.frame&&(this.sourceWidth=u.frame.realWidth,this.sourceHeight=u.frame.realHeight),this.halfWidth=Math.abs(p/2),this.halfHeight=Math.abs(g/2),this.center=new i(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new i,this.newVelocity=new i,this.deltaMax=new i,this.acceleration=new i,this.allowDrag=!0,this.drag=new i,this.allowGravity=!0,this.gravity=new i,this.bounce=new i,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new i(1e4,1e4),this.maxSpeed=-1,this.friction=new i(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new i(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=l(!1),this.touching=l(!0),this.wasTouching=l(!0),this.blocked=l(!0),this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=u.scaleX,this._sy=u.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new t,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var d=this.gameObject,c=this.transform;if(d.parentContainer){var u=d.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=u.tx,c.y=u.ty,c.rotation=a(u.rotation),c.scaleX=u.scaleX,c.scaleY=u.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY}else c.x=d.x,c.y=d.y,c.rotation=d.angle,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY;var p=!1;if(this.syncBounds){var g=d.getBounds(this._bounds);this.width=g.width,this.height=g.height,p=!0}else{var y=Math.abs(c.scaleX),v=Math.abs(c.scaleY);(this._sx!==y||this._sy!==v)&&(this.width=this.sourceWidth*y,this.height=this.sourceHeight*v,this._sx=y,this._sy=v,p=!0)}p&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var d=this.transform;this.position.x=d.x+d.scaleX*(this.offset.x-d.displayOriginX),this.position.y=d.y+d.scaleY*(this.offset.y-d.displayOriginY),this.updateCenter()},resetFlags:function(d){d===void 0&&(d=!1);var c=this.wasTouching,u=this.touching,p=this.blocked;d?l(!0,c):(c.none=u.none,c.up=u.up,c.down=u.down,c.left=u.left,c.right=u.right),l(!0,u),l(!0,p),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(d,c){if(d&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var u=this.position;this.prev.x=u.x,this.prev.y=u.y,this.prevFrame.x=u.x,this.prevFrame.y=u.y}d&&this.update(c)},update:function(d){var c=this.prev,u=this.position,p=this.velocity;if(c.set(u.x,u.y),!this.moves){this._dx=u.x-c.x,this._dy=u.y-c.y;return}if(this.directControl){var g=this.autoFrame;p.set((u.x-g.x)/d,(u.y-g.y)/d),this.world.updateMotion(this,d),this._dx=u.x-g.x,this._dy=u.y-g.y}else this.world.updateMotion(this,d),this.newVelocity.set(p.x*d,p.y*d),u.add(this.newVelocity),this._dx=u.x-c.x,this._dy=u.y-c.y;var y=p.x,v=p.y;if(this.updateCenter(),this.angle=Math.atan2(v,y),this.speed=Math.sqrt(y*y+v*v),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var S=this.blocked;this.world.emit(r.WORLD_BOUNDS,this,S.up,S.down,S.left,S.right)}},postUpdate:function(){var d=this.position,c=d.x-this.prevFrame.x,u=d.y-this.prevFrame.y,p=this.gameObject;if(this.moves){var g=this.deltaMax.x,y=this.deltaMax.y;g!==0&&c!==0&&(c<0&&c<-g?c=-g:c>0&&c>g&&(c=g)),y!==0&&u!==0&&(u<0&&u<-y?u=-y:u>0&&u>y&&(u=y)),p&&(p.x+=c,p.y+=u)}c<0?this.facing=n.FACING_LEFT:c>0&&(this.facing=n.FACING_RIGHT),u<0?this.facing=n.FACING_UP:u>0&&(this.facing=n.FACING_DOWN),this.allowRotation&&p&&(p.angle+=this.deltaZ()),this._tx=c,this._ty=u,this.autoFrame.set(d.x,d.y)},setBoundsRectangle:function(d){return this.customBoundsRectangle=d||this.world.bounds,this},checkWorldBounds:function(){var d=this.position,c=this.velocity,u=this.blocked,p=this.customBoundsRectangle,g=this.world.checkCollision,y=this.worldBounce?-this.worldBounce.x:-this.bounce.x,v=this.worldBounce?-this.worldBounce.y:-this.bounce.y,S=!1;return d.x<p.x&&g.left?(d.x=p.x,c.x*=y,u.left=!0,S=!0):this.right>p.right&&g.right&&(d.x=p.right-this.width,c.x*=y,u.right=!0,S=!0),d.y<p.y&&g.up?(d.y=p.y,c.y*=v,u.up=!0,S=!0):this.bottom>p.bottom&&g.down&&(d.y=p.bottom-this.height,c.y*=v,u.down=!0,S=!0),S&&(this.blocked.none=!1,this.updateCenter()),S},setOffset:function(d,c){return c===void 0&&(c=d),this.offset.set(d,c),this},setGameObject:function(d,c){if(c===void 0&&(c=!0),!d||!d.hasTransformComponent)return this;var u=this.world;return this.gameObject&&this.gameObject.body&&(u.disable(this.gameObject),this.gameObject.body=null),d.body&&u.disable(d),this.gameObject=d,d.body=this,this.setSize(),this.enable=c,this},setSize:function(d,c,u){u===void 0&&(u=!0);var p=this.gameObject;if(p&&(!d&&p.frame&&(d=p.frame.realWidth),!c&&p.frame&&(c=p.frame.realHeight)),this.sourceWidth=d,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),u&&p&&p.getCenter){var g=(p.width-d)/2,y=(p.height-c)/2;this.offset.set(g,y)}return this.isCircle=!1,this.radius=0,this},setCircle:function(d,c,u){return c===void 0&&(c=this.offset.x),u===void 0&&(u=this.offset.y),d>0?(this.isCircle=!0,this.radius=d,this.sourceWidth=d*2,this.sourceHeight=d*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,u),this.updateCenter()):this.isCircle=!1,this},reset:function(d,c){this.stop();var u=this.gameObject;u&&(u.setPosition(d,c),this.rotation=u.angle,this.preRotation=u.angle);var p=this.position;u&&u.getTopLeft?u.getTopLeft(p):p.set(d,c),this.prev.copy(p),this.prevFrame.copy(p),this.autoFrame.copy(p),u&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(d){return d.x=this.x,d.y=this.y,d.right=this.right,d.bottom=this.bottom,d},hitTest:function(d,c){if(!this.isCircle)return s(this,d,c);if(this.radius>0&&d>=this.left&&d<=this.right&&c>=this.top&&c<=this.bottom){var u=(this.center.x-d)*(this.center.x-d),p=(this.center.y-c)*(this.center.y-c);return u+p<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(d){var c=this.position,u=c.x+this.halfWidth,p=c.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor),this.isCircle?d.strokeCircle(u,p,this.width/2):(this.checkCollision.up&&d.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&d.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&d.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&d.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(d.lineStyle(d.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),d.lineBetween(u,p,u+this.velocity.x/2,p+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(d){return d===void 0&&(d=!0),this.directControl=d,this},setCollideWorldBounds:function(d,c,u,p){d===void 0&&(d=!0),this.collideWorldBounds=d;var g=c!==void 0,y=u!==void 0;return(g||y)&&(this.worldBounce||(this.worldBounce=new i),g&&(this.worldBounce.x=c),y&&(this.worldBounce.y=u)),p!==void 0&&(this.onWorldBounds=p),this},setVelocity:function(d,c){return this.velocity.set(d,c),d=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(d*d+c*c),this},setVelocityX:function(d){return this.setVelocity(d,this.velocity.y)},setVelocityY:function(d){return this.setVelocity(this.velocity.x,d)},setMaxVelocity:function(d,c){return this.maxVelocity.set(d,c),this},setMaxVelocityX:function(d){return this.maxVelocity.x=d,this},setMaxVelocityY:function(d){return this.maxVelocity.y=d,this},setMaxSpeed:function(d){return this.maxSpeed=d,this},setSlideFactor:function(d,c){return this.slideFactor.set(d,c),this},setBounce:function(d,c){return this.bounce.set(d,c),this},setBounceX:function(d){return this.bounce.x=d,this},setBounceY:function(d){return this.bounce.y=d,this},setAcceleration:function(d,c){return this.acceleration.set(d,c),this},setAccelerationX:function(d){return this.acceleration.x=d,this},setAccelerationY:function(d){return this.acceleration.y=d,this},setAllowDrag:function(d){return d===void 0&&(d=!0),this.allowDrag=d,this},setAllowGravity:function(d){return d===void 0&&(d=!0),this.allowGravity=d,this},setAllowRotation:function(d){return d===void 0&&(d=!0),this.allowRotation=d,this},setDrag:function(d,c){return this.drag.set(d,c),this},setDamping:function(d){return this.useDamping=d,this},setDragX:function(d){return this.drag.x=d,this},setDragY:function(d){return this.drag.y=d,this},setGravity:function(d,c){return this.gravity.set(d,c),this},setGravityX:function(d){return this.gravity.x=d,this},setGravityY:function(d){return this.gravity.y=d,this},setFriction:function(d,c){return this.friction.set(d,c),this},setFrictionX:function(d){return this.friction.x=d,this},setFrictionY:function(d){return this.friction.y=d,this},setAngularVelocity:function(d){return this.angularVelocity=d,this},setAngularAcceleration:function(d){return this.angularAcceleration=d,this},setAngularDrag:function(d){return this.angularDrag=d,this},setMass:function(d){return this.mass=d,this},setImmovable:function(d){return d===void 0&&(d=!0),this.immovable=d,this},setEnable:function(d){return d===void 0&&(d=!0),this.enable=d,this},processX:function(d,c,u,p){this.x+=d,this.updateCenter(),c!==null&&(this.velocity.x=c*this.slideFactor.x);var g=this.blocked;u&&(g.left=!0,g.none=!1),p&&(g.right=!0,g.none=!1)},processY:function(d,c,u,p){this.y+=d,this.updateCenter(),c!==null&&(this.velocity.y=c*this.slideFactor.y);var g=this.blocked;u&&(g.up=!0,g.none=!1),p&&(g.down=!0,g.none=!1)},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});f.exports=h}),79342:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t,s,l,i,h){this.world=r,this.name="",this.active=!0,this.overlapOnly=a,this.object1=t,this.object2=s,this.collideCallback=l,this.processCallback=i,this.callbackContext=h},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});f.exports=m}),66022:((f,x,e)=>{var o=e(71289),m=e(13759),n=e(37742),r=e(83419),a=e(37747),t=e(60758),s=e(72624),l=e(71464),i=new r({initialize:function(d){this.world=d,this.scene=d.scene,this.sys=d.scene.sys},collider:function(h,d,c,u,p){return this.world.addCollider(h,d,c,u,p)},overlap:function(h,d,c,u,p){return this.world.addOverlap(h,d,c,u,p)},existing:function(h,d){var c=d?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(h,c),h},staticImage:function(h,d,c,u){var p=new o(this.scene,h,d,c,u);return this.sys.displayList.add(p),this.world.enableBody(p,a.STATIC_BODY),p},image:function(h,d,c,u){var p=new o(this.scene,h,d,c,u);return this.sys.displayList.add(p),this.world.enableBody(p,a.DYNAMIC_BODY),p},staticSprite:function(h,d,c,u){var p=new m(this.scene,h,d,c,u);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,a.STATIC_BODY),p},sprite:function(h,d,c,u){var p=new m(this.scene,h,d,c,u);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,a.DYNAMIC_BODY),p},staticGroup:function(h,d){return this.sys.updateList.add(new l(this.world,this.world.scene,h,d))},group:function(h,d){return this.sys.updateList.add(new t(this.world,this.world.scene,h,d))},body:function(h,d,c,u){var p=new n(this.world);return p.position.set(h,d),c&&u&&p.setSize(c,u),this.world.add(p,a.DYNAMIC_BODY),p},staticBody:function(h,d,c,u){var p=new s(this.world);return p.position.set(h,d),c&&u&&p.setSize(c,u),this.world.add(p,a.STATIC_BODY),p},destroy:function(){this.world=null,this.scene=null,this.sys=null}});f.exports=i}),79599:(f=>{var x=function(e){var o=0;if(!Array.isArray(e))o=e;else for(var m=0;m<e.length;m++)o|=e[m];return o};f.exports=x}),64897:((f,x,e)=>{var o=e(37747),m=function(n,r,a,t){var s=0,l=n.deltaAbsX()+r.deltaAbsX()+t;return n._dx===0&&r._dx===0?(n.embedded=!0,r.embedded=!0):n._dx>r._dx?(s=n.right-r.x,s>l&&!a||n.checkCollision.right===!1||r.checkCollision.left===!1?s=0:(n.touching.none=!1,n.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType===o.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.right=!0),n.physicsType===o.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.left=!0))):n._dx<r._dx&&(s=n.x-r.width-r.x,-s>l&&!a||n.checkCollision.left===!1||r.checkCollision.right===!1?s=0:(n.touching.none=!1,n.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType===o.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.left=!0),n.physicsType===o.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.right=!0))),n.overlapX=s,r.overlapX=s,s};f.exports=m}),45170:((f,x,e)=>{var o=e(37747),m=function(n,r,a,t){var s=0,l=n.deltaAbsY()+r.deltaAbsY()+t;return n._dy===0&&r._dy===0?(n.embedded=!0,r.embedded=!0):n._dy>r._dy?(s=n.bottom-r.y,s>l&&!a||n.checkCollision.down===!1||r.checkCollision.up===!1?s=0:(n.touching.none=!1,n.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType===o.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.down=!0),n.physicsType===o.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.up=!0))):n._dy<r._dy&&(s=n.y-r.bottom,-s>l&&!a||n.checkCollision.up===!1||r.checkCollision.down===!1?s=0:(n.touching.none=!1,n.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType===o.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.up=!0),n.physicsType===o.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.down=!0))),n.overlapY=s,r.overlapY=s,s};f.exports=m}),60758:((f,x,e)=>{var o=e(13759),m=e(83419),n=e(78389),r=e(37747),a=e(95540),t=e(26479),s=e(41212),l=new m({Extends:t,Mixins:[n],initialize:function(h,d,c,u){if(!c&&!u)u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(s(c))u=c,c=null,u.internalCreateCallback=this.createCallbackHandler,u.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(c)&&s(c[0])){var p=this;c.forEach(function(g){g.internalCreateCallback=p.createCallbackHandler,g.internalRemoveCallback=p.removeCallbackHandler,g.classType=a(g,"classType",o)}),u=null}else u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=h,u&&(u.classType=a(u,"classType",o)),this.physicsType=r.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:a(u,"collideWorldBounds",!1),setBoundsRectangle:a(u,"customBoundsRectangle",null),setAccelerationX:a(u,"accelerationX",0),setAccelerationY:a(u,"accelerationY",0),setAllowDrag:a(u,"allowDrag",!0),setAllowGravity:a(u,"allowGravity",!0),setAllowRotation:a(u,"allowRotation",!0),setDamping:a(u,"useDamping",!1),setBounceX:a(u,"bounceX",0),setBounceY:a(u,"bounceY",0),setDragX:a(u,"dragX",0),setDragY:a(u,"dragY",0),setEnable:a(u,"enable",!0),setGravityX:a(u,"gravityX",0),setGravityY:a(u,"gravityY",0),setFrictionX:a(u,"frictionX",0),setFrictionY:a(u,"frictionY",0),setMaxSpeed:a(u,"maxSpeed",-1),setMaxVelocityX:a(u,"maxVelocityX",1e4),setMaxVelocityY:a(u,"maxVelocityY",1e4),setVelocityX:a(u,"velocityX",0),setVelocityY:a(u,"velocityY",0),setAngularVelocity:a(u,"angularVelocity",0),setAngularAcceleration:a(u,"angularAcceleration",0),setAngularDrag:a(u,"angularDrag",0),setMass:a(u,"mass",1),setImmovable:a(u,"immovable",!1)},t.call(this,d,c,u),this.type="PhysicsGroup"},createCallbackHandler:function(i){i.body||this.world.enableBody(i,r.DYNAMIC_BODY);var h=i.body;for(var d in this.defaults)h[d](this.defaults[d])},removeCallbackHandler:function(i){i.body&&this.world.disableBody(i)},setVelocity:function(i,h,d){d===void 0&&(d=0);for(var c=this.getChildren(),u=0;u<c.length;u++)c[u].body.velocity.set(i+u*d,h+u*d);return this},setVelocityX:function(i,h){h===void 0&&(h=0);for(var d=this.getChildren(),c=0;c<d.length;c++)d[c].body.velocity.x=i+c*h;return this},setVelocityY:function(i,h){h===void 0&&(h=0);for(var d=this.getChildren(),c=0;c<d.length;c++)d[c].body.velocity.y=i+c*h;return this}});f.exports=l}),3017:(f=>{var x,e,o,m,n,r,a,t,s,l,i,h,d,c,u,p,g,y=function(M,E,P){x=M,e=E;var A=x.velocity.x,D=e.velocity.x;return o=x.pushable,s=x._dx<0,l=x._dx>0,i=x._dx===0,u=Math.abs(x.right-e.x)<=Math.abs(e.right-x.x),a=D-A*x.bounce.x,m=e.pushable,h=e._dx<0,d=e._dx>0,c=e._dx===0,p=!u,t=A-D*e.bounce.x,g=Math.abs(P),v()},v=function(){return l&&u&&e.blocked.right?(x.processX(-g,a,!1,!0),1):s&&p&&e.blocked.left?(x.processX(g,a,!0),1):d&&p&&x.blocked.right?(e.processX(-g,t,!1,!0),2):h&&u&&x.blocked.left?(e.processX(g,t,!0),2):0},S=function(){var M=x.velocity.x,E=e.velocity.x,P=Math.sqrt(E*E*e.mass/x.mass)*(E>0?1:-1),A=Math.sqrt(M*M*x.mass/e.mass)*(M>0?1:-1),D=(P+A)*.5;return P-=D,A-=D,n=D+P*x.bounce.x,r=D+A*e.bounce.x,s&&p?w(0):h&&u?w(1):l&&u?w(2):d&&p?w(3):!1},w=function(M){if(o&&m)g*=.5,M===0||M===3?(x.processX(g,n),e.processX(-g,r)):(x.processX(-g,n),e.processX(g,r));else if(o&&!m)M===0||M===3?x.processX(g,a,!0):x.processX(-g,a,!1,!0);else if(!o&&m)M===0||M===3?e.processX(-g,t,!1,!0):e.processX(g,t,!0);else{var E=g*.5;M===0?c?(x.processX(g,0,!0),e.processX(0,null,!1,!0)):d?(x.processX(E,0,!0),e.processX(-E,0,!1,!0)):(x.processX(E,e.velocity.x,!0),e.processX(-E,null,!1,!0)):M===1?i?(x.processX(0,null,!1,!0),e.processX(g,0,!0)):l?(x.processX(-E,0,!1,!0),e.processX(E,0,!0)):(x.processX(-E,null,!1,!0),e.processX(E,x.velocity.x,!0)):M===2?c?(x.processX(-g,0,!1,!0),e.processX(0,null,!0)):h?(x.processX(-E,0,!1,!0),e.processX(E,0,!0)):(x.processX(-E,e.velocity.x,!1,!0),e.processX(E,null,!0)):M===3&&(i?(x.processX(0,null,!0),e.processX(-g,0,!1,!0)):s?(x.processX(E,0,!0),e.processX(-E,0,!1,!0)):(x.processX(E,e.velocity.y,!0),e.processX(-E,null,!1,!0)))}return!0},T=function(M){if(M===1?e.velocity.x=0:u?e.processX(g,t,!0):e.processX(-g,t,!1,!0),x.moves){var E=x.directControl?x.y-x.autoFrame.y:x.y-x.prev.y;e.y+=E*x.friction.y,e._dy=e.y-e.prev.y}},C=function(M){if(M===2?x.velocity.x=0:p?x.processX(g,a,!0):x.processX(-g,a,!1,!0),e.moves){var E=e.directControl?e.y-e.autoFrame.y:e.y-e.prev.y;x.y+=E*e.friction.y,x._dy=x.y-x.prev.y}};f.exports={BlockCheck:v,Check:S,Set:y,Run:w,RunImmovableBody1:T,RunImmovableBody2:C}}),47962:(f=>{var x,e,o,m,n,r,a,t,s,l,i,h,d,c,u,p,g,y=function(M,E,P){x=M,e=E;var A=x.velocity.y,D=e.velocity.y;return o=x.pushable,s=x._dy<0,l=x._dy>0,i=x._dy===0,u=Math.abs(x.bottom-e.y)<=Math.abs(e.bottom-x.y),a=D-A*x.bounce.y,m=e.pushable,h=e._dy<0,d=e._dy>0,c=e._dy===0,p=!u,t=A-D*e.bounce.y,g=Math.abs(P),v()},v=function(){return l&&u&&e.blocked.down?(x.processY(-g,a,!1,!0),1):s&&p&&e.blocked.up?(x.processY(g,a,!0),1):d&&p&&x.blocked.down?(e.processY(-g,t,!1,!0),2):h&&u&&x.blocked.up?(e.processY(g,t,!0),2):0},S=function(){var M=x.velocity.y,E=e.velocity.y,P=Math.sqrt(E*E*e.mass/x.mass)*(E>0?1:-1),A=Math.sqrt(M*M*x.mass/e.mass)*(M>0?1:-1),D=(P+A)*.5;return P-=D,A-=D,n=D+P*x.bounce.y,r=D+A*e.bounce.y,s&&p?w(0):h&&u?w(1):l&&u?w(2):d&&p?w(3):!1},w=function(M){if(o&&m)g*=.5,M===0||M===3?(x.processY(g,n),e.processY(-g,r)):(x.processY(-g,n),e.processY(g,r));else if(o&&!m)M===0||M===3?x.processY(g,a,!0):x.processY(-g,a,!1,!0);else if(!o&&m)M===0||M===3?e.processY(-g,t,!1,!0):e.processY(g,t,!0);else{var E=g*.5;M===0?c?(x.processY(g,0,!0),e.processY(0,null,!1,!0)):d?(x.processY(E,0,!0),e.processY(-E,0,!1,!0)):(x.processY(E,e.velocity.y,!0),e.processY(-E,null,!1,!0)):M===1?i?(x.processY(0,null,!1,!0),e.processY(g,0,!0)):l?(x.processY(-E,0,!1,!0),e.processY(E,0,!0)):(x.processY(-E,null,!1,!0),e.processY(E,x.velocity.y,!0)):M===2?c?(x.processY(-g,0,!1,!0),e.processY(0,null,!0)):h?(x.processY(-E,0,!1,!0),e.processY(E,0,!0)):(x.processY(-E,e.velocity.y,!1,!0),e.processY(E,null,!0)):M===3&&(i?(x.processY(0,null,!0),e.processY(-g,0,!1,!0)):s?(x.processY(E,0,!0),e.processY(-E,0,!1,!0)):(x.processY(E,e.velocity.y,!0),e.processY(-E,null,!1,!0)))}return!0},T=function(M){if(M===1?e.velocity.y=0:u?e.processY(g,t,!0):e.processY(-g,t,!1,!0),x.moves){var E=x.directControl?x.x-x.autoFrame.x:x.x-x.prev.x;e.x+=E*x.friction.x,e._dx=e.x-e.prev.x}},C=function(M){if(M===2?x.velocity.y=0:p?x.processY(g,a,!0):x.processY(-g,a,!1,!0),e.moves){var E=e.directControl?e.x-e.autoFrame.x:e.x-e.prev.x;x.x+=E*e.friction.x,x._dx=x.x-x.prev.x}};f.exports={BlockCheck:v,Check:S,Set:y,Run:w,RunImmovableBody1:T,RunImmovableBody2:C}}),14087:((f,x,e)=>{var o=e(64897),m=e(3017),n=function(r,a,t,s,l){l===void 0&&(l=o(r,a,t,s));var i=r.immovable,h=a.immovable;if(t||l===0||i&&h||r.customSeparateX||a.customSeparateX)return l!==0||r.embedded&&a.embedded;var d=m.Set(r,a,l);return!i&&!h?d>0?!0:m.Check():(i?m.RunImmovableBody1(d):h&&m.RunImmovableBody2(d),!0)};f.exports=n}),89936:((f,x,e)=>{var o=e(45170),m=e(47962),n=function(r,a,t,s,l){l===void 0&&(l=o(r,a,t,s));var i=r.immovable,h=a.immovable;if(t||l===0||i&&h||r.customSeparateY||a.customSeparateY)return l!==0||r.embedded&&a.embedded;var d=m.Set(r,a,l);return!i&&!h?d>0?!0:m.Check():(i?m.RunImmovableBody1(d):h&&m.RunImmovableBody2(d),!0)};f.exports=n}),95829:(f=>{var x=function(e,o){return o===void 0&&(o={}),o.none=e,o.up=!1,o.down=!1,o.left=!1,o.right=!1,e||(o.up=!0,o.down=!0,o.left=!0,o.right=!0),o};f.exports=x}),72624:((f,x,e)=>{var o=e(87902),m=e(83419),n=e(78389),r=e(37747),a=e(37303),t=e(95829),s=e(26099),l=new m({Mixins:[n],initialize:function(h,d){var c=64,u=64,p={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},g=d!==void 0;g&&d.displayWidth&&(c=d.displayWidth,u=d.displayHeight),g||(d=p),this.world=h,this.gameObject=g?d:void 0,this.isBody=!0,this.debugShowBody=h.defaults.debugShowStaticBody,this.debugBodyColor=h.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new s,this.position=new s(d.x-c*d.originX,d.y-u*d.originY),this.width=c,this.height=u,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new s(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=s.ZERO,this.allowGravity=!1,this.gravity=s.ZERO,this.bounce=s.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=t(!1),this.touching=t(!0),this.wasTouching=t(!0),this.blocked=t(!0),this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(i,h,d){if(h===void 0&&(h=!0),d===void 0&&(d=!0),!i||!i.hasTransformComponent)return this;var c=this.world;return this.gameObject&&this.gameObject.body&&(c.disable(this.gameObject),this.gameObject.body=null),i.body&&c.disable(i),this.gameObject=i,i.body=this,this.setSize(),h&&this.updateFromGameObject(),this.enable=d,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var i=this.gameObject;return i.getTopLeft(this.position),this.width=i.displayWidth,this.height=i.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(i,h){return h===void 0&&(h=i),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(i,h),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(i,h,d){d===void 0&&(d=!0);var c=this.gameObject;if(c&&c.frame&&(i||(i=c.frame.realWidth),h||(h=c.frame.realHeight)),this.world.staticTree.remove(this),this.width=i,this.height=h,this.halfWidth=Math.floor(i/2),this.halfHeight=Math.floor(h/2),d&&c&&c.getCenter){var u=c.displayWidth/2,p=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u-this.halfWidth,p-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(i,h,d){return h===void 0&&(h=this.offset.x),d===void 0&&(d=this.offset.y),i>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=i,this.width=i*2,this.height=i*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(h,d),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(i,h){var d=this.gameObject;i===void 0&&(i=d.x),h===void 0&&(h=d.y),this.world.staticTree.remove(this),d.setPosition(i,h),d.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(i){return i.x=this.x,i.y=this.y,i.right=this.right,i.bottom=this.bottom,i},hitTest:function(i,h){return this.isCircle?o(this,i,h):a(this,i,h)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(i){var h=this.position,d=h.x+this.halfWidth,c=h.y+this.halfHeight;this.debugShowBody&&(i.lineStyle(i.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?i.strokeCircle(d,c,this.width/2):i.strokeRect(h.x,h.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(i){return i<=0&&(i=.1),this.mass=i,this},x:{get:function(){return this.position.x},set:function(i){this.world.staticTree.remove(this),this.position.x=i,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(i){this.world.staticTree.remove(this),this.position.y=i,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});f.exports=l}),71464:((f,x,e)=>{var o=e(13759),m=e(83419),n=e(78389),r=e(37747),a=e(95540),t=e(26479),s=e(41212),l=new m({Extends:t,Mixins:[n],initialize:function(h,d,c,u){!c&&!u?u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:o}:s(c)?(u=c,c=null,u.internalCreateCallback=this.createCallbackHandler,u.internalRemoveCallback=this.removeCallbackHandler,u.createMultipleCallback=this.createMultipleCallbackHandler,u.classType=a(u,"classType",o)):Array.isArray(c)&&s(c[0])?(u=c,c=null,u.forEach(function(p){p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=a(p,"classType",o)})):u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=h,this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,t.call(this,d,c,u),this.type="StaticPhysicsGroup"},createCallbackHandler:function(i){i.body||this.world.enableBody(i,r.STATIC_BODY)},removeCallbackHandler:function(i){i.body&&this.world.disableBody(i)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var i=this.children.entries,h=0;h<i.length;h++)i[h].body.reset();return this}});f.exports=l}),82248:((f,x,e)=>{var o=e(55495),m=e(37742),n=e(45319),r=e(83419),a=e(79342),t=e(37747),s=e(20339),l=e(52816),i=e(50792),h=e(63012),d=e(43855),c=e(5470),u=e(94977),p=e(64897),g=e(45170),y=e(96523),v=e(35154),S=e(36383),w=e(25774),T=e(96602),C=e(87841),M=e(59542),E=e(40012),P=e(14087),A=e(89936),D=e(35072),W=e(72624),V=e(2483),K=e(61340),X=e(26099),R=e(15994),H=new r({Extends:i,initialize:function(N,z){i.call(this),this.scene=N,this.bodies=new D,this.staticBodies=new D,this.pendingDestroy=new D,this.colliders=new w,this.gravity=new X(v(z,"gravity.x",0),v(z,"gravity.y",0)),this.bounds=new C(v(z,"x",0),v(z,"y",0),v(z,"width",N.sys.scale.width),v(z,"height",N.sys.scale.height)),this.checkCollision={up:v(z,"checkCollision.up",!0),down:v(z,"checkCollision.down",!0),left:v(z,"checkCollision.left",!0),right:v(z,"checkCollision.right",!0)},this.fps=v(z,"fps",60),this.fixedStep=v(z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=v(z,"timeScale",1),this.OVERLAP_BIAS=v(z,"overlapBias",4),this.TILE_BIAS=v(z,"tileBias",16),this.forceX=v(z,"forceX",!1),this.isPaused=v(z,"isPaused",!1),this._total=0,this.drawDebug=v(z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:v(z,"debugShowBody",!0),debugShowStaticBody:v(z,"debugShowStaticBody",!0),debugShowVelocity:v(z,"debugShowVelocity",!0),bodyDebugColor:v(z,"debugBodyColor",16711935),staticBodyDebugColor:v(z,"debugStaticBodyColor",255),velocityDebugColor:v(z,"debugVelocityColor",65280)},this.maxEntries=v(z,"maxEntries",16),this.useTree=v(z,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new K,this._tempMatrix2=new K,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(L,N){N===void 0&&(N=t.DYNAMIC_BODY),Array.isArray(L)||(L=[L]);for(var z=0;z<L.length;z++){var U=L[z];if(U.isParent)for(var Y=U.getChildren(),$=0;$<Y.length;$++){var Z=Y[$];Z.isParent?this.enable(Z,N):this.enableBody(Z,N)}else this.enableBody(U,N)}},enableBody:function(L,N){return N===void 0&&(N=t.DYNAMIC_BODY),L.hasTransformComponent&&(L.body||(N===t.DYNAMIC_BODY?L.body=new m(this,L):N===t.STATIC_BODY&&(L.body=new W(this,L))),this.add(L.body)),L},add:function(L){return L.physicsType===t.DYNAMIC_BODY?this.bodies.set(L):L.physicsType===t.STATIC_BODY&&(this.staticBodies.set(L),this.staticTree.insert(L)),L.enable=!0,L},disable:function(L){Array.isArray(L)||(L=[L]);for(var N=0;N<L.length;N++){var z=L[N];if(z.isParent)for(var U=z.getChildren(),Y=0;Y<U.length;Y++){var $=U[Y];$.isParent?this.disable($):this.disableBody($.body)}else this.disableBody(z.body)}},disableBody:function(L){this.remove(L),L.enable=!1},remove:function(L){L.physicsType===t.DYNAMIC_BODY?(this.tree.remove(L),this.bodies.delete(L)):L.physicsType===t.STATIC_BODY&&(this.staticBodies.delete(L),this.staticTree.remove(L))},createDebugGraphic:function(){var L=this.scene.sys.add.graphics({x:0,y:0});return L.setDepth(Number.MAX_VALUE),this.debugGraphic=L,this.drawDebug=!0,L},setBounds:function(L,N,z,U,Y,$,Z,Q){return this.bounds.setTo(L,N,z,U),Y!==void 0&&this.setBoundsCollision(Y,$,Z,Q),this},setBoundsCollision:function(L,N,z,U){return L===void 0&&(L=!0),N===void 0&&(N=!0),z===void 0&&(z=!0),U===void 0&&(U=!0),this.checkCollision.left=L,this.checkCollision.right=N,this.checkCollision.up=z,this.checkCollision.down=U,this},pause:function(){return this.isPaused=!0,this.emit(h.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(h.RESUME),this},addCollider:function(L,N,z,U,Y){z===void 0&&(z=null),U===void 0&&(U=null),Y===void 0&&(Y=z);var $=new a(this,!1,L,N,z,U,Y);return this.colliders.add($),$},addOverlap:function(L,N,z,U,Y){z===void 0&&(z=null),U===void 0&&(U=null),Y===void 0&&(Y=z);var $=new a(this,!0,L,N,z,U,Y);return this.colliders.add($),$},removeCollider:function(L){return this.colliders.remove(L),this},setFPS:function(L){return this.fps=L,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(L,N){if(!(this.isPaused||this.bodies.size===0)){var z,U=this._frameTime,Y=this._frameTimeMS*this.timeScale;this._elapsed+=N;var $,Z=this.bodies.entries,Q=this._elapsed>=Y;for(this.fixedStep||(U=N*.001,Q=!0,this._elapsed=0),z=0;z<Z.length;z++)$=Z[z],$.enable&&$.preUpdate(Q,U);if(Q){this._elapsed-=Y,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Z));var q=this.colliders.update();for(z=0;z<q.length;z++){var j=q[z];j.active&&j.update()}this.emit(h.WORLD_STEP,U)}for(;this._elapsed>=Y;)this._elapsed-=Y,this.step(U)}},step:function(L){var N,z,U=this.bodies.entries,Y=U.length;for(N=0;N<Y;N++)z=U[N],z.enable&&z.update(L);this.useTree&&(this.tree.clear(),this.tree.load(U));var $=this.colliders.update();for(N=0;N<$.length;N++){var Z=$[N];Z.active&&Z.update()}this.emit(h.WORLD_STEP,L),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var L,N,z=this.bodies.entries,U=z.length,Y=this.bodies,$=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,L=0;L<U;L++)N=z[L],N.enable&&N.postUpdate();if(this.drawDebug){var Z=this.debugGraphic;for(Z.clear(),L=0;L<U;L++)N=z[L],N.willDrawDebug()&&N.drawDebug(Z);for(z=$.entries,U=z.length,L=0;L<U;L++)N=z[L],N.willDrawDebug()&&N.drawDebug(Z)}var Q=this.pendingDestroy;if(Q.size>0){var q=this.tree,j=this.staticTree;for(z=Q.entries,U=z.length,L=0;L<U;L++)N=z[L],N.physicsType===t.DYNAMIC_BODY?(q.remove(N),Y.delete(N)):N.physicsType===t.STATIC_BODY&&(j.remove(N),$.delete(N)),N.world=void 0,N.gameObject=void 0;Q.clear()}},updateMotion:function(L,N){L.allowRotation&&this.computeAngularVelocity(L,N),this.computeVelocity(L,N)},computeAngularVelocity:function(L,N){var z=L.angularVelocity,U=L.angularAcceleration,Y=L.angularDrag,$=L.maxAngular;U?z+=U*N:L.allowDrag&&Y&&(Y*=N,c(z-Y,0,.1)?z-=Y:u(z+Y,0,.1)?z+=Y:z=0),z=n(z,-$,$);var Z=z-L.angularVelocity;L.angularVelocity+=Z,L.rotation+=L.angularVelocity*N},computeVelocity:function(L,N){var z=L.velocity.x,U=L.acceleration.x,Y=L.drag.x,$=L.maxVelocity.x,Z=L.velocity.y,Q=L.acceleration.y,q=L.drag.y,j=L.maxVelocity.y,_=L.speed,te=L.maxSpeed,se=L.allowDrag,ie=L.useDamping;L.allowGravity&&(z+=(this.gravity.x+L.gravity.x)*N,Z+=(this.gravity.y+L.gravity.y)*N),U?z+=U*N:se&&Y&&(ie?(Y=Math.pow(Y,N),z*=Y,_=Math.sqrt(z*z+Z*Z),d(_,0,.001)&&(z=0)):(Y*=N,c(z-Y,0,.01)?z-=Y:u(z+Y,0,.01)?z+=Y:z=0)),Q?Z+=Q*N:se&&q&&(ie?(q=Math.pow(q,N),Z*=q,_=Math.sqrt(z*z+Z*Z),d(_,0,.001)&&(Z=0)):(q*=N,c(Z-q,0,.01)?Z-=q:u(Z+q,0,.01)?Z+=q:Z=0)),z=n(z,-$,$),Z=n(Z,-j,j),L.velocity.set(z,Z),te>-1&&L.velocity.length()>te&&(L.velocity.normalize().scale(te),_=te),L.speed=_},separate:function(L,N,z,U,Y){var $,Z,Q=!1,q=!0;if(!L.enable||!N.enable||L.checkCollision.none||N.checkCollision.none||!this.intersects(L,N)||(L.collisionMask&N.collisionCategory)===0||(N.collisionMask&L.collisionCategory)===0||z&&z.call(U,L.gameObject||L,N.gameObject||N)===!1)return Q;if(L.isCircle||N.isCircle){var j=this.separateCircle(L,N,Y);j.result?(Q=!0,q=!1):($=j.x,Z=j.y,q=!0)}if(q){var _=!1,te=!1,se=this.OVERLAP_BIAS;Y?(_=P(L,N,Y,se,$),te=A(L,N,Y,se,Z)):this.forceX||Math.abs(this.gravity.y+L.gravity.y)<Math.abs(this.gravity.x+L.gravity.x)?(_=P(L,N,Y,se,$),this.intersects(L,N)&&(te=A(L,N,Y,se,Z))):(te=A(L,N,Y,se,Z),this.intersects(L,N)&&(_=P(L,N,Y,se,$))),Q=_||te}return Q&&(Y?(L.onOverlap||N.onOverlap)&&this.emit(h.OVERLAP,L.gameObject,N.gameObject,L,N):(L.onCollide||N.onCollide)&&this.emit(h.COLLIDE,L.gameObject,N.gameObject,L,N)),Q},separateCircle:function(L,N,z){p(L,N,!1,0),g(L,N,!1,0);var U=L.isCircle,Y=N.isCircle,$=L.center,Z=N.center,Q=L.immovable,q=N.immovable,j=L.velocity,_=N.velocity,te=0,se=!0;if(U!==Y){se=!1;var ie=$.x,ne=$.y,he=L.halfWidth,ue=N.position.x,ae=N.position.y,oe=N.right,le=N.bottom;Y&&(ie=Z.x,ne=Z.y,he=N.halfWidth,ue=L.position.x,ae=L.position.y,oe=L.right,le=L.bottom),ne<ae?ie<ue?te=s(ie,ne,ue,ae)-he:ie>oe&&(te=s(ie,ne,oe,ae)-he):ne>le&&(ie<ue?te=s(ie,ne,ue,le)-he:ie>oe&&(te=s(ie,ne,oe,le)-he)),te*=-1}else te=L.halfWidth+N.halfWidth-l($,Z);L.overlapR=te,N.overlapR=te;var fe=o($,Z),de=(te+S.EPSILON)*Math.cos(fe),me=(te+S.EPSILON)*Math.sin(fe),pe={overlap:te,result:!1,x:de,y:me};if(z&&(!se||se&&te!==0))return pe.result=!0,pe;if(!se&&te===0||Q&&q||L.customSeparateX||N.customSeparateX)return pe.x=void 0,pe.y=void 0,pe;var ve=!L.pushable&&!N.pushable;if(se){var we=$.x-Z.x,Ae=$.y-Z.y,Se=Math.sqrt(Math.pow(we,2)+Math.pow(Ae,2)),Ce=(Z.x-$.x)/Se||0,Ee=(Z.y-$.y)/Se||0,Fe=2*(j.x*Ce+j.y*Ee-_.x*Ce-_.y*Ee)/(L.mass+N.mass);(Q||q||!L.pushable||!N.pushable)&&(Fe*=2),!Q&&L.pushable&&(j.x=j.x-Fe/L.mass*Ce,j.y=j.y-Fe/L.mass*Ee,j.multiply(L.bounce)),!q&&N.pushable&&(_.x=_.x+Fe/N.mass*Ce,_.y=_.y+Fe/N.mass*Ee,_.multiply(N.bounce)),!Q&&!q&&(de*=.5,me*=.5),(!Q||L.pushable||ve)&&(L.x-=de,L.y-=me,L.updateCenter()),(!q||N.pushable||ve)&&(N.x+=de,N.y+=me,N.updateCenter()),pe.result=!0}else!Q&&(L.pushable||ve)&&(L.x-=de,L.y-=me,L.updateCenter()),!q&&(N.pushable||ve)&&(N.x+=de,N.y+=me,N.updateCenter()),pe.x=void 0,pe.y=void 0;return pe},intersects:function(L,N){return L===N?!1:!L.isCircle&&!N.isCircle?!(L.right<=N.left||L.bottom<=N.top||L.left>=N.right||L.top>=N.bottom):L.isCircle?N.isCircle?l(L.center,N.center)<=L.halfWidth+N.halfWidth:this.circleBodyIntersects(L,N):this.circleBodyIntersects(N,L)},circleBodyIntersects:function(L,N){var z=n(L.center.x,N.left,N.right),U=n(L.center.y,N.top,N.bottom),Y=(L.center.x-z)*(L.center.x-z),$=(L.center.y-U)*(L.center.y-U);return Y+$<=L.halfWidth*L.halfWidth},overlap:function(L,N,z,U,Y){return z===void 0&&(z=null),U===void 0&&(U=null),Y===void 0&&(Y=z),this.collideObjects(L,N,z,U,Y,!0)},collide:function(L,N,z,U,Y){return z===void 0&&(z=null),U===void 0&&(U=null),Y===void 0&&(Y=z),this.collideObjects(L,N,z,U,Y,!1)},collideObjects:function(L,N,z,U,Y,$){var Z,Q;L.isParent&&(L.physicsType===void 0||N===void 0||L===N)&&(L=L.children.entries),N&&N.isParent&&N.physicsType===void 0&&(N=N.children.entries);var q=Array.isArray(L),j=Array.isArray(N);if(this._total=0,!q&&!j)this.collideHandler(L,N,z,U,Y,$);else if(!q&&j)for(Z=0;Z<N.length;Z++)this.collideHandler(L,N[Z],z,U,Y,$);else if(q&&!j)if(N)for(Z=0;Z<L.length;Z++)this.collideHandler(L[Z],N,z,U,Y,$);else for(Z=0;Z<L.length;Z++){var _=L[Z];for(Q=Z+1;Q<L.length;Q++)Z!==Q&&this.collideHandler(_,L[Q],z,U,Y,$)}else for(Z=0;Z<L.length;Z++)for(Q=0;Q<N.length;Q++)this.collideHandler(L[Z],N[Q],z,U,Y,$);return this._total>0},collideHandler:function(L,N,z,U,Y,$){if(N===void 0&&L.isParent)return this.collideGroupVsGroup(L,L,z,U,Y,$);if(!L||!N)return!1;if(L.body||L.isBody){if(N.body||N.isBody)return this.collideSpriteVsSprite(L,N,z,U,Y,$);if(N.isParent)return this.collideSpriteVsGroup(L,N,z,U,Y,$);if(N.isTilemap)return this.collideSpriteVsTilemapLayer(L,N,z,U,Y,$)}else if(L.isParent){if(N.body||N.isBody)return this.collideSpriteVsGroup(N,L,z,U,Y,$);if(N.isParent)return this.collideGroupVsGroup(L,N,z,U,Y,$);if(N.isTilemap)return this.collideGroupVsTilemapLayer(L,N,z,U,Y,$)}else if(L.isTilemap){if(N.body||N.isBody)return this.collideSpriteVsTilemapLayer(N,L,z,U,Y,$);if(N.isParent)return this.collideGroupVsTilemapLayer(N,L,z,U,Y,$)}},canCollide:function(L,N){return L&&N&&(L.collisionMask&N.collisionCategory)!==0&&(N.collisionMask&L.collisionCategory)!==0},collideSpriteVsSprite:function(L,N,z,U,Y,$){var Z=L.isBody?L:L.body,Q=N.isBody?N:N.body;return this.canCollide(Z,Q)?(this.separate(Z,Q,U,Y,$)&&(z&&z.call(Y,L,N),this._total++),!0):!1},collideSpriteVsGroup:function(L,N,z,U,Y,$){var Z=L.isBody?L:L.body;if(!(N.getLength()===0||!Z||!Z.enable||Z.checkCollision.none||!this.canCollide(Z,N))){var Q,q,j;if(this.useTree||N.physicsType===t.STATIC_BODY){var _=this.treeMinMax;_.minX=Z.left,_.minY=Z.top,_.maxX=Z.right,_.maxY=Z.bottom;var te=N.physicsType===t.DYNAMIC_BODY?this.tree.search(_):this.staticTree.search(_);for(q=te.length,Q=0;Q<q;Q++)j=te[Q],!(Z===j||!j.enable||j.checkCollision.none||!N.contains(j.gameObject))&&this.separate(Z,j,U,Y,$)&&(z&&z.call(Y,Z.gameObject,j.gameObject),this._total++)}else{var se=N.getChildren(),ie=N.children.entries.indexOf(L);for(q=se.length,Q=0;Q<q;Q++)j=se[Q].body,!(!j||Q===ie||!j.enable)&&this.separate(Z,j,U,Y,$)&&(z&&z.call(Y,Z.gameObject,j.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(L,N,z,U,Y,$){if(!this.canCollide(L,N))return!1;var Z=L.getChildren();if(Z.length===0)return!1;for(var Q=!1,q=0;q<Z.length;q++)(Z[q].body||Z[q].isBody)&&this.collideSpriteVsTilemapLayer(Z[q],N,z,U,Y,$)&&(Q=!0);return Q},collideTiles:function(L,N,z,U,Y){return N.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,N,z,U,Y,!1,!1)},overlapTiles:function(L,N,z,U,Y){return N.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,N,z,U,Y,!0,!1)},collideSpriteVsTilemapLayer:function(L,N,z,U,Y,$){var Z=L.isBody?L:L.body;if(!Z.enable||Z.checkCollision.none||!this.canCollide(Z,N))return!1;var Q=N.layer,q=Z.x-Q.tileWidth*N.scaleX,j=Z.y-Q.tileHeight*N.scaleY,_=Z.width+Q.tileWidth*N.scaleX,te=Z.height+Q.tileHeight*N.scaleY,se=$?null:this.tileFilterOptions,ie=y(q,j,_,te,se,N.scene.cameras.main,N.layer);return ie.length===0?!1:this.collideSpriteVsTilesHandler(L,ie,z,U,Y,$,!0)},collideSpriteVsTilesHandler:function(L,N,z,U,Y,$,Z){for(var Q=L.isBody?L:L.body,q,j={left:0,right:0,top:0,bottom:0},_,te=!1,se=0;se<N.length;se++){q=N[se],_=q.tilemapLayer;var ie=_.tileToWorldXY(q.x,q.y);j.left=ie.x,j.top=ie.y,j.right=j.left+q.width*_.scaleX,j.bottom=j.top+q.height*_.scaleY,V(j,Q)&&(!U||U.call(Y,L,q))&&T(q,L)&&($||E(se,Q,q,j,_,this.TILE_BIAS,Z))&&(this._total++,te=!0,z&&z.call(Y,L,q),$&&Q.onOverlap?this.emit(h.TILE_OVERLAP,L,q,Q):Q.onCollide&&this.emit(h.TILE_COLLIDE,L,q,Q))}return te},collideGroupVsGroup:function(L,N,z,U,Y,$){if(!(L.getLength()===0||N.getLength()===0||!this.canCollide(L,N)))for(var Z=L.getChildren(),Q=0;Q<Z.length;Q++)this.collideSpriteVsGroup(Z[Q],N,z,U,Y,$)},wrap:function(L,N){L.body?this.wrapObject(L,N):L.getChildren?this.wrapArray(L.getChildren(),N):Array.isArray(L)?this.wrapArray(L,N):this.wrapObject(L,N)},wrapArray:function(L,N){for(var z=0;z<L.length;z++)this.wrapObject(L[z],N)},wrapObject:function(L,N){N===void 0&&(N=0),L.x=R(L.x,this.bounds.left-N,this.bounds.right+N),L.y=R(L.y,this.bounds.top-N,this.bounds.bottom+N)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});f.exports=H}),1093:(f=>{var x={setAcceleration:function(e,o){return this.body.acceleration.set(e,o),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};f.exports=x}),59023:(f=>{var x={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};f.exports=x}),62069:(f=>{var x={setBounce:function(e,o){return this.body.bounce.set(e,o),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,o,m,n){return this.body.setCollideWorldBounds(e,o,m,n),this}};f.exports=x}),78389:((f,x,e)=>{var o=e(79599),m={setCollisionCategory:function(n){var r=this.body?this.body:this;return r.collisionCategory=n,this},willCollideWith:function(n){var r=this.body?this.body:this;return(r.collisionMask&n)!==0},addCollidesWith:function(n){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask|n,this},removeCollidesWith:function(n){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask&~n,this},setCollidesWith:function(n){var r=this.body?this.body:this;return r.collisionMask=o(n),this},resetCollisionCategory:function(){var n=this.body?this.body:this;return n.collisionCategory=1,n.collisionMask=2147483647,this}};f.exports=m}),87118:(f=>{var x={setDebug:function(e,o,m){return this.debugShowBody=e,this.debugShowVelocity=o,this.debugBodyColor=m,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};f.exports=x}),52819:(f=>{var x={setDrag:function(e,o){return this.body.drag.set(e,o),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};f.exports=x}),4074:(f=>{var x={setDirectControl:function(e){return this.body.setDirectControl(e),this},enableBody:function(e,o,m,n,r){return e&&this.body.reset(o,m),n&&(this.body.gameObject.active=!0),r&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,o){return e===void 0&&(e=!1),o===void 0&&(o=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),o&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};f.exports=x}),40831:(f=>{var x={setFriction:function(e,o){return this.body.friction.set(e,o),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};f.exports=x}),26775:(f=>{var x={setGravity:function(e,o){return this.body.gravity.set(e,o),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};f.exports=x}),9437:(f=>{var x={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};f.exports=x}),30621:(f=>{var x={setMass:function(e){return this.body.mass=e,this}};f.exports=x}),72441:((f,x,e)=>{var o=e(47956),m=e(96503),n=e(2044),r=e(81491),a=function(t,s,l,i,h,d){var c=o(t,s-i,l-i,2*i,2*i,h,d);if(c.length===0)return c;for(var u=new m(s,l,i),p=new m,g=[],y=0;y<c.length;y++){var v=c[y];v.isCircle?(p.setTo(v.center.x,v.center.y,v.halfWidth),n(u,p)&&g.push(v)):r(u,v)&&g.push(v)}return g};f.exports=a}),47956:(f=>{var x=function(e,o,m,n,r,a,t){a===void 0&&(a=!0),t===void 0&&(t=!1);var s=[],l=[],i=e.treeMinMax;if(i.minX=o,i.minY=m,i.maxX=o+n,i.maxY=m+r,t&&(l=e.staticTree.search(i)),a&&e.useTree)s=e.tree.search(i);else if(a){var h=e.bodies,d={position:{x:o,y:m},left:o,top:m,right:o+n,bottom:m+r,isCircle:!1},c=e.intersects;h.iterate(function(u){c(u,d)&&s.push(u)})}return l.concat(s)};f.exports=x}),62121:(f=>{var x={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};f.exports=x}),29384:(f=>{var x={setOffset:function(e,o){return this.body.setOffset(e,o),this},setSize:function(e,o,m){return this.body.setSize(e,o,m),this},setBodySize:function(e,o,m){return this.body.setSize(e,o,m),this},setCircle:function(e,o,m){return this.body.setCircle(e,o,m),this}};f.exports=x}),15098:(f=>{var x={setVelocity:function(e,o){return this.body.setVelocity(e,o),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,o){return this.body.maxVelocity.set(e,o),this}};f.exports=x}),92209:((f,x,e)=>{f.exports={Acceleration:e(1093),Angular:e(59023),Bounce:e(62069),Collision:e(78389),Debug:e(87118),Drag:e(52819),Enable:e(4074),Friction:e(40831),Gravity:e(26775),Immovable:e(9437),Mass:e(30621),OverlapCirc:e(72441),OverlapRect:e(47956),Pushable:e(62121),Size:e(29384),Velocity:e(15098)}}),37747:(f=>{var x={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};f.exports=x}),20009:(f=>{f.exports="collide"}),36768:(f=>{f.exports="overlap"}),60473:(f=>{f.exports="pause"}),89954:(f=>{f.exports="resume"}),61804:(f=>{f.exports="tilecollide"}),7161:(f=>{f.exports="tileoverlap"}),34689:(f=>{f.exports="worldbounds"}),16006:(f=>{f.exports="worldstep"}),63012:((f,x,e)=>{f.exports={COLLIDE:e(20009),OVERLAP:e(36768),PAUSE:e(60473),RESUME:e(89954),TILE_COLLIDE:e(61804),TILE_OVERLAP:e(7161),WORLD_BOUNDS:e(34689),WORLD_STEP:e(16006)}}),27064:((f,x,e)=>{var o=e(37747),m=e(79291),n={ArcadePhysics:e(86689),Body:e(37742),Collider:e(79342),Components:e(92209),Events:e(63012),Factory:e(66022),GetCollidesWith:e(79599),GetOverlapX:e(64897),GetOverlapY:e(45170),SeparateX:e(14087),SeparateY:e(89936),Group:e(60758),Image:e(71289),Sprite:e(13759),StaticBody:e(72624),StaticGroup:e(71464),Tilemap:e(55173),World:e(82248)};n=m(!1,n,o),f.exports=n}),96602:(f=>{var x=function(e,o){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,o,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,o,e):!0};f.exports=x}),36294:(f=>{var x=function(e,o){o<0?(e.blocked.none=!1,e.blocked.left=!0):o>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=o,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};f.exports=x}),67013:(f=>{var x=function(e,o){o<0?(e.blocked.none=!1,e.blocked.up=!0):o>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=o,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};f.exports=x}),40012:((f,x,e)=>{var o=e(21329),m=e(53442),n=e(2483),r=function(a,t,s,l,i,h,d){var c=l.left,u=l.top,p=l.right,g=l.bottom,y=s.faceLeft||s.faceRight,v=s.faceTop||s.faceBottom;if(d||(y=!0,v=!0),!y&&!v)return!1;var S=0,w=0,T=0,C=1;if(t.deltaAbsX()>t.deltaAbsY()?T=-1:t.deltaAbsX()<t.deltaAbsY()&&(C=-1),t.deltaX()!==0&&t.deltaY()!==0&&y&&v&&(T=Math.min(Math.abs(t.position.x-p),Math.abs(t.right-c)),C=Math.min(Math.abs(t.position.y-g),Math.abs(t.bottom-u))),T<C){if(y&&(S=o(t,s,c,p,h,d),S!==0&&!n(l,t)))return!0;v&&(w=m(t,s,u,g,h,d))}else{if(v&&(w=m(t,s,u,g,h,d),w!==0&&!n(l,t)))return!0;y&&(S=o(t,s,c,p,h,d))}return S!==0||w!==0};f.exports=r}),21329:((f,x,e)=>{var o=e(36294),m=function(n,r,a,t,s,l){var i=0,h=r.faceLeft,d=r.faceRight,c=r.collideLeft,u=r.collideRight;return l||(h=!0,d=!0,c=!0,u=!0),n.deltaX()<0&&u&&n.checkCollision.left?d&&n.x<t&&(i=n.x-t,i<-s&&(i=0)):n.deltaX()>0&&c&&n.checkCollision.right&&h&&n.right>a&&(i=n.right-a,i>s&&(i=0)),i!==0&&(n.customSeparateX?n.overlapX=i:o(n,i)),i};f.exports=m}),53442:((f,x,e)=>{var o=e(67013),m=function(n,r,a,t,s,l){var i=0,h=r.faceTop,d=r.faceBottom,c=r.collideUp,u=r.collideDown;return l||(h=!0,d=!0,c=!0,u=!0),n.deltaY()<0&&u&&n.checkCollision.up?d&&n.y<t&&(i=n.y-t,i<-s&&(i=0)):n.deltaY()>0&&c&&n.checkCollision.down&&h&&n.bottom>a&&(i=n.bottom-a,i>s&&(i=0)),i!==0&&(n.customSeparateY?n.overlapY=i:o(n,i)),i};f.exports=m}),2483:(f=>{var x=function(e,o){return!(o.right<=e.left||o.bottom<=e.top||o.position.x>=e.right||o.position.y>=e.bottom)};f.exports=x}),55173:((f,x,e)=>{var o={ProcessTileCallbacks:e(96602),ProcessTileSeparationX:e(36294),ProcessTileSeparationY:e(67013),SeparateTile:e(40012),TileCheckX:e(21329),TileCheckY:e(53442),TileIntersectsBody:e(2483)};f.exports=o}),44563:((f,x,e)=>{f.exports={Arcade:e(27064),Matter:e(3875)}}),68174:((f,x,e)=>{var o=e(83419),m=e(26099),n=new o({initialize:function(){this.boundsCenter=new m,this.centerDiff=new m},parseBody:function(r){if(r=r.hasOwnProperty("body")?r.body:r,!r.hasOwnProperty("bounds")||!r.hasOwnProperty("centerOfMass"))return!1;var a=this.boundsCenter,t=this.centerDiff,s=r.bounds.max.x-r.bounds.min.x,l=r.bounds.max.y-r.bounds.min.y,i=s*r.centerOfMass.x,h=l*r.centerOfMass.y;return a.set(s/2,l/2),t.set(i-a.x,h-a.y),!0},getTopLeft:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a+s.x+l.x,t+s.y+l.y)}return!1},getTopCenter:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a+l.x,t+s.y+l.y)}return!1},getTopRight:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a-(s.x-l.x),t+s.y+l.y)}return!1},getLeftCenter:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a+s.x+l.x,t+l.y)}return!1},getCenter:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.centerDiff;return new m(a+s.x,t+s.y)}return!1},getRightCenter:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a-(s.x-l.x),t+l.y)}return!1},getBottomLeft:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a+s.x+l.x,t-(s.y-l.y))}return!1},getBottomCenter:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a+l.x,t-(s.y-l.y))}return!1},getBottomRight:function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),this.parseBody(r)){var s=this.boundsCenter,l=this.centerDiff;return new m(a-(s.x-l.x),t-(s.y-l.y))}return!1}});f.exports=n}),19933:((f,x,e)=>{var o=e(6790);o.Body=e(22562),o.Composite=e(69351),o.World=e(4372),o.Collision=e(52284),o.Detector=e(81388),o.Pairs=e(99561),o.Pair=e(4506),o.Query=e(73296),o.Resolver=e(66272),o.Constraint=e(48140),o.Common=e(53402),o.Engine=e(48413),o.Events=e(35810),o.Sleeping=e(53614),o.Plugin=e(73832),o.Bodies=e(66280),o.Composites=e(74116),o.Axes=e(66615),o.Bounds=e(15647),o.Svg=e(74058),o.Vector=e(31725),o.Vertices=e(41598),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,f.exports=o}),28137:((f,x,e)=>{var o=e(66280),m=e(83419),n=e(74116),r=e(48140),a=e(74058),t=e(75803),s=e(23181),l=e(34803),i=e(73834),h=e(19496),d=e(85791),c=e(98713),u=e(41598),p=new m({initialize:function(y){this.world=y,this.scene=y.scene,this.sys=y.scene.sys},rectangle:function(g,y,v,S,w){var T=o.rectangle(g,y,v,S,w);return this.world.add(T),T},trapezoid:function(g,y,v,S,w,T){var C=o.trapezoid(g,y,v,S,w,T);return this.world.add(C),C},circle:function(g,y,v,S,w){var T=o.circle(g,y,v,S,w);return this.world.add(T),T},polygon:function(g,y,v,S,w){var T=o.polygon(g,y,v,S,w);return this.world.add(T),T},fromVertices:function(g,y,v,S,w,T,C){typeof v=="string"&&(v=u.fromPath(v));var M=o.fromVertices(g,y,v,S,w,T,C);return this.world.add(M),M},fromPhysicsEditor:function(g,y,v,S,w){w===void 0&&(w=!0);var T=h.parseBody(g,y,v,S);return w&&!this.world.has(T)&&this.world.add(T),T},fromSVG:function(g,y,v,S,w,T){S===void 0&&(S=1),w===void 0&&(w={}),T===void 0&&(T=!0);for(var C=v.getElementsByTagName("path"),M=[],E=0;E<C.length;E++){var P=a.pathToVertices(C[E],30);S!==1&&u.scale(P,S,S),M.push(P)}var A=o.fromVertices(g,y,M,w);return T&&this.world.add(A),A},fromJSON:function(g,y,v,S,w){S===void 0&&(S={}),w===void 0&&(w=!0);var T=d.parseBody(g,y,v,S);return T&&w&&this.world.add(T),T},imageStack:function(g,y,v,S,w,T,C,M,E){C===void 0&&(C=0),M===void 0&&(M=0),E===void 0&&(E={});var P=this.world,A=this.sys.displayList;E.addToWorld=!1;var D=n.stack(v,S,w,T,C,M,function(W,V){var K=new s(P,W,V,g,y,E);return A.add(K),K.body});return P.add(D),D},stack:function(g,y,v,S,w,T,C){var M=n.stack(g,y,v,S,w,T,C);return this.world.add(M),M},pyramid:function(g,y,v,S,w,T,C){var M=n.pyramid(g,y,v,S,w,T,C);return this.world.add(M),M},chain:function(g,y,v,S,w,T){return n.chain(g,y,v,S,w,T)},mesh:function(g,y,v,S,w){return n.mesh(g,y,v,S,w)},newtonsCradle:function(g,y,v,S,w){var T=n.newtonsCradle(g,y,v,S,w);return this.world.add(T),T},car:function(g,y,v,S,w){var T=n.car(g,y,v,S,w);return this.world.add(T),T},softBody:function(g,y,v,S,w,T,C,M,E,P){var A=n.softBody(g,y,v,S,w,T,C,M,E,P);return this.world.add(A),A},joint:function(g,y,v,S,w){return this.constraint(g,y,v,S,w)},spring:function(g,y,v,S,w){return this.constraint(g,y,v,S,w)},constraint:function(g,y,v,S,w){S===void 0&&(S=1),w===void 0&&(w={}),w.bodyA=g.type==="body"?g:g.body,w.bodyB=y.type==="body"?y:y.body,isNaN(v)||(w.length=v),w.stiffness=S;var T=r.create(w);return this.world.add(T),T},worldConstraint:function(g,y,v,S){v===void 0&&(v=1),S===void 0&&(S={}),S.bodyB=g.type==="body"?g:g.body,isNaN(y)||(S.length=y),S.stiffness=v;var w=r.create(S);return this.world.add(w),w},mouseSpring:function(g){return this.pointerConstraint(g)},pointerConstraint:function(g){g===void 0&&(g={}),g.hasOwnProperty("render")||(g.render={visible:!1});var y=new c(this.scene,this.world,g);return this.world.add(y.constraint),y},image:function(g,y,v,S,w){var T=new s(this.world,g,y,v,S,w);return this.sys.displayList.add(T),T},tileBody:function(g,y){return new i(this.world,g,y)},sprite:function(g,y,v,S,w){var T=new l(this.world,g,y,v,S,w);return this.sys.displayList.add(T),this.sys.updateList.add(T),T},gameObject:function(g,y,v){return t(this.world,g,y,v)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});f.exports=p}),75803:((f,x,e)=>{var o=e(31884),m=e(95540),n=e(26099);function r(t){return!!t.get&&typeof t.get=="function"||!!t.set&&typeof t.set=="function"}var a=function(t,s,l,i){l===void 0&&(l={}),i===void 0&&(i=!0);var h=s.x,d=s.y;s.body={temp:!0,position:{x:h,y:d}};var c=[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity];if(c.forEach(function(p){for(var g in p)r(p[g])?Object.defineProperty(s,g,{get:p[g].get,set:p[g].set}):Object.defineProperty(s,g,{value:p[g]})}),s.world=t,s._tempVec2=new n(h,d),l.hasOwnProperty("type")&&l.type==="body")s.setExistingBody(l,i);else{var u=m(l,"shape",null);u||(u="rectangle"),l.addToWorld=i,s.setBody(u,l)}return s};f.exports=a}),23181:((f,x,e)=>{var o=e(83419),m=e(31884),n=e(95643),r=e(95540),a=e(88571),t=e(72699),s=e(26099),l=new o({Extends:a,Mixins:[m.Bounce,m.Collision,m.Force,m.Friction,m.Gravity,m.Mass,m.Sensor,m.SetBody,m.Sleep,m.Static,m.Transform,m.Velocity,t],initialize:function(h,d,c,u,p,g){n.call(this,h.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(u,p),this.setSizeToFrame(),this.setOrigin(),this.world=h,this._tempVec2=new s(d,c);var y=r(g,"shape",null);y?this.setBody(y,g):this.setRectangle(this.width,this.height,g),this.setPosition(d,c),this.initPipeline(),this.initPostPipeline(!0)}});f.exports=l}),42045:((f,x,e)=>{var o=e(60461),m=e(66615),n=e(66280),r=e(22562),a=e(68174),t=e(15647),s=e(83419),l=e(52284),i=e(53402),h=e(69351),d=e(74116),c=e(48140),u=e(81388),p=e(20339),g=e(28137),y=e(95540),v=e(35154),S=e(46975),w=e(4506),T=e(99561),C=e(37277),M=e(73296),E=e(66272),P=e(44594),A=e(74058),D=e(31725),W=e(41598),V=e(68243);i.setDecomp(e(55973));var K=new s({initialize:function(R){this.scene=R,this.systems=R.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=h,this.collision=l,this.detector=u,this.pair=w,this.pairs=T,this.query=M,this.resolver=E,this.constraint=c,this.bodies=n,this.composites=d,this.axes=m,this.bounds=t,this.svg=A,this.vector=D,this.vertices=W,this.verts=W,this._tempVec2=D.create(),E._restingThresh=v(this.config,"restingThresh",4),E._restingThreshTangent=v(this.config,"restingThreshTangent",6),E._positionDampen=v(this.config,"positionDampen",.9),E._positionWarming=v(this.config,"positionWarming",.8),E._frictionNormalMultiplier=v(this.config,"frictionNormalMultiplier",5),R.sys.events.once(P.BOOT,this.boot,this),R.sys.events.on(P.START,this.start,this)},boot:function(){this.world=new V(this.scene,this.config),this.add=new g(this.world),this.bodyBounds=new a,this.systems.events.once(P.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new V(this.scene,this.config),this.add=new g(this.world));var X=this.systems.events;X.on(P.UPDATE,this.world.update,this.world),X.on(P.POST_UPDATE,this.world.postUpdate,this.world),X.once(P.SHUTDOWN,this.shutdown,this)},getConfig:function(){var X=this.systems.game.config.physics,R=this.systems.settings.physics,H=S(y(R,"matter",{}),y(X,"matter",{}));return H},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(X,R){this.world.step(X,R)},containsPoint:function(X,R,H){X=this.getMatterBodies(X);var L=D.create(R,H),N=M.point(X,L);return N.length>0},intersectPoint:function(X,R,H){H=this.getMatterBodies(H);var L=D.create(X,R),N=[],z=M.point(H,L);return z.forEach(function(U){N.indexOf(U)===-1&&N.push(U)}),N},intersectRect:function(X,R,H,L,N,z){N===void 0&&(N=!1),z=this.getMatterBodies(z);var U={min:{x:X,y:R},max:{x:X+H,y:R+L}},Y=[],$=M.region(z,U,N);return $.forEach(function(Z){Y.indexOf(Z)===-1&&Y.push(Z)}),Y},intersectRay:function(X,R,H,L,N,z){N===void 0&&(N=1),z=this.getMatterBodies(z);for(var U=[],Y=M.ray(z,D.create(X,R),D.create(H,L),N),$=0;$<Y.length;$++)U.push(Y[$].body);return U},intersectBody:function(X,R){R=this.getMatterBodies(R);for(var H=[],L=M.collides(X,R),N=0;N<L.length;N++){var z=L[N];z.bodyA===X?H.push(z.bodyB):H.push(z.bodyA)}return H},overlap:function(X,R,H,L,N){H===void 0&&(H=null),L===void 0&&(L=null),N===void 0&&(N=H),Array.isArray(X)||(X=[X]),X=this.getMatterBodies(X),R=this.getMatterBodies(R);for(var z=!1,U=0;U<X.length;U++)for(var Y=X[U],$=M.collides(Y,R),Z=0;Z<$.length;Z++){var Q=$[Z],q=Q.bodyA.id===Y.id?Q.bodyB:Q.bodyA;if(!L||L.call(N,Y,q,Q)){if(z=!0,H)H.call(N,Y,q,Q);else if(!L)return!0}}return z},setCollisionCategory:function(X,R){return X=this.getMatterBodies(X),X.forEach(function(H){H.collisionFilter.category=R}),this},setCollisionGroup:function(X,R){return X=this.getMatterBodies(X),X.forEach(function(H){H.collisionFilter.group=R}),this},setCollidesWith:function(X,R){X=this.getMatterBodies(X);var H=0;if(!Array.isArray(R))H=R;else for(var L=0;L<R.length;L++)H|=R[L];return X.forEach(function(N){N.collisionFilter.mask=H}),this},getMatterBodies:function(X){if(!X)return this.world.getAllBodies();Array.isArray(X)||(X=[X]);for(var R=[],H=0;H<X.length;H++){var L=X[H].hasOwnProperty("body")?X[H].body:X[H];R.push(L)}return R},setVelocity:function(X,R,H){X=this.getMatterBodies(X);var L=this._tempVec2;return L.x=R,L.y=H,X.forEach(function(N){r.setVelocity(N,L)}),this},setVelocityX:function(X,R){X=this.getMatterBodies(X);var H=this._tempVec2;return H.x=R,X.forEach(function(L){H.y=L.velocity.y,r.setVelocity(L,H)}),this},setVelocityY:function(X,R){X=this.getMatterBodies(X);var H=this._tempVec2;return H.y=R,X.forEach(function(L){H.x=L.velocity.x,r.setVelocity(L,H)}),this},setAngularVelocity:function(X,R){return X=this.getMatterBodies(X),X.forEach(function(H){r.setAngularVelocity(H,R)}),this},applyForce:function(X,R){X=this.getMatterBodies(X);var H=this._tempVec2;return X.forEach(function(L){H.x=L.position.x,H.y=L.position.y,r.applyForce(L,H,R)}),this},applyForceFromPosition:function(X,R,H,L){X=this.getMatterBodies(X);var N=this._tempVec2;return X.forEach(function(z){L===void 0&&(L=z.angle),N.x=H*Math.cos(L),N.y=H*Math.sin(L),r.applyForce(z,R,N)}),this},applyForceFromAngle:function(X,R,H){X=this.getMatterBodies(X);var L=this._tempVec2;return X.forEach(function(N){H===void 0&&(H=N.angle),L.x=R*Math.cos(H),L.y=R*Math.sin(H),r.applyForce(N,{x:N.position.x,y:N.position.y},L)}),this},getConstraintLength:function(X){var R=X.pointA.x,H=X.pointA.y,L=X.pointB.x,N=X.pointB.y;return X.bodyA&&(R+=X.bodyA.position.x,H+=X.bodyA.position.y),X.bodyB&&(L+=X.bodyB.position.x,N+=X.bodyB.position.y),p(R,H,L,N)},alignBody:function(X,R,H,L){X=X.hasOwnProperty("body")?X.body:X;var N;switch(L){case o.TOP_LEFT:case o.LEFT_TOP:N=this.bodyBounds.getTopLeft(X,R,H);break;case o.TOP_CENTER:N=this.bodyBounds.getTopCenter(X,R,H);break;case o.TOP_RIGHT:case o.RIGHT_TOP:N=this.bodyBounds.getTopRight(X,R,H);break;case o.LEFT_CENTER:N=this.bodyBounds.getLeftCenter(X,R,H);break;case o.CENTER:N=this.bodyBounds.getCenter(X,R,H);break;case o.RIGHT_CENTER:N=this.bodyBounds.getRightCenter(X,R,H);break;case o.LEFT_BOTTOM:case o.BOTTOM_LEFT:N=this.bodyBounds.getBottomLeft(X,R,H);break;case o.BOTTOM_CENTER:N=this.bodyBounds.getBottomCenter(X,R,H);break;case o.BOTTOM_RIGHT:case o.RIGHT_BOTTOM:N=this.bodyBounds.getBottomRight(X,R,H);break}return N&&r.setPosition(X,N),this},shutdown:function(){var X=this.systems.events;this.world&&(X.off(P.UPDATE,this.world.update,this.world),X.off(P.POST_UPDATE,this.world.postUpdate,this.world)),X.off(P.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(P.START,this.start,this),this.scene=null,this.systems=null}});C.register("MatterPhysics",K,"matterPhysics"),f.exports=K}),34803:((f,x,e)=>{var o=e(9674),m=e(83419),n=e(31884),r=e(95643),a=e(95540),t=e(72699),s=e(68287),l=e(26099),i=new m({Extends:s,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,t],initialize:function(d,c,u,p,g,y){r.call(this,d.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(p,g),this.setSizeToFrame(),this.setOrigin(),this.world=d,this._tempVec2=new l(c,u);var v=a(y,"shape",null);v?this.setBody(v,y):this.setRectangle(this.width,this.height,y),this.setPosition(c,u),this.initPipeline(),this.initPostPipeline(!0)}});f.exports=i}),73834:((f,x,e)=>{var o=e(66280),m=e(22562),n=e(83419),r=e(31884),a=e(62644),t=e(50792),s=e(95540),l=e(97022),i=e(41598),h=new n({Extends:t,Mixins:[r.Bounce,r.Collision,r.Friction,r.Gravity,r.Mass,r.Sensor,r.Sleep,r.Static],initialize:function(c,u,p){t.call(this),this.tile=u,this.world=c,u.physics.matterBody&&u.physics.matterBody.destroy(),u.physics.matterBody=this;var g=s(p,"body",null),y=s(p,"addToWorld",!0);if(g)this.setBody(g,y);else{var v=u.getCollisionGroup(),S=s(v,"objects",[]);S.length>0?this.setFromTileCollision(p):this.setFromTileRectangle(p)}if(u.flipX||u.flipY){var w={x:u.getCenterX(),y:u.getCenterY()},T=u.flipX?-1:1,C=u.flipY?-1:1;m.scale(g,T,C,w)}},setFromTileRectangle:function(d){d===void 0&&(d={}),l(d,"isStatic")||(d.isStatic=!0),l(d,"addToWorld")||(d.addToWorld=!0);var c=this.tile.getBounds(),u=c.x+c.width/2,p=c.y+c.height/2,g=o.rectangle(u,p,c.width,c.height,d);return this.setBody(g,d.addToWorld),this},setFromTileCollision:function(d){d===void 0&&(d={}),l(d,"isStatic")||(d.isStatic=!0),l(d,"addToWorld")||(d.addToWorld=!0);for(var c=this.tile.tilemapLayer.scaleX,u=this.tile.tilemapLayer.scaleY,p=this.tile.getLeft(),g=this.tile.getTop(),y=this.tile.getCollisionGroup(),v=s(y,"objects",[]),S=[],w=0;w<v.length;w++){var T=v[w],C=p+T.x*c,M=g+T.y*u,E=T.width*c,P=T.height*u,A=null;if(T.rectangle)A=o.rectangle(C+E/2,M+P/2,E,P,d);else if(T.ellipse)A=o.circle(C+E/2,M+P/2,E/2,d);else if(T.polygon||T.polyline){var D=T.polygon?T.polygon:T.polyline,W=D.map(function(R){return{x:R.x*c,y:R.y*u}}),V=i.create(W),K=i.centre(V);C+=K.x,M+=K.y,A=o.fromVertices(C,M,V,d)}A&&S.push(A)}if(S.length===1)this.setBody(S[0],d.addToWorld);else if(S.length>1){var X=a(d);X.parts=S,this.setBody(m.create(X),X.addToWorld)}return this},setBody:function(d,c){return c===void 0&&(c=!0),this.body&&this.removeBody(),this.body=d,this.body.gameObject=this,c&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});f.exports=h}),19496:((f,x,e)=>{var o=e(66280),m=e(22562),n=e(53402),r=e(95540),a=e(41598),t={parseBody:function(s,l,i,h){h===void 0&&(h={});for(var d=r(i,"fixtures",[]),c=[],u=0;u<d.length;u++)for(var p=this.parseFixture(d[u]),g=0;g<p.length;g++)c.push(p[g]);var y=n.clone(i,!0);n.extend(y,h,!0),delete y.fixtures,delete y.type;var v=m.create(y);return m.setParts(v,c),m.setPosition(v,{x:s,y:l}),v},parseFixture:function(s){var l=n.extend({},!1,s);delete l.circle,delete l.vertices;var i;if(s.circle){var h=r(s.circle,"x"),d=r(s.circle,"y"),c=r(s.circle,"radius");i=[o.circle(h,d,c,l)]}else s.vertices&&(i=this.parseVertices(s.vertices,l));return i},parseVertices:function(s,l){l===void 0&&(l={});for(var i=[],h=0;h<s.length;h++)a.clockwiseSort(s[h]),i.push(m.create(n.extend({position:a.centre(s[h]),vertices:s[h]},l)));return o.flagCoincidentParts(i)}};f.exports=t}),85791:((f,x,e)=>{var o=e(66280),m=e(22562),n={parseBody:function(r,a,t,s){s===void 0&&(s={});var l,i=t.vertices;if(i.length===1)s.vertices=i[0],l=m.create(s),o.flagCoincidentParts(l.parts);else{for(var h=[],d=0;d<i.length;d++){var c=m.create({vertices:i[d]});h.push(c)}o.flagCoincidentParts(h),s.parts=h,l=m.create(s)}return l.label=t.label,m.setPosition(l,{x:r,y:a}),l}};f.exports=n}),98713:((f,x,e)=>{var o=e(15647),m=e(83419),n=e(69351),r=e(48140),a=e(81388),t=e(1121),s=e(8214),l=e(46975),i=e(53614),h=e(26099),d=e(41598),c=new m({initialize:function(p,g,y){y===void 0&&(y={});var v={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=p,this.world=g,this.camera=null,this.pointer=null,this.active=!0,this.position=new h,this.body=null,this.part=null,this.constraint=r.create(l(y,v)),this.world.on(t.BEFORE_UPDATE,this.update,this),p.sys.input.on(s.POINTER_DOWN,this.onDown,this),p.sys.input.on(s.POINTER_UP,this.onUp,this)},onDown:function(u){this.pointer||(this.pointer=u,this.camera=u.camera)},onUp:function(u){u===this.pointer&&(this.pointer=null)},getBody:function(u){var p=this.position,g=this.constraint;this.camera.getWorldPoint(u.x,u.y,p);for(var y=n.allBodies(this.world.localWorld),v=0;v<y.length;v++){var S=y[v];if(!S.ignorePointer&&o.contains(S.bounds,p)&&a.canCollide(S.collisionFilter,g.collisionFilter)&&this.hitTestBody(S,p))return this.world.emit(t.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(u,p){for(var g=this.constraint,y=u.parts.length,v=y>1?1:0,S=v;S<y;S++){var w=u.parts[S];if(d.contains(w.vertices,p))return g.pointA=p,g.pointB={x:p.x-u.position.x,y:p.y-u.position.y},g.bodyB=u,g.angleB=u.angle,i.set(u,!1),this.part=w,this.body=u,!0}return!1},update:function(){var u=this.pointer,p=this.body;if(!this.active||!u){p&&this.stopDrag();return}if(!u.isDown&&p){this.stopDrag();return}else if(u.isDown){if(!this.camera||!p&&!this.getBody(u))return;p=this.body;var g=this.position,y=this.constraint;this.camera.getWorldPoint(u.x,u.y,g),y.pointA.x=g.x,y.pointA.y=g.y,i.set(p,!1),this.world.emit(t.DRAG,p,this)}},stopDrag:function(){var u=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,u&&this.world.emit(t.DRAG_END,u,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(t.BEFORE_UPDATE,this.update),this.scene.sys.input.off(s.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(s.POINTER_UP,this.onUp,this)}});f.exports=c}),68243:((f,x,e)=>{var o=e(66280),m=e(22562),n=e(83419),r=e(53402),a=e(69351),t=e(48413),s=e(50792),l=e(1121),i=e(95540),h=e(35154),d=e(22562),c=e(35810),u=e(73834),p=e(4372),g=e(13037),y=e(31725),v=new n({Extends:s,initialize:function(w,T){s.call(this),this.scene=w,this.engine=t.create(T),this.localWorld=this.engine.world;var C=h(T,"gravity",null);C?this.setGravity(C.x,C.y,C.scale):C===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=h(T,"enabled",!0),this.getDelta=h(T,"getDelta",this.update60Hz);var M=i(T,"runner",{}),E=i(M,"fps",!1);E&&(M.delta=1e3/i(M,"fps",60)),this.runner=g.create(M),this.autoUpdate=h(T,"autoUpdate",!0);var P=h(T,"debug",!1);if(this.drawDebug=typeof P=="object"?!0:P,this.debugGraphic,this.debugConfig={showAxes:i(P,"showAxes",!1),showAngleIndicator:i(P,"showAngleIndicator",!1),angleColor:i(P,"angleColor",15208787),showBroadphase:i(P,"showBroadphase",!1),broadphaseColor:i(P,"broadphaseColor",16757760),showBounds:i(P,"showBounds",!1),boundsColor:i(P,"boundsColor",16777215),showVelocity:i(P,"showVelocity",!1),velocityColor:i(P,"velocityColor",44783),showCollisions:i(P,"showCollisions",!1),collisionColor:i(P,"collisionColor",16094476),showSeparations:i(P,"showSeparations",!1),separationColor:i(P,"separationColor",16753920),showBody:i(P,"showBody",!0),showStaticBody:i(P,"showStaticBody",!0),showInternalEdges:i(P,"showInternalEdges",!1),renderFill:i(P,"renderFill",!1),renderLine:i(P,"renderLine",!0),fillColor:i(P,"fillColor",1075465),fillOpacity:i(P,"fillOpacity",1),lineColor:i(P,"lineColor",2678297),lineOpacity:i(P,"lineOpacity",1),lineThickness:i(P,"lineThickness",1),staticFillColor:i(P,"staticFillColor",857979),staticLineColor:i(P,"staticLineColor",1255396),showSleeping:i(P,"showSleeping",!1),staticBodySleepOpacity:i(P,"staticBodySleepOpacity",.7),sleepFillColor:i(P,"sleepFillColor",4605510),sleepLineColor:i(P,"sleepLineColor",10066585),showSensors:i(P,"showSensors",!0),sensorFillColor:i(P,"sensorFillColor",857979),sensorLineColor:i(P,"sensorLineColor",1255396),showPositions:i(P,"showPositions",!0),positionSize:i(P,"positionSize",4),positionColor:i(P,"positionColor",14697178),showJoint:i(P,"showJoint",!0),jointColor:i(P,"jointColor",14737474),jointLineOpacity:i(P,"jointLineOpacity",1),jointLineThickness:i(P,"jointLineThickness",2),pinSize:i(P,"pinSize",4),pinColor:i(P,"pinColor",4382944),springColor:i(P,"springColor",14697184),anchorColor:i(P,"anchorColor",15724527),anchorSize:i(P,"anchorSize",4),showConvexHulls:i(P,"showConvexHulls",!1),hullColor:i(P,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),i(T,"setBounds",!1)){var A=T.setBounds;if(typeof A=="boolean")this.setBounds();else{var D=i(A,"x",0),W=i(A,"y",0),V=i(A,"width",w.sys.scale.width),K=i(A,"height",w.sys.scale.height),X=i(A,"thickness",64),R=i(A,"left",!0),H=i(A,"right",!0),L=i(A,"top",!0),N=i(A,"bottom",!0);this.setBounds(D,W,V,K,X,R,H,L,N)}}},setCompositeRenderStyle:function(S){var w=S.bodies,T=S.constraints,C=S.composites,M,E,P;for(M=0;M<w.length;M++)E=w[M],P=E.render,this.setBodyRenderStyle(E,P.lineColor,P.lineOpacity,P.lineThickness,P.fillColor,P.fillOpacity);for(M=0;M<T.length;M++)E=T[M],P=E.render,this.setConstraintRenderStyle(E,P.lineColor,P.lineOpacity,P.lineThickness,P.pinSize,P.anchorColor,P.anchorSize);for(M=0;M<C.length;M++)E=C[M],this.setCompositeRenderStyle(E);return this},setBodyRenderStyle:function(S,w,T,C,M,E){var P=S.render,A=this.debugConfig;return P?(w==null&&(w=S.isStatic?A.staticLineColor:A.lineColor),T==null&&(T=A.lineOpacity),C==null&&(C=A.lineThickness),M==null&&(M=S.isStatic?A.staticFillColor:A.fillColor),E==null&&(E=A.fillOpacity),w!==!1&&(P.lineColor=w),T!==!1&&(P.lineOpacity=T),C!==!1&&(P.lineThickness=C),M!==!1&&(P.fillColor=M),E!==!1&&(P.fillOpacity=E),this):this},setConstraintRenderStyle:function(S,w,T,C,M,E,P){var A=S.render,D=this.debugConfig;if(!A)return this;if(w==null){var W=A.type;W==="line"?w=D.jointColor:W==="pin"?w=D.pinColor:W==="spring"&&(w=D.springColor)}return T==null&&(T=D.jointLineOpacity),C==null&&(C=D.jointLineThickness),M==null&&(M=D.pinSize),E==null&&(E=D.anchorColor),P==null&&(P=D.anchorSize),w!==!1&&(A.lineColor=w),T!==!1&&(A.lineOpacity=T),C!==!1&&(A.lineThickness=C),M!==!1&&(A.pinSize=M),E!==!1&&(A.anchorColor=E),P!==!1&&(A.anchorSize=P),this},setEventsProxy:function(){var S=this,w=this.engine,T=this.localWorld;this.drawDebug&&(c.on(T,"compositeModified",function(C){S.setCompositeRenderStyle(C)}),c.on(T,"beforeAdd",function(C){for(var M=[].concat(C.object),E=0;E<M.length;E++){var P=M[E],A=P.render;P.type==="body"?S.setBodyRenderStyle(P,A.lineColor,A.lineOpacity,A.lineThickness,A.fillColor,A.fillOpacity):P.type==="composite"?S.setCompositeRenderStyle(P):P.type==="constraint"&&S.setConstraintRenderStyle(P,A.lineColor,A.lineOpacity,A.lineThickness,A.pinSize,A.anchorColor,A.anchorSize)}})),c.on(T,"beforeAdd",function(C){S.emit(l.BEFORE_ADD,C)}),c.on(T,"afterAdd",function(C){S.emit(l.AFTER_ADD,C)}),c.on(T,"beforeRemove",function(C){S.emit(l.BEFORE_REMOVE,C)}),c.on(T,"afterRemove",function(C){S.emit(l.AFTER_REMOVE,C)}),c.on(w,"beforeUpdate",function(C){S.emit(l.BEFORE_UPDATE,C)}),c.on(w,"afterUpdate",function(C){S.emit(l.AFTER_UPDATE,C)}),c.on(w,"collisionStart",function(C){var M=C.pairs,E,P;M.length>0&&M.map(function(A){E=A.bodyA,P=A.bodyB,E.gameObject&&E.gameObject.emit("collide",E,P,A),P.gameObject&&P.gameObject.emit("collide",P,E,A),c.trigger(E,"onCollide",{pair:A}),c.trigger(P,"onCollide",{pair:A}),E.onCollideCallback&&E.onCollideCallback(A),P.onCollideCallback&&P.onCollideCallback(A),E.onCollideWith[P.id]&&E.onCollideWith[P.id](P,A),P.onCollideWith[E.id]&&P.onCollideWith[E.id](E,A)}),S.emit(l.COLLISION_START,C,E,P)}),c.on(w,"collisionActive",function(C){var M=C.pairs,E,P;M.length>0&&M.map(function(A){E=A.bodyA,P=A.bodyB,E.gameObject&&E.gameObject.emit("collideActive",E,P,A),P.gameObject&&P.gameObject.emit("collideActive",P,E,A),c.trigger(E,"onCollideActive",{pair:A}),c.trigger(P,"onCollideActive",{pair:A}),E.onCollideActiveCallback&&E.onCollideActiveCallback(A),P.onCollideActiveCallback&&P.onCollideActiveCallback(A)}),S.emit(l.COLLISION_ACTIVE,C,E,P)}),c.on(w,"collisionEnd",function(C){var M=C.pairs,E,P;M.length>0&&M.map(function(A){E=A.bodyA,P=A.bodyB,E.gameObject&&E.gameObject.emit("collideEnd",E,P,A),P.gameObject&&P.gameObject.emit("collideEnd",P,E,A),c.trigger(E,"onCollideEnd",{pair:A}),c.trigger(P,"onCollideEnd",{pair:A}),E.onCollideEndCallback&&E.onCollideEndCallback(A),P.onCollideEndCallback&&P.onCollideEndCallback(A)}),S.emit(l.COLLISION_END,C,E,P)})},setBounds:function(S,w,T,C,M,E,P,A,D){return S===void 0&&(S=0),w===void 0&&(w=0),T===void 0&&(T=this.scene.sys.scale.width),C===void 0&&(C=this.scene.sys.scale.height),M===void 0&&(M=64),E===void 0&&(E=!0),P===void 0&&(P=!0),A===void 0&&(A=!0),D===void 0&&(D=!0),this.updateWall(E,"left",S-M,w-M,M,C+M*2),this.updateWall(P,"right",S+T,w-M,M,C+M*2),this.updateWall(A,"top",S,w-M,T,M),this.updateWall(D,"bottom",S,w+C,T,M),this},updateWall:function(S,w,T,C,M,E){var P=this.walls[w];S?(P&&p.remove(this.localWorld,P),T+=M/2,C+=E/2,this.walls[w]=this.create(T,C,M,E,{isStatic:!0,friction:0,frictionStatic:0})):(P&&p.remove(this.localWorld,P),this.walls[w]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,w,T){return S===void 0&&(S=0),w===void 0&&(w=1),T===void 0&&(T=.001),this.localWorld.gravity.x=S,this.localWorld.gravity.y=w,this.localWorld.gravity.scale=T,this},create:function(S,w,T,C,M){var E=o.rectangle(S,w,T,C,M);return p.add(this.localWorld,E),E},add:function(S){return p.add(this.localWorld,S),this},remove:function(S,w){Array.isArray(S)||(S=[S]);for(var T=0;T<S.length;T++){var C=S[T],M=C.body?C.body:C;a.remove(this.localWorld,M,w)}return this},removeConstraint:function(S,w){return a.remove(this.localWorld,S,w),this},convertTilemapLayer:function(S,w){var T=S.layer,C=S.getTilesWithin(0,0,T.width,T.height,{isColliding:!0});return this.convertTiles(C,w),this},convertTiles:function(S,w){if(S.length===0)return this;for(var T=0;T<S.length;T++)new u(this,S[T],w);return this},nextGroup:function(S){return d.nextGroup(S)},nextCategory:function(){return d.nextCategory()},pause:function(){return this.enabled=!1,this.emit(l.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=r.now(),this.emit(l.RESUME),this},update:function(S){if(!(!this.enabled||!this.autoUpdate)){var w=this.engine,T=this.runner,C=r.now(),M=T.delta,E=0,P=S-T.timeLastTick;if((!P||!T.timeLastTick||P>Math.max(g._maxFrameDelta,T.maxFrameTime))&&(P=T.frameDelta||g._frameDeltaFallback),T.frameDeltaSmoothing){T.frameDeltaHistory.push(P),T.frameDeltaHistory=T.frameDeltaHistory.slice(-T.frameDeltaHistorySize);var A=T.frameDeltaHistory.slice(0).sort(),D=T.frameDeltaHistory.slice(A.length*g._smoothingLowerBound,A.length*g._smoothingUpperBound),W=g._mean(D);P=W||P}T.frameDeltaSnapping&&(P=1e3/Math.round(1e3/P)),T.frameDelta=P,T.timeLastTick=S,T.timeBuffer+=T.frameDelta,T.timeBuffer=r.clamp(T.timeBuffer,0,T.frameDelta+M*g._timeBufferMargin),T.lastUpdatesDeferred=0;for(var V=T.maxUpdates||Math.ceil(T.maxFrameTime/M),K=r.now();M>0&&T.timeBuffer>=M*g._timeBufferMargin;){t.update(w,M),T.timeBuffer-=M,E+=1;var X=r.now()-C,R=r.now()-K,H=X+g._elapsedNextEstimate*R/E;if(E>=V||H>T.maxFrameTime){T.lastUpdatesDeferred=Math.round(Math.max(0,T.timeBuffer/M-g._timeBufferMargin));break}}}},step:function(S){t.update(this.engine,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var w=S.hasOwnProperty("body")?S.body:S;return a.get(this.localWorld,w.id,w.type)!==null},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var S=this.debugConfig,w=this.engine,T=this.debugGraphic,C=a.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&w.broadphase.controller&&this.renderGrid(w.broadphase,T,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(C,T,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(C),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(C,T,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(C,T,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(w.pairs.list,T,S.separationColor),S.showCollisions&&this.renderCollisions(w.pairs.list,T,S.collisionColor)}},renderGrid:function(S,w,T,C){w.lineStyle(1,T,C);for(var M=r.keys(S.buckets),E=0;E<M.length;E++){var P=M[E];if(!(S.buckets[P].length<2)){var A=P.split(/C|R/);w.strokeRect(parseInt(A[1],10)*S.bucketWidth,parseInt(A[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,w,T){w.lineStyle(1,T,1);for(var C=0;C<S.length;C++){var M=S[C];if(M.isActive){var E=M.collision,P=E.bodyA,A=E.bodyB,D=P.position,W=A.position,V=E.penetration,K=!P.isStatic&&!A.isStatic?4:1;A.isStatic&&(K=0),w.lineBetween(W.x,W.y,W.x-V.x*K,W.y-V.y*K),K=!P.isStatic&&!A.isStatic?4:1,P.isStatic&&(K=0),w.lineBetween(D.x,D.y,D.x-V.x*K,D.y-V.y*K)}}return this},renderCollisions:function(S,w,T){w.lineStyle(1,T,.5),w.fillStyle(T,1);var C,M;for(C=0;C<S.length;C++)if(M=S[C],!!M.isActive)for(var E=0;E<M.contactCount;E++){var P=M.contacts[E],A=P.vertex;A&&w.fillRect(A.x-2,A.y-2,5,5)}for(C=0;C<S.length;C++)if(M=S[C],!!M.isActive){var D=M.collision,W=M.contacts;if(M.contactCount>0){var V=W[0].vertex.x,K=W[0].vertex.y;M.contactCount===2&&(V=(W[0].vertex.x+W[1].vertex.x)/2,K=(W[0].vertex.y+W[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?w.lineBetween(V-D.normal.x*8,K-D.normal.y*8,V,K):w.lineBetween(V+D.normal.x*8,K+D.normal.y*8,V,K)}}return this},renderBodyBounds:function(S,w,T,C){w.lineStyle(1,T,C);for(var M=0;M<S.length;M++){var E=S[M];if(E.render.visible){var P=E.bounds;if(P)w.strokeRect(P.min.x,P.min.y,P.max.x-P.min.x,P.max.y-P.min.y);else for(var A=E.parts,D=A.length>1?1:0;D<A.length;D++){var W=A[D];w.strokeRect(W.bounds.min.x,W.bounds.min.y,W.bounds.max.x-W.bounds.min.x,W.bounds.max.y-W.bounds.min.y)}}}return this},renderBodyAxes:function(S,w,T,C,M){w.lineStyle(1,C,M);for(var E=0;E<S.length;E++){var P=S[E],A=P.parts;if(P.render.visible){var D,W,V;if(T)for(W=A.length>1?1:0;W<A.length;W++)for(D=A[W],V=0;V<D.axes.length;V++){var K=D.axes[V];w.lineBetween(D.position.x,D.position.y,D.position.x+K.x*20,D.position.y+K.y*20)}else for(W=A.length>1?1:0;W<A.length;W++)for(D=A[W],V=0;V<D.axes.length;V++)w.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,w,T,C,M){w.lineStyle(M,T,C);for(var E=0;E<S.length;E++){var P=S[E];P.render.visible&&w.lineBetween(P.position.x,P.position.y,P.position.x+(P.position.x-P.positionPrev.x)*2,P.position.y+(P.position.y-P.positionPrev.y)*2)}return this},renderBodies:function(S){for(var w=this.debugGraphic,T=this.debugConfig,C=T.showBody,M=T.showStaticBody,E=T.showSleeping,P=T.showInternalEdges,A=T.showConvexHulls,D=T.renderFill,W=T.renderLine,V=T.staticBodySleepOpacity,K=T.sleepFillColor,X=T.sleepLineColor,R=T.hullColor,H=0;H<S.length;H++){var L=S[H];if(L.render.visible&&!(!M&&L.isStatic||!C&&!L.isStatic)){var N=L.render.lineColor,z=L.render.lineOpacity,U=L.render.lineThickness,Y=L.render.fillColor,$=L.render.fillOpacity;E&&L.isSleeping&&(L.isStatic?(z*=V,$*=V):(N=X,Y=K)),D||(Y=null),W||(N=null),this.renderBody(L,w,P,N,z,U,Y,$);var Z=L.parts.length;A&&Z>1&&this.renderConvexHull(L,w,R,U)}}},renderBody:function(S,w,T,C,M,E,P,A){C===void 0&&(C=null),M===void 0&&(M=null),E===void 0&&(E=1),P===void 0&&(P=null),A===void 0&&(A=null);for(var D=this.debugConfig,W=D.sensorFillColor,V=D.sensorLineColor,K=S.parts,X=K.length,R=X>1?1:0;R<X;R++){var H=K[R],L=H.render,N=L.opacity;if(!(!L.visible||N===0||H.isSensor&&!D.showSensors)){var z=H.circleRadius;if(w.beginPath(),H.isSensor?(P!==null&&w.fillStyle(W,A*N),C!==null&&w.lineStyle(E,V,M*N)):(P!==null&&w.fillStyle(P,A*N),C!==null&&w.lineStyle(E,C,M*N)),z)w.arc(H.position.x,H.position.y,z,0,2*Math.PI);else{var U=H.vertices,Y=U.length;w.moveTo(U[0].x,U[0].y);for(var $=1;$<Y;$++){var Z=U[$];if(!U[$-1].isInternal||T?w.lineTo(Z.x,Z.y):w.moveTo(Z.x,Z.y),$<Y&&Z.isInternal&&!T){var Q=($+1)%Y;w.moveTo(U[Q].x,U[Q].y)}}w.closePath()}P!==null&&w.fillPath(),C!==null&&w.strokePath()}}if(D.showPositions&&!S.isStatic){var q=S.position.x,j=S.position.y,_=Math.ceil(D.positionSize/2);w.fillStyle(D.positionColor,1),w.fillRect(q-_,j-_,D.positionSize,D.positionSize)}return this},renderConvexHull:function(S,w,T,C){C===void 0&&(C=1);var M=S.parts,E=M.length;if(E>1){var P=S.vertices;w.lineStyle(C,T),w.beginPath(),w.moveTo(P[0].x,P[0].y);for(var A=1;A<P.length;A++)w.lineTo(P[A].x,P[A].y);w.lineTo(P[0].x,P[0].y),w.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,w=a.allConstraints(this.localWorld),T=0;T<w.length;T++){var C=w[T].render,M=C.lineColor,E=C.lineOpacity,P=C.lineThickness,A=C.pinSize,D=C.anchorColor,W=C.anchorSize;this.renderConstraint(w[T],S,M,E,P,A,D,W)}},renderConstraint:function(S,w,T,C,M,E,P,A){var D=S.render;if(!D.visible||!S.pointA||!S.pointB)return this;w.lineStyle(M,T,C);var W=S.bodyA,V=S.bodyB,K,X;if(W?K=y.add(W.position,S.pointA):K=S.pointA,D.type==="pin")w.strokeCircle(K.x,K.y,E);else{if(V?X=y.add(V.position,S.pointB):X=S.pointB,w.beginPath(),w.moveTo(K.x,K.y),D.type==="spring")for(var R=y.sub(X,K),H=y.perp(y.normalise(R)),L=Math.ceil(r.clamp(S.length/5,12,20)),N,z=1;z<L;z+=1)N=z%2===0?1:-1,w.lineTo(K.x+R.x*(z/L)+H.x*N*4,K.y+R.y*(z/L)+H.y*N*4);w.lineTo(X.x,X.y)}return w.strokePath(),D.anchors&&A>0&&(w.fillStyle(P),w.fillCircle(K.x,K.y,A),w.fillCircle(X.x,X.y,A)),this},resetCollisionIDs:function(){return m._nextCollidingGroupId=1,m._nextNonCollidingGroupId=-1,m._nextCategory=1,this},shutdown:function(){c.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),t.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});f.exports=v}),70410:(f=>{var x={setBounce:function(e){return this.body.restitution=e,this}};f.exports=x}),66968:(f=>{var x={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var o=0;if(!Array.isArray(e))o=e;else for(var m=0;m<e.length;m++)o|=e[m];return this.body.collisionFilter.mask=o,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,o){Array.isArray(e)||(e=[e]);for(var m=0;m<e.length;m++){var n=e[m].hasOwnProperty("body")?e[m].body:e[m];this.body.setOnCollideWith(n,o)}return this}};f.exports=x}),51607:((f,x,e)=>{var o=e(22562),m={applyForce:function(n){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,n),this},applyForceFrom:function(n,r){return o.applyForce(this.body,n,r),this},thrust:function(n){var r=this.body.angle;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(n){var r=this.body.angle-Math.PI/2;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(n){var r=this.body.angle+Math.PI/2;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(n){var r=this.body.angle-Math.PI;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};f.exports=m}),5436:(f=>{var x={setFriction:function(e,o,m){return this.body.friction=e,o!==void 0&&(this.body.frictionAir=o),m!==void 0&&(this.body.frictionStatic=m),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};f.exports=x}),39858:(f=>{var x={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};f.exports=x}),37302:((f,x,e)=>{var o=e(22562),m=e(26099),n={setMass:function(r){return o.setMass(this.body,r),this},setDensity:function(r){return o.setDensity(this.body,r),this},centerOfMass:{get:function(){return new m(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};f.exports=n}),39132:(f=>{var x={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};f.exports=x}),57772:((f,x,e)=>{var o=e(66280),m=e(22562),n=e(43855),r=e(95540),a=e(19496),t=e(85791),s=e(41598),l={setRectangle:function(i,h,d){return this.setBody({type:"rectangle",width:i,height:h},d)},setCircle:function(i,h){return this.setBody({type:"circle",radius:i},h)},setPolygon:function(i,h,d){return this.setBody({type:"polygon",sides:h,radius:i},d)},setTrapezoid:function(i,h,d,c){return this.setBody({type:"trapezoid",width:i,height:h,slope:d},c)},setExistingBody:function(i,h){h===void 0&&(h=!0),this.body&&this.world.remove(this.body,!0),this.body=i;for(var d=0;d<i.parts.length;d++)i.parts[d].gameObject=this;var c=this;if(i.destroy=function(){c.world.remove(c.body,!0),c.body.gameObject=null},h&&(this.world.has(i)&&this.world.remove(i,!0),this.world.add(i)),this._originComponent){var u=i.render.sprite.xOffset,p=i.render.sprite.yOffset,g=i.centerOfMass.x,y=i.centerOfMass.y;if(n(g,.5)&&n(y,.5))this.setOrigin(u+.5,p+.5);else{var v=i.centerOffset.x,S=i.centerOffset.y;this.setOrigin(u+v/this.displayWidth,p+S/this.displayHeight)}}return this},setBody:function(i,h){if(!i)return this;var d;typeof i=="string"&&(i={type:i});var c=r(i,"type","rectangle"),u=r(i,"x",this._tempVec2.x),p=r(i,"y",this._tempVec2.y),g=r(i,"width",this.width),y=r(i,"height",this.height);switch(c){case"rectangle":d=o.rectangle(u,p,g,y,h);break;case"circle":var v=r(i,"radius",Math.max(g,y)/2),S=r(i,"maxSides",25);d=o.circle(u,p,v,h,S);break;case"trapezoid":var w=r(i,"slope",.5);d=o.trapezoid(u,p,g,y,w,h);break;case"polygon":var T=r(i,"sides",5),C=r(i,"radius",Math.max(g,y)/2);d=o.polygon(u,p,T,C,h);break;case"fromVertices":case"fromVerts":var M=r(i,"verts",null);if(M)if(typeof M=="string"&&(M=s.fromPath(M)),this.body&&!this.body.hasOwnProperty("temp"))m.setVertices(this.body,M),d=this.body;else{var E=r(i,"flagInternal",!1),P=r(i,"removeCollinear",.01),A=r(i,"minimumArea",10);d=o.fromVertices(u,p,M,h,E,P,A)}break;case"fromPhysicsEditor":d=a.parseBody(u,p,i,h);break;case"fromPhysicsTracer":d=t.parseBody(u,p,i,h);break}return d&&this.setExistingBody(d,i.addToWorld),this}};f.exports=l}),38083:((f,x,e)=>{var o=e(1121),m=e(53614),n=e(35810),r={setToSleep:function(){return m.set(this.body,!0),this},setAwake:function(){return m.set(this.body,!1),this},setSleepThreshold:function(a){return a===void 0&&(a=60),this.body.sleepThreshold=a,this},setSleepEvents:function(a,t){return this.setSleepStartEvent(a),this.setSleepEndEvent(t),this},setSleepStartEvent:function(a){if(a){var t=this.world;n.on(this.body,"sleepStart",function(s){t.emit(o.SLEEP_START,s,this)})}else n.off(this.body,"sleepStart");return this},setSleepEndEvent:function(a){if(a){var t=this.world;n.on(this.body,"sleepEnd",function(s){t.emit(o.SLEEP_END,s,this)})}else n.off(this.body,"sleepEnd");return this}};f.exports=r}),90556:((f,x,e)=>{var o=e(22562),m={setStatic:function(n){return o.setStatic(this.body,n),this},isStatic:function(){return this.body.isStatic}};f.exports=m}),85436:((f,x,e)=>{var o=e(22562),m=e(36383),n=e(86554),r=e(30954),a=4,t={x:{get:function(){return this.body.position.x},set:function(s){this._tempVec2.set(s,this.y),o.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(s){this._tempVec2.set(this.x,s),o.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(s){this.setScale(s,s)}},scaleX:{get:function(){return this._scaleX},set:function(s){var l=1/this._scaleX,i=1/this._scaleY;this._scaleX=s,this._scaleX===0?this.renderFlags&=~a:this.renderFlags|=a,o.scale(this.body,l,i),o.scale(this.body,s,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(s){var l=1/this._scaleX,i=1/this._scaleY;this._scaleY=s,this._scaleY===0?this.renderFlags&=~a:this.renderFlags|=a,o.scale(this.body,l,i),o.scale(this.body,this._scaleX,s)}},angle:{get:function(){return r(this.body.angle*m.RAD_TO_DEG)},set:function(s){this.rotation=r(s)*m.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(s){this._rotation=n(s),o.setAngle(this.body,this._rotation)}},setPosition:function(s,l){return s===void 0&&(s=0),l===void 0&&(l=s),this._tempVec2.set(s,l),o.setPosition(this.body,this._tempVec2),this},setRotation:function(s){return s===void 0&&(s=0),this._rotation=n(s),o.setAngle(this.body,s),this},setFixedRotation:function(){return o.setInertia(this.body,1/0),this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,o.setAngle(this.body,this.rotation),this},setScale:function(s,l,i){s===void 0&&(s=1),l===void 0&&(l=s);var h=1/this._scaleX,d=1/this._scaleY;return this._scaleX=s,this._scaleY=l,o.scale(this.body,h,d,i),o.scale(this.body,s,l,i),this}};f.exports=t}),42081:((f,x,e)=>{var o=e(22562),m={setVelocityX:function(n){return this._tempVec2.set(n,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(n){return this._tempVec2.set(this.body.velocity.x,n),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function(n,r){return this._tempVec2.set(n,r),o.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return o.getVelocity(this.body)},setAngularVelocity:function(n){return o.setAngularVelocity(this.body,n),this},getAngularVelocity:function(){return o.getAngularVelocity(this.body)},setAngularSpeed:function(n){return o.setAngularSpeed(this.body,n),this},getAngularSpeed:function(){return o.getAngularSpeed(this.body)}};f.exports=m}),31884:((f,x,e)=>{f.exports={Bounce:e(70410),Collision:e(66968),Force:e(51607),Friction:e(5436),Gravity:e(39858),Mass:e(37302),Sensor:e(39132),SetBody:e(57772),Sleep:e(38083),Static:e(90556),Transform:e(85436),Velocity:e(42081)}}),85608:(f=>{f.exports="afteradd"}),1213:(f=>{f.exports="afterremove"}),25968:(f=>{f.exports="afterupdate"}),67205:(f=>{f.exports="beforeadd"}),39438:(f=>{f.exports="beforeremove"}),44823:(f=>{f.exports="beforeupdate"}),92593:(f=>{f.exports="collisionactive"}),60128:(f=>{f.exports="collisionend"}),76861:(f=>{f.exports="collisionstart"}),92362:(f=>{f.exports="dragend"}),76408:(f=>{f.exports="drag"}),93971:(f=>{f.exports="dragstart"}),5656:(f=>{f.exports="pause"}),47861:(f=>{f.exports="resume"}),79099:(f=>{f.exports="sleepend"}),35906:(f=>{f.exports="sleepstart"}),1121:((f,x,e)=>{f.exports={AFTER_ADD:e(85608),AFTER_REMOVE:e(1213),AFTER_UPDATE:e(25968),BEFORE_ADD:e(67205),BEFORE_REMOVE:e(39438),BEFORE_UPDATE:e(44823),COLLISION_ACTIVE:e(92593),COLLISION_END:e(60128),COLLISION_START:e(76861),DRAG_END:e(92362),DRAG:e(76408),DRAG_START:e(93971),PAUSE:e(5656),RESUME:e(47861),SLEEP_END:e(79099),SLEEP_START:e(35906)}}),3875:((f,x,e)=>{f.exports={BodyBounds:e(68174),Components:e(31884),Events:e(1121),Factory:e(28137),MatterGameObject:e(75803),Image:e(23181),Matter:e(19933),MatterPhysics:e(42045),PolyDecomp:e(55973),Sprite:e(34803),TileBody:e(73834),PhysicsEditorParser:e(19496),PhysicsJSONParser:e(85791),PointerConstraint:e(98713),World:e(68243)}}),22562:((f,x,e)=>{var o={};f.exports=o;var m=e(41598),n=e(31725),r=e(53614),a=e(53402),t=e(15647),s=e(66615);(function(){o._timeCorrection=!0,o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o._baseDelta=16.666666666666668,o.create=function(i){var h={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:i.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=m.centre(i.vertices):i.hasOwnProperty("vertices")||(h.vertices=m.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var d=a.extend(h,i);return l(d,i),d.setOnCollideWith=function(c,u){return u?this.onCollideWith[c.id]=u:delete this.onCollideWith[c.id],this},d},o.nextGroup=function(i){return i?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var l=function(i,h){if(h=h||{},o.set(i,{bounds:i.bounds||t.create(i.vertices),positionPrev:i.positionPrev||n.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i}),m.rotate(i.vertices,i.angle,i.position),s.rotate(i.axes,i.angle),t.update(i.bounds,i.vertices,i.velocity),o.set(i,{axes:h.axes||i.axes,area:h.area||i.area,mass:h.mass||i.mass,inertia:h.inertia||i.inertia}),i.parts.length===1){var d=i.bounds,c=i.centerOfMass,u=i.centerOffset,p=d.max.x-d.min.x,g=d.max.y-d.min.y;c.x=-(d.min.x-i.position.x)/p,c.y=-(d.min.y-i.position.y)/g,u.x=p*c.x,u.y=g*c.y}};o.set=function(i,h,d){var c;typeof h=="string"&&(c=h,h={},h[c]=d);for(c in h)if(Object.prototype.hasOwnProperty.call(h,c))switch(d=h[c],c){case"isStatic":o.setStatic(i,d);break;case"isSleeping":r.set(i,d);break;case"mass":o.setMass(i,d);break;case"density":o.setDensity(i,d);break;case"inertia":o.setInertia(i,d);break;case"vertices":o.setVertices(i,d);break;case"position":o.setPosition(i,d);break;case"angle":o.setAngle(i,d);break;case"velocity":o.setVelocity(i,d);break;case"angularVelocity":o.setAngularVelocity(i,d);break;case"speed":o.setSpeed(i,d);break;case"angularSpeed":o.setAngularSpeed(i,d);break;case"parts":o.setParts(i,d);break;case"centre":o.setCentre(i,d);break;default:i[c]=d}},o.setStatic=function(i,h){for(var d=0;d<i.parts.length;d++){var c=i.parts[d];h?(c.isStatic||(c._original={restitution:c.restitution,friction:c.friction,mass:c.mass,inertia:c.inertia,density:c.density,inverseMass:c.inverseMass,inverseInertia:c.inverseInertia}),c.restitution=0,c.friction=1,c.mass=c.inertia=c.density=1/0,c.inverseMass=c.inverseInertia=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.angularVelocity=0,c.speed=0,c.angularSpeed=0,c.motion=0):c._original&&(c.restitution=c._original.restitution,c.friction=c._original.friction,c.mass=c._original.mass,c.inertia=c._original.inertia,c.density=c._original.density,c.inverseMass=c._original.inverseMass,c.inverseInertia=c._original.inverseInertia,c._original=null),c.isStatic=h}},o.setMass=function(i,h){var d=i.inertia/(i.mass/6);i.inertia=d*(h/6),i.inverseInertia=1/i.inertia,i.mass=h,i.inverseMass=1/i.mass,i.density=i.mass/i.area},o.setDensity=function(i,h){o.setMass(i,h*i.area),i.density=h},o.setInertia=function(i,h){i.inertia=h,i.inverseInertia=1/i.inertia},o.setVertices=function(i,h){h[0].body===i?i.vertices=h:i.vertices=m.create(h,i),i.axes=s.fromVertices(i.vertices),i.area=m.area(i.vertices),o.setMass(i,i.density*i.area);var d=m.centre(i.vertices);m.translate(i.vertices,d,-1),o.setInertia(i,o._inertiaScale*m.inertia(i.vertices,i.mass)),m.translate(i.vertices,i.position),t.update(i.bounds,i.vertices,i.velocity)},o.setParts=function(i,h,d){var c;for(h=h.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,c=0;c<h.length;c++){var u=h[c];u!==i&&(u.parent=i,i.parts.push(u))}if(i.parts.length!==1){if(d=typeof d<"u"?d:!0,d){var p=[];for(c=0;c<h.length;c++)p=p.concat(h[c].vertices);m.clockwiseSort(p);var g=m.hull(p),y=m.centre(g);o.setVertices(i,g),m.translate(i.vertices,y)}var v=o._totalProperties(i),S=v.centre.x,w=v.centre.y,T=i.bounds,C=i.centerOfMass,M=i.centerOffset;t.update(T,i.vertices,i.velocity),C.x=-(T.min.x-S)/(T.max.x-T.min.x),C.y=-(T.min.y-w)/(T.max.y-T.min.y),M.x=S,M.y=w,i.area=v.area,i.parent=i,i.position.x=S,i.position.y=w,i.positionPrev.x=S,i.positionPrev.y=w,o.setMass(i,v.mass),o.setInertia(i,v.inertia),o.setPosition(i,v.centre)}},o.setCentre=function(i,h,d){d?(i.positionPrev.x+=h.x,i.positionPrev.y+=h.y,i.position.x+=h.x,i.position.y+=h.y):(i.positionPrev.x=h.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=h.y-(i.position.y-i.positionPrev.y),i.position.x=h.x,i.position.y=h.y)},o.setPosition=function(i,h,d){var c=n.sub(h,i.position);d?(i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.velocity.x=c.x,i.velocity.y=c.y,i.speed=n.magnitude(c)):(i.positionPrev.x+=c.x,i.positionPrev.y+=c.y);for(var u=0;u<i.parts.length;u++){var p=i.parts[u];p.position.x+=c.x,p.position.y+=c.y,m.translate(p.vertices,c),t.update(p.bounds,p.vertices,i.velocity)}},o.setAngle=function(i,h,d){var c=h-i.angle;d?(i.anglePrev=i.angle,i.angularVelocity=c,i.angularSpeed=Math.abs(c)):i.anglePrev+=c;for(var u=0;u<i.parts.length;u++){var p=i.parts[u];p.angle+=c,m.rotate(p.vertices,c,i.position),s.rotate(p.axes,c),t.update(p.bounds,p.vertices,i.velocity),u>0&&n.rotateAbout(p.position,c,i.position,p.position)}},o.setVelocity=function(i,h){var d=i.deltaTime/o._baseDelta;i.positionPrev.x=i.position.x-h.x*d,i.positionPrev.y=i.position.y-h.y*d,i.velocity.x=(i.position.x-i.positionPrev.x)/d,i.velocity.y=(i.position.y-i.positionPrev.y)/d,i.speed=n.magnitude(i.velocity)},o.getVelocity=function(i){var h=o._baseDelta/i.deltaTime;return{x:(i.position.x-i.positionPrev.x)*h,y:(i.position.y-i.positionPrev.y)*h}},o.getSpeed=function(i){return n.magnitude(o.getVelocity(i))},o.setSpeed=function(i,h){o.setVelocity(i,n.mult(n.normalise(o.getVelocity(i)),h))},o.setAngularVelocity=function(i,h){var d=i.deltaTime/o._baseDelta;i.anglePrev=i.angle-h*d,i.angularVelocity=(i.angle-i.anglePrev)/d,i.angularSpeed=Math.abs(i.angularVelocity)},o.getAngularVelocity=function(i){return(i.angle-i.anglePrev)*o._baseDelta/i.deltaTime},o.getAngularSpeed=function(i){return Math.abs(o.getAngularVelocity(i))},o.setAngularSpeed=function(i,h){o.setAngularVelocity(i,a.sign(o.getAngularVelocity(i))*h)},o.translate=function(i,h,d){o.setPosition(i,n.add(i.position,h),d)},o.rotate=function(i,h,d,c){if(!d)o.setAngle(i,i.angle+h,c);else{var u=Math.cos(h),p=Math.sin(h),g=i.position.x-d.x,y=i.position.y-d.y;o.setPosition(i,{x:d.x+(g*u-y*p),y:d.y+(g*p+y*u)},c),o.setAngle(i,i.angle+h,c)}},o.scale=function(i,h,d,c){var u=0,p=0;c=c||i.position;for(var g=i.inertia===1/0,y=0;y<i.parts.length;y++){var v=i.parts[y];v.scale.x=h,v.scale.y=d,m.scale(v.vertices,h,d,c),v.axes=s.fromVertices(v.vertices),v.area=m.area(v.vertices),o.setMass(v,i.density*v.area),m.translate(v.vertices,{x:-v.position.x,y:-v.position.y}),o.setInertia(v,o._inertiaScale*m.inertia(v.vertices,v.mass)),m.translate(v.vertices,{x:v.position.x,y:v.position.y}),y>0&&(u+=v.area,p+=v.inertia),v.position.x=c.x+(v.position.x-c.x)*h,v.position.y=c.y+(v.position.y-c.y)*d,t.update(v.bounds,v.vertices,i.velocity)}i.parts.length>1&&(i.area=u,i.isStatic||(o.setMass(i,i.density*u),o.setInertia(i,p))),i.circleRadius&&(h===d?i.circleRadius*=h:i.circleRadius=null),g&&o.setInertia(i,1/0)},o.update=function(i,h){h=(typeof h<"u"?h:16.666666666666668)*i.timeScale;var d=h*h,c=o._timeCorrection?h/(i.deltaTime||h):1,u=1-i.frictionAir*(h/a._baseDelta),p=(i.position.x-i.positionPrev.x)*c,g=(i.position.y-i.positionPrev.y)*c;i.velocity.x=p*u+i.force.x/i.mass*d,i.velocity.y=g*u+i.force.y/i.mass*d,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.deltaTime=h,i.angularVelocity=(i.angle-i.anglePrev)*u*c+i.torque/i.inertia*d,i.anglePrev=i.angle,i.angle+=i.angularVelocity,i.speed=n.magnitude(i.velocity),i.angularSpeed=Math.abs(i.angularVelocity);for(var y=0;y<i.parts.length;y++){var v=i.parts[y];m.translate(v.vertices,i.velocity),y>0&&(v.position.x+=i.velocity.x,v.position.y+=i.velocity.y),i.angularVelocity!==0&&(m.rotate(v.vertices,i.angularVelocity,i.position),s.rotate(v.axes,i.angularVelocity),y>0&&n.rotateAbout(v.position,i.angularVelocity,i.position,v.position)),t.update(v.bounds,v.vertices,i.velocity)}},o.updateVelocities=function(i){var h=o._baseDelta/i.deltaTime,d=i.velocity;d.x=(i.position.x-i.positionPrev.x)*h,d.y=(i.position.y-i.positionPrev.y)*h,i.speed=Math.sqrt(d.x*d.x+d.y*d.y),i.angularVelocity=(i.angle-i.anglePrev)*h,i.angularSpeed=Math.abs(i.angularVelocity)},o.applyForce=function(i,h,d){var c={x:h.x-i.position.x,y:h.y-i.position.y};i.force.x+=d.x,i.force.y+=d.y,i.torque+=c.x*d.y-c.y*d.x},o._totalProperties=function(i){for(var h={mass:0,area:0,inertia:0,centre:{x:0,y:0}},d=i.parts.length===1?0:1;d<i.parts.length;d++){var c=i.parts[d],u=c.mass!==1/0?c.mass:1;h.mass+=u,h.area+=c.area,h.inertia+=c.inertia,h.centre=n.add(h.centre,n.mult(c.position,u))}return h.centre=n.div(h.centre,h.mass),h},o.wrap=function(i,h){var d=t.wrap(i.bounds,h);return d&&o.translate(i,d),d}})()}),69351:((f,x,e)=>{var o={};f.exports=o;var m=e(35810),n=e(53402),r=e(15647),a=e(22562);(function(){o.create=function(t){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},t)},o.setModified=function(t,s,l,i){if(m.trigger(t,"compositeModified",t),t.isModified=s,s&&t.cache&&(t.cache.allBodies=null,t.cache.allConstraints=null,t.cache.allComposites=null),l&&t.parent&&o.setModified(t.parent,s,l,i),i)for(var h=0;h<t.composites.length;h++){var d=t.composites[h];o.setModified(d,s,l,i)}},o.add=function(t,s){var l=[].concat(s);m.trigger(t,"beforeAdd",{object:s});for(var i=0;i<l.length;i++){var h=l[i];switch(h.type){case"body":if(h.parent!==h){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(t,h);break;case"constraint":o.addConstraint(t,h);break;case"composite":o.addComposite(t,h);break;case"mouseConstraint":o.addConstraint(t,h.constraint);break}}return m.trigger(t,"afterAdd",{object:s}),t},o.remove=function(t,s,l){var i=[].concat(s);m.trigger(t,"beforeRemove",{object:s});for(var h=0;h<i.length;h++){var d=i[h];switch(d.type){case"body":o.removeBody(t,d,l);break;case"constraint":o.removeConstraint(t,d,l);break;case"composite":o.removeComposite(t,d,l);break;case"mouseConstraint":o.removeConstraint(t,d.constraint);break}}return m.trigger(t,"afterRemove",{object:s}),t},o.addComposite=function(t,s){return t.composites.push(s),s.parent=t,o.setModified(t,!0,!0,!1),t},o.removeComposite=function(t,s,l){var i=n.indexOf(t.composites,s);if(i!==-1){var h=o.allBodies(s);o.removeCompositeAt(t,i);for(var d=0;d<h.length;d++)h[d].sleepCounter=0}if(l)for(var d=0;d<t.composites.length;d++)o.removeComposite(t.composites[d],s,!0);return t},o.removeCompositeAt=function(t,s){return t.composites.splice(s,1),o.setModified(t,!0,!0,!1),t},o.addBody=function(t,s){return t.bodies.push(s),o.setModified(t,!0,!0,!1),t},o.removeBody=function(t,s,l){var i=n.indexOf(t.bodies,s);if(i!==-1&&(o.removeBodyAt(t,i),s.sleepCounter=0),l)for(var h=0;h<t.composites.length;h++)o.removeBody(t.composites[h],s,!0);return t},o.removeBodyAt=function(t,s){return t.bodies.splice(s,1),o.setModified(t,!0,!0,!1),t},o.addConstraint=function(t,s){return t.constraints.push(s),o.setModified(t,!0,!0,!1),t},o.removeConstraint=function(t,s,l){var i=n.indexOf(t.constraints,s);if(i!==-1&&o.removeConstraintAt(t,i),l)for(var h=0;h<t.composites.length;h++)o.removeConstraint(t.composites[h],s,!0);return t},o.removeConstraintAt=function(t,s){return t.constraints.splice(s,1),o.setModified(t,!0,!0,!1),t},o.clear=function(t,s,l){if(l)for(var i=0;i<t.composites.length;i++)o.clear(t.composites[i],s,!0);return s?t.bodies=t.bodies.filter(function(h){return h.isStatic}):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,o.setModified(t,!0,!0,!1),t},o.allBodies=function(t){if(t.cache&&t.cache.allBodies)return t.cache.allBodies;for(var s=[].concat(t.bodies),l=0;l<t.composites.length;l++)s=s.concat(o.allBodies(t.composites[l]));return t.cache&&(t.cache.allBodies=s),s},o.allConstraints=function(t){if(t.cache&&t.cache.allConstraints)return t.cache.allConstraints;for(var s=[].concat(t.constraints),l=0;l<t.composites.length;l++)s=s.concat(o.allConstraints(t.composites[l]));return t.cache&&(t.cache.allConstraints=s),s},o.allComposites=function(t){if(t.cache&&t.cache.allComposites)return t.cache.allComposites;for(var s=[].concat(t.composites),l=0;l<t.composites.length;l++)s=s.concat(o.allComposites(t.composites[l]));return t.cache&&(t.cache.allComposites=s),s},o.get=function(t,s,l){var i,h;switch(l){case"body":i=o.allBodies(t);break;case"constraint":i=o.allConstraints(t);break;case"composite":i=o.allComposites(t).concat(t);break}return i?(h=i.filter(function(d){return d.id.toString()===s.toString()}),h.length===0?null:h[0]):null},o.move=function(t,s,l){return o.remove(t,s),o.add(l,s),t},o.rebase=function(t){for(var s=o.allBodies(t).concat(o.allConstraints(t)).concat(o.allComposites(t)),l=0;l<s.length;l++)s[l].id=n.nextId();return t},o.translate=function(t,s,l){for(var i=l?o.allBodies(t):t.bodies,h=0;h<i.length;h++)a.translate(i[h],s);return t},o.rotate=function(t,s,l,i){for(var h=Math.cos(s),d=Math.sin(s),c=i?o.allBodies(t):t.bodies,u=0;u<c.length;u++){var p=c[u],g=p.position.x-l.x,y=p.position.y-l.y;a.setPosition(p,{x:l.x+(g*h-y*d),y:l.y+(g*d+y*h)}),a.rotate(p,s)}return t},o.scale=function(t,s,l,i,h){for(var d=h?o.allBodies(t):t.bodies,c=0;c<d.length;c++){var u=d[c],p=u.position.x-i.x,g=u.position.y-i.y;a.setPosition(u,{x:i.x+p*s,y:i.y+g*l}),a.scale(u,s,l)}return t},o.bounds=function(t){for(var s=o.allBodies(t),l=[],i=0;i<s.length;i+=1){var h=s[i];l.push(h.bounds.min,h.bounds.max)}return r.create(l)},o.wrap=function(t,s){var l=r.wrap(o.bounds(t),s);return l&&o.translate(t,l),l}})()}),4372:((f,x,e)=>{var o={};f.exports=o;var m=e(69351);(function(){o.create=m.create,o.add=m.add,o.remove=m.remove,o.clear=m.clear,o.addComposite=m.addComposite,o.addBody=m.addBody,o.addConstraint=m.addConstraint})()}),52284:((f,x,e)=>{var o={};f.exports=o;var m=e(41598),n=e(4506);(function(){var r=[],a={overlap:0,axis:null},t={overlap:0,axis:null};o.create=function(s,l){return{pair:null,collided:!1,bodyA:s,bodyB:l,parentA:s.parent,parentB:l.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},o.collides=function(s,l,i){if(o._overlapAxes(a,s.vertices,l.vertices,s.axes),a.overlap<=0||(o._overlapAxes(t,l.vertices,s.vertices,l.axes),t.overlap<=0))return null;var h=i&&i.table[n.id(s,l)],d;h?d=h.collision:(d=o.create(s,l),d.collided=!0,d.bodyA=s.id<l.id?s:l,d.bodyB=s.id<l.id?l:s,d.parentA=d.bodyA.parent,d.parentB=d.bodyB.parent),s=d.bodyA,l=d.bodyB;var c;a.overlap<t.overlap?c=a:c=t;var u=d.normal,p=d.tangent,g=d.penetration,y=d.supports,v=c.overlap,S=c.axis,w=S.x,T=S.y,C=l.position.x-s.position.x,M=l.position.y-s.position.y;w*C+T*M>=0&&(w=-w,T=-T),u.x=w,u.y=T,p.x=-T,p.y=w,g.x=w*v,g.y=T*v,d.depth=v;var E=o._findSupports(s,l,u,1),P=0;if(m.contains(s.vertices,E[0])&&(y[P++]=E[0]),m.contains(s.vertices,E[1])&&(y[P++]=E[1]),P<2){var A=o._findSupports(l,s,u,-1);m.contains(l.vertices,A[0])&&(y[P++]=A[0]),P<2&&m.contains(l.vertices,A[1])&&(y[P++]=A[1])}return P===0&&(y[P++]=E[0]),d.supportCount=P,d},o._overlapAxes=function(s,l,i,h){var d=l.length,c=i.length,u=l[0].x,p=l[0].y,g=i[0].x,y=i[0].y,v=h.length,S=Number.MAX_VALUE,w=0,T,C,M,E,P,A;for(P=0;P<v;P++){var D=h[P],W=D.x,V=D.y,K=u*W+p*V,X=g*W+y*V,R=K,H=X;for(A=1;A<d;A+=1)E=l[A].x*W+l[A].y*V,E>R?R=E:E<K&&(K=E);for(A=1;A<c;A+=1)E=i[A].x*W+i[A].y*V,E>H?H=E:E<X&&(X=E);if(C=R-X,M=H-K,T=C<M?C:M,T<S&&(S=T,w=P,T<=0))break}s.axis=h[w],s.overlap=S},o._findSupports=function(s,l,i,h){var d=l.vertices,c=d.length,u=s.position.x,p=s.position.y,g=i.x*h,y=i.y*h,v=d[0],S=v,w=g*(u-S.x)+y*(p-S.y),T,C,M;for(M=1;M<c;M+=1)S=d[M],C=g*(u-S.x)+y*(p-S.y),C<w&&(w=C,v=S);return T=d[(c+v.index-1)%c],w=g*(u-T.x)+y*(p-T.y),S=d[(v.index+1)%c],g*(u-S.x)+y*(p-S.y)<w?(r[0]=v,r[1]=S,r):(r[0]=v,r[1]=T,r)}})()}),43424:(f=>{var x={};f.exports=x,(function(){x.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}})()}),81388:((f,x,e)=>{var o={};f.exports=o;var m=e(53402),n=e(52284);(function(){o.create=function(r){var a={bodies:[],collisions:[],pairs:null};return m.extend(a,r)},o.setBodies=function(r,a){r.bodies=a.slice(0)},o.clear=function(r){r.bodies=[],r.collisions=[]},o.collisions=function(r){var a=r.pairs,t=r.bodies,s=t.length,l=o.canCollide,i=n.collides,h=r.collisions,d=0,c,u;for(t.sort(o._compareBoundsX),c=0;c<s;c++){var p=t[c],g=p.bounds,y=p.bounds.max.x,v=p.bounds.max.y,S=p.bounds.min.y,w=p.isStatic||p.isSleeping,T=p.parts.length,C=T===1;for(u=c+1;u<s;u++){var M=t[u],E=M.bounds;if(E.min.x>y)break;if(!(v<E.min.y||S>E.max.y)&&!(w&&(M.isStatic||M.isSleeping))&&l(p.collisionFilter,M.collisionFilter)){var P=M.parts.length;if(C&&P===1){var A=i(p,M,a);A&&(h[d++]=A)}else for(var D=T>1?1:0,W=P>1?1:0,V=D;V<T;V++)for(var K=p.parts[V],g=K.bounds,X=W;X<P;X++){var R=M.parts[X],E=R.bounds;if(!(g.min.x>E.max.x||g.max.x<E.min.x||g.max.y<E.min.y||g.min.y>E.max.y)){var A=i(K,R,a);A&&(h[d++]=A)}}}}}return h.length!==d&&(h.length=d),h},o.canCollide=function(r,a){return r.group===a.group&&r.group!==0?r.group>0:(r.mask&a.category)!==0&&(a.mask&r.category)!==0},o._compareBoundsX=function(r,a){return r.bounds.min.x-a.bounds.min.x}})()}),4506:((f,x,e)=>{var o={};f.exports=o;var m=e(43424);(function(){o.create=function(n,r){var a=n.bodyA,t=n.bodyB,s={id:o.id(a,t),bodyA:a,bodyB:t,collision:n,contacts:[m.create(),m.create()],contactCount:0,separation:0,isActive:!0,isSensor:a.isSensor||t.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(s,n,r),s},o.update=function(n,r,a){var t=r.supports,s=r.supportCount,l=n.contacts,i=r.parentA,h=r.parentB;n.isActive=!0,n.timeUpdated=a,n.collision=r,n.separation=r.depth,n.inverseMass=i.inverseMass+h.inverseMass,n.friction=i.friction<h.friction?i.friction:h.friction,n.frictionStatic=i.frictionStatic>h.frictionStatic?i.frictionStatic:h.frictionStatic,n.restitution=i.restitution>h.restitution?i.restitution:h.restitution,n.slop=i.slop>h.slop?i.slop:h.slop,n.contactCount=s,r.pair=n;var d=t[0],c=l[0],u=t[1],p=l[1];(p.vertex===d||c.vertex===u)&&(l[1]=c,l[0]=c=p,p=l[1]),c.vertex=d,p.vertex=u},o.setActive=function(n,r,a){r?(n.isActive=!0,n.timeUpdated=a):(n.isActive=!1,n.contactCount=0)},o.id=function(n,r){return n.id<r.id?n.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+n.id.toString(36)}})()}),99561:((f,x,e)=>{var o={};f.exports=o;var m=e(4506),n=e(53402);(function(){o.create=function(r){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},o.update=function(r,a,t){var s=m.update,l=m.create,i=m.setActive,h=r.table,d=r.list,c=d.length,u=c,p=r.collisionStart,g=r.collisionEnd,y=r.collisionActive,v=a.length,S=0,w=0,T=0,C,M,E;for(E=0;E<v;E++)C=a[E],M=C.pair,M?(M.isActive&&(y[T++]=M),s(M,C,t)):(M=l(C,t),h[M.id]=M,p[S++]=M,d[u++]=M);for(u=0,c=d.length,E=0;E<c;E++)M=d[E],M.timeUpdated>=t?d[u++]=M:(i(M,!1,t),M.collision.bodyA.sleepCounter>0&&M.collision.bodyB.sleepCounter>0?d[u++]=M:(g[w++]=M,delete h[M.id]));d.length!==u&&(d.length=u),p.length!==S&&(p.length=S),g.length!==w&&(g.length=w),y.length!==T&&(y.length=T)},o.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()}),73296:((f,x,e)=>{var o={};f.exports=o;var m=e(31725),n=e(52284),r=e(15647),a=e(66280),t=e(41598);(function(){o.collides=function(s,l){for(var i=[],h=l.length,d=s.bounds,c=n.collides,u=r.overlaps,p=0;p<h;p++){var g=l[p],y=g.parts.length,v=y===1?0:1;if(s!==g&&u(g.bounds,d))for(var S=v;S<y;S++){var w=g.parts[S];if(u(w.bounds,d)){var T=c(w,s);if(T){i.push(T);break}}}}return i},o.ray=function(s,l,i,h){h=h||1e-100;for(var d=m.angle(l,i),c=m.magnitude(m.sub(l,i)),u=(i.x+l.x)*.5,p=(i.y+l.y)*.5,g=a.rectangle(u,p,c,h,{angle:d}),y=o.collides(g,s),v=0;v<y.length;v+=1){var S=y[v];S.body=S.bodyB=S.bodyA}return y},o.region=function(s,l,i){for(var h=[],d=0;d<s.length;d++){var c=s[d],u=r.overlaps(c.bounds,l);(u&&!i||!u&&i)&&h.push(c)}return h},o.point=function(s,l){for(var i=[],h=0;h<s.length;h++){var d=s[h];if(r.contains(d.bounds,l))for(var c=d.parts.length===1?0:1;c<d.parts.length;c++){var u=d.parts[c];if(r.contains(u.bounds,l)&&t.contains(u.vertices,l)){i.push(d);break}}}return i}})()}),66272:((f,x,e)=>{var o={};f.exports=o;var m=e(41598),n=e(53402),r=e(15647);(function(){o._restingThresh=2,o._restingThreshTangent=Math.sqrt(6),o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o._frictionMaxStatic=Number.MAX_VALUE,o.preSolvePosition=function(a){var t,s,l,i=a.length;for(t=0;t<i;t++)s=a[t],s.isActive&&(l=s.contactCount,s.collision.parentA.totalContacts+=l,s.collision.parentB.totalContacts+=l)},o.solvePosition=function(a,t,s){var l,i,h,d,c,u,p,g,y=o._positionDampen*(s||1),v=n.clamp(t/n._baseDelta,0,1),S=a.length;for(l=0;l<S;l++)i=a[l],!(!i.isActive||i.isSensor)&&(h=i.collision,d=h.parentA,c=h.parentB,u=h.normal,i.separation=h.depth+u.x*(c.positionImpulse.x-d.positionImpulse.x)+u.y*(c.positionImpulse.y-d.positionImpulse.y));for(l=0;l<S;l++)i=a[l],!(!i.isActive||i.isSensor)&&(h=i.collision,d=h.parentA,c=h.parentB,u=h.normal,g=i.separation-i.slop*v,(d.isStatic||c.isStatic)&&(g*=2),d.isStatic||d.isSleeping||(p=y/d.totalContacts,d.positionImpulse.x+=u.x*g*p,d.positionImpulse.y+=u.y*g*p),c.isStatic||c.isSleeping||(p=y/c.totalContacts,c.positionImpulse.x-=u.x*g*p,c.positionImpulse.y-=u.y*g*p))},o.postSolvePosition=function(a){for(var t=o._positionWarming,s=a.length,l=m.translate,i=r.update,h=0;h<s;h++){var d=a[h],c=d.positionImpulse,u=c.x,p=c.y,g=d.velocity;if(d.totalContacts=0,u!==0||p!==0){for(var y=0;y<d.parts.length;y++){var v=d.parts[y];l(v.vertices,c),i(v.bounds,v.vertices,g),v.position.x+=u,v.position.y+=p}d.positionPrev.x+=u,d.positionPrev.y+=p,u*g.x+p*g.y<0?(c.x=0,c.y=0):(c.x*=t,c.y*=t)}}},o.preSolveVelocity=function(a){var t=a.length,s,l;for(s=0;s<t;s++){var i=a[s];if(!(!i.isActive||i.isSensor)){var h=i.contacts,d=i.contactCount,c=i.collision,u=c.parentA,p=c.parentB,g=c.normal,y=c.tangent;for(l=0;l<d;l++){var v=h[l],S=v.vertex,w=v.normalImpulse,T=v.tangentImpulse;if(w!==0||T!==0){var C=g.x*w+y.x*T,M=g.y*w+y.y*T;u.isStatic||u.isSleeping||(u.positionPrev.x+=C*u.inverseMass,u.positionPrev.y+=M*u.inverseMass,u.anglePrev+=u.inverseInertia*((S.x-u.position.x)*M-(S.y-u.position.y)*C)),p.isStatic||p.isSleeping||(p.positionPrev.x-=C*p.inverseMass,p.positionPrev.y-=M*p.inverseMass,p.anglePrev-=p.inverseInertia*((S.x-p.position.x)*M-(S.y-p.position.y)*C))}}}}},o.solveVelocity=function(a,t){var s=t/n._baseDelta,l=s*s,i=l*s,h=-o._restingThresh*s,d=o._restingThreshTangent,c=o._frictionNormalMultiplier*s,u=o._frictionMaxStatic,p=a.length,g,y,v,S;for(v=0;v<p;v++){var w=a[v];if(!(!w.isActive||w.isSensor)){var T=w.collision,C=T.parentA,M=T.parentB,E=T.normal.x,P=T.normal.y,A=T.tangent.x,D=T.tangent.y,W=w.inverseMass,V=w.friction*w.frictionStatic*c,K=w.contacts,X=w.contactCount,R=1/X,H=C.position.x-C.positionPrev.x,L=C.position.y-C.positionPrev.y,N=C.angle-C.anglePrev,z=M.position.x-M.positionPrev.x,U=M.position.y-M.positionPrev.y,Y=M.angle-M.anglePrev;for(S=0;S<X;S++){var $=K[S],Z=$.vertex,Q=Z.x-C.position.x,q=Z.y-C.position.y,j=Z.x-M.position.x,_=Z.y-M.position.y,te=H-q*N,se=L+Q*N,ie=z-_*Y,ne=U+j*Y,he=te-ie,ue=se-ne,ae=E*he+P*ue,oe=A*he+D*ue,le=w.separation+ae,fe=Math.min(le,1);fe=le<0?0:fe;var de=fe*V;oe<-de||oe>de?(y=oe>0?oe:-oe,g=w.friction*(oe>0?1:-1)*i,g<-y?g=-y:g>y&&(g=y)):(g=oe,y=u);var me=Q*P-q*E,pe=j*P-_*E,ve=R/(W+C.inverseInertia*me*me+M.inverseInertia*pe*pe),we=(1+w.restitution)*ae*ve;if(g*=ve,ae<h)$.normalImpulse=0;else{var Ae=$.normalImpulse;$.normalImpulse+=we,$.normalImpulse>0&&($.normalImpulse=0),we=$.normalImpulse-Ae}if(oe<-d||oe>d)$.tangentImpulse=0;else{var Se=$.tangentImpulse;$.tangentImpulse+=g,$.tangentImpulse<-y&&($.tangentImpulse=-y),$.tangentImpulse>y&&($.tangentImpulse=y),g=$.tangentImpulse-Se}var Ce=E*we+A*g,Ee=P*we+D*g;C.isStatic||C.isSleeping||(C.positionPrev.x+=Ce*C.inverseMass,C.positionPrev.y+=Ee*C.inverseMass,C.anglePrev+=(Q*Ee-q*Ce)*C.inverseInertia),M.isStatic||M.isSleeping||(M.positionPrev.x-=Ce*M.inverseMass,M.positionPrev.y-=Ee*M.inverseMass,M.anglePrev-=(j*Ee-_*Ce)*M.inverseInertia)}}}}})()}),48140:((f,x,e)=>{var o={};f.exports=o;var m=e(41598),n=e(31725),r=e(53614),a=e(15647),t=e(66615),s=e(53402);(function(){o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(l){var i=l;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var h=i.bodyA?n.add(i.bodyA.position,i.pointA):i.pointA,d=i.bodyB?n.add(i.bodyB.position,i.pointB):i.pointB,c=n.magnitude(n.sub(h,d));i.length=typeof i.length<"u"?i.length:c,i.id=i.id||s.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var u={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return i.length===0&&i.stiffness>.1?(u.type="pin",u.anchors=!1):i.stiffness<.9&&(u.type="spring"),i.render=s.extend(u,i.render),i},o.preSolveAll=function(l){for(var i=0;i<l.length;i+=1){var h=l[i],d=h.constraintImpulse;h.isStatic||d.x===0&&d.y===0&&d.angle===0||(h.position.x+=d.x,h.position.y+=d.y,h.angle+=d.angle)}},o.solveAll=function(l,i){for(var h=s.clamp(i/s._baseDelta,0,1),d=0;d<l.length;d+=1){var c=l[d],u=!c.bodyA||c.bodyA&&c.bodyA.isStatic,p=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(u||p)&&o.solve(l[d],h)}for(d=0;d<l.length;d+=1)c=l[d],u=!c.bodyA||c.bodyA&&c.bodyA.isStatic,p=!c.bodyB||c.bodyB&&c.bodyB.isStatic,!u&&!p&&o.solve(l[d],h)},o.solve=function(l,i){var h=l.bodyA,d=l.bodyB,c=l.pointA,u=l.pointB;if(!(!h&&!d)){h&&!h.isStatic&&(n.rotate(c,h.angle-l.angleA,c),l.angleA=h.angle),d&&!d.isStatic&&(n.rotate(u,d.angle-l.angleB,u),l.angleB=d.angle);var p=c,g=u;if(h&&(p=n.add(h.position,c)),d&&(g=n.add(d.position,u)),!(!p||!g)){var y=n.sub(p,g),v=n.magnitude(y);v<o._minLength&&(v=o._minLength);var S=(v-l.length)/v,w=l.stiffness>=1||l.length===0,T=w?l.stiffness*i:l.stiffness*i*i,C=l.damping*i,M=n.mult(y,S*T),E=(h?h.inverseMass:0)+(d?d.inverseMass:0),P=(h?h.inverseInertia:0)+(d?d.inverseInertia:0),A=E+P,D,W,V,K,X;if(C>0){var R=n.create();V=n.div(y,v),X=n.sub(d&&n.sub(d.position,d.positionPrev)||R,h&&n.sub(h.position,h.positionPrev)||R),K=n.dot(V,X)}h&&!h.isStatic&&(W=h.inverseMass/E,h.constraintImpulse.x-=M.x*W,h.constraintImpulse.y-=M.y*W,h.position.x-=M.x*W,h.position.y-=M.y*W,C>0&&(h.positionPrev.x-=C*V.x*K*W,h.positionPrev.y-=C*V.y*K*W),D=n.cross(c,M)/A*o._torqueDampen*h.inverseInertia*(1-l.angularStiffness),h.constraintImpulse.angle-=D,h.angle-=D),d&&!d.isStatic&&(W=d.inverseMass/E,d.constraintImpulse.x+=M.x*W,d.constraintImpulse.y+=M.y*W,d.position.x+=M.x*W,d.position.y+=M.y*W,C>0&&(d.positionPrev.x+=C*V.x*K*W,d.positionPrev.y+=C*V.y*K*W),D=n.cross(u,M)/A*o._torqueDampen*d.inverseInertia*(1-l.angularStiffness),d.constraintImpulse.angle+=D,d.angle+=D)}}},o.postSolveAll=function(l){for(var i=0;i<l.length;i++){var h=l[i],d=h.constraintImpulse;if(!(h.isStatic||d.x===0&&d.y===0&&d.angle===0)){r.set(h,!1);for(var c=0;c<h.parts.length;c++){var u=h.parts[c];m.translate(u.vertices,d),c>0&&(u.position.x+=d.x,u.position.y+=d.y),d.angle!==0&&(m.rotate(u.vertices,d.angle,h.position),t.rotate(u.axes,d.angle),c>0&&n.rotateAbout(u.position,d.angle,h.position,u.position)),a.update(u.bounds,u.vertices,h.velocity)}d.angle*=o._warming,d.x*=o._warming,d.y*=o._warming}}},o.pointAWorld=function(l){return{x:(l.bodyA?l.bodyA.position.x:0)+(l.pointA?l.pointA.x:0),y:(l.bodyA?l.bodyA.position.y:0)+(l.pointA?l.pointA.y:0)}},o.pointBWorld=function(l){return{x:(l.bodyB?l.bodyB.position.x:0)+(l.pointB?l.pointB.x:0),y:(l.bodyB?l.bodyB.position.y:0)+(l.pointB?l.pointB.y:0)}},o.currentLength=function(l){var i=(l.bodyA?l.bodyA.position.x:0)+(l.pointA?l.pointA.x:0),h=(l.bodyA?l.bodyA.position.y:0)+(l.pointA?l.pointA.y:0),d=(l.bodyB?l.bodyB.position.x:0)+(l.pointB?l.pointB.x:0),c=(l.bodyB?l.bodyB.position.y:0)+(l.pointB?l.pointB.y:0),u=i-d,p=h-c;return Math.sqrt(u*u+p*p)}})()}),53402:((f,x,e)=>{var o={};f.exports=o,(function(){o._baseDelta=16.666666666666668,o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o._warnedOnce={},o._decomp=null,o.extend=function(n,r){var a,t;typeof r=="boolean"?(a=2,t=r):(a=1,t=!0);for(var s=a;s<arguments.length;s++){var l=arguments[s];if(l)for(var i in l)t&&l[i]&&l[i].constructor===Object&&(!n[i]||n[i].constructor===Object)?(n[i]=n[i]||{},o.extend(n[i],t,l[i])):n[i]=l[i]}return n},o.clone=function(n,r){return o.extend({},r,n)},o.keys=function(n){if(Object.keys)return Object.keys(n);var r=[];for(var a in n)r.push(a);return r},o.values=function(n){var r=[];if(Object.keys){for(var a=Object.keys(n),t=0;t<a.length;t++)r.push(n[a[t]]);return r}for(var s in n)r.push(n[s]);return r},o.get=function(n,r,a,t){r=r.split(".").slice(a,t);for(var s=0;s<r.length;s+=1)n=n[r[s]];return n},o.set=function(n,r,a,t,s){var l=r.split(".").slice(t,s);return o.get(n,r,0,-1)[l[l.length-1]]=a,a},o.shuffle=function(n){for(var r=n.length-1;r>0;r--){var a=Math.floor(o.random()*(r+1)),t=n[r];n[r]=n[a],n[a]=t}return n},o.choose=function(n){return n[Math.floor(o.random()*n.length)]},o.isElement=function(n){return typeof HTMLElement<"u"?n instanceof HTMLElement:!!(n&&n.nodeType&&n.nodeName)},o.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"},o.isFunction=function(n){return typeof n=="function"},o.isPlainObject=function(n){return typeof n=="object"&&n.constructor===Object},o.isString=function(n){return toString.call(n)==="[object String]"},o.clamp=function(n,r,a){return n<r?r:n>a?a:n},o.sign=function(n){return n<0?-1:1},o.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-o._nowStartTime},o.random=function(n,r){return n=typeof n<"u"?n:0,r=typeof r<"u"?r:1,n+m()*(r-n)};var m=function(){return o._seed=(o._seed*9301+49297)%233280,o._seed/233280};o.colorToNumber=function(n){return n=n.replace("#",""),n.length==3&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),parseInt(n,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warnOnce=function(){var n=Array.prototype.slice.call(arguments).join(" ");o._warnedOnce[n]||(o.warn(n),o._warnedOnce[n]=!0)},o.deprecated=function(n,r,a){n[r]=o.chain(function(){o.warnOnce(" deprecated ",a)},n[r])},o.nextId=function(){return o._nextId++},o.indexOf=function(n,r){if(n.indexOf)return n.indexOf(r);for(var a=0;a<n.length;a++)if(n[a]===r)return a;return-1},o.map=function(n,r){if(n.map)return n.map(r);for(var a=[],t=0;t<n.length;t+=1)a.push(r(n[t]));return a},o.topologicalSort=function(n){var r=[],a=[],t=[];for(var s in n)!a[s]&&!t[s]&&o._topologicalSort(s,a,t,n,r);return r},o._topologicalSort=function(n,r,a,t,s){var l=t[n]||[];a[n]=!0;for(var i=0;i<l.length;i+=1){var h=l[i];a[h]||r[h]||o._topologicalSort(h,r,a,t,s)}a[n]=!1,r[n]=!0,s.push(n)},o.chain=function(){for(var n=[],r=0;r<arguments.length;r+=1){var a=arguments[r];a._chained?n.push.apply(n,a._chained):n.push(a)}var t=function(){for(var s,l=new Array(arguments.length),i=0,h=arguments.length;i<h;i++)l[i]=arguments[i];for(i=0;i<n.length;i+=1){var d=n[i].apply(s,l);typeof d<"u"&&(s=d)}return s};return t._chained=n,t},o.chainPathBefore=function(n,r,a){return o.set(n,r,o.chain(a,o.get(n,r)))},o.chainPathAfter=function(n,r,a){return o.set(n,r,o.chain(o.get(n,r),a))},o.setDecomp=function(n){o._decomp=n},o.getDecomp=function(){var n=o._decomp;try{!n&&typeof window<"u"&&(n=window.decomp),!n&&typeof e.g<"u"&&(n=e.g.decomp)}catch{n=null}return n}})()}),48413:((f,x,e)=>{var o={};f.exports=o;var m=e(53614),n=e(66272),r=e(81388),a=e(99561),t=e(35810),s=e(69351),l=e(48140),i=e(53402),h=e(22562);(function(){o._deltaMax=16.666666666666668,o.create=function(d){d=d||{};var c={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},u=i.extend(c,d);return u.world=d.world||s.create({label:"World"}),u.pairs=d.pairs||a.create(),u.detector=d.detector||r.create(),u.detector.pairs=u.pairs,u.grid={buckets:[]},u.world.gravity=u.gravity,u.broadphase=u.grid,u.metrics={},u},o.update=function(d,c){var u=i.now(),p=d.world,g=d.detector,y=d.pairs,v=d.timing,S=v.timestamp,w;c>o._deltaMax&&i.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",o._deltaMax.toFixed(3),"ms."),c=typeof c<"u"?c:i._baseDelta,c*=v.timeScale,v.timestamp+=c,v.lastDelta=c;var T={timestamp:v.timestamp,delta:c};t.trigger(d,"beforeUpdate",T);var C=s.allBodies(p),M=s.allConstraints(p),E=s.allComposites(p);for(p.isModified&&(r.setBodies(g,C),s.setModified(p,!1,!1,!0)),d.enableSleeping&&m.update(C,c),o._bodiesApplyGravity(C,d.gravity),o.wrap(C,E),o.attractors(C),c>0&&o._bodiesUpdate(C,c),t.trigger(d,"beforeSolve",T),l.preSolveAll(C),w=0;w<d.constraintIterations;w++)l.solveAll(M,c);l.postSolveAll(C);var P=r.collisions(g);a.update(y,P,S),d.enableSleeping&&m.afterCollisions(y.list),y.collisionStart.length>0&&t.trigger(d,"collisionStart",{pairs:y.collisionStart,timestamp:v.timestamp,delta:c});var A=i.clamp(20/d.positionIterations,0,1);for(n.preSolvePosition(y.list),w=0;w<d.positionIterations;w++)n.solvePosition(y.list,c,A);for(n.postSolvePosition(C),l.preSolveAll(C),w=0;w<d.constraintIterations;w++)l.solveAll(M,c);for(l.postSolveAll(C),n.preSolveVelocity(y.list),w=0;w<d.velocityIterations;w++)n.solveVelocity(y.list,c);return o._bodiesUpdateVelocities(C),y.collisionActive.length>0&&t.trigger(d,"collisionActive",{pairs:y.collisionActive,timestamp:v.timestamp,delta:c}),y.collisionEnd.length>0&&t.trigger(d,"collisionEnd",{pairs:y.collisionEnd,timestamp:v.timestamp,delta:c}),o._bodiesClearForces(C),t.trigger(d,"afterUpdate",T),d.timing.lastElapsed=i.now()-u,d},o.merge=function(d,c){if(i.extend(d,c),c.world){d.world=c.world,o.clear(d);for(var u=s.allBodies(d.world),p=0;p<u.length;p++){var g=u[p];m.set(g,!1),g.id=i.nextId()}}},o.clear=function(d){a.clear(d.pairs),r.clear(d.detector)},o._bodiesClearForces=function(d){for(var c=d.length,u=0;u<c;u++){var p=d[u];p.force.x=0,p.force.y=0,p.torque=0}},o._bodiesApplyGravity=function(d,c){var u=typeof c.scale<"u"?c.scale:.001,p=d.length;if(!(c.x===0&&c.y===0||u===0))for(var g=0;g<p;g++){var y=d[g];y.ignoreGravity||y.isStatic||y.isSleeping||(y.force.y+=y.mass*c.y*u,y.force.x+=y.mass*c.x*u)}},o._bodiesUpdate=function(d,c){for(var u=d.length,p=0;p<u;p++){var g=d[p];g.isStatic||g.isSleeping||h.update(g,c)}},o._bodiesUpdateVelocities=function(d){for(var c=d.length,u=0;u<c;u++)h.updateVelocities(d[u])},o.wrap=function(d,c){for(var u=0;u<d.length;u+=1){var p=d[u];p.wrapBounds!==null&&h.wrap(p,p.wrapBounds)}for(u=0;u<c.length;u+=1){var g=c[u];g.wrapBounds!==null&&s.wrap(g,g.wrapBounds)}},o.attractors=function(d){for(var c=0;c<d.length;c++){var u=d[c],p=u.attractors;if(p&&p.length>0)for(var g=0;g<d.length;g++){var y=d[g];if(c!==g)for(var v=0;v<p.length;v++){var S=p[v],w=S;i.isFunction(S)&&(w=S(u,y)),w&&h.applyForce(y,y.position,w)}}}}})()}),35810:((f,x,e)=>{var o={};f.exports=o;var m=e(53402);(function(){o.on=function(n,r,a){for(var t=r.split(" "),s,l=0;l<t.length;l++)s=t[l],n.events=n.events||{},n.events[s]=n.events[s]||[],n.events[s].push(a);return a},o.off=function(n,r,a){if(!r){n.events={};return}typeof r=="function"&&(a=r,r=m.keys(n.events).join(" "));for(var t=r.split(" "),s=0;s<t.length;s++){var l=n.events[t[s]],i=[];if(a&&l)for(var h=0;h<l.length;h++)l[h]!==a&&i.push(l[h]);n.events[t[s]]=i}},o.trigger=function(n,r,a){var t,s,l,i,h=n.events;if(h&&m.keys(h).length>0){a||(a={}),t=r.split(" ");for(var d=0;d<t.length;d++)if(s=t[d],l=h[s],l){i=m.clone(a,!1),i.name=s,i.source=n;for(var c=0;c<l.length;c++)l[c].apply(n,[i])}}}})()}),6790:((f,x,e)=>{var o={};f.exports=o;var m=e(73832),n=e(53402);(function(){o.name="matter-js",o.version="0.20.0",o.uses=[],o.used=[],o.use=function(){m.use(o,Array.prototype.slice.call(arguments))},o.before=function(r,a){return r=r.replace(/^Matter./,""),n.chainPathBefore(o,r,a)},o.after=function(r,a){return r=r.replace(/^Matter./,""),n.chainPathAfter(o,r,a)}})()}),73832:((f,x,e)=>{var o={};f.exports=o;var m=e(53402);(function(){o._registry={},o.register=function(n){if(o.isPlugin(n)||m.warn("Plugin.register:",o.toString(n),"does not implement all required fields."),n.name in o._registry){var r=o._registry[n.name],a=o.versionParse(n.version).number,t=o.versionParse(r.version).number;a>t?(m.warn("Plugin.register:",o.toString(r),"was upgraded to",o.toString(n)),o._registry[n.name]=n):a<t?m.warn("Plugin.register:",o.toString(r),"can not be downgraded to",o.toString(n)):n!==r&&m.warn("Plugin.register:",o.toString(n),"is already registered to different plugin object")}else o._registry[n.name]=n;return n},o.resolve=function(n){return o._registry[o.dependencyParse(n).name]},o.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},o.isPlugin=function(n){return n&&n.name&&n.version&&n.install},o.isUsed=function(n,r){return n.used.indexOf(r)>-1},o.isFor=function(n,r){var a=n.for&&o.dependencyParse(n.for);return!n.for||r.name===a.name&&o.versionSatisfies(r.version,a.range)},o.use=function(n,r){if(n.uses=(n.uses||[]).concat(r||[]),n.uses.length===0){m.warn("Plugin.use:",o.toString(n),"does not specify any dependencies to install.");return}for(var a=o.dependencies(n),t=m.topologicalSort(a),s=[],l=0;l<t.length;l+=1)if(t[l]!==n.name){var i=o.resolve(t[l]);if(!i){s.push(" "+t[l]);continue}o.isUsed(n,i.name)||(o.isFor(i,n)||(m.warn("Plugin.use:",o.toString(i),"is for",i.for,"but installed on",o.toString(n)+"."),i._warned=!0),i.install?i.install(n):(m.warn("Plugin.use:",o.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(s.push(" "+o.toString(i)),delete i._warned):s.push(" "+o.toString(i)),n.used.push(i.name))}s.length>0&&!i.silent&&m.info(s.join("  "))},o.dependencies=function(n,r){var a=o.dependencyParse(n),t=a.name;if(r=r||{},!(t in r)){n=o.resolve(n)||n,r[t]=m.map(n.uses||[],function(l){o.isPlugin(l)&&o.register(l);var i=o.dependencyParse(l),h=o.resolve(l);return h&&!o.versionSatisfies(h.version,i.range)?(m.warn("Plugin.dependencies:",o.toString(h),"does not satisfy",o.toString(i),"used by",o.toString(a)+"."),h._warned=!0,n._warned=!0):h||(m.warn("Plugin.dependencies:",o.toString(l),"used by",o.toString(a),"could not be resolved."),n._warned=!0),i.name});for(var s=0;s<r[t].length;s+=1)o.dependencies(r[t][s],r);return r}},o.dependencyParse=function(n){if(m.isString(n)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(n)||m.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},o.versionParse=function(n){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(n)||m.warn("Plugin.versionParse:",n,"is not a valid version or range.");var a=r.exec(n),t=Number(a[4]),s=Number(a[5]),l=Number(a[6]);return{isRange:!!(a[1]||a[2]),version:a[3],range:n,operator:a[1]||a[2]||"",major:t,minor:s,patch:l,parts:[t,s,l],prerelease:a[7],number:t*1e8+s*1e4+l}},o.versionSatisfies=function(n,r){r=r||"*";var a=o.versionParse(r),t=o.versionParse(n);if(a.isRange){if(a.operator==="*"||n==="*")return!0;if(a.operator===">")return t.number>a.number;if(a.operator===">=")return t.number>=a.number;if(a.operator==="~")return t.major===a.major&&t.minor===a.minor&&t.patch>=a.patch;if(a.operator==="^")return a.major>0?t.major===a.major&&t.number>=a.number:a.minor>0?t.minor===a.minor&&t.patch>=a.patch:t.patch===a.patch}return n===r||n==="*"}})()}),13037:((f,x,e)=>{var o={};f.exports=o;var m=e(35810),n=e(48413),r=e(53402);(function(){o._maxFrameDelta=66.66666666666667,o._frameDeltaFallback=16.666666666666668,o._timeBufferMargin=1.5,o._elapsedNextEstimate=1,o._smoothingLowerBound=.1,o._smoothingUpperBound=.9,o.create=function(t){var s={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},l=r.extend(s,t);return l.fps=0,l},o.run=function(t,s){return t.timeBuffer=o._frameDeltaFallback,(function l(i){t.frameRequestId=o._onNextFrame(t,l),i&&t.enabled&&o.tick(t,s,i)})(),t},o.tick=function(t,s,l){var i=r.now(),h=t.delta,d=0,c=l-t.timeLastTick;if((!c||!t.timeLastTick||c>Math.max(o._maxFrameDelta,t.maxFrameTime))&&(c=t.frameDelta||o._frameDeltaFallback),t.frameDeltaSmoothing){t.frameDeltaHistory.push(c),t.frameDeltaHistory=t.frameDeltaHistory.slice(-t.frameDeltaHistorySize);var u=t.frameDeltaHistory.slice(0).sort(),p=t.frameDeltaHistory.slice(u.length*o._smoothingLowerBound,u.length*o._smoothingUpperBound),g=a(p);c=g||c}t.frameDeltaSnapping&&(c=1e3/Math.round(1e3/c)),t.frameDelta=c,t.timeLastTick=l,t.timeBuffer+=t.frameDelta,t.timeBuffer=r.clamp(t.timeBuffer,0,t.frameDelta+h*o._timeBufferMargin),t.lastUpdatesDeferred=0;var y=t.maxUpdates||Math.ceil(t.maxFrameTime/h),v={timestamp:s.timing.timestamp};m.trigger(t,"beforeTick",v),m.trigger(t,"tick",v);for(var S=r.now();h>0&&t.timeBuffer>=h*o._timeBufferMargin;){m.trigger(t,"beforeUpdate",v),n.update(s,h),m.trigger(t,"afterUpdate",v),t.timeBuffer-=h,d+=1;var w=r.now()-i,T=r.now()-S,C=w+o._elapsedNextEstimate*T/d;if(d>=y||C>t.maxFrameTime){t.lastUpdatesDeferred=Math.round(Math.max(0,t.timeBuffer/h-o._timeBufferMargin));break}}s.timing.lastUpdatesPerFrame=d,m.trigger(t,"afterTick",v),t.frameDeltaHistory.length>=100&&(t.lastUpdatesDeferred&&Math.round(t.frameDelta/h)>y?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):t.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof t.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(t.deltaMin||t.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),t.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},o.stop=function(t){o._cancelNextFrame(t)},o._onNextFrame=function(t,s){if(typeof window<"u"&&window.requestAnimationFrame)t.frameRequestId=window.requestAnimationFrame(s);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return t.frameRequestId},o._cancelNextFrame=function(t){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(t.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var a=function(t){for(var s=0,l=t.length,i=0;i<l;i+=1)s+=t[i];return s/l||0};o._mean=a})()}),53614:((f,x,e)=>{var o={};f.exports=o;var m=e(22562),n=e(35810),r=e(53402);(function(){o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(a,t){for(var s=t/r._baseDelta,l=o._motionSleepThreshold,i=0;i<a.length;i++){var h=a[i],d=m.getSpeed(h),c=m.getAngularSpeed(h),u=d*d+c*c;if(h.force.x!==0||h.force.y!==0){o.set(h,!1);continue}var p=Math.min(h.motion,u),g=Math.max(h.motion,u);h.motion=o._minBias*p+(1-o._minBias)*g,h.sleepThreshold>0&&h.motion<l?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold/s&&o.set(h,!0)):h.sleepCounter>0&&(h.sleepCounter-=1)}},o.afterCollisions=function(a){for(var t=o._motionSleepThreshold,s=0;s<a.length;s++){var l=a[s];if(l.isActive){var i=l.collision,h=i.bodyA.parent,d=i.bodyB.parent;if(!(h.isSleeping&&d.isSleeping||h.isStatic||d.isStatic)&&(h.isSleeping||d.isSleeping)){var c=h.isSleeping&&!h.isStatic?h:d,u=c===h?d:h;!c.isStatic&&u.motion>t&&o.set(c,!1)}}}},o.set=function(a,t){var s=a.isSleeping;t?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,s||n.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,s&&n.trigger(a,"sleepEnd"))}})()}),66280:((f,x,e)=>{var o={};f.exports=o;var m=e(41598),n=e(53402),r=e(22562),a=e(15647),t=e(31725);(function(){o.rectangle=function(s,l,i,h,d){d=d||{};var c={label:"Rectangle Body",position:{x:s,y:l},vertices:m.fromPath("L 0 0 L "+i+" 0 L "+i+" "+h+" L 0 "+h)};if(d.chamfer){var u=d.chamfer;c.vertices=m.chamfer(c.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete d.chamfer}return r.create(n.extend({},c,d))},o.trapezoid=function(s,l,i,h,d,c){c=c||{},d>=1&&n.warn("Bodies.trapezoid: slope parameter must be < 1."),d*=.5;var u=(1-d*2)*i,p=i*d,g=p+u,y=g+p,v;d<.5?v="L 0 0 L "+p+" "+-h+" L "+g+" "+-h+" L "+y+" 0":v="L 0 0 L "+g+" "+-h+" L "+y+" 0";var S={label:"Trapezoid Body",position:{x:s,y:l},vertices:m.fromPath(v)};if(c.chamfer){var w=c.chamfer;S.vertices=m.chamfer(S.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete c.chamfer}return r.create(n.extend({},S,c))},o.circle=function(s,l,i,h,d){h=h||{};var c={label:"Circle Body",circleRadius:i};d=d||25;var u=Math.ceil(Math.max(10,Math.min(d,i)));return u%2===1&&(u+=1),o.polygon(s,l,u,i,n.extend({},c,h))},o.polygon=function(s,l,i,h,d){if(d=d||{},i<3)return o.circle(s,l,h,d);for(var c=2*Math.PI/i,u="",p=c*.5,g=0;g<i;g+=1){var y=p+g*c,v=Math.cos(y)*h,S=Math.sin(y)*h;u+="L "+v.toFixed(3)+" "+S.toFixed(3)+" "}var w={label:"Polygon Body",position:{x:s,y:l},vertices:m.fromPath(u)};if(d.chamfer){var T=d.chamfer;w.vertices=m.chamfer(w.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete d.chamfer}return r.create(n.extend({},w,d))},o.fromVertices=function(s,l,i,h,d,c,u,p){var g=n.getDecomp(),y,v,S,w,T,C,M,E,P,A,D;for(y=!!(g&&g.quickDecomp),h=h||{},S=[],d=typeof d<"u"?d:!1,c=typeof c<"u"?c:.01,u=typeof u<"u"?u:10,p=typeof p<"u"?p:.01,n.isArray(i[0])||(i=[i]),A=0;A<i.length;A+=1)if(C=i[A],w=m.isConvex(C),T=!w,T&&!y&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),w||!y)w?C=m.clockwiseSort(C):C=m.hull(C),S.push({position:{x:s,y:l},vertices:C});else{var W=C.map(function($){return[$.x,$.y]});g.makeCCW(W),c!==!1&&g.removeCollinearPoints(W,c),p!==!1&&g.removeDuplicatePoints&&g.removeDuplicatePoints(W,p);var V=g.quickDecomp(W);for(M=0;M<V.length;M++){var K=V[M],X=K.map(function($){return{x:$[0],y:$[1]}});u>0&&m.area(X)<u||S.push({position:m.centre(X),vertices:X})}}for(M=0;M<S.length;M++)S[M]=r.create(n.extend(S[M],h));if(d){var R=5;for(M=0;M<S.length;M++){var H=S[M];for(E=M+1;E<S.length;E++){var L=S[E];if(a.overlaps(H.bounds,L.bounds)){var N=H.vertices,z=L.vertices;for(P=0;P<H.vertices.length;P++)for(D=0;D<L.vertices.length;D++){var U=t.magnitudeSquared(t.sub(N[(P+1)%N.length],z[D])),Y=t.magnitudeSquared(t.sub(N[P],z[(D+1)%z.length]));U<R&&Y<R&&(N[P].isInternal=!0,z[D].isInternal=!0)}}}}}return S.length>1?(v=r.create(n.extend({parts:S.slice(0)},h)),r.setPosition(v,{x:s,y:l}),v):S[0]},o.flagCoincidentParts=function(s,l){l===void 0&&(l=5);for(var i=0;i<s.length;i++)for(var h=s[i],d=i+1;d<s.length;d++){var c=s[d];if(a.overlaps(h.bounds,c.bounds))for(var u=h.vertices,p=c.vertices,g=0;g<h.vertices.length;g++)for(var y=0;y<c.vertices.length;y++){var v=t.magnitudeSquared(t.sub(u[(g+1)%u.length],p[y])),S=t.magnitudeSquared(t.sub(u[g],p[(y+1)%p.length]));v<l&&S<l&&(u[g].isInternal=!0,p[y].isInternal=!0)}}return s}})()}),74116:((f,x,e)=>{var o={};f.exports=o;var m=e(69351),n=e(48140),r=e(53402),a=e(22562),t=e(66280);(function(){o.stack=function(s,l,i,h,d,c,u){for(var p=m.create({label:"Stack"}),g=s,y=l,v,S=0,w=0;w<h;w++){for(var T=0,C=0;C<i;C++){var M=u(g,y,C,w,v,S);if(M){var E=M.bounds.max.y-M.bounds.min.y,P=M.bounds.max.x-M.bounds.min.x;E>T&&(T=E),a.translate(M,{x:P*.5,y:E*.5}),g=M.bounds.max.x+d,m.addBody(p,M),v=M,S+=1}else g+=d}y+=T+c,g=s}return p},o.chain=function(s,l,i,h,d,c){for(var u=s.bodies,p=1;p<u.length;p++){var g=u[p-1],y=u[p],v=g.bounds.max.y-g.bounds.min.y,S=g.bounds.max.x-g.bounds.min.x,w=y.bounds.max.y-y.bounds.min.y,T=y.bounds.max.x-y.bounds.min.x,C={bodyA:g,pointA:{x:S*l,y:v*i},bodyB:y,pointB:{x:T*h,y:w*d}},M=r.extend(C,c);m.addConstraint(s,n.create(M))}return s.label+=" Chain",s},o.mesh=function(s,l,i,h,d){var c=s.bodies,u,p,g,y,v;for(u=0;u<i;u++){for(p=1;p<l;p++)g=c[p-1+u*l],y=c[p+u*l],m.addConstraint(s,n.create(r.extend({bodyA:g,bodyB:y},d)));if(u>0)for(p=0;p<l;p++)g=c[p+(u-1)*l],y=c[p+u*l],m.addConstraint(s,n.create(r.extend({bodyA:g,bodyB:y},d))),h&&p>0&&(v=c[p-1+(u-1)*l],m.addConstraint(s,n.create(r.extend({bodyA:v,bodyB:y},d)))),h&&p<l-1&&(v=c[p+1+(u-1)*l],m.addConstraint(s,n.create(r.extend({bodyA:v,bodyB:y},d))))}return s.label+=" Mesh",s},o.pyramid=function(s,l,i,h,d,c,u){return o.stack(s,l,i,h,d,c,function(p,g,y,v,S,w){var T=Math.min(h,Math.ceil(i/2)),C=S?S.bounds.max.x-S.bounds.min.x:0;if(!(v>T)){v=T-v;var M=v,E=i-1-v;if(!(y<M||y>E)){w===1&&a.translate(S,{x:(y+(i%2===1?1:-1))*C,y:0});var P=S?y*C:0;return u(s+P+y*d,g,y,v,S,w)}}})},o.newtonsCradle=function(s,l,i,h,d){for(var c=m.create({label:"Newtons Cradle"}),u=0;u<i;u++){var p=1.9,g=t.circle(s+u*(h*p),l+d,h,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=n.create({pointA:{x:s+u*(h*p),y:l},bodyB:g});m.addBody(c,g),m.addConstraint(c,y)}return c},o.car=function(s,l,i,h,d){var c=a.nextGroup(!0),u=20,p=-i*.5+u,g=i*.5-u,y=0,v=m.create({label:"Car"}),S=t.rectangle(s,l,i,h,{collisionFilter:{group:c},chamfer:{radius:h*.5},density:2e-4}),w=t.circle(s+p,l+y,d,{collisionFilter:{group:c},friction:.8}),T=t.circle(s+g,l+y,d,{collisionFilter:{group:c},friction:.8}),C=n.create({bodyB:S,pointB:{x:p,y},bodyA:w,stiffness:1,length:0}),M=n.create({bodyB:S,pointB:{x:g,y},bodyA:T,stiffness:1,length:0});return m.addBody(v,S),m.addBody(v,w),m.addBody(v,T),m.addConstraint(v,C),m.addConstraint(v,M),v},o.softBody=function(s,l,i,h,d,c,u,p,g,y){g=r.extend({inertia:1/0},g),y=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},y);var v=o.stack(s,l,i,h,d,c,function(S,w){return t.circle(S,w,p,g)});return o.mesh(v,i,h,u,y),v.label="Soft Body",v}})()}),66615:((f,x,e)=>{var o={};f.exports=o;var m=e(31725),n=e(53402);(function(){o.fromVertices=function(r){for(var a={},t=0;t<r.length;t++){var s=(t+1)%r.length,l=m.normalise({x:r[s].y-r[t].y,y:r[t].x-r[s].x}),i=l.y===0?1/0:l.x/l.y;i=i.toFixed(3).toString(),a[i]=l}return n.values(a)},o.rotate=function(r,a){if(a!==0)for(var t=Math.cos(a),s=Math.sin(a),l=0;l<r.length;l++){var i=r[l],h;h=i.x*t-i.y*s,i.y=i.x*s+i.y*t,i.x=h}}})()}),15647:(f=>{var x={};f.exports=x,(function(){x.create=function(e){var o={min:{x:0,y:0},max:{x:0,y:0}};return e&&x.update(o,e),o},x.update=function(e,o,m){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<o.length;n++){var r=o[n];r.x>e.max.x&&(e.max.x=r.x),r.x<e.min.x&&(e.min.x=r.x),r.y>e.max.y&&(e.max.y=r.y),r.y<e.min.y&&(e.min.y=r.y)}m&&(m.x>0?e.max.x+=m.x:e.min.x+=m.x,m.y>0?e.max.y+=m.y:e.min.y+=m.y)},x.contains=function(e,o){return o.x>=e.min.x&&o.x<=e.max.x&&o.y>=e.min.y&&o.y<=e.max.y},x.overlaps=function(e,o){return e.min.x<=o.max.x&&e.max.x>=o.min.x&&e.max.y>=o.min.y&&e.min.y<=o.max.y},x.translate=function(e,o){e.min.x+=o.x,e.max.x+=o.x,e.min.y+=o.y,e.max.y+=o.y},x.shift=function(e,o){var m=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=o.x,e.max.x=o.x+m,e.min.y=o.y,e.max.y=o.y+n},x.wrap=function(e,o,m){var n=null,r=null;if(typeof o.min.x<"u"&&typeof o.max.x<"u"&&(e.min.x>o.max.x?n=o.min.x-e.max.x:e.max.x<o.min.x&&(n=o.max.x-e.min.x)),typeof o.min.y<"u"&&typeof o.max.y<"u"&&(e.min.y>o.max.y?r=o.min.y-e.max.y:e.max.y<o.min.y&&(r=o.max.y-e.min.y)),n!==null||r!==null)return{x:n||0,y:r||0}}})()}),74058:((f,x,e)=>{var o={};f.exports=o,e(15647);var m=e(53402);(function(){o.pathToVertices=function(n,r){typeof window<"u"&&!("SVGPathSeg"in window)&&m.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,t,s,l,i,h,d,c,u,p,g=[],y,v,S=0,w=0,T=0;r=r||15;var C=function(E,P,A){var D=A%2===1&&A>1;if(!u||E!=u.x||P!=u.y){u&&D?(y=u.x,v=u.y):(y=0,v=0);var W={x:y+E,y:v+P};(D||!u)&&(u=W),g.push(W),w=y+E,T=v+P}},M=function(E){var P=E.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":w=E.x,T=E.y;break;case"H":w=E.x;break;case"V":T=E.y;break}C(w,T,E.pathSegType)}};for(o._svgPathToAbsolute(n),s=n.getTotalLength(),h=[],a=0;a<n.pathSegList.numberOfItems;a+=1)h.push(n.pathSegList.getItem(a));for(d=h.concat();S<s;){if(p=n.getPathSegAtLength(S),i=h[p],i!=c){for(;d.length&&d[0]!=i;)M(d.shift());c=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=n.getPointAtLength(S),C(l.x,l.y,0);break}S+=r}for(a=0,t=d.length;a<t;++a)M(d[a]);return g},o._svgPathToAbsolute=function(n){for(var r,a,t,s,l,i,h=n.pathSegList,d=0,c=0,u=h.numberOfItems,p=0;p<u;++p){var g=h.getItem(p),y=g.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(y))"x"in g&&(d=g.x),"y"in g&&(c=g.y);else switch("x1"in g&&(t=d+g.x1),"x2"in g&&(l=d+g.x2),"y1"in g&&(s=c+g.y1),"y2"in g&&(i=c+g.y2),"x"in g&&(d+=g.x),"y"in g&&(c+=g.y),y){case"m":h.replaceItem(n.createSVGPathSegMovetoAbs(d,c),p);break;case"l":h.replaceItem(n.createSVGPathSegLinetoAbs(d,c),p);break;case"h":h.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(d),p);break;case"v":h.replaceItem(n.createSVGPathSegLinetoVerticalAbs(c),p);break;case"c":h.replaceItem(n.createSVGPathSegCurvetoCubicAbs(d,c,t,s,l,i),p);break;case"s":h.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(d,c,l,i),p);break;case"q":h.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(d,c,t,s),p);break;case"t":h.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(d,c),p);break;case"a":h.replaceItem(n.createSVGPathSegArcAbs(d,c,g.r1,g.r2,g.angle,g.largeArcFlag,g.sweepFlag),p);break;case"z":case"Z":d=r,c=a;break}(y=="M"||y=="m")&&(r=d,a=c)}}})()}),31725:(f=>{var x={};f.exports=x,(function(){x.create=function(e,o){return{x:e||0,y:o||0}},x.clone=function(e){return{x:e.x,y:e.y}},x.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},x.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},x.rotate=function(e,o,m){var n=Math.cos(o),r=Math.sin(o);m||(m={});var a=e.x*n-e.y*r;return m.y=e.x*r+e.y*n,m.x=a,m},x.rotateAbout=function(e,o,m,n){var r=Math.cos(o),a=Math.sin(o);n||(n={});var t=m.x+((e.x-m.x)*r-(e.y-m.y)*a);return n.y=m.y+((e.x-m.x)*a+(e.y-m.y)*r),n.x=t,n},x.normalise=function(e){var o=x.magnitude(e);return o===0?{x:0,y:0}:{x:e.x/o,y:e.y/o}},x.dot=function(e,o){return e.x*o.x+e.y*o.y},x.cross=function(e,o){return e.x*o.y-e.y*o.x},x.cross3=function(e,o,m){return(o.x-e.x)*(m.y-e.y)-(o.y-e.y)*(m.x-e.x)},x.add=function(e,o,m){return m||(m={}),m.x=e.x+o.x,m.y=e.y+o.y,m},x.sub=function(e,o,m){return m||(m={}),m.x=e.x-o.x,m.y=e.y-o.y,m},x.mult=function(e,o){return{x:e.x*o,y:e.y*o}},x.div=function(e,o){return{x:e.x/o,y:e.y/o}},x.perp=function(e,o){return o=o===!0?-1:1,{x:o*-e.y,y:o*e.x}},x.neg=function(e){return{x:-e.x,y:-e.y}},x.angle=function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)},x._temp=[x.create(),x.create(),x.create(),x.create(),x.create(),x.create()]})()}),41598:((f,x,e)=>{var o={};f.exports=o;var m=e(31725),n=e(53402);(function(){o.create=function(r,a){for(var t=[],s=0;s<r.length;s++){var l=r[s],i={x:l.x,y:l.y,index:s,body:a,isInternal:!1};t.push(i)}return t},o.fromPath=function(r,a){var t=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,s=[];return r.replace(t,function(l,i,h){s.push({x:parseFloat(i),y:parseFloat(h)})}),o.create(s,a)},o.centre=function(r){for(var a=o.area(r,!0),t={x:0,y:0},s,l,i,h=0;h<r.length;h++)i=(h+1)%r.length,s=m.cross(r[h],r[i]),l=m.mult(m.add(r[h],r[i]),s),t=m.add(t,l);return m.div(t,6*a)},o.mean=function(r){for(var a={x:0,y:0},t=0;t<r.length;t++)a.x+=r[t].x,a.y+=r[t].y;return m.div(a,r.length)},o.area=function(r,a){for(var t=0,s=r.length-1,l=0;l<r.length;l++)t+=(r[s].x-r[l].x)*(r[s].y+r[l].y),s=l;return a?t/2:Math.abs(t)/2},o.inertia=function(r,a){for(var t=0,s=0,l=r,i,h,d=0;d<l.length;d++)h=(d+1)%l.length,i=Math.abs(m.cross(l[h],l[d])),t+=i*(m.dot(l[h],l[h])+m.dot(l[h],l[d])+m.dot(l[d],l[d])),s+=i;return a/6*(t/s)},o.translate=function(r,a,t){t=typeof t<"u"?t:1;var s=r.length,l=a.x*t,i=a.y*t,h;for(h=0;h<s;h++)r[h].x+=l,r[h].y+=i;return r},o.rotate=function(r,a,t){if(a!==0){var s=Math.cos(a),l=Math.sin(a),i=t.x,h=t.y,d=r.length,c,u,p,g;for(g=0;g<d;g++)c=r[g],u=c.x-i,p=c.y-h,c.x=i+(u*s-p*l),c.y=h+(u*l+p*s);return r}},o.contains=function(r,a){for(var t=a.x,s=a.y,l=r.length,i=r[l-1],h,d=0;d<l;d++){if(h=r[d],(t-i.x)*(h.y-i.y)+(s-i.y)*(i.x-h.x)>0)return!1;i=h}return!0},o.scale=function(r,a,t,s){if(a===1&&t===1)return r;s=s||o.centre(r);for(var l,i,h=0;h<r.length;h++)l=r[h],i=m.sub(l,s),r[h].x=s.x+i.x*a,r[h].y=s.y+i.y*t;return r},o.chamfer=function(r,a,t,s,l){typeof a=="number"?a=[a]:a=a||[8],t=typeof t<"u"?t:-1,s=s||2,l=l||14;for(var i=[],h=0;h<r.length;h++){var d=r[h-1>=0?h-1:r.length-1],c=r[h],u=r[(h+1)%r.length],p=a[h<a.length?h:a.length-1];if(p===0){i.push(c);continue}var g=m.normalise({x:c.y-d.y,y:d.x-c.x}),y=m.normalise({x:u.y-c.y,y:c.x-u.x}),v=Math.sqrt(2*Math.pow(p,2)),S=m.mult(n.clone(g),p),w=m.normalise(m.mult(m.add(g,y),.5)),T=m.sub(c,m.mult(w,v)),C=t;t===-1&&(C=Math.pow(p,.32)*1.75),C=n.clamp(C,s,l),C%2===1&&(C+=1);for(var M=Math.acos(m.dot(g,y)),E=M/C,P=0;P<C;P++)i.push(m.add(m.rotate(S,E*P),T))}return i},o.clockwiseSort=function(r){var a=o.mean(r);return r.sort(function(t,s){return m.angle(a,t)-m.angle(a,s)}),r},o.isConvex=function(r){var a=0,t=r.length,s,l,i,h;if(t<3)return null;for(s=0;s<t;s++)if(l=(s+1)%t,i=(s+2)%t,h=(r[l].x-r[s].x)*(r[i].y-r[l].y),h-=(r[l].y-r[s].y)*(r[i].x-r[l].x),h<0?a|=1:h>0&&(a|=2),a===3)return!1;return a!==0?!0:null},o.hull=function(r){var a=[],t=[],s,l;for(r=r.slice(0),r.sort(function(i,h){var d=i.x-h.x;return d!==0?d:i.y-h.y}),l=0;l<r.length;l+=1){for(s=r[l];t.length>=2&&m.cross3(t[t.length-2],t[t.length-1],s)<=0;)t.pop();t.push(s)}for(l=r.length-1;l>=0;l-=1){for(s=r[l];a.length>=2&&m.cross3(a[a.length-2],a[a.length-1],s)<=0;)a.pop();a.push(s)}return a.pop(),t.pop(),a.concat(t)}})()}),55973:(f=>{f.exports={decomp:M,quickDecomp:D,isSimple:P,removeCollinearPoints:W,removeDuplicatePoints:V,makeCCW:u};function x(R,H,L){L=L||0;var N=[0,0],z,U,Y,$,Z,Q,q;return z=R[1][1]-R[0][1],U=R[0][0]-R[1][0],Y=z*R[0][0]+U*R[0][1],$=H[1][1]-H[0][1],Z=H[0][0]-H[1][0],Q=$*H[0][0]+Z*H[0][1],q=z*Z-$*U,K(q,0,L)||(N[0]=(Z*Y-U*Q)/q,N[1]=(z*Q-$*Y)/q),N}function e(R,H,L,N){var z=H[0]-R[0],U=H[1]-R[1],Y=N[0]-L[0],$=N[1]-L[1];if(Y*U-$*z===0)return!1;var Z=(z*(L[1]-R[1])+U*(R[0]-L[0]))/(Y*U-$*z),Q=(Y*(R[1]-L[1])+$*(L[0]-R[0]))/($*z-Y*U);return Z>=0&&Z<=1&&Q>=0&&Q<=1}function o(R,H,L){return(H[0]-R[0])*(L[1]-R[1])-(L[0]-R[0])*(H[1]-R[1])}function m(R,H,L){return o(R,H,L)>0}function n(R,H,L){return o(R,H,L)>=0}function r(R,H,L){return o(R,H,L)<0}function a(R,H,L){return o(R,H,L)<=0}var t=[],s=[];function l(R,H,L,N){if(N){var z=t,U=s;z[0]=H[0]-R[0],z[1]=H[1]-R[1],U[0]=L[0]-H[0],U[1]=L[1]-H[1];var Y=z[0]*U[0]+z[1]*U[1],$=Math.sqrt(z[0]*z[0]+z[1]*z[1]),Z=Math.sqrt(U[0]*U[0]+U[1]*U[1]),Q=Math.acos(Y/($*Z));return Q<N}else return o(R,H,L)===0}function i(R,H){var L=H[0]-R[0],N=H[1]-R[1];return L*L+N*N}function h(R,H){var L=R.length;return R[H<0?H%L+L:H%L]}function d(R){R.length=0}function c(R,H,L,N){for(var z=L;z<N;z++)R.push(H[z])}function u(R){for(var H=0,L=R,N=1;N<R.length;++N)(L[N][1]<L[H][1]||L[N][1]===L[H][1]&&L[N][0]>L[H][0])&&(H=N);return m(h(R,H-1),h(R,H),h(R,H+1))?!1:(p(R),!0)}function p(R){for(var H=[],L=R.length,N=0;N!==L;N++)H.push(R.pop());for(var N=0;N!==L;N++)R[N]=H[N]}function g(R,H){return r(h(R,H-1),h(R,H),h(R,H+1))}var y=[],v=[];function S(R,H,L){var N,z,U=y,Y=v;if(n(h(R,H+1),h(R,H),h(R,L))&&a(h(R,H-1),h(R,H),h(R,L)))return!1;z=i(h(R,H),h(R,L));for(var $=0;$!==R.length;++$)if(!(($+1)%R.length===H||$===H)&&n(h(R,H),h(R,L),h(R,$+1))&&a(h(R,H),h(R,L),h(R,$))&&(U[0]=h(R,H),U[1]=h(R,L),Y[0]=h(R,$),Y[1]=h(R,$+1),N=x(U,Y),i(h(R,H),N)<z))return!1;return!0}function w(R,H,L){for(var N=0;N!==R.length;++N)if(!(N===H||N===L||(N+1)%R.length===H||(N+1)%R.length===L)&&e(h(R,H),h(R,L),h(R,N),h(R,N+1)))return!1;return!0}function T(R,H,L,N){var z=N||[];if(d(z),H<L)for(var U=H;U<=L;U++)z.push(R[U]);else{for(var U=0;U<=L;U++)z.push(R[U]);for(var U=H;U<R.length;U++)z.push(R[U])}return z}function C(R){for(var H=[],L=[],N=[],z=[],U=Number.MAX_VALUE,Y=0;Y<R.length;++Y)if(g(R,Y)){for(var $=0;$<R.length;++$)if(S(R,Y,$)){L=C(T(R,Y,$,z)),N=C(T(R,$,Y,z));for(var Z=0;Z<N.length;Z++)L.push(N[Z]);L.length<U&&(H=L,U=L.length,H.push([h(R,Y),h(R,$)]))}}return H}function M(R){var H=C(R);return H.length>0?E(R,H):[R]}function E(R,H){if(H.length===0)return[R];if(H instanceof Array&&H.length&&H[0]instanceof Array&&H[0].length===2&&H[0][0]instanceof Array){for(var L=[R],N=0;N<H.length;N++)for(var z=H[N],U=0;U<L.length;U++){var Y=L[U],$=E(Y,z);if($){L.splice(U,1),L.push($[0],$[1]);break}}return L}else{var z=H,N=R.indexOf(z[0]),U=R.indexOf(z[1]);return N!==-1&&U!==-1?[T(R,N,U),T(R,U,N)]:!1}}function P(R){var H=R,L;for(L=0;L<H.length-1;L++)for(var N=0;N<L-1;N++)if(e(H[L],H[L+1],H[N],H[N+1]))return!1;for(L=1;L<H.length-2;L++)if(e(H[0],H[H.length-1],H[L],H[L+1]))return!1;return!0}function A(R,H,L,N,z){z=z||0;var U=H[1]-R[1],Y=R[0]-H[0],$=U*R[0]+Y*R[1],Z=N[1]-L[1],Q=L[0]-N[0],q=Z*L[0]+Q*L[1],j=U*Q-Z*Y;return K(j,0,z)?[0,0]:[(Q*$-Y*q)/j,(U*q-Z*$)/j]}function D(R,H,L,N,z,U,Y){U=U||100,Y=Y||0,z=z||25,H=typeof H<"u"?H:[],L=L||[],N=N||[];var $=[0,0],Z=[0,0],Q=[0,0],q=0,j=0,_=0,te=0,se=0,ie=0,ne=0,he=[],ue=[],ae=R,oe=R;if(oe.length<3)return H;if(Y++,Y>U)return console.warn("quickDecomp: max level ("+U+") reached."),H;for(var le=0;le<R.length;++le)if(g(ae,le)){L.push(ae[le]),q=j=Number.MAX_VALUE;for(var fe=0;fe<R.length;++fe)m(h(ae,le-1),h(ae,le),h(ae,fe))&&a(h(ae,le-1),h(ae,le),h(ae,fe-1))&&(Q=A(h(ae,le-1),h(ae,le),h(ae,fe),h(ae,fe-1)),r(h(ae,le+1),h(ae,le),Q)&&(_=i(ae[le],Q),_<j&&(j=_,Z=Q,ie=fe))),m(h(ae,le+1),h(ae,le),h(ae,fe+1))&&a(h(ae,le+1),h(ae,le),h(ae,fe))&&(Q=A(h(ae,le+1),h(ae,le),h(ae,fe),h(ae,fe+1)),m(h(ae,le-1),h(ae,le),Q)&&(_=i(ae[le],Q),_<q&&(q=_,$=Q,se=fe)));if(ie===(se+1)%R.length)Q[0]=(Z[0]+$[0])/2,Q[1]=(Z[1]+$[1])/2,N.push(Q),le<se?(c(he,ae,le,se+1),he.push(Q),ue.push(Q),ie!==0&&c(ue,ae,ie,ae.length),c(ue,ae,0,le+1)):(le!==0&&c(he,ae,le,ae.length),c(he,ae,0,se+1),he.push(Q),ue.push(Q),c(ue,ae,ie,le+1));else{if(ie>se&&(se+=R.length),te=Number.MAX_VALUE,se<ie)return H;for(var fe=ie;fe<=se;++fe)n(h(ae,le-1),h(ae,le),h(ae,fe))&&a(h(ae,le+1),h(ae,le),h(ae,fe))&&(_=i(h(ae,le),h(ae,fe)),_<te&&w(ae,le,fe)&&(te=_,ne=fe%R.length));le<ne?(c(he,ae,le,ne+1),ne!==0&&c(ue,ae,ne,oe.length),c(ue,ae,0,le+1)):(le!==0&&c(he,ae,le,oe.length),c(he,ae,0,ne+1),c(ue,ae,ne,le+1))}return he.length<ue.length?(D(he,H,L,N,z,U,Y),D(ue,H,L,N,z,U,Y)):(D(ue,H,L,N,z,U,Y),D(he,H,L,N,z,U,Y)),H}return H.push(R),H}function W(R,H){for(var L=0,N=R.length-1;R.length>3&&N>=0;--N)l(h(R,N-1),h(R,N),h(R,N+1),H)&&(R.splice(N%R.length,1),L++);return L}function V(R,H){for(var L=R.length-1;L>=1;--L)for(var N=R[L],z=L-1;z>=0;--z)if(X(N,R[z],H)){R.splice(L,1);continue}}function K(R,H,L){return L=L||0,Math.abs(R-H)<=L}function X(R,H,L){return K(R[0],H[0],L)&&K(R[1],H[1],L)}}),52018:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r){this.pluginManager=r,this.game=r.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});f.exports=m}),42363:(f=>{var x={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};f.exports=x}),37277:(f=>{var x={},e={},o={};o.register=function(m,n,r,a){a===void 0&&(a=!1),x[m]={plugin:n,mapping:r,custom:a}},o.registerCustom=function(m,n,r,a){e[m]={plugin:n,mapping:r,data:a}},o.hasCore=function(m){return x.hasOwnProperty(m)},o.hasCustom=function(m){return e.hasOwnProperty(m)},o.getCore=function(m){return x[m]},o.getCustom=function(m){return e[m]},o.getCustomClass=function(m){return e.hasOwnProperty(m)?e[m].plugin:null},o.remove=function(m){x.hasOwnProperty(m)&&delete x[m]},o.removeCustom=function(m){e.hasOwnProperty(m)&&delete e[m]},o.destroyCorePlugins=function(){for(var m in x)x.hasOwnProperty(m)&&delete x[m]},o.destroyCustomPlugins=function(){for(var m in e)e.hasOwnProperty(m)&&delete e[m]},f.exports=o}),77332:((f,x,e)=>{var o=e(83419),m=e(8443),n=e(50792),r=e(74099),a=e(44603),t=e(39429),s=e(95540),l=e(37277),i=e(72905),h=e(8054),d=new o({Extends:n,initialize:function(u){n.call(this),this.game=u,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],u.isBooted||u.config.renderType===h.HEADLESS?this.boot():u.events.once(m.BOOT,this.boot,this)},boot:function(){var c,u,p,g,y,v,S,w=this.game.config,T=w.installGlobalPlugins;for(T=T.concat(this._pendingGlobal),c=0;c<T.length;c++)u=T[c],p=s(u,"key",null),g=s(u,"plugin",null),y=s(u,"start",!1),v=s(u,"mapping",null),S=s(u,"data",null),p&&(g?this.install(p,g,y,v,S):console.warn("Missing `plugin` for key: "+p));for(T=w.installScenePlugins,T=T.concat(this._pendingScene),c=0;c<T.length;c++)u=T[c],p=s(u,"key",null),g=s(u,"plugin",null),v=s(u,"mapping",null),p&&(g?this.installScenePlugin(p,g,v):console.warn("Missing `plugin` for key: "+p));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(m.DESTROY,this.destroy,this)},addToScene:function(c,u,p){var g,y,v,S=this.game,w=c.scene,T=c.settings.map,C=c.settings.isBooted;for(g=0;g<u.length;g++)y=u[g],S[y]?(c[y]=S[y],T.hasOwnProperty(y)&&(w[T[y]]=c[y])):y==="game"&&T.hasOwnProperty(y)&&(w[T[y]]=S);for(var M=0;M<p.length;M++)for(v=p[M],g=0;g<v.length;g++)if(y=v[g],!!l.hasCore(y)){var E=l.getCore(y),P=E.mapping,A=new E.plugin(w,this,P);c[P]=A,E.custom?w[P]=A:T.hasOwnProperty(P)&&(w[T[P]]=A),C&&A.boot()}for(v=this.plugins,g=0;g<v.length;g++){var D=v[g];D.mapping&&(w[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var c=this.game.config.defaultPlugins;return c=c.concat(this.scenePlugins),c},installScenePlugin:function(c,u,p,g,y){if(y===void 0&&(y=!1),typeof u!="function"){console.warn("Invalid Scene Plugin: "+c);return}if(l.hasCore(c)||l.register(c,u,p,!0),this.scenePlugins.indexOf(c)===-1)this.scenePlugins.push(c);else if(!y&&l.hasCore(c)){console.warn("Scene Plugin key in use: "+c);return}if(g){var v=new u(g,this,c);g.sys[c]=v,p&&p!==""&&(g[p]=v),v.boot()}},install:function(c,u,p,g,y){if(p===void 0&&(p=!1),g===void 0&&(g=null),y===void 0&&(y=null),typeof u!="function")return console.warn("Invalid Plugin: "+c),null;if(l.hasCustom(c))return console.warn("Plugin key in use: "+c),null;if(g!==null&&(p=!0),!this.game.isBooted)this._pendingGlobal.push({key:c,plugin:u,start:p,mapping:g,data:y});else if(l.registerCustom(c,u,g,y),p)return this.start(c);return null},getIndex:function(c){for(var u=this.plugins,p=0;p<u.length;p++){var g=u[p];if(g.key===c)return p}return-1},getEntry:function(c){var u=this.getIndex(c);if(u!==-1)return this.plugins[u]},isActive:function(c){var u=this.getEntry(c);return u&&u.active},start:function(c,u){u===void 0&&(u=c);var p=this.getEntry(u);return p&&!p.active?(p.active=!0,p.plugin.start()):p||(p=this.createEntry(c,u)),p?p.plugin:null},createEntry:function(c,u){var p=l.getCustom(c);if(p){var g=new p.plugin(this);p={key:u,plugin:g,active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),g.init(p.data),g.start()}return p},stop:function(c){var u=this.getEntry(c);return u&&u.active&&(u.active=!1,u.plugin.stop()),this},get:function(c,u){u===void 0&&(u=!0);var p=this.getEntry(c);if(p)return p.plugin;var g=this.getClass(c);return g&&u?(p=this.createEntry(c,c),p?p.plugin:null):g||null},getClass:function(c){return l.getCustomClass(c)},removeGlobalPlugin:function(c){var u=this.getEntry(c);u&&i(this.plugins,u),l.removeCustom(c)},removeScenePlugin:function(c){i(this.scenePlugins,c),l.remove(c)},registerGameObject:function(c,u,p){return u&&t.register(c,u),p&&a.register(c,p),this},removeGameObject:function(c,u,p){return u===void 0&&(u=!0),p===void 0&&(p=!0),u&&t.remove(c),p&&a.remove(c),this},registerFileType:function(c,u,p){r.register(c,u),p&&p.sys.load&&(p.sys.load[c]=u)},destroy:function(){for(var c=0;c<this.plugins.length;c++)this.plugins[c].plugin.destroy();l.destroyCustomPlugins(),this.game.noReturn&&l.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});f.exports=d}),45145:((f,x,e)=>{var o=e(52018),m=e(83419),n=e(44594),r=new m({Extends:o,initialize:function(t,s,l){o.call(this,s),this.scene=t,this.systems=t.sys,this.pluginKey=l,t.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});f.exports=r}),18922:((f,x,e)=>{f.exports={BasePlugin:e(52018),DefaultPlugins:e(42363),PluginCache:e(37277),PluginManager:e(77332),ScenePlugin:e(45145)}}),63595:(()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(f){const x=performance.now(),e=this.getVideoPlaybackQuality(),o=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,m=(n,r)=>{const a=this.getVideoPlaybackQuality(),t=this.mozPresentedFrames||this.mozPaintedFrames||a.totalVideoFrames-a.droppedVideoFrames;if(t>o){const s=this.mozFrameDelay||a.totalFrameDelay-e.totalFrameDelay||0,l=r-n;f(r,{presentationTime:r+s*1e3,expectedDisplayTime:r+l,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+l/1e3,presentedFrames:t,processingDuration:s}),delete this._rvfcpolyfillmap[x]}else this._rvfcpolyfillmap[x]=requestAnimationFrame(s=>m(r,s))};return this._rvfcpolyfillmap[x]=requestAnimationFrame(n=>m(x,n)),x},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(f){cancelAnimationFrame(this._rvfcpolyfillmap[f]),delete this._rvfcpolyfillmap[f]})}),10312:(f=>{f.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),29795:(f=>{var x={DEFAULT:0,LINEAR:0,NEAREST:1};f.exports=x}),68627:((f,x,e)=>{var o=e(19715),m=e(32880),n=e(83419),r=e(8054),a=e(50792),t=e(92503),s=e(56373),l=e(97480),i=e(69442),h=e(8443),d=e(61340),c=new n({Extends:a,initialize:function(p){a.call(this);var g=p.config;this.config={clearBeforeRender:g.clearBeforeRender,backgroundColor:g.backgroundColor,antialias:g.antialias,roundPixels:g.roundPixels,transparent:g.transparent},this.game=p,this.type=r.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=p.canvas;var y={alpha:g.transparent,desynchronized:g.desynchronized,willReadFrequently:!1};this.gameContext=g.context?g.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=g.antialias,this.blendModes=s(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.isBooted=!1,this.init()},init:function(){var u=this.game;u.events.once(h.BOOT,function(){var p=this.config;if(!p.transparent){var g=this.gameContext,y=this.gameCanvas;g.fillStyle=p.backgroundColor.rgba,g.fillRect(0,0,y.width,y.height)}},this),u.textures.once(i.READY,this.boot,this)},boot:function(){var u=this.game,p=u.scale.baseSize;this.width=p.width,this.height=p.height,this.isBooted=!0,u.scale.on(l.RESIZE,this.onResize,this),this.resize(p.width,p.height)},onResize:function(u,p){(p.width!==this.width||p.height!==this.height)&&this.resize(p.width,p.height)},resize:function(u,p){this.width=u,this.height=p,this.emit(t.RESIZE,u,p)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(u){return this.currentContext.globalCompositeOperation=u,this},setContext:function(u){return this.currentContext=u||this.gameContext,this},setAlpha:function(u){return this.currentContext.globalAlpha=u,this},preRender:function(){var u=this.gameContext,p=this.config,g=this.width,y=this.height;u.globalAlpha=1,u.globalCompositeOperation="source-over",u.setTransform(1,0,0,1,0,0),this.emit(t.PRE_RENDER_CLEAR),p.clearBeforeRender&&(u.clearRect(0,0,g,y),p.transparent||(u.fillStyle=p.backgroundColor.rgba,u.fillRect(0,0,g,y))),u.save(),this.drawCount=0,this.emit(t.PRE_RENDER)},render:function(u,p,g){var y=p.length;this.emit(t.RENDER,u,g);var v=g.x,S=g.y,w=g.width,T=g.height,C=g.renderToTexture?g.context:u.sys.context;C.save(),this.game.scene.customViewports&&(C.beginPath(),C.rect(v,S,w,T),C.clip()),g.emit(o.PRE_RENDER,g),this.currentContext=C;var M=g.mask;M&&M.preRenderCanvas(this,null,g._maskCamera),g.transparent||(C.fillStyle=g.backgroundColor.rgba,C.fillRect(v,S,w,T)),C.globalAlpha=g.alpha,C.globalCompositeOperation="source-over",this.drawCount+=y,g.renderToTexture&&g.emit(o.PRE_RENDER,g),g.matrix.copyToContext(C);for(var E=0;E<y;E++){var P=p[E];P.mask&&P.mask.preRenderCanvas(this,P,g),P.renderCanvas(this,P,g),P.mask&&P.mask.postRenderCanvas(this,P,g)}C.setTransform(1,0,0,1,0,0),C.globalCompositeOperation="source-over",C.globalAlpha=1,g.flashEffect.postRenderCanvas(C),g.fadeEffect.postRenderCanvas(C),g.dirty=!1,M&&M.postRenderCanvas(this),C.restore(),g.renderToTexture&&(g.emit(o.POST_RENDER,g),g.renderToGame&&u.sys.context.drawImage(g.canvas,v,S)),g.emit(o.POST_RENDER,g)},postRender:function(){var u=this.gameContext;u.restore(),this.emit(t.POST_RENDER);var p=this.snapshotState;p.callback&&(m(this.gameCanvas,p),p.callback=null)},snapshotCanvas:function(u,p,g,y,v,S,w,T,C){g===void 0&&(g=!1),this.snapshotArea(y,v,S,w,p,T,C);var M=this.snapshotState;return M.getPixel=g,m(u,M),M.callback=null,this},snapshot:function(u,p,g){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,u,p,g)},snapshotArea:function(u,p,g,y,v,S,w){var T=this.snapshotState;return T.callback=v,T.type=S,T.encoder=w,T.getPixel=!1,T.x=u,T.y=p,T.width=Math.min(g,this.gameCanvas.width),T.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(u,p,g){return this.snapshotArea(u,p,1,1,g),this.snapshotState.getPixel=!0,this},batchSprite:function(u,p,g,y){var v=g.alpha*u.alpha;if(v!==0){var S=this.currentContext,w=this._tempMatrix1,T=this._tempMatrix2,C=p.canvasData,M=C.x,E=C.y,P=p.cutWidth,A=p.cutHeight,D=p.customPivot,W=p.source.resolution,V=u.displayOriginX,K=u.displayOriginY,X=-V+p.x,R=-K+p.y;if(u.isCropped){var H=u._crop;(H.flipX!==u.flipX||H.flipY!==u.flipY)&&p.updateCropUVs(H,u.flipX,u.flipY),P=H.cw,A=H.ch,M=H.cx,E=H.cy,X=-V+H.x,R=-K+H.y,u.flipX&&(X>=0?X=-(X+P):X<0&&(X=Math.abs(X)-P)),u.flipY&&(R>=0?R=-(R+A):R<0&&(R=Math.abs(R)-A))}var L=1,N=1;u.flipX&&(D||(X+=-p.realWidth+V*2),L=-1),u.flipY&&(D||(R+=-p.realHeight+K*2),N=-1);var z=u.x,U=u.y;if(g.roundPixels&&(z=Math.floor(z),U=Math.floor(U)),T.applyITRS(z,U,u.rotation,u.scaleX*L,u.scaleY*N),w.copyFrom(g.matrix),y?(w.multiplyWithOffset(y,-g.scrollX*u.scrollFactorX,-g.scrollY*u.scrollFactorY),T.e=z,T.f=U):(T.e-=g.scrollX*u.scrollFactorX,T.f-=g.scrollY*u.scrollFactorY),w.multiply(T),g.renderRoundPixels&&(w.e=Math.floor(w.e+.5),w.f=Math.floor(w.f+.5)),S.save(),w.setToContext(S),S.globalCompositeOperation=this.blendModes[u.blendMode],S.globalAlpha=v,S.imageSmoothingEnabled=!p.source.scaleMode,u.mask&&u.mask.preRenderCanvas(this,u,g),P>0&&A>0){var Y=P/W,$=A/W;g.roundPixels&&(X=Math.floor(X+.5),R=Math.floor(R+.5),Y+=.5,$+=.5),S.drawImage(p.source.image,M,E,P,A,X,R,Y,$)}u.mask&&u.mask.postRenderCanvas(this,u,g),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});f.exports=c}),55830:((f,x,e)=>{f.exports={CanvasRenderer:e(68627),GetBlendModes:e(56373),SetTransform:e(20926)}}),56373:((f,x,e)=>{var o=e(10312),m=e(89289),n=function(){var r=[],a=m.supportNewBlendModes,t="source-over";return r[o.NORMAL]=t,r[o.ADD]="lighter",r[o.MULTIPLY]=a?"multiply":t,r[o.SCREEN]=a?"screen":t,r[o.OVERLAY]=a?"overlay":t,r[o.DARKEN]=a?"darken":t,r[o.LIGHTEN]=a?"lighten":t,r[o.COLOR_DODGE]=a?"color-dodge":t,r[o.COLOR_BURN]=a?"color-burn":t,r[o.HARD_LIGHT]=a?"hard-light":t,r[o.SOFT_LIGHT]=a?"soft-light":t,r[o.DIFFERENCE]=a?"difference":t,r[o.EXCLUSION]=a?"exclusion":t,r[o.HUE]=a?"hue":t,r[o.SATURATION]=a?"saturation":t,r[o.COLOR]=a?"color":t,r[o.LUMINOSITY]=a?"luminosity":t,r[o.ERASE]="destination-out",r[o.SOURCE_IN]="source-in",r[o.SOURCE_OUT]="source-out",r[o.SOURCE_ATOP]="source-atop",r[o.DESTINATION_OVER]="destination-over",r[o.DESTINATION_IN]="destination-in",r[o.DESTINATION_OUT]="destination-out",r[o.DESTINATION_ATOP]="destination-atop",r[o.LIGHTER]="lighter",r[o.COPY]="copy",r[o.XOR]="xor",r};f.exports=n}),20926:((f,x,e)=>{var o=e(91296),m=function(n,r,a,t,s){var l=t.alpha*a.alpha;if(l<=0)return!1;var i=o(a,t,s).calc;return r.globalCompositeOperation=n.blendModes[a.blendMode],r.globalAlpha=l,r.save(),i.setToContext(r),r.imageSmoothingEnabled=a.frame?!a.frame.source.scaleMode:n.antialias,!0};f.exports=m}),63899:(f=>{f.exports="losewebgl"}),6119:(f=>{f.exports="postrender"}),48070:(f=>{f.exports="prerender"}),15640:(f=>{f.exports="render"}),8912:(f=>{f.exports="resize"}),87124:(f=>{f.exports="restorewebgl"}),92503:((f,x,e)=>{f.exports={LOSE_WEBGL:e(63899),POST_RENDER:e(6119),PRE_RENDER:e(48070),RENDER:e(15640),RESIZE:e(8912),RESTORE_WEBGL:e(87124)}}),36909:((f,x,e)=>{f.exports={Events:e(92503),Snapshot:e(89966)},f.exports.Canvas=e(55830),f.exports.WebGL=e(4159)}),32880:((f,x,e)=>{var o=e(27919),m=e(40987),n=e(95540),r=function(a,t){var s=n(t,"callback"),l=n(t,"type","image/png"),i=n(t,"encoder",.92),h=Math.abs(Math.round(n(t,"x",0))),d=Math.abs(Math.round(n(t,"y",0))),c=Math.floor(n(t,"width",a.width)),u=Math.floor(n(t,"height",a.height)),p=n(t,"getPixel",!1);if(p){var g=a.getContext("2d",{willReadFrequently:!1}),y=g.getImageData(h,d,1,1),v=y.data;s.call(null,new m(v[0],v[1],v[2],v[3]))}else if(h!==0||d!==0||c!==a.width||u!==a.height){var S=o.createWebGL(this,c,u),w=S.getContext("2d",{willReadFrequently:!0});c>0&&u>0&&w.drawImage(a,h,d,c,u,0,0,c,u);var T=new Image;T.onerror=function(){s.call(null),o.remove(S)},T.onload=function(){s.call(null,T),o.remove(S)},T.src=S.toDataURL(l,i)}else{var C=new Image;C.onerror=function(){s.call(null)},C.onload=function(){s.call(null,C)},C.src=a.toDataURL(l,i)}};f.exports=r}),88815:((f,x,e)=>{var o=e(27919),m=e(40987),n=e(95540),r=function(a,t){var s=a,l=n(t,"callback"),i=n(t,"type","image/png"),h=n(t,"encoder",.92),d=Math.abs(Math.round(n(t,"x",0))),c=Math.abs(Math.round(n(t,"y",0))),u=n(t,"getPixel",!1),p=n(t,"isFramebuffer",!1),g=p?n(t,"bufferWidth",1):s.drawingBufferWidth,y=p?n(t,"bufferHeight",1):s.drawingBufferHeight;if(u){var v=new Uint8Array(4),S=p?c:y-c;s.readPixels(d,S,1,1,s.RGBA,s.UNSIGNED_BYTE,v),l.call(null,new m(v[0],v[1],v[2],v[3]))}else{var w=Math.floor(n(t,"width",g)),T=Math.floor(n(t,"height",y)),C=w*T*4,M=new Uint8Array(C);s.readPixels(d,y-c-T,w,T,s.RGBA,s.UNSIGNED_BYTE,M);for(var E=o.createWebGL(this,w,T),P=E.getContext("2d",{willReadFrequently:!0}),A=P.getImageData(0,0,w,T),D=A.data,W=0;W<T;W++)for(var V=0;V<w;V++){var K=((T-W-1)*w+V)*4,X=p?C-(W*w+(w-V))*4:(W*w+V)*4;D[X+0]=M[K+0],D[X+1]=M[K+1],D[X+2]=M[K+2],D[X+3]=M[K+3]}P.putImageData(A,0,0);var R=new Image;R.onerror=function(){l.call(null),o.remove(E)},R.onload=function(){l.call(null,R),o.remove(E)},R.src=E.toDataURL(i,h)}};f.exports=r}),89966:((f,x,e)=>{f.exports={Canvas:e(32880),WebGL:e(88815)}}),7530:((f,x,e)=>{var o=e(83419),m=e(36060),n=e(90330),r=e(82264),a=e(95540),t=e(32302),s=e(63448),l=e(31302),i=e(58918),h=e(14811),d=e(92651),c=e(96569),u=e(56527),p=e(57516),g=e(43439),y=e(81041),v=e(12385),S=e(7589),w=e(95428),T=e(72905),C=new o({initialize:function(E){this.game=E.game,this.renderer=E,this.classes=new n([[m.UTILITY_PIPELINE,S],[m.MULTI_PIPELINE,p],[m.BITMAPMASK_PIPELINE,l],[m.SINGLE_PIPELINE,v],[m.ROPE_PIPELINE,y],[m.LIGHT_PIPELINE,c],[m.POINTLIGHT_PIPELINE,g],[m.MOBILE_PIPELINE,u]]),this.postPipelineClasses=new n,this.pipelines=new n,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(M,E,P){var A=this.renderer,D=this.renderTargets;this.frameInc=Math.floor(a(M,"frameInc",32));var W=A.width,V=A.height,K=this.game.config.disablePreFX,X=this.game.config.disablePostFX;if(X||this.postPipelineClasses.setAll([[String(h.BARREL),i.Barrel],[String(h.BLOOM),i.Bloom],[String(h.BLUR),i.Blur],[String(h.BOKEH),i.Bokeh],[String(h.CIRCLE),i.Circle],[String(h.COLOR_MATRIX),i.ColorMatrix],[String(h.DISPLACEMENT),i.Displacement],[String(h.GLOW),i.Glow],[String(h.GRADIENT),i.Gradient],[String(h.PIXELATE),i.Pixelate],[String(h.SHADOW),i.Shadow],[String(h.SHINE),i.Shine],[String(h.VIGNETTE),i.Vignette],[String(h.WIPE),i.Wipe]]),!K){this.classes.set(m.FX_PIPELINE,d);for(var R=Math.min(W,V),H=Math.ceil(R/this.frameInc),L=1;L<H;L++){var N=L*this.frameInc;D.push(new t(A,N,N)),D.push(new t(A,N,N)),D.push(new t(A,N,N)),this.maxDimension=N}D.push(new t(A,W,V,1,0,!0,!0)),D.push(new t(A,W,V,1,0,!0,!0)),D.push(new t(A,W,V,1,0,!0,!0))}var z,U,Y=this,$=this.game;if(this.classes.each(function(Q,q){z=Y.add(Q,new q({game:$})),Q===m.UTILITY_PIPELINE&&(Y.UTILITY_PIPELINE=z,Y.fullFrame1=z.fullFrame1,Y.fullFrame2=z.fullFrame2,Y.halfFrame1=z.halfFrame1,Y.halfFrame2=z.halfFrame2)}),this.MULTI_PIPELINE=this.get(m.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(m.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(m.MOBILE_PIPELINE),K||(this.FX_PIPELINE=this.get(m.FX_PIPELINE)),M)for(U in M){var Z=M[U];z=new Z($),z.name=U,z.isPostFX?this.postPipelineClasses.set(U,Z):this.has(U)||(this.classes.set(U,Z),this.add(U,z))}this.default=this.get(E),P&&!r.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(M){var E=this.get(M);return E&&(this.default=E),E},add:function(M,E){if(E.isPostFX){console.warn(M+" is a Post Pipeline. Use `addPostPipeline` instead");return}var P=this.pipelines,A=this.renderer;return P.has(M)?console.warn("Pipeline exists: "+M):(E.name=M,E.manager=this,P.set(M,E)),E.hasBooted||E.boot(),A.width!==0&&A.height!==0&&!E.isPreFX&&E.resize(A.width,A.height),E},addPostPipeline:function(M,E){this.postPipelineClasses.has(M)||this.postPipelineClasses.set(M,E)},flush:function(){this.current&&this.current.flush()},has:function(M){var E=this.pipelines;return typeof M=="string"?E.has(M):!!E.contains(M)},get:function(M){var E=this.pipelines;if(typeof M=="string")return E.get(M);if(E.contains(M))return M},getPostPipeline:function(M,E,P){var A=this.postPipelineClasses,D,W="",V=typeof M;if(V==="string"||V==="number"?(D=A.get(M),W=M):V==="function"?(A.contains(M)&&(D=M),W=M.name):V==="object"&&(D=A.get(M.name),W=M.name),D){var K=new D(this.game,P);return K.name=W,E&&(K.gameObject=E),this.postPipelineInstances.push(K),K}},removePostPipeline:function(M){T(this.postPipelineInstances,M)},remove:function(M,E,P){E===void 0&&(E=!0),P===void 0&&(P=!0),this.pipelines.delete(M),E&&this.classes.delete(M),P&&this.postPipelineClasses.delete(M)},set:function(M,E,P){if(!M.isPostFX)return this.isCurrent(M,P)||(this.flush(),this.current&&this.current.unbind(),this.current=M,M.bind(P)),M.updateProjectionMatrix(),M.onBind(E),M},preBatch:function(M){if(M.hasPostPipeline){this.flush();for(var E=M.postPipelines,P=E.length-1;P>=0;P--){var A=E[P];A.active&&A.preBatch(M)}}},postBatch:function(M){if(M.hasPostPipeline){this.flush();for(var E=M.postPipelines,P=0;P<E.length;P++){var A=E[P];A.active&&A.postBatch(M)}}},preBatchCamera:function(M){if(M.hasPostPipeline){this.flush();for(var E=M.postPipelines,P=E.length-1;P>=0;P--){var A=E[P];A.active&&A.preBatch(M)}}},postBatchCamera:function(M){if(M.hasPostPipeline){this.flush();for(var E=M.postPipelines,P=0;P<E.length;P++){var A=E[P];A.active&&A.postBatch(M)}}},isCurrent:function(M,E){var P=this.renderer,A=this.current;return A&&!E&&(E=A.currentShader),!(A!==M||E.program!==P.currentProgram)},copyFrame:function(M,E,P,A,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(M,E,P,A,D),this},copyToGame:function(M){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(M),this},drawFrame:function(M,E,P,A){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(M,E,P,A),this},blendFrames:function(M,E,P,A,D){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(M,E,P,A,D),this},blendFramesAdditive:function(M,E,P,A,D){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(M,E,P,A,D),this},clearFrame:function(M,E){return this.UTILITY_PIPELINE.clearFrame(M,E),this},blitFrame:function(M,E,P,A,D,W){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(M,E,P,A,D,W),this},copyFrameRect:function(M,E,P,A,D,W,V,K){return this.UTILITY_PIPELINE.copyFrameRect(M,E,P,A,D,W,V,K),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(M){return this.UTILITY_PIPELINE.bind(M)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(M,E){E.restoreContext()}),w(this.postPipelineInstances,function(M){M.restoreContext()})},rebind:function(M){M===void 0&&this.previous&&(M=this.previous);var E=this.renderer,P=E.gl;P.disable(P.DEPTH_TEST),P.disable(P.CULL_FACE),E.hasActiveStencilMask()?P.clear(P.DEPTH_BUFFER_BIT):(P.disable(P.STENCIL_TEST),P.clear(P.DEPTH_BUFFER_BIT|P.STENCIL_BUFFER_BIT)),P.viewport(0,0,E.width,E.height),E.currentProgram=null,E.setBlendMode(0,!0);var A=E.vaoExtension;A&&A.bindVertexArrayOES(null);var D=this.pipelines.entries;for(var W in D)D[W].glReset=!0;M&&(this.current=M,M.rebind())},clear:function(){var M=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,M.currentProgram=null,M.setBlendMode(0,!0);var E=M.vaoExtension;E&&E.bindVertexArrayOES(null)},getRenderTarget:function(M){var E=this.renderTargets,P=3;if(M>this.maxDimension)return this.targetIndex=E.length-P,E[this.targetIndex];var A=(s(M,this.frameInc,0,!0)-1)*P;return this.targetIndex=A,E[A]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});f.exports=C}),32302:((f,x,e)=>{var o=e(83419),m=e(92503),n=new o({initialize:function(a,t,s,l,i,h,d,c,u){l===void 0&&(l=1),i===void 0&&(i=0),h===void 0&&(h=!0),d===void 0&&(d=!1),c===void 0&&(c=!0),u===void 0&&(u=!0),this.renderer=a,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=l,this.minFilter=i,this.autoClear=h,this.autoResize=!0,this.hasDepthBuffer=c,this.forceClamp=u,this.init(t,s),d?this.renderer.on(m.RESIZE,this.resize,this):this.autoResize=!1},init:function(r,a){var t=this.renderer;this.texture=t.createTextureFromSource(null,r,a,this.minFilter,this.forceClamp),this.framebuffer=t.createFramebuffer(r,a,this.texture,this.hasDepthBuffer),this.width=r,this.height=a},setAutoResize:function(r){return r&&!this.autoResize?(this.renderer.on(m.RESIZE,this.resize,this),this.autoResize=!0):!r&&this.autoResize&&(this.renderer.off(m.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(r,a){if(this.autoResize&&this.willResize(r,a)){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),this.texture=t.createTextureFromSource(null,r,a,this.minFilter,this.forceClamp),this.framebuffer=t.createFramebuffer(r,a,this.texture,this.hasDepthBuffer),this.width=r,this.height=a}return this},willResize:function(r,a){return typeof r!="number"||typeof a!="number"?!1:(r=Math.round(r*this.scale),a=Math.round(a*this.scale),r=Math.max(r,1),a=Math.max(a,1),r!==this.width||a!==this.height)},bind:function(r,a,t){r===void 0&&(r=!1);var s=this.renderer;if(r&&s.flush(),a&&t&&this.resize(a,t),s.pushFramebuffer(this.framebuffer,!1,!1),r&&this.adjustViewport(),this.autoClear){var l=this.renderer.gl;l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT)}s.clearStencilMask()},adjustViewport:function(){var r=this.renderer.gl;r.viewport(0,0,this.width,this.height),r.disable(r.SCISSOR_TEST)},clear:function(r,a,t,s){var l=this.renderer,i=l.gl;l.pushFramebuffer(this.framebuffer),r!==void 0&&a!==void 0&&t!==void 0&&s!==void 0?(i.enable(i.SCISSOR_TEST),i.scissor(r,a,t,s)):i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),l.popFramebuffer(),l.resetScissor()},unbind:function(r){r===void 0&&(r=!1);var a=this.renderer;return r&&a.flush(),a.popFramebuffer()},destroy:function(){var r=this.renderer;r.off(m.RESIZE,this.resize,this),r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});f.exports=n}),70554:(f=>{f.exports={getTintFromFloats:function(x,e,o,m){var n=(x*255|0)&255,r=(e*255|0)&255,a=(o*255|0)&255,t=(m*255|0)&255;return(t<<24|n<<16|r<<8|a)>>>0},getTintAppendFloatAlpha:function(x,e){var o=(e*255|0)&255;return(o<<24|x)>>>0},getTintAppendFloatAlphaAndSwap:function(x,e){var o=(x>>16|0)&255,m=(x>>8|0)&255,n=(x|0)&255,r=(e*255|0)&255;return(r<<24|n<<16|m<<8|o)>>>0},getFloatsFromUintRGB:function(x){var e=(x>>16|0)&255,o=(x>>8|0)&255,m=(x|0)&255;return[e/255,o/255,m/255]},checkShaderMax:function(x,e){var o=Math.min(16,x.getParameter(x.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?o:Math.min(o,e)},parseFragmentShaderMaxTextures:function(x,e){if(!x)return"";for(var o="",m=0;m<e;m++)m>0&&(o+=`
	else `),m<e-1&&(o+="if (outTexId < "+m+".5)"),o+=`
	{`,o+=`
		texture = texture2D(uMainSampler[`+m+"], outTexCoord);",o+=`
	}`;return x=x.replace(/%count%/gi,e.toString()),x.replace(/%forloop%/gi,o)},setGlowQuality:function(x,e,o,m){return o===void 0&&(o=e.config.glowFXQuality),m===void 0&&(m=e.config.glowFXDistance),x=x.replace(/__SIZE__/gi,(1/o/m).toFixed(7)),x=x.replace(/__DIST__/gi,m.toFixed(0)+".0"),x}}}),29100:((f,x,e)=>{var o=e(83419),m=e(62644),n=e(50792),r=e(77085),a=e(95540),t=e(37867),s=e(92503),l=e(32302),i=e(70554),h=e(38683),d=new o({Extends:n,initialize:function(u){n.call(this);var p=u.game,g=p.renderer,y=g.gl;this.name=a(u,"name","WebGLPipeline"),this.game=p,this.renderer=g,this.manager,this.gl=y,this.view=p.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=a(u,"topology",y.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=a(u,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=u,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=a(u,"resizeUniform","")},boot:function(){var c,u=this.gl,p=this.config,g=this.renderer;this.isPostFX||(this.projectionMatrix=new t().identity());var y=this.renderTargets,v=a(p,"renderTarget",!1);typeof v=="boolean"&&v&&(v=1);var S=g.width,w=g.height;if(typeof v=="number")for(c=0;c<v;c++)y.push(new l(g,S,w,1,0,!0));else if(Array.isArray(v))for(c=0;c<v.length;c++){var T=a(v[c],"scale",1),C=a(v[c],"minFilter",0),M=a(v[c],"autoClear",1),E=a(v[c],"autoResize",!1),P=a(v[c],"width",null),A=a(v[c],"height",P);P?y.push(new l(g,P,A,1,C,M,E)):y.push(new l(g,S,w,T,C,M,E))}y.length&&(this.currentRenderTarget=y[0]),this.setShadersFromConfig(p);var D=this.shaders,W=0;for(c=0;c<D.length;c++)D[c].vertexSize>W&&(W=D[c].vertexSize);var V=a(p,"batchSize",g.config.batchSize);this.vertexCapacity=V*6;var K=new ArrayBuffer(this.vertexCapacity*W);this.vertexData=K,this.bytes=new Uint8Array(K),this.vertexViewF32=new Float32Array(K),this.vertexViewU32=new Uint32Array(K);var X=a(p,"vertices",null);for(X?(this.vertexViewF32.set(X),this.vertexBuffer=g.createVertexBuffer(K,u.STATIC_DRAW)):this.vertexBuffer=g.createVertexBuffer(K.byteLength,u.DYNAMIC_DRAW),this.setVertexBuffer(),c=D.length-1;c>=0;c--)D[c].rebind();this.hasBooted=!0,g.on(s.RESIZE,this.resize,this),g.on(s.PRE_RENDER,this.onPreRender,this),g.on(s.RENDER,this.onRender,this),g.on(s.POST_RENDER,this.onPostRender,this),this.emit(r.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(c,u,p){var g=this.renderer;if(c!==this.currentShader||g.currentProgram!==this.currentShader.program){this.flush();var y=this.setVertexBuffer(p);y&&!u&&(u=!0),c.bind(u,!1),this.currentShader=c}return this},getShaderByName:function(c){for(var u=this.shaders,p=0;p<u.length;p++)if(u[p].name===c)return u[p]},setShadersFromConfig:function(c){var u,p=this.shaders,g=this.renderer;for(u=0;u<p.length;u++)p[u].destroy();var y="vertShader",v="fragShader",S="attributes",w=a(c,y,null),T=i.parseFragmentShaderMaxTextures(a(c,v,null),g.maxTextures),C=a(c,S,null),M=a(c,"shaders",[]),E=M.length;if(E===0)w&&T&&(this.shaders=[new h(this,"default",w,T,m(C))]);else{var P=[];for(u=0;u<E;u++){var A=M[u],D,W,V,K;if(typeof A=="string"?(D="default",W=w,V=i.parseFragmentShaderMaxTextures(A,g.maxTextures),K=C):(D=a(A,"name","default"),W=a(A,y,w),V=i.parseFragmentShaderMaxTextures(a(A,v,T),g.maxTextures),K=a(A,S,C)),D==="default"){var X=V.split(`
`),R=X[0].trim();R.indexOf("#define SHADER_NAME")>-1&&(D=R.substring(20))}W&&V&&P.push(new h(this,D,W,V,m(K)))}this.shaders=P}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(c){return this.currentBatch={start:this.vertexCount,count:0,texture:[c],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=c,this.batch.push(this.currentBatch),0},addTextureToBatch:function(c){var u=this.currentBatch;u&&(u.texture.push(c),u.unit++,u.maxUnit++)},pushBatch:function(c){if(!this.currentBatch||this.forceZero&&c!==this.currentTexture)return this.createBatch(c);if(c===this.currentTexture)return this.currentUnit;var u=this.currentBatch,p=u.texture.indexOf(c);return p===-1?u.texture.length===this.renderer.maxTextures?this.createBatch(c):(u.unit++,u.maxUnit++,u.texture.push(c),this.currentUnit=u.unit,this.currentTexture=c,u.unit):(this.currentUnit=p,this.currentTexture=c,p)},setGameObject:function(c,u){return u===void 0&&(u=c.frame),this.pushBatch(u.source.glTexture)},shouldFlush:function(c){return c===void 0&&(c=0),this.vertexCount+c>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(c,u){(c!==this.width||u!==this.height)&&this.flush(),this.width=c,this.height=u;for(var p=this.renderTargets,g=0;g<p.length;g++)p[g].resize(c,u);return this.setProjectionMatrix(c,u),this.resizeUniform&&this.set2f(this.resizeUniform,c,u),this.emit(r.RESIZE,c,u,this),this.onResize(c,u),this},setProjectionMatrix:function(c,u){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=c,this.projectionHeight=u,p.ortho(0,c,u,0,-1e3,1e3);for(var g=this.shaders,y="uProjectionMatrix",v=0;v<g.length;v++){var S=g[v];S.hasUniform(y)&&(S.resetUniform(y),S.setMatrix4fv(y,!1,p.val,S))}return this},flipProjectionMatrix:function(c){c===void 0&&(c=!0);var u=this.projectionMatrix;if(!u)return this;var p=this.projectionWidth,g=this.projectionHeight;c?u.ortho(0,p,0,g,-1e3,1e3):u.ortho(0,p,g,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,u.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var c=this.renderer.projectionWidth,u=this.renderer.projectionHeight;(this.projectionWidth!==c||this.projectionHeight!==u)&&this.setProjectionMatrix(c,u)}},bind:function(c){if(c===void 0&&(c=this.currentShader),this.glReset)return this.rebind(c);var u=!1,p=this.gl;return p.getParameter(p.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(p.bindBuffer(p.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,u=!0),c.bind(u),this.currentShader=c,this.activeTextures.length=0,this.emit(r.BIND,this,c),this.onActive(c),this},rebind:function(c){this.activeBuffer=null,this.setVertexBuffer();for(var u=this.shaders,p=u.length-1;p>=0;p--){var g=u[p].rebind();(!c||g===c)&&(this.currentShader=g)}return this.activeTextures.length=0,this.emit(r.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var c=this.shaders,u=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,u&&this.setVertexBuffer();for(var p=0;p<c.length;p++){var g=c[p];g.syncUniforms(),u&&g.rebind()}},setVertexBuffer:function(c){if(c===void 0&&(c=this.vertexBuffer),c!==this.activeBuffer){var u=this.gl;return this.gl.bindBuffer(u.ARRAY_BUFFER,c.webGLBuffer),this.activeBuffer=c,!0}return!1},preBatch:function(c){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(c),this},postBatch:function(c){return this.onDraw(this.currentRenderTarget),this.onPostBatch(c),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(c){if(c===void 0&&(c=!1),this.vertexCount>0){this.emit(r.BEFORE_FLUSH,this,c),this.onBeforeFlush(c);var u=this.gl,p=this.vertexCount,g=this.currentShader.vertexSize,y=this.topology;if(this.active){this.setVertexBuffer(),p===this.vertexCapacity?u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.DYNAMIC_DRAW):u.bufferSubData(u.ARRAY_BUFFER,0,this.bytes.subarray(0,p*g));var v,S,w,T=this.batch,C=this.activeTextures;if(this.forceZero)for(C[0]||u.activeTexture(u.TEXTURE0),v=0;v<T.length;v++)S=T[v],w=S.texture[0],C[0]!==w&&(u.bindTexture(u.TEXTURE_2D,w.webGLTexture),C[0]=w),u.drawArrays(y,S.start,S.count);else for(v=0;v<T.length;v++){S=T[v];for(var M=0;M<=S.maxUnit;M++)w=S.texture[M],C[M]!==w&&(u.activeTexture(u.TEXTURE0+M),u.bindTexture(u.TEXTURE_2D,w.webGLTexture),C[M]=w);u.drawArrays(y,S.start,S.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(r.AFTER_FLUSH,this,c),this.onAfterFlush(c)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(c,u,p,g,y,v,S){var w=this.vertexViewF32,T=this.vertexViewU32,C=this.vertexCount*this.currentShader.vertexComponentCount-1;w[++C]=c,w[++C]=u,w[++C]=p,w[++C]=g,w[++C]=y,w[++C]=v,T[++C]=S,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(c,u,p,g,y,v,S,w,T,C,M,E,P,A,D,W,V,K,X,R){R===void 0&&(R=this.currentUnit);var H=!1;this.shouldFlush(6)&&(this.flush(),H=!0),this.currentBatch||(R=this.setTexture2D(X));var L=this.vertexViewF32,N=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return L[++z]=u,L[++z]=p,L[++z]=C,L[++z]=M,L[++z]=R,L[++z]=K,N[++z]=A,L[++z]=g,L[++z]=y,L[++z]=C,L[++z]=P,L[++z]=R,L[++z]=K,N[++z]=W,L[++z]=v,L[++z]=S,L[++z]=E,L[++z]=P,L[++z]=R,L[++z]=K,N[++z]=V,L[++z]=u,L[++z]=p,L[++z]=C,L[++z]=M,L[++z]=R,L[++z]=K,N[++z]=A,L[++z]=v,L[++z]=S,L[++z]=E,L[++z]=P,L[++z]=R,L[++z]=K,N[++z]=V,L[++z]=w,L[++z]=T,L[++z]=E,L[++z]=M,L[++z]=R,L[++z]=K,N[++z]=D,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(c),H},batchTri:function(c,u,p,g,y,v,S,w,T,C,M,E,P,A,D,W,V){V===void 0&&(V=this.currentUnit);var K=!1;this.shouldFlush(3)&&(this.flush(),K=!0),this.currentBatch||(V=this.setTexture2D(W));var X=this.vertexViewF32,R=this.vertexViewU32,H=this.vertexCount*this.currentShader.vertexComponentCount-1;return X[++H]=u,X[++H]=p,X[++H]=w,X[++H]=T,X[++H]=V,X[++H]=D,R[++H]=E,X[++H]=g,X[++H]=y,X[++H]=w,X[++H]=M,X[++H]=V,X[++H]=D,R[++H]=P,X[++H]=v,X[++H]=S,X[++H]=C,X[++H]=M,X[++H]=V,X[++H]=D,R[++H]=A,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(c),K},drawFillRect:function(c,u,p,g,y,v,S,w){S===void 0&&(S=this.renderer.whiteTexture),w===void 0&&(w=!0),c=Math.floor(c),u=Math.floor(u);var T=Math.floor(c+p),C=Math.floor(u+g),M=this.setTexture2D(S),E=i.getTintAppendFloatAlphaAndSwap(y,v),P=0,A=0,D=1,W=1;w&&(A=1,W=0),this.batchQuad(null,c,u,c,C,T,C,T,u,P,A,D,W,E,E,E,E,0,S,M)},setTexture2D:function(c){return c===void 0&&(c=this.renderer.whiteTexture),this.pushBatch(c)},bindTexture:function(c,u){u===void 0&&(u=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+u),p.bindTexture(p.TEXTURE_2D,c.webGLTexture),this},bindRenderTarget:function(c,u){return this.bindTexture(c.texture,u)},setTime:function(c,u){return this.set1f(c,this.game.loop.getDuration(),u),this},setBoolean:function(c,u,p){return p===void 0&&(p=this.currentShader),p.setBoolean(c,u),this},set1f:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set1f(c,u),this},set2f:function(c,u,p,g){return g===void 0&&(g=this.currentShader),g.set2f(c,u,p),this},set3f:function(c,u,p,g,y){return y===void 0&&(y=this.currentShader),y.set3f(c,u,p,g),this},set4f:function(c,u,p,g,y,v){return v===void 0&&(v=this.currentShader),v.set4f(c,u,p,g,y),this},set1fv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set1fv(c,u),this},set2fv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set2fv(c,u),this},set3fv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set3fv(c,u),this},set4fv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set4fv(c,u),this},set1iv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set1iv(c,u),this},set2iv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set2iv(c,u),this},set3iv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set3iv(c,u),this},set4iv:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set4iv(c,u),this},set1i:function(c,u,p){return p===void 0&&(p=this.currentShader),p.set1i(c,u),this},set2i:function(c,u,p,g){return g===void 0&&(g=this.currentShader),g.set2i(c,u,p),this},set3i:function(c,u,p,g,y){return y===void 0&&(y=this.currentShader),y.set3i(c,u,p,g),this},set4i:function(c,u,p,g,y,v){return v===void 0&&(v=this.currentShader),v.set4i(c,u,p,g,y),this},setMatrix2fv:function(c,u,p,g){return g===void 0&&(g=this.currentShader),g.setMatrix2fv(c,u,p),this},setMatrix3fv:function(c,u,p,g){return g===void 0&&(g=this.currentShader),g.setMatrix3fv(c,u,p),this},setMatrix4fv:function(c,u,p,g){return g===void 0&&(g=this.currentShader),g.setMatrix4fv(c,u,p),this},destroy:function(){this.emit(r.DESTROY,this);var c,u=this.shaders;for(c=0;c<u.length;c++)u[c].destroy();var p=this.renderTargets;for(c=0;c<p.length;c++)p[c].destroy();var g=this.renderer;return g.deleteBuffer(this.vertexBuffer),g.off(s.RESIZE,this.resize,this),g.off(s.PRE_RENDER,this.onPreRender,this),g.off(s.RENDER,this.onRender,this),g.off(s.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});f.exports=d}),74797:((f,x,e)=>{var o=e(95428),m=e(72905),n=e(19715),r=e(83419),a=e(8054),t=e(50792),s=e(92503),l=e(50030),i=e(37867),h=e(29747),d=e(7530),c=e(32302),u=e(97480),p=e(69442),g=e(70554),y=e(88815),v=e(26128),S=e(1482),w=e(82751),T=e(84387),C=e(93567),M=e(57183),E=new r({Extends:t,initialize:function(A){t.call(this);var D=A.config,W={alpha:D.transparent,desynchronized:D.desynchronized,depth:!0,antialias:D.antialiasGL,premultipliedAlpha:D.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:D.failIfMajorPerformanceCaveat,powerPreference:D.powerPreference,preserveDrawingBuffer:D.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:D.clearBeforeRender,antialias:D.antialias,backgroundColor:D.backgroundColor,contextCreation:W,roundPixels:D.roundPixels,maxTextures:D.maxTextures,maxTextureSize:D.maxTextureSize,batchSize:D.batchSize,maxLights:D.maxLights,mipmapFilter:D.mipmapFilter},this.game=A,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=A.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=h,this.contextRestoredHandler=h,this.previousContextLostHandler=h,this.previousContextRestoredHandler=h,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(P){var A,D=this.game,W=this.canvas,V=P.backgroundColor;if(D.config.context?A=D.config.context:A=W.getContext("webgl",P.contextCreation)||W.getContext("experimental-webgl",P.contextCreation),!A||A.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=A,this.setExtensions(),this.setContextHandlers(),D.context=A;for(var K=0;K<=27;K++)this.blendModes.push({func:[A.ONE,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_ADD});this.blendModes[1].func=[A.ONE,A.DST_ALPHA],this.blendModes[2].func=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[A.ONE,A.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[A.ZERO,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_REVERSE_SUBTRACT},this.glFormats=[A.BYTE,A.SHORT,A.UNSIGNED_BYTE,A.UNSIGNED_SHORT,A.FLOAT],this.glFuncMap={mat2:{func:A.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:A.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:A.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:A.uniform1f,length:1},"1fv":{func:A.uniform1fv,length:1},"1i":{func:A.uniform1i,length:1},"1iv":{func:A.uniform1iv,length:1},"2f":{func:A.uniform2f,length:2},"2fv":{func:A.uniform2fv,length:1},"2i":{func:A.uniform2i,length:2},"2iv":{func:A.uniform2iv,length:1},"3f":{func:A.uniform3f,length:3},"3fv":{func:A.uniform3fv,length:1},"3i":{func:A.uniform3i,length:3},"3iv":{func:A.uniform3iv,length:1},"4f":{func:A.uniform4f,length:4},"4fv":{func:A.uniform4fv,length:1},"4i":{func:A.uniform4i,length:4},"4iv":{func:A.uniform4iv,length:1}},(!P.maxTextures||P.maxTextures===-1)&&(P.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS)),P.maxTextureSize||(P.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),A.disable(A.DEPTH_TEST),A.disable(A.CULL_FACE),A.enable(A.BLEND),A.clearColor(V.redGL,V.greenGL,V.blueGL,V.alphaGL),A.clear(A.COLOR_BUFFER_BIT);var X=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return X.indexOf(P.mipmapFilter)!==-1&&(this.mipmapFilter=A[P.mipmapFilter]),this.maxTextures=g.checkShaderMax(A,P.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new d(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new i().identity(),D.textures.once(p.READY,this.boot,this),this},boot:function(){var P=this.game,A=this.pipelines,D=P.scale.baseSize,W=D.width,V=D.height;this.width=W,this.height=V,this.isBooted=!0,this.renderTarget=new c(this,W,V,1,0,!0,!0),this.maskTarget=new c(this,W,V,1,0,!0,!0),this.maskSource=new c(this,W,V,1,0,!0,!0);var K=P.config;A.boot(K.pipeline,K.defaultPipeline,K.autoMobilePipeline),this.blankTexture=P.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=P.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=P.textures.getFrame("__WHITE").glTexture;var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,null),X.enable(X.SCISSOR_TEST),P.scale.on(u.RESIZE,this.onResize,this),this.resize(W,V)},setExtensions:function(){var P=this.gl,A=P.getSupportedExtensions();this.supportedExtensions=A;var D="ANGLE_instanced_arrays";this.instancedArraysExtension=A.indexOf(D)>-1?P.getExtension(D):null;var W="OES_vertex_array_object";this.vaoExtension=A.indexOf(W)>-1?P.getExtension(W):null},setContextHandlers:function(P,A){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof P=="function"?this.contextLostHandler=P.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof A=="function"?this.contextRestoredHandler=A.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(P){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(s.LOSE_WEBGL,this),P.preventDefault()},dispatchContextRestored:function(P){var A=this.gl;if(A.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(a.BlendModes.NORMAL),A.disable(A.BLEND),A.disable(A.DEPTH_TEST),A.enable(A.CULL_FACE),this.compression=this.getCompressedTextures();var D=function(W){W.createResource()};o(this.glTextureWrappers,D),o(this.glBufferWrappers,D),o(this.glFramebufferWrappers,D),o(this.glProgramWrappers,D),o(this.glAttribLocationWrappers,D),o(this.glUniformLocationWrappers,D),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(s.RESTORE_WEBGL,this),P.preventDefault()},createTemporaryTextures:function(){for(var P=this.gl,A=0;A<this.maxTextures;A++){var D=P.createTexture();P.activeTexture(P.TEXTURE0+A),P.bindTexture(P.TEXTURE_2D,D),P.texImage2D(P.TEXTURE_2D,0,P.RGBA,1,1,0,P.RGBA,P.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(A)}},captureFrame:function(P,A){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(P,A,D){},stopCapture:function(){},onCapture:function(P){},onResize:function(P,A){(A.width!==this.width||A.height!==this.height)&&this.resize(A.width,A.height)},beginCapture:function(P,A){P===void 0&&(P=this.width),A===void 0&&(A=this.height),this.renderTarget.bind(!0,P,A),this.setProjectionMatrix(P,A)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(P,A){var D=this.gl;return this.width=P,this.height=A,this.setProjectionMatrix(P,A),D.viewport(0,0,P,A),this.drawingBufferHeight=D.drawingBufferHeight,D.scissor(0,D.drawingBufferHeight-A,P,A),this.defaultScissor[2]=P,this.defaultScissor[3]=A,this.emit(s.RESIZE,P,A),this},getCompressedTextures:function(){var P="WEBGL_compressed_texture_",A="WEBKIT_"+P,D="EXT_texture_compression_",W=function(K,X){var R=K.getExtension(P+X)||K.getExtension(A+X)||K.getExtension(D+X);if(R){var H={};for(var L in R)H[R[L]]=L;return H}},V=this.gl;return{ETC:W(V,"etc"),ETC1:W(V,"etc1"),ATC:W(V,"atc"),ASTC:W(V,"astc"),BPTC:W(V,"bptc"),RGTC:W(V,"rgtc"),PVRTC:W(V,"pvrtc"),S3TC:W(V,"s3tc"),S3TCSRGB:W(V,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(P,A){var D=this.compression[P.toUpperCase()];if(A in D)return D[A]},supportsCompressedTexture:function(P,A){var D=this.compression[P.toUpperCase()];return D?A?A in D:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(P,A){return(P!==this.projectionWidth||A!==this.projectionHeight)&&(this.projectionWidth=P,this.projectionHeight=A,this.projectionMatrix.ortho(0,P,A,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(P){return this.supportedExtensions?this.supportedExtensions.indexOf(P):!1},getExtension:function(P){return this.hasExtension(P)?(P in this.extensions||(this.extensions[P]=this.gl.getExtension(P)),this.extensions[P]):null},flush:function(){this.pipelines.flush()},pushScissor:function(P,A,D,W,V){V===void 0&&(V=this.drawingBufferHeight);var K=this.scissorStack,X=[P,A,D,W];return K.push(X),this.setScissor(P,A,D,W,V),this.currentScissor=X,X},setScissor:function(P,A,D,W,V){V===void 0&&(V=this.drawingBufferHeight);var K=this.gl,X=this.currentScissor,R=D>0&&W>0;if(X&&R){var H=X[0],L=X[1],N=X[2],z=X[3];R=H!==P||L!==A||N!==D||z!==W}R&&(this.flush(),K.scissor(P,V-A-W,D,W))},resetScissor:function(){var P=this.gl;P.enable(P.SCISSOR_TEST);var A=this.currentScissor;if(A){var D=A[0],W=A[1],V=A[2],K=A[3];V>0&&K>0&&P.scissor(D,this.drawingBufferHeight-W-K,V,K)}},popScissor:function(){var P=this.scissorStack;P.pop();var A=P[P.length-1];A&&this.setScissor(A[0],A[1],A[2],A[3]),this.currentScissor=A},hasActiveStencilMask:function(){var P=this.currentMask.mask,A=this.currentCameraMask.mask;return P&&P.isStencil||A&&A.isStencil},resetViewport:function(){var P=this.gl;P.viewport(0,0,this.width,this.height),this.drawingBufferHeight=P.drawingBufferHeight},setBlendMode:function(P,A){A===void 0&&(A=!1);var D=this.gl,W=this.blendModes[P];return A||P!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==P?(this.flush(),D.enable(D.BLEND),D.blendEquation(W.equation),W.func.length>2?D.blendFuncSeparate(W.func[0],W.func[1],W.func[2],W.func[3]):D.blendFunc(W.func[0],W.func[1]),this.currentBlendMode=P,!0):!1},addBlendMode:function(P,A){var D=this.blendModes.push({func:P,equation:A});return D-1},updateBlendMode:function(P,A,D){return this.blendModes[P]&&(this.blendModes[P].func=A,D&&(this.blendModes[P].equation=D)),this},removeBlendMode:function(P){return P>17&&this.blendModes[P]&&this.blendModes.splice(P,1),this},pushFramebuffer:function(P,A,D,W,V){return P===this.currentFramebuffer?this:(this.fboStack.push(P),this.setFramebuffer(P,A,D,W,V))},setFramebuffer:function(P,A,D,W,V){if(A===void 0&&(A=!1),D===void 0&&(D=!0),W===void 0&&(W=null),V===void 0&&(V=!1),P===this.currentFramebuffer)return this;var K=this.gl,X=this.width,R=this.height;return P&&P.renderTexture&&D?(X=P.renderTexture.width,R=P.renderTexture.height):this.flush(),P?K.bindFramebuffer(K.FRAMEBUFFER,P.webGLFramebuffer):K.bindFramebuffer(K.FRAMEBUFFER,null),D&&K.viewport(0,0,X,R),W&&K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,W.webGLTexture,0),V&&(K.clearColor(0,0,0,0),K.clear(K.COLOR_BUFFER_BIT)),A&&(P?(this.drawingBufferHeight=R,this.pushScissor(0,0,X,R)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=P,this},popFramebuffer:function(P,A){P===void 0&&(P=!1),A===void 0&&(A=!0);var D=this.fboStack;D.pop();var W=D[D.length-1];return W||(W=null),this.setFramebuffer(W,P,A),W},restoreFramebuffer:function(P,A){P===void 0&&(P=!1),A===void 0&&(A=!0);var D=this.fboStack,W=D[D.length-1];W||(W=null),this.currentFramebuffer=null,this.setFramebuffer(W,P,A)},setProgram:function(P){return P!==this.currentProgram?(this.flush(),this.gl.useProgram(P.webGLProgram),this.currentProgram=P,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(P,A,D,W,V){V===void 0&&(V=!1);var K=this.gl,X=K.NEAREST,R=K.NEAREST,H=K.CLAMP_TO_EDGE,L=null;A=P?P.width:A,D=P?P.height:D;var N=l(A,D);if(N&&!V&&(H=K.REPEAT),W===a.ScaleModes.LINEAR&&this.config.antialias){var z=P&&P.compressed,U=!z&&N||z&&P.mipmaps.length>1;X=this.mipmapFilter&&U?this.mipmapFilter:K.LINEAR,R=K.LINEAR}return!P&&typeof A=="number"&&typeof D=="number"?L=this.createTexture2D(0,X,R,H,H,K.RGBA,null,A,D):L=this.createTexture2D(0,X,R,H,H,K.RGBA,P),L},createTexture2D:function(P,A,D,W,V,K,X,R,H,L,N,z){typeof R!="number"&&(R=X?X.width:1),typeof H!="number"&&(H=X?X.height:1);var U=new w(this.gl,P,A,D,W,V,K,X,R,H,L,N,z);return this.glTextureWrappers.push(U),U},createFramebuffer:function(P,A,D,W){this.currentFramebuffer=null;var V=new T(this.gl,P,A,D,W);return this.glFramebufferWrappers.push(V),V},beginBitmapMask:function(P,A){var D=this.gl;D&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==P&&(this.currentMask.mask=P,this.currentMask.camera=A))},drawBitmapMask:function(P,A,D){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),P.renderWebGL(this,P,A),this.maskSource.unbind(!0),this.maskTarget.unbind();var W=this.gl,V=this.getCurrentStencilMask();V?(W.enable(W.STENCIL_TEST),V.mask.applyStencil(this,V.camera,!0)):this.currentMask.mask=null,this.pipelines.set(D),W.activeTexture(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,this.maskTarget.texture.webGLTexture),W.activeTexture(W.TEXTURE1),W.bindTexture(W.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(P,A){var D=new S(this.gl,P,A);return this.glProgramWrappers.push(D),D},createVertexBuffer:function(P,A){var D=this.gl,W=new v(D,P,D.ARRAY_BUFFER,A);return this.glBufferWrappers.push(W),W},createAttribLocation:function(P,A){var D=new C(this.gl,P,A);return this.glAttribLocationWrappers.push(D),D},createUniformLocation:function(P,A){var D=new M(this.gl,P,A);return this.glUniformLocationWrappers.push(D),D},createIndexBuffer:function(P,A){var D=this.gl,W=new v(D,P,D.ELEMENT_ARRAY_BUFFER,A);return this.glBufferWrappers.push(W),W},deleteTexture:function(P){if(P)return m(this.glTextureWrappers,P),P.destroy(),this},deleteFramebuffer:function(P){return P?(m(this.fboStack,P),m(this.glFramebufferWrappers,P),P.destroy(),this):this},deleteProgram:function(P){return P&&(m(this.glProgramWrappers,P),P.destroy()),this},deleteAttribLocation:function(P){return P&&(m(this.glAttribLocationWrappers,P),P.destroy()),this},deleteUniformLocation:function(P){return P&&(m(this.glUniformLocationWrappers,P),P.destroy()),this},deleteBuffer:function(P){return P?(m(this.glBufferWrappers,P),P.destroy(),this):this},preRenderCamera:function(P){var A=P.x,D=P.y,W=P.width,V=P.height,K=P.backgroundColor;if(P.emit(n.PRE_RENDER,P),this.pipelines.preBatchCamera(P),this.pushScissor(A,D,W,V),P.mask&&(this.currentCameraMask.mask=P.mask,this.currentCameraMask.camera=P._maskCamera,P.mask.preRenderWebGL(this,P,P._maskCamera)),K.alphaGL>0){var X=this.pipelines.setMulti();X.drawFillRect(A,D,W,V,g.getTintFromFloats(K.blueGL,K.greenGL,K.redGL,1),K.alphaGL)}},getCurrentStencilMask:function(){var P=null,A=this.maskStack,D=this.currentCameraMask;return A.length>0?P=A[A.length-1]:D.mask&&D.mask.isStencil&&(P=D),P},postRenderCamera:function(P){var A=P.flashEffect,D=P.fadeEffect;if(A.isRunning||D.isRunning||D.isComplete){var W=this.pipelines.setMulti();A.postRenderWebGL(W,g.getTintFromFloats),D.postRenderWebGL(W,g.getTintFromFloats)}P.dirty=!1,this.popScissor(),P.mask&&(this.currentCameraMask.mask=null,P.mask.postRenderWebGL(this,P._maskCamera)),this.pipelines.postBatchCamera(P),P.emit(n.POST_RENDER,P)},preRender:function(){if(!this.contextLost){var P=this.gl;if(P.bindFramebuffer(P.FRAMEBUFFER,null),this.emit(s.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var A=this.config.backgroundColor;P.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),P.clear(P.COLOR_BUFFER_BIT|P.DEPTH_BUFFER_BIT|P.STENCIL_BUFFER_BIT)}P.enable(P.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&P.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(s.PRE_RENDER)}},render:function(P,A,D){if(!this.contextLost){var W=A.length;if(this.emit(s.RENDER,P,D),this.preRenderCamera(D),W===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(D);return}this.currentType="";for(var V=this.currentMask,K=0;K<W;K++){this.finalType=K===W-1;var X=A[K],R=X.mask;V=this.currentMask,V.mask&&V.mask!==R&&V.mask.postRenderWebGL(this,V.camera),R&&V.mask!==R&&R.preRenderWebGL(this,X,D),X.blendMode!==this.currentBlendMode&&this.setBlendMode(X.blendMode);var H=X.type;H!==this.currentType&&(this.newType=!0,this.currentType=H),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=A[K+1].type===this.currentType,X.renderWebGL(this,X,D),this.newType=!1}V=this.currentMask,V.mask&&V.mask.postRenderWebGL(this,V.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(D)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(s.POST_RENDER);var P=this.snapshotState;P.callback&&(y(this.gl,P),P.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var P=this.gl,A=this.getCurrentStencilMask();if(A){var D=A.mask;P.enable(P.STENCIL_TEST),D.invertAlpha?P.stencilFunc(P.NOTEQUAL,D.level,255):P.stencilFunc(P.EQUAL,D.level,255)}},snapshot:function(P,A,D){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,P,A,D)},snapshotArea:function(P,A,D,W,V,K,X){var R=this.snapshotState;return R.callback=V,R.type=K,R.encoder=X,R.getPixel=!1,R.x=P,R.y=A,R.width=D,R.height=W,this},snapshotPixel:function(P,A,D){return this.snapshotArea(P,A,1,1,D),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(P,A,D,W,V,K,X,R,H,L,N){V===void 0&&(V=!1),K===void 0&&(K=0),X===void 0&&(X=0),R===void 0&&(R=A),H===void 0&&(H=D),L==="pixel"&&(V=!0,L="image/png");var z=this.currentFramebuffer;this.snapshotArea(K,X,R,H,W,L,N);var U=this.snapshotState;return U.getPixel=V,U.isFramebuffer=!0,U.bufferWidth=A,U.bufferHeight=D,U.width=Math.min(U.width,A),U.height=Math.min(U.height,D),this.setFramebuffer(P),y(this.gl,U),this.setFramebuffer(z),U.callback=null,U.isFramebuffer=!1,this},canvasToTexture:function(P,A,D,W){D===void 0&&(D=!1),W===void 0&&(W=!1);var V=this.gl,K=V.NEAREST,X=V.NEAREST,R=P.width,H=P.height,L=V.CLAMP_TO_EDGE,N=l(R,H);return!D&&N&&(L=V.REPEAT),this.config.antialias&&(K=N&&this.mipmapFilter?this.mipmapFilter:V.LINEAR,X=V.LINEAR),A?(A.update(P,R,H,W,L,L,K,X,A.format),A):this.createTexture2D(0,K,X,L,L,V.RGBA,P,R,H,!0,!1,W)},createCanvasTexture:function(P,A,D){return A===void 0&&(A=!1),D===void 0&&(D=!1),this.canvasToTexture(P,null,A,D)},updateCanvasTexture:function(P,A,D,W){return D===void 0&&(D=!1),W===void 0&&(W=!1),this.canvasToTexture(P,A,W,D)},videoToTexture:function(P,A,D,W){D===void 0&&(D=!1),W===void 0&&(W=!1);var V=this.gl,K=V.NEAREST,X=V.NEAREST,R=P.videoWidth,H=P.videoHeight,L=V.CLAMP_TO_EDGE,N=l(R,H);return!D&&N&&(L=V.REPEAT),this.config.antialias&&(K=N&&this.mipmapFilter?this.mipmapFilter:V.LINEAR,X=V.LINEAR),A?(A.update(P,R,H,W,L,L,K,X,A.format),A):this.createTexture2D(0,K,X,L,L,V.RGBA,P,R,H,!0,!0,W)},createVideoTexture:function(P,A,D){return A===void 0&&(A=!1),D===void 0&&(D=!1),this.videoToTexture(P,null,A,D)},updateVideoTexture:function(P,A,D,W){return D===void 0&&(D=!1),W===void 0&&(W=!1),this.videoToTexture(P,A,W,D)},createUint8ArrayTexture:function(P,A,D){var W=this.gl,V=W.NEAREST,K=W.NEAREST,X=W.CLAMP_TO_EDGE,R=l(A,D);return R&&(X=W.REPEAT),this.createTexture2D(0,V,K,X,X,W.RGBA,P,A,D)},setTextureFilter:function(P,A){var D=this.gl,W=A===0?D.LINEAR:D.NEAREST;D.activeTexture(D.TEXTURE0);var V=D.getParameter(D.TEXTURE_BINDING_2D);return D.bindTexture(D.TEXTURE_2D,P.webGLTexture),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,W),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,W),P.minFilter=W,P.magFilter=W,V&&D.bindTexture(D.TEXTURE_2D,V),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var P=function(A){A.destroy()};o(this.glAttribLocationWrappers,P),o(this.glBufferWrappers,P),o(this.glFramebufferWrappers,P),o(this.glProgramWrappers,P),o(this.glTextureWrappers,P),o(this.glUniformLocationWrappers,P),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});f.exports=E}),38683:((f,x,e)=>{var o=e(83419),m=e(95428),n=e(95540),r=e(14500),a=new o({initialize:function(s,l,i,h,d){this.pipeline=s,this.name=l,this.renderer=s.renderer,this.gl=this.renderer.gl,this.fragSrc=h,this.vertSrc=i,this.program=this.renderer.createProgram(i,h),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(d),this.createUniforms()},createAttributes:function(t){var s=0,l=0,i=[];this.vertexComponentCount=0;for(var h=0;h<t.length;h++){var d=t[h],c=d.name,u=n(d,"size",1),p=n(d,"type",r.FLOAT),g=p.enum,y=p.size,v=!!d.normalized;i.push({name:c,size:u,type:g,normalized:v,offset:l,enabled:!1,location:-1}),y===4?s+=u:s++,l+=u*y}this.vertexSize=l,this.vertexComponentCount=s,this.attributes=i},bind:function(t,s){return t===void 0&&(t=!1),s===void 0&&(s=!1),s&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){t===void 0&&(t=!1);for(var s=this.gl,l=this.renderer,i=this.vertexSize,h=this.attributes,d=this.program,c=0;c<h.length;c++){var u=h[c],p=u.size,g=u.type,y=u.offset,v=u.enabled,S=u.location,w=!!u.normalized;if(t){S!==-1&&l.deleteAttribLocation(S);var T=this.renderer.createAttribLocation(d,u.name);T.webGLAttribLocation>=0?(s.enableVertexAttribArray(T.webGLAttribLocation),s.vertexAttribPointer(T.webGLAttribLocation,p,g,w,i,y),u.enabled=!0,u.location=T):T.webGLAttribLocation!==-1&&s.disableVertexAttribArray(T.webGLAttribLocation)}else v?s.vertexAttribPointer(S.webGLAttribLocation,p,g,w,i,y):!v&&S!==-1&&S.webGLAttribLocation>-1&&(s.disableVertexAttribArray(S.webGLAttribLocation),u.location=-1)}return this},createUniforms:function(){var t=this.gl,s=this.program,l=this.uniforms,i,h,d,c=t.getProgramParameter(s.webGLProgram,t.ACTIVE_UNIFORMS);for(i=0;i<c;i++){var u=t.getActiveUniform(s.webGLProgram,i);if(u){h=u.name,d=this.renderer.createUniformLocation(s,h),d!==null&&(l[h]={name:h,location:d,setter:null,value1:null,value2:null,value3:null,value4:null});var p=h.indexOf("[");p>0&&(h=h.substr(0,p),l.hasOwnProperty(h)||(d=this.renderer.createUniformLocation(s,h),d!==null&&(l[h]={name:h,location:d,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var t=this.gl;this.renderer.setProgram(this.program);for(var s in this.uniforms){var l=this.uniforms[s];l.setter&&l.setter.call(t,l.location.webGLUniformLocation,l.value1,l.value2,l.value3,l.value4)}},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var s=this.uniforms[t];return s&&(s.value1=null,s.value2=null,s.value3=null,s.value4=null),this},setUniform1:function(t,s,l,i){var h=this.uniforms[s];return h?((i||h.value1!==l)&&(h.setter||(h.setter=t),h.value1=l,this.renderer.setProgram(this.program),t.call(this.gl,h.location.webGLUniformLocation,l),this.pipeline.currentShader=this),this):this},setUniform2:function(t,s,l,i,h){var d=this.uniforms[s];return d?((h||d.value1!==l||d.value2!==i)&&(d.setter||(d.setter=t),d.value1=l,d.value2=i,this.renderer.setProgram(this.program),t.call(this.gl,d.location.webGLUniformLocation,l,i),this.pipeline.currentShader=this),this):this},setUniform3:function(t,s,l,i,h,d){var c=this.uniforms[s];return c?((d||c.value1!==l||c.value2!==i||c.value3!==h)&&(c.setter||(c.setter=t),c.value1=l,c.value2=i,c.value3=h,this.renderer.setProgram(this.program),t.call(this.gl,c.location.webGLUniformLocation,l,i,h),this.pipeline.currentShader=this),this):this},setUniform4:function(t,s,l,i,h,d,c){var u=this.uniforms[s];return u?((c||u.value1!==l||u.value2!==i||u.value3!==h||u.value4!==d)&&(u.setter||(u.setter=t),u.value1=l,u.value2=i,u.value3=h,u.value4=d,this.renderer.setProgram(this.program),t.call(this.gl,u.location.webGLUniformLocation,l,i,h,d),this.pipeline.currentShader=this),this):this},setBoolean:function(t,s){return this.setUniform1(this.gl.uniform1i,t,Number(s))},set1f:function(t,s){return this.setUniform1(this.gl.uniform1f,t,s)},set2f:function(t,s,l){return this.setUniform2(this.gl.uniform2f,t,s,l)},set3f:function(t,s,l,i){return this.setUniform3(this.gl.uniform3f,t,s,l,i)},set4f:function(t,s,l,i,h){return this.setUniform4(this.gl.uniform4f,t,s,l,i,h)},set1fv:function(t,s){return this.setUniform1(this.gl.uniform1fv,t,s,!0)},set2fv:function(t,s){return this.setUniform1(this.gl.uniform2fv,t,s,!0)},set3fv:function(t,s){return this.setUniform1(this.gl.uniform3fv,t,s,!0)},set4fv:function(t,s){return this.setUniform1(this.gl.uniform4fv,t,s,!0)},set1iv:function(t,s){return this.setUniform1(this.gl.uniform1iv,t,s,!0)},set2iv:function(t,s){return this.setUniform1(this.gl.uniform2iv,t,s,!0)},set3iv:function(t,s){return this.setUniform1(this.gl.uniform3iv,t,s,!0)},set4iv:function(t,s){return this.setUniform1(this.gl.uniform4iv,t,s,!0)},set1i:function(t,s){return this.setUniform1(this.gl.uniform1i,t,s)},set2i:function(t,s,l){return this.setUniform2(this.gl.uniform2i,t,s,l)},set3i:function(t,s,l,i){return this.setUniform3(this.gl.uniform3i,t,s,l,i)},set4i:function(t,s,l,i,h){return this.setUniform4(this.gl.uniform4i,t,s,l,i,h)},setMatrix2fv:function(t,s,l){return this.setUniform2(this.gl.uniformMatrix2fv,t,s,l,!0)},setMatrix3fv:function(t,s,l){return this.setUniform2(this.gl.uniformMatrix3fv,t,s,l,!0)},setMatrix4fv:function(t,s,l){return this.setUniform2(this.gl.uniformMatrix4fv,t,s,l,!0)},createProgram:function(t,s){return t===void 0&&(t=this.vertSrc),s===void 0&&(s=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=t,this.fragSrc=s,this.program=this.renderer.createProgram(t,s),this.createUniforms(),this.rebind()},destroy:function(){var t=this.renderer;m(this.uniforms,function(s){t.deleteUniformLocation(s.location)}),this.uniforms=null,m(this.attributes,function(s){t.deleteAttribLocation(s.location)}),this.attributes=null,t.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});f.exports=a}),14500:(f=>{var x={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};f.exports=x}),4159:((f,x,e)=>{var o=e(14500),m=e(79291),n={PipelineManager:e(7530),Pipelines:e(96615),RenderTarget:e(32302),Utils:e(70554),WebGLPipeline:e(29100),WebGLRenderer:e(74797),WebGLShader:e(38683),Wrappers:e(9503)};n=m(!1,n,o),f.exports=n}),31302:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(78908),r=e(85191),a=e(14500),t=e(29100),s=new o({Extends:t,initialize:function(i){i.fragShader=m(i,"fragShader",n),i.vertShader=m(i,"vertShader",r),i.batchSize=m(i,"batchSize",1),i.vertices=m(i,"vertices",[-1,1,-1,-7,7,1]),i.attributes=m(i,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),t.call(this,i)},boot:function(){t.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(l,i){t.prototype.resize.call(this,l,i),this.set2f("uResolution",l,i)},beginMask:function(l,i,h){this.renderer.beginBitmapMask(l,h)},endMask:function(l,i,h){var d=this.gl,c=this.renderer,u=l.bitmapMask;u&&d&&(c.drawBitmapMask(u,i,this),h&&this.set2f("uResolution",h.width,h.height),this.set1i("uInvertMaskAlpha",l.invertAlpha),d.drawArrays(this.topology,0,3),h&&this.set2f("uResolution",this.width,this.height),d.bindTexture(d.TEXTURE_2D,null))}});f.exports=s}),92651:((f,x,e)=>{var o=e(83419),m=e(58918),n=e(14811),r=e(95540),a=e(43558),t=e(89350),s=e(70554),l=new o({Extends:a,initialize:function(h){h.shaders=[s.setGlowQuality(t.FXGlowFrag,h.game),t.FXShadowFrag,t.FXPixelateFrag,t.FXVignetteFrag,t.FXShineFrag,t.FXBlurLowFrag,t.FXBlurMedFrag,t.FXBlurHighFrag,t.FXGradientFrag,t.FXBloomFrag,t.ColorMatrixFrag,t.FXCircleFrag,t.FXBarrelFrag,t.FXDisplacementFrag,t.FXWipeFrag,t.FXBokehFrag],a.call(this,h);var d=this.game;this.glow=new m.Glow(d),this.shadow=new m.Shadow(d),this.pixelate=new m.Pixelate(d),this.vignette=new m.Vignette(d),this.shine=new m.Shine(d),this.gradient=new m.Gradient(d),this.circle=new m.Circle(d),this.barrel=new m.Barrel(d),this.wipe=new m.Wipe(d),this.bokeh=new m.Bokeh(d);var c=[];c[n.GLOW]=this.onGlow,c[n.SHADOW]=this.onShadow,c[n.PIXELATE]=this.onPixelate,c[n.VIGNETTE]=this.onVignette,c[n.SHINE]=this.onShine,c[n.BLUR]=this.onBlur,c[n.GRADIENT]=this.onGradient,c[n.BLOOM]=this.onBloom,c[n.COLOR_MATRIX]=this.onColorMatrix,c[n.CIRCLE]=this.onCircle,c[n.BARREL]=this.onBarrel,c[n.DISPLACEMENT]=this.onDisplacement,c[n.WIPE]=this.onWipe,c[n.BOKEH]=this.onBokeh,this.fxHandlers=c,this.source,this.target,this.swap},onDraw:function(i,h,d){this.source=i,this.target=h,this.swap=d;var c=i.width,u=i.height,p=this.tempSprite,g=this.fxHandlers;if(p&&p.preFX)for(var y=p.preFX.list,v=0;v<y.length;v++){var S=y[v];S.active&&g[S.type].call(this,S,c,u)}this.drawToGame(this.source)},runDraw:function(){var i=this.source,h=this.target;this.copy(i,h),this.source=h,this.target=i},onGlow:function(i,h,d){var c=this.shaders[n.GLOW];this.setShader(c),this.glow.onPreRender(i,c,h,d),this.runDraw()},onShadow:function(i){var h=this.shaders[n.SHADOW];this.setShader(h),this.shadow.onPreRender(i,h),this.runDraw()},onPixelate:function(i,h,d){var c=this.shaders[n.PIXELATE];this.setShader(c),this.pixelate.onPreRender(i,c,h,d),this.runDraw()},onVignette:function(i){var h=this.shaders[n.VIGNETTE];this.setShader(h),this.vignette.onPreRender(i,h),this.runDraw()},onShine:function(i,h,d){var c=this.shaders[n.SHINE];this.setShader(c),this.shine.onPreRender(i,c,h,d),this.runDraw()},onBlur:function(i,h,d){var c=r(i,"quality"),u=this.shaders[n.BLUR+c];this.setShader(u),this.set1i("uMainSampler",0),this.set2f("resolution",h,d),this.set1f("strength",r(i,"strength")),this.set3fv("color",r(i,"glcolor"));for(var p=r(i,"x"),g=r(i,"y"),y=r(i,"steps"),v=0;v<y;v++)this.set2f("offset",p,0),this.runDraw(),this.set2f("offset",0,g),this.runDraw()},onGradient:function(i){var h=this.shaders[n.GRADIENT];this.setShader(h),this.gradient.onPreRender(i,h),this.runDraw()},onBloom:function(i,h,d){var c=this.shaders[n.BLOOM];this.copySprite(this.source,this.swap),this.setShader(c),this.set1i("uMainSampler",0),this.set1f("strength",r(i,"blurStrength")),this.set3fv("color",r(i,"glcolor"));for(var u=2/h*r(i,"offsetX"),p=2/d*r(i,"offsetY"),g=r(i,"steps"),y=0;y<g;y++)this.set2f("offset",u,0),this.runDraw(),this.set2f("offset",0,p),this.runDraw();this.blendFrames(this.swap,this.source,this.target,r(i,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(i){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",i.getData()),this.set1f("uAlpha",i.alpha),this.runDraw()},onCircle:function(i,h,d){var c=this.shaders[n.CIRCLE];this.setShader(c),this.circle.onPreRender(i,c,h,d),this.runDraw()},onBarrel:function(i){var h=this.shaders[n.BARREL];this.setShader(h),this.barrel.onPreRender(i,h),this.runDraw()},onDisplacement:function(i){this.setShader(this.shaders[n.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",i.x,i.y),this.bindTexture(i.glTexture,1),this.runDraw()},onWipe:function(i){var h=this.shaders[n.WIPE];this.setShader(h),this.wipe.onPreRender(i,h),this.runDraw()},onBokeh:function(i,h,d){var c=this.shaders[n.BOKEH];this.setShader(c),this.bokeh.onPreRender(i,c,h,d),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,a.prototype.destroy.call(this),this}});f.exports=l}),96569:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(31063),r=e(57516),a=e(61340),t=e(26099),s=e(29100),l=new o({Extends:r,initialize:function(h){var d=m(h,"fragShader",n);h.fragShader=d.replace("%LIGHT_COUNT%",h.game.renderer.config.maxLights),r.call(this,h),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new t,this._tempMatrix=new a,this._tempMatrix2=new a},boot:function(){s.prototype.boot.call(this)},onRender:function(i,h){var d=i.sys.lights;if(this.lightsActive=!1,!(!d||!d.active)){var c=d.getLights(h),u=c.length;this.lightsActive=!0;var p,g=this.renderer,y=g.height,v=h.matrix,S=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",h.x,h.y,h.rotation,h.zoom),this.set3f("uAmbientLightColor",d.ambientColor.r,d.ambientColor.g,d.ambientColor.b),this.set1i("uLightCount",u),p=0;p<u;p++){var w=c[p].light,T=w.color,C="uLights["+p+"].";v.transformPoint(w.x,w.y,S),this.set2f(C+"position",S.x-h.scrollX*w.scrollFactorX*h.zoom,y-(S.y-h.scrollY*w.scrollFactorY*h.zoom)),this.set3f(C+"color",T.r,T.g,T.b),this.set1f(C+"intensity",w.intensity),this.set1f(C+"radius",w.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(i){if(i!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var h=this.inverseRotationMatrix;if(i){var d=-i,c=Math.cos(d),u=Math.sin(d);h[1]=u,h[3]=-u,h[0]=h[4]=c}else h[0]=h[4]=1,h[1]=h[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,h),this.currentNormalMapRotation=i}},setTexture2D:function(i,h){var d=this.renderer;i===void 0&&(i=d.whiteTexture);var c=this.getNormalMap(h);this.isNewNormalMap(i,c)&&(this.flush(),this.createBatch(i),this.addTextureToBatch(c),this.currentNormalMap=c);var u=0;if(h&&h.parentContainer){var p=h.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);u=p.rotationNormalized}else h&&(u=h.rotation);return this.currentBatch===null&&(this.createBatch(i),this.addTextureToBatch(c)),this.setNormalMapRotation(u),0},setGameObject:function(i,h){h===void 0&&(h=i.frame);var d=h.glTexture,c=this.getNormalMap(i);if(this.isNewNormalMap(d,c)&&(this.flush(),this.createBatch(d),this.addTextureToBatch(c),this.currentNormalMap=c),i.parentContainer){var u=i.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(u.rotationNormalized)}else this.setNormalMapRotation(i.rotation);return this.currentBatch===null&&(this.createBatch(d),this.addTextureToBatch(c)),0},isNewNormalMap:function(i,h){return this.currentTexture!==i||this.currentNormalMap!==h},getNormalMap:function(i){var h;if(i)i.displayTexture?h=i.displayTexture.dataSource[i.displayFrame.sourceIndex]:i.texture?h=i.texture.dataSource[i.frame.sourceIndex]:i.tileset&&(Array.isArray(i.tileset)?h=i.tileset[0].image.dataSource[0]:h=i.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return h?h.glTexture:this.renderer.normalTexture},batchSprite:function(i,h,d){this.lightsActive&&r.prototype.batchSprite.call(this,i,h,d)},batchTexture:function(i,h,d,c,u,p,g,y,v,S,w,T,C,M,E,P,A,D,W,V,K,X,R,H,L,N,z,U,Y,$,Z,Q){this.lightsActive&&r.prototype.batchTexture.call(this,i,h,d,c,u,p,g,y,v,S,w,T,C,M,E,P,A,D,W,V,K,X,R,H,L,N,z,U,Y,$,Z,Q)},batchTextureFrame:function(i,h,d,c,u,p,g){this.lightsActive&&r.prototype.batchTextureFrame.call(this,i,h,d,c,u,p,g)}});f.exports=l}),56527:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(57516),r=e(45561),a=e(60722),t=e(14500),s=e(29100),l=new o({Extends:n,initialize:function(h){h.fragShader=m(h,"fragShader",r),h.vertShader=m(h,"vertShader",a),h.attributes=m(h,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),h.forceZero=!0,h.resizeUniform="uResolution",n.call(this,h)},boot:function(){s.prototype.boot.call(this);var i=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",i.width,i.height)}});f.exports=l}),57516:((f,x,e)=>{var o=e(83419),m=e(94811),n=e(95540),r=e(98840),a=e(44667),t=e(61340),s=e(70554),l=e(14500),i=e(29100),h=new o({Extends:i,initialize:function(c){var u=c.game.renderer,p=n(c,"fragShader",r);c.fragShader=s.parseFragmentShaderMaxTextures(p,u.maxTextures),c.vertShader=n(c,"vertShader",a),c.attributes=n(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),c.resizeUniform="uResolution",i.call(this,c),this._tempMatrix1=new t,this._tempMatrix2=new t,this._tempMatrix3=new t,this.calcMatrix=new t,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){i.prototype.boot.call(this);var d=this.renderer;this.set1iv("uMainSampler",d.textureIndexes),this.set2f("uResolution",d.width,d.height)},batchSprite:function(d,c,u){this.manager.set(this,d);var p=this._tempMatrix1,g=this._tempMatrix2,y=this._tempMatrix3,v=d.frame,S=v.glTexture,w=v.u0,T=v.v0,C=v.u1,M=v.v1,E=v.x,P=v.y,A=v.cutWidth,D=v.cutHeight,W=v.customPivot,V=d.displayOriginX,K=d.displayOriginY,X=-V+E,R=-K+P;if(d.isCropped){var H=d._crop;(H.flipX!==d.flipX||H.flipY!==d.flipY)&&v.updateCropUVs(H,d.flipX,d.flipY),w=H.u0,T=H.v0,C=H.u1,M=H.v1,A=H.width,D=H.height,E=H.x,P=H.y,X=-V+E,R=-K+P}var L=1,N=1;d.flipX&&(W||(X+=-v.realWidth+V*2),L=-1),d.flipY&&(W||(R+=-v.realHeight+K*2),N=-1);var z=d.x,U=d.y;c.roundPixels&&(z=Math.floor(z),U=Math.floor(U)),g.applyITRS(z,U,d.rotation,d.scaleX*L,d.scaleY*N),p.copyFrom(c.matrix),u?(p.multiplyWithOffset(u,-c.scrollX*d.scrollFactorX,-c.scrollY*d.scrollFactorY),g.e=z,g.f=U):(g.e-=c.scrollX*d.scrollFactorX,g.f-=c.scrollY*d.scrollFactorY),p.multiply(g,y);var Y=y.setQuad(X,R,X+A,R+D,c.renderRoundPixels),$=s.getTintAppendFloatAlpha,Z=c.alpha,Q=$(d.tintTopLeft,Z*d._alphaTL),q=$(d.tintTopRight,Z*d._alphaTR),j=$(d.tintBottomLeft,Z*d._alphaBL),_=$(d.tintBottomRight,Z*d._alphaBR);this.shouldFlush(6)&&this.flush();var te=this.setGameObject(d,v);this.manager.preBatch(d),this.batchQuad(d,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],w,T,C,M,Q,q,j,_,d.tintFill,S,te),this.manager.postBatch(d)},batchTexture:function(d,c,u,p,g,y,v,S,w,T,C,M,E,P,A,D,W,V,K,X,R,H,L,N,z,U,Y,$,Z,Q,q,j,_){_===void 0&&(_=!1),this.manager.set(this,d);var te=this._tempMatrix1,se=this._tempMatrix2,ie=this._tempMatrix3,ne=V/u+Y,he=K/p+$,ue=(V+X)/u+Y,ae=(K+R)/p+$,oe=v,le=S,fe=-D,de=-W;if(d.isCropped){var me=d._crop,pe=me.width,ve=me.height;oe=pe,le=ve,v=pe,S=ve,V=me.x,K=me.y;var we=V,Ae=K;M&&(we=X-me.x-pe),E&&(Ae=R-me.y-ve),ne=we/u+Y,he=Ae/p+$,ue=(we+pe)/u+Y,ae=(Ae+ve)/p+$,fe=-D+V,de=-W+K}E=E^(!q&&c.isRenderTexture?1:0),M&&(oe*=-1,fe+=v),E&&(le*=-1,de+=S),Z.roundPixels&&(g=Math.floor(g),y=Math.floor(y)),se.applyITRS(g,y,C,w,T),te.copyFrom(Z.matrix),Q?(te.multiplyWithOffset(Q,-Z.scrollX*P,-Z.scrollY*A),se.e=g,se.f=y):(se.e-=Z.scrollX*P,se.f-=Z.scrollY*A),te.multiply(se,ie);var Se=ie.setQuad(fe,de,fe+oe,de+le,Z.renderRoundPixels);j==null&&(j=this.setTexture2D(c)),d&&!_&&this.manager.preBatch(d),this.batchQuad(d,Se[0],Se[1],Se[2],Se[3],Se[4],Se[5],Se[6],Se[7],ne,he,ue,ae,H,L,N,z,U,c,j),d&&!_&&this.manager.postBatch(d)},batchTextureFrame:function(d,c,u,p,g,y,v){this.manager.set(this);var S=this._tempMatrix1.copyFrom(y),w=this._tempMatrix2;v?S.multiply(v,w):w=S;var T=w.setQuad(c,u,c+d.width,u+d.height),C=this.setTexture2D(d.source.glTexture);p=s.getTintAppendFloatAlpha(p,g),this.batchQuad(null,T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],d.u0,d.v0,d.u1,d.v1,p,p,p,p,0,d.glTexture,C)},batchFillRect:function(d,c,u,p,g,y){this.renderer.pipelines.set(this);var v=this.calcMatrix;y&&y.multiply(g,v);var S=v.setQuad(d,c,d+u,c+p),w=this.fillTint;this.batchQuad(null,S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],0,0,1,1,w.TL,w.TR,w.BL,w.BR,2)},batchFillTriangle:function(d,c,u,p,g,y,v,S){this.renderer.pipelines.set(this);var w=this.calcMatrix;S&&S.multiply(v,w);var T=w.getX(d,c),C=w.getY(d,c),M=w.getX(u,p),E=w.getY(u,p),P=w.getX(g,y),A=w.getY(g,y),D=this.fillTint;this.batchTri(null,T,C,M,E,P,A,0,0,1,1,D.TL,D.TR,D.BL,2)},batchStrokeTriangle:function(d,c,u,p,g,y,v,S,w){var T=this.tempTriangle;T[0].x=d,T[0].y=c,T[0].width=v,T[1].x=u,T[1].y=p,T[1].width=v,T[2].x=g,T[2].y=y,T[2].width=v,T[3].x=d,T[3].y=c,T[3].width=v,this.batchStrokePath(T,v,!1,S,w)},batchFillPath:function(d,c,u){this.renderer.pipelines.set(this);var p=this.calcMatrix;u&&u.multiply(c,p);for(var g=d.length,y=this.polygonCache,v,S,w=this.fillTint.TL,T=this.fillTint.TR,C=this.fillTint.BL,M=0;M<g;++M)S=d[M],y.push(S.x,S.y);v=m(y),g=v.length;for(var E=0;E<g;E+=3){var P=v[E+0]*2,A=v[E+1]*2,D=v[E+2]*2,W=y[P+0],V=y[P+1],K=y[A+0],X=y[A+1],R=y[D+0],H=y[D+1],L=p.getX(W,V),N=p.getY(W,V),z=p.getX(K,X),U=p.getY(K,X),Y=p.getX(R,H),$=p.getY(R,H);this.batchTri(null,L,N,z,U,Y,$,0,0,1,1,w,T,C,2)}y.length=0},batchStrokePath:function(d,c,u,p,g){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=d.length-1,v=0;v<y;v++){var S=d[v],w=d[v+1];this.batchLine(S.x,S.y,w.x,w.y,S.width/2,w.width/2,c,v,!u&&v===y-1,p,g)}},batchLine:function(d,c,u,p,g,y,v,S,w,T,C){this.renderer.pipelines.set(this);var M=this.calcMatrix;C&&C.multiply(T,M);var E=u-d,P=p-c,A=Math.sqrt(E*E+P*P);if(A!==0){var D=g*(p-c)/A,W=g*(d-u)/A,V=y*(p-c)/A,K=y*(d-u)/A,X=u-V,R=p-K,H=d-D,L=c-W,N=u+V,z=p+K,U=d+D,Y=c+W,$=M.getX(X,R),Z=M.getY(X,R),Q=M.getX(H,L),q=M.getY(H,L),j=M.getX(N,z),_=M.getY(N,z),te=M.getX(U,Y),se=M.getY(U,Y),ie=this.strokeTint,ne=ie.TL,he=ie.TR,ue=ie.BL,ae=ie.BR;if(this.batchQuad(null,te,se,Q,q,$,Z,j,_,0,0,1,1,ne,he,ue,ae,2),!(v<=2)){var oe=this.prevQuad,le=this.firstQuad;S>0&&oe[4]?this.batchQuad(null,te,se,Q,q,oe[0],oe[1],oe[2],oe[3],0,0,1,1,ne,he,ue,ae,2):(le[0]=te,le[1]=se,le[2]=Q,le[3]=q,le[4]=1),w&&le[4]?this.batchQuad(null,$,Z,j,_,le[0],le[1],le[2],le[3],0,0,1,1,ne,he,ue,ae,2):(oe[0]=$,oe[1]=Z,oe[2]=j,oe[3]=_,oe[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,i.prototype.destroy.call(this),this}});f.exports=h}),43439:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(4127),r=e(89924),a=e(29100),t=new o({Extends:a,initialize:function(l){l.vertShader=m(l,"vertShader",r),l.fragShader=m(l,"fragShader",n),l.attributes=m(l,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,l)},onRender:function(s,l){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",l.zoom)},batchPointLight:function(s,l,i,h,d,c,u,p,g,y,v,S){var w=s.color,T=s.intensity,C=s.radius,M=s.attenuation,E=w.r*T,P=w.g*T,A=w.b*T,D=l.alpha*s.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(i,h,v,S,C,M,E,P,A,D),this.batchLightVert(d,c,v,S,C,M,E,P,A,D),this.batchLightVert(u,p,v,S,C,M,E,P,A,D),this.batchLightVert(i,h,v,S,C,M,E,P,A,D),this.batchLightVert(u,p,v,S,C,M,E,P,A,D),this.batchLightVert(g,y,v,S,C,M,E,P,A,D),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(s,l,i,h,d,c,u,p,g,y){var v=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;v[++S]=s,v[++S]=l,v[++S]=i,v[++S]=h,v[++S]=d,v[++S]=c,v[++S]=u,v[++S]=p,v[++S]=g,v[++S]=y,this.vertexCount++}});f.exports=t}),84057:((f,x,e)=>{var o=e(83419),m=e(89422),n=e(95540),r=e(27681),a=e(49627),t=e(29100),s=new o({Extends:t,initialize:function(i){i.renderTarget=n(i,"renderTarget",1),i.fragShader=n(i,"fragShader",r),i.vertShader=n(i,"vertShader",a),i.attributes=n(i,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),i.batchSize=1,i.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.call(this,i),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new m,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){t.prototype.boot.call(this);var l=this.manager.UTILITY_PIPELINE;this.fullFrame1=l.fullFrame1,this.fullFrame2=l.fullFrame2,this.halfFrame1=l.halfFrame1,this.halfFrame2=l.halfFrame2;var i=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",i.width,i.height);for(var h=this.renderTargets,d=0;d<h.length;d++)h[d].autoResize=!0},postBatch:function(l){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(l),this},onDraw:function(l){this.bindAndDraw(l)},getController:function(l){return l!==void 0?l:this.controller?this.controller:this},copySprite:function(l,i,h){h===void 0&&(h=!1);var d=this.gl;d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,l.texture.webGLTexture);var c=d.getParameter(d.FRAMEBUFFER_BINDING);d.bindFramebuffer(d.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i.texture.webGLTexture,0),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),h&&(d.bindTexture(d.TEXTURE_2D,null),d.bindFramebuffer(d.FRAMEBUFFER,c))},copyFrame:function(l,i,h,d,c){this.manager.copyFrame(l,i,h,d,c)},copyToGame:function(l){this.manager.copyToGame(l)},drawFrame:function(l,i,h){this.manager.drawFrame(l,i,h,this.colorMatrix)},blendFrames:function(l,i,h,d,c){this.manager.blendFrames(l,i,h,d,c)},blendFramesAdditive:function(l,i,h,d,c){this.manager.blendFramesAdditive(l,i,h,d,c)},clearFrame:function(l,i){this.manager.clearFrame(l,i)},blitFrame:function(l,i,h,d,c,u){this.manager.blitFrame(l,i,h,d,c,u)},copyFrameRect:function(l,i,h,d,c,u,p,g){this.manager.copyFrameRect(l,i,h,d,c,u,p,g)},bindAndDraw:function(l,i,h,d,c){h===void 0&&(h=!0),d===void 0&&(d=!0);var u=this.gl,p=this.renderer;this.bind(c),this.set1i("uMainSampler",0),i?(u.viewport(0,0,i.width,i.height),u.bindFramebuffer(u.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i.texture.webGLTexture,0),h&&(d?u.clearColor(0,0,0,0):u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1),p.currentFramebuffer||u.viewport(0,0,p.width,p.height)),p.restoreStencilMask(),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,l.texture.webGLTexture),u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.STATIC_DRAW),u.drawArrays(u.TRIANGLES,0,6),i&&(u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,p.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),t.prototype.destroy.call(this),this}});f.exports=s}),43558:((f,x,e)=>{var o=e(10312),m=e(67502),n=e(83419),r=e(96293),a=e(95540),t=e(57516),s=e(27681),l=e(87841),i=e(32302),h=e(45561),d=e(60722),c=e(29100),u=new n({Extends:t,initialize:function(g){var y=a(g,"fragShader",s),v=a(g,"vertShader",d),S=a(g,"drawShader",s),w=[{name:"DrawSprite",fragShader:h,vertShader:d},{name:"CopySprite",fragShader:y,vertShader:v},{name:"DrawGame",fragShader:S,vertShader:d},{name:"ColorMatrix",fragShader:r}],T=a(g,"shaders",[]);g.shaders=w.concat(T),g.vertShader||(g.vertShader=v),g.batchSize=1,t.call(this,g),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new l,this.targetBounds=new l,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){c.prototype.boot.call(this);var p=this.shaders,g=this.renderer;this.drawSpriteShader=p[0],this.copyShader=p[1],this.gameShader=p[2],this.colorMatrixShader=p[3],this.fsTarget=new i(g,g.width,g.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var y=new ArrayBuffer(168);this.quadVertexData=y,this.quadVertexViewF32=new Float32Array(y),this.quadVertexBuffer=g.createVertexBuffer(y,this.gl.STATIC_DRAW),this.onResize(g.width,g.height),this.currentShader=this.copyShader,this.set2f("uResolution",g.width,g.height)},onResize:function(p,g){var y=this.quadVertexViewF32;y[1]=g,y[22]=g,y[14]=p,y[28]=p,y[35]=p,y[36]=g},batchQuad:function(p,g,y,v,S,w,T,C,M,E,P,A,D,W,V,K,X,R,H){var L=Math.min(g,v,w,C),N=Math.min(y,S,T,M),z=Math.max(g,v,w,C),U=Math.max(y,S,T,M),Y=z-L,$=U-N,Z=this.spriteBounds.setTo(L,N,Y,$),Q=p?p.preFX.padding:0,q=Y+Q*2,j=$+Q*2,_=Math.abs(Math.max(q,j)),te=this.manager.getRenderTarget(_),se=this.targetBounds.setTo(0,0,te.width,te.height);m(se,Math.round(Z.centerX),Math.round(Z.centerY)),this.tempSprite=p;var ie=this.gl,ne=this.renderer;ne.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",ne.width,ne.height),this.flipProjectionMatrix(!0),p&&(this.onDrawSprite(p,te),p.preFX.onFX(this));var he=this.fsTarget;return this.flush(),ie.viewport(0,0,ne.width,ne.height),ie.bindFramebuffer(ie.FRAMEBUFFER,he.framebuffer.webGLFramebuffer),ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,he.texture.webGLTexture,0),ie.clearColor(0,0,0,0),ie.clear(ie.COLOR_BUFFER_BIT),this.setTexture2D(H),this.batchVert(g,y,E,P,0,R,W),this.batchVert(v,S,E,D,0,R,K),this.batchVert(w,T,A,D,0,R,X),this.batchVert(g,y,E,P,0,R,W),this.batchVert(w,T,A,D,0,R,X),this.batchVert(C,M,A,P,0,R,V),this.flush(),this.flipProjectionMatrix(!1),ie.activeTexture(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,te.texture.webGLTexture),ie.copyTexSubImage2D(ie.TEXTURE_2D,0,0,0,se.x,se.y,se.width,se.height),ie.bindFramebuffer(ie.FRAMEBUFFER,null),ie.bindTexture(ie.TEXTURE_2D,null),this.onBatch(p),this.currentShader=this.copyShader,this.onDraw(te,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(p,g,y,v,S,w,T){y===void 0&&(y=!0),v===void 0&&(v=!0),S===void 0&&(S=!1),T===void 0&&(T=this.copyShader);var C=this.gl,M=this.tempSprite;w&&(T=this.colorMatrixShader),this.currentShader=T;var E=this.setVertexBuffer(this.quadVertexBuffer);T.bind(E,!1);var P=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",P.width,P.height),M.preFX.onFXCopy(this),this.onCopySprite(p,g,M),w&&(this.set1fv("uColorMatrix",w.getData()),this.set1f("uAlpha",w.alpha)),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,p.texture.webGLTexture),p.height>g.height)C.viewport(0,0,p.width,p.height),this.setTargetUVs(p,g);else{var A=g.height-p.height;C.viewport(0,A,p.width,p.height),this.resetUVs()}if(C.bindFramebuffer(C.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,g.texture.webGLTexture,0),y&&(C.clearColor(0,0,0,+!v),C.clear(C.COLOR_BUFFER_BIT)),S){var D=this.renderer.currentBlendMode;this.renderer.setBlendMode(o.ERASE)}C.bufferData(C.ARRAY_BUFFER,this.quadVertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),S&&this.renderer.setBlendMode(D),C.bindFramebuffer(C.FRAMEBUFFER,null)},copy:function(p,g){var y=this.gl;this.set1i("uMainSampler",0),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,p.texture.webGLTexture),y.viewport(0,0,p.width,p.height),this.setUVs(0,0,0,1,1,1,1,0),y.bindFramebuffer(y.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,g.texture.webGLTexture,0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.quadVertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null)},blendFrames:function(p,g,y,v,S){this.manager.blendFrames(p,g,y,v,S)},blendFramesAdditive:function(p,g,y,v,S){this.manager.blendFramesAdditive(p,g,y,v,S)},drawToGame:function(p){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(p)},copyToGame:function(p){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(p)},bindAndDraw:function(p){var g=this.gl,y=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(p.texture);var v=this._tempMatrix1.loadIdentity(),S=this.targetBounds.x,w=this.targetBounds.y,T=S+p.width,C=w+p.height,M=v.getX(S,w),E=v.getX(S,C),P=v.getX(T,C),A=v.getX(T,w),D=v.getY(S,w),W=v.getY(S,C),V=v.getY(T,C),K=v.getY(T,w),X=16777215;this.batchVert(M,D,0,0,0,0,X),this.batchVert(E,W,0,1,0,0,X),this.batchVert(P,V,1,1,0,0,X),this.batchVert(M,D,0,0,0,0,X),this.batchVert(P,V,1,1,0,0,X),this.batchVert(A,K,1,0,0,0,X),y.restoreFramebuffer(!1,!0),y.currentFramebuffer||g.viewport(0,0,y.width,y.height),y.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(p){this.drawToGame(p)},setUVs:function(p,g,y,v,S,w,T,C){var M=this.quadVertexViewF32;M[2]=p,M[3]=g,M[9]=y,M[10]=v,M[16]=S,M[17]=w,M[23]=p,M[24]=g,M[30]=S,M[31]=w,M[37]=T,M[38]=C},setTargetUVs:function(p,g){var y=g.height/p.height;y>.5?y=.5-(y-.5):y=.5+(.5-y),this.setUVs(0,y,0,1+y,1,1+y,1,y)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,t.prototype.destroy.call(this),this}});f.exports=u}),81041:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(57516),r=new o({Extends:n,initialize:function(t){t.topology=5,t.batchSize=m(t,"batchSize",256),n.call(this,t)}});f.exports=r}),12385:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(57516),r=e(45561),a=e(60722),t=e(29100),s=new o({Extends:n,initialize:function(i){i.fragShader=m(i,"fragShader",r),i.vertShader=m(i,"vertShader",a),i.forceZero=!0,n.call(this,i)},boot:function(){t.prototype.boot.call(this);var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height)}});f.exports=s}),7589:((f,x,e)=>{var o=e(35407),m=e(10312),n=e(83419),r=e(89422),a=e(96293),t=e(36682),s=e(95540),l=e(48247),i=e(49627),h=e(29100),d=new n({Extends:h,initialize:function(u){u.renderTarget=s(u,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),u.vertShader=s(u,"vertShader",i),u.shaders=s(u,"shaders",[{name:"Copy",fragShader:t},{name:"AddBlend",fragShader:o},{name:"LinearBlend",fragShader:l},{name:"ColorMatrix",fragShader:a}]),u.attributes=s(u,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),u.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],u.batchSize=1,h.call(this,u),this.colorMatrix=new r,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){h.prototype.boot.call(this);var c=this.shaders,u=this.renderTargets;this.copyShader=c[0],this.addShader=c[1],this.linearShader=c[2],this.colorMatrixShader=c[3],this.fullFrame1=u[0],this.fullFrame2=u[1],this.halfFrame1=u[2],this.halfFrame2=u[3]},copyFrame:function(c,u,p,g,y){p===void 0&&(p=1),g===void 0&&(g=!0),y===void 0&&(y=!0);var v=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,c.texture.webGLTexture),u?(v.viewport(0,0,u.width,u.height),v.bindFramebuffer(v.FRAMEBUFFER,u.framebuffer.webGLFramebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,u.texture.webGLTexture,0)):v.viewport(0,0,c.width,c.height),g&&(y?v.clearColor(0,0,0,0):v.clearColor(0,0,0,1),v.clear(v.COLOR_BUFFER_BIT)),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),v.bindFramebuffer(v.FRAMEBUFFER,null),v.bindTexture(v.TEXTURE_2D,null)},blitFrame:function(c,u,p,g,y,v,S){p===void 0&&(p=1),g===void 0&&(g=!0),y===void 0&&(y=!0),v===void 0&&(v=!1),S===void 0&&(S=!1);var w=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,c.texture.webGLTexture),c.height>u.height)w.viewport(0,0,c.width,c.height),this.setTargetUVs(c,u);else{var T=u.height-c.height;w.viewport(0,T,c.width,c.height)}if(w.bindFramebuffer(w.FRAMEBUFFER,u.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,u.texture.webGLTexture,0),g&&(y?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT)),v){var C=this.renderer.currentBlendMode;this.renderer.setBlendMode(m.ERASE)}S&&this.flipY(),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),v&&this.renderer.setBlendMode(C),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(c,u,p,g,y,v,S,w){S===void 0&&(S=!0),w===void 0&&(w=!0);var T=this.gl;T.bindFramebuffer(T.FRAMEBUFFER,c.framebuffer.webGLFramebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,c.texture.webGLTexture,0),S&&(w?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,u.texture.webGLTexture),T.copyTexSubImage2D(T.TEXTURE_2D,0,0,0,p,g,y,v),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},copyToGame:function(c){var u=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.texture.webGLTexture),u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.STATIC_DRAW),u.drawArrays(u.TRIANGLES,0,6)},drawFrame:function(c,u,p,g){p===void 0&&(p=!0),g===void 0&&(g=this.colorMatrix);var y=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",g.getData()),this.set1f("uAlpha",g.alpha),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,c.texture.webGLTexture),u?(y.viewport(0,0,u.width,u.height),y.bindFramebuffer(y.FRAMEBUFFER,u.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,u.texture.webGLTexture,0)):y.viewport(0,0,c.width,c.height),p?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blendFrames:function(c,u,p,g,y,v){g===void 0&&(g=1),y===void 0&&(y=!0),v===void 0&&(v=this.linearShader);var S=this.gl;this.setShader(v),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",g),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,c.texture.webGLTexture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,u.texture.webGLTexture),p?(S.bindFramebuffer(S.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,p.texture.webGLTexture,0),S.viewport(0,0,p.width,p.height)):S.viewport(0,0,c.width,c.height),y?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(c,u,p,g,y){this.blendFrames(c,u,p,g,y,this.addShader)},clearFrame:function(c,u){u===void 0&&(u=!0);var p=this.gl;p.viewport(0,0,c.width,c.height),p.bindFramebuffer(p.FRAMEBUFFER,c.framebuffer.webGLFramebuffer),u?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT);var g=this.renderer.currentFramebuffer;p.bindFramebuffer(p.FRAMEBUFFER,g.webGLFramebuffer)},setUVs:function(c,u,p,g,y,v,S,w){var T=this.vertexViewF32;T[2]=c,T[3]=u,T[6]=p,T[7]=g,T[10]=y,T[11]=v,T[14]=c,T[15]=u,T[18]=y,T[19]=v,T[22]=S,T[23]=w},setTargetUVs:function(c,u){var p=u.height/c.height;p>.5?p=.5-(p-.5):p=.5+(.5-p),this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});f.exports=d}),36060:(f=>{var x={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};f.exports=x}),84817:(f=>{f.exports="pipelineafterflush"}),36712:(f=>{f.exports="pipelinebeforeflush"}),40285:(f=>{f.exports="pipelinebind"}),65918:(f=>{f.exports="pipelineboot"}),92852:(f=>{f.exports="pipelinedestroy"}),56072:(f=>{f.exports="pipelinerebind"}),57566:(f=>{f.exports="pipelineresize"}),77085:((f,x,e)=>{f.exports={AFTER_FLUSH:e(84817),BEFORE_FLUSH:e(36712),BIND:e(40285),BOOT:e(65918),DESTROY:e(92852),REBIND:e(56072),RESIZE:e(57566)}}),54812:((f,x,e)=>{var o=e(83419),m=e(99155),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.amount=1},onPreRender:function(a,t){a=this.getController(a),this.set1f("amount",a.amount,t)}});f.exports=r}),67329:((f,x,e)=>{var o=e(83419),m=e(24400),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(a){a=this.getController(a),this.set1f("strength",a.blurStrength),this.set3fv("color",a.glcolor)},onDraw:function(a){var t=this.getController(),s=this.fullFrame1,l=this.fullFrame2;this.copyFrame(a,l);for(var i=2/a.width*t.offsetX,h=2/a.height*t.offsetY,d=0;d<t.steps;d++)this.set2f("offset",i,0),this.copySprite(a,s),this.set2f("offset",0,h),this.copySprite(s,a);this.blendFrames(l,a,s,t.strength),this.copyToGame(s)}});f.exports=r}),8861:((f,x,e)=>{var o=e(83419),m=e(41514),n=e(51078),r=e(94328),a=e(84057),t=new o({Extends:a,initialize:function(l){a.call(this,{game:l,shaders:[{name:"Gaussian5",fragShader:m},{name:"Gaussian9",fragShader:n},{name:"Gaussian13",fragShader:r}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(s){var l=this.getController(),i=this.gl,h=this.fullFrame1,d=i.getParameter(i.FRAMEBUFFER_BINDING);this.bind(this.shaders[l.quality]),i.activeTexture(i.TEXTURE0),i.viewport(0,0,s.width,s.height),this.set1i("uMainSampler",0),this.set2f("resolution",s.width,s.height),this.set1f("strength",l.strength),this.set3fv("color",l.glcolor);for(var c=0;c<l.steps;c++)this.set2f("offset",l.x,0),this.copySprite(s,h),this.set2f("offset",0,l.y),this.copySprite(h,s);i.bindFramebuffer(i.FRAMEBUFFER,d),i.bindTexture(i.TEXTURE_2D,null),this.copyToGame(s)}});f.exports=t}),51051:((f,x,e)=>{var o=e(83419),m=e(90610),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(a,t,s,l){a=this.getController(a),this.set1f("radius",a.radius,t),this.set1f("amount",a.amount,t),this.set1f("contrast",a.contrast,t),this.set1f("strength",a.strength,t),this.set2f("blur",a.blurX,a.blurY,t),this.setBoolean("isTiltShift",a.isTiltShift,t),s&&l&&this.set2f("resolution",s,l,t)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});f.exports=r}),89428:((f,x,e)=>{var o=e(83419),m=e(91899),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(a,t,s,l){a=this.getController(a),this.set1f("scale",a.scale,t),this.set1f("feather",a.feather,t),this.set1f("thickness",a.thickness,t),this.set3fv("color",a.glcolor,t),this.set4fv("backgroundColor",a.glcolor2,t),s&&l&&this.set2f("resolution",s,l,t)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});f.exports=r}),88904:((f,x,e)=>{var o=e(83419),m=e(84057),n=new o({Extends:m,initialize:function(a){m.call(this,{game:a})},onDraw:function(r){var a=this.fullFrame1;this.controller?this.manager.drawFrame(r,a,!0,this.controller):this.drawFrame(r,a),this.copyToGame(a)}});f.exports=n}),63563:((f,x,e)=>{var o=e(83419),m=e(47838),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(a){var t=this.game.textures.getFrame(a);t&&(this.glTexture=t.glTexture)},onDraw:function(a){var t=this.getController(),s=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",t.x,t.y),this.bindTexture(t.glTexture,1),this.copySprite(a,s),this.copyToGame(s)}});f.exports=r}),94045:((f,x,e)=>{var o=e(83419),m=e(95540),n=e(98656),r=e(84057),a=e(70554),t=new o({Extends:r,initialize:function(l,i){var h=m(i,"quality",.1),d=m(i,"distance",10);r.call(this,{game:l,fragShader:a.setGlowQuality(n,l,h,d)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(s,l,i,h){s=this.getController(s),this.set1f("outerStrength",s.outerStrength,l),this.set1f("innerStrength",s.innerStrength,l),this.set4fv("glowColor",s.glcolor,l),this.setBoolean("knockout",s.knockout,l),i&&h&&this.set2f("resolution",i,h,l)},onDraw:function(s){this.set2f("resolution",s.width,s.height),this.bindAndDraw(s)}});f.exports=t}),74088:((f,x,e)=>{var o=e(83419),m=e(70463),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(a,t){a=this.getController(a),this.set1f("alpha",a.alpha,t),this.set1i("size",a.size,t),this.set3fv("color1",a.glcolor1,t),this.set3fv("color2",a.glcolor2,t),this.set2f("positionFrom",a.fromX,a.fromY,t),this.set2f("positionTo",a.toX,a.toY,t)}});f.exports=r}),99636:((f,x,e)=>{var o=e(83419),m=e(50831),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.amount=1},onPreRender:function(a,t,s,l){a=this.getController(a),this.set1f("amount",a.amount,t),s&&l&&this.set2f("resolution",s,l,t)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});f.exports=r}),34700:((f,x,e)=>{var o=e(83419),m=e(92595),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(a,t){a=this.getController(a);var s=a.samples;this.set1i("samples",s,t),this.set1f("intensity",a.intensity,t),this.set1f("decay",a.decay,t),this.set1f("power",a.power/s,t),this.set2f("lightPosition",a.x,a.y,t),this.set4fv("color",a.glcolor,t)}});f.exports=r}),91157:((f,x,e)=>{var o=e(83419),m=e(72464),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(a,t,s,l){a=this.getController(a),this.setTime("time",t),this.set1f("speed",a.speed,t),this.set1f("lineWidth",a.lineWidth,t),this.set1f("gradient",a.gradient,t),this.setBoolean("reveal",a.reveal,t),s&&l&&this.set2f("resolution",s,l,t)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});f.exports=r}),27797:((f,x,e)=>{var o=e(83419),m=e(39249),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(a,t){a=this.getController(a),this.set1f("radius",a.radius,t),this.set1f("strength",a.strength,t),this.set2f("position",a.x,a.y,t)}});f.exports=r}),67603:((f,x,e)=>{var o=e(83419),m=e(2878),n=e(84057),r=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:m}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(a,t){a=this.getController(a);var s=a.progress,l=a.wipeWidth,i=a.direction,h=a.axis;this.set4f("config",s,l,i,h,t),this.setBoolean("reveal",a.reveal,t)}});f.exports=r}),58918:((f,x,e)=>{var o={Barrel:e(54812),Bloom:e(67329),Blur:e(8861),Bokeh:e(51051),Circle:e(89428),ColorMatrix:e(88904),Displacement:e(63563),Glow:e(94045),Gradient:e(74088),Pixelate:e(99636),Shadow:e(34700),Shine:e(91157),Vignette:e(27797),Wipe:e(67603)};f.exports=o}),96615:((f,x,e)=>{var o=e(36060),m=e(79291),n={FX:e(58918),BitmapMaskPipeline:e(31302),Events:e(77085),FXPipeline:e(92651),LightPipeline:e(96569),MobilePipeline:e(56527),MultiPipeline:e(57516),PointLightPipeline:e(43439),PostFXPipeline:e(84057),PreFXPipeline:e(43558),RopePipeline:e(81041),SinglePipeline:e(12385),UtilityPipeline:e(7589)};n=m(!1,n,o),f.exports=n}),35407:(f=>{f.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),78908:(f=>{f.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),85191:(f=>{f.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),96293:(f=>{f.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),36682:(f=>{f.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),99155:(f=>{f.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),24400:(f=>{f.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),94328:(f=>{f.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),41514:(f=>{f.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),51078:(f=>{f.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),90610:(f=>{f.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),91899:(f=>{f.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),47838:(f=>{f.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),98656:(f=>{f.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),70463:(f=>{f.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),50831:(f=>{f.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),92595:(f=>{f.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),72464:(f=>{f.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),39249:(f=>{f.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),2878:(f=>{f.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),31063:(f=>{f.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),48247:(f=>{f.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),41214:(f=>{f.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),39653:(f=>{f.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),62143:(f=>{f.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),47940:(f=>{f.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),98840:(f=>{f.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),44667:(f=>{f.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),4127:(f=>{f.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),89924:(f=>{f.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),27681:(f=>{f.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),49627:(f=>{f.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),45561:(f=>{f.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),60722:(f=>{f.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),89350:((f,x,e)=>{f.exports={AddBlendFrag:e(35407),BitmapMaskFrag:e(78908),BitmapMaskVert:e(85191),ColorMatrixFrag:e(96293),CopyFrag:e(36682),FXBarrelFrag:e(99155),FXBloomFrag:e(24400),FXBlurHighFrag:e(94328),FXBlurLowFrag:e(41514),FXBlurMedFrag:e(51078),FXBokehFrag:e(90610),FXCircleFrag:e(91899),FXDisplacementFrag:e(47838),FXGlowFrag:e(98656),FXGradientFrag:e(70463),FXPixelateFrag:e(50831),FXShadowFrag:e(92595),FXShineFrag:e(72464),FXVignetteFrag:e(39249),FXWipeFrag:e(2878),LightFrag:e(31063),LinearBlendFrag:e(48247),MeshFrag:e(41214),MeshVert:e(39653),MobileFrag:e(62143),MobileVert:e(47940),MultiFrag:e(98840),MultiVert:e(44667),PointLightFrag:e(4127),PointLightVert:e(89924),PostFXFrag:e(27681),QuadVert:e(49627),SingleFrag:e(45561),SingleVert:e(60722)}}),93567:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t){this.webGLAttribLocation=-1,this.gl=r,this.program=a,this.name=t,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var n=this.gl;n.isContextLost()||(this.webGLAttribLocation=n.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});f.exports=m}),26128:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t,s){this.webGLBuffer=null,this.gl=r,this.initialDataOrSize=a,this.bufferType=t,this.bufferUsage=s,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var n=this.gl;if(!n.isContextLost()){var r=this.bufferType,a=n.createBuffer();this.webGLBuffer=a,n.bindBuffer(r,this.webGLBuffer),n.bufferData(r,this.initialDataOrSize,this.bufferUsage),n.bindBuffer(r,null)}}},destroy:function(){var n=this.gl;n.isContextLost()||n.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});f.exports=m}),84387:((f,x,e)=>{var o=e(83419),m={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},n=new o({initialize:function(a,t,s,l,i){this.webGLFramebuffer=null,this.gl=a,this.width=t,this.height=s,this.renderTexture=l,this.addDepthStencilBuffer=!!i,this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){var a=this.renderTexture,t=0,s=r.createFramebuffer();if(this.webGLFramebuffer=s,r.bindFramebuffer(r.FRAMEBUFFER,s),a.isRenderTexture=!0,a.isAlphaPremultiplied=!1,r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a.webGLTexture,0),t=r.checkFramebufferStatus(r.FRAMEBUFFER),t!==r.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(m[t]||t));if(this.addDepthStencilBuffer){var l=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,l),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,this.width,this.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,l)}r.bindFramebuffer(r.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var r=this.gl;if(!r.isContextLost()){r.bindFramebuffer(r.FRAMEBUFFER,this.webGLFramebuffer);var a=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);a!==null&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.deleteTexture(a));var t=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);t!==null&&r.deleteRenderbuffer(t),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});f.exports=n}),1482:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t){this.webGLProgram=null,this.gl=r,this.vertexSource=a,this.fragmentSource=t,this.createResource()},createResource:function(){var n=this.gl;if(!n.isContextLost()){var r=n.createProgram(),a=n.createShader(n.VERTEX_SHADER),t=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(a,this.vertexSource),n.shaderSource(t,this.fragmentSource),n.compileShader(a),n.compileShader(t);var s=`Shader failed:
`;if(!n.getShaderParameter(a,n.COMPILE_STATUS))throw new Error("Vertex "+s+n.getShaderInfoLog(a));if(!n.getShaderParameter(t,n.COMPILE_STATUS))throw new Error("Fragment "+s+n.getShaderInfoLog(t));if(n.attachShader(r,a),n.attachShader(r,t),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error("Link "+s+n.getProgramInfoLog(r));n.useProgram(r),this.webGLProgram=r}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});f.exports=m}),82751:((f,x,e)=>{var o=e(83419),m=e(50030),n=new o({initialize:function(a,t,s,l,i,h,d,c,u,p,g,y,v){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=a,this.mipLevel=t,this.minFilter=s,this.magFilter=l,this.wrapT=i,this.wrapS=h,this.format=d,this.pixels=c,this.width=u,this.height=p,this.pma=g??!0,this.forceSize=!!y,this.flipY=!!v,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){if(this.pixels instanceof n){this.webGLTexture=this.pixels.webGLTexture;return}var a=r.createTexture();a.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=a,this._processTexture()}},update:function(r,a,t,s,l,i,h,d,c){if(!(a===0||t===0)){this.pixels=r,this.width=a,this.height=t,this.flipY=s,this.wrapS=l,this.wrapT=i,this.minFilter=h,this.magFilter=d,this.format=c;var u=this.gl;u.isContextLost()||this._processTexture()}},_processTexture:function(){var r=this.gl;r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,this.webGLTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.minFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.magFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.wrapT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY);var t=this.pixels,s=this.mipLevel,l=this.width,i=this.height,h=this.format,d=!1;if(t==null)r.texImage2D(r.TEXTURE_2D,s,h,l,i,0,h,r.UNSIGNED_BYTE,null),d=m(l,i);else if(t.compressed){l=t.width,i=t.height,d=t.generateMipmap;for(var c=0;c<t.mipmaps.length;c++)r.compressedTexImage2D(r.TEXTURE_2D,c,t.internalFormat,t.mipmaps[c].width,t.mipmaps[c].height,0,t.mipmaps[c].data)}else t instanceof Uint8Array?(r.texImage2D(r.TEXTURE_2D,s,h,l,i,0,h,r.UNSIGNED_BYTE,t),d=m(l,i)):(this.forceSize||(l=t.width,i=t.height),r.texImage2D(r.TEXTURE_2D,s,h,h,r.UNSIGNED_BYTE,t),d=m(l,i));d&&r.generateMipmap(r.TEXTURE_2D),a?r.bindTexture(r.TEXTURE_2D,a):r.bindTexture(r.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(r){this.__SPECTOR_Metadata=r,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=r)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof n||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});f.exports=n}),57183:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t){this.webGLUniformLocation=null,this.gl=r,this.program=a,this.name=t,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var n=this.gl;n.isContextLost()||(this.webGLUniformLocation=n.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});f.exports=m}),9503:((f,x,e)=>{var o={WebGLAttribLocationWrapper:e(93567),WebGLBufferWrapper:e(26128),WebGLProgramWrapper:e(1482),WebGLTextureWrapper:e(82751),WebGLFramebufferWrapper:e(84387),WebGLUniformLocationWrapper:e(57183)};f.exports=o}),76531:((f,x,e)=>{var o=e(13560),m=e(83419),n=e(45319),r=e(50792),a=e(97480),t=e(8443),s=e(57811),l=e(74403),i=e(45818),h=e(29747),d=e(87841),c=e(86555),u=e(56583),p=e(26099),g=e(38058),y=new m({Extends:r,initialize:function(S){r.call(this),this.game=S,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new c,this.gameSize=new c,this.baseSize=new c,this.displaySize=new c,this.scaleMode=o.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new p(1,1),this.autoRound=!1,this.autoCenter=o.CENTER.NO_CENTER,this.orientation=o.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:h,windowResize:h,fullScreenChange:h,fullScreenError:h}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(t.BOOT,this.boot,this)},boot:function(){var v=this.game;this.canvas=v.canvas,this.fullscreen=v.device.fullscreen;var S=this.scaleMode;S!==o.SCALE_MODE.RESIZE&&S!==o.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(S),S===o.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),v.events.on(t.PRE_STEP,this.step,this),v.events.once(t.READY,this.refresh,this),v.events.once(t.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(v){this.getParent(v),this.getParentBounds();var S=v.width,w=v.height,T=v.scaleMode,C=v.zoom,M=v.autoRound;if(typeof S=="string")if(S.substr(-1)!=="%")S=parseInt(S,10);else{var E=this.parentSize.width;E===0&&(E=window.innerWidth);var P=parseInt(S,10)/100;S=Math.floor(E*P)}if(typeof w=="string")if(w.substr(-1)!=="%")w=parseInt(w,10);else{var A=this.parentSize.height;A===0&&(A=window.innerHeight);var D=parseInt(w,10)/100;w=Math.floor(A*D)}this.scaleMode=T,this.autoRound=M,this.autoCenter=v.autoCenter,this.resizeInterval=v.resizeInterval,M&&(S=Math.floor(S),w=Math.floor(w)),this.gameSize.setSize(S,w),C===o.ZOOM.MAX_ZOOM&&(C=this.getMaxZoom()),this.zoom=C,C!==1&&(this._resetZoom=!0),this.baseSize.setSize(S,w),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),v.minWidth>0&&this.displaySize.setMin(v.minWidth*C,v.minHeight*C),v.maxWidth>0&&this.displaySize.setMax(v.maxWidth*C,v.maxHeight*C),this.displaySize.setSize(S,w),(v.snapWidth>0||v.snapHeight>0)&&this.displaySize.setSnap(v.snapWidth,v.snapHeight),this.orientation=i(S,w)},getParent:function(v){var S=v.parent;if(S!==null){if(this.parent=l(S),this.parentIsWindow=this.parent===document.body,v.expandParent&&v.scaleMode!==o.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),!this.parentIsWindow&&w.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}v.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(v.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var v=this.parentSize,S=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(S.height=s(!0));var w=S.width,T=S.height;if(v.width!==w||v.height!==T)return v.setSize(w,T),!0;if(this.canvas){var C=this.canvasBounds,M=this.canvas.getBoundingClientRect();if(M.x!==C.x||M.y!==C.y)return!0}return!1},lockOrientation:function(v){var S=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return S?S.call(screen,v):!1},setParentSize:function(v,S){return this.parentSize.setSize(v,S),this.refresh()},setGameSize:function(v,S){var w=this.autoRound;w&&(v=Math.floor(v),S=Math.floor(S));var T=this.width,C=this.height;return this.gameSize.resize(v,S),this.baseSize.resize(v,S),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(v/S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(T,C)},resize:function(v,S){var w=this.zoom,T=this.autoRound;T&&(v=Math.floor(v),S=Math.floor(S));var C=this.width,M=this.height;this.gameSize.resize(v,S),this.baseSize.resize(v,S),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(v*w,S*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var E=this.canvas.style,P=v*w,A=S*w;return T&&(P=Math.floor(P),A=Math.floor(A)),(P!==v||A!==S)&&(E.width=P+"px",E.height=A+"px"),this.refresh(C,M)},setZoom:function(v){return this.zoom=v,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(v,S){return v===void 0&&(v=0),S===void 0&&(S=v),this.displaySize.setSnap(v,S),this.refresh()},refresh:function(v,S){v===void 0&&(v=this.width),S===void 0&&(S=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var T=this.canvas.style,C=w.style;C.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",C.marginLeft=T.marginLeft,C.marginTop=T.marginTop}return this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,v,S),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var v=i(this.width,this.height);v!==this.orientation&&(this.orientation=v,this.emit(a.ORIENTATION_CHANGE,v))}},updateScale:function(){var v=this.canvas.style,S=this.gameSize.width,w=this.gameSize.height,T,C,M=this.zoom,E=this.autoRound;if(this.scaleMode===o.SCALE_MODE.NONE)this.displaySize.setSize(S*M,w*M),T=this.displaySize.width,C=this.displaySize.height,E&&(T=Math.floor(T),C=Math.floor(C)),this._resetZoom&&(v.width=T+"px",v.height=C+"px",this._resetZoom=!1);else if(this.scaleMode===o.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),T=this.displaySize.width,C=this.displaySize.height,E&&(T=Math.floor(T),C=Math.floor(C)),this.canvas.width=T,this.canvas.height=C;else if(this.scaleMode===o.SCALE_MODE.EXPAND){var P=this.game.config.width,A=this.game.config.height,D=this.parentSize.width,W=this.parentSize.height,V=D/P,K=W/A,X,R;V<K?(X=P,R=V!==0?W/V:A):(X=K!==0?D/K:P,R=A);var H=n(X,this.displaySize.minWidth,this.displaySize.maxWidth),L=n(R,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(H,L),this.gameSize.setSize(H,L),E&&(H=Math.floor(H),L=Math.floor(L)),this.canvas.width=H,this.canvas.height=L;var N=D*(H/X),z=W*(L/R);this.displaySize.setSize(N,z),T=this.displaySize.width,C=this.displaySize.height,E&&(T=Math.floor(T),C=Math.floor(C)),v.width=T+"px",v.height=C+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),T=this.displaySize.width,C=this.displaySize.height,E&&(T=Math.floor(T),C=Math.floor(C)),v.width=T+"px",v.height=C+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var v=u(this.parentSize.width,this.gameSize.width,0,!0),S=u(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(v,S),1)},updateCenter:function(){var v=this.autoCenter;if(v!==o.CENTER.NO_CENTER){var S=this.canvas,w=S.style,T=S.getBoundingClientRect(),C=T.width,M=T.height,E=Math.floor((this.parentSize.width-C)/2),P=Math.floor((this.parentSize.height-M)/2);v===o.CENTER.CENTER_HORIZONTALLY?P=0:v===o.CENTER.CENTER_VERTICALLY&&(E=0),w.marginLeft=E+"px",w.marginTop=P+"px"}},updateBounds:function(){var v=this.canvasBounds,S=this.canvas.getBoundingClientRect();v.x=S.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),v.y=S.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),v.width=S.width,v.height=S.height},transformX:function(v){return(v-this.canvasBounds.left)*this.displayScale.x},transformY:function(v){return(v-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(v){v===void 0&&(v={navigationUI:"hide"});var S=this.fullscreen;if(!S.available){this.emit(a.FULLSCREEN_UNSUPPORTED);return}if(!S.active){var w=this.getFullscreenTarget();S.keyboard?w[S.request](Element.ALLOW_KEYBOARD_INPUT):w[S.request](v)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(v){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,v)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var v=document.createElement("div");v.style.margin="0",v.style.padding="0",v.style.width="100%",v.style.height="100%",this.fullscreenTarget=v,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var S=this.canvas.parentNode;S.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var v=this.fullscreenTarget;if(v&&v.parentNode){var S=v.parentNode;S.insertBefore(this.canvas,v),S.removeChild(v)}}},stopFullscreen:function(){var v=this.fullscreen;if(!v.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;v.active&&document[v.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(v){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(v)},startListeners:function(){var v=this,S=this.domlisteners;if(S.orientationChange=function(){v.updateBounds(),v._checkOrientation=!0,v.dirty=!0,v.refresh()},S.windowResize=function(){v.updateBounds(),v.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",S.orientationChange,!1):window.addEventListener("orientationchange",S.orientationChange,!1),window.addEventListener("resize",S.windowResize,!1),this.fullscreen.available){S.fullScreenChange=function(T){return v.onFullScreenChange(T)},S.fullScreenError=function(T){return v.onFullScreenError(T)};var w=["webkit","moz",""];w.forEach(function(T){document.addEventListener(T+"fullscreenchange",S.fullScreenChange,!1),document.addEventListener(T+"fullscreenerror",S.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",S.fullScreenChange,!1),document.addEventListener("MSFullscreenError",S.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(v,S){v instanceof g||(S=v,v=void 0),S===void 0&&(S=new d);var w=this.baseSize,T=this.parentSize,C=this.canvasBounds,M=this.displayScale,E=C.x>=0?0:-(C.x*M.x),P=C.y>=0?0:-(C.y*M.y),A;T.width>=C.width?A=w.width:A=w.width-(C.width-T.width)*M.x;var D;return T.height>=C.height?D=w.height:D=w.height-(C.height-T.height)*M.y,S.setTo(E,P,A,D),v&&(S.width/=v.zoomX,S.height/=v.zoomY,S.centerX=v.centerX+v.scrollX,S.centerY=v.centerY+v.scrollY),S},step:function(v,S){this.parent&&(this._lastCheck+=S,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var v=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",v.orientationChange,!1):window.removeEventListener("orientationchange",v.orientationChange,!1),window.removeEventListener("resize",v.windowResize,!1);var S=["webkit","moz",""];S.forEach(function(w){document.removeEventListener(w+"fullscreenchange",v.fullScreenChange,!1),document.removeEventListener(w+"fullscreenerror",v.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",v.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",v.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===o.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===o.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});f.exports=y}),64743:(f=>{f.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),39218:(f=>{f.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}}),81050:(f=>{f.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}}),80805:(f=>{f.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),13560:((f,x,e)=>{var o={CENTER:e(64743),ORIENTATION:e(39218),SCALE_MODE:e(81050),ZOOM:e(80805)};f.exports=o}),56139:(f=>{f.exports="enterfullscreen"}),2336:(f=>{f.exports="fullscreenfailed"}),47412:(f=>{f.exports="fullscreenunsupported"}),51452:(f=>{f.exports="leavefullscreen"}),20666:(f=>{f.exports="orientationchange"}),47945:(f=>{f.exports="resize"}),97480:((f,x,e)=>{f.exports={ENTER_FULLSCREEN:e(56139),FULLSCREEN_FAILED:e(2336),FULLSCREEN_UNSUPPORTED:e(47412),LEAVE_FULLSCREEN:e(51452),ORIENTATION_CHANGE:e(20666),RESIZE:e(47945)}}),93364:((f,x,e)=>{var o=e(79291),m=e(13560),n={Center:e(64743),Events:e(97480),Orientation:e(39218),ScaleManager:e(76531),ScaleModes:e(81050),Zoom:e(80805)};n=o(!1,n,m.CENTER),n=o(!1,n,m.ORIENTATION),n=o(!1,n,m.SCALE_MODE),n=o(!1,n,m.ZOOM),f.exports=n}),27397:((f,x,e)=>{var o=e(95540),m=e(35355),n=function(r){var a=r.game.config.defaultPhysicsSystem,t=o(r.settings,"physics",!1);if(!(!a&&!t)){var s=[];if(a&&s.push(m(a+"Physics")),t)for(var l in t)l=m(l.concat("Physics")),s.indexOf(l)===-1&&s.push(l);return s}};f.exports=n}),52106:((f,x,e)=>{var o=e(95540),m=function(n){var r=n.plugins.getDefaultScenePlugins(),a=o(n.settings,"plugins",!1);return Array.isArray(a)?a:r||[]};f.exports=m}),87033:(f=>{var x={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};f.exports=x}),97482:((f,x,e)=>{var o=e(83419),m=e(2368),n=new o({initialize:function(a){this.sys=new m(this,a),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});f.exports=n}),60903:((f,x,e)=>{var o=e(83419),m=e(89993),n=e(44594),r=e(8443),a=e(35154),t=e(54899),s=e(29747),l=e(97482),i=e(2368),h=new o({initialize:function(c,u){if(this.game=c,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,u){Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++)this._pending.push({key:"default",scene:u[p],autoStart:p===0,data:{}})}c.events.once(r.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new l),this.game.events.emit(r.SYSTEM_READY,this.systemScene,this);var d,c,u,p;for(d=0;d<this._pending.length;d++){c=this._pending[d],u=c.key,p=c.scene;var g;p instanceof l?g=this.createSceneFromInstance(u,p):typeof p=="object"?g=this.createSceneFromObject(u,p):typeof p=="function"&&(g=this.createSceneFromFunction(u,p)),u=g.sys.settings.key,this.keys[u]=g,this.scenes.push(g),this._data[u]&&(g.sys.settings.data=this._data[u].data,this._data[u].autoStart&&(c.autoStart=!0)),(c.autoStart||g.sys.settings.active)&&this._start.push(u)}for(this._pending.length=0,this._data={},this.isBooted=!0,d=0;d<this._start.length;d++)c=this._start[d],this.start(c);this._start.length=0}},processQueue:function(){var d=this._pending.length,c=this._queue.length;if(!(d===0&&c===0)){var u,p;if(d){for(u=0;u<d;u++)p=this._pending[u],this.add(p.key,p.scene,p.autoStart,p.data);for(u=0;u<this._start.length;u++)p=this._start[u],this.start(p);this._start.length=0,this._pending.length=0}for(u=0;u<this._queue.length;u++)p=this._queue[u],this[p.op](p.keyA,p.keyB,p.data);this._queue.length=0}},add:function(d,c,u,p){if(u===void 0&&(u=!1),p===void 0&&(p={}),this.isProcessing||!this.isBooted)return this._pending.push({key:d,scene:c,autoStart:u,data:p}),this.isBooted||(this._data[d]={data:p}),null;d=this.getKey(d,c);var g;return c instanceof l?g=this.createSceneFromInstance(d,c):typeof c=="object"?(c.key=d,g=this.createSceneFromObject(d,c)):typeof c=="function"&&(g=this.createSceneFromFunction(d,c)),g.sys.settings.data=p,d=g.sys.settings.key,this.keys[d]=g,this.scenes.push(g),(u||g.sys.settings.active)&&(this._pending.length?this._start.push(d):this.start(d)),g},remove:function(d){if(this.isProcessing)return this.queueOp("remove",d);var c=this.getScene(d);if(!c||c.sys.isTransitioning())return this;var u=this.scenes.indexOf(c),p=c.sys.settings.key;return u>-1&&(delete this.keys[p],this.scenes.splice(u,1),this._start.indexOf(p)>-1&&(u=this._start.indexOf(p),this._start.splice(u,1)),c.sys.destroy()),this},bootScene:function(d){var c=d.sys,u=c.settings;c.sceneUpdate=s,d.init&&(d.init.call(d,u.data),u.status=m.INIT,u.isTransition&&c.events.emit(n.TRANSITION_INIT,u.transitionFrom,u.transitionDuration));var p;c.load&&(p=c.load,p.reset()),p&&d.preload?(d.preload.call(d),u.status=m.LOADING,p.once(t.COMPLETE,this.loadComplete,this),p.start()):this.create(d)},loadComplete:function(d){this.create(d.scene)},payloadComplete:function(d){this.bootScene(d.scene)},update:function(d,c){this.processQueue(),this.isProcessing=!0;for(var u=this.scenes.length-1;u>=0;u--){var p=this.scenes[u].sys;p.settings.status>m.START&&p.settings.status<=m.RUNNING&&p.step(d,c),p.scenePlugin&&p.scenePlugin._target&&p.scenePlugin.step(d,c)}},render:function(d){for(var c=0;c<this.scenes.length;c++){var u=this.scenes[c].sys;u.settings.visible&&u.settings.status>=m.LOADING&&u.settings.status<m.SLEEPING&&u.render(d)}this.isProcessing=!1},create:function(d){var c=d.sys,u=c.settings;d.create&&(u.status=m.CREATING,d.create.call(d,u.data),u.status===m.DESTROYED)||(u.isTransition&&c.events.emit(n.TRANSITION_START,u.transitionFrom,u.transitionDuration),d.update&&(c.sceneUpdate=d.update),u.status=m.RUNNING,c.events.emit(n.CREATE,d))},createSceneFromFunction:function(d,c){var u=new c;if(u instanceof l){var p=u.sys.settings.key;if(p!==""&&(d=p),this.keys.hasOwnProperty(d))throw new Error("Cannot add Scene with duplicate key: "+d);return this.createSceneFromInstance(d,u)}else return u.sys=new i(u),u.sys.settings.key=d,u.sys.init(this.game),u},createSceneFromInstance:function(d,c){var u=c.sys.settings.key;return u===""&&(c.sys.settings.key=d),c.sys.init(this.game),c},createSceneFromObject:function(d,c){var u=new l(c),p=u.sys.settings.key;p!==""?d=p:u.sys.settings.key=d,u.sys.init(this.game);for(var g=["init","preload","create","update","render"],y=0;y<g.length;y++){var v=a(c,g[y],null);v&&(u[g[y]]=v)}if(c.hasOwnProperty("extend")){for(var S in c.extend)if(c.extend.hasOwnProperty(S)){var w=c.extend[S];S==="data"&&u.hasOwnProperty("data")&&typeof w=="object"?u.data.merge(w):S!=="sys"&&(u[S]=w)}}return u},getKey:function(d,c){if(d||(d="default"),typeof c=="function")return d;if(c instanceof l?d=c.sys.settings.key:typeof c=="object"&&c.hasOwnProperty("key")&&(d=c.key),this.keys.hasOwnProperty(d))throw new Error("Cannot add Scene with duplicate key: "+d);return d},getScenes:function(d,c){d===void 0&&(d=!0),c===void 0&&(c=!1);for(var u=[],p=this.scenes,g=0;g<p.length;g++){var y=p[g];y&&(!d||d&&y.sys.isActive())&&u.push(y)}return c?u.reverse():u},getScene:function(d){if(typeof d=="string"){if(this.keys[d])return this.keys[d]}else for(var c=0;c<this.scenes.length;c++)if(d===this.scenes[c])return d;return null},isActive:function(d){var c=this.getScene(d);return c?c.sys.isActive():null},isPaused:function(d){var c=this.getScene(d);return c?c.sys.isPaused():null},isVisible:function(d){var c=this.getScene(d);return c?c.sys.isVisible():null},isSleeping:function(d){var c=this.getScene(d);return c?c.sys.isSleeping():null},pause:function(d,c){var u=this.getScene(d);return u&&u.sys.pause(c),this},resume:function(d,c){var u=this.getScene(d);return u&&u.sys.resume(c),this},sleep:function(d,c){var u=this.getScene(d);return u&&!u.sys.isTransitioning()&&u.sys.sleep(c),this},wake:function(d,c){var u=this.getScene(d);return u&&u.sys.wake(c),this},run:function(d,c){var u=this.getScene(d);if(!u){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===d){this.queueOp("start",d,c);break}return this}u.sys.isSleeping()?u.sys.wake(c):u.sys.isPaused()?u.sys.resume(c):this.start(d,c)},start:function(d,c){if(!this.isBooted)return this._data[d]={autoStart:!0,data:c},this;var u=this.getScene(d);if(!u)return console.warn("Scene key not found: "+d),this;var p=u.sys,g=p.settings.status;if(g>=m.START&&g<=m.CREATING)return this;if(g>=m.RUNNING&&g<=m.SLEEPING)p.shutdown(),p.sceneUpdate=s,p.start(c);else{p.sceneUpdate=s,p.start(c);var y;if(p.load&&(y=p.load),y&&p.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:p.settings.pack})))return p.settings.status=m.LOADING,y.once(t.COMPLETE,this.payloadComplete,this),y.start(),this}return this.bootScene(u),this},stop:function(d,c){var u=this.getScene(d);if(u&&!u.sys.isTransitioning()&&u.sys.settings.status!==m.SHUTDOWN){var p=u.sys.load;p&&(p.off(t.COMPLETE,this.loadComplete,this),p.off(t.COMPLETE,this.payloadComplete,this)),u.sys.shutdown(c)}return this},switch:function(d,c,u){var p=this.getScene(d),g=this.getScene(c);return p&&g&&p!==g&&(this.sleep(d),this.isSleeping(c)?this.wake(c,u):this.start(c,u)),this},getAt:function(d){return this.scenes[d]},getIndex:function(d){var c=this.getScene(d);return this.scenes.indexOf(c)},bringToTop:function(d){if(this.isProcessing)return this.queueOp("bringToTop",d);var c=this.getIndex(d),u=this.scenes;if(c!==-1&&c<u.length){var p=this.getScene(d);u.splice(c,1),u.push(p)}return this},sendToBack:function(d){if(this.isProcessing)return this.queueOp("sendToBack",d);var c=this.getIndex(d);if(c!==-1&&c>0){var u=this.getScene(d);this.scenes.splice(c,1),this.scenes.unshift(u)}return this},moveDown:function(d){if(this.isProcessing)return this.queueOp("moveDown",d);var c=this.getIndex(d);if(c>0){var u=c-1,p=this.getScene(d),g=this.getAt(u);this.scenes[c]=g,this.scenes[u]=p}return this},moveUp:function(d){if(this.isProcessing)return this.queueOp("moveUp",d);var c=this.getIndex(d);if(c<this.scenes.length-1){var u=c+1,p=this.getScene(d),g=this.getAt(u);this.scenes[c]=g,this.scenes[u]=p}return this},moveAbove:function(d,c){if(d===c)return this;if(this.isProcessing)return this.queueOp("moveAbove",d,c);var u=this.getIndex(d),p=this.getIndex(c);if(u!==-1&&p!==-1&&p<u){var g=this.getAt(p);this.scenes.splice(p,1),this.scenes.splice(u+(p>u),0,g)}return this},moveBelow:function(d,c){if(d===c)return this;if(this.isProcessing)return this.queueOp("moveBelow",d,c);var u=this.getIndex(d),p=this.getIndex(c);if(u!==-1&&p!==-1&&p>u){var g=this.getAt(p);this.scenes.splice(p,1),u===0?this.scenes.unshift(g):this.scenes.splice(u-(p<u),0,g)}return this},queueOp:function(d,c,u,p){return this._queue.push({op:d,keyA:c,keyB:u,data:p}),this},swapPosition:function(d,c){if(d===c)return this;if(this.isProcessing)return this.queueOp("swapPosition",d,c);var u=this.getIndex(d),p=this.getIndex(c);if(u!==p&&u!==-1&&p!==-1){var g=this.getAt(u);this.scenes[u]=this.scenes[p],this.scenes[p]=g}return this},dump:function(){for(var d=[],c=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],u=0;u<this.scenes.length;u++){var p=this.scenes[u].sys,g=p.settings.visible&&(p.settings.status===m.RUNNING||p.settings.status===m.PAUSED)?"[*] ":"[-] ";g+=p.settings.key+" ("+c[p.settings.status]+")",d.push(g)}console.log(d.join(`
`))},destroy:function(){for(var d=0;d<this.scenes.length;d++){var c=this.scenes[d].sys;c.destroy()}this.systemScene.sys.destroy(),this.update=s,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});f.exports=h}),52209:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(44594),r=e(95540),a=e(37277),t=new m({initialize:function(l){this.scene=l,this.systems=l.sys,this.settings=l.sys.settings,this.key=l.sys.settings.key,this.manager=l.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,l.sys.events.once(n.BOOT,this.boot,this),l.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(s,l){return s===void 0&&(s=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",s,l),this},restart:function(s){var l=this.key;return this.manager.queueOp("stop",l),this.manager.queueOp("start",l,s),this},transition:function(s){s===void 0&&(s={});var l=r(s,"target",!1),i=this.manager.getScene(l);if(!l||!this.checkValidTransition(i))return!1;var h=r(s,"duration",1e3);this._elapsed=0,this._target=i,this._duration=h,this._willSleep=r(s,"sleep",!1),this._willRemove=r(s,"remove",!1);var d=r(s,"onUpdate",null);d&&(this._onUpdate=d,this._onUpdateScope=r(s,"onUpdateScope",this.scene));var c=r(s,"allowInput",!1);this.settings.transitionAllowInput=c;var u=i.sys.settings;u.isTransition=!0,u.transitionFrom=this.scene,u.transitionDuration=h,u.transitionAllowInput=c,r(s,"moveAbove",!1)?this.manager.moveAbove(this.key,l):r(s,"moveBelow",!1)&&this.manager.moveBelow(this.key,l),i.sys.isSleeping()?i.sys.wake(r(s,"data")):this.manager.start(l,r(s,"data"));var p=r(s,"onStart",null),g=r(s,"onStartScope",this.scene);return p&&p.call(g,this.scene,i,h),this.systems.events.emit(n.TRANSITION_OUT,i,h),!0},checkValidTransition:function(s){return!(!s||s.sys.isActive()||s.sys.isTransitioning()||s===this.scene||this.systems.isTransitioning())},step:function(s,l){this._elapsed+=l,this.transitionProgress=o(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var s=this._target.sys,l=this._target.sys.settings;s.events.emit(n.TRANSITION_COMPLETE,this.scene),l.isTransition=!1,l.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(s,l,i,h){return this.manager.add(s,l,i,h)},launch:function(s,l){return s&&s!==this.key&&this.manager.queueOp("start",s,l),this},run:function(s,l){return s&&s!==this.key&&this.manager.queueOp("run",s,l),this},pause:function(s,l){return s===void 0&&(s=this.key),this.manager.queueOp("pause",s,l),this},resume:function(s,l){return s===void 0&&(s=this.key),this.manager.queueOp("resume",s,l),this},sleep:function(s,l){return s===void 0&&(s=this.key),this.manager.queueOp("sleep",s,l),this},wake:function(s,l){return s===void 0&&(s=this.key),this.manager.queueOp("wake",s,l),this},switch:function(s,l){return s!==this.key&&this.manager.queueOp("switch",this.key,s,l),this},stop:function(s,l){return s===void 0&&(s=this.key),this.manager.queueOp("stop",s,l),this},setActive:function(s,l,i){l===void 0&&(l=this.key);var h=this.manager.getScene(l);return h&&h.sys.setActive(s,i),this},setVisible:function(s,l){l===void 0&&(l=this.key);var i=this.manager.getScene(l);return i&&i.sys.setVisible(s),this},isSleeping:function(s){return s===void 0&&(s=this.key),this.manager.isSleeping(s)},isActive:function(s){return s===void 0&&(s=this.key),this.manager.isActive(s)},isPaused:function(s){return s===void 0&&(s=this.key),this.manager.isPaused(s)},isVisible:function(s){return s===void 0&&(s=this.key),this.manager.isVisible(s)},swapPosition:function(s,l){return l===void 0&&(l=this.key),s!==l&&this.manager.swapPosition(s,l),this},moveAbove:function(s,l){return l===void 0&&(l=this.key),s!==l&&this.manager.moveAbove(s,l),this},moveBelow:function(s,l){return l===void 0&&(l=this.key),s!==l&&this.manager.moveBelow(s,l),this},remove:function(s){return s===void 0&&(s=this.key),this.manager.remove(s),this},moveUp:function(s){return s===void 0&&(s=this.key),this.manager.moveUp(s),this},moveDown:function(s){return s===void 0&&(s=this.key),this.manager.moveDown(s),this},bringToTop:function(s){return s===void 0&&(s=this.key),this.manager.bringToTop(s),this},sendToBack:function(s){return s===void 0&&(s=this.key),this.manager.sendToBack(s),this},get:function(s){return this.manager.getScene(s)},getStatus:function(s){var l=this.manager.getScene(s);if(l)return l.sys.getStatus()},getIndex:function(s){return s===void 0&&(s=this.key),this.manager.getIndex(s)},shutdown:function(){var s=this.systems.events;s.off(n.SHUTDOWN,this.shutdown,this),s.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",t,"scenePlugin"),f.exports=t}),55681:((f,x,e)=>{var o=e(89993),m=e(35154),n=e(46975),r=e(87033),a={create:function(t){return typeof t=="string"?t={key:t}:t===void 0&&(t={}),{status:o.PENDING,key:m(t,"key",""),active:m(t,"active",!1),visible:m(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:m(t,"pack",!1),cameras:m(t,"cameras",null),map:m(t,"map",n(r,m(t,"mapAdd",{}))),physics:m(t,"physics",{}),loader:m(t,"loader",{}),plugins:m(t,"plugins",!1),input:m(t,"input",{})}}};f.exports=a}),2368:((f,x,e)=>{var o=e(83419),m=e(89993),n=e(42363),r=e(44594),a=e(27397),t=e(52106),s=e(29747),l=e(55681),i=new o({initialize:function(d,c){this.scene=d,this.game,this.renderer,this.config=c,this.settings=l.create(c),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=s},init:function(h){this.settings.status=m.INIT,this.sceneUpdate=s,this.game=h,this.renderer=h.renderer,this.canvas=h.canvas,this.context=h.context;var d=h.plugins;this.plugins=d,d.addToScene(this,n.Global,[n.CoreScene,t(this),a(this)]),this.events.emit(r.BOOT,this),this.settings.isBooted=!0},step:function(h,d){var c=this.events;c.emit(r.PRE_UPDATE,h,d),c.emit(r.UPDATE,h,d),this.sceneUpdate.call(this.scene,h,d),c.emit(r.POST_UPDATE,h,d)},render:function(h){var d=this.displayList;d.depthSort(),this.events.emit(r.PRE_RENDER,h),this.cameras.render(h,d),this.events.emit(r.RENDER,h)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(h){var d=this.settings,c=this.getStatus();return c!==m.CREATING&&c!==m.RUNNING?console.warn("Cannot pause non-running Scene",d.key):this.settings.active&&(d.status=m.PAUSED,d.active=!1,this.events.emit(r.PAUSE,this,h)),this},resume:function(h){var d=this.events,c=this.settings;return this.settings.active||(c.status=m.RUNNING,c.active=!0,d.emit(r.RESUME,this,h)),this},sleep:function(h){var d=this.settings,c=this.getStatus();return c!==m.CREATING&&c!==m.RUNNING?console.warn("Cannot sleep non-running Scene",d.key):(d.status=m.SLEEPING,d.active=!1,d.visible=!1,this.events.emit(r.SLEEP,this,h)),this},wake:function(h){var d=this.events,c=this.settings;return c.status=m.RUNNING,c.active=!0,c.visible=!0,d.emit(r.WAKE,this,h),c.isTransition&&d.emit(r.TRANSITION_WAKE,c.transitionFrom,c.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var h=this.settings.status;return h>m.PENDING&&h<=m.RUNNING},isSleeping:function(){return this.settings.status===m.SLEEPING},isActive:function(){return this.settings.status===m.RUNNING},isPaused:function(){return this.settings.status===m.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(h){return this.settings.visible=h,this},setActive:function(h,d){return h?this.resume(d):this.pause(d)},start:function(h){var d=this.events,c=this.settings;h&&(c.data=h),c.status=m.START,c.active=!0,c.visible=!0,d.emit(r.START,this),d.emit(r.READY,this,h)},shutdown:function(h){var d=this.events,c=this.settings;d.off(r.TRANSITION_INIT),d.off(r.TRANSITION_START),d.off(r.TRANSITION_COMPLETE),d.off(r.TRANSITION_OUT),c.status=m.SHUTDOWN,c.active=!1,c.visible=!1,d.emit(r.SHUTDOWN,this,h)},destroy:function(){var h=this.events,d=this.settings;d.status=m.DESTROYED,d.active=!1,d.visible=!1,h.emit(r.DESTROY,this),h.removeAllListeners();for(var c=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],u=0;u<c.length;u++)this[c[u]]=null}});f.exports=i}),89993:(f=>{var x={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};f.exports=x}),69830:(f=>{f.exports="addedtoscene"}),7919:(f=>{f.exports="boot"}),46763:(f=>{f.exports="create"}),11763:(f=>{f.exports="destroy"}),71555:(f=>{f.exports="pause"}),36735:(f=>{f.exports="postupdate"}),3809:(f=>{f.exports="prerender"}),90716:(f=>{f.exports="preupdate"}),58262:(f=>{f.exports="ready"}),91633:(f=>{f.exports="removedfromscene"}),10319:(f=>{f.exports="render"}),87132:(f=>{f.exports="resume"}),81961:(f=>{f.exports="shutdown"}),90194:(f=>{f.exports="sleep"}),6265:(f=>{f.exports="start"}),33178:(f=>{f.exports="transitioncomplete"}),43063:(f=>{f.exports="transitioninit"}),11259:(f=>{f.exports="transitionout"}),61611:(f=>{f.exports="transitionstart"}),45209:(f=>{f.exports="transitionwake"}),22966:(f=>{f.exports="update"}),21747:(f=>{f.exports="wake"}),44594:((f,x,e)=>{f.exports={ADDED_TO_SCENE:e(69830),BOOT:e(7919),CREATE:e(46763),DESTROY:e(11763),PAUSE:e(71555),POST_UPDATE:e(36735),PRE_RENDER:e(3809),PRE_UPDATE:e(90716),READY:e(58262),REMOVED_FROM_SCENE:e(91633),RENDER:e(10319),RESUME:e(87132),SHUTDOWN:e(81961),SLEEP:e(90194),START:e(6265),TRANSITION_COMPLETE:e(33178),TRANSITION_INIT:e(43063),TRANSITION_OUT:e(11259),TRANSITION_START:e(61611),TRANSITION_WAKE:e(45209),UPDATE:e(22966),WAKE:e(21747)}}),62194:((f,x,e)=>{var o=e(89993),m=e(79291),n={Events:e(44594),GetPhysicsPlugins:e(27397),GetScenePlugins:e(52106),SceneManager:e(60903),ScenePlugin:e(52209),Settings:e(55681),Systems:e(2368)};n=m(!1,n,o),f.exports=n}),30341:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(14463),r=e(79291),a=e(29747),t=new o({Extends:m,initialize:function(l,i,h){m.call(this),this.manager=l,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=r(this.config,h),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(console.error("addMarker "+s.name+" already exists in Sound"),!1):(s=r(!0,{name:"",start:0,duration:this.totalDuration-(s.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},s),this.markers[s.name]=s,!0)},updateMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(this.markers[s.name]=r(!0,this.markers[s.name],s),!0):(console.warn("Audio Marker: "+s.name+" missing in Sound: "+this.key),!1)},removeMarker:function(s){var l=this.markers[s];return l?(this.markers[s]=null,l):null},play:function(s,l){if(s===void 0&&(s=""),typeof s=="object"&&(l=s,s=""),typeof s!="string")return!1;if(!s)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[s])return console.warn("Marker: "+s+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[s],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=r(this.currentConfig,l),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var s=1.0005777895065548,l=this.currentConfig.detune+this.manager.detune,i=Math.pow(s,l);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.stop(),this.emit(n.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});f.exports=t}),85034:((f,x,e)=>{var o=e(83419),m=e(41786),n=e(50792),r=e(14463),a=e(8443),t=e(46710),s=e(58731),l=e(29747),i=e(26099),h=new o({Extends:n,initialize:function(c){n.call(this),this.game=c,this.jsonCache=c.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new i;var u=c.events;u.on(a.BLUR,this.onGameBlur,this),u.on(a.FOCUS,this.onGameFocus,this),u.on(a.PRE_STEP,this.update,this),u.once(a.DESTROY,this.destroy,this)},add:l,addAudioSprite:function(d,c){c===void 0&&(c={});var u=this.add(d,c);u.spritemap=this.jsonCache.get(d).spritemap;for(var p in u.spritemap)if(u.spritemap.hasOwnProperty(p)){var g=m(c),y=u.spritemap[p];g.loop=y.hasOwnProperty("loop")?y.loop:!1,u.addMarker({name:p,start:y.start,duration:y.end-y.start,config:g})}return u},get:function(d){return s(this.sounds,"key",d)},getAll:function(d){return d?t(this.sounds,"key",d):t(this.sounds)},getAllPlaying:function(){return t(this.sounds,"isPlaying",!0)},play:function(d,c){var u=this.add(d);return u.once(r.COMPLETE,u.destroy,u),c?c.name?(u.addMarker(c),u.play(c.name)):u.play(c):u.play()},playAudioSprite:function(d,c,u){var p=this.addAudioSprite(d);return p.once(r.COMPLETE,p.destroy,p),p.play(c,u)},remove:function(d){var c=this.sounds.indexOf(d);return c!==-1?(d.destroy(),this.sounds.splice(c,1),!0):!1},removeAll:function(){this.sounds.forEach(function(d){d.destroy()}),this.sounds.length=0},removeByKey:function(d){for(var c=0,u=this.sounds.length-1;u>=0;u--){var p=this.sounds[u];p.key===d&&(p.destroy(),this.sounds.splice(u,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(d){d.pause()}),this.emit(r.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(d){d.resume()}),this.emit(r.RESUME_ALL,this)},setListenerPosition:l,stopAll:function(){this.forEachActiveSound(function(d){d.stop()}),this.emit(r.STOP_ALL,this)},stopByKey:function(d){var c=0;return this.getAll(d).forEach(function(u){u.stop()&&c++}),c},isPlaying:function(d){var c=this.sounds,u=c.length-1,p;if(d===void 0){for(;u>=0;u--)if(p=this.sounds[u],p.isPlaying)return!0}else for(;u>=0;u--)if(p=this.sounds[u],p.key===d&&p.isPlaying)return!0;return!1},unlock:l,onBlur:l,onFocus:l,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(d,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(r.UNLOCKED,this));for(var u=this.sounds.length-1;u>=0;u--)this.sounds[u].pendingRemove&&this.sounds.splice(u,1);this.sounds.forEach(function(p){p.update(d,c)})},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(d,c){var u=this;this.sounds.forEach(function(p,g){p&&!p.pendingRemove&&d.call(c||u,p,g,u.sounds)})},setRate:function(d){return this.rate=d,this},rate:{get:function(){return this._rate},set:function(d){this._rate=d,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(r.GLOBAL_RATE,this,d)}},setDetune:function(d){return this.detune=d,this},detune:{get:function(){return this._detune},set:function(d){this._detune=d,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(r.GLOBAL_DETUNE,this,d)}}});f.exports=h}),14747:((f,x,e)=>{var o=e(33684),m=e(25960),n=e(57490),r={create:function(a){var t=a.config.audio,s=a.device.audio;return t.noAudio||!s.webAudio&&!s.audioData?new m(a):s.webAudio&&!t.disableWebAudio?new n(a):new o(a)}};f.exports=r}),19723:(f=>{f.exports="complete"}),98882:(f=>{f.exports="decodedall"}),57506:(f=>{f.exports="decoded"}),73146:(f=>{f.exports="destroy"}),11305:(f=>{f.exports="detune"}),40577:(f=>{f.exports="detune"}),30333:(f=>{f.exports="mute"}),20394:(f=>{f.exports="rate"}),21802:(f=>{f.exports="volume"}),1299:(f=>{f.exports="looped"}),99190:(f=>{f.exports="loop"}),97125:(f=>{f.exports="mute"}),89259:(f=>{f.exports="pan"}),79986:(f=>{f.exports="pauseall"}),17586:(f=>{f.exports="pause"}),19618:(f=>{f.exports="play"}),42306:(f=>{f.exports="rate"}),10387:(f=>{f.exports="resumeall"}),48959:(f=>{f.exports="resume"}),9960:(f=>{f.exports="seek"}),19180:(f=>{f.exports="stopall"}),98328:(f=>{f.exports="stop"}),50401:(f=>{f.exports="unlocked"}),52498:(f=>{f.exports="volume"}),14463:((f,x,e)=>{f.exports={COMPLETE:e(19723),DECODED:e(57506),DECODED_ALL:e(98882),DESTROY:e(73146),DETUNE:e(11305),GLOBAL_DETUNE:e(40577),GLOBAL_MUTE:e(30333),GLOBAL_RATE:e(20394),GLOBAL_VOLUME:e(21802),LOOP:e(99190),LOOPED:e(1299),MUTE:e(97125),PAN:e(89259),PAUSE_ALL:e(79986),PAUSE:e(17586),PLAY:e(19618),RATE:e(42306),RESUME_ALL:e(10387),RESUME:e(48959),SEEK:e(9960),STOP_ALL:e(19180),STOP:e(98328),UNLOCKED:e(50401),VOLUME:e(52498)}}),64895:((f,x,e)=>{var o=e(30341),m=e(83419),n=e(14463),r=e(45319),a=new m({Extends:o,initialize:function(s,l,i){if(i===void 0&&(i={}),this.tags=s.game.cache.audio.get(l),!this.tags)throw new Error('No cached audio asset with key "'+l);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,o.call(this,s,l,i)},play:function(t,s){return this.manager.isLocked(this,"play",[t,s])||!o.prototype.play.call(this,t,s)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!o.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!o.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,s=this.currentConfig.delay,l=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=l,this.audio.currentTime=l,this.applyConfig(),s===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+s*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var s=this.tags[t];if(s.dataset.used==="false")return s.dataset.used="true",this.audio=s,!0}if(!this.manager.override)return!1;var l=[];this.manager.forEachActiveSound(function(h){h.key===this.key&&h.audio&&l.push(h)},this),l.sort(function(h,d){return h.loop===d.loop?d.seek/d.duration-h.seek/h.duration:h.loop?1:-1});var i=l[0];return this.audio=i.audio,i.reset(),i.audio=null,i.startTime=0,i.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch(function(s){console.warn(s)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){o.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying){if(this.startTime>0){this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var s=this.currentMarker?this.currentMarker.start:0,l=s+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=l-this.manager.loopEndOffset?(this.audio.currentTime=s+Math.max(0,i-l),i=this.audio.currentTime):i<s&&(this.audio.currentTime+=s,i=this.audio.currentTime),i<this.previousTime&&this.emit(n.LOOPED,this);else if(i>=l){this.reset(),this.stopAndReleaseAudioTag(),this.emit(n.COMPLETE,this);return}this.previousTime=i}},destroy:function(){o.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=r(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){o.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,!this.manager.isLocked(this,"mute",t)&&(this.updateMute(),this.emit(n.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,!this.manager.isLocked(this,"volume",t)&&(this.updateVolume(),this.emit(n.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,!this.manager.isLocked(this,n.RATE,t)&&(this.calculateRate(),this.emit(n.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,!this.manager.isLocked(this,n.DETUNE,t)&&(this.calculateRate(),this.emit(n.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(n.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,!this.manager.isLocked(this,"loop",t)&&(this.audio&&(this.audio.loop=t),this.emit(n.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(n.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});f.exports=a}),33684:((f,x,e)=>{var o=e(85034),m=e(83419),n=e(14463),r=e(64895),a=new m({Extends:o,initialize:function(s){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,o.call(this,s)},add:function(t,s){var l=new r(this,t,s);return this.sounds.push(l),l},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each(function(h,d){for(var c=0;c<d.length;c++)if(d[c].dataset.locked==="true")return t.locked=!0,!1;return!0}),!!this.locked){var s=!1,l=function(){s=!0},i=function(){if(s){s=!1;return}document.body.removeEventListener("touchmove",l),document.body.removeEventListener("touchend",i);var h=[];if(t.game.cache.audio.entries.each(function(c,u){for(var p=0;p<u.length;p++){var g=u[p];g.dataset.locked==="true"&&h.push(g)}return!0}),h.length!==0){var d=h[h.length-1];d.oncanplaythrough=function(){d.oncanplaythrough=null,h.forEach(function(c){c.dataset.locked="false"}),t.unlocked=!0},h.forEach(function(c){c.load()})}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(d){d.currentMarker===null&&d.duration===0&&(d.duration=d.tags[0].duration),d.totalDuration=d.tags[0].duration});this.lockedActionsQueue.length;){var h=this.lockedActionsQueue.shift();h.sound[h.prop].apply?h.sound[h.prop].apply(h.sound,h.value||[]):h.sound[h.prop]=h.value}},this),document.body.addEventListener("touchmove",l,!1),document.body.addEventListener("touchend",i,!1)}},onBlur:function(){this.forEachActiveSound(function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(t){t.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){o.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,s,l){return t.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:t,prop:s,value:l}),!0):!1},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound(function(s){s.updateMute()}),this.emit(n.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound(function(s){s.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,t)}}});f.exports=a}),23717:((f,x,e)=>{f.exports={SoundManagerCreator:e(14747),Events:e(14463),BaseSound:e(30341),BaseSoundManager:e(85034),WebAudioSound:e(71741),WebAudioSoundManager:e(57490),HTML5AudioSound:e(64895),HTML5AudioSoundManager:e(33684),NoAudioSound:e(4603),NoAudioSoundManager:e(25960)}}),4603:((f,x,e)=>{var o=e(30341),m=e(83419),n=e(50792),r=e(79291),a=e(29747),t=function(){return!1},s=function(){return null},l=function(){return this},i=new m({Extends:n,initialize:function(d,c,u){u===void 0&&(u={}),n.call(this),this.manager=d,this.key=c,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},u),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:t,updateMarker:t,removeMarker:s,play:t,pause:t,resume:t,stop:t,setMute:l,setVolume:l,setRate:l,setDetune:l,setSeek:l,setLoop:l,setPan:l,applyConfig:s,resetConfig:s,update:a,calculateRate:s,destroy:function(){o.prototype.destroy.call(this)}});f.exports=i}),25960:((f,x,e)=>{var o=e(85034),m=e(83419),n=e(50792),r=e(4603),a=e(29747),t=new m({Extends:n,initialize:function(l){n.call(this),this.game=l,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(s,l){var i=new r(this,s,l);return this.sounds.push(i),i},addAudioSprite:function(s,l){var i=this.add(s,l);return i.spritemap={},i},get:function(s){return o.prototype.get.call(this,s)},getAll:function(s){return o.prototype.getAll.call(this,s)},play:function(s,l){return!1},playAudioSprite:function(s,l,i){return!1},remove:function(s){return o.prototype.remove.call(this,s)},removeAll:function(){return o.prototype.removeAll.call(this)},removeByKey:function(s){return o.prototype.removeByKey.call(this,s)},stopByKey:function(s){return o.prototype.stopByKey.call(this,s)},onBlur:a,onFocus:a,onGameBlur:a,onGameFocus:a,pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,unlock:a,forEachActiveSound:function(s,l){o.prototype.forEachActiveSound.call(this,s,l)},destroy:function(){o.prototype.destroy.call(this)}});f.exports=t}),71741:((f,x,e)=>{var o=e(30341),m=e(83419),n=e(14463),r=e(95540),a=new m({Extends:o,initialize:function(s,l,i){if(i===void 0&&(i={}),this.audioBuffer=s.game.cache.audio.get(l),!this.audioBuffer)throw new Error('Audio key "'+l+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=s.context.createGain(),this.volumeNode=s.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),s.context.createPanner&&(this.spatialNode=s.context.createPanner(),this.volumeNode.connect(this.spatialNode)),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),s.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(s.destination)):s.context.createPanner?this.spatialNode.connect(s.destination):this.volumeNode.connect(s.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,o.call(this,s,l,i)},play:function(t,s){return o.prototype.play.call(this,t,s)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(n.RESUME,this),!0)},stop:function(){return o.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0):!1},createAndStartBufferSource:function(){var t=this.currentConfig.seek,s=this.currentConfig.delay,l=this.manager.context.currentTime+s,i=(this.currentMarker?this.currentMarker.start:0)+t,h=this.duration-t;this.playTime=l-t,this.startTime=l,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,l),Math.max(0,i),Math.max(0,h)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),s=this.currentMarker?this.currentMarker.start:0,l=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,s),Math.max(0,l))},createBufferSource:function(){var t=this,s=this.manager.context.createBufferSource();return s.buffer=this.audioBuffer,s.connect(this.muteNode),s.onended=function(l){var i=l.target;(i===t.source||i===t.loopSource)&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},s},stopAndRemoveBufferSource:function(){if(this.source){var t=this.source;this.source=null,t.stop(),t.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var t=this.currentConfig.source;if(t&&this.manager.context.createPanner){var s=this.spatialNode;s.panningModel=r(t,"panningModel","equalpower"),s.distanceModel=r(t,"distanceModel","inverse"),s.orientationX.value=r(t,"orientationX",0),s.orientationY.value=r(t,"orientationY",0),s.orientationZ.value=r(t,"orientationZ",-1),s.refDistance=r(t,"refDistance",1),s.maxDistance=r(t,"maxDistance",1e4),s.rolloffFactor=r(t,"rolloffFactor",1),s.coneInnerAngle=r(t,"coneInnerAngle",360),s.coneOuterAngle=r(t,"coneOuterAngle",0),s.coneOuterGain=r(t,"coneOuterGain",0),this.spatialSource=r(t,"follow",null),this.spatialSource||(s.positionX.value=r(t,"x",0),s.positionY.value=r(t,"y",0),s.positionZ.value=r(t,"z",0))}o.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(t){this.spatialNode&&(this.spatialNode.positionX.value=t)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(t){this.spatialNode&&(this.spatialNode.positionY.value=t)}},update:function(){if(this.isPlaying&&this.spatialSource){var t=r(this.spatialSource,"x",null),s=r(this.spatialSource,"y",null);t&&t!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=t),s&&s!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=s)}this.hasEnded?(o.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){this.pendingRemove||(o.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){o.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,s=0;s<this.rateUpdates.length;s++){var l=0;s<this.rateUpdates.length-1?l=this.rateUpdates[s+1].time:l=this.manager.context.currentTime-this.playTime,t+=(l-this.rateUpdates[s].time)*this.rateUpdates[s].rate}return t},getLoopTime:function(){for(var t=0,s=0;s<this.rateUpdates.length-1;s++)t+=(this.rateUpdates[s+1].time-this.rateUpdates[s].time)*this.rateUpdates[s].rate;var l=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+l.time+(this.duration-t)/l.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(n.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(n.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(n.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(n.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(n.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});f.exports=a}),57490:((f,x,e)=>{var o=e(53134),m=e(85034),n=e(83419),r=e(14463),a=e(8443),t=e(71741),s=e(95540),l=new n({Extends:m,initialize:function(h){this.context=this.createAudioContext(h),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",m.call(this,h),this.locked&&(h.isBooted?this.unlock():h.events.once(a.BOOT,this.unlock,this)),h.events.on(a.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var i=this.context;window.setTimeout(function(){i&&(i.suspend(),i.resume())},100)},createAudioContext:function(i){var h=i.config.audio;if(h.context)return h.context.resume(),h.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(i){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=i,this.masterMuteNode=i.createGain(),this.masterVolumeNode=i.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(i.destination),this.destination=this.masterMuteNode,this},add:function(i,h){var d=new t(this,i,h);return this.sounds.push(d),d},decodeAudio:function(i,h){var d;Array.isArray(i)?d=i:d=[{key:i,data:h}];for(var c=this.game.cache.audio,u=d.length,p=0;p<d.length;p++){var g=d[p],y=g.key,v=g.data;typeof v=="string"&&(v=o(v));var S=(function(T,C){c.add(T,C),this.emit(r.DECODED,T),u--,u===0&&this.emit(r.DECODED_ALL)}).bind(this,y),w=(function(T,C){console.error("Error decoding audio: "+T+" - ",C?C.message:""),u--,u===0&&this.emit(r.DECODED_ALL)}).bind(this,y);this.context.decodeAudioData(v,S,w)}},setListenerPosition:function(i,h){return i===void 0&&(i=this.game.scale.width/2),h===void 0&&(h=this.game.scale.height/2),this.listenerPosition.set(i,h),this},unlock:function(){var i=this,h=document.body,d=function c(){if(i.context&&h){var u=h.removeEventListener.bind(h);i.context.resume().then(function(){u("touchstart",c),u("touchend",c),u("mousedown",c),u("mouseup",c),u("keydown",c),i.unlocked=!0},function(){u("touchstart",c),u("touchend",c),u("mousedown",c),u("mouseup",c),u("keydown",c)})}};h&&(h.addEventListener("touchstart",d,!1),h.addEventListener("touchend",d,!1),h.addEventListener("mousedown",d,!1),h.addEventListener("mouseup",d,!1),h.addEventListener("keydown",d,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var i=this.context;i&&!this.locked&&(i.state==="suspended"||i.state==="interrupted")&&i.resume()},update:function(i,h){var d=this.context.listener,c=s(this.listenerPosition,"x",null),u=s(this.listenerPosition,"y",null);if(d&&d.positionX!==void 0)c&&c!==this._spatialx&&(this._spatialx=d.positionX.value=c),u&&u!==this._spatialy&&(this._spatialy=d.positionY.value=u);else if(d){c&&c!==this._spatialx&&(this._spatialx=c),u&&u!==this._spatialy&&(this._spatialy=u);var p=s(d,"z",0);d.setPosition(this._spatialx||0,this._spatialy||0,p)}m.prototype.update.call(this,i,h),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var i=this;this.context.close().then(function(){i.context=null})}this.game.events.off(a.VISIBLE,this.onGameVisible,this),m.prototype.destroy.call(this)},setMute:function(i){return this.mute=i,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(i){this.masterMuteNode.gain.setValueAtTime(i?0:1,0),this.emit(r.GLOBAL_MUTE,this,i)}},setVolume:function(i){return this.volume=i,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(i){this.masterVolumeNode.gain.setValueAtTime(i,0),this.emit(r.GLOBAL_VOLUME,this,i)}}});f.exports=l}),73162:((f,x,e)=>{var o=e(37105),m=e(83419),n=e(29747),r=e(19186),a=new m({initialize:function(s){this.parent=s,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(t,s){return s?o.Add(this.list,t):o.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,s,l){return l?o.AddAt(this.list,t,s):o.AddAt(this.list,t,s,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,s){return t?(s===void 0&&(s=function(l,i){return l[t]-i[t]}),r(this.list,s),this):this},getByName:function(t){return o.GetFirst(this.list,"name",t)},getRandom:function(t,s){return o.GetRandom(this.list,t,s)},getFirst:function(t,s,l,i){return o.GetFirst(this.list,t,s,l,i)},getAll:function(t,s,l,i){return o.GetAll(this.list,t,s,l,i)},count:function(t,s){return o.CountAllMatching(this.list,t,s)},swap:function(t,s){o.Swap(this.list,t,s)},moveTo:function(t,s){return o.MoveTo(this.list,t,s)},moveAbove:function(t,s){return o.MoveAbove(this.list,t,s)},moveBelow:function(t,s){return o.MoveBelow(this.list,t,s)},remove:function(t,s){return s?o.Remove(this.list,t):o.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,s){return s?o.RemoveAt(this.list,t):o.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,s,l){return l?o.RemoveBetween(this.list,t,s):o.RemoveBetween(this.list,t,s,this.removeCallback,this)},removeAll:function(t){for(var s=this.list.length;s--;)this.remove(this.list[s],t);return this},bringToTop:function(t){return o.BringToTop(this.list,t)},sendToBack:function(t){return o.SendToBack(this.list,t)},moveUp:function(t){return o.MoveUp(this.list,t),t},moveDown:function(t){return o.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(t,s){return o.Replace(this.list,t,s)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,s,l,i){return o.SetAll(this.list,t,s,l,i),this},each:function(t,s){for(var l=[null],i=2;i<arguments.length;i++)l.push(arguments[i]);for(i=0;i<this.list.length;i++)l[0]=this.list[i],t.apply(s,l)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});f.exports=a}),90330:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r){this.entries={},this.size=0,this.setAll(r)},setAll:function(n){if(Array.isArray(n))for(var r=0;r<n.length;r++)this.set(n[r][0],n[r][1]);return this},set:function(n,r){return this.has(n)||this.size++,this.entries[n]=r,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],r=this.entries;for(var a in r)n.push(r[a]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],r=this.entries;for(var a in r)n.push(r[a]);return n},dump:function(){var n=this.entries;console.group("Map");for(var r in n)console.log(r,n[r]);console.groupEnd()},each:function(n){var r=this.entries;for(var a in r)if(n(a,r[a])===!1)break;return this},contains:function(n){var r=this.entries;for(var a in r)if(r[a]===n)return!0;return!1},merge:function(n,r){r===void 0&&(r=!1);var a=this.entries,t=n.entries;for(var s in t)a.hasOwnProperty(s)&&r?a[s]=t[s]:this.set(s,t[s]);return this}});f.exports=m}),25774:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(82348),r=new o({Extends:m,initialize:function(){m.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(a){return this._active.indexOf(a)>-1},isPending:function(a){return this._toProcess>0&&this._pending.indexOf(a)>-1},isDestroying:function(a){return this._destroy.indexOf(a)>-1},add:function(a){return this.checkQueue&&this.isActive(a)&&!this.isDestroying(a)||this.isPending(a)||(this._pending.push(a),this._toProcess++),a},remove:function(a){if(this.isPending(a)){var t=this._pending,s=t.indexOf(a);s!==-1&&t.splice(s,1)}else this.isActive(a)&&(this._destroy.push(a),this._toProcess++);return a},removeAll:function(){for(var a=this._active,t=this._destroy,s=a.length;s--;)t.push(a[s]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var a=this._destroy,t=this._active,s,l;for(s=0;s<a.length;s++){l=a[s];var i=t.indexOf(l);i!==-1&&(t.splice(i,1),this.emit(n.PROCESS_QUEUE_REMOVE,l))}for(a.length=0,a=this._pending,s=0;s<a.length;s++)l=a[s],(!this.checkQueue||this.checkQueue&&t.indexOf(l)===-1)&&(t.push(l),this.emit(n.PROCESS_QUEUE_ADD,l));return a.length=0,this._toProcess=0,t},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});f.exports=r}),59542:((f,x,e)=>{var o=e(43886);function m(v){if(!(this instanceof m))return new m(v);this._maxEntries=Math.max(4,v||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}m.prototype={all:function(){return this._all(this.data,[])},search:function(v){var S=this.data,w=[],T=this.toBBox;if(!p(v,S))return w;for(var C=[],M,E,P,A;S;){for(M=0,E=S.children.length;M<E;M++)P=S.children[M],A=S.leaf?T(P):P,p(v,A)&&(S.leaf?w.push(P):u(v,A)?this._all(P,w):C.push(P));S=C.pop()}return w},collides:function(v){var S=this.data,w=this.toBBox;if(!p(v,S))return!1;for(var T=[],C,M,E,P;S;){for(C=0,M=S.children.length;C<M;C++)if(E=S.children[C],P=S.leaf?w(E):E,p(v,P)){if(S.leaf||u(v,P))return!0;T.push(E)}S=T.pop()}return!1},load:function(v){if(!(v&&v.length))return this;if(v.length<this._minEntries){for(var S=0,w=v.length;S<w;S++)this.insert(v[S]);return this}var T=this._build(v.slice(),0,v.length-1,0);if(!this.data.children.length)this.data=T;else if(this.data.height===T.height)this._splitRoot(this.data,T);else{if(this.data.height<T.height){var C=this.data;this.data=T,T=C}this._insert(T,this.data.height-T.height-1,!0)}return this},insert:function(v){return v&&this._insert(v,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(v,S){if(!v)return this;for(var w=this.data,T=this.toBBox(v),C=[],M=[],E,P,A,D;w||C.length;){if(w||(w=C.pop(),P=C[C.length-1],E=M.pop(),D=!0),w.leaf&&(A=n(v,w.children,S),A!==-1))return w.children.splice(A,1),C.push(w),this._condense(C),this;!D&&!w.leaf&&u(w,T)?(C.push(w),M.push(E),E=0,P=w,w=w.children[0]):P?(E++,w=P.children[E],D=!1):w=null}return this},toBBox:function(v){return v},compareMinX:s,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(v){return this.data=v,this},_all:function(v,S){for(var w=[];v;)v.leaf?S.push.apply(S,v.children):w.push.apply(w,v.children),v=w.pop();return S},_build:function(v,S,w,T){var C=w-S+1,M=this._maxEntries,E;if(C<=M)return E=g(v.slice(S,w+1)),r(E,this.toBBox),E;T||(T=Math.ceil(Math.log(C)/Math.log(M)),M=Math.ceil(C/Math.pow(M,T-1))),E=g([]),E.leaf=!1,E.height=T;var P=Math.ceil(C/M),A=P*Math.ceil(Math.sqrt(M)),D,W,V,K;for(y(v,S,w,A,this.compareMinX),D=S;D<=w;D+=A)for(V=Math.min(D+A-1,w),y(v,D,V,P,this.compareMinY),W=D;W<=V;W+=P)K=Math.min(W+P-1,V),E.children.push(this._build(v,W,K,T-1));return r(E,this.toBBox),E},_chooseSubtree:function(v,S,w,T){for(var C,M,E,P,A,D,W,V;T.push(S),!(S.leaf||T.length-1===w);){for(W=V=1/0,C=0,M=S.children.length;C<M;C++)E=S.children[C],A=i(E),D=d(v,E)-A,D<V?(V=D,W=A<W?A:W,P=E):D===V&&A<W&&(W=A,P=E);S=P||S.children[0]}return S},_insert:function(v,S,w){var T=this.toBBox,C=w?v:T(v),M=[],E=this._chooseSubtree(C,this.data,S,M);for(E.children.push(v),t(E,C);S>=0&&M[S].children.length>this._maxEntries;)this._split(M,S),S--;this._adjustParentBBoxes(C,M,S)},_split:function(v,S){var w=v[S],T=w.children.length,C=this._minEntries;this._chooseSplitAxis(w,C,T);var M=this._chooseSplitIndex(w,C,T),E=g(w.children.splice(M,w.children.length-M));E.height=w.height,E.leaf=w.leaf,r(w,this.toBBox),r(E,this.toBBox),S?v[S-1].children.push(E):this._splitRoot(w,E)},_splitRoot:function(v,S){this.data=g([v,S]),this.data.height=v.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(v,S,w){var T,C,M,E,P,A,D,W;for(A=D=1/0,T=S;T<=w-S;T++)C=a(v,0,T,this.toBBox),M=a(v,T,w,this.toBBox),E=c(C,M),P=i(C)+i(M),E<A?(A=E,W=T,D=P<D?P:D):E===A&&P<D&&(D=P,W=T);return W},_chooseSplitAxis:function(v,S,w){var T=v.leaf?this.compareMinX:s,C=v.leaf?this.compareMinY:l,M=this._allDistMargin(v,S,w,T),E=this._allDistMargin(v,S,w,C);M<E&&v.children.sort(T)},_allDistMargin:function(v,S,w,T){v.children.sort(T);var C=this.toBBox,M=a(v,0,S,C),E=a(v,w-S,w,C),P=h(M)+h(E),A,D;for(A=S;A<w-S;A++)D=v.children[A],t(M,v.leaf?C(D):D),P+=h(M);for(A=w-S-1;A>=S;A--)D=v.children[A],t(E,v.leaf?C(D):D),P+=h(E);return P},_adjustParentBBoxes:function(v,S,w){for(var T=w;T>=0;T--)t(S[T],v)},_condense:function(v){for(var S=v.length-1,w;S>=0;S--)v[S].children.length===0?S>0?(w=v[S-1].children,w.splice(w.indexOf(v[S]),1)):this.clear():r(v[S],this.toBBox)},compareMinX:function(v,S){return v.left-S.left},compareMinY:function(v,S){return v.top-S.top},toBBox:function(v){return{minX:v.left,minY:v.top,maxX:v.right,maxY:v.bottom}}};function n(v,S,w){if(!w)return S.indexOf(v);for(var T=0;T<S.length;T++)if(w(v,S[T]))return T;return-1}function r(v,S){a(v,0,v.children.length,S,v)}function a(v,S,w,T,C){C||(C=g(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var M=S,E;M<w;M++)E=v.children[M],t(C,v.leaf?T(E):E);return C}function t(v,S){return v.minX=Math.min(v.minX,S.minX),v.minY=Math.min(v.minY,S.minY),v.maxX=Math.max(v.maxX,S.maxX),v.maxY=Math.max(v.maxY,S.maxY),v}function s(v,S){return v.minX-S.minX}function l(v,S){return v.minY-S.minY}function i(v){return(v.maxX-v.minX)*(v.maxY-v.minY)}function h(v){return v.maxX-v.minX+(v.maxY-v.minY)}function d(v,S){return(Math.max(S.maxX,v.maxX)-Math.min(S.minX,v.minX))*(Math.max(S.maxY,v.maxY)-Math.min(S.minY,v.minY))}function c(v,S){var w=Math.max(v.minX,S.minX),T=Math.max(v.minY,S.minY),C=Math.min(v.maxX,S.maxX),M=Math.min(v.maxY,S.maxY);return Math.max(0,C-w)*Math.max(0,M-T)}function u(v,S){return v.minX<=S.minX&&v.minY<=S.minY&&S.maxX<=v.maxX&&S.maxY<=v.maxY}function p(v,S){return S.minX<=v.maxX&&S.minY<=v.maxY&&S.maxX>=v.minX&&S.maxY>=v.minY}function g(v){return{children:v,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(v,S,w,T,C){for(var M=[S,w],E;M.length;)w=M.pop(),S=M.pop(),!(w-S<=T)&&(E=S+Math.ceil((w-S)/T/2)*T,o(v,E,S,w,C),M.push(S,E,E,w))}f.exports=m}),35072:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r){if(this.entries=[],Array.isArray(r))for(var a=0;a<r.length;a++)this.set(r[a])},set:function(n){return this.entries.indexOf(n)===-1&&this.entries.push(n),this},get:function(n,r){for(var a=0;a<this.entries.length;a++){var t=this.entries[a];if(t[n]===r)return t}},getArray:function(){return this.entries.slice(0)},delete:function(n){var r=this.entries.indexOf(n);return r>-1&&this.entries.splice(r,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++){var r=this.entries[n];console.log(r)}console.groupEnd()},each:function(n,r){var a,t=this.entries.slice(),s=t.length;if(r)for(a=0;a<s&&n.call(r,t[a],a)!==!1;a++);else for(a=0;a<s&&n(t[a],a)!==!1;a++);return this},iterate:function(n,r){var a,t=this.entries.length;if(r)for(a=0;a<t&&n.call(r,this.entries[a],a)!==!1;a++);else for(a=0;a<t&&n(this.entries[a],a)!==!1;a++);return this},iterateLocal:function(n){var r,a=[];for(r=1;r<arguments.length;r++)a.push(arguments[r]);var t=this.entries.length;for(r=0;r<t;r++){var s=this.entries[r];s[n].apply(s,a)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return this.entries.indexOf(n)>-1},union:function(n){var r=new m;return n.entries.forEach(function(a){r.set(a)}),this.entries.forEach(function(a){r.set(a)}),r},intersect:function(n){var r=new m;return this.entries.forEach(function(a){n.contains(a)&&r.set(a)}),r},difference:function(n){var r=new m;return this.entries.forEach(function(a){n.contains(a)||r.set(a)}),r},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});f.exports=m}),86555:((f,x,e)=>{var o=e(45319),m=e(83419),n=e(56583),r=e(26099),a=new m({initialize:function(s,l,i,h){s===void 0&&(s=0),l===void 0&&(l=s),i===void 0&&(i=0),h===void 0&&(h=null),this._width=s,this._height=l,this._parent=h,this.aspectMode=i,this.aspectRatio=l===0?1:s/l,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new r},setAspectMode:function(t){return t===void 0&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.snapTo.set(t,s),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.minWidth=o(t,0,this.maxWidth),this.minHeight=o(s,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,s){return t===void 0&&(t=Number.MAX_VALUE),s===void 0&&(s=t),this.maxWidth=o(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=o(s,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,s){switch(t===void 0&&(t=0),s===void 0&&(s=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(n(t,this.snapTo.x)),this._height=this.getNewHeight(n(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(s,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,s,!0);break;case a.ENVELOP:this.constrain(t,s,!1);break}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,s){return this._width=this.getNewWidth(n(t,this.snapTo.x)),this._height=this.getNewHeight(n(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(t,s){return s===void 0&&(s=!0),t=o(t,this.minWidth,this.maxWidth),s&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,s){return s===void 0&&(s=!0),t=o(t,this.minHeight,this.maxHeight),s&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,s,l){t===void 0&&(t=0),s===void 0&&(s=t),l===void 0&&(l=!0),t=this.getNewWidth(t),s=this.getNewHeight(s);var i=this.snapTo,h=s===0?1:t/s;return l&&this.aspectRatio>h||!l&&this.aspectRatio<h?(t=n(t,i.x),s=t/this.aspectRatio,i.y>0&&(s=n(s,i.y),t=s*this.aspectRatio)):(l&&this.aspectRatio<h||!l&&this.aspectRatio>h)&&(s=n(s,i.y),t=s*this.aspectRatio,i.x>0&&(t=n(t,i.x),s=t*(1/this.aspectRatio))),this._width=t,this._height=s,this},fitTo:function(t,s){return this.constrain(t,s,!0)},envelop:function(t,s){return this.constrain(t,s,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,f.exports=a}),15238:(f=>{f.exports="add"}),56187:(f=>{f.exports="remove"}),82348:((f,x,e)=>{f.exports={PROCESS_QUEUE_ADD:e(15238),PROCESS_QUEUE_REMOVE:e(56187)}}),41392:((f,x,e)=>{f.exports={Events:e(82348),List:e(73162),Map:e(90330),ProcessQueue:e(25774),RTree:e(59542),Set:e(35072),Size:e(86555)}}),57382:((f,x,e)=>{var o=e(83419),m=e(45319),n=e(40987),r=e(8054),a=e(50030),t=e(79237),s=new o({Extends:t,initialize:function(i,h,d,c,u){t.call(this,i,h,d,c,u),this.add("__BASE",0,0,0,c,u),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=c,this.height=u,this.imageData=this.context.getImageData(0,0,c,u),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===r.WEBGL&&this.refresh(),this},draw:function(l,i,h,d){return d===void 0&&(d=!0),this.context.drawImage(h,l,i),d&&this.update(),this},drawFrame:function(l,i,h,d,c){h===void 0&&(h=0),d===void 0&&(d=0),c===void 0&&(c=!0);var u=this.manager.getFrame(l,i);if(u){var p=u.canvasData,g=u.cutWidth,y=u.cutHeight,v=u.source.resolution;this.context.drawImage(u.source.image,p.x,p.y,g,y,h,d,g/v,y/v),c&&this.update()}return this},setPixel:function(l,i,h,d,c,u){u===void 0&&(u=255),l=Math.abs(Math.floor(l)),i=Math.abs(Math.floor(i));var p=this.getIndex(l,i);if(p>-1){var g=this.context.getImageData(l,i,1,1);g.data[0]=h,g.data[1]=d,g.data[2]=c,g.data[3]=u,this.context.putImageData(g,l,i)}return this},putData:function(l,i,h,d,c,u,p){return d===void 0&&(d=0),c===void 0&&(c=0),u===void 0&&(u=l.width),p===void 0&&(p=l.height),this.context.putImageData(l,i,h,d,c,u,p),this},getData:function(l,i,h,d){l=m(Math.floor(l),0,this.width-1),i=m(Math.floor(i),0,this.height-1),h=m(h,1,this.width-l),d=m(d,1,this.height-i);var c=this.context.getImageData(l,i,h,d);return c},getPixel:function(l,i,h){h||(h=new n);var d=this.getIndex(l,i);if(d>-1){var c=this.data,u=c[d+0],p=c[d+1],g=c[d+2],y=c[d+3];h.setTo(u,p,g,y)}return h},getPixels:function(l,i,h,d){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=this.width),d===void 0&&(d=h),l=Math.abs(Math.round(l)),i=Math.abs(Math.round(i));for(var c=m(l,0,this.width),u=m(l+h,0,this.width),p=m(i,0,this.height),g=m(i+d,0,this.height),y=new n,v=[],S=p;S<g;S++){for(var w=[],T=c;T<u;T++)y=this.getPixel(T,S,y),w.push({x:T,y:S,color:y.color,alpha:y.alphaGL});v.push(w)}return v},getIndex:function(l,i){return l=Math.abs(Math.round(l)),i=Math.abs(Math.round(i)),l<this.width&&i<this.height?(l+i*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(l,i,h,d,c){return l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=this.width),d===void 0&&(d=this.height),c===void 0&&(c=!0),this.context.clearRect(l,i,h,d),c&&this.update(),this},setSize:function(l,i){return i===void 0&&(i=l),(l!==this.width||i!==this.height)&&(this.canvas.width=l,this.canvas.height=i,this._source.width=l,this._source.height=i,this._source.isPowerOf2=a(l,i),this.frames.__BASE.setSize(l,i,0,0),this.width=l,this.height=i,this.refresh()),this},destroy:function(){t.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});f.exports=s}),81320:((f,x,e)=>{var o=e(10312),m=e(38058),n=e(27919),r=e(83419),a=e(8054),t=e(4327),s=e(95540),l=e(36060),i=e(32302),h=e(79237),d=e(70554),c=new r({Extends:h,initialize:function(p,g,y,v,S){y===void 0&&(y=256),v===void 0&&(v=256),S===void 0&&(S=!0),this.type="DynamicTexture";var w=p.game.renderer,T=w&&w.type===a.CANVAS,C=T?n.create2D(this,y,v):[this];h.call(this,p,g,C,y,v),this.add("__BASE",0,0,0,y,v),this.renderer=w,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=T?C:null,this.context=T?C.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new m(0,0,y,v).setScene(p.game.scene.systemScene,!1),this.renderTarget=T?null:new i(w,y,v,1,0,!1,!1,!0,!1),this.pipeline=T?null:w.pipelines.get(l.SINGLE_PIPELINE),this.setSize(y,v,S)},setSize:function(u,p,g){p===void 0&&(p=u),g===void 0&&(g=!0),g&&(u=Math.floor(u),p=Math.floor(p),u%2!==0&&u++,p%2!==0&&p++);var y=this.get(),v=y.source;if(u!==this.width||p!==this.height){this.canvas&&(this.canvas.width=u,this.canvas.height=p);var S=this.renderTarget;S&&(S.willResize(u,p)&&S.resize(u,p),S.texture!==v.glTexture&&this.renderer.deleteTexture(v.glTexture),this.setFromRenderTarget()),this.camera.setSize(u,p),v.width=u,v.height=p,y.setSize(u,p),this.width=u,this.height=p}else{var w=this.getSourceImage();y.cutX+u>w.width&&(u=w.width-y.cutX),y.cutY+p>w.height&&(p=w.height-y.cutY),y.setSize(u,p,y.cutX,y.cutY)}return this},setFromRenderTarget:function(){var u=this.get(),p=u.source,g=this.renderTarget;return p.isRenderTexture=!0,p.isGLTexture=!0,p.glTexture=g.texture,this},setIsSpriteTexture:function(u){return this.isSpriteTexture=u,this},fill:function(u,p,g,y,v,S){var w=this.camera,T=this.renderer;p===void 0&&(p=1),g===void 0&&(g=0),y===void 0&&(y=0),v===void 0&&(v=this.width),S===void 0&&(S=this.height);var C=u>>16&255,M=u>>8&255,E=u&255,P=this.renderTarget;if(w.preRender(),P){P.bind(!0);var A=this.pipeline.manager.set(this.pipeline),D=T.width/P.width,W=T.height/P.height,V=P.height-(y+S);A.drawFillRect(g*D,V*W,v*D,S*W,d.getTintFromFloats(E/255,M/255,C/255,1),p),P.unbind(!0)}else{var K=this.context;T.setContext(K),K.globalCompositeOperation="source-over",K.fillStyle="rgba("+C+","+M+","+E+","+p+")",K.fillRect(g,y,v,S),T.setContext()}return this.dirty=!0,this},clear:function(u,p,g,y){if(this.dirty){var v=this.context,S=this.renderTarget;S?S.clear(u,p,g,y):v&&(u!==void 0&&p!==void 0&&g!==void 0&&y!==void 0?v.clearRect(u,p,g,y):(v.save(),v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,this.width,this.height),v.restore())),this.dirty=!1}return this},stamp:function(u,p,g,y,v){g===void 0&&(g=0),y===void 0&&(y=0);var S=s(v,"alpha",1),w=s(v,"tint",16777215),T=s(v,"angle",0),C=s(v,"rotation",0),M=s(v,"scale",1),E=s(v,"scaleX",M),P=s(v,"scaleY",M),A=s(v,"originX",.5),D=s(v,"originY",.5),W=s(v,"blendMode",0),V=s(v,"erase",!1),K=s(v,"skipBatch",!1),X=this.manager.resetStamp(S,w);return X.setAngle(0),T!==0?X.setAngle(T):C!==0&&X.setRotation(C),X.setScale(E,P),X.setTexture(u,p),X.setOrigin(A,D),X.setBlendMode(W),V&&(this._eraseMode=!0),K?this.batchGameObject(X,g,y):this.draw(X,g,y),V&&(this._eraseMode=!1),this},erase:function(u,p,g){return this._eraseMode=!0,this.draw(u,p,g),this._eraseMode=!1,this},draw:function(u,p,g,y,v){return this.beginDraw(),this.batchDraw(u,p,g,y,v),this.endDraw(),this},drawFrame:function(u,p,g,y,v,S){return this.beginDraw(),this.batchDrawFrame(u,p,g,y,v,S),this.endDraw(),this},repeat:function(u,p,g,y,v,S,w,T,C){if(g===void 0&&(g=0),y===void 0&&(y=0),v===void 0&&(v=this.width),S===void 0&&(S=this.height),w===void 0&&(w=1),T===void 0&&(T=16777215),C===void 0&&(C=!1),u instanceof t?p=u:p=this.manager.getFrame(u,p),!p)return this;var M=this.manager.resetStamp(w,T);M.setFrame(p),M.setOrigin(0);var E=p.width,P=p.height;v=Math.floor(v),S=Math.floor(S);var A=Math.ceil(v/E),D=Math.ceil(S/P),W=A*E-v,V=D*P-S;W>0&&(W=E-W),V>0&&(V=P-V),g<0&&(A+=Math.ceil(Math.abs(g)/E)),y<0&&(D+=Math.ceil(Math.abs(y)/P));var K=g,X=y,R=!1,H=this.manager.stampCrop.setTo(0,0,E,P);C||this.beginDraw();for(var L=0;L<D;L++){if(X+P<0){X+=P;continue}for(var N=0;N<A;N++){if(R=!1,K+E<0){K+=E;continue}else K<0&&(R=!0,H.width=E+K,H.x=E-H.width);X<0&&(R=!0,H.height=P+X,H.y=P-H.height),W>0&&N===A-1&&(R=!0,H.width=W),V>0&&L===D-1&&(R=!0,H.height=V),R&&M.setCrop(H),this.batchGameObject(M,K,X),M.isCropped=!1,H.setTo(0,0,E,P),K+=E}K=g,X+=P}return C||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var u=this.camera,p=this.renderer,g=this.renderTarget;u.preRender(),g?p.beginCapture(g.width,g.height):p.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(u,p,g,y,v){return Array.isArray(u)||(u=[u]),this.batchList(u,p,g,y,v),this},batchDrawFrame:function(u,p,g,y,v,S){g===void 0&&(g=0),y===void 0&&(y=0),v===void 0&&(v=1),S===void 0&&(S=16777215);var w=this.manager.getFrame(u,p);return w&&(this.renderTarget?this.pipeline.batchTextureFrame(w,g,y,S,v,this.camera.matrix,null):this.batchTextureFrame(w,g,y,v,S)),this},endDraw:function(u){if(u===void 0&&(u=this._eraseMode),this.isDrawing){var p=this.renderer,g=this.renderTarget;if(g){var y=p.endCapture(),v=p.pipelines.setUtility();v.blitFrame(y,g,1,!1,!1,u,this.isSpriteTexture),p.resetScissor(),p.resetViewport()}else p.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(u,p,g,y,v){var S=u.length;if(S!==0)for(var w=0;w<S;w++){var T=u[w];!T||T===this||(T.renderWebGL||T.renderCanvas?this.batchGameObject(T,p,g):T.isParent||T.list?this.batchGroup(T.getChildren(),p,g):typeof T=="string"?this.batchTextureFrameKey(T,null,p,g,y,v):T instanceof t?this.batchTextureFrame(T,p,g,y,v):Array.isArray(T)&&this.batchList(T,p,g,y,v))}},batchGroup:function(u,p,g){p===void 0&&(p=0),g===void 0&&(g=0);for(var y=0;y<u.length;y++){var v=u[y];v.willRender(this.camera)&&this.batchGameObject(v,v.x+p,v.y+g)}},batchGameObject:function(u,p,g){p===void 0&&(p=u.x),g===void 0&&(g=u.y);var y=u.x,v=u.y,S=this.camera,w=this.renderer,T=this._eraseMode,C=u.mask;if(u.setPosition(p,g),this.canvas){if(T){var M=u.blendMode;u.blendMode=o.ERASE}C&&C.preRenderCanvas(w,u,S),u.renderCanvas(w,u,S,null),C&&C.postRenderCanvas(w,u,S),T&&(u.blendMode=M)}else w&&(C&&C.preRenderWebGL(w,u,S),T||w.setBlendMode(u.blendMode),u.renderWebGL(w,u,S),C&&C.postRenderWebGL(w,S,this.renderTarget));u.setPosition(y,v)},batchTextureFrameKey:function(u,p,g,y,v,S){var w=this.manager.getFrame(u,p);w&&this.batchTextureFrame(w,g,y,v,S)},batchTextureFrame:function(u,p,g,y,v){p===void 0&&(p=0),g===void 0&&(g=0),y===void 0&&(y=1),v===void 0&&(v=16777215);var S=this.camera.matrix,w=this.renderTarget;if(w)this.pipeline.batchTextureFrame(u,p,g,v,y,S,null);else{var T=this.context,C=u.canvasData,M=u.source.image;T.save(),T.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",T.globalAlpha=y,S.setToContext(T),C.width>0&&C.height>0&&T.drawImage(M,C.x,C.y,C.width,C.height,p,g,C.width,C.height),T.restore()}},snapshotArea:function(u,p,g,y,v,S,w){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,v,!1,u,p,g,y,S,w):this.renderer.snapshotCanvas(this.canvas,v,!1,u,p,g,y,S,w),this},snapshot:function(u,p,g){return this.snapshotArea(0,0,this.width,this.height,u,p,g)},snapshotPixel:function(u,p,g){return this.snapshotArea(u,p,1,1,g,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(u,p,g,y){var v=this.manager.resetStamp();v.setTexture(this),v.setOrigin(0),v.renderWebGL(u,v,g,y)},renderCanvas:function(){},destroy:function(){var u=this.manager.stamp;u&&u.texture===this&&this.manager.resetStamp(),h.prototype.destroy.call(this),n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});f.exports=c}),4327:((f,x,e)=>{var o=e(83419),m=e(45319),n=e(79291),r=new o({initialize:function(t,s,l,i,h,d,c){this.texture=t,this.name=s,this.source=t.source[l],this.sourceIndex=l,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(d,c,i,h)},setCutPosition:function(a,t){return a===void 0&&(a=0),t===void 0&&(t=0),this.cutX=a,this.cutY=t,this.updateUVs()},setCutSize:function(a,t){return this.cutWidth=a,this.cutHeight=t,this.updateUVs()},setSize:function(a,t,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.setCutPosition(s,l),this.setCutSize(a,t),this.width=a,this.height=t,this.halfWidth=Math.floor(a*.5),this.halfHeight=Math.floor(t*.5),this.centerX=Math.floor(a/2),this.centerY=Math.floor(t/2);var i=this.data,h=i.cut;h.x=s,h.y=l,h.w=a,h.h=t,h.r=s+a,h.b=l+t,i.sourceSize.w=a,i.sourceSize.h=t,i.spriteSourceSize.w=a,i.spriteSourceSize.h=t,i.radius=.5*Math.sqrt(a*a+t*t);var d=i.drawImage;return d.x=s,d.y=l,d.width=a,d.height=t,this.updateUVs()},setTrim:function(a,t,s,l,i,h){var d=this.data,c=d.spriteSourceSize;return d.trim=!0,d.sourceSize.w=a,d.sourceSize.h=t,c.x=s,c.y=l,c.w=i,c.h=h,c.r=s+i,c.b=l+h,this.x=s,this.y=l,this.width=i,this.height=h,this.halfWidth=i*.5,this.halfHeight=h*.5,this.centerX=Math.floor(i/2),this.centerY=Math.floor(h/2),this.updateUVs()},setScale9:function(a,t,s,l){var i=this.data;return i.scale9=!0,i.is3Slice=t===0&&l===this.height,i.scale9Borders.x=a,i.scale9Borders.y=t,i.scale9Borders.w=s,i.scale9Borders.h=l,this},setCropUVs:function(a,t,s,l,i,h,d){var c=this.cutX,u=this.cutY,p=this.cutWidth,g=this.cutHeight,y=this.realWidth,v=this.realHeight;t=m(t,0,y),s=m(s,0,v),l=m(l,0,y-t),i=m(i,0,v-s);var S=c+t,w=u+s,T=l,C=i,M=this.data;if(M.trim){var E=M.spriteSourceSize;l=m(l,0,E.x+p-t),i=m(i,0,E.y+g-s);var P=t+l,A=s+i,D=!(E.r<t||E.b<s||E.x>P||E.y>A);if(D){var W=Math.max(E.x,t),V=Math.max(E.y,s),K=Math.min(E.r,P)-W,X=Math.min(E.b,A)-V;T=K,C=X,h?S=c+(p-(W-E.x)-K):S=c+(W-E.x),d?w=u+(g-(V-E.y)-X):w=u+(V-E.y),t=W,s=V,l=K,i=X}else S=0,w=0,T=0,C=0}else h&&(S=c+(p-t-l)),d&&(w=u+(g-s-i));var R=this.source.width,H=this.source.height;return a.u0=Math.max(0,S/R),a.v0=Math.max(0,w/H),a.u1=Math.min(1,(S+T)/R),a.v1=Math.min(1,(w+C)/H),a.x=t,a.y=s,a.cx=S,a.cy=w,a.cw=T,a.ch=C,a.width=l,a.height=i,a.flipX=h,a.flipY=d,a},updateCropUVs:function(a,t,s){return this.setCropUVs(a,a.x,a.y,a.width,a.height,t,s)},setUVs:function(a,t,s,l,i,h){var d=this.data.drawImage;return d.width=a,d.height=t,this.u0=s,this.v0=l,this.u1=i,this.v1=h,this},updateUVs:function(){var a=this.cutX,t=this.cutY,s=this.cutWidth,l=this.cutHeight,i=this.data.drawImage;i.width=s,i.height=l;var h=this.source.width,d=this.source.height;return this.u0=a/h,this.v0=t/d,this.u1=(a+s)/h,this.v1=(t+l)/d,this},updateUVsInverted:function(){var a=this.source.width,t=this.source.height;return this.u0=(this.cutX+this.cutHeight)/a,this.v0=this.cutY/t,this.u1=this.cutX/a,this.v1=(this.cutY+this.cutWidth)/t,this},clone:function(){var a=new r(this.texture,this.name,this.sourceIndex);return a.cutX=this.cutX,a.cutY=this.cutY,a.cutWidth=this.cutWidth,a.cutHeight=this.cutHeight,a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a.halfWidth=this.halfWidth,a.halfHeight=this.halfHeight,a.centerX=this.centerX,a.centerY=this.centerY,a.rotated=this.rotated,a.data=n(!0,a.data,this.data),a.updateUVs(),a},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});f.exports=r}),79237:((f,x,e)=>{var o=e(83419),m=e(4327),n=e(11876),r='Texture "%s" has no frame "%s"',a=new o({initialize:function(s,l,i,h,d){Array.isArray(i)||(i=[i]),this.manager=s,this.key=l,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var c=0;c<i.length;c++)this.source.push(new n(this,i[c],h,d))},add:function(t,s,l,i,h,d){if(this.has(t))return null;var c=new m(this,t,s,l,i,h,d);return this.frames[t]=c,this.firstFrame==="__BASE"&&(this.firstFrame=t),this.frameTotal++,c},remove:function(t){if(this.has(t)){var s=this.get(t);return s.destroy(),delete this.frames[t],!0}return!1},has:function(t){return this.frames.hasOwnProperty(t)},get:function(t){t||(t=this.firstFrame);var s=this.frames[t];return s||(console.warn(r,this.key,t),s=this.frames[this.firstFrame]),s},getTextureSourceIndex:function(t){for(var s=0;s<this.source.length;s++)if(this.source[s]===t)return s;return-1},getFramesFromTextureSource:function(t,s){s===void 0&&(s=!1);var l=[];for(var i in this.frames)if(!(i==="__BASE"&&!s)){var h=this.frames[i];h.sourceIndex===t&&l.push(h)}return l},getFrameBounds:function(t){t===void 0&&(t=0);for(var s=this.getFramesFromTextureSource(t,!0),l=s[0],i=l.cutX,h=l.cutY,d=l.cutX+l.cutWidth,c=l.cutY+l.cutHeight,u=1;u<s.length;u++){var p=s[u];p.cutX<i&&(i=p.cutX),p.cutY<h&&(h=p.cutY),p.cutX+p.cutWidth>d&&(d=p.cutX+p.cutWidth),p.cutY+p.cutHeight>c&&(c=p.cutY+p.cutHeight)}return{x:i,y:h,width:d-i,height:c-h}},getFrameNames:function(t){t===void 0&&(t=!1);var s=Object.keys(this.frames);if(!t){var l=s.indexOf("__BASE");l!==-1&&s.splice(l,1)}return s},getSourceImage:function(t){(t==null||this.frameTotal===1)&&(t="__BASE");var s=this.frames[t];return s?s.source.image:(console.warn(r,this.key,t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){(t==null||this.frameTotal===1)&&(t="__BASE");var s=this.frames[t],l;return s?l=s.sourceIndex:(console.warn(r,this.key,t),l=this.frames.__BASE.sourceIndex),this.dataSource[l].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var l=this.source[s];this.dataSource.push(new n(this,t[s],l.width,l.height))}},setFilter:function(t){var s;for(s=0;s<this.source.length;s++)this.source[s].setFilter(t);for(s=0;s<this.dataSource.length;s++)this.dataSource[s].setFilter(t)},destroy:function(){var t,s=this.source,l=this.dataSource;for(t=0;t<s.length;t++)s[t]&&s[t].destroy();for(t=0;t<l.length;t++)l[t]&&l[t].destroy();for(var i in this.frames){var h=this.frames[i];h&&h.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});f.exports=a}),17130:((f,x,e)=>{var o=e(27919),m=e(57382),n=e(83419),r=e(40987),a=e(8054),t=e(81320),s=e(50792),l=e(69442),i=e(4327),h=e(8443),d=e(99584),c=e(35154),u=e(88571),p=e(41212),g=e(61309),y=e(87841),v=e(79237),S=new n({Extends:s,initialize:function(T){s.call(this),this.game=T,this.name="TextureManager",this.list={},this._tempCanvas=o.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new y,this.silentWarnings=!1,T.events.once(h.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(l.LOAD,this.updatePending,this),this.on(l.ERROR,this.updatePending,this);var w=this.game.config;w.defaultImage!==null&&this.addBase64("__DEFAULT",w.defaultImage),w.missingImage!==null&&this.addBase64("__MISSING",w.missingImage),w.whiteImage!==null&&this.addBase64("__WHITE",w.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(h.DESTROY,this.destroy,this),this.game.events.once(h.SYSTEM_READY,function(T){this.stamp=new u(T).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(l.LOAD),this.off(l.ERROR),this.emit(l.READY))},checkKey:function(w){return!w||typeof w!="string"||this.exists(w)?(this.silentWarnings||console.error("Texture key already in use: "+w),!1):!0},remove:function(w){if(typeof w=="string")if(this.exists(w))w=this.get(w);else return this.silentWarnings||console.warn("No texture found matching key: "+w),this;var T=w.key;return this.list.hasOwnProperty(T)&&(w.destroy(),this.emit(l.REMOVE,T),this.emit(l.REMOVE_KEY+T)),this},removeKey:function(w){return this.list.hasOwnProperty(w)&&delete this.list[w],this},addBase64:function(w,T){if(this.checkKey(w)){var C=this,M=new Image;M.onerror=function(){C.emit(l.ERROR,w)},M.onload=function(){var E=C.create(w,M);E&&(g.Image(E,0),C.emit(l.ADD,w,E),C.emit(l.ADD_KEY+w,E),C.emit(l.LOAD,w,E))},M.src=T}return this},getBase64:function(w,T,C,M){C===void 0&&(C="image/png"),M===void 0&&(M=.92);var E="",P=this.getFrame(w,T);if(P&&(P.source.isRenderTexture||P.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(P){var A=P.canvasData,D=o.create2D(this,A.width,A.height),W=D.getContext("2d",{willReadFrequently:!0});A.width>0&&A.height>0&&W.drawImage(P.source.image,A.x,A.y,A.width,A.height,0,0,A.width,A.height),E=D.toDataURL(C,M),o.remove(D)}return E},addImage:function(w,T,C){var M=null;return this.checkKey(w)&&(M=this.create(w,T),g.Image(M,0),C&&M.setDataSource(C),this.emit(l.ADD,w,M),this.emit(l.ADD_KEY+w,M)),M},addGLTexture:function(w,T){var C=null;if(this.checkKey(w)){var M=T.width,E=T.height;C=this.create(w,T,M,E),C.add("__BASE",0,0,0,M,E),this.emit(l.ADD,w,C),this.emit(l.ADD_KEY+w,C)}return C},addCompressedTexture:function(w,T,C){var M=null;if(this.checkKey(w)){if(M=this.create(w,T),M.add("__BASE",0,0,0,T.width,T.height),C){var E=function(A,D,W){Array.isArray(W.textures)||Array.isArray(W.frames)?g.JSONArray(A,D,W):g.JSONHash(A,D,W)};if(Array.isArray(C))for(var P=0;P<C.length;P++)E(M,P,C[P]);else E(M,0,C)}this.emit(l.ADD,w,M),this.emit(l.ADD_KEY+w,M)}return M},addRenderTexture:function(w,T){var C=null;return this.checkKey(w)&&(C=this.create(w,T),C.add("__BASE",0,0,0,T.width,T.height),this.emit(l.ADD,w,C),this.emit(l.ADD_KEY+w,C)),C},generate:function(w,T){if(this.checkKey(w)){var C=o.create(this,1,1);return T.canvas=C,d(T),this.addCanvas(w,C)}else return null},createCanvas:function(w,T,C){if(T===void 0&&(T=256),C===void 0&&(C=256),this.checkKey(w)){var M=o.create(this,T,C,a.CANVAS,!0);return this.addCanvas(w,M)}return null},addCanvas:function(w,T,C){C===void 0&&(C=!1);var M=null;return C?M=new m(this,w,T,T.width,T.height):this.checkKey(w)&&(M=new m(this,w,T,T.width,T.height),this.list[w]=M,this.emit(l.ADD,w,M),this.emit(l.ADD_KEY+w,M)),M},addDynamicTexture:function(w,T,C){var M=null;return typeof w=="string"&&!this.exists(w)?M=new t(this,w,T,C):(M=w,w=M.key),this.checkKey(w)?(this.list[w]=M,this.emit(l.ADD,w,M),this.emit(l.ADD_KEY+w,M)):M=null,M},addAtlas:function(w,T,C,M){return Array.isArray(C.textures)||Array.isArray(C.frames)?this.addAtlasJSONArray(w,T,C,M):this.addAtlasJSONHash(w,T,C,M)},addAtlasJSONArray:function(w,T,C,M){var E=null;if(T instanceof v?(w=T.key,E=T):this.checkKey(w)&&(E=this.create(w,T)),E){if(Array.isArray(C))for(var P=C.length===1,A=0;A<E.source.length;A++){var D=P?C[0]:C[A];g.JSONArray(E,A,D)}else g.JSONArray(E,0,C);M&&E.setDataSource(M),this.emit(l.ADD,w,E),this.emit(l.ADD_KEY+w,E)}return E},addAtlasJSONHash:function(w,T,C,M){var E=null;if(T instanceof v?(w=T.key,E=T):this.checkKey(w)&&(E=this.create(w,T)),E){if(Array.isArray(C))for(var P=0;P<C.length;P++)g.JSONHash(E,P,C[P]);else g.JSONHash(E,0,C);M&&E.setDataSource(M),this.emit(l.ADD,w,E),this.emit(l.ADD_KEY+w,E)}return E},addAtlasXML:function(w,T,C,M){var E=null;return T instanceof v?(w=T.key,E=T):this.checkKey(w)&&(E=this.create(w,T)),E&&(g.AtlasXML(E,0,C),M&&E.setDataSource(M),this.emit(l.ADD,w,E),this.emit(l.ADD_KEY+w,E)),E},addUnityAtlas:function(w,T,C,M){var E=null;return T instanceof v?(w=T.key,E=T):this.checkKey(w)&&(E=this.create(w,T)),E&&(g.UnityYAML(E,0,C),M&&E.setDataSource(M),this.emit(l.ADD,w,E),this.emit(l.ADD_KEY+w,E)),E},addSpriteSheet:function(w,T,C,M){var E=null;if(T instanceof v?(w=T.key,E=T):this.checkKey(w)&&(E=this.create(w,T)),E){var P=E.source[0].width,A=E.source[0].height;g.SpriteSheet(E,0,0,0,P,A,C),M&&E.setDataSource(M),this.emit(l.ADD,w,E),this.emit(l.ADD_KEY+w,E)}return E},addSpriteSheetFromAtlas:function(w,T){if(!this.checkKey(w))return null;var C=c(T,"atlas",null),M=c(T,"frame",null);if(!(!C||!M)){var E=this.get(C),P=E.get(M);if(P){var A=P.source.image;A||(A=P.source.glTexture);var D=this.create(w,A);return P.trimmed?g.SpriteSheetFromAtlas(D,P,T):g.SpriteSheet(D,0,P.cutX,P.cutY,P.cutWidth,P.cutHeight,T),this.emit(l.ADD,w,D),this.emit(l.ADD_KEY+w,D),D}}},addUint8Array:function(w,T,C,M){if(!this.checkKey(w)||T.length/4!==C*M)return null;var E=this.create(w,T,C,M);return E.add("__BASE",0,0,0,C,M),this.emit(l.ADD,w,E),this.emit(l.ADD_KEY+w,E),E},create:function(w,T,C,M){var E=null;return this.checkKey(w)&&(E=new v(this,w,T,C,M),this.list[w]=E),E},exists:function(w){return this.list.hasOwnProperty(w)},get:function(w){return w===void 0&&(w="__DEFAULT"),this.list[w]?this.list[w]:w instanceof v?w:w instanceof i?w.texture:this.list.__MISSING},cloneFrame:function(w,T){if(this.list[w])return this.list[w].get(T).clone()},getFrame:function(w,T){if(this.list[w])return this.list[w].get(T)},parseFrame:function(w){if(w){if(typeof w=="string")return this.getFrame(w);if(Array.isArray(w)&&w.length===2)return this.getFrame(w[0],w[1]);if(p(w))return this.getFrame(w.key,w.frame);if(w instanceof v)return w.get();if(w instanceof i)return w}else return},getTextureKeys:function(){var w=[];for(var T in this.list)T!=="__DEFAULT"&&T!=="__MISSING"&&T!=="__WHITE"&&T!=="__NORMAL"&&w.push(T);return w},getPixel:function(w,T,C,M){var E=this.getFrame(C,M);if(E){w-=E.x,T-=E.y;var P=E.data.cut;if(w+=P.x,T+=P.y,w>=P.x&&w<P.r&&T>=P.y&&T<P.b){var A=this._tempContext;A.clearRect(0,0,1,1),A.drawImage(E.source.image,w,T,1,1,0,0,1,1);var D=A.getImageData(0,0,1,1);return new r(D.data[0],D.data[1],D.data[2],D.data[3])}}return null},getPixelAlpha:function(w,T,C,M){var E=this.getFrame(C,M);if(E){w-=E.x,T-=E.y;var P=E.data.cut;if(w+=P.x,T+=P.y,w>=P.x&&w<P.r&&T>=P.y&&T<P.b){var A=this._tempContext;A.clearRect(0,0,1,1),A.drawImage(E.source.image,w,T,1,1,0,0,1,1);var D=A.getImageData(0,0,1,1);return D.data[3]}}return null},setTexture:function(w,T,C){return this.list[T]&&(w.texture=this.list[T],w.frame=w.texture.get(C)),w},renameTexture:function(w,T){var C=this.get(w);return C&&w!==T?(C.key=T,this.list[T]=C,delete this.list[w],!0):!1},each:function(w,T){for(var C=[null],M=1;M<arguments.length;M++)C.push(arguments[M]);for(var E in this.list)C[0]=this.list[E],w.apply(T,C)},resetStamp:function(w,T){w===void 0&&(w=1),T===void 0&&(T=16777215);var C=this.stamp;return C.setCrop(),C.setPosition(0),C.setAngle(0),C.setScale(1),C.setAlpha(w),C.setTint(T),C.setTexture("__WHITE"),C},destroy:function(){for(var w in this.list)this.list[w].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,o.remove(this._tempCanvas)}});f.exports=S}),11876:((f,x,e)=>{var o=e(27919),m=e(83419),n=e(50030),r=e(29795),a=e(82751),t=new m({initialize:function(l,i,h,d,c){c===void 0&&(c=!1);var u=l.manager.game;this.renderer=u.renderer,this.texture=l,this.source=i,this.image=i.compressed?null:i,this.compressionAlgorithm=i.compressed?i.format:null,this.resolution=1,this.width=h||i.naturalWidth||i.videoWidth||i.width||0,this.height=d||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=r.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture=i.type==="RenderTexture"||i.type==="DynamicTexture",this.isGLTexture=i instanceof a,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.flipY=c,this.init(u)},init:function(s){var l=this.renderer;if(l){var i=this.source;if(l.gl){var h=this.image,d=this.flipY,c=this.width,u=this.height,p=this.scaleMode;this.isCanvas?this.glTexture=l.createCanvasTexture(h,!1,d):this.isVideo?this.glTexture=l.createVideoTexture(h,!1,d):this.isRenderTexture?this.glTexture=l.createTextureFromSource(null,c,u,p):this.isGLTexture?this.glTexture=i:this.compressionAlgorithm?this.glTexture=l.createTextureFromSource(i,void 0,void 0,p):i instanceof Uint8Array?this.glTexture=l.createUint8ArrayTexture(i,c,u,p):this.glTexture=l.createTextureFromSource(h,c,u,p)}else this.isRenderTexture&&(this.image=i.canvas)}s.config.antialias||this.setFilter(1)},setFilter:function(s){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,s),this.scaleMode=s},setFlipY:function(s){return s===void 0&&(s=!0),s===this.flipY?this:(this.flipY=s,this.update(),this)},update:function(){var s=this.renderer,l=this.image,i=this.flipY,h=s.gl;h&&this.isCanvas?s.updateCanvasTexture(l,this.glTexture,i):h&&this.isVideo&&s.updateVideoTexture(l,this.glTexture,i)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&o.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});f.exports=t}),19673:(f=>{var x={LINEAR:0,NEAREST:1};f.exports=x}),44538:(f=>{f.exports="addtexture"}),63486:(f=>{f.exports="addtexture-"}),94851:(f=>{f.exports="onerror"}),29099:(f=>{f.exports="onload"}),8678:(f=>{f.exports="ready"}),86415:(f=>{f.exports="removetexture"}),30879:(f=>{f.exports="removetexture-"}),69442:((f,x,e)=>{f.exports={ADD:e(44538),ADD_KEY:e(63486),ERROR:e(94851),LOAD:e(29099),READY:e(8678),REMOVE:e(86415),REMOVE_KEY:e(30879)}}),27458:((f,x,e)=>{var o=e(79291),m=e(19673),n={CanvasTexture:e(57382),DynamicTexture:e(81320),Events:e(69442),FilterMode:m,Frame:e(4327),Parsers:e(61309),Texture:e(79237),TextureManager:e(17130),TextureSource:e(11876)};n=o(!1,n,m),f.exports=n}),89905:(f=>{var x=function(e,o,m){if(!m.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var n=e.source[o];e.add("__BASE",o,0,0,n.width,n.height);for(var r=m.getElementsByTagName("SubTexture"),a,t=0;t<r.length;t++){var s=r[t].attributes,l=s.name.value,i=parseInt(s.x.value,10),h=parseInt(s.y.value,10),d=parseInt(s.width.value,10),c=parseInt(s.height.value,10);if(a=e.add(l,o,i,h,d,c),s.frameX){var u=Math.abs(parseInt(s.frameX.value,10)),p=Math.abs(parseInt(s.frameY.value,10)),g=parseInt(s.frameWidth.value,10),y=parseInt(s.frameHeight.value,10);a.setTrim(d,c,u,p,g,y)}}return e};f.exports=x}),72893:(f=>{var x=function(e,o){var m=e.source[o];return e.add("__BASE",o,0,0,m.width,m.height),e};f.exports=x}),4832:(f=>{var x=function(e,o){var m=e.source[o];return e.add("__BASE",o,0,0,m.width,m.height),e};f.exports=x}),78566:((f,x,e)=>{var o=e(41786),m=function(n,r,a){if(!a.frames&&!a.textures){console.warn("Invalid Texture Atlas JSON Array");return}var t=n.source[r];n.add("__BASE",r,0,0,t.width,t.height);for(var s=Array.isArray(a.textures)?a.textures[r].frames:a.frames,l,i=0;i<s.length;i++){var h=s[i];if(l=n.add(h.filename,r,h.frame.x,h.frame.y,h.frame.w,h.frame.h),!l){console.warn("Invalid atlas json, frame already exists: "+h.filename);continue}h.trimmed&&l.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(l.rotated=!0,l.updateUVsInverted());var d=h.anchor||h.pivot;d&&(l.customPivot=!0,l.pivotX=d.x,l.pivotY=d.y),h.scale9Borders&&l.setScale9(h.scale9Borders.x,h.scale9Borders.y,h.scale9Borders.w,h.scale9Borders.h),l.customData=o(h)}for(var c in a)c!=="frames"&&(Array.isArray(a[c])?n.customData[c]=a[c].slice(0):n.customData[c]=a[c]);return n};f.exports=m}),39711:((f,x,e)=>{var o=e(41786),m=function(n,r,a){if(!a.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var t=n.source[r];n.add("__BASE",r,0,0,t.width,t.height);var s=a.frames,l;for(var i in s)if(s.hasOwnProperty(i)){var h=s[i];if(l=n.add(i,r,h.frame.x,h.frame.y,h.frame.w,h.frame.h),!l){console.warn("Invalid atlas json, frame already exists: "+i);continue}h.trimmed&&l.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(l.rotated=!0,l.updateUVsInverted());var d=h.anchor||h.pivot;d&&(l.customPivot=!0,l.pivotX=d.x,l.pivotY=d.y),h.scale9Borders&&l.setScale9(h.scale9Borders.x,h.scale9Borders.y,h.scale9Borders.w,h.scale9Borders.h),l.customData=o(h)}for(var c in a)c!=="frames"&&(Array.isArray(a[c])?n.customData[c]=a[c].slice(0):n.customData[c]=a[c]);return n};f.exports=m}),31403:(f=>{var x=function(e){var o=[171,75,84,88,32,49,49,187,13,10,26,10],m,n=new Uint8Array(e,0,12);for(m=0;m<n.length;m++)if(n[m]!==o[m]){console.warn("KTXParser - Invalid file format");return}var r=Uint32Array.BYTES_PER_ELEMENT,a=new DataView(e,12,13*r),t=a.getUint32(0,!0)===67305985,s=a.getUint32(1*r,t);if(s!==0){console.warn("KTXParser - Only compressed formats supported");return}var l=a.getUint32(4*r,t),i=a.getUint32(6*r,t),h=a.getUint32(7*r,t),d=Math.max(1,a.getUint32(11*r,t)),c=a.getUint32(12*r,t),u=new Array(d),p=64+c,g=i,y=h;for(m=0;m<d;m++){var v=new Int32Array(e,p,1)[0];p+=4,u[m]={data:new Uint8Array(e,p,v),width:g,height:y},g=Math.max(1,g>>1),y=Math.max(1,y>>1),p+=v}return{mipmaps:u,width:i,height:h,internalFormat:l,compressed:!0,generateMipmap:!1}};f.exports=x}),82038:(f=>{function x(T,C,M,E,P,A,D){return D===void 0&&(D=16),Math.floor((T+M)/P)*Math.floor((C+E)/A)*D}function e(T,C){return T=Math.max(T,16),C=Math.max(C,8),T*C/4}function o(T,C){return T=Math.max(T,8),C=Math.max(C,8),T*C/2}function m(T,C){return Math.ceil(T/4)*Math.ceil(C/4)*16}function n(T,C){return x(T,C,3,3,4,4,8)}function r(T,C){return x(T,C,3,3,4,4)}function a(T,C){return x(T,C,4,3,5,4)}function t(T,C){return x(T,C,4,4,5,5)}function s(T,C){return x(T,C,5,4,6,5)}function l(T,C){return x(T,C,5,5,6,6)}function i(T,C){return x(T,C,7,4,8,5)}function h(T,C){return x(T,C,7,5,8,6)}function d(T,C){return x(T,C,7,7,8,8)}function c(T,C){return x(T,C,9,4,10,5)}function u(T,C){return x(T,C,9,5,10,6)}function p(T,C){return x(T,C,9,7,10,8)}function g(T,C){return x(T,C,9,9,10,10)}function y(T,C){return x(T,C,11,9,12,10)}function v(T,C){return x(T,C,11,11,12,12)}var S={0:{sizeFunc:e,glFormat:[35841]},1:{sizeFunc:e,glFormat:[35843]},2:{sizeFunc:o,glFormat:[35840]},3:{sizeFunc:o,glFormat:[35842]},6:{sizeFunc:n,glFormat:[36196]},7:{sizeFunc:n,glFormat:[33776,35916]},8:{sizeFunc:r,glFormat:[33777,35917]},9:{sizeFunc:r,glFormat:[33778,35918]},11:{sizeFunc:r,glFormat:[33779,35919]},14:{sizeFunc:m,glFormat:[36494,36495]},15:{sizeFunc:m,glFormat:[36492,36493]},22:{sizeFunc:n,glFormat:[37492,37493]},23:{sizeFunc:r,glFormat:[37496,37497]},24:{sizeFunc:n,glFormat:[37494,37495]},25:{sizeFunc:n,glFormat:[37488]},26:{sizeFunc:r,glFormat:[37490]},27:{sizeFunc:r,glFormat:[37808,37840]},28:{sizeFunc:a,glFormat:[37809,37841]},29:{sizeFunc:t,glFormat:[37810,37842]},30:{sizeFunc:s,glFormat:[37811,37843]},31:{sizeFunc:l,glFormat:[37812,37844]},32:{sizeFunc:i,glFormat:[37813,37845]},33:{sizeFunc:h,glFormat:[37814,37846]},34:{sizeFunc:d,glFormat:[37815,37847]},35:{sizeFunc:c,glFormat:[37816,37848]},36:{sizeFunc:u,glFormat:[37817,37849]},37:{sizeFunc:p,glFormat:[37818,37850]},38:{sizeFunc:g,glFormat:[37819,37851]},39:{sizeFunc:y,glFormat:[37820,37852]},40:{sizeFunc:v,glFormat:[37821,37853]}},w=function(T){for(var C=new Uint32Array(T,0,13),M=C[0],E=M===55727696,P=E?C[2]:C[3],A=C[4],D=S[P].glFormat[A],W=S[P].sizeFunc,V=C[11],K=C[7],X=C[6],R=52+C[12],H=new Uint8Array(T,R),L=new Array(V),N=0,z=K,U=X,Y=0;Y<V;Y++){var $=W(z,U);L[Y]={data:new Uint8Array(H.buffer,H.byteOffset+N,$),width:z,height:U},z=Math.max(1,z>>1),U=Math.max(1,U>>1),N+=$}return{mipmaps:L,width:K,height:X,internalFormat:D,compressed:!0,generateMipmap:!1}};f.exports=w}),75549:((f,x,e)=>{var o=e(95540),m=function(n,r,a,t,s,l,i){var h=o(i,"frameWidth",null),d=o(i,"frameHeight",h);if(h===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=n.source[r];n.add("__BASE",r,0,0,c.width,c.height);var u=o(i,"startFrame",0),p=o(i,"endFrame",-1),g=o(i,"margin",0),y=o(i,"spacing",0),v=Math.floor((s-g+y)/(h+y)),S=Math.floor((l-g+y)/(d+y)),w=v*S;w===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(u>w||u<-w)&&(u=0),u<0&&(u=w+u),(p===-1||p>w||p<u)&&(p=w);for(var T=g,C=g,M=0,E=0,P=0,A=0;A<w;A++){M=0,E=0;var D=T+h,W=C+d;D>s&&(M=D-s),W>l&&(E=W-l),A>=u&&A<=p&&(n.add(P,r,a+T,t+C,h-M,d-E),P++),T+=h+y,T+h>s&&(T=g,C+=d+y)}return n};f.exports=m}),47534:((f,x,e)=>{var o=e(95540),m=function(n,r,a){var t=o(a,"frameWidth",null),s=o(a,"frameHeight",t);if(!t)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var l=n.source[0];n.add("__BASE",0,0,0,l.width,l.height),o(a,"startFrame",0),o(a,"endFrame",-1);for(var i=o(a,"margin",0),h=o(a,"spacing",0),d=r.cutX,c=r.cutY,u=r.cutWidth,p=r.cutHeight,g=r.realWidth,y=r.realHeight,v=Math.floor((g-i+h)/(t+h)),S=Math.floor((y-i+h)/(s+h)),w=r.x,T=t-w,C=t-(g-u-w),M=r.y,E=s-M,P=s-(y-p-M),A,D=i,W=i,V=0,K=0,X=0;X<S;X++){for(var R=X===0,H=X===S-1,L=0;L<v;L++){var N=L===0,z=L===v-1;if(A=n.add(V,K,d+D,c+W,t,s),N||R||z||H){var U=N?w:0,Y=R?M:0,$=0,Z=0;N&&($+=t-T),z&&($+=t-C),R&&(Z+=s-E),H&&(Z+=s-P);var Q=t-$,q=s-Z;A.cutWidth=Q,A.cutHeight=q,A.setTrim(t,s,U,Y,Q,q)}D+=h,N?D+=T:z?D+=C:D+=t,V++}D=i,W+=h,R?W+=E:H?W+=P:W+=s}return n};f.exports=m}),86147:(f=>{var x=0,e=function(m,n,r,a){var t=x-a.y-a.height;m.add(r,n,a.x,t,a.width,a.height)},o=function(m,n,r){var a=m.source[n];m.add("__BASE",n,0,0,a.width,a.height),x=a.height;for(var t=r.split(`
`),s=/^[ ]*(- )*(\w+)+[: ]+(.*)/,l="",i="",h={x:0,y:0,width:0,height:0},d=0;d<t.length;d++){var c=t[d].match(s);if(c){var u=c[1]==="- ",p=c[2],g=c[3];if(u&&(i!==l&&(e(m,n,i,h),l=i),h={x:0,y:0,width:0,height:0}),p==="name"){i=g;continue}switch(p){case"x":case"y":case"width":case"height":h[p]=parseInt(g,10);break}}}return i!==l&&e(m,n,i,h),m};f.exports=o}),55222:((f,x,e)=>{var o=e(50030),m=function(l){for(var i=l.mipmaps,h=1;h<i.length;h++){var d=i[h].width,c=i[h].height;if(!o(d,c))return console.warn("Mip level "+h+" is not a power-of-two size: "+d+"x"+c),!1}var u=s[l.internalFormat];return u?u(l):(console.warn("No format checker found for internal format "+l.internalFormat+". Assuming valid."),!0)};function n(l){for(var i=l.mipmaps,h=0;h<i.length;h++){var d=i[h].width,c=i[h].height;if((d<<h)%4!==0||(c<<h)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+h+" is "+d+"x"+c),!1}return!0}function r(){return!0}function a(l){var i=l.mipmaps,h=i[0];return o(h.width,h.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+h.width+"x"+h.height),!1)}function t(l){var i=l.mipmaps,h=i[0];return h.width%4!==0||h.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+h.width+"x"+h.height+" pixels"),!1):!0}var s={37488:r,37489:r,37490:r,37491:r,37492:r,37493:r,37494:r,37495:r,37496:r,37497:r,36196:r,37808:r,37809:r,37810:r,37811:r,37812:r,37813:r,37814:r,37815:r,37816:r,37817:r,37818:r,37819:r,37820:r,37821:r,37840:r,37841:r,37842:r,37843:r,37844:r,37845:r,37846:r,37847:r,37848:r,37849:r,37850:r,37851:r,37852:r,37853:r,36492:n,36493:n,36494:n,36495:n,36283:n,36284:n,36285:n,36286:n,35840:a,35841:a,35842:a,35843:a,33776:n,33777:n,33778:n,33779:n,35916:t,35917:t,35918:t,35919:t};f.exports=m}),61309:((f,x,e)=>{f.exports={AtlasXML:e(89905),Canvas:e(72893),Image:e(4832),JSONArray:e(78566),JSONHash:e(39711),KTXParser:e(31403),PVRParser:e(82038),SpriteSheet:e(75549),SpriteSheetFromAtlas:e(47534),UnityYAML:e(86147)}}),80341:(f=>{f.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),16536:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r,a,t,s,l,i,h){(t===void 0||t<=0)&&(t=32),(s===void 0||s<=0)&&(s=32),l===void 0&&(l=0),i===void 0&&(i=0),this.name=r,this.firstgid=a|0,this.imageWidth=t|0,this.imageHeight=s|0,this.imageMargin=l|0,this.imageSpacing=i|0,this.properties=h||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,r,a,t){return this.images.push({gid:n,image:r,width:a,height:t}),this.total++,this}});f.exports=m}),27462:((f,x,e)=>{var o=e(83419),m=new o({initialize:function(r){if(this.gids=[],r!==void 0)for(var a=0;a<r.length;++a)for(var t=r[a],s=0;s<t.total;++s)this.gids[t.firstgid+s]=t;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(n){this.gids=n?this._gids:void 0}},getTypeIncludingTile:function(n){if(n.type!==void 0&&n.type!=="")return n.type;if(!(!this.gids||n.gid===void 0)){var r=this.gids[n.gid];if(r){var a=r.getTileData(n.gid);if(a)return a.type}}},setTextureAndFrame:function(n,r,a,t){if(r===null&&this.gids&&t.gid!==void 0){var s=this.gids[t.gid];s&&(r===null&&s.image!==void 0&&(r=s.image.key),a===null&&(a=t.gid-s.firstgid),n.scene.textures.getFrame(r,a)||(r=null,a=null))}n.setTexture(r,a)},setPropertiesFromTiledObject:function(n,r){if(this.gids!==void 0&&r.gid!==void 0){var a=this.gids[r.gid];a!==void 0&&this.setFromJSON(n,a.getTileProperties(r.gid))}this.setFromJSON(n,r.properties)},setFromJSON:function(n,r){if(r){if(Array.isArray(r)){for(var a=0;a<r.length;a++){var t=r[a];n[t.name]!==void 0?n[t.name]=t.value:n.setData(t.name,t.value)}return}for(var s in r)n[s]!==void 0?n[s]=r[s]:n.setData(s,r[s])}}});f.exports=m}),31989:((f,x,e)=>{var o=e(80341),m=e(87010),n=e(46177),r=e(49075),a=function(t,s,l,i,h,d,c,u){l===void 0&&(l=32),i===void 0&&(i=32),h===void 0&&(h=10),d===void 0&&(d=10),u===void 0&&(u=!1);var p=null;if(Array.isArray(c)){var g=s!==void 0?s:"map";p=n(g,o.ARRAY_2D,c,l,i,u)}else if(s!==void 0){var y=t.cache.tilemap.get(s);y?p=n(s,y.format,y.data,l,i,u):console.warn("No map data found for key "+s)}return p===null&&(p=new m({tileWidth:l,tileHeight:i,width:h,height:d})),new r(t,p)};f.exports=a}),23029:((f,x,e)=>{var o=e(83419),m=e(31401),n=e(91907),r=e(62644),a=e(93232),t=new o({Mixins:[m.AlphaSingle,m.Flip,m.Visible],initialize:function(l,i,h,d,c,u,p,g){this.layer=l,this.index=i,this.x=h,this.y=d,this.width=c,this.height=u,this.right,this.bottom,this.baseWidth=p!==void 0?p:c,this.baseHeight=g!==void 0?g:u,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(s,l){return!(s<this.pixelX||l<this.pixelY||s>this.right||l>this.bottom)},copy:function(s){return this.index=s.index,this.alpha=s.alpha,this.properties=r(s.properties),this.visible=s.visible,this.setFlip(s.flipX,s.flipY),this.tint=s.tint,this.rotation=s.rotation,this.collideUp=s.collideUp,this.collideDown=s.collideDown,this.collideLeft=s.collideLeft,this.collideRight=s.collideRight,this.collisionCallback=s.collisionCallback,this.collisionCallbackContext=s.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(s){var l=this.tilemapLayer;if(l){var i=l.tileToWorldXY(this.x,this.y,void 0,s);return i.x}return this.x*this.baseWidth},getRight:function(s){var l=this.tilemapLayer;return l?this.getLeft(s)+this.width*l.scaleX:this.getLeft(s)+this.width},getTop:function(s){var l=this.tilemapLayer;if(l){var i=l.tileToWorldXY(this.x,this.y,void 0,s);return i.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(s){var l=this.tilemapLayer;return l?this.getTop(s)+this.height*l.scaleY:this.getTop(s)+this.height},getBounds:function(s,l){return l===void 0&&(l=new a),l.x=this.getLeft(s),l.y=this.getTop(s),l.width=this.getRight(s)-l.x,l.height=this.getBottom(s)-l.y,l},getCenterX:function(s){return(this.getLeft(s)+this.getRight(s))/2},getCenterY:function(s){return(this.getTop(s)+this.getBottom(s))/2},intersects:function(s,l,i,h){return!(i<=this.pixelX||h<=this.pixelY||s>=this.right||l>=this.bottom)},isInteresting:function(s,l){return s&&l?this.canCollide||this.hasInterestingFace:s?this.collides:l?this.hasInterestingFace:!1},resetCollision:function(s){if(s===void 0&&(s=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,s){var l=this.tilemapLayer;l&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(s,l,i,h,d){if(l===void 0&&(l=s),i===void 0&&(i=s),h===void 0&&(h=s),d===void 0&&(d=!0),this.collideLeft=s,this.collideRight=l,this.collideUp=i,this.collideDown=h,this.faceLeft=s,this.faceRight=l,this.faceTop=i,this.faceBottom=h,d){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(s,l){return s===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=s,this.collisionCallbackContext=l),this},setSize:function(s,l,i,h){return s!==void 0&&(this.width=s),l!==void 0&&(this.height=l),i!==void 0&&(this.baseWidth=i),h!==void 0&&(this.baseHeight=h),this.updatePixelXY(),this},updatePixelXY:function(){var s=this.layer.orientation;if(s===n.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(s===n.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(s===n.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(s===n.HEXAGONAL){var l=this.layer.staggerAxis,i=this.layer.staggerIndex,h=this.layer.hexSideLength,d,c;l==="y"?(c=(this.baseHeight-h)/2+h,i==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*c):l==="x"&&(d=(this.baseWidth-h)/2+h,this.pixelX=this.x*d,i==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var s=this.layer.tilemapLayer;if(s){var l=s.gidMap[this.index];if(l)return l}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var s=this.tilemapLayer;return s?s.tilemap:null}}});f.exports=t}),49075:((f,x,e)=>{var o=e(84101),m=e(83419),n=e(39506),r=e(80341),a=e(95540),t=e(14977),s=e(27462),l=e(91907),i=e(36305),h=e(19133),d=e(68287),c=e(23029),u=e(81086),p=e(20442),g=e(33629),y=new m({initialize:function(S,w){this.scene=S,this.tileWidth=w.tileWidth,this.tileHeight=w.tileHeight,this.width=w.width,this.height=w.height,this.orientation=w.orientation,this.renderOrder=w.renderOrder,this.format=w.format,this.version=w.version,this.properties=w.properties,this.widthInPixels=w.widthInPixels,this.heightInPixels=w.heightInPixels,this.imageCollections=w.imageCollections,this.images=w.images,this.layers=w.layers,this.tiles=w.tiles,this.tilesets=w.tilesets,this.objects=w.objects,this.currentLayerIndex=0,this.hexSideLength=w.hexSideLength;var T=this.orientation;this._convert={WorldToTileXY:u.GetWorldToTileXYFunction(T),WorldToTileX:u.GetWorldToTileXFunction(T),WorldToTileY:u.GetWorldToTileYFunction(T),TileToWorldXY:u.GetTileToWorldXYFunction(T),TileToWorldX:u.GetTileToWorldXFunction(T),TileToWorldY:u.GetTileToWorldYFunction(T),GetTileCorners:u.GetTileCornersFunction(T)}},setRenderOrder:function(v){var S=["right-down","left-down","right-up","left-up"];return typeof v=="number"&&(v=S[v]),S.indexOf(v)>-1&&(this.renderOrder=v),this},addTilesetImage:function(v,S,w,T,C,M,E,P){if(v===void 0)return null;S==null&&(S=v);var A=this.scene.sys.textures;if(!A.exists(S))return console.warn('Texture key "%s" not found',S),null;var D=A.get(S),W=this.getTilesetIndex(v);if(W===null&&this.format===r.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',v,this.tilesets),null;var V=this.tilesets[W];return V?((w||T)&&V.setTileSize(w,T),(C||M)&&V.setSpacing(C,M),V.setImage(D),V):(w===void 0&&(w=this.tileWidth),T===void 0&&(T=this.tileHeight),C===void 0&&(C=0),M===void 0&&(M=0),E===void 0&&(E=0),P===void 0&&(P={x:0,y:0}),V=new g(v,E,w,T,C,M,void 0,void 0,P),V.setImage(D),this.tilesets.push(V),this.tiles=o(this),V)},copy:function(v,S,w,T,C,M,E,P){return P=this.getLayer(P),P!==null?(u.Copy(v,S,w,T,C,M,E,P),this):null},createBlankLayer:function(v,S,w,T,C,M,E,P){w===void 0&&(w=0),T===void 0&&(T=0),C===void 0&&(C=this.width),M===void 0&&(M=this.height),E===void 0&&(E=this.tileWidth),P===void 0&&(P=this.tileHeight);var A=this.getLayerIndex(v);if(A!==null)return console.warn("Invalid Tilemap Layer ID: "+v),null;for(var D=new t({name:v,tileWidth:E,tileHeight:P,width:C,height:M,orientation:this.orientation,hexSideLength:this.hexSideLength}),W,V=0;V<M;V++){W=[];for(var K=0;K<C;K++)W.push(new c(D,-1,K,V,E,P,this.tileWidth,this.tileHeight));D.data.push(W)}this.layers.push(D),this.currentLayerIndex=this.layers.length-1;var X=new p(this.scene,this,this.currentLayerIndex,S,w,T);return X.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(X),X},createLayer:function(v,S,w,T){var C=this.getLayerIndex(v);if(C===null)return console.warn("Invalid Tilemap Layer ID: "+v),typeof v=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var M=this.layers[C];if(M.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+v),null;this.currentLayerIndex=C,w===void 0&&(w=M.x),T===void 0&&(T=M.y);var E=new p(this.scene,this,C,S,w,T);return E.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(E),E},createFromObjects:function(v,S,w){w===void 0&&(w=!0);var T=[],C=this.getObjectLayer(v);if(!C)return console.warn("createFromObjects: Invalid objectLayerName given: "+v),T;var M=new s(w?this.tilesets:void 0);Array.isArray(S)||(S=[S]);for(var E=C.objects,P=0;P<S.length;P++){var A=S[P],D=a(A,"id",null),W=a(A,"gid",null),V=a(A,"name",null),K=a(A,"type",null);M.enabled=!a(A,"ignoreTileset",null);for(var X,R=[],H=0;H<E.length;H++)X=E[H],(D===null&&W===null&&V===null&&K===null||D!==null&&X.id===D||W!==null&&X.gid===W||V!==null&&X.name===V||K!==null&&M.getTypeIncludingTile(X)===K)&&R.push(X);for(var L=a(A,"classType",d),N=a(A,"scene",this.scene),z=a(A,"container",null),U=a(A,"key",null),Y=a(A,"frame",null),$=0;$<R.length;$++){X=R[$];var Z=new L(N);if(Z.setName(X.name),Z.setPosition(X.x,X.y),M.setTextureAndFrame(Z,U,Y,X),X.width&&(Z.displayWidth=X.width),X.height&&(Z.displayHeight=X.height),this.orientation===l.ISOMETRIC){var Q=this.tileWidth/this.tileHeight,q={x:Z.x-Z.y,y:(Z.x+Z.y)/Q};Z.x=q.x,Z.y=q.y}var j={x:Z.originX*X.width,y:(Z.originY-(X.gid?1:0))*X.height};if(X.rotation){var _=n(X.rotation);i(j,_),Z.rotation=_}Z.x+=j.x,Z.y+=j.y,(X.flippedHorizontal!==void 0||X.flippedVertical!==void 0)&&Z.setFlip(X.flippedHorizontal,X.flippedVertical),X.visible||(Z.visible=!1),M.setPropertiesFromTiledObject(Z,X),z?z.add(Z):N.add.existing(Z),T.push(Z)}}return T},createFromTiles:function(v,S,w,T,C,M){return M=this.getLayer(M),M===null?null:u.CreateFromTiles(v,S,w,T,C,M)},fill:function(v,S,w,T,C,M,E){return M===void 0&&(M=!0),E=this.getLayer(E),E===null?null:(u.Fill(v,S,w,T,C,M,E),this)},filterObjects:function(v,S,w){if(typeof v=="string"){var T=v;if(v=this.getObjectLayer(v),!v)return console.warn("No object layer found with the name: "+T),null}return v.objects.filter(S,w)},filterTiles:function(v,S,w,T,C,M,E,P){return P=this.getLayer(P),P===null?null:u.FilterTiles(v,S,w,T,C,M,E,P)},findByIndex:function(v,S,w,T){return T=this.getLayer(T),T===null?null:u.FindByIndex(v,S,w,T)},findObject:function(v,S,w){if(typeof v=="string"){var T=v;if(v=this.getObjectLayer(v),!v)return console.warn("No object layer found with the name: "+T),null}return v.objects.find(S,w)||null},findTile:function(v,S,w,T,C,M,E,P){return P=this.getLayer(P),P===null?null:u.FindTile(v,S,w,T,C,M,E,P)},forEachTile:function(v,S,w,T,C,M,E,P){return P=this.getLayer(P),P===null?null:(u.ForEachTile(v,S,w,T,C,M,E,P),this)},getImageIndex:function(v){return this.getIndex(this.images,v)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(v){return v.name})},getIndex:function(v,S){for(var w=0;w<v.length;w++)if(v[w].name===S)return w;return null},getLayer:function(v){var S=this.getLayerIndex(v);return S!==null?this.layers[S]:null},getObjectLayer:function(v){var S=this.getIndex(this.objects,v);return S!==null?this.objects[S]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(v){return v.name})},getLayerIndex:function(v){return v===void 0?this.currentLayerIndex:typeof v=="string"?this.getLayerIndexByName(v):typeof v=="number"&&v<this.layers.length?v:v instanceof p&&v.tilemap===this?v.layerIndex:null},getLayerIndexByName:function(v){return this.getIndex(this.layers,v)},getTileAt:function(v,S,w,T){return T=this.getLayer(T),T===null?null:u.GetTileAt(v,S,w,T)},getTileAtWorldXY:function(v,S,w,T,C){return C=this.getLayer(C),C===null?null:u.GetTileAtWorldXY(v,S,w,T,C)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(v){return v.name})},getTilesWithin:function(v,S,w,T,C,M){return M=this.getLayer(M),M===null?null:u.GetTilesWithin(v,S,w,T,C,M)},getTilesWithinShape:function(v,S,w,T){return T=this.getLayer(T),T===null?null:u.GetTilesWithinShape(v,S,w,T)},getTilesWithinWorldXY:function(v,S,w,T,C,M,E){return E=this.getLayer(E),E===null?null:u.GetTilesWithinWorldXY(v,S,w,T,C,M,E)},getTileset:function(v){var S=this.getIndex(this.tilesets,v);return S!==null?this.tilesets[S]:null},getTilesetIndex:function(v){return this.getIndex(this.tilesets,v)},hasTileAt:function(v,S,w){return w=this.getLayer(w),w===null?null:u.HasTileAt(v,S,w)},hasTileAtWorldXY:function(v,S,w,T){return T=this.getLayer(T),T===null?null:u.HasTileAtWorldXY(v,S,w,T)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(v){this.setLayer(v)}},putTileAt:function(v,S,w,T,C){return T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:u.PutTileAt(v,S,w,T,C)},putTileAtWorldXY:function(v,S,w,T,C,M){return T===void 0&&(T=!0),M=this.getLayer(M),M===null?null:u.PutTileAtWorldXY(v,S,w,T,C,M)},putTilesAt:function(v,S,w,T,C){return T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(u.PutTilesAt(v,S,w,T,C),this)},randomize:function(v,S,w,T,C,M){return M=this.getLayer(M),M===null?null:(u.Randomize(v,S,w,T,C,M),this)},calculateFacesAt:function(v,S,w){return w=this.getLayer(w),w===null?null:(u.CalculateFacesAt(v,S,w),this)},calculateFacesWithin:function(v,S,w,T,C){return C=this.getLayer(C),C===null?null:(u.CalculateFacesWithin(v,S,w,T,C),this)},removeLayer:function(v){var S=this.getLayerIndex(v);if(S!==null){h(this.layers,S);for(var w=S;w<this.layers.length;w++)this.layers[w].tilemapLayer&&this.layers[w].tilemapLayer.layerIndex--;return this.currentLayerIndex===S&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(v){var S=this.getLayerIndex(v);return S!==null?(v=this.layers[S],v.tilemapLayer.destroy(),h(this.layers,S),this.currentLayerIndex===S&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var v=this.layers,S=0;S<v.length;S++)v[S].tilemapLayer&&v[S].tilemapLayer.destroy(!1);return v.length=0,this.currentLayerIndex=0,this},removeTile:function(v,S,w){S===void 0&&(S=-1),w===void 0&&(w=!0);var T=[];Array.isArray(v)||(v=[v]);for(var C=0;C<v.length;C++){var M=v[C];T.push(this.removeTileAt(M.x,M.y,!0,w,M.tilemapLayer)),S>-1&&this.putTileAt(S,M.x,M.y,w,M.tilemapLayer)}return T},removeTileAt:function(v,S,w,T,C){return w===void 0&&(w=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:u.RemoveTileAt(v,S,w,T,C)},removeTileAtWorldXY:function(v,S,w,T,C,M){return w===void 0&&(w=!0),T===void 0&&(T=!0),M=this.getLayer(M),M===null?null:u.RemoveTileAtWorldXY(v,S,w,T,C,M)},renderDebug:function(v,S,w){return w=this.getLayer(w),w===null?null:(this.orientation===l.ORTHOGONAL&&u.RenderDebug(v,S,w),this)},renderDebugFull:function(v,S){for(var w=this.layers,T=0;T<w.length;T++)u.RenderDebug(v,S,w[T]);return this},replaceByIndex:function(v,S,w,T,C,M,E){return E=this.getLayer(E),E===null?null:(u.ReplaceByIndex(v,S,w,T,C,M,E),this)},setCollision:function(v,S,w,T,C){return S===void 0&&(S=!0),w===void 0&&(w=!0),C===void 0&&(C=!0),T=this.getLayer(T),T===null?null:(u.SetCollision(v,S,w,T,C),this)},setCollisionBetween:function(v,S,w,T,C){return w===void 0&&(w=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(u.SetCollisionBetween(v,S,w,T,C),this)},setCollisionByProperty:function(v,S,w,T){return S===void 0&&(S=!0),w===void 0&&(w=!0),T=this.getLayer(T),T===null?null:(u.SetCollisionByProperty(v,S,w,T),this)},setCollisionByExclusion:function(v,S,w,T){return S===void 0&&(S=!0),w===void 0&&(w=!0),T=this.getLayer(T),T===null?null:(u.SetCollisionByExclusion(v,S,w,T),this)},setCollisionFromCollisionGroup:function(v,S,w){return v===void 0&&(v=!0),S===void 0&&(S=!0),w=this.getLayer(w),w===null?null:(u.SetCollisionFromCollisionGroup(v,S,w),this)},setTileIndexCallback:function(v,S,w,T){return T=this.getLayer(T),T===null?null:(u.SetTileIndexCallback(v,S,w,T),this)},setTileLocationCallback:function(v,S,w,T,C,M,E){return E=this.getLayer(E),E===null?null:(u.SetTileLocationCallback(v,S,w,T,C,M,E),this)},setLayer:function(v){var S=this.getLayerIndex(v);return S!==null&&(this.currentLayerIndex=S),this},setBaseTileSize:function(v,S){this.tileWidth=v,this.tileHeight=S,this.widthInPixels=this.width*v,this.heightInPixels=this.height*S;for(var w=0;w<this.layers.length;w++){this.layers[w].baseTileWidth=v,this.layers[w].baseTileHeight=S;for(var T=this.layers[w].data,C=this.layers[w].width,M=this.layers[w].height,E=0;E<M;E++)for(var P=0;P<C;P++){var A=T[E][P];A!==null&&A.setSize(void 0,void 0,v,S)}}return this},setLayerTileSize:function(v,S,w){if(w=this.getLayer(w),w===null)return this;w.tileWidth=v,w.tileHeight=S;for(var T=w.data,C=w.width,M=w.height,E=0;E<M;E++)for(var P=0;P<C;P++){var A=T[E][P];A!==null&&A.setSize(v,S)}return this},shuffle:function(v,S,w,T,C){return C=this.getLayer(C),C===null?null:(u.Shuffle(v,S,w,T,C),this)},swapByIndex:function(v,S,w,T,C,M,E){return E=this.getLayer(E),E===null?null:(u.SwapByIndex(v,S,w,T,C,M,E),this)},tileToWorldX:function(v,S,w){return w=this.getLayer(w),w===null?null:this._convert.TileToWorldX(v,S,w)},tileToWorldY:function(v,S,w){return w=this.getLayer(w),w===null?null:this._convert.TileToWorldY(v,S,w)},tileToWorldXY:function(v,S,w,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldXY(v,S,w,T,C)},getTileCorners:function(v,S,w,T){return T=this.getLayer(T),T===null?null:this._convert.GetTileCorners(v,S,w,T)},weightedRandomize:function(v,S,w,T,C,M){return M=this.getLayer(M),M===null?null:(u.WeightedRandomize(S,w,T,C,v,M),this)},worldToTileX:function(v,S,w,T){return T=this.getLayer(T),T===null?null:this._convert.WorldToTileX(v,S,w,T)},worldToTileY:function(v,S,w,T){return T=this.getLayer(T),T===null?null:this._convert.WorldToTileY(v,S,w,T)},worldToTileXY:function(v,S,w,T,C,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileXY(v,S,w,T,C,M)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});f.exports=y}),45939:((f,x,e)=>{var o=e(44603),m=e(31989);o.register("tilemap",function(n){var r=n!==void 0?n:{};return m(this.scene,r.key,r.tileWidth,r.tileHeight,r.width,r.height,r.data,r.insertNull)})}),46029:((f,x,e)=>{var o=e(39429),m=e(31989);o.register("tilemap",function(n,r,a,t,s,l,i){return n===null&&(n=void 0),r===null&&(r=void 0),a===null&&(a=void 0),t===null&&(t=void 0),s===null&&(s=void 0),m(this.scene,n,r,a,t,s,l,i)})}),20442:((f,x,e)=>{var o=e(83419),m=e(78389),n=e(31401),r=e(95643),a=e(81086),t=e(19218),s=e(26099),l=new o({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.Transform,n.Visible,n.ScrollFactor,m,t],initialize:function(h,d,c,u,p,g){r.call(this,h,"TilemapLayer"),this.isTilemap=!0,this.tilemap=d,this.layerIndex=c,this.layer=d.layers[c],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new s,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(u),this.setAlpha(this.layer.alpha),this.setPosition(p,g),this.setOrigin(0,0),this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(i){var h=[],d=[],c=this.tilemap;Array.isArray(i)||(i=[i]);for(var u=0;u<i.length;u++){var p=i[u];if(typeof p=="string"&&(p=c.getTileset(p)),p){d.push(p);for(var g=p.firstgid,y=0;y<p.total;y++)h[g+y]=p}}this.gidMap=h,this.tileset=d},setRenderOrder:function(i){var h=["right-down","left-down","right-up","left-up"];return typeof i=="string"&&(i=h.indexOf(i)),i>=0&&i<4&&(this._renderOrder=i),this},calculateFacesAt:function(i,h){return a.CalculateFacesAt(i,h,this.layer),this},calculateFacesWithin:function(i,h,d,c){return a.CalculateFacesWithin(i,h,d,c,this.layer),this},createFromTiles:function(i,h,d,c,u){return a.CreateFromTiles(i,h,d,c,u,this.layer)},cull:function(i){return this.cullCallback(this.layer,i,this.culledTiles,this._renderOrder)},copy:function(i,h,d,c,u,p,g){return a.Copy(i,h,d,c,u,p,g,this.layer),this},fill:function(i,h,d,c,u,p){return a.Fill(i,h,d,c,u,p,this.layer),this},filterTiles:function(i,h,d,c,u,p,g){return a.FilterTiles(i,h,d,c,u,p,g,this.layer)},findByIndex:function(i,h,d){return a.FindByIndex(i,h,d,this.layer)},findTile:function(i,h,d,c,u,p,g){return a.FindTile(i,h,d,c,u,p,g,this.layer)},forEachTile:function(i,h,d,c,u,p,g){return a.ForEachTile(i,h,d,c,u,p,g,this.layer),this},setTint:function(i,h,d,c,u,p){i===void 0&&(i=16777215);var g=function(y){y.tint=i,y.tintFill=!1};return this.forEachTile(g,this,h,d,c,u,p)},setTintFill:function(i,h,d,c,u,p){i===void 0&&(i=16777215);var g=function(y){y.tint=i,y.tintFill=!0};return this.forEachTile(g,this,h,d,c,u,p)},getTileAt:function(i,h,d){return a.GetTileAt(i,h,d,this.layer)},getTileAtWorldXY:function(i,h,d,c){return a.GetTileAtWorldXY(i,h,d,c,this.layer)},getIsoTileAtWorldXY:function(i,h,d,c,u){d===void 0&&(d=!0);var p=this.tempVec;return a.IsometricWorldToTileXY(i,h,!0,p,u,this.layer,d),this.getTileAt(p.x,p.y,c)},getTilesWithin:function(i,h,d,c,u){return a.GetTilesWithin(i,h,d,c,u,this.layer)},getTilesWithinShape:function(i,h,d){return a.GetTilesWithinShape(i,h,d,this.layer)},getTilesWithinWorldXY:function(i,h,d,c,u,p){return a.GetTilesWithinWorldXY(i,h,d,c,u,p,this.layer)},hasTileAt:function(i,h){return a.HasTileAt(i,h,this.layer)},hasTileAtWorldXY:function(i,h,d){return a.HasTileAtWorldXY(i,h,d,this.layer)},putTileAt:function(i,h,d,c){return a.PutTileAt(i,h,d,c,this.layer)},putTileAtWorldXY:function(i,h,d,c,u){return a.PutTileAtWorldXY(i,h,d,c,u,this.layer)},putTilesAt:function(i,h,d,c){return a.PutTilesAt(i,h,d,c,this.layer),this},randomize:function(i,h,d,c,u){return a.Randomize(i,h,d,c,u,this.layer),this},removeTileAt:function(i,h,d,c){return a.RemoveTileAt(i,h,d,c,this.layer)},removeTileAtWorldXY:function(i,h,d,c,u){return a.RemoveTileAtWorldXY(i,h,d,c,u,this.layer)},renderDebug:function(i,h){return a.RenderDebug(i,h,this.layer),this},replaceByIndex:function(i,h,d,c,u,p){return a.ReplaceByIndex(i,h,d,c,u,p,this.layer),this},setSkipCull:function(i){return i===void 0&&(i=!0),this.skipCull=i,this},setCullPadding:function(i,h){return i===void 0&&(i=1),h===void 0&&(h=1),this.cullPaddingX=i,this.cullPaddingY=h,this},setCollision:function(i,h,d,c){return a.SetCollision(i,h,d,this.layer,c),this},setCollisionBetween:function(i,h,d,c){return a.SetCollisionBetween(i,h,d,c,this.layer),this},setCollisionByProperty:function(i,h,d){return a.SetCollisionByProperty(i,h,d,this.layer),this},setCollisionByExclusion:function(i,h,d){return a.SetCollisionByExclusion(i,h,d,this.layer),this},setCollisionFromCollisionGroup:function(i,h){return a.SetCollisionFromCollisionGroup(i,h,this.layer),this},setTileIndexCallback:function(i,h,d){return a.SetTileIndexCallback(i,h,d,this.layer),this},setTileLocationCallback:function(i,h,d,c,u,p){return a.SetTileLocationCallback(i,h,d,c,u,p,this.layer),this},shuffle:function(i,h,d,c){return a.Shuffle(i,h,d,c,this.layer),this},swapByIndex:function(i,h,d,c,u,p){return a.SwapByIndex(i,h,d,c,u,p,this.layer),this},tileToWorldX:function(i,h){return this.tilemap.tileToWorldX(i,h,this)},tileToWorldY:function(i,h){return this.tilemap.tileToWorldY(i,h,this)},tileToWorldXY:function(i,h,d,c){return this.tilemap.tileToWorldXY(i,h,d,c,this)},getTileCorners:function(i,h,d){return this.tilemap.getTileCorners(i,h,d,this)},weightedRandomize:function(i,h,d,c,u){return a.WeightedRandomize(h,d,c,u,i,this.layer),this},worldToTileX:function(i,h,d){return this.tilemap.worldToTileX(i,h,d,this)},worldToTileY:function(i,h,d){return this.tilemap.worldToTileY(i,h,d,this)},worldToTileXY:function(i,h,d,c,u){return this.tilemap.worldToTileXY(i,h,d,c,u,this)},destroy:function(i){i===void 0&&(i=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),i&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});f.exports=l}),16153:((f,x,e)=>{var o=e(61340),m=new o,n=new o,r=new o,a=function(t,s,l,i){var h=s.cull(l),d=h.length,c=l.alpha*s.alpha;if(!(d===0||c<=0)){var u=m,p=n,g=r;p.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),u.copyFrom(l.matrix);var y=t.currentContext,v=s.gidMap;y.save(),i?(u.multiplyWithOffset(i,-l.scrollX*s.scrollFactorX,-l.scrollY*s.scrollFactorY),p.e=s.x,p.f=s.y,u.multiply(p,g),g.copyToContext(y)):(p.e-=l.scrollX*s.scrollFactorX,p.f-=l.scrollY*s.scrollFactorY,p.copyToContext(y)),(!t.antialias||s.scaleX>1||s.scaleY>1)&&(y.imageSmoothingEnabled=!1);for(var S=0;S<d;S++){var w=h[S],T=v[w.index];if(T){var C=T.image.getSourceImage(),M=T.getTileTextureCoordinates(w.index),E=T.tileWidth,P=T.tileHeight;if(!(M===null||E===0||P===0)){var A=E*.5,D=P*.5;M.x+=T.tileOffset.x,M.y+=T.tileOffset.y,y.save(),y.translate(w.pixelX+A,w.pixelY+D),w.rotation!==0&&y.rotate(w.rotation),(w.flipX||w.flipY)&&y.scale(w.flipX?-1:1,w.flipY?-1:1),y.globalAlpha=c*w.alpha,y.drawImage(C,M.x,M.y,E,P,-A,-D,E,P),y.restore()}}}y.restore()}};f.exports=a}),19218:((f,x,e)=>{var o=e(29747),m=o,n=o;m=e(99558),n=e(16153),f.exports={renderWebGL:m,renderCanvas:n}}),99558:((f,x,e)=>{var o=e(70554),m=function(n,r,a){var t=r.cull(a),s=t.length,l=a.alpha*r.alpha;if(!(s===0||l<=0)){var i=r.gidMap,h=n.pipelines.set(r.pipeline,r),d=o.getTintAppendFloatAlpha,c=r.scrollFactorX,u=r.scrollFactorY,p=r.x,g=r.y,y=r.scaleX,v=r.scaleY;n.pipelines.preBatch(r);for(var S=0;S<s;S++){var w=t[S],T=i[w.index];if(T){var C=T.getTileTextureCoordinates(w.index),M=T.tileWidth,E=T.tileHeight;if(!(!C||M===0||E===0)){var P=M*.5,A=E*.5,D=T.glTexture,W=h.setTexture2D(D,r),V=M,K=E,X=C.x,R=C.y,H=T.tileOffset.x,L=T.tileOffset.y,N=d(w.tint,l*w.alpha);h.batchTexture(r,D,D.width,D.height,p+w.pixelX*y+(P*y-H),g+w.pixelY*v+(A*v-L),M,E,y,v,w.rotation,w.flipX,w.flipY,c,u,P,A,X,R,V,K,N,N,N,N,w.tintFill,0,0,a,null,!0,W,!0)}}}n.pipelines.postBatch(r)}};f.exports=m}),33629:((f,x,e)=>{var o=e(83419),m=e(26099),n=new o({initialize:function(a,t,s,l,i,h,d,c,u){(s===void 0||s<=0)&&(s=32),(l===void 0||l<=0)&&(l=32),i===void 0&&(i=0),h===void 0&&(h=0),d===void 0&&(d={}),c===void 0&&(c={}),this.name=a,this.firstgid=t,this.tileWidth=s,this.tileHeight=l,this.tileMargin=i,this.tileSpacing=h,this.tileProperties=d,this.tileData=c,this.tileOffset=new m,u!==void 0&&this.tileOffset.set(u.x,u.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var a=this.getTileData(r);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){this.image=r;var a=r.get(),t=r.getFrameBounds();return this.glTexture=a.source.glTexture,a.width>t.width||a.height>t.height?this.updateTileData(a.width,a.height):this.updateTileData(t.width,t.height,t.x,t.y),this},setTileSize:function(r,a){return r!==void 0&&(this.tileWidth=r),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,a){return r!==void 0&&(this.tileMargin=r),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,a,t,s){t===void 0&&(t=0),s===void 0&&(s=0);var l=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(l%1!==0||i%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),l=Math.floor(l),i=Math.floor(i),this.rows=l,this.columns=i,this.total=l*i,this.texCoordinates.length=0;for(var h=this.tileMargin+t,d=this.tileMargin+s,c=0;c<this.rows;c++){for(var u=0;u<this.columns;u++)this.texCoordinates.push({x:h,y:d}),h+=this.tileWidth+this.tileSpacing;h=this.tileMargin+t,d+=this.tileHeight+this.tileSpacing}return this}});f.exports=n}),72023:((f,x,e)=>{var o=e(7423),m=function(n,r,a){var t=o(n,r,!0,a),s=o(n,r-1,!0,a),l=o(n,r+1,!0,a),i=o(n-1,r,!0,a),h=o(n+1,r,!0,a),d=t&&t.collides;return d&&(t.faceTop=!0,t.faceBottom=!0,t.faceLeft=!0,t.faceRight=!0),s&&s.collides&&(d&&(t.faceTop=!1),s.faceBottom=!d),l&&l.collides&&(d&&(t.faceBottom=!1),l.faceTop=!d),i&&i.collides&&(d&&(t.faceLeft=!1),i.faceRight=!d),h&&h.collides&&(d&&(t.faceRight=!1),h.faceLeft=!d),t&&!t.collides&&t.resetFaces(),t};f.exports=m}),42573:((f,x,e)=>{var o=e(7423),m=e(7386),n=function(r,a,t,s,l){for(var i=null,h=null,d=null,c=null,u=m(r,a,t,s,null,l),p=0;p<u.length;p++){var g=u[p];g&&(g.collides?(i=o(g.x,g.y-1,!0,l),h=o(g.x,g.y+1,!0,l),d=o(g.x-1,g.y,!0,l),c=o(g.x+1,g.y,!0,l),g.faceTop=!(i&&i.collides),g.faceBottom=!(h&&h.collides),g.faceLeft=!(d&&d.collides),g.faceRight=!(c&&c.collides)):g.resetFaces())}};f.exports=n}),33528:((f,x,e)=>{var o=e(26099),m=new o,n=function(r,a,t,s){var l=t.tilemapLayer,i=l.cullPaddingX,h=l.cullPaddingY,d=l.tilemap.tileToWorldXY(r,a,m,s,l);return d.x>s.worldView.x+l.scaleX*t.tileWidth*(-i-.5)&&d.x<s.worldView.right+l.scaleX*t.tileWidth*(i-.5)&&d.y>s.worldView.y+l.scaleY*t.tileHeight*(-h-1)&&d.y<s.worldView.bottom+l.scaleY*t.tileHeight*(h-.5)};f.exports=n}),1785:((f,x,e)=>{var o=e(42573),m=e(7386),n=e(62991),r=e(23029),a=function(t,s,l,i,h,d,c,u){c===void 0&&(c=!0);var p=m(t,s,l,i,null,u),g=[];p.forEach(function(M){var E=new r(M.layer,M.index,M.x,M.y,M.width,M.height,M.baseWidth,M.baseHeight);E.copy(M),g.push(E)});for(var y=h-t,v=d-s,S=0;S<g.length;S++){var w=g[S],T=w.x+y,C=w.y+v;n(T,C,u)&&u.data[C][T]&&(w.x=T,w.y=C,w.updatePixelXY(),u.data[C][T]=w)}c&&o(h-1,d-1,l+2,i+2,u),p.length=0,g.length=0};f.exports=a}),78419:((f,x,e)=>{var o=e(62644),m=e(7386),n=e(27987),r=function(a,t,s,l,i,h){s||(s={}),Array.isArray(a)||(a=[a]);var d=h.tilemapLayer;l||(l=d.scene),i||(i=l.cameras.main);var c=h.width,u=h.height,p=m(0,0,c,u,null,h),g=[],y,v=function(C,M,E){for(var P=0;P<E.length;P++){var A=E[P];C.hasOwnProperty(A)||(C[A]=M[A])}};for(y=0;y<p.length;y++){var S=p[y],w=o(s);if(a.indexOf(S.index)!==-1){var T=d.tileToWorldXY(S.x,S.y,void 0,i,h);w.x=T.x,w.y=T.y,v(w,S,["rotation","flipX","flipY","alpha","visible","tint"]),w.hasOwnProperty("origin")||(w.x+=S.width*.5,w.y+=S.height*.5),w.hasOwnProperty("useSpriteSheet")&&(w.key=S.tileset.image,w.frame=S.index-S.tileset.firstgid),g.push(l.make.sprite(w))}}if(Array.isArray(t))for(y=0;y<a.length;y++)n(a[y],t[y],0,0,c,u,h);else if(t!==null)for(y=0;y<a.length;y++)n(a[y],t,0,0,c,u,h);return g};f.exports=r}),19545:((f,x,e)=>{var o=e(87841),m=e(63448),n=e(56583),r=new o,a=function(t,s){var l=t.tilemapLayer.tilemap,i=t.tilemapLayer,h=Math.floor(l.tileWidth*i.scaleX),d=Math.floor(l.tileHeight*i.scaleY),c=n(s.worldView.x-i.x,h,0,!0)-i.cullPaddingX,u=m(s.worldView.right-i.x,h,0,!0)+i.cullPaddingX,p=n(s.worldView.y-i.y,d,0,!0)-i.cullPaddingY,g=m(s.worldView.bottom-i.y,d,0,!0)+i.cullPaddingY;return r.setTo(c,p,u-c,g-p)};f.exports=a}),30003:((f,x,e)=>{var o=e(19545),m=e(32483),n=function(r,a,t,s){t===void 0&&(t=[]),s===void 0&&(s=0),t.length=0;var l=r.tilemapLayer,i=o(r,a);return(l.skipCull||l.scrollFactorX!==1||l.scrollFactorY!==1)&&(i.left=0,i.right=r.width,i.top=0,i.bottom=r.height),m(r,i,s,t),t};f.exports=n}),35137:((f,x,e)=>{var o=e(7386),m=e(42573),n=e(20576),r=function(a,t,s,l,i,h,d){for(var c=d.collideIndexes.indexOf(a)!==-1,u=o(t,s,l,i,null,d),p=0;p<u.length;p++)u[p].index=a,n(u[p],c);h&&m(t-1,s-1,l+2,i+2,d)};f.exports=r}),40253:((f,x,e)=>{var o=e(7386),m=function(n,r,a,t,s,l,i,h){var d=o(a,t,s,l,i,h);return d.filter(n,r)};f.exports=m}),52692:(f=>{var x=function(e,o,m,n){o===void 0&&(o=0),m===void 0&&(m=!1);var r=0,a,t,s;if(m){for(t=n.height-1;t>=0;t--)for(a=n.width-1;a>=0;a--)if(s=n.data[t][a],s&&s.index===e){if(r===o)return s;r+=1}}else for(t=0;t<n.height;t++)for(a=0;a<n.width;a++)if(s=n.data[t][a],s&&s.index===e){if(r===o)return s;r+=1}return null};f.exports=x}),66151:((f,x,e)=>{var o=e(7386),m=function(n,r,a,t,s,l,i,h){var d=o(a,t,s,l,i,h);return d.find(n,r)||null};f.exports=m}),97560:((f,x,e)=>{var o=e(7386),m=function(n,r,a,t,s,l,i,h){var d=o(a,t,s,l,i,h);d.forEach(n,r)};f.exports=m}),43305:((f,x,e)=>{var o=e(91907),m=e(30003),n=e(9474),r=e(14018),a=e(29747),t=e(54503),s=function(l){return l===o.ORTHOGONAL?m:l===o.HEXAGONAL?n:l===o.STAGGERED?t:l===o.ISOMETRIC?r:a};f.exports=s}),7423:((f,x,e)=>{var o=e(62991),m=function(n,r,a,t){if(o(n,r,t)){var s=t.data[r][n]||null;return s?s.index===-1?a?s:null:s:null}else return null};f.exports=m}),60540:((f,x,e)=>{var o=e(7423),m=e(26099),n=new m,r=function(a,t,s,l,i){return i.tilemapLayer.worldToTileXY(a,t,!0,n,l),o(n.x,n.y,s,i)};f.exports=r}),55826:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t){var s=t.baseTileWidth,l=t.baseTileHeight,i=t.tilemapLayer,h=0,d=0;i&&(a||(a=i.scene.cameras.main),h=i.x+a.scrollX*(1-i.scrollFactorX),d=i.y+a.scrollY*(1-i.scrollFactorY),s*=i.scaleX,l*=i.scaleY);var c=h+n*s,u=d+r*l;return[new o(c,u),new o(c+s,u),new o(c+s,u+l),new o(c,u+l)]};f.exports=m}),11758:((f,x,e)=>{var o=e(91907),m=e(27229),n=e(29747),r=e(55826),a=function(t){return t===o.ORTHOGONAL?r:t===o.ISOMETRIC?n:t===o.HEXAGONAL?m:(t===o.STAGGERED,n)};f.exports=a}),39167:((f,x,e)=>{var o=e(91907),m=e(29747),n=e(97281),r=function(a){return a===o.ORTHOGONAL?n:m};f.exports=r}),62e3:((f,x,e)=>{var o=e(91907),m=e(19951),n=e(14127),r=e(29747),a=e(97202),t=e(70326),s=function(l){return l===o.ORTHOGONAL?t:l===o.ISOMETRIC?n:l===o.HEXAGONAL?m:l===o.STAGGERED?a:r};f.exports=s}),5984:((f,x,e)=>{var o=e(91907),m=e(29747),n=e(28054),r=e(29650),a=function(t){return t===o.ORTHOGONAL?r:t===o.STAGGERED?n:m};f.exports=a}),7386:((f,x,e)=>{var o=e(95540),m=function(n,r,a,t,s,l){n===void 0&&(n=0),r===void 0&&(r=0),a===void 0&&(a=l.width),t===void 0&&(t=l.height),s||(s={});var i=o(s,"isNotEmpty",!1),h=o(s,"isColliding",!1),d=o(s,"hasInterestingFace",!1);n<0&&(a+=n,n=0),r<0&&(t+=r,r=0),n+a>l.width&&(a=Math.max(l.width-n,0)),r+t>l.height&&(t=Math.max(l.height-r,0));for(var c=[],u=r;u<r+t;u++)for(var p=n;p<n+a;p++){var g=l.data[u][p];if(g!==null){if(i&&g.index===-1||h&&!g.collides||d&&!g.hasInterestingFace)continue;c.push(g)}}return c};f.exports=m}),91141:((f,x,e)=>{var o=e(55738),m=e(7386),n=e(91865),r=e(29747),a=e(26099),t=e(91907),s=function(c,u){return n.RectangleToTriangle(u,c)},l=new a,i=new a,h=new a,d=function(c,u,p,g){if(g.orientation!==t.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(c===void 0)return[];var y=r;c instanceof o.Circle?y=n.CircleToRectangle:c instanceof o.Rectangle?y=n.RectangleToRectangle:c instanceof o.Triangle?y=s:c instanceof o.Line&&(y=n.LineToRectangle),g.tilemapLayer.worldToTileXY(c.left,c.top,!0,i,p);var v=i.x,S=i.y;g.tilemapLayer.worldToTileXY(c.right,c.bottom,!1,h,p);var w=Math.ceil(h.x),T=Math.ceil(h.y),C=Math.max(w-v,1),M=Math.max(T-S,1),E=m(v,S,C,M,u,g),P=g.tileWidth,A=g.tileHeight;g.tilemapLayer&&(P*=g.tilemapLayer.scaleX,A*=g.tilemapLayer.scaleY);for(var D=[],W=new o.Rectangle(0,0,P,A),V=0;V<E.length;V++){var K=E[V];g.tilemapLayer.tileToWorldXY(K.x,K.y,l,p),W.x=l.x,W.y=l.y,y(c,W)&&D.push(K)}return D};f.exports=d}),96523:((f,x,e)=>{var o=e(7386),m=e(26099),n=new m,r=new m,a=function(t,s,l,i,h,d,c){var u=c.tilemapLayer.tilemap._convert.WorldToTileXY;u(t,s,!0,n,d,c);var p=n.x,g=n.y;u(t+l,s+i,!1,r,d,c);var y=Math.ceil(r.x),v=Math.ceil(r.y);return o(p,g,y-p,v-g,h,c)};f.exports=a}),96113:((f,x,e)=>{var o=e(91907),m=e(20242),n=e(10095),r=function(a){return a===o.ORTHOGONAL?n:m};f.exports=r}),16926:((f,x,e)=>{var o=e(91907),m=e(86625),n=e(96897),r=e(29747),a=e(15108),t=e(85896),s=function(l){return l===o.ORTHOGONAL?t:l===o.ISOMETRIC?n:l===o.HEXAGONAL?m:l===o.STAGGERED?a:r};f.exports=s}),55762:((f,x,e)=>{var o=e(91907),m=e(20242),n=e(51900),r=e(63288),a=function(t){return t===o.ORTHOGONAL?r:t===o.STAGGERED?n:m};f.exports=a}),45091:((f,x,e)=>{var o=e(62991),m=function(n,r,a){if(o(n,r,a)){var t=a.data[r][n];return t!==null&&t.index>-1}else return!1};f.exports=m}),24152:((f,x,e)=>{var o=e(45091),m=e(26099),n=new m,r=function(a,t,s,l){l.tilemapLayer.worldToTileXY(a,t,!0,n,s);var i=n.x,h=n.y;return o(i,h,l)};f.exports=r}),90454:((f,x,e)=>{var o=e(63448),m=e(56583),n=function(r,a){var t=r.tilemapLayer.tilemap,s=r.tilemapLayer,l=Math.floor(t.tileWidth*s.scaleX),i=Math.floor(t.tileHeight*s.scaleY),h=r.hexSideLength,d,c,u,p;if(r.staggerAxis==="y"){var g=(i-h)/2+h;d=m(a.worldView.x-s.x,l,0,!0)-s.cullPaddingX,c=o(a.worldView.right-s.x,l,0,!0)+s.cullPaddingX,u=m(a.worldView.y-s.y,g,0,!0)-s.cullPaddingY,p=o(a.worldView.bottom-s.y,g,0,!0)+s.cullPaddingY}else{var y=(l-h)/2+h;d=m(a.worldView.x-s.x,y,0,!0)-s.cullPaddingX,c=o(a.worldView.right-s.x,y,0,!0)+s.cullPaddingX,u=m(a.worldView.y-s.y,i,0,!0)-s.cullPaddingY,p=o(a.worldView.bottom-s.y,i,0,!0)+s.cullPaddingY}return{left:d,right:c,top:u,bottom:p}};f.exports=n}),9474:((f,x,e)=>{var o=e(90454),m=e(32483),n=function(r,a,t,s){t===void 0&&(t=[]),s===void 0&&(s=0),t.length=0;var l=r.tilemapLayer,i=o(r,a);return l.skipCull&&l.scrollFactorX===1&&l.scrollFactorY===1&&(i.left=0,i.right=r.width,i.top=0,i.bottom=r.height),m(r,i,s,t),t};f.exports=n}),27229:((f,x,e)=>{var o=e(19951),m=e(26099),n=new m,r=function(a,t,s,l){var i=l.baseTileWidth,h=l.baseTileHeight,d=l.tilemapLayer;d&&(i*=d.scaleX,h*=d.scaleY);var c=o(a,t,n,s,l),u=[],p=.5773502691896257,g,y;l.staggerAxis==="y"?(g=p*i,y=h/2):(g=i/2,y=p*h);for(var v=0;v<6;v++){var S=2*Math.PI*(.5-v)/6;u.push(new m(c.x+g*Math.cos(S),c.y+y*Math.sin(S)))}return u};f.exports=r}),19951:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s){a||(a=new o);var l=s.baseTileWidth,i=s.baseTileHeight,h=s.tilemapLayer,d=0,c=0;h&&(t||(t=h.scene.cameras.main),d=h.x+t.scrollX*(1-h.scrollFactorX),c=h.y+t.scrollY*(1-h.scrollFactorY),l*=h.scaleX,i*=h.scaleY);var u=l/2,p=i/2,g,y,v=s.staggerAxis,S=s.staggerIndex;return v==="y"?(g=d+l*n+l,y=c+1.5*r*p+p,r%2===0&&(S==="odd"?g-=u:g+=u)):v==="x"&&S==="odd"&&(g=d+1.5*n*u+u,y=c+i*n+i,n%2===0&&(S==="odd"?y-=p:y+=p)),a.set(g,y)};f.exports=m}),86625:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s,l){t||(t=new o);var i=l.baseTileWidth,h=l.baseTileHeight,d=l.tilemapLayer;d&&(s||(s=d.scene.cameras.main),n=n-(d.x+s.scrollX*(1-d.scrollFactorX)),r=r-(d.y+s.scrollY*(1-d.scrollFactorY)),i*=d.scaleX,h*=d.scaleY);var c=.5773502691896257,u=-.3333333333333333,p=0,g=.6666666666666666,y=i/2,v=h/2,S,w,T,C,M;l.staggerAxis==="y"?(S=(n-y)/(c*i),w=(r-v)/v,T=c*S+u*w,C=p*S+g*w):(S=(n-y)/y,w=(r-v)/(c*h),T=u*S+c*w,C=g*S+p*w),M=-T-C;var E=Math.round(T),P=Math.round(C),A=Math.round(M),D=Math.abs(E-T),W=Math.abs(P-C),V=Math.abs(A-M);D>W&&D>V?E=-P-A:W>V&&(P=-E-A);var K,X=P;return l.staggerIndex==="odd"?K=X%2===0?P/2+E:P/2+E-.5:K=X%2===0?P/2+E:P/2+E+.5,t.set(K,X)};f.exports=m}),62991:(f=>{var x=function(e,o,m){return e>=0&&e<m.width&&o>=0&&o<m.height};f.exports=x}),14018:((f,x,e)=>{var o=e(33528),m=function(n,r,a,t){a===void 0&&(a=[]),t===void 0&&(t=0),a.length=0;var s=n.tilemapLayer,l=n.data,i=n.width,h=n.height,d=s.skipCull,c=0,u=i,p=0,g=h,y,v,S;if(t===0)for(v=p;v<g;v++)for(y=c;y<u;y++)S=l[v][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!d&&!o(y,v,n,r)||a.push(S));else if(t===1)for(v=p;v<g;v++)for(y=u;y>=c;y--)S=l[v][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!d&&!o(y,v,n,r)||a.push(S));else if(t===2)for(v=g;v>=p;v--)for(y=c;y<u;y++)S=l[v][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!d&&!o(y,v,n,r)||a.push(S));else if(t===3)for(v=g;v>=p;v--)for(y=u;y>=c;y--)S=l[v][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!d&&!o(y,v,n,r)||a.push(S));return s.tilesDrawn=a.length,s.tilesTotal=i*h,a};f.exports=m}),14127:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s){a||(a=new o);var l=s.baseTileWidth,i=s.baseTileHeight,h=s.tilemapLayer,d=0,c=0;h&&(t||(t=h.scene.cameras.main),d=h.x+t.scrollX*(1-h.scrollFactorX),l*=h.scaleX,c=h.y+t.scrollY*(1-h.scrollFactorY),i*=h.scaleY);var u=d+(n-r)*(l/2),p=c+(n+r)*(i/2);return a.set(u,p)};f.exports=m}),96897:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s,l,i){t||(t=new o);var h=l.baseTileWidth,d=l.baseTileHeight,c=l.tilemapLayer;c&&(s||(s=c.scene.cameras.main),r=r-(c.y+s.scrollY*(1-c.scrollFactorY)),d*=c.scaleY,n=n-(c.x+s.scrollX*(1-c.scrollFactorX)),h*=c.scaleX);var u=h/2,p=d/2;n=n-u,i||(r=r-d);var g=.5*(n/u+r/p),y=.5*(-n/u+r/p);return a&&(g=Math.floor(g),y=Math.floor(y)),t.set(g,y)};f.exports=m}),71558:((f,x,e)=>{var o=e(23029),m=e(62991),n=e(72023),r=e(20576),a=function(t,s,l,i,h){if(i===void 0&&(i=!0),!m(s,l,h))return null;var d,c=h.data[l][s],u=c&&c.collides;t instanceof o?(h.data[l][s]===null&&(h.data[l][s]=new o(h,t.index,s,l,h.tileWidth,h.tileHeight)),h.data[l][s].copy(t)):(d=t,h.data[l][s]===null?h.data[l][s]=new o(h,d,s,l,h.tileWidth,h.tileHeight):h.data[l][s].index=d);var p=h.data[l][s],g=h.collideIndexes.indexOf(p.index)!==-1;if(d=t instanceof o?t.index:t,d===-1)p.width=h.tileWidth,p.height=h.tileHeight;else{var y=h.tilemapLayer.tilemap,v=y.tiles,S=v[d][2],w=y.tilesets[S];p.width=w.tileWidth,p.height=w.tileHeight}return r(p,g),i&&u!==p.collides&&n(s,l,h),p};f.exports=a}),26303:((f,x,e)=>{var o=e(71558),m=e(26099),n=new m,r=function(a,t,s,l,i,h){return h.tilemapLayer.worldToTileXY(t,s,!0,n,i,h),o(a,n.x,n.y,l,h)};f.exports=r}),14051:((f,x,e)=>{var o=e(42573),m=e(71558),n=function(r,a,t,s,l){if(s===void 0&&(s=!0),!Array.isArray(r))return null;Array.isArray(r[0])||(r=[r]);for(var i=r.length,h=r[0].length,d=0;d<i;d++)for(var c=0;c<h;c++){var u=r[d][c];m(u,a+c,t+d,!1,l)}s&&o(a-1,t-1,h+2,i+2,l)};f.exports=n}),77389:((f,x,e)=>{var o=e(7386),m=e(26546),n=function(r,a,t,s,l,i){var h,d=o(r,a,t,s,{},i);if(!l)for(l=[],h=0;h<d.length;h++)l.indexOf(d[h].index)===-1&&l.push(d[h].index);for(h=0;h<d.length;h++)d[h].index=m(l)};f.exports=n}),63557:((f,x,e)=>{var o=e(23029),m=e(62991),n=e(72023),r=function(a,t,s,l,i){if(s===void 0&&(s=!0),l===void 0&&(l=!0),!m(a,t,i))return null;var h=i.data[t][a];if(h)i.data[t][a]=s?null:new o(i,-1,a,t,i.tileWidth,i.tileHeight);else return null;return l&&h&&h.collides&&n(a,t,i),h};f.exports=r}),94178:((f,x,e)=>{var o=e(63557),m=e(26099),n=new m,r=function(a,t,s,l,i,h){return h.tilemapLayer.worldToTileXY(a,t,!0,n,i,h),o(n.x,n.y,s,l,h)};f.exports=r}),15533:((f,x,e)=>{var o=e(7386),m=e(3956),n=new m(105,210,231,150),r=new m(243,134,48,200),a=new m(40,39,37,150),t=function(s,l,i){l===void 0&&(l={});var h=l.tileColor!==void 0?l.tileColor:n,d=l.collidingTileColor!==void 0?l.collidingTileColor:r,c=l.faceColor!==void 0?l.faceColor:a,u=o(0,0,i.width,i.height,null,i);s.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),s.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var p=0;p<u.length;p++){var g=u[p],y=g.tileset?g.tileset.tileOffset:{x:0,y:0},v=g.width,S=g.height,w=g.pixelX-y.x,T=g.pixelY-y.y,C=g.collides?d:h;C!==null&&(s.fillStyle(C.color,C.alpha/255),s.fillRect(w,T,v,S)),w+=1,T+=1,v-=2,S-=2,c!==null&&(s.lineStyle(1,c.color,c.alpha/255),g.faceTop&&s.lineBetween(w,T,w+v,T),g.faceRight&&s.lineBetween(w+v,T,w+v,T+S),g.faceBottom&&s.lineBetween(w,T+S,w+v,T+S),g.faceLeft&&s.lineBetween(w,T,w,T+S))}};f.exports=t}),27987:((f,x,e)=>{var o=e(7386),m=function(n,r,a,t,s,l,i){for(var h=o(a,t,s,l,null,i),d=0;d<h.length;d++)h[d]&&h[d].index===n&&(h[d].index=r)};f.exports=m}),32483:(f=>{var x=function(e,o,m,n){var r=e.data,a=e.width,t=e.height,s=e.tilemapLayer,l=Math.max(0,o.left),i=Math.min(a,o.right),h=Math.max(0,o.top),d=Math.min(t,o.bottom),c,u,p;if(m===0)for(u=h;u<d;u++)for(c=l;r[u]&&c<i;c++)p=r[u][c],!(!p||p.index===-1||!p.visible||p.alpha===0)&&n.push(p);else if(m===1)for(u=h;u<d;u++)for(c=i;r[u]&&c>=l;c--)p=r[u][c],!(!p||p.index===-1||!p.visible||p.alpha===0)&&n.push(p);else if(m===2)for(u=d;u>=h;u--)for(c=l;r[u]&&c<i;c++)p=r[u][c],!(!p||p.index===-1||!p.visible||p.alpha===0)&&n.push(p);else if(m===3)for(u=d;u>=h;u--)for(c=i;r[u]&&c>=l;c--)p=r[u][c],!(!p||p.index===-1||!p.visible||p.alpha===0)&&n.push(p);return s.tilesDrawn=n.length,s.tilesTotal=a*t,n};f.exports=x}),57068:((f,x,e)=>{var o=e(20576),m=e(42573),n=e(9589),r=function(a,t,s,l,i){t===void 0&&(t=!0),s===void 0&&(s=!0),i===void 0&&(i=!0),Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;h++)n(a[h],t,l);if(i)for(var d=0;d<l.height;d++)for(var c=0;c<l.width;c++){var u=l.data[d][c];u&&a.indexOf(u.index)!==-1&&o(u,t)}s&&m(0,0,l.width,l.height,l)};f.exports=r}),37266:((f,x,e)=>{var o=e(20576),m=e(42573),n=e(9589),r=function(a,t,s,l,i,h){if(s===void 0&&(s=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),!(a>t)){for(var d=a;d<=t;d++)n(d,s,i);if(h)for(var c=0;c<i.height;c++)for(var u=0;u<i.width;u++){var p=i.data[c][u];p&&p.index>=a&&p.index<=t&&o(p,s)}l&&m(0,0,i.width,i.height,i)}};f.exports=r}),75661:((f,x,e)=>{var o=e(20576),m=e(42573),n=e(9589),r=function(a,t,s,l){t===void 0&&(t=!0),s===void 0&&(s=!0),Array.isArray(a)||(a=[a]);for(var i=0;i<l.height;i++)for(var h=0;h<l.width;h++){var d=l.data[i][h];d&&a.indexOf(d.index)===-1&&(o(d,t),n(d.index,t,l))}s&&m(0,0,l.width,l.height,l)};f.exports=r}),64740:((f,x,e)=>{var o=e(20576),m=e(42573),n=e(97022),r=function(a,t,s,l){t===void 0&&(t=!0),s===void 0&&(s=!0);for(var i=0;i<l.height;i++)for(var h=0;h<l.width;h++){var d=l.data[i][h];if(d){for(var c in a)if(n(d.properties,c)){var u=a[c];Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++)d.properties[c]===u[p]&&o(d,t)}}}s&&m(0,0,l.width,l.height,l)};f.exports=r}),63307:((f,x,e)=>{var o=e(20576),m=e(42573),n=function(r,a,t){r===void 0&&(r=!0),a===void 0&&(a=!0);for(var s=0;s<t.height;s++)for(var l=0;l<t.width;l++){var i=t.data[s][l];if(i){var h=i.getCollisionGroup();h&&h.objects&&h.objects.length>0&&o(i,r)}}a&&m(0,0,t.width,t.height,t)};f.exports=n}),9589:(f=>{var x=function(e,o,m){var n=m.collideIndexes.indexOf(e);o&&n===-1?m.collideIndexes.push(e):!o&&n!==-1&&m.collideIndexes.splice(n,1)};f.exports=x}),20576:(f=>{var x=function(e,o){o?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};f.exports=x}),79583:(f=>{var x=function(e,o,m,n){if(typeof e=="number")n.callbacks[e]=o!==null?{callback:o,callbackContext:m}:void 0;else for(var r=0,a=e.length;r<a;r++)n.callbacks[e[r]]=o!==null?{callback:o,callbackContext:m}:void 0};f.exports=x}),93254:((f,x,e)=>{var o=e(7386),m=function(n,r,a,t,s,l,i){for(var h=o(n,r,a,t,null,i),d=0;d<h.length;d++)h[d].setCollisionCallback(s,l)};f.exports=m}),32903:((f,x,e)=>{var o=e(7386),m=e(33680),n=function(r,a,t,s,l){var i=o(r,a,t,s,null,l),h=i.map(function(c){return c.index});m(h);for(var d=0;d<i.length;d++)i[d].index=h[d]};f.exports=n}),61325:((f,x,e)=>{var o=e(63448),m=e(56583),n=function(r,a){var t=r.tilemapLayer.tilemap,s=r.tilemapLayer,l=Math.floor(t.tileWidth*s.scaleX),i=Math.floor(t.tileHeight*s.scaleY),h=m(a.worldView.x-s.x,l,0,!0)-s.cullPaddingX,d=o(a.worldView.right-s.x,l,0,!0)+s.cullPaddingX,c=m(a.worldView.y-s.y,i/2,0,!0)-s.cullPaddingY,u=o(a.worldView.bottom-s.y,i/2,0,!0)+s.cullPaddingY;return{left:h,right:d,top:c,bottom:u}};f.exports=n}),54503:((f,x,e)=>{var o=e(61325),m=e(32483),n=function(r,a,t,s){t===void 0&&(t=[]),s===void 0&&(s=0),t.length=0;var l=r.tilemapLayer,i=o(r,a);return l.skipCull&&l.scrollFactorX===1&&l.scrollFactorY===1&&(i.left=0,i.right=r.width,i.top=0,i.bottom=r.height),m(r,i,s,t),t};f.exports=n}),97202:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s){a||(a=new o);var l=s.baseTileWidth,i=s.baseTileHeight,h=s.tilemapLayer,d=0,c=0;h&&(t||(t=h.scene.cameras.main),d=h.x+t.scrollX*(1-h.scrollFactorX),l*=h.scaleX,c=h.y+t.scrollY*(1-h.scrollFactorY),i*=h.scaleY);var u=d+n*l+r%2*(l/2),p=c+r*(i/2);return a.set(u,p)};f.exports=m}),28054:(f=>{var x=function(e,o,m){var n=m.baseTileHeight,r=m.tilemapLayer,a=0;return r&&(o===void 0&&(o=r.scene.cameras.main),a=r.y+o.scrollY*(1-r.scrollFactorY),n*=r.scaleY),a+e*(n/2)+n};f.exports=x}),15108:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s,l){t||(t=new o);var i=l.baseTileWidth,h=l.baseTileHeight,d=l.tilemapLayer;d&&(s||(s=d.scene.cameras.main),r=r-(d.y+s.scrollY*(1-d.scrollFactorY)),h*=d.scaleY,n=n-(d.x+s.scrollX*(1-d.scrollFactorX)),i*=d.scaleX);var c=a?Math.floor(r/(h/2)):r/(h/2),u=a?Math.floor((n+c%2*.5*i)/i):(n+c%2*.5*i)/i;return t.set(u,c)};f.exports=m}),51900:(f=>{var x=function(e,o,m,n){var r=n.baseTileHeight,a=n.tilemapLayer;return a&&(m||(m=a.scene.cameras.main),e=e-(a.y+m.scrollY*(1-a.scrollFactorY)),r*=a.scaleY),o?Math.floor(e/(r/2)):e/(r/2)};f.exports=x}),86560:((f,x,e)=>{var o=e(7386),m=function(n,r,a,t,s,l,i){for(var h=o(a,t,s,l,null,i),d=0;d<h.length;d++)h[d]&&(h[d].index===n?h[d].index=r:h[d].index===r&&(h[d].index=n))};f.exports=m}),97281:(f=>{var x=function(e,o,m){var n=m.baseTileWidth,r=m.tilemapLayer,a=0;return r&&(o||(o=r.scene.cameras.main),a=r.x+o.scrollX*(1-r.scrollFactorX),n*=r.scaleX),a+e*n};f.exports=x}),70326:((f,x,e)=>{var o=e(97281),m=e(29650),n=e(26099),r=function(a,t,s,l,i){return s||(s=new n(0,0)),s.x=o(a,l,i),s.y=m(t,l,i),s};f.exports=r}),29650:(f=>{var x=function(e,o,m){var n=m.baseTileHeight,r=m.tilemapLayer,a=0;return r&&(o||(o=r.scene.cameras.main),a=r.y+o.scrollY*(1-r.scrollFactorY),n*=r.scaleY),a+e*n};f.exports=x}),77366:((f,x,e)=>{var o=e(7386),m=e(75508),n=function(r,a,t,s,l,i){if(l){var h,d=o(r,a,t,s,null,i),c=0;for(h=0;h<l.length;h++)c+=l[h].weight;if(!(c<=0))for(h=0;h<d.length;h++){for(var u=m.RND.frac()*c,p=0,g=-1,y=0;y<l.length;y++)if(p+=l[y].weight,u<=p){var v=l[y].index;g=Array.isArray(v)?v[Math.floor(m.RND.frac()*v.length)]:v;break}d[h].index=g}}};f.exports=n}),10095:((f,x,e)=>{var o=e(85896),m=e(26099),n=new m,r=function(a,t,s,l){return o(a,0,t,n,s,l),n.x};f.exports=r}),85896:((f,x,e)=>{var o=e(26099),m=function(n,r,a,t,s,l){a===void 0&&(a=!0),t||(t=new o);var i=l.baseTileWidth,h=l.baseTileHeight,d=l.tilemapLayer;d&&(s||(s=d.scene.cameras.main),n=n-(d.x+s.scrollX*(1-d.scrollFactorX)),r=r-(d.y+s.scrollY*(1-d.scrollFactorY)),i*=d.scaleX,h*=d.scaleY);var c=n/i,u=r/h;return a&&(c=Math.floor(c),u=Math.floor(u)),t.set(c,u)};f.exports=m}),63288:((f,x,e)=>{var o=e(85896),m=e(26099),n=new m,r=function(a,t,s,l){return o(0,a,t,n,s,l),n.y};f.exports=r}),81086:((f,x,e)=>{f.exports={CalculateFacesAt:e(72023),CalculateFacesWithin:e(42573),CheckIsoBounds:e(33528),Copy:e(1785),CreateFromTiles:e(78419),CullBounds:e(19545),CullTiles:e(30003),Fill:e(35137),FilterTiles:e(40253),FindByIndex:e(52692),FindTile:e(66151),ForEachTile:e(97560),GetCullTilesFunction:e(43305),GetTileAt:e(7423),GetTileAtWorldXY:e(60540),GetTileCorners:e(55826),GetTileCornersFunction:e(11758),GetTilesWithin:e(7386),GetTilesWithinShape:e(91141),GetTilesWithinWorldXY:e(96523),GetTileToWorldXFunction:e(39167),GetTileToWorldXYFunction:e(62e3),GetTileToWorldYFunction:e(5984),GetWorldToTileXFunction:e(96113),GetWorldToTileXYFunction:e(16926),GetWorldToTileYFunction:e(55762),HasTileAt:e(45091),HasTileAtWorldXY:e(24152),HexagonalCullBounds:e(90454),HexagonalCullTiles:e(9474),HexagonalGetTileCorners:e(27229),HexagonalTileToWorldXY:e(19951),HexagonalWorldToTileXY:e(86625),IsInLayerBounds:e(62991),IsometricCullTiles:e(14018),IsometricTileToWorldXY:e(14127),IsometricWorldToTileXY:e(96897),PutTileAt:e(71558),PutTileAtWorldXY:e(26303),PutTilesAt:e(14051),Randomize:e(77389),RemoveTileAt:e(63557),RemoveTileAtWorldXY:e(94178),RenderDebug:e(15533),ReplaceByIndex:e(27987),RunCull:e(32483),SetCollision:e(57068),SetCollisionBetween:e(37266),SetCollisionByExclusion:e(75661),SetCollisionByProperty:e(64740),SetCollisionFromCollisionGroup:e(63307),SetLayerCollisionIndex:e(9589),SetTileCollision:e(20576),SetTileIndexCallback:e(79583),SetTileLocationCallback:e(93254),Shuffle:e(32903),StaggeredCullBounds:e(61325),StaggeredCullTiles:e(54503),StaggeredTileToWorldXY:e(97202),StaggeredTileToWorldY:e(28054),StaggeredWorldToTileXY:e(15108),StaggeredWorldToTileY:e(51900),SwapByIndex:e(86560),TileToWorldX:e(97281),TileToWorldXY:e(70326),TileToWorldY:e(29650),WeightedRandomize:e(77366),WorldToTileX:e(10095),WorldToTileXY:e(85896),WorldToTileY:e(63288)}}),91907:(f=>{f.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),21829:((f,x,e)=>{var o={ORIENTATION:e(91907)};f.exports=o}),62501:((f,x,e)=>{var o=e(79291),m=e(21829),n={Components:e(81086),Parsers:e(57442),Formats:e(80341),ImageCollection:e(16536),ParseToTilemap:e(31989),Tile:e(23029),Tilemap:e(49075),TilemapCreator:e(45939),TilemapFactory:e(46029),Tileset:e(33629),TilemapLayer:e(20442),Orientation:e(91907),LayerData:e(14977),MapData:e(87010),ObjectLayer:e(48700)};n=o(!1,n,m.ORIENTATION),f.exports=n}),14977:((f,x,e)=>{var o=e(83419),m=e(91907),n=e(95540),r=new o({initialize:function(t){t===void 0&&(t={}),this.name=n(t,"name","layer"),this.id=n(t,"id",0),this.x=n(t,"x",0),this.y=n(t,"y",0),this.width=n(t,"width",0),this.height=n(t,"height",0),this.tileWidth=n(t,"tileWidth",0),this.tileHeight=n(t,"tileHeight",0),this.baseTileWidth=n(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(t,"baseTileHeight",this.tileHeight),this.orientation=n(t,"orientation",m.ORTHOGONAL),this.widthInPixels=n(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(t,"alpha",1),this.visible=n(t,"visible",!0),this.properties=n(t,"properties",[]),this.indexes=n(t,"indexes",[]),this.collideIndexes=n(t,"collideIndexes",[]),this.callbacks=n(t,"callbacks",[]),this.bodies=n(t,"bodies",[]),this.data=n(t,"data",[]),this.tilemapLayer=n(t,"tilemapLayer",null),this.hexSideLength=n(t,"hexSideLength",0),this.staggerAxis=n(t,"staggerAxis","y"),this.staggerIndex=n(t,"staggerIndex","odd")}});f.exports=r}),87010:((f,x,e)=>{var o=e(83419),m=e(91907),n=e(95540),r=new o({initialize:function(t){t===void 0&&(t={}),this.name=n(t,"name","map"),this.width=n(t,"width",0),this.height=n(t,"height",0),this.infinite=n(t,"infinite",!1),this.tileWidth=n(t,"tileWidth",0),this.tileHeight=n(t,"tileHeight",0),this.widthInPixels=n(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(t,"heightInPixels",this.height*this.tileHeight),this.format=n(t,"format",null),this.orientation=n(t,"orientation",m.ORTHOGONAL),this.renderOrder=n(t,"renderOrder","right-down"),this.version=n(t,"version","1"),this.properties=n(t,"properties",{}),this.layers=n(t,"layers",[]),this.images=n(t,"images",[]),this.objects=n(t,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=n(t,"collision",{}),this.tilesets=n(t,"tilesets",[]),this.imageCollections=n(t,"imageCollections",[]),this.tiles=n(t,"tiles",[]),this.hexSideLength=n(t,"hexSideLength",0),this.staggerAxis=n(t,"staggerAxis","y"),this.staggerIndex=n(t,"staggerIndex","odd")}});f.exports=r}),48700:((f,x,e)=>{var o=e(83419),m=e(95540),n=new o({initialize:function(a){a===void 0&&(a={}),this.name=m(a,"name","object layer"),this.id=m(a,"id",0),this.opacity=m(a,"opacity",1),this.properties=m(a,"properties",{}),this.propertyTypes=m(a,"propertytypes",{}),this.type=m(a,"type","objectgroup"),this.visible=m(a,"visible",!0),this.objects=m(a,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});f.exports=n}),6641:((f,x,e)=>{var o=e(91907),m=function(n){return n=n.toLowerCase(),n==="isometric"?o.ISOMETRIC:n==="staggered"?o.STAGGERED:n==="hexagonal"?o.HEXAGONAL:o.ORTHOGONAL};f.exports=m}),46177:((f,x,e)=>{var o=e(80341),m=e(2342),n=e(82593),r=e(46594),a=e(87021),t=function(s,l,i,h,d,c){var u;switch(l){case o.ARRAY_2D:u=m(s,i,h,d,c);break;case o.CSV:u=n(s,i,h,d,c);break;case o.TILED_JSON:u=r(s,i,c);break;case o.WELTMEISTER:u=a(s,i,c);break;default:console.warn("Unrecognized tilemap data format: "+l),u=null}return u};f.exports=t}),2342:((f,x,e)=>{var o=e(80341),m=e(14977),n=e(87010),r=e(23029),a=function(t,s,l,i,h){for(var d=new m({tileWidth:l,tileHeight:i}),c=new n({name:t,tileWidth:l,tileHeight:i,format:o.ARRAY_2D,layers:[d]}),u=[],p=s.length,g=0,y=0;y<s.length;y++){u[y]=[];for(var v=s[y],S=0;S<v.length;S++){var w=parseInt(v[S],10);isNaN(w)||w===-1?u[y][S]=h?null:new r(d,-1,S,y,l,i):u[y][S]=new r(d,w,S,y,l,i)}g===0&&(g=v.length)}return c.width=d.width=g,c.height=d.height=p,c.widthInPixels=d.widthInPixels=g*l,c.heightInPixels=d.heightInPixels=p*i,d.data=u,c};f.exports=a}),82593:((f,x,e)=>{var o=e(80341),m=e(2342),n=function(r,a,t,s,l){var i=a.trim().split(`
`).map(function(d){return d.split(",")}),h=m(r,i,t,s,l);return h.format=o.CSV,h};f.exports=n}),6656:((f,x,e)=>{var o=e(14977),m=e(23029),n=function(r,a){for(var t=[],s=0;s<r.layer.length;s++){for(var l=r.layer[s],i=new o({name:l.name,width:l.width,height:l.height,tileWidth:l.tilesize,tileHeight:l.tilesize,visible:l.visible===1}),h=[],d=[],c=0;c<l.data.length;c++){for(var u=0;u<l.data[c].length;u++){var p=l.data[c][u]-1,g;p>-1?g=new m(i,p,u,c,l.tilesize,l.tilesize):g=a?null:new m(i,-1,u,c,l.tilesize,l.tilesize),h.push(g)}d.push(h),h=[]}i.data=d,t.push(i)}return t};f.exports=n}),96483:((f,x,e)=>{var o=e(33629),m=function(n){for(var r=[],a=[],t=0;t<n.layer.length;t++){var s=n.layer[t],l=s.tilesetName;l!==""&&a.indexOf(l)===-1&&(a.push(l),r.push(new o(l,0,s.tilesize,s.tilesize,0,0)))}return r};f.exports=m}),87021:((f,x,e)=>{var o=e(80341),m=e(87010),n=e(6656),r=e(96483),a=function(t,s,l){if(s.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var i=0,h=0,d=0;d<s.layer.length;d++)s.layer[d].width>i&&(i=s.layer[d].width),s.layer[d].height>h&&(h=s.layer[d].height);var c=new m({width:i,height:h,name:t,tileWidth:s.layer[0].tilesize,tileHeight:s.layer[0].tilesize,format:o.WELTMEISTER});return c.layers=n(s,l),c.tilesets=r(s),c};f.exports=a}),52833:((f,x,e)=>{f.exports={ParseTileLayers:e(6656),ParseTilesets:e(96483),ParseWeltmeister:e(87021)}}),57442:((f,x,e)=>{f.exports={FromOrientationString:e(6641),Parse:e(46177),Parse2DArray:e(2342),ParseCSV:e(82593),Impact:e(52833),Tiled:e(96761)}}),51233:((f,x,e)=>{var o=e(79291),m=function(n){for(var r,a,t,s,l,i=0;i<n.layers.length;i++){r=n.layers[i],s=null;for(var h=0;h<r.data.length;h++){l=r.data[h];for(var d=0;d<l.length;d++)a=l[d],!(a===null||a.index<0)&&(t=n.tiles[a.index][2],s=n.tilesets[t],a.width=s.tileWidth,a.height=s.tileHeight,s.tileProperties&&s.tileProperties[a.index-s.firstgid]&&(a.properties=o(a.properties,s.tileProperties[a.index-s.firstgid])))}}};f.exports=m}),41868:(f=>{var x=function(e){for(var o=window.atob(e),m=o.length,n=new Array(m/4),r=0;r<m;r+=4)n[r/4]=(o.charCodeAt(r)|o.charCodeAt(r+1)<<8|o.charCodeAt(r+2)<<16|o.charCodeAt(r+3)<<24)>>>0;return n};f.exports=x}),84101:((f,x,e)=>{var o=e(33629),m=function(n){var r,a,t=[];for(r=0;r<n.imageCollections.length;r++)for(var s=n.imageCollections[r],l=s.images,i=0;i<l.length;i++){var h=l[i],d={x:0,y:h.height-n.tileHeight};a=new o(h.image,h.gid,h.width,h.height,0,0,void 0,void 0,d),a.updateTileData(h.width,h.height),n.tilesets.push(a)}for(r=0;r<n.tilesets.length;r++){a=n.tilesets[r];for(var c=a.tileMargin,u=a.tileMargin,p=0,g=0,y=0,v=a.firstgid;v<a.firstgid+a.total&&(t[v]=[c,u,r],c+=a.tileWidth+a.tileSpacing,p++,!(p===a.total||(g++,g===a.columns&&(c=a.tileMargin,u+=a.tileHeight+a.tileSpacing,g=0,y++,y===a.rows))));v++);}return t};f.exports=m}),79677:((f,x,e)=>{var o=e(95540),m=function(n,r,a){if(!r)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var t=r.x+o(r,"startx",0)*n.tilewidth+o(r,"offsetx",0),s=r.y+o(r,"starty",0)*n.tileheight+o(r,"offsety",0);return{i:0,layers:r.layers,name:a.name+r.name+"/",opacity:a.opacity*r.opacity,visible:a.visible&&r.visible,x:a.x+t,y:a.y+s}};f.exports=m}),29920:(f=>{var x=2147483648,e=1073741824,o=536870912,m=function(n){var r=!!(n&x),a=!!(n&e),t=!!(n&o);n=n&536870911;var s=0,l=!1;return r&&a&&t?(s=Math.PI/2,l=!0):r&&a&&!t?(s=Math.PI,l=!1):r&&!a&&t?(s=Math.PI/2,l=!1):r&&!a&&!t?(s=0,l=!0):!r&&a&&t?(s=3*Math.PI/2,l=!1):!r&&a&&!t?(s=Math.PI,l=!0):!r&&!a&&t?(s=3*Math.PI/2,l=!0):!r&&!a&&!t&&(s=0,l=!1),{gid:n,flippedHorizontal:r,flippedVertical:a,flippedAntiDiagonal:t,rotation:s,flipped:l}};f.exports=m}),12635:((f,x,e)=>{var o=e(95540),m=e(79677),n=function(r){for(var a=[],t=[],s=m(r);s.i<s.layers.length||t.length>0;){if(s.i>=s.layers.length){if(t.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=t.pop();continue}var l=s.layers[s.i];if(s.i++,l.type!=="imagelayer"){if(l.type==="group"){var i=m(r,l,s);t.push(s),s=i}continue}var h=o(l,"offsetx",0)+o(l,"startx",0),d=o(l,"offsety",0)+o(l,"starty",0);a.push({name:s.name+l.name,image:l.image,x:s.x+h+l.x,y:s.y+d+l.y,alpha:s.opacity*l.opacity,visible:s.visible&&l.visible,properties:o(l,"properties",{})})}return a};f.exports=n}),46594:((f,x,e)=>{var o=e(51233),m=e(84101),n=e(91907),r=e(62644),a=e(80341),t=e(6641),s=e(87010),l=e(12635),i=e(22611),h=e(28200),d=e(24619),c=function(u,p,g){var y=r(p),v=new s({width:y.width,height:y.height,name:u,tileWidth:y.tilewidth,tileHeight:y.tileheight,orientation:t(y.orientation),format:a.TILED_JSON,version:y.version,properties:y.properties,renderOrder:y.renderorder,infinite:y.infinite});if(v.orientation===n.HEXAGONAL)if(v.hexSideLength=y.hexsidelength,v.staggerAxis=y.staggeraxis,v.staggerIndex=y.staggerindex,v.staggerAxis==="y"){var S=(v.tileHeight-v.hexSideLength)/2;v.widthInPixels=v.tileWidth*(v.width+.5),v.heightInPixels=v.height*(v.hexSideLength+S)+S}else{var w=(v.tileWidth-v.hexSideLength)/2;v.widthInPixels=v.width*(v.hexSideLength+w)+w,v.heightInPixels=v.tileHeight*(v.height+.5)}v.layers=h(y,g),v.images=l(y);var T=d(y);return v.tilesets=T.tilesets,v.imageCollections=T.imageCollections,v.objects=i(y),v.tiles=m(v),o(v),v};f.exports=c}),52205:((f,x,e)=>{var o=e(18254),m=e(29920),n=function(t){return{x:t.x,y:t.y}},r=["id","name","type","rotation","properties","visible","x","y","width","height"],a=function(t,s,l){s===void 0&&(s=0),l===void 0&&(l=0);var i=o(t,r);if(i.x+=s,i.y+=l,t.gid){var h=m(t.gid);i.gid=h.gid,i.flippedHorizontal=h.flippedHorizontal,i.flippedVertical=h.flippedVertical,i.flippedAntiDiagonal=h.flippedAntiDiagonal}else t.polyline?i.polyline=t.polyline.map(n):t.polygon?i.polygon=t.polygon.map(n):t.ellipse?i.ellipse=t.ellipse:t.text?i.text=t.text:t.point?i.point=!0:i.rectangle=!0;return i};f.exports=a}),22611:((f,x,e)=>{var o=e(95540),m=e(52205),n=e(48700),r=e(79677),a=function(t){for(var s=[],l=[],i=r(t);i.i<i.layers.length||l.length>0;){if(i.i>=i.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}i=l.pop();continue}var h=i.layers[i.i];if(i.i++,h.opacity*=i.opacity,h.visible=i.visible&&h.visible,h.type!=="objectgroup"){if(h.type==="group"){var d=r(t,h,i);l.push(i),i=d}continue}h.name=i.name+h.name;for(var c=i.x+o(h,"startx",0)+o(h,"offsetx",0),u=i.y+o(h,"starty",0)+o(h,"offsety",0),p=[],g=0;g<h.objects.length;g++){var y=m(h.objects[g],c,u);p.push(y)}var v=new n(h);v.objects=p,s.push(v)}return s};f.exports=a}),28200:((f,x,e)=>{var o=e(41868),m=e(91907),n=e(79677),r=e(6641),a=e(95540),t=e(14977),s=e(29920),l=e(23029),i=function(h,d){for(var c=a(h,"infinite",!1),u=[],p=[],g=n(h);g.i<g.layers.length||p.length>0;){if(g.i>=g.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}g=p.pop();continue}var y=g.layers[g.i];if(g.i++,y.type!=="tilelayer"){if(y.type==="group"){var v=n(h,y,g);p.push(g),g=v}continue}if(y.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+y.name+"'");continue}else if(y.encoding&&y.encoding==="base64"){if(y.chunks)for(var S=0;S<y.chunks.length;S++)y.chunks[S].data=o(y.chunks[S].data);y.data&&(y.data=o(y.data)),delete y.encoding}var w,T,C,M,E,P,A=[],D=0;if(c){var W=a(y,"startx",0)+y.x,V=a(y,"starty",0)+y.y;w=new t({name:g.name+y.name,id:y.id,x:g.x+a(y,"offsetx",0)+W*h.tilewidth,y:g.y+a(y,"offsety",0)+V*h.tileheight,width:y.width,height:y.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:g.opacity*y.opacity,visible:g.visible&&y.visible,properties:a(y,"properties",[]),orientation:r(h.orientation)}),w.orientation===m.HEXAGONAL&&(w.hexSideLength=h.hexsidelength,w.staggerAxis=h.staggeraxis,w.staggerIndex=h.staggerindex,w.staggerAxis==="y"?(E=(w.tileHeight-w.hexSideLength)/2,w.widthInPixels=w.tileWidth*(w.width+.5),w.heightInPixels=w.height*(w.hexSideLength+E)+E):(P=(w.tileWidth-w.hexSideLength)/2,w.widthInPixels=w.width*(w.hexSideLength+P)+P,w.heightInPixels=w.tileHeight*(w.height+.5)));for(var K=0;K<y.height;K++){A[K]=[null];for(var X=0;X<y.width;X++)A[K][X]=null}for(K=0,q=y.chunks.length;K<q;K++)for(var R=y.chunks[K],H=R.x-W,L=R.y-V,N=0,z=0,U=R.data.length;z<U;z++){var Y=D+H,$=N+L;T=s(R.data[z]),T.gid>0?(C=new l(w,T.gid,Y,$,h.tilewidth,h.tileheight),C.rotation=T.rotation,C.flipX=T.flipped,A[$][Y]=C):(M=d?null:new l(w,-1,Y,$,h.tilewidth,h.tileheight),A[$][Y]=M),D++,D===R.width&&(N++,D=0)}}else{w=new t({name:g.name+y.name,id:y.id,x:g.x+a(y,"offsetx",0)+y.x,y:g.y+a(y,"offsety",0)+y.y,width:y.width,height:y.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:g.opacity*y.opacity,visible:g.visible&&y.visible,properties:a(y,"properties",[]),orientation:r(h.orientation)}),w.orientation===m.HEXAGONAL&&(w.hexSideLength=h.hexsidelength,w.staggerAxis=h.staggeraxis,w.staggerIndex=h.staggerindex,w.staggerAxis==="y"?(E=(w.tileHeight-w.hexSideLength)/2,w.widthInPixels=w.tileWidth*(w.width+.5),w.heightInPixels=w.height*(w.hexSideLength+E)+E):(P=(w.tileWidth-w.hexSideLength)/2,w.widthInPixels=w.width*(w.hexSideLength+P)+P,w.heightInPixels=w.tileHeight*(w.height+.5)));for(var Z=[],Q=0,q=y.data.length;Q<q;Q++)T=s(y.data[Q]),T.gid>0?(C=new l(w,T.gid,D,A.length,h.tilewidth,h.tileheight),C.rotation=T.rotation,C.flipX=T.flipped,Z.push(C)):(M=d?null:new l(w,-1,D,A.length,h.tilewidth,h.tileheight),Z.push(M)),D++,D===y.width&&(A.push(Z),D=0,Z=[])}w.data=A,u.push(w)}return u};f.exports=i}),24619:((f,x,e)=>{var o=e(33629),m=e(16536),n=e(52205),r=e(57880),a=function(t){for(var s=[],l=[],i=null,h,d=0;d<t.tilesets.length;d++){var c=t.tilesets[d];if(c.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(c.image){var u=new o(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,void 0,void 0,c.tileoffset);if(t.version>1){var p=void 0,g=void 0;if(Array.isArray(c.tiles)){p=p||{},g=g||{};for(var y=0;y<c.tiles.length;y++){var v=c.tiles[y];if(v.properties){var S={};v.properties.forEach(function(K){S[K.name]=K.value}),g[v.id]=S}if(v.objectgroup&&((p[v.id]||(p[v.id]={})).objectgroup=v.objectgroup,v.objectgroup.objects)){var w=v.objectgroup.objects.map(function(K){return n(K)});p[v.id].objectgroup.objects=w}v.animation&&((p[v.id]||(p[v.id]={})).animation=v.animation),v.type&&((p[v.id]||(p[v.id]={})).type=v.type)}}Array.isArray(c.wangsets)&&(p=p||{},g=g||{},r(c.wangsets,p)),p&&(u.tileData=p,u.tileProperties=g)}else if(c.tileproperties&&(u.tileProperties=c.tileproperties),c.tiles){u.tileData=c.tiles;for(h in u.tileData){var T=u.tileData[h].objectgroup;if(T&&T.objects){var C=T.objects.map(function(K){return n(K)});u.tileData[h].objectgroup.objects=C}}}u.updateTileData(c.imagewidth,c.imageheight),s.push(u)}else{var M=new m(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties),E=0;for(y=0;y<c.tiles.length;y++){v=c.tiles[y];var P=v.image,A=parseInt(v.id,10),D=c.firstgid+A,W=v.imagewidth,V=v.imageheight;M.addImage(D,P,W,V),E=Math.max(A,E)}M.maxId=E,l.push(M)}i&&(i.lastgid=c.firstgid-1),i=c}return{tilesets:s,imageCollections:l}};f.exports=a}),57880:(f=>{var x=function(e,o){for(var m=0;m<e.length;m++){var n=e[m],r=m;if(n.name&&n.name!==""&&(r=n.name),Array.isArray(n.wangtiles)&&n.wangtiles.length>0){var a={},t={},s,l,i;if(Array.isArray(n.edgecolors))for(s=0;s<n.edgecolors.length;s++)i=1+s,l=n.edgecolors[s],l.name!==""&&(a[i]=l.name);if(Array.isArray(n.cornercolors))for(s=0;s<n.cornercolors.length;s++)i=1+s,l=n.cornercolors[s],l.name!==""&&(t[i]=l.name);if(Array.isArray(n.colors))for(s=0;s<n.colors.length;s++)l=n.colors[s],i=1+s,l.name!==""&&(a[i]=t[i]=l.name);for(var h=[a,t,a,t,a,t,a,t],d=0;d<n.wangtiles.length;d++){var c=n.wangtiles[d],u=o[c.tileid]||(o[c.tileid]={});u=u.wangid||(u.wangid={});for(var p=[],g=0;g<Math.min(h.length,c.wangid.length);g++){if(l=c.wangid[g],l===0){p.push(void 0);continue}var y=h[g][l];if(y!==void 0){p.push(y);continue}p.push(l)}u[r]=p}}}};f.exports=x}),96761:((f,x,e)=>{f.exports={AssignTileProperties:e(51233),Base64Decode:e(41868),BuildTilesetIndex:e(84101),CreateGroupLayer:e(79677),ParseGID:e(29920),ParseImageLayers:e(12635),ParseJSONTiled:e(46594),ParseObject:e(52205),ParseObjectLayers:e(22611),ParseTileLayers:e(28200),ParseTilesets:e(24619)}}),33385:((f,x,e)=>{var o=e(83419),m=e(37277),n=e(44594),r=e(94880),a=e(72905),t=new o({initialize:function(l){this.scene=l,this.systems=l.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],l.sys.events.once(n.BOOT,this.boot,this),l.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var s=this.systems.events;s.on(n.PRE_UPDATE,this.preUpdate,this),s.on(n.UPDATE,this.update,this),s.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(s){var l;if(s instanceof r){if(l=s,this.removeEvent(l),l.elapsed=l.startAt,l.hasDispatched=!1,l.repeatCount=l.repeat===-1||l.loop?999999999999:l.repeat,l.delay<=0&&l.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else l=new r(s);return this._pendingInsertion.push(l),l},delayedCall:function(s,l,i,h){return this.addEvent({delay:s,callback:l,args:i,callbackScope:h})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(s){Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++){var i=s[l];a(this._pendingRemoval,i),a(this._pendingInsertion,i),a(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var s=this._pendingRemoval.length,l=this._pendingInsertion.length;if(!(s===0&&l===0)){var i,h;for(i=0;i<s;i++){h=this._pendingRemoval[i];var d=this._active.indexOf(h);d>-1&&this._active.splice(d,1),h.destroy()}for(i=0;i<l;i++)h=this._pendingInsertion[i],this._active.push(h);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(s,l){if(this.now=s,!this.paused){l*=this.timeScale;for(var i=0;i<this._active.length;i++){var h=this._active[i];if(!h.paused&&(h.elapsed+=l*h.timeScale,h.elapsed>=h.delay)){var d=h.elapsed-h.delay;if(h.elapsed=h.delay,!h.hasDispatched&&h.callback&&(h.hasDispatched=!0,h.callback.apply(h.callbackScope,h.args)),h.repeatCount>0){if(h.repeatCount--,d>=h.delay)for(;d>=h.delay&&h.repeatCount>0;)h.callback&&h.callback.apply(h.callbackScope,h.args),d-=h.delay,h.repeatCount--;h.elapsed=d,h.hasDispatched=!1}else h.hasDispatched&&this._pendingRemoval.push(h)}}}},shutdown:function(){var s;for(s=0;s<this._pendingInsertion.length;s++)this._pendingInsertion[s].destroy();for(s=0;s<this._active.length;s++)this._active[s].destroy();for(s=0;s<this._pendingRemoval.length;s++)this._pendingRemoval[s].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var l=this.systems.events;l.off(n.PRE_UPDATE,this.preUpdate,this),l.off(n.UPDATE,this.update,this),l.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});m.register("Clock",t,"time"),f.exports=t}),96120:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(39429),r=e(95540),a=e(44594),t=e(89809),s=new o({Extends:m,initialize:function(i,h){m.call(this),this.scene=i,this.systems=i.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var d=this.systems.events;d.on(a.PRE_UPDATE,this.preUpdate,this),d.on(a.UPDATE,this.update,this),d.once(a.SHUTDOWN,this.destroy,this),h&&this.add(h)},preUpdate:function(l,i){this.paused||(this.elapsed+=i*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var l,i=this.events,h=!1,d=this.systems,c;for(l=0;l<i.length;l++){var u=i[l];if(!u.complete&&u.time<=this.elapsed){if(u.complete=!0,this.totalComplete++,c=u.target?u.target:this,u.if&&!u.if.call(c,u))continue;if(u.once&&(h=!0),u.set&&u.target)for(var p in u.set)u.target[p]=u.set[p];this.iteration&&u.repeat++,u.loop&&u.repeat&&u.loop.call(c),u.tween&&(u.tweenInstance=d.tweens.add(u.tween)),u.sound&&(typeof u.sound=="string"?d.sound.play(u.sound):d.sound.play(u.sound.key,u.sound.config)),u.event&&this.emit(u.event,c),u.run&&u.run.call(c),u.stop&&this.stop()}}if(h)for(l=0;l<i.length;l++)i[l].complete&&i[l].once&&(i.splice(l,1),l--);this.totalComplete>=i.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(t.COMPLETE,this)}},play:function(l){return l===void 0&&(l=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,l&&this.reset(),this},pause:function(){this.paused=!0;for(var l=this.events,i=0;i<l.length;i++){var h=l[i];h.tweenInstance&&(h.tweenInstance.paused=!0)}return this},repeat:function(l){return(l===void 0||l===!0)&&(l=-1),l===!1&&(l=0),this.loop=l,this},resume:function(){this.paused=!1;for(var l=this.events,i=0;i<l.length;i++){var h=l[i];h.tweenInstance&&(h.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(l){l===void 0&&(l=!1),this.elapsed=0,l||(this.iteration=0);for(var i=this.events,h=0;h<i.length;h++){var d=i[h];d.complete=!1,l||(d.repeat=0),d.tweenInstance&&d.tweenInstance.stop()}return this.play(!1)},add:function(l){Array.isArray(l)||(l=[l]);var i=this.events,h=0;i.length>0&&(h=i[i.length-1].time);for(var d=0;d<l.length;d++){var c=l[d],u=r(c,"at",0),p=r(c,"in",null);p!==null&&(u=this.elapsed+p);var g=r(c,"from",null);g!==null&&(u=h+g),i.push({complete:!1,time:u,repeat:0,if:r(c,"if",null),run:r(c,"run",null),loop:r(c,"loop",null),event:r(c,"event",null),target:r(c,"target",null),set:r(c,"set",null),tween:r(c,"tween",null),sound:r(c,"sound",null),once:r(c,"once",!1),stop:r(c,"stop",!1)}),h=u}return this.complete=!1,this},clear:function(){for(var l=this.events,i=0;i<l.length;i++){var h=l[i];h.tweenInstance&&h.tweenInstance.stop()}return l=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var l=Math.min(this.totalComplete,this.events.length);return l/this.events.length},destroy:function(){var l=this.systems.events;l.off(a.PRE_UPDATE,this.preUpdate,this),l.off(a.UPDATE,this.update,this),l.off(a.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});n.register("timeline",function(l){return new s(this.scene,l)}),f.exports=s}),94880:((f,x,e)=>{var o=e(83419),m=e(95540),n=new o({initialize:function(a){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(a)},reset:function(r){if(this.delay=m(r,"delay",0),this.repeat=m(r,"repeat",0),this.loop=m(r,"loop",!1),this.callback=m(r,"callback",void 0),this.callbackScope=m(r,"callbackScope",this),this.args=m(r,"args",[]),this.timeScale=m(r,"timeScale",1),this.startAt=m(r,"startAt",0),this.paused=m(r,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var r=this.delay+this.delay*this.repeat,a=this.elapsed+this.delay*(this.repeat-this.repeatCount);return a/r}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(r){r===void 0&&(r=!1),this.elapsed=this.delay,this.hasDispatched=!r,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});f.exports=n}),35945:(f=>{f.exports="complete"}),89809:((f,x,e)=>{f.exports={COMPLETE:e(35945)}}),90291:((f,x,e)=>{f.exports={Clock:e(33385),Events:e(89809),Timeline:e(96120),TimerEvent:e(94880)}}),40382:((f,x,e)=>{var o=e(72905),m=e(83419),n=e(43491),r=e(88032),a=e(37277),t=e(44594),s=e(93109),l=e(86081),i=e(8357),h=e(43960),d=e(26012),c=new m({initialize:function(p){this.scene=p,this.events=p.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(t.BOOT,this.boot,this),this.events.on(t.START,this.start,this)},boot:function(){this.events.once(t.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(t.UPDATE,this.update,this),this.events.once(t.SHUTDOWN,this.shutdown,this)},create:function(u){Array.isArray(u)||(u=[u]);for(var p=[],g=0;g<u.length;g++){var y=u[g];y instanceof l||y instanceof h?p.push(y):Array.isArray(y.tweens)?p.push(d(this,y)):p.push(i(this,y))}return p.length===1?p[0]:p},add:function(u){var p=u,g=this.tweens;return p instanceof l||p instanceof h||(Array.isArray(p.tweens)?p=d(this,p):p=i(this,p)),g.push(p.reset()),p},addMultiple:function(u){for(var p,g=[],y=this.tweens,v=0;v<u.length;v++)p=u[v],p instanceof l||p instanceof h||(Array.isArray(p.tweens)?p=d(this,p):p=i(this,p)),y.push(p.reset()),g.push(p);return g},chain:function(u){var p=d(this,u);return this.tweens.push(p.init()),p},getChainedTweens:function(u){return u.getChainedTweens()},has:function(u){return this.tweens.indexOf(u)>-1},existing:function(u){return this.has(u)||this.tweens.push(u.reset()),this},addCounter:function(u){var p=r(this,u);return this.tweens.push(p.reset()),p},stagger:function(u,p){return s(u,p)},setLagSmooth:function(u,p){return u===void 0&&(u=1/1e-8),p===void 0&&(p=0),this.maxLag=u,this.lagSkip=Math.min(p,this.maxLag),this},setFps:function(u){return u===void 0&&(u=240),this.gap=1e3/u,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(u){var p=Date.now()-this.prevTime;p>this.maxLag&&(this.startTime+=p-this.lagSkip),this.prevTime+=p;var g=this.prevTime-this.startTime,y=g-this.nextTime,v=g-this.time*1e3;return y>0||u?(g/=1e3,this.time=g,this.nextTime+=y+(y>=this.gap?4:this.gap-y)):v=0,v},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(u){u===void 0&&(u=!1);var p=this.getDelta(u);if(!(p<=0)){this.processing=!0;var g,y,v=[],S=this.tweens;for(g=0;g<S.length;g++)y=S[g],y.update(p)&&v.push(y);var w=v.length;if(w&&S.length>0){for(g=0;g<w;g++){y=v[g];var T=S.indexOf(y);T>-1&&(y.isPendingRemove()||y.isDestroyed())&&(S.splice(T,1),y.destroy())}v.length=0}this.processing=!1}},remove:function(u){return this.processing?u.setPendingRemoveState():(o(this.tweens,u),u.setRemovedState()),this},reset:function(u){return this.existing(u),u.seek(),u.setActiveState(),this},makeActive:function(u){return this.existing(u),u.setActiveState(),this},each:function(u,p){var g,y=[null];for(g=1;g<arguments.length;g++)y.push(arguments[g]);return this.tweens.forEach(function(v){y[0]=v,u.apply(p,y)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(u){var p=[],g=this.tweens;Array.isArray(u)?u=n(u):u=[u];for(var y=u.length,v=0;v<g.length;v++)for(var S=g[v],w=0;w<y;w++)!S.isDestroyed()&&S.hasTarget(u[w])&&p.push(S);return p},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(u){return this.timeScale=u,this},isTweening:function(u){for(var p=this.tweens,g,y=0;y<p.length;y++)if(g=p[y],g.isPlaying()&&g.hasTarget(u))return!0;return!1},killAll:function(){for(var u=this.processing?this.getTweens():this.tweens,p=0;p<u.length;p++)u[p].destroy();return this.processing||(u.length=0),this},killTweensOf:function(u){for(var p=this.getTweensOf(u),g=0;g<p.length;g++)p[g].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(t.UPDATE,this.update,this),this.events.off(t.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(t.START,this.start,this),this.scene=null,this.events=null}});a.register("TweenManager",c,"tweens"),f.exports=c}),57355:(f=>{var x=function(e,o,m){return e&&e.hasOwnProperty(o)?e[o]:m};f.exports=x}),6113:((f,x,e)=>{var o=e(62640),m=e(35355),n=function(r,a){var t=o.Power0;if(typeof r=="string")if(o.hasOwnProperty(r))t=o[r];else{var s="";if(r.indexOf(".")){s=r.substring(r.indexOf(".")+1);var l=s.toLowerCase();l==="in"?s="easeIn":l==="out"?s="easeOut":l==="inout"&&(s="easeInOut")}r=m(r.substring(0,r.indexOf(".")+1)+s),o.hasOwnProperty(r)&&(t=o[r])}else typeof r=="function"&&(t=r);if(!a)return t;var i=a.slice(0);return i.unshift(0),function(h){return i[0]=h,t.apply(this,i)}};f.exports=n}),91389:((f,x,e)=>{var o=e(89318),m=e(77259),n=e(28392),r={bezier:o,catmull:m,catmullrom:m,linear:n},a=function(t){if(t===null)return null;var s=r.linear;return typeof t=="string"?r.hasOwnProperty(t)&&(s=r[t]):typeof t=="function"&&(s=t),s};f.exports=a}),55292:(f=>{var x=function(e,o,m){var n;if(e.hasOwnProperty(o)){var r=typeof e[o];r==="function"?n=function(a,t,s,l,i,h){return e[o](a,t,s,l,i,h)}:n=function(){return e[o]}}else typeof m=="function"?n=m:n=function(){return m};return n};f.exports=x}),82985:((f,x,e)=>{var o=e(81076),m=function(n){var r,a=[];if(n.hasOwnProperty("props"))for(r in n.props)r.substring(0,1)!=="_"&&a.push({key:r,value:n.props[r]});else for(r in n)o.indexOf(r)===-1&&r.substring(0,1)!=="_"&&a.push({key:r,value:n[r]});return a};f.exports=m}),62329:((f,x,e)=>{var o=e(35154),m=function(n){var r=o(n,"targets",null);return r===null||(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r])),r};f.exports=m}),17777:((f,x,e)=>{var o=e(30976),m=e(99472);function n(l){return!!l.getActive&&typeof l.getActive=="function"}function r(l){return!!l.getStart&&typeof l.getStart=="function"}function a(l){return!!l.getEnd&&typeof l.getEnd=="function"}function t(l){return r(l)||a(l)||n(l)}var s=function(l,i){var h,d=function(K,X,R){return R},c=function(K,X,R){return R},u=null,p=typeof i;if(p==="number")d=function(){return i};else if(Array.isArray(i))c=function(){return i[0]},d=function(){return i[i.length-1]};else if(p==="string"){var g=i.toLowerCase(),y=g.substring(0,6)==="random",v=g.substring(0,3)==="int";if(y||v){var S=g.indexOf("("),w=g.indexOf(")"),T=g.indexOf(",");if(S&&w&&T){var C=parseFloat(g.substring(S+1,T)),M=parseFloat(g.substring(T+1,w));y?d=function(){return m(C,M)}:d=function(){return o(C,M)}}else throw new Error("invalid random() format")}else{g=g[0];var E=parseFloat(i.substr(2));switch(g){case"+":d=function(K,X,R){return R+E};break;case"-":d=function(K,X,R){return R-E};break;case"*":d=function(K,X,R){return R*E};break;case"/":d=function(K,X,R){return R/E};break;default:d=function(){return parseFloat(i)}}}}else if(p==="function")d=i;else if(p==="object")if(t(i))n(i)&&(u=i.getActive),a(i)&&(d=i.getEnd),r(i)&&(c=i.getStart);else if(i.hasOwnProperty("value"))h=s(l,i.value);else{var P=i.hasOwnProperty("to"),A=i.hasOwnProperty("from"),D=i.hasOwnProperty("start");if(P&&(A||D)){if(h=s(l,i.to),D){var W=s(l,i.start);h.getActive=W.getEnd}if(A){var V=s(l,i.from);h.getStart=V.getEnd}}}return h||(h={getActive:u,getEnd:d,getStart:c}),h};f.exports=s}),88032:((f,x,e)=>{var o=e(70402),m=e(69902),n=e(23568),r=e(57355),a=e(6113),t=e(95540),s=e(55292),l=e(35154),i=e(17777),h=e(269),d=e(86081),c=function(u,p,g){if(p instanceof d)return p.parent=u,p;g===void 0?g=m:g=h(m,g);var y=t(p,"from",0),v=t(p,"to",1),S=[{value:y}],w=t(p,"delay",g.delay),T=t(p,"easeParams",g.easeParams),C=t(p,"ease",g.ease),M=i("value",v),E=new d(u,S),P=E.add(0,"value",M.getEnd,M.getStart,M.getActive,a(t(p,"ease",C),t(p,"easeParams",T)),s(p,"delay",w),t(p,"duration",g.duration),r(p,"yoyo",g.yoyo),t(p,"hold",g.hold),t(p,"repeat",g.repeat),t(p,"repeatDelay",g.repeatDelay),!1,!1);P.start=y,P.current=y,E.completeDelay=n(p,"completeDelay",0),E.loop=Math.round(n(p,"loop",0)),E.loopDelay=Math.round(n(p,"loopDelay",0)),E.paused=r(p,"paused",!1),E.persist=r(p,"persist",!1),E.isNumberTween=!0,E.callbackScope=l(p,"callbackScope",E);for(var A=o.TYPES,D=0;D<A.length;D++){var W=A[D],V=l(p,W,!1);if(V){var K=l(p,W+"Params",[]);E.setCallback(W,V,K)}}return E};f.exports=c}),93109:((f,x,e)=>{var o=e(6113),m=e(35154),n=e(36383),r=function(a,t){t===void 0&&(t={});var s,l=m(t,"start",0),i=m(t,"ease",null),h=m(t,"grid",null),d=m(t,"from",0),c=d==="first",u=d==="center",p=d==="last",g=typeof d=="number",y=Array.isArray(a),v=parseFloat(y?a[0]:a),S=y?parseFloat(a[1]):0,w=Math.max(v,S);if(y&&(l+=v),h){var T=h[0],C=h[1],M=0,E=0,P=0,A=0,D=[];p?(M=T-1,E=C-1):g?(M=d%T,E=Math.floor(d/T)):u&&(M=(T-1)/2,E=(C-1)/2);for(var W=n.MIN_SAFE_INTEGER,V=0;V<C;V++){D[V]=[];for(var K=0;K<T;K++){P=M-K,A=E-V;var X=Math.sqrt(P*P+A*A);X>W&&(W=X),D[V][K]=X}}}var R=i?o(i):null;return h?s=function(H,L,N,z){var U=0,Y=z%T,$=Math.floor(z/T);Y>=0&&Y<T&&$>=0&&$<C&&(U=D[$][Y]);var Z;if(y){var Q=S-v;R?Z=U/W*Q*R(U/W):Z=U/W*Q}else R?Z=U*v*R(U/W):Z=U*v;return Z+l}:s=function(H,L,N,z,U){U--;var Y;c?Y=z:u?Y=Math.abs(U/2-z):p?Y=U-z:g&&(Y=Math.abs(d-z));var $;if(y){var Z;u?Z=(S-v)/U*(Y*2):Z=(S-v)/U*Y,R?$=Z*R(Y/U):$=Z}else R?$=U*w*R(Y/U):$=Y*v;return $+l},s};f.exports=r}),8357:((f,x,e)=>{var o=e(70402),m=e(69902),n=e(23568),r=e(57355),a=e(6113),t=e(95540),s=e(91389),l=e(55292),i=e(82985),h=e(62329),d=e(35154),c=e(17777),u=e(269),p=e(86081),g=function(y,v,S){if(v instanceof p)return v.parent=y,v;S===void 0?S=m:S=u(m,S);var w=h(v);!w&&S.targets&&(w=S.targets);for(var T=i(v),C=t(v,"delay",S.delay),M=t(v,"duration",S.duration),E=t(v,"easeParams",S.easeParams),P=t(v,"ease",S.ease),A=t(v,"hold",S.hold),D=t(v,"repeat",S.repeat),W=t(v,"repeatDelay",S.repeatDelay),V=r(v,"yoyo",S.yoyo),K=r(v,"flipX",S.flipX),X=r(v,"flipY",S.flipY),R=t(v,"interpolation",S.interpolation),H=function(_,te,se,ie){if(se==="texture"){var ne=ie,he=void 0;Array.isArray(ie)?(ne=ie[0],he=ie[1]):ie.hasOwnProperty("value")?(ne=ie.value,Array.isArray(ie.value)?(ne=ie.value[0],he=ie.value[1]):typeof ie.value=="string"&&(ne=ie.value)):typeof ie=="string"&&(ne=ie),_.addFrame(te,ne,he,l(ie,"delay",C),t(ie,"duration",M),t(ie,"hold",A),t(ie,"repeat",D),t(ie,"repeatDelay",W),r(ie,"flipX",K),r(ie,"flipY",X))}else{var ue=c(se,ie),ae=s(t(ie,"interpolation",R));_.add(te,se,ue.getEnd,ue.getStart,ue.getActive,a(t(ie,"ease",P),t(ie,"easeParams",E)),l(ie,"delay",C),t(ie,"duration",M),r(ie,"yoyo",V),t(ie,"hold",A),t(ie,"repeat",D),t(ie,"repeatDelay",W),r(ie,"flipX",K),r(ie,"flipY",X),ae,ae?ie:null)}},L=new p(y,w),N=0;N<T.length;N++)for(var z=T[N].key,U=T[N].value,Y=0;Y<w.length;Y++)z==="scale"&&!w[Y].hasOwnProperty("scale")?(H(L,Y,"scaleX",U),H(L,Y,"scaleY",U)):H(L,Y,z,U);L.completeDelay=n(v,"completeDelay",0),L.loop=Math.round(n(v,"loop",0)),L.loopDelay=Math.round(n(v,"loopDelay",0)),L.paused=r(v,"paused",!1),L.persist=r(v,"persist",!1),L.callbackScope=t(v,"callbackScope",L);for(var $=o.TYPES,Z=0;Z<$.length;Z++){var Q=$[Z],q=d(v,Q,!1);if(q){var j=d(v,Q+"Params",[]);L.setCallback(Q,q,j)}}return L};f.exports=g}),26012:((f,x,e)=>{var o=e(70402),m=e(23568),n=e(57355),r=e(62329),a=e(35154),t=e(8357),s=e(43960),l=function(i,h){if(h instanceof s)return h.parent=i,h;var d=new s(i);d.startDelay=a(h,"delay",0),d.completeDelay=m(h,"completeDelay",0),d.loop=Math.round(m(h,"loop",a(h,"repeat",0))),d.loopDelay=Math.round(m(h,"loopDelay",a(h,"repeatDelay",0))),d.paused=n(h,"paused",!1),d.persist=n(h,"persist",!1),d.callbackScope=a(h,"callbackScope",d);var c,u=o.TYPES;for(c=0;c<u.length;c++){var p=u[c],g=a(h,p,!1);if(g){var y=a(h,p+"Params",[]);d.setCallback(p,g,y)}}var v=a(h,"tweens",null);if(Array.isArray(v)){var S=[],w=r(h),T=void 0;for(w&&(T={targets:w}),c=0;c<v.length;c++)S.push(t(d,v[c],T));d.add(S)}return d};f.exports=l}),30231:((f,x,e)=>{f.exports={GetBoolean:e(57355),GetEaseFunction:e(6113),GetInterpolationFunction:e(91389),GetNewValue:e(55292),GetProps:e(82985),GetTargets:e(62329),GetValueOp:e(17777),NumberTweenBuilder:e(88032),StaggerBuilder:e(93109),TweenBuilder:e(8357)}}),73685:(f=>{f.exports="active"}),98540:(f=>{f.exports="complete"}),67233:(f=>{f.exports="loop"}),2859:(f=>{f.exports="pause"}),98336:(f=>{f.exports="repeat"}),25764:(f=>{f.exports="resume"}),32193:(f=>{f.exports="start"}),84371:(f=>{f.exports="stop"}),70766:(f=>{f.exports="update"}),55659:(f=>{f.exports="yoyo"}),842:((f,x,e)=>{f.exports={TWEEN_ACTIVE:e(73685),TWEEN_COMPLETE:e(98540),TWEEN_LOOP:e(67233),TWEEN_PAUSE:e(2859),TWEEN_RESUME:e(25764),TWEEN_REPEAT:e(98336),TWEEN_START:e(32193),TWEEN_STOP:e(84371),TWEEN_UPDATE:e(70766),TWEEN_YOYO:e(55659)}}),43066:((f,x,e)=>{var o={States:e(86353),Builders:e(30231),Events:e(842),TweenManager:e(40382),Tween:e(86081),TweenData:e(48177),TweenFrameData:e(42220),BaseTween:e(70402),TweenChain:e(43960)};f.exports=o}),70402:((f,x,e)=>{var o=e(83419),m=e(50792),n=e(842),r=e(86353),a=new o({Extends:m,initialize:function(s){m.call(this),this.parent=s,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=r.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(n.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(n.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(n.TWEEN_COMPLETE,"onComplete")},complete:function(t){return t===void 0&&(t=0),t?(this.setCompleteDelayState(),this.countdown=t):this.onCompleteHandler(),this},completeAfterLoop:function(t){return t===void 0&&(t=0),this.loopCounter>t&&(this.loopCounter=t),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(n.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(t){this.countdown-=t,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(n.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(t){return this.countdown-=t,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(n.TWEEN_START,"onStart"),t=0),t},updateCompleteDelay:function(t){this.countdown-=t,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(t,s,l){return l===void 0&&(l=[]),this.callbacks.hasOwnProperty(t)&&(this.callbacks[t]={func:s,params:l}),this},setPendingState:function(){this.state=r.PENDING},setActiveState:function(){this.state=r.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=r.LOOP_DELAY},setCompleteDelayState:function(){this.state=r.COMPLETE_DELAY},setStartDelayState:function(){this.state=r.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=r.PENDING_REMOVE},setRemovedState:function(){this.state=r.REMOVED},setFinishedState:function(){this.state=r.FINISHED},setDestroyedState:function(){this.state=r.DESTROYED},isPending:function(){return this.state===r.PENDING},isActive:function(){return this.state===r.ACTIVE},isLoopDelayed:function(){return this.state===r.LOOP_DELAY},isCompleteDelayed:function(){return this.state===r.COMPLETE_DELAY},isStartDelayed:function(){return this.state===r.START_DELAY},isPendingRemove:function(){return this.state===r.PENDING_REMOVE},isRemoved:function(){return this.state===r.REMOVED},isFinished:function(){return this.state===r.FINISHED},isDestroyed:function(){return this.state===r.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(t){t.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});a.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],f.exports=a}),95042:((f,x,e)=>{var o=e(83419),m=e(842),n=e(86353),r=new o({initialize:function(t,s,l,i,h,d,c,u,p,g){this.tween=t,this.targetIndex=s,this.duration=i<=0?.01:i,this.totalDuration=0,this.delay=0,this.getDelay=l,this.yoyo=h,this.hold=d,this.repeat=c,this.repeatDelay=u,this.repeatCounter=0,this.flipX=p,this.flipY=g,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(a){a===void 0&&(a=this.current),this.tween.targets[this.targetIndex][this.key]=a},setCreatedState:function(){this.state=n.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=n.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=n.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=n.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=n.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=n.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=n.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=n.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===n.CREATED},isDelayed:function(){return this.state===n.DELAY},isPendingRender:function(){return this.state===n.PENDING_RENDER},isPlayingForward:function(){return this.state===n.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===n.PLAYING_BACKWARD},isHolding:function(){return this.state===n.HOLD_DELAY},isRepeating:function(){return this.state===n.REPEAT_DELAY},isComplete:function(){return this.state===n.COMPLETE},setStateFromEnd:function(a){this.yoyo?this.onRepeat(a,!0,!0):this.repeatCounter>0?this.onRepeat(a,!0,!1):this.setCompleteState()},setStateFromStart:function(a){this.repeatCounter>0?this.onRepeat(a,!1):this.setCompleteState()},reset:function(){var a=this.tween,t=a.totalTargets,s=this.targetIndex,l=a.targets[s],i=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(l,i,0,s,t,a),this.repeatCounter=this.repeat===-1?n.MAX:this.repeat,this.setPendingRenderState();var h=this.duration+this.hold;this.yoyo&&(h+=this.duration);var d=h+this.repeatDelay;this.totalDuration=this.delay+h,this.repeat===-1?(this.totalDuration+=d*n.MAX,a.isInfinite=!0):this.repeat>0&&(this.totalDuration+=d*this.repeat),this.totalDuration>a.duration&&(a.duration=this.totalDuration),this.delay<a.startDelay&&(a.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(a,t,s){var l=this.tween,i=l.totalTargets,h=this.targetIndex,d=l.targets[h],c=this.key,u=c!=="texture";if(this.elapsed=a,this.progress=a/this.duration,this.flipX&&d.toggleFlipX(),this.flipY&&d.toggleFlipY(),u&&(t||s)&&(this.start=this.getStartValue(d,c,this.start,h,i,l)),s){this.setPlayingBackwardState(),this.dispatchEvent(m.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,u&&(this.end=this.getEndValue(d,c,this.start,h,i,l)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-a,u&&(this.current=this.start,d[c]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(m.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});f.exports=r}),69902:(f=>{var x={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};f.exports=x}),81076:(f=>{f.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),86081:((f,x,e)=>{var o=e(70402),m=e(83419),n=e(842),r=e(44603),a=e(39429),t=e(36383),s=e(86353),l=e(48177),i=e(42220),h=new m({Extends:o,initialize:function(c,u){o.call(this,c),this.targets=u,this.totalTargets=u.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(d,c,u,p,g,y,v,S,w,T,C,M,E,P,A,D){var W=new l(this,d,c,u,p,g,y,v,S,w,T,C,M,E,P,A,D);return this.totalData=this.data.push(W),W},addFrame:function(d,c,u,p,g,y,v,S,w,T){var C=new i(this,d,c,u,p,g,y,v,S,w,T);return this.totalData=this.data.push(C),C},getValue:function(d){d===void 0&&(d=0);var c=null;return this.data&&(c=this.data[d].current),c},hasTarget:function(d){return this.targets&&this.targets.indexOf(d)!==-1},updateTo:function(d,c,u){if(u===void 0&&(u=!1),d!=="texture")for(var p=0;p<this.totalData;p++){var g=this.data[p];g.key===d&&(g.isPlayingForward()||g.isPlayingBackward())&&(g.end=c,u&&(g.start=g.current))}return this},restart:function(){switch(this.state){case s.REMOVED:case s.FINISHED:this.seek(),this.parent.makeActive(this);break;case s.PENDING:case s.PENDING_REMOVE:this.parent.reset(this);break;case s.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(n.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,o.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(d,c,u){if(d===void 0&&(d=0),c===void 0&&(c=16.6),u===void 0&&(u=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;u||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive");var p=this.paused;if(this.paused=!1,d>0){for(var g=Math.floor(d/c),y=d-g*c,v=0;v<g;v++)this.update(c);y>0&&this.update(y)}return this.paused=p,this.isSeeking=!1,this},initTweenData:function(d){d===void 0&&(d=!1),this.duration=0,this.startDelay=t.MAX_SAFE_INTEGER;for(var c=this.data,u=0;u<this.totalData;u++)c[u].reset(d);this.duration=Math.max(this.duration,.01);var p=this.duration,g=this.completeDelay,y=this.loopCounter,v=this.loopDelay;y>0?this.totalDuration=p+g+(p+v)*y:this.totalDuration=p+g},reset:function(d){return d===void 0&&(d=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=s.MAX),d||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive")),this},update:function(d){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(d*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(d),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(d),!1;this.hasStarted||(this.startDelay-=d,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(n.TWEEN_START,"onStart"),d=0));var c=!1;if(this.isActive())for(var u=this.data,p=0;p<this.totalData;p++)u[p].update(d)&&(c=!0);this.elapsed+=d,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=d,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),c||this.nextState();var g=this.isPendingRemove();return g&&this.persist&&(this.setFinishedState(),g=!1),g},forward:function(d){return this.update(d),this},rewind:function(d){return this.update(-d),this},dispatchEvent:function(d,c){if(!this.isSeeking){if(this.emit(d,this,this.targets),!this.callbacks)return;var u=this.callbacks[c];u&&u.func.apply(this.callbackScope,[this,this.targets].concat(u.params))}},destroy:function(){o.prototype.destroy.call(this),this.targets=null}});a.register("tween",function(d){return this.scene.sys.tweens.add(d)}),r.register("tween",function(d){return this.scene.sys.tweens.create(d)}),f.exports=h}),43960:((f,x,e)=>{var o=e(72905),m=e(70402),n=e(83419),r=e(842),a=e(44603),t=e(39429),s=e(86353),l=new n({Extends:m,initialize:function(h){m.call(this,h),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?s.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(i){var h=this.parent.create(i);Array.isArray(h)||(h=[h]);for(var d=this.data,c=0;c<h.length;c++){var u=h[c];u.parent=this,d.push(u.reset())}return this.totalData=d.length,this},remove:function(i){return o(this.data,i),i.setRemovedState(),i===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(i){for(var h=this.data,d=0;d<this.totalData;d++)if(h[d].hasTarget(i))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(i){return i.seek(),i.setActiveState(),this},makeActive:function(i){return i.reset(),i.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(r.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var i=this.data,h=this.totalData,d=0;d<h;d++)i[d].reset(!1);this.setCurrentTween(0)},update:function(i){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(i*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(i),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(i),!1;this.hasStarted||(this.startDelay-=i,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(r.TWEEN_START,"onStart"),i=0));var h=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(i)&&this.nextTween()&&this.nextState(),h=this.isPendingRemove(),h&&this.persist&&(this.setFinishedState(),h=!1)),h},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(i){this.currentIndex=i,this.currentTween=this.data[i],this.currentTween.setActiveState()},dispatchEvent:function(i,h){this.emit(i,this);var d=this.callbacks[h];d&&d.func.apply(this.callbackScope,[this].concat(d.params))},destroy:function(){m.prototype.destroy.call(this),this.currentTween=null}});t.register("tweenchain",function(i){return this.scene.sys.tweens.chain(i)}),a.register("tweenchain",function(i){return this.scene.sys.tweens.create(i)}),f.exports=l}),48177:((f,x,e)=>{var o=e(95042),m=e(45319),n=e(83419),r=e(842),a=new n({Extends:o,initialize:function(s,l,i,h,d,c,u,p,g,y,v,S,w,T,C,M,E){o.call(this,s,l,p,g,y,v,S,w,T,C),this.key=i,this.getActiveValue=c,this.getEndValue=h,this.getStartValue=d,this.ease=u,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=M,this.interpolationData=E},reset:function(t){o.prototype.reset.call(this);var s=this.tween.targets[this.targetIndex],l=this.key;t&&(s[l]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(s[l]=this.getActiveValue(s,l,0))},update:function(t){var s=this.tween,l=s.totalTargets,i=this.targetIndex,h=s.targets[i],d=this.key;if(!h)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=t,this.elapsed<=0&&(this.elapsed=0,t=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(h,d,h[d],i,l,s),this.end=this.getEndValue(h,d,this.start,i,l,s),this.current=this.start,h[d]=this.start,this.setPlayingForwardState(),!0;var c=this.isPlayingForward(),u=this.isPlayingBackward();if(c||u){var p=this.elapsed,g=this.duration,y=0,v=!1;p+=t,p>=g?(y=p-g,p=g,v=!0):p<0&&(p=0);var S=m(p/g,0,1);this.elapsed=p,this.progress=S,this.previous=this.current,c||(S=1-S);var w=this.ease(S);this.interpolation?this.current=this.interpolation(this.interpolationData,w):this.current=this.start+(this.end-this.start)*w,h[d]=this.current,v&&(c?(s.isNumberTween&&(this.current=this.end,h[d]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(y)):(s.isNumberTween&&(this.current=this.start,h[d]=this.current),this.setStateFromStart(y))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(t,s){var l=this.tween;if(!l.isSeeking){var i=l.targets[this.targetIndex],h=this.key,d=this.current,c=this.previous;l.emit(t,l,h,i,d,c);var u=l.callbacks[s];u&&u.func.apply(l.callbackScope,[l,i,h,d,c].concat(u.params))}},destroy:function(){o.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});f.exports=a}),42220:((f,x,e)=>{var o=e(95042),m=e(45319),n=e(83419),r=e(842),a=new n({Extends:o,initialize:function(s,l,i,h,d,c,u,p,g,y,v){o.call(this,s,l,d,c,!1,u,p,g,y,v),this.key="texture",this.startTexture=null,this.endTexture=i,this.startFrame=null,this.endFrame=h,this.yoyo=p!==0},reset:function(t){o.prototype.reset.call(this);var s=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=s.texture.key,this.startFrame=s.frame.name),t&&s.setTexture(this.startTexture,this.startFrame)},update:function(t){var s=this.tween,l=this.targetIndex,i=s.targets[l];if(!i)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=t,this.elapsed<=0&&(this.elapsed=0,t=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&i.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var h=this.isPlayingForward(),d=this.isPlayingBackward();if(h||d){var c=this.elapsed,u=this.duration,p=0,g=!1;c+=t,c>=u?(p=c-u,c=u,g=!0):c<0&&(c=0);var y=m(c/u,0,1);this.elapsed=c,this.progress=y,g&&(h?(i.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(p)):(i.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(p))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(t,s){var l=this.tween;if(!l.isSeeking){var i=l.targets[this.targetIndex],h=this.key;l.emit(t,l,h,i);var d=l.callbacks[s];d&&d.func.apply(l.callbackScope,[l,i,h].concat(d.params))}},destroy:function(){o.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});f.exports=a}),86353:(f=>{var x={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};f.exports=x}),83419:(f=>{function x(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}function e(a,t,s){var l=s?a[t]:Object.getOwnPropertyDescriptor(a,t);return!s&&l.value&&typeof l.value=="object"&&(l=l.value),l&&x(l)?(typeof l.enumerable>"u"&&(l.enumerable=!0),typeof l.configurable>"u"&&(l.configurable=!0),l):!1}function o(a,t){var s=Object.getOwnPropertyDescriptor(a,t);return s?(s.value&&typeof s.value=="object"&&(s=s.value),s.configurable===!1):!1}function m(a,t,s,l){for(var i in t)if(t.hasOwnProperty(i)){var h=e(t,i,s);if(h!==!1){var d=l||a;if(o(d.prototype,i)){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+i+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(a.prototype,i,h)}else a.prototype[i]=t[i]}}function n(a,t){if(t){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++)m(a,t[s].prototype||t[s])}}function r(a){a||(a={});var t,s;if(a.initialize){if(typeof a.initialize!="function")throw new Error("initialize must be a function");t=a.initialize,delete a.initialize}else if(a.Extends){var l=a.Extends;t=function(){l.apply(this,arguments)}}else t=function(){};a.Extends?(t.prototype=Object.create(a.Extends.prototype),t.prototype.constructor=t,s=a.Extends,delete a.Extends):t.prototype.constructor=t;var i=null;return a.Mixins&&(i=a.Mixins,delete a.Mixins),n(t,i),m(t,a,!0,s),t}r.extend=m,r.mixin=n,r.ignoreFinals=!1,f.exports=r}),29747:(f=>{var x=function(){};f.exports=x}),20242:(f=>{var x=function(){return null};f.exports=x}),71146:(f=>{var x=function(e,o,m,n,r){if(r===void 0&&(r=e),m>0){var a=m-e.length;if(a<=0)return null}if(!Array.isArray(o))return e.indexOf(o)===-1?(e.push(o),n&&n.call(r,o),o):null;for(var t=o.length-1;t>=0;)e.indexOf(o[t])!==-1&&o.splice(t,1),t--;if(t=o.length,t===0)return null;m>0&&t>a&&(o.splice(a),t=a);for(var s=0;s<t;s++){var l=o[s];e.push(l),n&&n.call(r,l)}return o};f.exports=x}),51067:(f=>{var x=function(e,o,m,n,r,a){if(m===void 0&&(m=0),a===void 0&&(a=e),n>0){var t=n-e.length;if(t<=0)return null}if(!Array.isArray(o))return e.indexOf(o)===-1?(e.splice(m,0,o),r&&r.call(a,o),o):null;for(var s=o.length-1;s>=0;)e.indexOf(o[s])!==-1&&o.pop(),s--;if(s=o.length,s===0)return null;n>0&&s>t&&(o.splice(t),s=t);for(var l=s-1;l>=0;l--){var i=o[l];e.splice(m,0,i),r&&r.call(a,i)}return o};f.exports=x}),66905:(f=>{var x=function(e,o){var m=e.indexOf(o);return m!==-1&&m<e.length&&(e.splice(m,1),e.push(o)),o};f.exports=x}),21612:((f,x,e)=>{var o=e(82011),m=function(n,r,a,t,s){t===void 0&&(t=0),s===void 0&&(s=n.length);var l=0;if(o(n,t,s))for(var i=t;i<s;i++){var h=n[i];h[r]===a&&l++}return l};f.exports=m}),95428:(f=>{var x=function(e,o,m){var n,r=[null];for(n=3;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<e.length;n++)r[0]=e[n],o.apply(m,r);return e};f.exports=x}),36914:((f,x,e)=>{var o=e(82011),m=function(n,r,a,t,s){if(t===void 0&&(t=0),s===void 0&&(s=n.length),o(n,t,s)){var l,i=[null];for(l=5;l<arguments.length;l++)i.push(arguments[l]);for(l=t;l<s;l++)i[0]=n[l],r.apply(a,i)}return n};f.exports=m}),81957:(f=>{var x=function(e,o,m){if(o.length){if(o.length===1)return o[0]}else return NaN;var n=1,r,a;if(m){if(e<o[0][m])return o[0];for(;o[n][m]<e;)n++}else for(;o[n]<e;)n++;return n>o.length&&(n=o.length),m?(r=o[n-1][m],a=o[n][m],a-e<=e-r?o[n]:o[n-1]):(r=o[n-1],a=o[n],a-e<=e-r?a:r)};f.exports=x}),43491:(f=>{var x=function(e,o){o===void 0&&(o=[]);for(var m=0;m<e.length;m++)Array.isArray(e[m])?x(e[m],o):o.push(e[m]);return o};f.exports=x}),46710:((f,x,e)=>{var o=e(82011),m=function(n,r,a,t,s){t===void 0&&(t=0),s===void 0&&(s=n.length);var l=[];if(o(n,t,s))for(var i=t;i<s;i++){var h=n[i];(!r||r&&a===void 0&&h.hasOwnProperty(r)||r&&a!==void 0&&h[r]===a)&&l.push(h)}return l};f.exports=m}),58731:((f,x,e)=>{var o=e(82011),m=function(n,r,a,t,s){if(t===void 0&&(t=0),s===void 0&&(s=n.length),t!==-1){if(o(n,t,s))for(var l=t;l<s;l++){var i=n[l];if(!r||r&&a===void 0&&i.hasOwnProperty(r)||r&&a!==void 0&&i[r]===a)return i}}else if(o(n,0,s))for(var l=s;l>=0;l--){var i=n[l];if(!r||r&&a===void 0&&i.hasOwnProperty(r)||r&&a!==void 0&&i[r]===a)return i}return null};f.exports=m}),26546:(f=>{var x=function(e,o,m){o===void 0&&(o=0),m===void 0&&(m=e.length);var n=o+Math.floor(Math.random()*m);return e[n]===void 0?null:e[n]};f.exports=x}),85835:(f=>{var x=function(e,o,m){if(o===m)return e;var n=e.indexOf(o),r=e.indexOf(m);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return n>r||(e.splice(n,1),r=e.indexOf(m),e.splice(r+1,0,o)),e};f.exports=x}),83371:(f=>{var x=function(e,o,m){if(o===m)return e;var n=e.indexOf(o),r=e.indexOf(m);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return n<r||(e.splice(n,1),r===0?e.unshift(o):e.splice(r,0,o)),e};f.exports=x}),70864:(f=>{var x=function(e,o){var m=e.indexOf(o);if(m>0){var n=e[m-1],r=e.indexOf(n);e[m]=n,e[r]=o}return e};f.exports=x}),69693:(f=>{var x=function(e,o,m){var n=e.indexOf(o);if(n===-1||m<0||m>=e.length)throw new Error("Supplied index out of bounds");return n!==m&&(e.splice(n,1),e.splice(m,0,o)),o};f.exports=x}),40853:(f=>{var x=function(e,o){var m=e.indexOf(o);if(m!==-1&&m<e.length-1){var n=e[m+1],r=e.indexOf(n);e[m]=n,e[r]=o}return e};f.exports=x}),20283:(f=>{var x=function(e,o,m,n){var r=[],a,t=!1;if((m||n)&&(t=!0,m||(m=""),n||(n="")),o<e)for(a=e;a>=o;a--)t?r.push(m+a.toString()+n):r.push(a);else for(a=e;a<=o;a++)t?r.push(m+a.toString()+n):r.push(a);return r};f.exports=x}),593:((f,x,e)=>{var o=e(2284),m=function(n,r,a){n===void 0&&(n=0),r===void 0&&(r=null),a===void 0&&(a=1),r===null&&(r=n,n=0);for(var t=[],s=Math.max(o((r-n)/(a||1)),0),l=0;l<s;l++)t.push(n),n+=a;return t};f.exports=m}),43886:(f=>{function x(m,n,r){var a=m[n];m[n]=m[r],m[r]=a}function e(m,n){return m<n?-1:m>n?1:0}var o=function(m,n,r,a,t){for(r===void 0&&(r=0),a===void 0&&(a=m.length-1),t===void 0&&(t=e);a>r;){if(a-r>600){var s=a-r+1,l=n-r+1,i=Math.log(s),h=.5*Math.exp(2*i/3),d=.5*Math.sqrt(i*h*(s-h)/s)*(l-s/2<0?-1:1),c=Math.max(r,Math.floor(n-l*h/s+d)),u=Math.min(a,Math.floor(n+(s-l)*h/s+d));o(m,n,c,u,t)}var p=m[n],g=r,y=a;for(x(m,r,n),t(m[a],p)>0&&x(m,r,a);g<y;){for(x(m,g,y),g++,y--;t(m[g],p)<0;)g++;for(;t(m[y],p)>0;)y--}t(m[r],p)===0?x(m,r,y):(y++,x(m,y,a)),y<=n&&(r=y+1),n<=y&&(a=y-1)}};f.exports=o}),88492:((f,x,e)=>{var o=e(35154),m=e(33680),n=function(a,t,s){for(var l=[],i=0;i<a.length;i++)for(var h=0;h<t.length;h++)for(var d=0;d<s;d++)l.push({a:a[i],b:t[h]});return l},r=function(a,t,s){var l=o(s,"max",0),i=o(s,"qty",1),h=o(s,"random",!1),d=o(s,"randomB",!1),c=o(s,"repeat",0),u=o(s,"yoyo",!1),p=[];if(d&&m(t),c===-1)if(l===0)c=0;else{var g=a.length*t.length*i;u&&(g*=2),c=Math.ceil(l/g)}for(var y=0;y<=c;y++){var v=n(a,t,i);h&&m(v),p=p.concat(v),u&&(v.reverse(),p=p.concat(v))}return l&&p.splice(l),p};f.exports=r}),72905:((f,x,e)=>{var o=e(19133),m=function(n,r,a,t){t===void 0&&(t=n);var s;if(!Array.isArray(r))return s=n.indexOf(r),s!==-1?(o(n,s),a&&a.call(t,r),r):null;for(var l=r.length-1,i=[];l>=0;){var h=r[l];s=n.indexOf(h),s!==-1&&(o(n,s),i.push(h),a&&a.call(t,h)),l--}return i};f.exports=m}),60248:((f,x,e)=>{var o=e(19133),m=function(n,r,a,t){if(t===void 0&&(t=n),r<0||r>n.length-1)throw new Error("Index out of bounds");var s=o(n,r);return a&&a.call(t,s),s};f.exports=m}),81409:((f,x,e)=>{var o=e(82011),m=function(n,r,a,t,s){if(r===void 0&&(r=0),a===void 0&&(a=n.length),s===void 0&&(s=n),o(n,r,a)){var l=a-r,i=n.splice(r,l);if(t)for(var h=0;h<i.length;h++){var d=i[h];t.call(s,d)}return i}else return[]};f.exports=m}),31856:((f,x,e)=>{var o=e(19133),m=function(n,r,a){r===void 0&&(r=0),a===void 0&&(a=n.length);var t=r+Math.floor(Math.random()*a);return o(n,t)};f.exports=m}),42169:(f=>{var x=function(e,o,m){var n=e.indexOf(o),r=e.indexOf(m);return n!==-1&&r===-1?(e[n]=m,!0):!1};f.exports=x}),86003:(f=>{var x=function(e,o){o===void 0&&(o=1);for(var m=null,n=0;n<o;n++)m=e.shift(),e.push(m);return m};f.exports=x}),49498:(f=>{var x=function(e,o){o===void 0&&(o=1);for(var m=null,n=0;n<o;n++)m=e.pop(),e.unshift(m);return m};f.exports=x}),82011:(f=>{var x=function(e,o,m,n){var r=e.length;if(o<0||o>=r||o>=m||m>r){if(n)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};f.exports=x}),89545:(f=>{var x=function(e,o){var m=e.indexOf(o);return m!==-1&&m>0&&(e.splice(m,1),e.unshift(o)),o};f.exports=x}),17810:((f,x,e)=>{var o=e(82011),m=function(n,r,a,t,s){if(t===void 0&&(t=0),s===void 0&&(s=n.length),o(n,t,s))for(var l=t;l<s;l++){var i=n[l];i.hasOwnProperty(r)&&(i[r]=a)}return n};f.exports=m}),33680:(f=>{var x=function(e){for(var o=e.length-1;o>0;o--){var m=Math.floor(Math.random()*(o+1)),n=e[o];e[o]=e[m],e[m]=n}return e};f.exports=x}),90126:(f=>{var x=function(e){var o=/\D/g;return e.sort(function(m,n){return parseInt(m.replace(o,""),10)-parseInt(n.replace(o,""),10)}),e};f.exports=x}),19133:(f=>{var x=function(e,o){if(!(o>=e.length)){for(var m=e.length-1,n=e[o],r=o;r<m;r++)e[r]=e[r+1];return e.length=m,n}};f.exports=x}),19186:((f,x,e)=>{var o=e(82264);function m(t,s){return String(t).localeCompare(s)}function n(t,s){var l=t.length;if(l<=1)return t;for(var i=new Array(l),h=1;h<l;h*=2){r(t,s,h,i);var d=t;t=i,i=d}return t}function r(t,s,l,i){var h=t.length,d=0,c=l*2,u,p,g,y,v;for(u=0;u<h;u+=c)for(p=u+l,g=p+l,p>h&&(p=h),g>h&&(g=h),y=u,v=p;;)if(y<p&&v<g)s(t[y],t[v])<=0?i[d++]=t[y++]:i[d++]=t[v++];else if(y<p)i[d++]=t[y++];else if(v<g)i[d++]=t[v++];else break}var a=function(t,s){if(s===void 0&&(s=m),!t||t.length<2)return t;if(o.features.stableSort)return t.sort(s);var l=n(t,s);return l!==t&&r(l,null,t.length,t),t};f.exports=a}),25630:(f=>{var x=function(e,o,m){if(o===m)return e;var n=e.indexOf(o),r=e.indexOf(m);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return e[n]=m,e[r]=o,e};f.exports=x}),37105:((f,x,e)=>{f.exports={Matrix:e(54915),Add:e(71146),AddAt:e(51067),BringToTop:e(66905),CountAllMatching:e(21612),Each:e(95428),EachInRange:e(36914),FindClosestInSorted:e(81957),Flatten:e(43491),GetAll:e(46710),GetFirst:e(58731),GetRandom:e(26546),MoveDown:e(70864),MoveTo:e(69693),MoveUp:e(40853),MoveAbove:e(85835),MoveBelow:e(83371),NumberArray:e(20283),NumberArrayStep:e(593),QuickSelect:e(43886),Range:e(88492),Remove:e(72905),RemoveAt:e(60248),RemoveBetween:e(81409),RemoveRandomElement:e(31856),Replace:e(42169),RotateLeft:e(86003),RotateRight:e(49498),SafeRange:e(82011),SendToBack:e(89545),SetAll:e(17810),Shuffle:e(33680),SortByDigits:e(90126),SpliceOne:e(19133),StableSort:e(19186),Swap:e(25630)}}),86922:(f=>{var x=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var o=e[0].length,m=1;m<e.length;m++)if(e[m].length!==o)return!1;return!0};f.exports=x}),63362:((f,x,e)=>{var o=e(41836),m=e(86922),n=function(r){var a="";if(!m(r))return a;for(var t=0;t<r.length;t++){for(var s=0;s<r[t].length;s++){var l=r[t][s].toString();l!=="undefined"?a+=o(l,2):a+="?",s<r[t].length-1&&(a+=" |")}if(t<r.length-1){a+=`
`;for(var i=0;i<r[t].length;i++)a+="---",i<r[t].length-1&&(a+="+");a+=`
`}}return a};f.exports=n}),92598:(f=>{var x=function(e){return e.reverse()};f.exports=x}),21224:(f=>{var x=function(e){for(var o=0;o<e.length;o++)e[o].reverse();return e};f.exports=x}),98717:((f,x,e)=>{var o=e(37829),m=function(n){return o(n,180)};f.exports=m}),44657:((f,x,e)=>{var o=e(37829),m=function(n,r){r===void 0&&(r=1);for(var a=0;a<r;a++)n=o(n,90);return n};f.exports=m}),37829:((f,x,e)=>{var o=e(86922),m=e(2429),n=function(r,a){if(a===void 0&&(a=90),!o(r))return null;if(typeof a!="string"&&(a=(a%360+360)%360),a===90||a===-270||a==="rotateLeft")r=m(r),r.reverse();else if(a===-90||a===270||a==="rotateRight")r.reverse(),r=m(r);else if(Math.abs(a)===180||a==="rotate180"){for(var t=0;t<r.length;t++)r[t].reverse();r.reverse()}return r};f.exports=n}),92632:((f,x,e)=>{var o=e(37829),m=function(n,r){r===void 0&&(r=1);for(var a=0;a<r;a++)n=o(n,-90);return n};f.exports=m}),69512:((f,x,e)=>{var o=e(86003),m=e(49498),n=function(r,a,t){if(a===void 0&&(a=0),t===void 0&&(t=0),t!==0&&(t<0?o(r,Math.abs(t)):m(r,t)),a!==0)for(var s=0;s<r.length;s++){var l=r[s];a<0?o(l,Math.abs(a)):m(l,a)}return r};f.exports=n}),2429:(f=>{var x=function(e){for(var o=e.length,m=e[0].length,n=new Array(m),r=0;r<m;r++){n[r]=new Array(o);for(var a=o-1;a>-1;a--)n[r][a]=e[a][r]}return n};f.exports=x}),54915:((f,x,e)=>{f.exports={CheckMatrix:e(86922),MatrixToString:e(63362),ReverseColumns:e(92598),ReverseRows:e(21224),Rotate180:e(98717),RotateLeft:e(44657),RotateMatrix:e(37829),RotateRight:e(92632),Translate:e(69512),TransposeMatrix:e(2429)}}),71334:(f=>{var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(o,m){for(var n=new Uint8Array(o),r=n.length,a=m?"data:"+m+";base64,":"",t=0;t<r;t+=3)a+=x[n[t]>>2],a+=x[(n[t]&3)<<4|n[t+1]>>4],a+=x[(n[t+1]&15)<<2|n[t+2]>>6],a+=x[n[t+2]&63];return r%3===2?a=a.substring(0,a.length-1)+"=":r%3===1&&(a=a.substring(0,a.length-2)+"=="),a};f.exports=e}),53134:(f=>{for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),o=0;o<x.length;o++)e[x.charCodeAt(o)]=o;var m=function(n){n=n.substr(n.indexOf(",")+1);var r=n.length,a=r*.75,t=0,s,l,i,h;n[r-1]==="="&&(a--,n[r-2]==="="&&a--);for(var d=new ArrayBuffer(a),c=new Uint8Array(d),u=0;u<r;u+=4)s=e[n.charCodeAt(u)],l=e[n.charCodeAt(u+1)],i=e[n.charCodeAt(u+2)],h=e[n.charCodeAt(u+3)],c[t++]=s<<2|l>>4,c[t++]=(l&15)<<4|i>>2,c[t++]=(i&3)<<6|h&63;return d};f.exports=m}),65839:((f,x,e)=>{f.exports={ArrayBufferToBase64:e(71334),Base64ToArrayBuffer:e(53134)}}),91799:((f,x,e)=>{f.exports={Array:e(37105),Base64:e(65839),Objects:e(1183),String:e(31749),NOOP:e(29747),NULL:e(20242)}}),41786:(f=>{var x=function(e){var o={};for(var m in e)Array.isArray(e[m])?o[m]=e[m].slice(0):o[m]=e[m];return o};f.exports=x}),62644:(f=>{var x=function(e){var o,m,n;if(typeof e!="object"||e===null)return e;o=Array.isArray(e)?[]:{};for(n in e)m=e[n],o[n]=x(m);return o};f.exports=x}),79291:((f,x,e)=>{var o=e(41212),m=function(){var n,r,a,t,s,l,i=arguments[0]||{},h=1,d=arguments.length,c=!1;for(typeof i=="boolean"&&(c=i,i=arguments[1]||{},h=2),d===h&&(i=this,--h);h<d;h++)if((n=arguments[h])!=null)for(r in n)a=i[r],t=n[r],i!==t&&(c&&t&&(o(t)||(s=Array.isArray(t)))?(s?(s=!1,l=a&&Array.isArray(a)?a:[]):l=a&&o(a)?a:{},i[r]=m(c,l,t)):t!==void 0&&(i[r]=t));return i};f.exports=m}),23568:((f,x,e)=>{var o=e(75508),m=e(35154),n=function(r,a,t){var s=m(r,a,null);if(s===null)return t;if(Array.isArray(s))return o.RND.pick(s);if(typeof s=="object"){if(s.hasOwnProperty("randInt"))return o.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return o.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if(typeof s=="function")return s(a);return s};f.exports=n}),95540:(f=>{var x=function(e,o,m){var n=typeof e;return!e||n==="number"||n==="string"?m:e.hasOwnProperty(o)&&e[o]!==void 0?e[o]:m};f.exports=x}),82840:((f,x,e)=>{var o=e(35154),m=e(45319),n=function(r,a,t,s,l){l===void 0&&(l=t);var i=o(r,a,l);return m(i,t,s)};f.exports=n}),35154:(f=>{var x=function(e,o,m,n){if(!e&&!n||typeof e=="number")return m;if(e&&e.hasOwnProperty(o))return e[o];if(n&&n.hasOwnProperty(o))return n[o];if(o.indexOf(".")!==-1){for(var r=o.split("."),a=e,t=n,s=m,l=m,i=!0,h=!0,d=0;d<r.length;d++)a&&a.hasOwnProperty(r[d])?(s=a[r[d]],a=a[r[d]]):i=!1,t&&t.hasOwnProperty(r[d])?(l=t[r[d]],t=t[r[d]]):h=!1;return i?s:h?l:m}else return m};f.exports=x}),69036:(f=>{var x=function(e,o){for(var m=0;m<o.length;m++)if(!e.hasOwnProperty(o[m]))return!1;return!0};f.exports=x}),1985:(f=>{var x=function(e,o){for(var m=0;m<o.length;m++)if(e.hasOwnProperty(o[m]))return!0;return!1};f.exports=x}),97022:(f=>{var x=function(e,o){return e.hasOwnProperty(o)};f.exports=x}),41212:(f=>{var x=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};f.exports=x}),46975:((f,x,e)=>{var o=e(41786),m=function(n,r){var a=o(n);for(var t in r)a.hasOwnProperty(t)||(a[t]=r[t]);return a};f.exports=m}),269:((f,x,e)=>{var o=e(41786),m=function(n,r){var a=o(n);for(var t in r)a.hasOwnProperty(t)&&(a[t]=r[t]);return a};f.exports=m}),18254:((f,x,e)=>{var o=e(97022),m=function(n,r){for(var a={},t=0;t<r.length;t++){var s=r[t];o(n,s)&&(a[s]=n[s])}return a};f.exports=m}),61622:(f=>{var x=function(e,o,m){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(o))return e[o]=m,!0;if(o.indexOf(".")!==-1){for(var n=o.split("."),r=e,a=e,t=0;t<n.length;t++)if(r.hasOwnProperty(n[t]))a=r,r=r[n[t]];else return!1;return a[n[n.length-1]]=m,!0}return!1};f.exports=x}),1183:((f,x,e)=>{f.exports={Clone:e(41786),DeepCopy:e(62644),Extend:e(79291),GetAdvancedValue:e(23568),GetFastValue:e(95540),GetMinMaxValue:e(82840),GetValue:e(35154),HasAll:e(69036),HasAny:e(1985),HasValue:e(97022),IsPlainObject:e(41212),Merge:e(46975),MergeRight:e(269),Pick:e(18254),SetValue:e(61622)}}),27902:(f=>{var x=function(e,o){return e.replace(/%([0-9]+)/g,function(m,n){return o[Number(n)-1]})};f.exports=x}),41836:(f=>{var x=function(e,o,m,n){o===void 0&&(o=0),m===void 0&&(m=" "),n===void 0&&(n=3),e=e.toString();var r=0;if(o+1>=e.length)switch(n){case 1:e=new Array(o+1-e.length).join(m)+e;break;case 3:var a=Math.ceil((r=o-e.length)/2),t=r-a;e=new Array(t+1).join(m)+e+new Array(a+1).join(m);break;default:e=e+new Array(o+1-e.length).join(m);break}return e};f.exports=x}),33628:(f=>{var x=function(e,o){return o===0?e.slice(1):e.slice(0,o)+e.slice(o+1)};f.exports=x}),27671:(f=>{var x=function(e){return e.split("").reverse().join("")};f.exports=x}),45650:(f=>{var x=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=Math.random()*16|0,m=e==="x"?o:o&3|8;return m.toString(16)})};f.exports=x}),35355:(f=>{var x=function(e){return e&&e[0].toUpperCase()+e.slice(1)};f.exports=x}),31749:((f,x,e)=>{f.exports={Format:e(27902),Pad:e(41836),RemoveAt:e(33628),Reverse:e(27671),UppercaseFirst:e(35355),UUID:e(45650)}})},I={};function B(f){var x=I[f];if(x!==void 0)return x.exports;var e=I[f]={exports:{}};return b[f](e,e.exports,B),e.exports}B.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var O=B(85454);return O})())})(si)),si.exports}var ja=Qa();const $e=Za(ja),J=360,ee=640,zi=24,De=2,re=zi*De,qa=24,_a=18,er={BG:657935};var k=(G=>(G.Normal="Normal",G.Water="Water",G.Fire="Fire",G.Grass="Grass",G.Electric="Electric",G.Flying="Flying",G.Poison="Poison",G.Ground="Ground",G.Rock="Rock",G.Bug="Bug",G.Fighting="Fighting",G.Steel="Steel",G.Ghost="Ghost",G.Psychic="Psychic",G.Ice="Ice",G.Dark="Dark",G.Fairy="Fairy",G.Dragon="Dragon",G))(k||{});const tr={Water:{Fire:2,Ground:2,Rock:2,Grass:.5,Water:.5},Fire:{Grass:2,Bug:2,Water:.5,Rock:.5,Fire:.5},Grass:{Water:2,Ground:2,Rock:2,Fire:.5,Grass:.5,Flying:.5,Poison:.5,Bug:.5},Electric:{Water:2,Flying:2,Ground:0,Electric:.5,Grass:.5},Flying:{Grass:2,Bug:2,Rock:.5,Electric:.5},Poison:{Grass:2,Poison:.5,Ground:.5,Rock:.5},Ground:{Fire:2,Electric:2,Poison:2,Rock:2,Grass:.5,Bug:.5,Flying:0},Rock:{Fire:2,Flying:2,Bug:2,Water:.5,Grass:.5,Ground:.5},Bug:{Grass:2,Poison:.5,Flying:.5,Fire:.5,Steel:.5},Fighting:{Normal:2,Rock:2,Steel:2,Flying:.5,Poison:.5,Bug:.5},Steel:{Rock:2,Bug:2,Ice:2,Fire:.5,Water:.5,Electric:.5,Steel:.5},Ghost:{Ghost:2,Psychic:2,Normal:0},Psychic:{Fighting:2,Poison:2,Psychic:.5,Steel:.5},Ice:{Grass:2,Ground:2,Flying:2,Fire:.5,Water:.5,Ice:.5,Steel:.5},Dark:{Ghost:2,Psychic:2,Fighting:.5,Dark:.5,Fairy:.5},Fairy:{Fighting:2,Dark:2,Dragon:2,Poison:.5,Steel:.5,Fire:.5},Dragon:{Dragon:2,Steel:.5,Fairy:0}};function hi(G,F){let b=1;for(const I of F){const B=tr[G];B&&B[I]!==void 0&&(b*=B[I])}return b}function ts(G){return G>=2?"It's super effective!":G>0&&G<1?"It's not very effective...":G===0?"It has no effect...":""}var Je=(G=>(G.Front1="front1",G.Front2="front2",G.FrontLine="frontLine",G.Around="around",G.Room="room",G.Self="self",G))(Je||{}),ce=(G=>(G.None="none",G.AtkUp="atkUp",G.DefUp="defUp",G.Heal="heal",G.Burn="burn",G.Paralyze="paralyze",G))(ce||{});function st(G){return{...G,currentPp:G.pp}}const Me={tackle:{id:"tackle",name:"Tackle",type:k.Normal,power:8,pp:25,range:"front1",accuracy:95,description:"A basic charge attack."},waterGun:{id:"waterGun",name:"Water Gun",type:k.Water,power:12,pp:18,range:"frontLine",accuracy:90,description:"Shoots a stream of water in a line."},waterPulse:{id:"waterPulse",name:"Water Pulse",type:k.Water,power:15,pp:12,range:"front2",accuracy:85,description:"Sends out a pulse of water. 2-tile range."},surf:{id:"surf",name:"Surf",type:k.Water,power:18,pp:8,range:"room",accuracy:90,description:"Hits all enemies in the room with a wave."},swordsDance:{id:"swordsDance",name:"Swords Dance",type:k.Normal,power:0,pp:10,range:"self",accuracy:100,effect:"atkUp",description:"Raises ATK by 50% for 5 turns."},wingAttack:{id:"wingAttack",name:"Wing Attack",type:k.Flying,power:12,pp:20,range:"front1",accuracy:95,description:"Strikes with wings."},leechLife:{id:"leechLife",name:"Leech Life",type:k.Bug,power:10,pp:12,range:"front1",accuracy:90,description:"Drains HP from the target."},poisonSting:{id:"poisonSting",name:"Poison Sting",type:k.Poison,power:8,pp:20,range:"front1",accuracy:95,effect:"burn",effectChance:40,description:"Stings with toxic barb. May poison."},supersonic:{id:"supersonic",name:"Supersonic",type:k.Normal,power:0,pp:15,range:"frontLine",accuracy:70,effect:"paralyze",effectChance:100,description:"Confusing sound waves. May paralyze."},rockThrow:{id:"rockThrow",name:"Rock Throw",type:k.Rock,power:12,pp:15,range:"front2",accuracy:85,description:"Hurls a rock at the target."},thunderShock:{id:"thunderShock",name:"ThunderShock",type:k.Electric,power:10,pp:20,range:"frontLine",accuracy:90,effect:"paralyze",effectChance:30,description:"Shoots electricity. May paralyze."},spark:{id:"spark",name:"Spark",type:k.Electric,power:14,pp:15,range:"front1",accuracy:90,effect:"paralyze",effectChance:30,description:"Charges and tackles with electricity."},thunderWave:{id:"thunderWave",name:"Thunder Wave",type:k.Electric,power:0,pp:15,range:"front2",accuracy:80,effect:"paralyze",effectChance:100,description:"Sends a jolt to paralyze the target."},sonicBoom:{id:"sonicBoom",name:"SonicBoom",type:k.Normal,power:10,pp:18,range:"frontLine",accuracy:85,description:"Shockwave attack in a line."},selfDestruct:{id:"selfDestruct",name:"Selfdestruct",type:k.Normal,power:30,pp:3,range:"around",accuracy:100,description:"Explodes, hitting everything nearby."},stringShot:{id:"stringShot",name:"String Shot",type:k.Bug,power:0,pp:20,range:"front2",accuracy:85,effect:"paralyze",effectChance:100,description:"Slows down the target with silk."},bugBite:{id:"bugBite",name:"Bug Bite",type:k.Bug,power:10,pp:18,range:"front1",accuracy:95,description:"Bites the target with mandibles."},gust:{id:"gust",name:"Gust",type:k.Flying,power:10,pp:20,range:"front2",accuracy:90,description:"Whips up a gust of wind."},quickAttack:{id:"quickAttack",name:"Quick Attack",type:k.Normal,power:8,pp:25,range:"front1",accuracy:100,description:"A swift, sure-hit attack."},karateChop:{id:"karateChop",name:"Karate Chop",type:k.Fighting,power:12,pp:18,range:"front1",accuracy:95,description:"A precise chopping attack."},lowKick:{id:"lowKick",name:"Low Kick",type:k.Fighting,power:10,pp:20,range:"front1",accuracy:90,description:"A low sweeping kick."},focusPunch:{id:"focusPunch",name:"Focus Punch",type:k.Fighting,power:22,pp:6,range:"front1",accuracy:80,description:"A devastating focused punch."},meditate:{id:"meditate",name:"Meditate",type:k.Fighting,power:0,pp:15,range:"self",accuracy:100,effect:"atkUp",description:"Meditates to raise ATK."},metalClaw:{id:"metalClaw",name:"Metal Claw",type:k.Steel,power:12,pp:20,range:"front1",accuracy:90,description:"Slashes with metal claws."},ironDefense:{id:"ironDefense",name:"Iron Defense",type:k.Steel,power:0,pp:10,range:"self",accuracy:100,effect:"defUp",description:"Hardens the body to raise DEF."},headbutt:{id:"headbutt",name:"Headbutt",type:k.Normal,power:14,pp:15,range:"front1",accuracy:90,description:"A charging headbutt attack."},shadowBall:{id:"shadowBall",name:"Shadow Ball",type:k.Ghost,power:16,pp:12,range:"front2",accuracy:90,description:"Hurls a shadowy blob. 2-tile range."},lick:{id:"lick",name:"Lick",type:k.Ghost,power:8,pp:20,range:"front1",accuracy:90,effect:"paralyze",effectChance:30,description:"Licks the target. May paralyze."},nightShade:{id:"nightShade",name:"Night Shade",type:k.Ghost,power:12,pp:15,range:"frontLine",accuracy:85,description:"Eerie shadows strike in a line."},confusion:{id:"confusion",name:"Confusion",type:k.Psychic,power:12,pp:18,range:"front2",accuracy:90,description:"Psychic attack. 2-tile range."},psybeam:{id:"psybeam",name:"Psybeam",type:k.Psychic,power:16,pp:12,range:"frontLine",accuracy:85,description:"Fires a peculiar ray in a line."},hypnosis:{id:"hypnosis",name:"Hypnosis",type:k.Psychic,power:0,pp:12,range:"front2",accuracy:70,effect:"paralyze",effectChance:100,description:"Puts the target to sleep (paralyze)."},iceBeam:{id:"iceBeam",name:"Ice Beam",type:k.Ice,power:16,pp:10,range:"frontLine",accuracy:90,description:"Fires an icy beam in a line."},iceShard:{id:"iceShard",name:"Ice Shard",type:k.Ice,power:10,pp:20,range:"front1",accuracy:100,description:"An icy priority attack."},ember:{id:"ember",name:"Ember",type:k.Fire,power:10,pp:20,range:"front2",accuracy:90,effect:"burn",effectChance:20,description:"Spits flames. May burn."},flamethrower:{id:"flamethrower",name:"Flamethrower",type:k.Fire,power:18,pp:10,range:"frontLine",accuracy:90,description:"A powerful fire stream in a line."},scratch:{id:"scratch",name:"Scratch",type:k.Normal,power:8,pp:25,range:"front1",accuracy:100,description:"A basic scratching attack."},bite:{id:"bite",name:"Bite",type:k.Normal,power:12,pp:18,range:"front1",accuracy:95,description:"Bites the target with sharp fangs."},swift:{id:"swift",name:"Swift",type:k.Normal,power:12,pp:15,range:"room",accuracy:100,description:"Star-shaped rays hit all enemies in the room."},sandAttack:{id:"sandAttack",name:"Sand Attack",type:k.Ground,power:0,pp:15,range:"front2",accuracy:100,effect:"paralyze",effectChance:40,description:"Kicks up sand to reduce accuracy."},mudShot:{id:"mudShot",name:"Mud Shot",type:k.Ground,power:12,pp:15,range:"front2",accuracy:85,description:"Hurls a blob of mud. 2-tile range."},earthPower:{id:"earthPower",name:"Earth Power",type:k.Ground,power:18,pp:8,range:"around",accuracy:90,description:"The earth erupts around the user."},dig:{id:"dig",name:"Dig",type:k.Ground,power:16,pp:12,range:"front1",accuracy:95,description:"Digs underground then strikes."},sandTomb:{id:"sandTomb",name:"Sand Tomb",type:k.Ground,power:10,pp:18,range:"around",accuracy:85,effect:"burn",effectChance:30,description:"Traps the foe in a sand vortex."},fireBlast:{id:"fireBlast",name:"Fire Blast",type:k.Fire,power:22,pp:5,range:"front2",accuracy:80,effect:"burn",effectChance:30,description:"A massive blast of fire."},lavaSurf:{id:"lavaSurf",name:"Lava Plume",type:k.Fire,power:16,pp:10,range:"around",accuracy:90,effect:"burn",effectChance:30,description:"Scorching lava hits all adjacent foes."},bodySlam:{id:"bodySlam",name:"Body Slam",type:k.Normal,power:16,pp:12,range:"front1",accuracy:90,effect:"paralyze",effectChance:30,description:"A heavy slam that may paralyze."},darkPulse:{id:"darkPulse",name:"Dark Pulse",type:k.Dark,power:16,pp:12,range:"frontLine",accuracy:90,description:"A wave of dark energy in a line."},feintAttack:{id:"feintAttack",name:"Feint Attack",type:k.Dark,power:12,pp:18,range:"front1",accuracy:100,description:"A sneaky attack that never misses."},nightSlash:{id:"nightSlash",name:"Night Slash",type:k.Dark,power:14,pp:15,range:"front1",accuracy:95,description:"Slashes with dark energy."},snarl:{id:"snarl",name:"Snarl",type:k.Dark,power:10,pp:15,range:"around",accuracy:90,description:"A growling attack hitting all nearby foes."},pursuit:{id:"pursuit",name:"Pursuit",type:k.Dark,power:10,pp:20,range:"front2",accuracy:95,description:"Chases and hits with dark energy."},vineWhip:{id:"vineWhip",name:"Vine Whip",type:k.Grass,power:10,pp:20,range:"front2",accuracy:90,description:"Strikes with vines. 2-tile range."},razorLeaf:{id:"razorLeaf",name:"Razor Leaf",type:k.Grass,power:14,pp:15,range:"frontLine",accuracy:90,description:"Launches sharp leaves in a line."},seedBomb:{id:"seedBomb",name:"Seed Bomb",type:k.Grass,power:16,pp:10,range:"front2",accuracy:85,description:"Explosive seeds. 2-tile range."},absorb:{id:"absorb",name:"Absorb",type:k.Grass,power:8,pp:20,range:"front1",accuracy:95,description:"Drains HP from the target."},sleepPowder:{id:"sleepPowder",name:"Sleep Powder",type:k.Grass,power:0,pp:10,range:"front2",accuracy:70,effect:"paralyze",effectChance:100,description:"Scatters powder to put foes to sleep."},sludgeBomb:{id:"sludgeBomb",name:"Sludge Bomb",type:k.Poison,power:16,pp:12,range:"front2",accuracy:85,effect:"burn",effectChance:30,description:"Hurls sludge. May poison the foe."},acidSpray:{id:"acidSpray",name:"Acid Spray",type:k.Poison,power:12,pp:14,range:"front2",accuracy:90,description:"Sprays corrosive acid at the foe."},toxicSpikes:{id:"toxicSpikes",name:"Toxic Spikes",type:k.Poison,power:10,pp:15,range:"around",accuracy:80,effect:"burn",effectChance:50,description:"Scatters toxic spikes around self."},venoshock:{id:"venoshock",name:"Venoshock",type:k.Poison,power:18,pp:10,range:"frontLine",accuracy:80,description:"Fires poison beam in a line."},moonblast:{id:"moonblast",name:"Moonblast",type:k.Fairy,power:18,pp:10,range:"front2",accuracy:85,description:"Moonlight blast. High power fairy move."},disarmingVoice:{id:"disarmingVoice",name:"Disarming Voice",type:k.Fairy,power:10,pp:18,range:"frontLine",accuracy:100,description:"Charming cry that never misses."},drainingKiss:{id:"drainingKiss",name:"Draining Kiss",type:k.Fairy,power:12,pp:14,range:"front1",accuracy:90,effect:"heal",effectChance:100,description:"Drains HP with a kiss."},fairyWind:{id:"fairyWind",name:"Fairy Wind",type:k.Fairy,power:8,pp:20,range:"around",accuracy:90,description:"Stirs up fairy wind around self."},dazzlingGleam:{id:"dazzlingGleam",name:"Dazzling Gleam",type:k.Fairy,power:14,pp:12,range:"room",accuracy:80,description:"Dazzling light fills the room."},dragonBreath:{id:"dragonBreath",name:"Dragon Breath",type:k.Dragon,power:12,pp:16,range:"front2",accuracy:90,effect:"paralyze",effectChance:30,description:"Exhales dragon breath. May paralyze."},dragonClaw:{id:"dragonClaw",name:"Dragon Claw",type:k.Dragon,power:16,pp:12,range:"front1",accuracy:90,description:"Slashes with sharp dragon claws."},dragonPulse:{id:"dragonPulse",name:"Dragon Pulse",type:k.Dragon,power:18,pp:10,range:"frontLine",accuracy:85,description:"Fires a shockwave of draconic energy."},dracoMeteor:{id:"dracoMeteor",name:"Draco Meteor",type:k.Dragon,power:24,pp:5,range:"room",accuracy:75,description:"Summons meteors to strike the room!"},twister:{id:"twister",name:"Twister",type:k.Dragon,power:10,pp:18,range:"around",accuracy:90,description:"Whips up a vicious twister around self."},ironHead:{id:"ironHead",name:"Iron Head",type:k.Steel,power:16,pp:15,range:"front1",accuracy:90,effect:"paralyze",effectChance:30,description:"Rams with a steel-hard head. May paralyze."},flashCannon:{id:"flashCannon",name:"Flash Cannon",type:k.Steel,power:16,pp:12,range:"frontLine",accuracy:90,description:"Fires a flash of light energy in a line."},bulletPunch:{id:"bulletPunch",name:"Bullet Punch",type:k.Steel,power:10,pp:22,range:"front2",accuracy:100,description:"Strikes with a quick punch of steel."},brine:{id:"brine",name:"Brine",type:k.Water,power:14,pp:15,range:"front2",accuracy:90,description:"Attacks with salty water. 2-tile range."},aquaJet:{id:"aquaJet",name:"Aqua Jet",type:k.Water,power:10,pp:22,range:"front2",accuracy:100,description:"Strikes with a jet of water at priority."},thunderbolt:{id:"thunderbolt",name:"Thunderbolt",type:k.Electric,power:18,pp:10,range:"frontLine",accuracy:90,effect:"paralyze",effectChance:20,description:"Fires a strong bolt of electricity."},thunderPunch:{id:"thunderPunch",name:"Thunder Punch",type:k.Electric,power:15,pp:14,range:"front1",accuracy:90,effect:"paralyze",effectChance:20,description:"Punches with electrically charged fist."},signalBeam:{id:"signalBeam",name:"Signal Beam",type:k.Bug,power:15,pp:12,range:"frontLine",accuracy:90,description:"Fires a peculiar beam of light."},pinMissile:{id:"pinMissile",name:"Pin Missile",type:k.Bug,power:8,pp:20,range:"front2",accuracy:85,description:"Fires sharp pins rapidly."},crunch:{id:"crunch",name:"Crunch",type:k.Dark,power:16,pp:12,range:"front1",accuracy:90,description:"Bites down hard. May lower DEF.",effect:"none"},icePunch:{id:"icePunch",name:"Ice Punch",type:k.Ice,power:15,pp:12,range:"front1",accuracy:90,description:"An ice-cold punch.",effect:"paralyze",effectChance:20},psychic:{id:"psychic",name:"Psychic",type:k.Psychic,power:18,pp:8,range:"around",accuracy:90,description:"Powerful psychic force hits all around."},braveBird:{id:"braveBird",name:"Brave Bird",type:k.Flying,power:20,pp:8,range:"front2",accuracy:85,description:"A powerful diving attack."},airSlash:{id:"airSlash",name:"Air Slash",type:k.Flying,power:15,pp:12,range:"frontLine",accuracy:90,description:"Slices with blades of air."},auraSphere:{id:"auraSphere",name:"Aura Sphere",type:k.Fighting,power:16,pp:10,range:"frontLine",accuracy:100,description:"Never misses. A sphere of aura energy."},drainPunch:{id:"drainPunch",name:"Drain Punch",type:k.Fighting,power:14,pp:12,range:"front1",accuracy:90,effect:"heal",description:"Drains HP from the target."},rockSlide:{id:"rockSlide",name:"Rock Slide",type:k.Rock,power:16,pp:10,range:"around",accuracy:85,description:"Hurls rocks at all nearby foes."},stoneEdge:{id:"stoneEdge",name:"Stone Edge",type:k.Rock,power:20,pp:6,range:"front2",accuracy:80,description:"Launches sharp stones with high power."},avalanche:{id:"avalanche",name:"Avalanche",type:k.Ice,power:16,pp:10,range:"around",accuracy:85,description:"Crashes down ice on all nearby foes."},icyWind:{id:"icyWind",name:"Icy Wind",type:k.Ice,power:12,pp:14,range:"frontLine",accuracy:90,description:"Chills foes in a line."},hyperVoice:{id:"hyperVoice",name:"Hyper Voice",type:k.Normal,power:16,pp:10,range:"around",accuracy:90,description:"Loud shout damages all around."},petalDance:{id:"petalDance",name:"Petal Dance",type:k.Grass,power:16,pp:10,range:"around",accuracy:85,description:"Scatters petals that hit all around."},energyBall:{id:"energyBall",name:"Energy Ball",type:k.Grass,power:16,pp:10,range:"frontLine",accuracy:90,description:"Launches a ball of natural energy."},flameWheel:{id:"flameWheel",name:"Flame Wheel",type:k.Fire,power:14,pp:15,range:"front2",accuracy:95,effect:"burn",effectChance:10,description:"Charges forward cloaked in flames."},fireSpin:{id:"fireSpin",name:"Fire Spin",type:k.Fire,power:12,pp:12,range:"around",accuracy:85,effect:"burn",effectChance:20,description:"Traps foes in a vortex of fire."},whirlpool:{id:"whirlpool",name:"Whirlpool",type:k.Water,power:14,pp:12,range:"around",accuracy:85,description:"Traps foes in a fierce vortex of water."},sparkCharge:{id:"sparkCharge",name:"Spark",type:k.Electric,power:12,pp:15,range:"front1",accuracy:95,effect:"paralyze",effectChance:30,description:"A jolt of electricity. May paralyze."},wildCharge:{id:"wildCharge",name:"Wild Charge",type:k.Electric,power:18,pp:8,range:"front2",accuracy:90,description:"Charges with electricity at full force."},boneRush:{id:"boneRush",name:"Bone Rush",type:k.Ground,power:14,pp:12,range:"front2",accuracy:90,description:"Strikes with a bone thrown forward."},bulldoze:{id:"bulldoze",name:"Bulldoze",type:k.Ground,power:12,pp:15,range:"around",accuracy:95,description:"Stomps the ground, hitting all nearby."},xScissor:{id:"xScissor",name:"X-Scissor",type:k.Bug,power:16,pp:10,range:"front1",accuracy:95,description:"Slashes the foe in an X pattern."},gyroBall:{id:"gyroBall",name:"Gyro Ball",type:k.Steel,power:14,pp:12,range:"around",accuracy:90,description:"Spins rapidly, hitting all nearby foes."},shadowSneak:{id:"shadowSneak",name:"Shadow Sneak",type:k.Ghost,power:10,pp:20,range:"front2",accuracy:100,description:"Strikes from the shadows with priority."},dragonRush:{id:"dragonRush",name:"Dragon Rush",type:k.Dragon,power:18,pp:8,range:"front2",accuracy:85,description:"Charges the foe with overwhelming draconic force."},playRough:{id:"playRough",name:"Play Rough",type:k.Fairy,power:16,pp:10,range:"front1",accuracy:90,description:"Plays rough with the target. High contact damage."},iceHammer:{id:"iceHammer",name:"Ice Hammer",type:k.Ice,power:18,pp:8,range:"front1",accuracy:85,description:"Swings a heavy ice fist down on the foe."},psyshock:{id:"psyshock",name:"Psyshock",type:k.Psychic,power:14,pp:12,range:"front2",accuracy:90,description:"Materializes psychic power into a shockwave."},foulPlay:{id:"foulPlay",name:"Foul Play",type:k.Dark,power:16,pp:10,range:"front1",accuracy:90,description:"Turns the foe's power against it."},hurricane:{id:"hurricane",name:"Hurricane",type:k.Flying,power:18,pp:8,range:"room",accuracy:70,description:"Summons a devastating hurricane in the room."},hammerArm:{id:"hammerArm",name:"Hammer Arm",type:k.Fighting,power:18,pp:8,range:"front1",accuracy:85,description:"Smashes down with a heavy fist."},rockWrecker:{id:"rockWrecker",name:"Rock Wrecker",type:k.Rock,power:20,pp:6,range:"front2",accuracy:80,description:"Hurls a massive boulder at the foe."},triAttack:{id:"triAttack",name:"Tri Attack",type:k.Normal,power:14,pp:12,range:"front2",accuracy:90,description:"Fires three beams of energy at the foe."},grassKnot:{id:"grassKnot",name:"Grass Knot",type:k.Grass,power:14,pp:12,range:"front2",accuracy:90,description:"Trips the target with a grass snare."},dive:{id:"dive",name:"Dive",type:k.Water,power:16,pp:10,range:"front2",accuracy:90,description:"Dives underwater and strikes the target."},heatWave:{id:"heatWave",name:"Heat Wave",type:k.Fire,power:16,pp:10,range:"around",accuracy:85,description:"Blasts searing heat at all surrounding foes."},voltSwitch:{id:"voltSwitch",name:"Volt Switch",type:k.Electric,power:14,pp:14,range:"front2",accuracy:95,description:"Zaps the target with an electric jolt."},gunkShot:{id:"gunkShot",name:"Gunk Shot",type:k.Poison,power:18,pp:8,range:"front2",accuracy:80,effect:"burn",effectChance:30,description:"Hurls filthy garbage at the target."},highHorsepower:{id:"highHorsepower",name:"High Horsepower",type:k.Ground,power:18,pp:8,range:"front2",accuracy:85,description:"Charges with tremendous force."},smackDown:{id:"smackDown",name:"Smack Down",type:k.Rock,power:14,pp:14,range:"front2",accuracy:95,description:"Hurls a rock to knock the target down."},megahorn:{id:"megahorn",name:"Megahorn",type:k.Bug,power:18,pp:8,range:"front2",accuracy:80,description:"Rams with a massive horn."},superpower:{id:"superpower",name:"Superpower",type:k.Fighting,power:20,pp:6,range:"front1",accuracy:85,description:"Attacks with tremendous power."},gearGrind:{id:"gearGrind",name:"Gear Grind",type:k.Steel,power:16,pp:10,range:"front2",accuracy:85,description:"Grinds gears into the target twice."},phantomForce:{id:"phantomForce",name:"Phantom Force",type:k.Ghost,power:18,pp:8,range:"front2",accuracy:90,description:"Vanishes and strikes from the shadows."},futuresight:{id:"futuresight",name:"Future Sight",type:k.Psychic,power:18,pp:8,range:"room",accuracy:80,description:"Foresees an attack that strikes all in the room."},freezeDry:{id:"freezeDry",name:"Freeze-Dry",type:k.Ice,power:14,pp:12,range:"front2",accuracy:90,description:"Super-effective freeze ray, even against Water types."},knockOff:{id:"knockOff",name:"Knock Off",type:k.Dark,power:12,pp:14,range:"front1",accuracy:95,description:"Knocks away the target's held item."},moonlight:{id:"moonlight",name:"Moonlight",type:k.Fairy,power:0,pp:8,range:"self",accuracy:100,effect:"heal",effectChance:100,description:"Restores HP by bathing in moonlight."},outrage:{id:"outrage",name:"Outrage",type:k.Dragon,power:20,pp:6,range:"around",accuracy:85,description:"Rampages with draconic fury, hitting everything nearby."},aerialAce:{id:"aerialAce",name:"Aerial Ace",type:k.Flying,power:10,pp:16,range:"front2",accuracy:100,description:"An unavoidable aerial slash."},workUp:{id:"workUp",name:"Work Up",type:k.Normal,power:0,pp:10,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Raises Attack by getting pumped up."},waterfall:{id:"waterfall",name:"Waterfall",type:k.Water,power:16,pp:10,range:"front2",accuracy:90,description:"Charges at the foe with a wall of water."},fireWhip:{id:"fireWhip",name:"Fire Whip",type:k.Fire,power:14,pp:12,range:"front2",accuracy:90,effect:"burn",effectChance:20,description:"Lashes the foe with a flaming whip."},leafStorm:{id:"leafStorm",name:"Leaf Storm",type:k.Grass,power:20,pp:6,range:"room",accuracy:80,description:"Whips up a storm of sharp leaves."},electricTerrain:{id:"electricTerrain",name:"Electric Terrain",type:k.Electric,power:0,pp:8,range:"room",accuracy:100,effect:"atkUp",effectChance:100,description:"Electrifies the ground, boosting Electric moves."},poisonJab:{id:"poisonJab",name:"Poison Jab",type:k.Poison,power:14,pp:12,range:"front1",accuracy:90,effect:"burn",effectChance:30,description:"Stabs with a toxic barb. May poison the target."},scorchingSand:{id:"scorchingSand",name:"Scorching Sand",type:k.Ground,power:14,pp:10,range:"front2",accuracy:90,effect:"burn",effectChance:30,description:"Hurls scorching sand. May burn the target."},stealthRock:{id:"stealthRock",name:"Stealth Rock",type:k.Rock,power:12,pp:14,range:"around",accuracy:90,description:"Sets a trap of floating rocks around the area."},lunge:{id:"lunge",name:"Lunge",type:k.Bug,power:14,pp:12,range:"front2",accuracy:90,description:"Lunges at the target, lowering its Attack."},skyUppercut:{id:"skyUppercut",name:"Sky Uppercut",type:k.Fighting,power:16,pp:10,range:"front1",accuracy:85,description:"An uppercut thrown with such force it hits airborne foes."},autotomize:{id:"autotomize",name:"Autotomize",type:k.Steel,power:0,pp:14,range:"self",accuracy:100,effect:"atkUp",description:"Sheds heavy body parts to sharply boost Attack."},shadowPunch:{id:"shadowPunch",name:"Shadow Punch",type:k.Ghost,power:14,pp:12,range:"front2",accuracy:100,description:"A ghostly punch that never misses."},expandingForce:{id:"expandingForce",name:"Expanding Force",type:k.Psychic,power:10,pp:10,range:"room",accuracy:90,description:"Psychic power expands to hit all foes in the room."},throatChop:{id:"throatChop",name:"Throat Chop",type:k.Dark,power:16,pp:10,range:"front1",accuracy:90,description:"A chop to the throat that silences the foe."},sweetKiss:{id:"sweetKiss",name:"Sweet Kiss",type:k.Fairy,power:0,pp:14,range:"around",accuracy:85,effect:"paralyze",description:"Blows kisses that confuse and paralyze nearby foes."},dragonDance:{id:"dragonDance",name:"Dragon Dance",type:k.Dragon,power:0,pp:12,range:"self",accuracy:100,effect:"atkUp",description:"A mystical dance that raises Attack sharply."},pluck:{id:"pluck",name:"Pluck",type:k.Flying,power:13,pp:14,range:"front1",accuracy:95,description:"Pecks the target with a sharp beak."},facade:{id:"facade",name:"Facade",type:k.Normal,power:14,pp:12,range:"front1",accuracy:95,description:"Doubles in power when burned or paralyzed."},liquidation:{id:"liquidation",name:"Liquidation",type:k.Water,power:16,pp:10,range:"front1",accuracy:90,description:"Strikes with a powerful water jet."},blazeKick:{id:"blazeKick",name:"Blaze Kick",type:k.Fire,power:16,pp:10,range:"front1",accuracy:85,effect:"burn",description:"A blazing kick with high burn chance."},tropicalKick:{id:"tropicalKick",name:"Tropical Kick",type:k.Grass,power:14,pp:12,range:"front1",accuracy:95,description:"A kick infused with tropical energy."},nuzzle:{id:"nuzzle",name:"Nuzzle",type:k.Electric,power:8,pp:16,range:"front1",accuracy:100,effect:"paralyze",description:"An affectionate nuzzle that always paralyzes."},muddyWater:{id:"muddyWater",name:"Muddy Water",type:k.Ground,power:12,pp:12,range:"room",accuracy:85,description:"Floods the room with muddy water."},rockBlast:{id:"rockBlast",name:"Rock Blast",type:k.Rock,power:10,pp:14,range:"front2",accuracy:90,description:"Hurls rocks at distant foes."},bugBuzz:{id:"bugBuzz",name:"Bug Buzz",type:k.Bug,power:12,pp:10,range:"room",accuracy:90,description:"Vibrates soundwaves throughout the room."},closeCombat:{id:"closeCombat",name:"Close Combat",type:k.Fighting,power:18,pp:8,range:"front1",accuracy:100,description:"An all-out attack at close range."},smartStrike:{id:"smartStrike",name:"Smart Strike",type:k.Steel,power:12,pp:14,range:"front1",accuracy:100,description:"A horn attack that never misses."},poltergeist:{id:"poltergeist",name:"Poltergeist",type:k.Ghost,power:16,pp:8,range:"front2",accuracy:90,description:"Attacks with a possessed item."},icicleCrash:{id:"icicleCrash",name:"Icicle Crash",type:k.Ice,power:14,pp:12,range:"front1",accuracy:90,description:"Drops large icicles on the target."},scaleShot:{id:"scaleShot",name:"Scale Shot",type:k.Dragon,power:10,pp:14,range:"front2",accuracy:90,description:"Shoots scales at distant foes."},discharge:{id:"discharge",name:"Discharge",type:k.Electric,power:12,pp:12,range:"around",accuracy:100,description:"Releases electricity in all directions."},earthquake:{id:"earthquake",name:"Earthquake",type:k.Ground,power:18,pp:8,range:"room",accuracy:90,description:"Causes a massive quake that hits the entire room."},ancientPower:{id:"ancientPower",name:"Ancient Power",type:k.Rock,power:10,pp:14,range:"front1",accuracy:100,description:"Attacks with primordial energy. May boost all stats."},silverWind:{id:"silverWind",name:"Silver Wind",type:k.Bug,power:10,pp:14,range:"around",accuracy:100,description:"Attacks with silvery wind in all directions."},aurasphere:{id:"aurasphere",name:"Aura Sphere",type:k.Fighting,power:14,pp:12,range:"front2",accuracy:100,description:"An aura-based attack that never misses."},shadowForce:{id:"shadowForce",name:"Shadow Force",type:k.Ghost,power:18,pp:6,range:"front1",accuracy:100,description:"Disappears then strikes from the shadows."},glacialLance:{id:"glacialLance",name:"Glacial Lance",type:k.Ice,power:16,pp:8,range:"frontLine",accuracy:95,description:"Launches a frozen lance in a line."},boomburst:{id:"boomburst",name:"Boomburst",type:k.Normal,power:16,pp:6,range:"room",accuracy:90,description:"Deafening sound that fills the room."},hydroPump:{id:"hydroPump",name:"Hydro Pump",type:k.Water,power:18,pp:6,range:"front2",accuracy:80,description:"Blasts the target with a huge volume of water."},eruption:{id:"eruption",name:"Eruption",type:k.Fire,power:20,pp:5,range:"around",accuracy:85,description:"Erupts with volcanic fury, hitting all nearby."},powerWhip:{id:"powerWhip",name:"Power Whip",type:k.Grass,power:18,pp:8,range:"front2",accuracy:85,description:"Violently whirls vines to lash the target."},drillRun:{id:"drillRun",name:"Drill Run",type:k.Ground,power:16,pp:10,range:"front2",accuracy:95,description:"Spins like a drill to slam into the target."},headSmash:{id:"headSmash",name:"Head Smash",type:k.Rock,power:20,pp:6,range:"front1",accuracy:80,description:"A devastating head-first charge."},heavySlam:{id:"heavySlam",name:"Heavy Slam",type:k.Steel,power:16,pp:10,range:"front1",accuracy:100,description:"Slams with immense weight."},cursedFlame:{id:"cursedFlame",name:"Cursed Flame",type:k.Ghost,power:14,pp:10,range:"around",accuracy:95,effect:"burn",effectChance:50,description:"Engulfs foes in cursed flames."},zenHeadbutt:{id:"zenHeadbutt",name:"Zen Headbutt",type:k.Psychic,power:14,pp:12,range:"front1",accuracy:90,description:"Focuses psychic power into a headbutt."},blizzard:{id:"blizzard",name:"Blizzard",type:k.Ice,power:18,pp:6,range:"room",accuracy:80,description:"Engulfs the room in a fierce blizzard."},skyAttack:{id:"skyAttack",name:"Sky Attack",type:k.Flying,power:18,pp:6,range:"front2",accuracy:90,description:"Dives from the sky with great force."},extremeSpeed:{id:"extremeSpeed",name:"Extreme Speed",type:k.Normal,power:14,pp:12,range:"front1",accuracy:100,description:"Attacks at blinding speed."},originPulse:{id:"originPulse",name:"Origin Pulse",type:k.Water,power:20,pp:4,range:"room",accuracy:85,description:"Unleashes the power of the ocean."},sacredFire:{id:"sacredFire",name:"Sacred Fire",type:k.Fire,power:18,pp:6,range:"front2",accuracy:95,effect:"burn",effectChance:50,description:"Holy flames that may burn."},seedFlare:{id:"seedFlare",name:"Seed Flare",type:k.Grass,power:18,pp:6,range:"around",accuracy:85,description:"Explodes seeds in all directions."},thunderCage:{id:"thunderCage",name:"Thunder Cage",type:k.Electric,power:14,pp:14,range:"front2",accuracy:90,effect:"paralyze",effectChance:50,description:"Traps the target in electrified cage."},toxicThread:{id:"toxicThread",name:"Toxic Thread",type:k.Poison,power:10,pp:16,range:"front1",accuracy:100,effect:"paralyze",effectChance:100,description:"Spits toxic thread that slows target."},precipiceBlades:{id:"precipiceBlades",name:"Precipice Blades",type:k.Ground,power:20,pp:6,range:"frontLine",accuracy:85,description:"Summons blades of earth from below."},diamondStorm:{id:"diamondStorm",name:"Diamond Storm",type:k.Rock,power:18,pp:6,range:"around",accuracy:95,effect:"defUp",description:"Scatters diamonds that boost defense."},meteorMash:{id:"meteorMash",name:"Meteor Mash",type:k.Steel,power:18,pp:8,range:"front1",accuracy:90,description:"Strikes with a meteor-like fist."},shadowClaw:{id:"shadowClaw",name:"Shadow Claw",type:k.Ghost,power:14,pp:12,range:"front1",accuracy:100,description:"Slashes with a shadowy claw."},psychoCut:{id:"psychoCut",name:"Psycho Cut",type:k.Psychic,power:14,pp:12,range:"frontLine",accuracy:100,description:"Cuts foes with psychic blades."},suckerPunch:{id:"suckerPunch",name:"Sucker Punch",type:k.Dark,power:14,pp:10,range:"front1",accuracy:100,description:"Strikes first with a sneaky punch."},nastyPlot:{id:"nastyPlot",name:"Nasty Plot",type:k.Dark,power:0,pp:10,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Plots something devious to boost attack."},petalBlizzard:{id:"petalBlizzard",name:"Petal Blizzard",type:k.Fairy,power:16,pp:8,range:"around",accuracy:95,description:"Whips up a violent storm of petals."},crushClaw:{id:"crushClaw",name:"Crush Claw",type:k.Normal,power:15,pp:10,range:"front1",accuracy:95,description:"Crushes the foe with sharp claws."},rest:{id:"rest",name:"Rest",type:k.Normal,power:0,pp:5,range:"self",accuracy:100,effect:"heal",effectChance:100,description:"Falls asleep to fully restore HP."},waterSpout:{id:"waterSpout",name:"Water Spout",type:k.Water,power:22,pp:4,range:"room",accuracy:85,description:"Erupts a massive geyser that floods the entire room."},dragonAscent:{id:"dragonAscent",name:"Dragon Ascent",type:k.Fire,power:20,pp:4,range:"frontLine",accuracy:90,effect:"burn",effectChance:40,description:"Launches a blazing pillar of draconic flame."},frenzyPlant:{id:"frenzyPlant",name:"Frenzy Plant",type:k.Grass,power:22,pp:4,range:"around",accuracy:85,description:"Massive roots erupt from the ground in all directions."},voltTackle:{id:"voltTackle",name:"Volt Tackle",type:k.Electric,power:20,pp:5,range:"front2",accuracy:90,effect:"paralyze",effectChance:40,description:"A devastating electric charge that may paralyze."},sludgeWave:{id:"sludgeWave",name:"Sludge Wave",type:k.Poison,power:18,pp:5,range:"room",accuracy:90,description:"Engulfs the room in a toxic tidal wave."},tectonicRage:{id:"tectonicRage",name:"Tectonic Rage",type:k.Ground,power:22,pp:4,range:"room",accuracy:85,description:"Shatters the earth with cataclysmic force."},rockPolish:{id:"rockPolish",name:"Rock Polish",type:k.Rock,power:0,pp:10,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Polishes body to sharply raise attack speed."},megaPunch:{id:"megaPunch",name:"Mega Punch",type:k.Fighting,power:20,pp:5,range:"front1",accuracy:85,description:"Delivers a devastating punch with tremendous force."},doomDesire:{id:"doomDesire",name:"Doom Desire",type:k.Steel,power:22,pp:4,range:"room",accuracy:85,description:"Concentrates light into a devastating beam that fills the room."},shadowRave:{id:"shadowRave",name:"Shadow Rave",type:k.Ghost,power:20,pp:5,range:"around",accuracy:90,effect:"burn",effectChance:30,description:"Unleashes a frenzied wave of spectral energy all around."},sheerCold:{id:"sheerCold",name:"Sheer Cold",type:k.Ice,power:22,pp:4,range:"room",accuracy:80,description:"Unleashes an absolute zero blast that fills the entire room."},darkVoid:{id:"darkVoid",name:"Dark Void",type:k.Dark,power:20,pp:5,range:"room",accuracy:85,effect:"paralyze",effectChance:40,description:"Drags foes into a void of darkness. May paralyze."},moonforce:{id:"moonforce",name:"Moonforce",type:k.Fairy,power:22,pp:4,range:"around",accuracy:90,description:"Channels the power of the full moon to strike all nearby foes."},eternaBeam:{id:"eternaBeam",name:"Eterna Beam",type:k.Dragon,power:22,pp:4,range:"frontLine",accuracy:85,description:"Fires a devastating beam of draconic energy in a straight line."},oblivionWing:{id:"oblivionWing",name:"Oblivion Wing",type:k.Flying,power:20,pp:5,range:"room",accuracy:90,description:"Sweeps the room with destructive wind that drains life force."},gigaImpact:{id:"gigaImpact",name:"Giga Impact",type:k.Normal,power:22,pp:4,range:"front1",accuracy:85,description:"Charges with the full power of the body for a devastating blow."},shellSmash:{id:"shellSmash",name:"Shell Smash",type:k.Water,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Shatters its shell to drastically raise attack power."},hydroCannon:{id:"hydroCannon",name:"Hydro Cannon",type:k.Water,power:24,pp:3,range:"frontLine",accuracy:85,description:"Fires a devastating cannon of pressurized water."},blastBurn:{id:"blastBurn",name:"Blast Burn",type:k.Fire,power:24,pp:3,range:"room",accuracy:80,effect:"burn",effectChance:50,description:"Detonates a cataclysmic inferno that engulfs the entire room."},mysticFire:{id:"mysticFire",name:"Mystical Fire",type:k.Fire,power:18,pp:6,range:"around",accuracy:90,effect:"burn",effectChance:30,description:"Unleashes mystical flames that sear everything nearby."},woodHammer:{id:"woodHammer",name:"Wood Hammer",type:k.Grass,power:22,pp:4,range:"front1",accuracy:90,description:"Slams the foe with an enormous log-like arm."},leafBlade:{id:"leafBlade",name:"Leaf Blade",type:k.Grass,power:18,pp:6,range:"front2",accuracy:95,description:"Slashes with a razor-sharp leaf blade."},thunder:{id:"thunder",name:"Thunder",type:k.Electric,power:22,pp:4,range:"room",accuracy:75,effect:"paralyze",effectChance:40,description:"Calls down a devastating thunderbolt that fills the room."},crossChop:{id:"crossChop",name:"Cross Chop",type:k.Fighting,power:18,pp:6,range:"front1",accuracy:85,description:"Delivers a double-handed chop with tremendous force."},toxicWave:{id:"toxicWave",name:"Toxic Wave",type:k.Poison,power:22,pp:4,range:"room",accuracy:85,effect:"burn",effectChance:40,description:"Releases a tidal wave of deadly toxins across the room."},venomDrench:{id:"venomDrench",name:"Venom Drench",type:k.Poison,power:16,pp:8,range:"around",accuracy:90,effect:"burn",effectChance:50,description:"Drenches all nearby foes in corrosive venom."},stompingTantrum:{id:"stompingTantrum",name:"Stomping Tantrum",type:k.Ground,power:20,pp:5,range:"around",accuracy:90,description:"Stomps the ground in a rage, crushing everything nearby."},fissure:{id:"fissure",name:"Fissure",type:k.Ground,power:24,pp:3,range:"frontLine",accuracy:80,description:"Opens a massive crack in the earth along a straight line."},sacredSword:{id:"sacredSword",name:"Sacred Sword",type:k.Fighting,power:22,pp:5,range:"front2",accuracy:95,description:"Slashes with a blade of righteous energy that ignores defenses."},tripleAxel:{id:"tripleAxel",name:"Triple Axel",type:k.Ice,power:20,pp:5,range:"front1",accuracy:85,description:"Delivers three consecutive spinning kicks of escalating power."},highJumpKick:{id:"highJumpKick",name:"High Jump Kick",type:k.Fighting,power:24,pp:4,range:"front1",accuracy:85,description:"Leaps high and delivers a devastating knee strike."},clangorousSoul:{id:"clangorousSoul",name:"Clangorous Soul",type:k.Dragon,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Sacrifices HP to raise all stats by channeling draconic resonance."},kingsShield:{id:"kingsShield",name:"King's Shield",type:k.Steel,power:0,pp:5,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Assumes a defensive stance with a spectral shield."},hexBlast:{id:"hexBlast",name:"Hex Blast",type:k.Ghost,power:22,pp:5,range:"room",accuracy:85,effect:"burn",effectChance:30,description:"Unleashes a cursed explosion of spectral energy across the room."},recover:{id:"recover",name:"Recover",type:k.Normal,power:0,pp:5,range:"self",accuracy:100,effect:"heal",effectChance:100,description:"Restores a large amount of HP by regenerating cells."},destinyBond:{id:"destinyBond",name:"Destiny Bond",type:k.Ghost,power:0,pp:3,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Links fate with the foe  boosts defense as a spectral ward."},auroraVeil:{id:"auroraVeil",name:"Aurora Veil",type:k.Ice,power:0,pp:5,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Creates an aurora barrier that raises defense."},aquaFang:{id:"aquaFang",name:"Aqua Fang",type:k.Water,power:28,pp:10,range:"front1",accuracy:90,effect:"burn",effectChance:20,description:"Bites with water-coated fangs that can leave a burning wound."},nightDaze:{id:"nightDaze",name:"Night Daze",type:k.Dark,power:30,pp:8,range:"around",accuracy:85,effect:"paralyze",effectChance:30,description:"Unleashes a wave of dark illusions that can paralyze foes."},sparklingAria:{id:"sparklingAria",name:"Sparkling Aria",type:k.Water,power:30,pp:8,range:"room",accuracy:85,description:"Sings a dazzling melody that releases bursting water balloons across the room."},spiritShackle:{id:"spiritShackle",name:"Spirit Shackle",type:k.Ghost,power:26,pp:10,range:"frontLine",accuracy:90,effect:"paralyze",effectChance:25,description:"Shoots spectral arrows that pin foes in place."},dragonDarts:{id:"dragonDarts",name:"Dragon Darts",type:k.Dragon,power:32,pp:8,range:"front2",accuracy:90,description:"Launches two Dreepy-shaped missiles at the target."},steelBeam:{id:"steelBeam",name:"Steel Beam",type:k.Steel,power:35,pp:5,range:"frontLine",accuracy:85,description:"Fires a massive beam of concentrated steel energy in a straight line."},flareBlitz:{id:"flareBlitz",name:"Flare Blitz",type:k.Fire,power:34,pp:8,range:"front1",accuracy:90,effect:"burn",effectChance:20,description:"Charges with intense flames. May burn the target."},returnStrike:{id:"returnStrike",name:"Return Strike",type:k.Normal,power:30,pp:10,range:"front1",accuracy:95,description:"Strikes with the full power of the bond between trainer and Pokemon."},auroraBeam11:{id:"auroraBeam11",name:"Aurora Beam",type:k.Water,power:30,pp:4,range:"frontLine",accuracy:90,description:"Fires a prismatic beam of crystallized water energy."},tidalCrush:{id:"tidalCrush",name:"Tidal Crush",type:k.Water,power:34,pp:3,range:"room",accuracy:80,description:"Summons an overwhelming tidal wave that crashes through the room."},aeroblast:{id:"aeroblast",name:"Aeroblast",type:k.Water,power:36,pp:3,range:"frontLine",accuracy:85,description:"Fires a vortex of compressed air and water in a devastating line."},calmMind:{id:"calmMind",name:"Calm Mind",type:k.Water,power:0,pp:5,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Calms the mind to sharpen focus and boost attack power."},sacredBlaze:{id:"sacredBlaze",name:"Sacred Blaze",type:k.Fire,power:36,pp:3,range:"room",accuracy:80,effect:"burn",effectChance:50,description:"Unleashes sacred flames that engulf the entire room in divine fire."},fireForce:{id:"fireForce",name:"Fire Force",type:k.Fire,power:30,pp:5,range:"around",accuracy:90,effect:"burn",effectChance:40,description:"Radiates intense heat in all directions, searing everything nearby."},holyDive:{id:"holyDive",name:"Holy Dive",type:k.Fire,power:34,pp:4,range:"front2",accuracy:85,effect:"burn",effectChance:30,description:"Dives from the heavens wreathed in sacred flames."},verdantWrath:{id:"verdantWrath",name:"Verdant Wrath",type:k.Grass,power:34,pp:3,range:"room",accuracy:80,description:"Summons the fury of nature to shatter the room with living vines."},healingWish:{id:"healingWish",name:"Healing Wish",type:k.Grass,power:0,pp:3,range:"self",accuracy:100,effect:"heal",effectChance:100,description:"Channels the power of life to fully restore HP."},sacredBlade:{id:"sacredBlade",name:"Sacred Blade",type:k.Grass,power:30,pp:5,range:"front2",accuracy:95,description:"Slashes with a blade formed from concentrated natural energy."},boltStrike:{id:"boltStrike",name:"Bolt Strike",type:k.Electric,power:36,pp:3,range:"front2",accuracy:85,effect:"paralyze",effectChance:50,description:"Strikes with a massive bolt of lightning that may paralyze."},fusionBolt:{id:"fusionBolt",name:"Fusion Bolt",type:k.Electric,power:34,pp:4,range:"frontLine",accuracy:85,effect:"paralyze",effectChance:40,description:"Launches a sphere of crackling electric fusion energy."},thunderFang:{id:"thunderFang",name:"Thunder Fang",type:k.Electric,power:28,pp:6,range:"front1",accuracy:95,effect:"paralyze",effectChance:30,description:"Bites with electrified fangs that may paralyze."},beastBoost:{id:"beastBoost",name:"Beast Boost",type:k.Poison,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Draws upon Ultra Beast power to drastically raise attack."},powerGem:{id:"powerGem",name:"Power Gem",type:k.Poison,power:30,pp:5,range:"frontLine",accuracy:90,description:"Fires a beam of crystallized toxic energy in a straight line."},toxicDeluge:{id:"toxicDeluge",name:"Toxic Deluge",type:k.Poison,power:28,pp:6,range:"around",accuracy:90,effect:"burn",effectChance:40,description:"Drenches nearby foes in vile, corrosive venom."},venomStorm:{id:"venomStorm",name:"Venom Storm",type:k.Poison,power:34,pp:4,range:"room",accuracy:85,effect:"paralyze",effectChance:30,description:"Unleashes a devastating storm of noxious dragon-tainted venom across the room."},continentalCrush:{id:"continentalCrush",name:"Continental Crush",type:k.Ground,power:36,pp:3,range:"room",accuracy:80,description:"Summons the weight of a continent to crush everything in the room."},earthShatter:{id:"earthShatter",name:"Earth Shatter",type:k.Ground,power:30,pp:5,range:"around",accuracy:90,description:"Shatters the ground with volcanic force, devastating all nearby foes."},sandVortex:{id:"sandVortex",name:"Sand Vortex",type:k.Ground,power:28,pp:6,range:"front2",accuracy:90,effect:"paralyze",effectChance:40,description:"Traps the foe in a devastating vortex of swirling sand."},lockOn:{id:"lockOn",name:"Lock-On",type:k.Rock,power:0,pp:8,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"The user locks on with precision, guaranteeing the next strike lands with devastating force."},hammeringForce:{id:"hammeringForce",name:"Hammering Force",type:k.Rock,power:32,pp:5,range:"front1",accuracy:85,effect:"paralyze",effectChance:30,description:"A colossal blow from the golem's stone fist that can stun the target."},ultraWall:{id:"ultraWall",name:"Ultra Wall",type:k.Rock,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Stacks Ultra Beast bricks into an impenetrable fortress of stone."},beastCrush:{id:"beastCrush",name:"Beast Crush",type:k.Rock,power:30,pp:5,range:"around",accuracy:90,description:"The living wall topples onto all surrounding foes with crushing weight."},technoBlast:{id:"technoBlast",name:"Techno Blast",type:k.Bug,power:32,pp:5,range:"frontLine",accuracy:90,effect:"burn",effectChance:30,description:"Fires a high-tech beam of concentrated energy that can scorch targets."},magnetBomb:{id:"magnetBomb",name:"Magnet Bomb",type:k.Bug,power:26,pp:8,range:"front2",accuracy:100,description:"A homing projectile that never misses its mark."},beastImpact:{id:"beastImpact",name:"Beast Impact",type:k.Bug,power:30,pp:5,range:"front1",accuracy:90,effect:"atkUp",effectChance:50,description:"A monstrous charge powered by Ultra Beast energy that boosts the user's strength."},leechPunch:{id:"leechPunch",name:"Leech Punch",type:k.Bug,power:24,pp:8,range:"front1",accuracy:95,effect:"heal",effectChance:100,description:"Drains the foe's vitality with a bloodsucking punch to restore HP."},ironWill:{id:"ironWill",name:"Iron Will",type:k.Fighting,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"The iron musketeer steels its resolve, raising defense to legendary heights."},sacredCharge:{id:"sacredCharge",name:"Sacred Charge",type:k.Fighting,power:30,pp:5,range:"front2",accuracy:90,description:"A righteous charge that strikes with the force of justice itself."},spectralThief:{id:"spectralThief",name:"Spectral Thief",type:k.Fighting,power:28,pp:6,range:"front1",accuracy:95,effect:"atkUp",effectChance:50,description:"Steals the target's power from the shadows, boosting the user's attack."},soulStealing:{id:"soulStealing",name:"Soul-Stealing",type:k.Fighting,power:32,pp:5,range:"around",accuracy:85,description:"A forbidden technique that rips away the essence of all nearby foes."},ironJudgment:{id:"ironJudgment",name:"Iron Judgment",type:k.Steel,power:30,pp:5,range:"frontLine",accuracy:90,effect:"paralyze",effectChance:30,description:"The iron titan passes judgment with a beam of pure metallic force."},registeelBarrier:{id:"registeelBarrier",name:"Registeel Barrier",type:k.Steel,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Erects a barrier of indestructible registeel alloy."},sunsteelStrike:{id:"sunsteelStrike",name:"Sunsteel Strike",type:k.Steel,power:32,pp:5,range:"front1",accuracy:90,effect:"burn",effectChance:30,description:"A sun-charged tackle that blazes through the target like a meteor from the heavens."},solarFlare:{id:"solarFlare",name:"Solar Flare",type:k.Steel,power:28,pp:6,range:"room",accuracy:85,description:"Unleashes the power of the sun in a blinding flash that hits all foes in the room."},shadowRend:{id:"shadowRend",name:"Shadow Rend",type:k.Ghost,power:32,pp:5,range:"front2",accuracy:90,description:"Tears through dimensional barriers to rend the target with antimatter claws."},distortionWave:{id:"distortionWave",name:"Distortion Wave",type:k.Ghost,power:28,pp:6,range:"room",accuracy:85,effect:"paralyze",effectChance:30,description:"Warps reality in the room with distortion world energy, stunning all foes."},moongeistBeam:{id:"moongeistBeam",name:"Moongeist Beam",type:k.Ghost,power:32,pp:5,range:"frontLine",accuracy:90,description:"Fires a beam of spectral moonlight that pierces through all defenses."},phantomEclipse:{id:"phantomEclipse",name:"Phantom Eclipse",type:k.Ghost,power:28,pp:6,range:"around",accuracy:85,effect:"burn",effectChance:30,description:"Engulfs the area in a lunar eclipse that sears all nearby foes with ghostly fire."},psystrike:{id:"psystrike",name:"Psystrike",type:k.Psychic,power:32,pp:5,range:"front2",accuracy:90,description:"Materializes psychic energy into a physical shockwave that tears through defenses."},mindShatter:{id:"mindShatter",name:"Mind Shatter",type:k.Psychic,power:28,pp:6,range:"room",accuracy:85,effect:"paralyze",effectChance:35,description:"Overwhelms every mind in the room with raw psychic force."},psychoBoost:{id:"psychoBoost",name:"Psycho Boost",type:k.Psychic,power:35,pp:4,range:"front1",accuracy:85,description:"Unleashes the full power of a mutated psychic genome in a devastating burst."},cosmicRay:{id:"cosmicRay",name:"Cosmic Ray",type:k.Psychic,power:28,pp:6,range:"frontLine",accuracy:90,effect:"burn",effectChance:25,description:"Fires a concentrated ray of cosmic radiation that scorches everything in its path."},glacialPrison:{id:"glacialPrison",name:"Glacial Prison",type:k.Ice,power:30,pp:5,range:"front1",accuracy:90,effect:"paralyze",effectChance:35,description:"Encases the target in a prison of ancient ice that locks their body in place."},frigidBarrier:{id:"frigidBarrier",name:"Frigid Barrier",type:k.Ice,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"The golem of ice erects an impenetrable wall of sub-zero frost around itself."},glaciate:{id:"glaciate",name:"Glaciate",type:k.Ice,power:32,pp:5,range:"frontLine",accuracy:90,effect:"paralyze",effectChance:25,description:"Unleashes a wave of freezing energy that crystallizes everything in its path."},frozenWorld:{id:"frozenWorld",name:"Frozen World",type:k.Ice,power:28,pp:6,range:"room",accuracy:85,description:"Plunges the entire room into absolute cold, striking all foes with glacial force."},iceBreath:{id:"iceBreath",name:"Ice Breath",type:k.Ice,power:26,pp:8,range:"front2",accuracy:95,description:"Exhales a blast of crystalline ice that cuts through foes in a line."},absoluteZero:{id:"absoluteZero",name:"Absolute Zero",type:k.Ice,power:35,pp:4,range:"front1",accuracy:85,description:"Concentrates cold to the theoretical limit, annihilating the target at zero kelvin."},oblivionShroud:{id:"oblivionShroud",name:"Oblivion Shroud",type:k.Dark,power:30,pp:5,range:"around",accuracy:90,effect:"burn",effectChance:30,description:"Wraps all nearby foes in a cocoon of destructive dark energy that sears their essence."},deathWing:{id:"deathWing",name:"Death Wing",type:k.Dark,power:32,pp:5,range:"frontLine",accuracy:90,effect:"heal",effectChance:100,description:"Sweeps with wings of destruction that drain life force from all in the line."},hyperspaceFury:{id:"hyperspaceFury",name:"Hyperspace Fury",type:k.Dark,power:28,pp:6,range:"room",accuracy:85,effect:"paralyze",effectChance:30,description:"Tears open rifts in space to unleash a barrage of dark energy across the room."},darkVortex:{id:"darkVortex",name:"Dark Vortex",type:k.Dark,power:26,pp:8,range:"front2",accuracy:95,description:"Opens a swirling vortex of darkness that pulls in and crushes foes."},deathGaze:{id:"deathGaze",name:"Death Gaze",type:k.Dark,power:0,pp:6,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"The destruction deity focuses its lethal gaze, amplifying its destructive power."},dimensionalRift:{id:"dimensionalRift",name:"Dimensional Rift",type:k.Dark,power:35,pp:4,range:"front1",accuracy:85,description:"Tears open a rift to another dimension, engulfing the target in spatial annihilation."},geomancy:{id:"geomancy",name:"Geomancy",type:k.Fairy,power:0,pp:5,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Absorbs the life energy of the earth to dramatically boost all offensive power."},hornLeech:{id:"hornLeech",name:"Horn Leech",type:k.Fairy,power:28,pp:6,range:"front1",accuracy:95,effect:"heal",effectChance:100,description:"Strikes with luminous antlers that drain vitality from the target."},auroraBeam:{id:"auroraBeam",name:"Aurora Beam",type:k.Fairy,power:30,pp:5,range:"frontLine",accuracy:90,description:"Fires a beam of prismatic aurora light that pierces through all foes in a line."},fleurCannon:{id:"fleurCannon",name:"Fleur Cannon",type:k.Fairy,power:35,pp:4,range:"front1",accuracy:85,description:"Fires a devastating blast of fairy energy from the artificial soul-heart."},heartSwap:{id:"heartSwap",name:"Heart Swap",type:k.Fairy,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"The artificial Pokemon recalibrates its soul-heart to bolster its defenses."},fairyLockdown:{id:"fairyLockdown",name:"Fairy Lockdown",type:k.Fairy,power:28,pp:6,range:"room",accuracy:85,effect:"paralyze",effectChance:30,description:"Saturates the room with binding fairy dust that immobilizes all foes."},roarOfTime:{id:"roarOfTime",name:"Roar of Time",type:k.Dragon,power:35,pp:4,range:"front1",accuracy:85,description:"A deafening roar that warps the flow of time itself to obliterate the target."},temporalBeam:{id:"temporalBeam",name:"Temporal Beam",type:k.Dragon,power:28,pp:6,range:"frontLine",accuracy:90,effect:"paralyze",effectChance:30,description:"Fires a beam of temporal energy that disrupts the timeline of all in its path."},skyBreaker:{id:"skyBreaker",name:"Sky Breaker",type:k.Dragon,power:30,pp:5,range:"around",accuracy:90,description:"Shatters the atmosphere with draconic fury, blasting all nearby foes."},dragonForce:{id:"dragonForce",name:"Dragon Force",type:k.Dragon,power:0,pp:6,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"The sky-high dragon channels the ozone layer into raw draconic power."},flashCrush:{id:"flashCrush",name:"Flash Crush",type:k.Dragon,power:28,pp:6,range:"room",accuracy:85,effect:"burn",effectChance:25,description:"Unleashes a flash of diamond-hard temporal energy that scorches the entire room."},adamantOrb:{id:"adamantOrb",name:"Adamant Orb",type:k.Dragon,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Channels the adamant orb's power to reinforce defenses with temporal energy."},hurricaneForce:{id:"hurricaneForce",name:"Hurricane Force",type:k.Flying,power:30,pp:5,range:"room",accuracy:85,description:"Unleashes a category-five hurricane that devastates everything in the room."},tempestWing:{id:"tempestWing",name:"Tempest Wing",type:k.Flying,power:32,pp:5,range:"frontLine",accuracy:90,description:"Slashes through foes with razor-sharp wings wreathed in storm winds."},glacialGale:{id:"glacialGale",name:"Glacial Gale",type:k.Flying,power:28,pp:6,range:"around",accuracy:90,effect:"paralyze",effectChance:30,description:"Whips up freezing winds around the user that bite into all nearby foes."},blizzardWind:{id:"blizzardWind",name:"Blizzard Wind",type:k.Flying,power:26,pp:8,range:"front2",accuracy:95,description:"A cutting gust of frozen wind that tears through foes in a line."},windGodSurge:{id:"windGodSurge",name:"Wind God Surge",type:k.Flying,power:35,pp:4,range:"front1",accuracy:85,description:"The incarnate of wind unleashes a surge of divine storm power on the target."},frostAura:{id:"frostAura",name:"Frost Aura",type:k.Flying,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Surrounds itself with an aura of permafrost that deflects incoming attacks."},judgment:{id:"judgment",name:"Judgment",type:k.Normal,power:35,pp:4,range:"front1",accuracy:85,description:"The creator deity passes ultimate judgment with a pillar of divine light."},divineDecree:{id:"divineDecree",name:"Divine Decree",type:k.Normal,power:28,pp:6,range:"room",accuracy:85,effect:"burn",effectChance:25,description:"Issues a decree of creation energy that scorches all foes in the room."},creatorAura:{id:"creatorAura",name:"Creator Aura",type:k.Normal,power:0,pp:5,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"The original one channels the power of creation to amplify its attacks."},crushGrip:{id:"crushGrip",name:"Crush Grip",type:k.Normal,power:32,pp:5,range:"front1",accuracy:90,description:"Crushes the target with colossal hands of unimaginable strength."},confuseRay:{id:"confuseRay",name:"Confuse Ray",type:k.Normal,power:26,pp:8,range:"front2",accuracy:95,effect:"paralyze",effectChance:40,description:"Fires a sinister ray that scrambles the target's senses."},titanForce:{id:"titanForce",name:"Titan Force",type:k.Normal,power:30,pp:5,range:"around",accuracy:90,description:"The continental titan slams its massive fists into the ground, striking all nearby."},slowStart:{id:"slowStart",name:"Slow Start",type:k.Normal,power:0,pp:6,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"The colossal titan takes time to warm up, fortifying its defenses in the process."},originPulseMax:{id:"originPulseMax",name:"Origin Pulse MAX",type:k.Water,power:40,pp:3,range:"room",accuracy:80,description:"The sea god unleashes primordial tidal waves that devour the entire room."},primordialSurge:{id:"primordialSurge",name:"Primordial Surge",type:k.Water,power:36,pp:4,range:"frontLine",accuracy:85,description:"Channels the ancient ocean's fury into a piercing torrent of water."},oceanSovereignty:{id:"oceanSovereignty",name:"Ocean Sovereignty",type:k.Water,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"The lord of the seas asserts dominion, vastly amplifying attack power."},abyssalDeluge:{id:"abyssalDeluge",name:"Abyssal Deluge",type:k.Water,power:34,pp:5,range:"around",accuracy:90,description:"Summons crushing deep-sea pressure that batters all nearby foes."},spacialRend:{id:"spacialRend",name:"Spacial Rend",type:k.Water,power:38,pp:3,range:"front2",accuracy:85,description:"Tears apart the fabric of space itself with a dimensional blade of water energy."},dimensionalTide:{id:"dimensionalTide",name:"Dimensional Tide",type:k.Water,power:32,pp:5,range:"frontLine",accuracy:90,description:"Sends a wave of spatial distortion crashing through foes in a line."},voidBarrier:{id:"voidBarrier",name:"Void Barrier",type:k.Water,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Wraps itself in layers of folded space to deflect all incoming attacks."},blueFlare:{id:"blueFlare",name:"Blue Flare",type:k.Fire,power:40,pp:3,range:"room",accuracy:80,effect:"burn",effectChance:50,description:"The vast white dragon engulfs the room in searing blue flames of truth."},fusionFlare:{id:"fusionFlare",name:"Fusion Flare",type:k.Fire,power:38,pp:3,range:"frontLine",accuracy:85,effect:"burn",effectChance:40,description:"Launches a colossal fireball fused with dragon energy that incinerates a line of foes."},truthFlame:{id:"truthFlame",name:"Truth Flame",type:k.Fire,power:34,pp:5,range:"around",accuracy:90,effect:"burn",effectChance:30,description:"Radiates the searing flames of absolute truth in all directions."},dracoInferno:{id:"dracoInferno",name:"Draco Inferno",type:k.Fire,power:36,pp:4,range:"front2",accuracy:85,description:"Breathes a torrent of dragon fire that reduces everything to cinders."},vCreate:{id:"vCreate",name:"V-Create",type:k.Fire,power:40,pp:2,range:"front1",accuracy:85,description:"The victory Pokemon concentrates all its power into a devastating V-shaped flame burst."},searingVictory:{id:"searingVictory",name:"Searing Victory",type:k.Fire,power:34,pp:5,range:"around",accuracy:90,effect:"burn",effectChance:35,description:"Radiates an aura of blazing victory that scorches all nearby enemies."},victoryCharge:{id:"victoryCharge",name:"Victory Charge",type:k.Fire,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Channels the spirit of certain victory to dramatically boost attack power."},seedFlareMax:{id:"seedFlareMax",name:"Seed Flare MAX",type:k.Grass,power:40,pp:3,range:"room",accuracy:80,description:"The gratitude Pokemon detonates a colossal seed of concentrated nature energy in the room."},aromatherapy:{id:"aromatherapy",name:"Aromatherapy",type:k.Grass,power:0,pp:3,range:"self",accuracy:100,effect:"heal",effectChance:100,description:"Releases a soothing fragrance of gratitude that fully restores HP."},floralWind:{id:"floralWind",name:"Floral Wind",type:k.Grass,power:34,pp:5,range:"frontLine",accuracy:90,description:"Whips up a gust of razor-sharp flower petals that tears through a line of foes."},gratitudeBloom:{id:"gratitudeBloom",name:"Gratitude Bloom",type:k.Grass,power:32,pp:5,range:"around",accuracy:90,description:"Blooms with overwhelming gratitude energy, striking all nearby enemies."},natureMadness:{id:"natureMadness",name:"Nature's Madness",type:k.Grass,power:38,pp:3,range:"front2",accuracy:85,description:"The land spirit guardian unleashes nature's unbridled fury on the target."},guardianVerdure:{id:"guardianVerdure",name:"Guardian Verdure",type:k.Grass,power:34,pp:4,range:"room",accuracy:80,description:"The deity of the wilds summons a tangle of sacred vines that lash the entire room."},jungleStrike:{id:"jungleStrike",name:"Jungle Strike",type:k.Grass,power:36,pp:4,range:"front1",accuracy:90,description:"Channels the raw power of the jungle into a single devastating blow."},grassySurge:{id:"grassySurge",name:"Grassy Surge",type:k.Grass,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"The land spirit channels the sacred terrain to dramatically boost attack power."},thunderGodWrath:{id:"thunderGodWrath",name:"Thunder God Wrath",type:k.Electric,power:40,pp:3,range:"room",accuracy:80,effect:"paralyze",effectChance:40,description:"The thunder god unleashes divine lightning that strikes everything in the room."},stormHammer:{id:"stormHammer",name:"Storm Hammer",type:k.Electric,power:38,pp:3,range:"front1",accuracy:85,effect:"paralyze",effectChance:50,description:"Hurls a concentrated bolt of storm energy that smashes the target."},voltSurge:{id:"voltSurge",name:"Volt Surge",type:k.Electric,power:34,pp:5,range:"frontLine",accuracy:90,description:"Sends a devastating surge of electricity crackling through a line of foes."},thunderousRoar:{id:"thunderousRoar",name:"Thunderous Roar",type:k.Electric,power:32,pp:5,range:"around",accuracy:90,effect:"paralyze",effectChance:25,description:"Roars with the fury of a thousand storms, shocking all nearby foes."},plasmaFists:{id:"plasmaFists",name:"Plasma Fists",type:k.Electric,power:40,pp:3,range:"front1",accuracy:85,effect:"paralyze",effectChance:40,description:"The thunderclap Pokemon strikes with fists wreathed in blazing plasma."},thunderousKick:{id:"thunderousKick",name:"Thunderous Kick",type:k.Electric,power:36,pp:4,range:"front2",accuracy:90,description:"Delivers a lightning-fast kick charged with massive electrical energy."},closeThunder:{id:"closeThunder",name:"Close Thunder",type:k.Electric,power:34,pp:5,range:"around",accuracy:90,description:"Discharges point-blank lightning in all directions around the user."},electricAura:{id:"electricAura",name:"Electric Aura",type:k.Electric,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Charges the body with overwhelming electrical energy to boost attacks."},eternaBeamMax:{id:"eternaBeamMax",name:"Eternabeam MAX",type:k.Poison,power:40,pp:2,range:"frontLine",accuracy:80,description:"Fires an annihilating beam of concentrated Dynamax energy that tears through everything."},dynamaxCannon:{id:"dynamaxCannon",name:"Dynamax Cannon",type:k.Poison,power:38,pp:3,range:"front2",accuracy:85,description:"Launches a devastating cannon of Dynamax energy at the target."},cosmicVenom:{id:"cosmicVenom",name:"Cosmic Venom",type:k.Poison,power:34,pp:5,range:"room",accuracy:85,effect:"burn",effectChance:35,description:"Floods the room with otherworldly toxic energy from beyond the stars."},infiniteAbsorb:{id:"infiniteAbsorb",name:"Infinite Absorb",type:k.Poison,power:0,pp:3,range:"self",accuracy:100,effect:"heal",effectChance:100,description:"The eternal Pokemon absorbs ambient energy to regenerate itself endlessly."},venomDrizzle:{id:"venomDrizzle",name:"Venom Drizzle",type:k.Poison,power:36,pp:4,range:"room",accuracy:80,effect:"burn",effectChance:40,description:"Rains down concentrated Ultra Beast venom that corrodes everything in the room."},ultraSting:{id:"ultraSting",name:"Ultra Sting",type:k.Poison,power:38,pp:3,range:"front1",accuracy:90,description:"Strikes with an ultra-dimensional stinger brimming with alien toxins."},toxicNeedles:{id:"toxicNeedles",name:"Toxic Needles",type:k.Poison,power:32,pp:5,range:"around",accuracy:90,effect:"burn",effectChance:30,description:"Fires a volley of corrosive needles in all directions from its tiny body."},ultraBoost:{id:"ultraBoost",name:"Ultra Boost",type:k.Poison,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Channels Ultra Space energy to dramatically increase attack power."},thousandArrows:{id:"thousandArrows",name:"Thousand Arrows",type:k.Ground,power:40,pp:3,range:"room",accuracy:80,description:"The order Pokemon launches a thousand earthen arrows that strike every foe in the room."},landWrath:{id:"landWrath",name:"Land's Wrath",type:k.Ground,power:38,pp:3,range:"around",accuracy:85,description:"The earth itself rises up in wrath, crushing all nearby foes under tectonic fury."},coreEnforcer:{id:"coreEnforcer",name:"Core Enforcer",type:k.Ground,power:36,pp:4,range:"frontLine",accuracy:85,description:"Fires a beam from the earth's core that pierces through everything in its path."},orderRestoration:{id:"orderRestoration",name:"Order Restoration",type:k.Ground,power:0,pp:3,range:"self",accuracy:100,effect:"heal",effectChance:100,description:"The guardian of order restores its cells and regenerates to full vitality."},drillRunMax:{id:"drillRunMax",name:"Drill Run MAX",type:k.Ground,power:38,pp:3,range:"front2",accuracy:90,description:"Spins like a massive drill and bores through the target with tremendous force."},ironDrill:{id:"ironDrill",name:"Iron Drill",type:k.Ground,power:36,pp:4,range:"front1",accuracy:90,description:"Strikes with steel-hard claws spinning at incredible speed."},earthquakeStrike:{id:"earthquakeStrike",name:"Earthquake Strike",type:k.Ground,power:34,pp:5,range:"around",accuracy:90,description:"Slams the ground with devastating force, sending tremors through all nearby foes."},sandRush:{id:"sandRush",name:"Sand Rush",type:k.Ground,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Burrows rapidly through the earth to gain momentum and boost attack power."},accelerock:{id:"accelerock",name:"Accelerock",type:k.Rock,power:38,pp:4,range:"front2",accuracy:90,description:"Charges at blinding speed with rocky fangs bared to shatter all before it."},stoneFangCrush:{id:"stoneFangCrush",name:"Stone Fang Crush",type:k.Rock,power:40,pp:3,range:"room",accuracy:80,description:"Summons a storm of jagged stone fangs that rain down upon the entire room."},duskHowl:{id:"duskHowl",name:"Dusk Howl",type:k.Rock,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Howls at the twilight sky to awaken primal fury, vastly raising attack."},ancientFangBarrage:{id:"ancientFangBarrage",name:"Ancient Fang Barrage",type:k.Rock,power:36,pp:4,range:"frontLine",accuracy:85,description:"Launches a volley of petrified fangs that pierces through a line of enemies."},meteorCrush:{id:"meteorCrush",name:"Meteor Crush",type:k.Rock,power:40,pp:3,range:"room",accuracy:80,description:"Calls down a massive meteor that obliterates the entire room with stone fragments."},crystalBarrier:{id:"crystalBarrier",name:"Crystal Barrier",type:k.Rock,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Surrounds itself with crystallized rock that drastically hardens defenses."},geoForce:{id:"geoForce",name:"Geo Force",type:k.Rock,power:38,pp:3,range:"around",accuracy:85,description:"Compresses geological energy into an eruption of razor-sharp crystals."},diamondStormMax:{id:"diamondStormMax",name:"Diamond Storm MAX",type:k.Rock,power:36,pp:4,range:"frontLine",accuracy:85,description:"Unleashes a storm of diamond-hard rock shards that tears through foes in a line."},fieryDance:{id:"fieryDance",name:"Fiery Dance",type:k.Bug,power:38,pp:4,range:"around",accuracy:90,description:"Dances amidst blazing scales, scorching all nearby foes with searing heat."},sunMothStorm:{id:"sunMothStorm",name:"Sun Moth Storm",type:k.Bug,power:40,pp:3,range:"room",accuracy:80,description:"Summons a catastrophic storm of burning moth scales that engulfs the entire room."},quiverDanceMax:{id:"quiverDanceMax",name:"Quiver Dance MAX",type:k.Bug,power:0,pp:3,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Performs the ultimate quiver dance to transcend normal limits, vastly raising attack."},solarFlareWings:{id:"solarFlareWings",name:"Solar Flare Wings",type:k.Bug,power:36,pp:4,range:"frontLine",accuracy:85,description:"Spreads wings of blinding solar light that incinerates foes in a line."},firstImpression:{id:"firstImpression",name:"First Impression",type:k.Bug,power:40,pp:3,range:"front2",accuracy:85,description:"Strikes with devastating force in a surprise assault that crushes all resistance."},armoredAssault:{id:"armoredAssault",name:"Armored Assault",type:k.Bug,power:36,pp:4,range:"frontLine",accuracy:85,description:"Charges forward in heavy armor, smashing through a line of enemies."},emergencyShell:{id:"emergencyShell",name:"Emergency Shell",type:k.Bug,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Retreats into an ultra-hard exoskeleton that drastically raises defense."},liquidSlash:{id:"liquidSlash",name:"Liquid Slash",type:k.Bug,power:38,pp:4,range:"around",accuracy:90,description:"Slashes with water-infused claws that cut through all nearby foes."},wickedBlow:{id:"wickedBlow",name:"Wicked Blow",type:k.Fighting,power:40,pp:3,range:"front2",accuracy:85,description:"Channels dark martial arts into a devastating single strike that shatters defenses."},surgingStrikesMax:{id:"surgingStrikesMax",name:"Surging Strikes MAX",type:k.Fighting,power:40,pp:3,range:"room",accuracy:80,description:"Unleashes a torrent of flowing strikes that batter every enemy in the room."},unseeableFist:{id:"unseeableFist",name:"Unseeable Fist",type:k.Fighting,power:36,pp:4,range:"frontLine",accuracy:90,description:"Punches so fast it becomes invisible, piercing through a line of enemies."},martialSpirit:{id:"martialSpirit",name:"Martial Spirit",type:k.Fighting,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Focuses martial spirit to transcend physical limits, vastly raising attack."},secretSword:{id:"secretSword",name:"Secret Sword",type:k.Fighting,power:38,pp:4,range:"front2",accuracy:90,description:"Draws the legendary horn-blade to deliver a sacred slash that cleaves through armor."},resoluteCharge:{id:"resoluteCharge",name:"Resolute Charge",type:k.Fighting,power:40,pp:3,range:"room",accuracy:80,description:"Charges with unwavering resolve, trampling every foe in the room underfoot."},mysticWaterBlade:{id:"mysticWaterBlade",name:"Mystic Water Blade",type:k.Fighting,power:36,pp:4,range:"frontLine",accuracy:85,description:"Swings a blade of enchanted water that slices through enemies in a line."},justiceHeart:{id:"justiceHeart",name:"Justice Heart",type:k.Fighting,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Burns with the fire of justice, drastically raising attack power."},magmaStorm:{id:"magmaStorm",name:"Magma Storm",type:k.Steel,power:40,pp:3,range:"room",accuracy:80,description:"Summons a vortex of molten steel that engulfs and traps every enemy in the room."},flashCannonMax:{id:"flashCannonMax",name:"Flash Cannon MAX",type:k.Steel,power:38,pp:4,range:"frontLine",accuracy:85,description:"Fires a concentrated beam of metallic light that pierces through all in its path."},lavaPlumeSteel:{id:"lavaPlumeSteel",name:"Lava Plume Steel",type:k.Steel,power:36,pp:4,range:"around",accuracy:90,description:"Erupts with molten steel that scorches all nearby foes with liquid metal."},volcanicArmor:{id:"volcanicArmor",name:"Volcanic Armor",type:k.Steel,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Coats itself in hardened volcanic steel, drastically raising defense."},origamiBlade:{id:"origamiBlade",name:"Origami Blade",type:k.Steel,power:38,pp:4,range:"front2",accuracy:90,description:"Slashes with origami-sharp blade arms that cut through steel like paper."},smartStrikeMax:{id:"smartStrikeMax",name:"Smart Strike MAX",type:k.Steel,power:40,pp:3,range:"room",accuracy:80,description:"Calculates the perfect angle and strikes every enemy in the room with surgical precision."},beastBlade:{id:"beastBlade",name:"Beast Blade",type:k.Steel,power:36,pp:4,range:"frontLine",accuracy:85,description:"Channels Ultra Beast energy into razor-thin blades that slice through a line of foes."},paperThinEdge:{id:"paperThinEdge",name:"Paper-Thin Edge",type:k.Steel,power:34,pp:5,range:"around",accuracy:90,description:"Spins with blades so thin they are invisible, cutting everything nearby."},astralBarrage:{id:"astralBarrage",name:"Astral Barrage",type:k.Ghost,power:40,pp:3,range:"room",accuracy:80,description:"Releases a storm of spectral energy that haunts every soul in the room."},eerieGallop:{id:"eerieGallop",name:"Eerie Gallop",type:k.Ghost,power:38,pp:4,range:"frontLine",accuracy:85,description:"Gallops through the spectral plane, trampling foes in a line with ghostly hooves."},nightmareSteed:{id:"nightmareSteed",name:"Nightmare Steed",type:k.Ghost,power:36,pp:4,range:"around",accuracy:90,description:"Unleashes terrifying nightmares that assault the minds of all nearby enemies."},spectralSurge:{id:"spectralSurge",name:"Spectral Surge",type:k.Ghost,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Absorbs ambient spiritual energy to vastly amplify spectral attack power."},teapotShatter:{id:"teapotShatter",name:"Teapot Shatter",type:k.Ghost,power:0,pp:3,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Shatters its teapot shell to unleash full power, vastly raising attack."},cursedBrew:{id:"cursedBrew",name:"Cursed Brew",type:k.Ghost,power:40,pp:3,range:"room",accuracy:80,description:"Brews a cursed tea that floods the room with soul-draining liquid."},teaTimeTerror:{id:"teaTimeTerror",name:"Tea Time Terror",type:k.Ghost,power:36,pp:4,range:"around",accuracy:90,description:"Forces a haunted tea party that scalds and curses all nearby foes."},spiritPour:{id:"spiritPour",name:"Spirit Pour",type:k.Ghost,power:38,pp:4,range:"frontLine",accuracy:85,description:"Pours out concentrated ghostly essence that drenches foes in a line."},psychicMax:{id:"psychicMax",name:"Psychic MAX",type:k.Psychic,power:40,pp:3,range:"room",accuracy:80,description:"Unleashes the full psychic potential of the original mythical Pokemon upon the entire room."},auraStorm:{id:"auraStorm",name:"Aura Storm",type:k.Psychic,power:38,pp:4,range:"frontLine",accuracy:85,description:"Projects a devastating beam of pure psychic aura that pierces through all in a line."},genesisBarrier:{id:"genesisBarrier",name:"Genesis Barrier",type:k.Psychic,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Manifests the barrier of creation that protected the first Pokemon, vastly raising defense."},transformStrike:{id:"transformStrike",name:"Transform Strike",type:k.Psychic,power:36,pp:4,range:"around",accuracy:90,description:"Transforms psychic energy into destructive force that batters all nearby foes."},lunarBeamMax:{id:"lunarBeamMax",name:"Lunar Beam MAX",type:k.Psychic,power:40,pp:3,range:"room",accuracy:80,description:"Focuses the full power of the crescent moon into a beam that bathes the room in light."},lunarVeil:{id:"lunarVeil",name:"Lunar Veil",type:k.Psychic,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Weaves a veil of lunar aurora light that drastically raises defense."},crescentSlash:{id:"crescentSlash",name:"Crescent Slash",type:k.Psychic,power:38,pp:4,range:"front2",accuracy:90,description:"Slashes with crescent-shaped psychic energy that cleaves through the toughest foes."},lunarBlessing:{id:"lunarBlessing",name:"Lunar Blessing",type:k.Psychic,power:36,pp:4,range:"around",accuracy:90,description:"Releases waves of moon-blessed energy that purifies and damages all nearby foes."},glacialLanceMax:{id:"glacialLanceMax",name:"Glacial Lance MAX",type:k.Ice,power:42,pp:3,range:"frontLine",accuracy:85,description:"Hurls a colossal lance of ancient ice that pierces through all foes in a straight line."},iceRiderCharge:{id:"iceRiderCharge",name:"Ice Rider Charge",type:k.Ice,power:40,pp:3,range:"room",accuracy:80,description:"The spectral king charges with absolute frost, devastating the entire room with glacial power."},crownTundraAura:{id:"crownTundraAura",name:"Crown Tundra Aura",type:k.Ice,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Channels the royal aura of the frozen crown, vastly boosting attack power."},permafrostCrush:{id:"permafrostCrush",name:"Permafrost Crush",type:k.Ice,power:38,pp:4,range:"around",accuracy:90,description:"Slams the ground with frozen might, crushing all adjacent foes under layers of permafrost."},shellSmashMax:{id:"shellSmashMax",name:"Shell Smash MAX",type:k.Normal,power:0,pp:3,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Shatters own shell to drastically raise attack at the cost of defense."},icicleCrashMax:{id:"icicleCrashMax",name:"Icicle Crash MAX",type:k.Ice,power:38,pp:4,range:"front2",accuracy:90,description:"Drops massive icicles on foes in front, dealing devastating ice damage."},razorShell:{id:"razorShell",name:"Razor Shell",type:k.Water,power:36,pp:4,range:"front1",accuracy:95,description:"Slashes with razor-sharp shell edges hardened by deep ocean pressure."},frozenSpikeCannon:{id:"frozenSpikeCannon",name:"Frozen Spike Cannon",type:k.Ice,power:36,pp:4,range:"frontLine",accuracy:85,description:"Fires a barrage of frozen spikes in a straight line that pierce through enemies."},spiritBreak:{id:"spiritBreak",name:"Spirit Break",type:k.Fairy,power:38,pp:4,range:"front1",accuracy:90,description:"Attacks with overwhelming dark fairy power that breaks the target's spirit."},falseSupremacy:{id:"falseSupremacy",name:"False Supremacy",type:k.Dark,power:40,pp:3,range:"room",accuracy:80,description:"Manifests an aura of dark supremacy that crushes the will of all foes in the room."},hairTrap:{id:"hairTrap",name:"Hair Trap",type:k.Dark,power:36,pp:4,range:"around",accuracy:90,effect:"paralyze",effectChance:30,description:"Ensnares nearby foes in dark, sinister hair tendrils that may paralyze."},bulkUpDark:{id:"bulkUpDark",name:"Dark Bulk Up",type:k.Dark,power:0,pp:4,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Channels dark muscle fiber energy to enormously boost attack power."},darkestLariat:{id:"darkestLariat",name:"Darkest Lariat",type:k.Dark,power:40,pp:3,range:"around",accuracy:85,description:"Spins with outstretched arms of dark flame, striking all adjacent foes with devastating force."},maliciousMoonsault:{id:"maliciousMoonsault",name:"Malicious Moonsault",type:k.Dark,power:42,pp:3,range:"front2",accuracy:85,description:"Leaps high and crashes down with the full weight of dark fury upon the target."},flareBlitzMax:{id:"flareBlitzMax",name:"Flare Blitz MAX",type:k.Fire,power:38,pp:4,range:"front1",accuracy:90,effect:"burn",effectChance:20,description:"Charges recklessly with blazing dark flames that may burn the target."},intimidateRoar:{id:"intimidateRoar",name:"Intimidate Roar",type:k.Dark,power:36,pp:4,range:"room",accuracy:80,description:"Releases a terrifying roar that echoes through the room, crushing enemy morale."},behemothBlade:{id:"behemothBlade",name:"Behemoth Blade",type:k.Steel,power:42,pp:3,range:"front2",accuracy:85,description:"Swings the legendary rusted sword with such force it cleaves through space itself."},playRoughMax:{id:"playRoughMax",name:"Play Rough MAX",type:k.Fairy,power:40,pp:3,range:"room",accuracy:80,description:"Unleashes the full fairy warrior spirit in a devastating room-wide assault."},swordOfRuin:{id:"swordOfRuin",name:"Sword of Ruin",type:k.Fairy,power:0,pp:3,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Invokes the ancient sword's power to enormously raise attack."},sacredSwordFae:{id:"sacredSwordFae",name:"Sacred Sword",type:k.Fighting,power:38,pp:4,range:"frontLine",accuracy:85,description:"Cuts through foes in a line with a blade of sacred light that ignores all defenses."},psychicTerrain:{id:"psychicTerrain",name:"Psychic Terrain",type:k.Psychic,power:38,pp:3,range:"room",accuracy:80,description:"Fills the room with psychic energy that damages all enemies within."},natureMadnessFae:{id:"natureMadnessFae",name:"Nature's Madness",type:k.Fairy,power:40,pp:3,range:"front2",accuracy:85,description:"Channels the fury of nature into a devastating fairy-type blast."},guardianShell:{id:"guardianShell",name:"Guardian Shell",type:k.Fairy,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Manifests the guardian deity's protective shell to vastly raise defense."},moonblastMax:{id:"moonblastMax",name:"Moonblast MAX",type:k.Fairy,power:38,pp:4,range:"around",accuracy:90,description:"Focuses the moon's maximum energy into a devastating blast that hits all nearby foes."},dragonRushMax:{id:"dragonRushMax",name:"Dragon Rush MAX",type:k.Dragon,power:42,pp:3,range:"front2",accuracy:85,description:"Charges with the unstoppable force of a land shark at maximum velocity."},earthquakeMax:{id:"earthquakeMax",name:"Earthquake MAX",type:k.Ground,power:40,pp:3,range:"room",accuracy:80,description:"Triggers a catastrophic earthquake that devastates everything in the room."},sandstormCloak:{id:"sandstormCloak",name:"Sandstorm Cloak",type:k.Ground,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Wraps in a cloak of swirling sand that vastly raises defense."},crunchDraco:{id:"crunchDraco",name:"Draconic Crunch",type:k.Dragon,power:38,pp:4,range:"front1",accuracy:90,description:"Bites down with jaws infused with draconic energy that crushes all resistance."},lusterPurge:{id:"lusterPurge",name:"Luster Purge",type:k.Psychic,power:40,pp:3,range:"room",accuracy:80,description:"Releases a burst of dazzling psychic light that purges all foes from the room."},dragonPulseMax:{id:"dragonPulseMax",name:"Dragon Pulse MAX",type:k.Dragon,power:40,pp:3,range:"frontLine",accuracy:85,description:"Fires an enormous shockwave of draconic energy that pierces through all foes in a line."},eonBarrier:{id:"eonBarrier",name:"Eon Barrier",type:k.Psychic,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Creates a barrier of eon energy that vastly raises defense."},mistBallStrike:{id:"mistBallStrike",name:"Mist Ball Strike",type:k.Dragon,power:38,pp:4,range:"around",accuracy:90,description:"Conjures misty draconic spheres that orbit and strike all nearby enemies."},thunderboltMax:{id:"thunderboltMax",name:"Thunderbolt MAX",type:k.Electric,power:40,pp:3,range:"room",accuracy:80,description:"Calls down the ultimate thunderbolt that electrifies the entire room."},hurricaneZap:{id:"hurricaneZap",name:"Hurricane Zap",type:k.Flying,power:40,pp:3,range:"frontLine",accuracy:85,description:"Unleashes an electrified hurricane that tears through all foes in a line."},staticField:{id:"staticField",name:"Static Field",type:k.Electric,power:36,pp:4,range:"around",accuracy:90,effect:"paralyze",effectChance:30,description:"Generates a field of static electricity that damages and may paralyze all nearby foes."},drillPeckMax:{id:"drillPeckMax",name:"Drill Peck MAX",type:k.Flying,power:38,pp:4,range:"front2",accuracy:90,description:"Spins and drills forward with electrified beak at maximum intensity."},sacredFireMax:{id:"sacredFireMax",name:"Sacred Fire MAX",type:k.Fire,power:42,pp:3,range:"room",accuracy:80,effect:"burn",effectChance:25,description:"Engulfs the room in sacred flames of divine purity that may burn all foes."},skyAttackMax:{id:"skyAttackMax",name:"Sky Attack MAX",type:k.Flying,power:40,pp:3,range:"frontLine",accuracy:85,description:"Dives from the heavens with blazing wings, piercing through all foes in a line."},heatWaveMax:{id:"heatWaveMax",name:"Heat Wave MAX",type:k.Fire,power:38,pp:4,range:"around",accuracy:90,effect:"burn",effectChance:20,description:"Exhales scorching heat in all directions that may burn all adjacent foes."},phoenixRise:{id:"phoenixRise",name:"Phoenix Rise",type:k.Flying,power:0,pp:3,range:"self",accuracy:100,effect:"atkUp",effectChance:100,description:"Rises like a phoenix reborn, vastly boosting attack power with blazing resolve."},multiAttackMax:{id:"multiAttackMax",name:"Multi-Attack MAX",type:k.Normal,power:40,pp:3,range:"front2",accuracy:90,description:"Attacks with adaptive energy that strikes with maximum type effectiveness."},rkSystemOverdrive:{id:"rkSystemOverdrive",name:"RKS Overdrive",type:k.Normal,power:42,pp:3,range:"room",accuracy:80,description:"Overclocks the RKS system to release devastating energy across the entire room."},adaptiveBarrier:{id:"adaptiveBarrier",name:"Adaptive Barrier",type:k.Normal,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Activates adaptive defense protocols that vastly raise defensive capabilities."},crushClawMax:{id:"crushClawMax",name:"Crush Claw MAX",type:k.Normal,power:38,pp:4,range:"front1",accuracy:90,description:"Slashes with technologically enhanced claws that crush through any armor."},relicSong:{id:"relicSong",name:"Relic Song",type:k.Normal,power:40,pp:3,range:"room",accuracy:80,description:"Sings an ancient melody of forgotten power that echoes through the entire room."},psychoVoice:{id:"psychoVoice",name:"Psycho Voice",type:k.Psychic,power:38,pp:4,range:"frontLine",accuracy:85,description:"Projects a psychically-charged voice that pierces through all foes in a line."},melodicShield:{id:"melodicShield",name:"Melodic Shield",type:k.Normal,power:0,pp:4,range:"self",accuracy:100,effect:"defUp",effectChance:100,description:"Sings a soothing melody that creates a resonant barrier, vastly raising defense."},ariaFinale:{id:"ariaFinale",name:"Aria Finale",type:k.Normal,power:38,pp:4,range:"around",accuracy:90,description:"Performs the final movement of a divine aria that blasts all nearby foes with sound waves."},psychicBlast:{id:"psychicBlast",name:"Psychic Blast",type:k.Psychic,power:25,pp:5,range:"room",accuracy:90,description:"Unleashes a devastating psychic shockwave across the room."}},We={oranBerry:{id:"oranBerry",name:"Oran Berry",category:"berry",target:"self",description:"Restores 30 HP.",stackable:!0},sitrusBerry:{id:"sitrusBerry",name:"Sitrus Berry",category:"berry",target:"self",description:"Restores 50% of max HP.",stackable:!0},pechaberry:{id:"pechaberry",name:"Pecha Berry",category:"berry",target:"self",description:"Cures all status conditions.",stackable:!0},reviveSeed:{id:"reviveSeed",name:"Revive Seed",category:"seed",target:"self",description:"Auto-revive with 50% HP when fainted.",stackable:!0},blastSeed:{id:"blastSeed",name:"Blast Seed",category:"seed",target:"front",description:"Throw at enemy for 40 fixed damage.",stackable:!0},sleepSeed:{id:"sleepSeed",name:"Sleep Seed",category:"seed",target:"front",description:"Throw to paralyze an enemy for 5 turns.",stackable:!0},escapeOrb:{id:"escapeOrb",name:"Escape Orb",category:"orb",target:"self",description:"Immediately escape the dungeon.",stackable:!1},luminousOrb:{id:"luminousOrb",name:"Luminous Orb",category:"orb",target:"room",description:"Reveals the entire floor map.",stackable:!1},allPowerOrb:{id:"allPowerOrb",name:"All-Power Orb",category:"orb",target:"self",description:"Boosts ATK and DEF for 10 turns.",stackable:!1},apple:{id:"apple",name:"Apple",category:"berry",target:"self",description:"Restores 50 Belly.",stackable:!0},bigApple:{id:"bigApple",name:"Big Apple",category:"berry",target:"self",description:"Fully restores Belly.",stackable:!0},grimyFood:{id:"grimyFood",name:"Grimy Food",category:"berry",target:"self",description:"Restores 30 Belly, but may cause sickness.",stackable:!0},warpOrb:{id:"warpOrb",name:"Warp Orb",category:"orb",target:"room",description:"Warps all enemies in the room to random tiles.",stackable:!1},foeHoldOrb:{id:"foeHoldOrb",name:"Foe-Hold Orb",category:"orb",target:"room",description:"Paralyzes all enemies in the room.",stackable:!1},maxElixir:{id:"maxElixir",name:"Max Elixir",category:"berry",target:"self",description:"Restores all skill PP to max.",stackable:!0},warpSeed:{id:"warpSeed",name:"Warp Seed",category:"seed",target:"self",description:"Warps user to a random spot on the floor.",stackable:!0},stunSeed:{id:"stunSeed",name:"Stun Seed",category:"seed",target:"front",description:"Throw to stun an enemy, skipping its next 3 turns.",stackable:!0},healSeed:{id:"healSeed",name:"Heal Seed",category:"seed",target:"self",description:"Cures all status and restores 20 HP.",stackable:!0},vanishOrb:{id:"vanishOrb",name:"Vanish Orb",category:"orb",target:"self",description:"Makes user invisible for 10 turns.",stackable:!1},pebble:{id:"pebble",name:"Pebble",category:"seed",target:"front",description:"Throw at enemy for 15 fixed damage.",stackable:!0},gravelrock:{id:"gravelrock",name:"Gravelrock",category:"seed",target:"front",description:"Throw at enemy for 25 fixed damage.",stackable:!0},xAttack:{id:"xAttack",name:"X-Attack",category:"berry",target:"self",description:"Boosts ATK by +3 stages for 10 turns.",stackable:!0},xDefend:{id:"xDefend",name:"X-Defend",category:"berry",target:"self",description:"Boosts DEF by +3 stages for 10 turns.",stackable:!0},megaOranBerry:{id:"megaOranBerry",name:" Mega Oran Berry",category:"berry",target:"self",description:"Restores 80 HP.",stackable:!0},megaSitrusBerry:{id:"megaSitrusBerry",name:" Mega Sitrus Berry",category:"berry",target:"self",description:"Restores 150 HP.",stackable:!0},goldenApple:{id:"goldenApple",name:" Golden Apple",category:"berry",target:"self",description:"Restores 200 Belly.",stackable:!0},crystalPebble:{id:"crystalPebble",name:" Crystal Pebble",category:"seed",target:"front",description:"Throw at enemy for 30 fixed damage.",stackable:!0},meteorRock:{id:"meteorRock",name:" Meteor Rock",category:"seed",target:"front",description:"Throw at enemy for 50 fixed damage.",stackable:!0},autoReviver:{id:"autoReviver",name:" Auto Reviver",category:"seed",target:"self",description:"Auto-revive with 75% HP when fainted, no turn cost.",stackable:!0},megaElixir:{id:"megaElixir",name:" Mega Elixir",category:"berry",target:"self",description:"Restores all PP to max + 10 extra PP each.",stackable:!0},megaBlastSeed:{id:"megaBlastSeed",name:" Mega Blast Seed",category:"seed",target:"front",description:"Throw at enemy for 80 fixed damage.",stackable:!0},deepSleepSeed:{id:"deepSleepSeed",name:" Deep Sleep Seed",category:"seed",target:"front",description:"Throw to paralyze an enemy for 8 turns.",stackable:!0},megaXAttack:{id:"megaXAttack",name:" Mega X-Attack",category:"berry",target:"self",description:"Boosts ATK by +6 stages for 15 turns.",stackable:!0},megaXDefend:{id:"megaXDefend",name:" Mega X-Defend",category:"berry",target:"self",description:"Boosts DEF by +6 stages for 15 turns.",stackable:!0},tmFlamethrower:{id:"tmFlamethrower",name:"TM Flamethrower",category:"tm",target:"self",description:"Teaches Flamethrower to replace a skill.",stackable:!1,tmSkillId:"flamethrower"},tmThunderbolt:{id:"tmThunderbolt",name:"TM Thunderbolt",category:"tm",target:"self",description:"Teaches Thunderbolt to replace a skill.",stackable:!1,tmSkillId:"thunderbolt"},tmIceBeam:{id:"tmIceBeam",name:"TM Ice Beam",category:"tm",target:"self",description:"Teaches Ice Beam to replace a skill.",stackable:!1,tmSkillId:"iceBeam"},tmShadowBall:{id:"tmShadowBall",name:"TM Shadow Ball",category:"tm",target:"self",description:"Teaches Shadow Ball to replace a skill.",stackable:!1,tmSkillId:"shadowBall"},tmDragonPulse:{id:"tmDragonPulse",name:"TM Dragon Pulse",category:"tm",target:"self",description:"Teaches Dragon Pulse to replace a skill.",stackable:!1,tmSkillId:"dragonPulse"},tmEarthquake:{id:"tmEarthquake",name:"TM Earthquake",category:"tm",target:"self",description:"Teaches Earthquake to replace a skill.",stackable:!1,tmSkillId:"earthPower"}},is=[{itemId:"oranBerry",weight:30},{itemId:"pechaberry",weight:15},{itemId:"blastSeed",weight:15},{itemId:"sleepSeed",weight:10},{itemId:"sitrusBerry",weight:8},{itemId:"reviveSeed",weight:5},{itemId:"apple",weight:20},{itemId:"bigApple",weight:5},{itemId:"grimyFood",weight:8},{itemId:"escapeOrb",weight:3},{itemId:"luminousOrb",weight:5},{itemId:"allPowerOrb",weight:4},{itemId:"warpOrb",weight:3},{itemId:"foeHoldOrb",weight:3},{itemId:"maxElixir",weight:6},{itemId:"warpSeed",weight:6},{itemId:"stunSeed",weight:8},{itemId:"healSeed",weight:10},{itemId:"vanishOrb",weight:2},{itemId:"reviveSeed",weight:4},{itemId:"allPowerOrb",weight:2},{itemId:"escapeOrb",weight:1},{itemId:"tmFlamethrower",weight:1},{itemId:"tmThunderbolt",weight:1},{itemId:"tmIceBeam",weight:1},{itemId:"tmShadowBall",weight:1},{itemId:"tmDragonPulse",weight:1},{itemId:"tmEarthquake",weight:1},{itemId:"pebble",weight:12},{itemId:"gravelrock",weight:8},{itemId:"xAttack",weight:5},{itemId:"xDefend",weight:5}];function dt(){const G=is.reduce((b,I)=>b+I.weight,0);let F=Math.random()*G;for(const b of is)if(F-=b.weight,F<=0)return We[b.itemId];return We.oranBerry}const rt=16,ui="poke-roguelite-save",oa="poke-roguelite-meta",Ni=1;function ss(G){try{localStorage.setItem(ui,JSON.stringify(G))}catch{console.warn("Failed to save dungeon data")}}function as(){try{const G=localStorage.getItem(ui);if(!G)return null;const F=JSON.parse(G);return F.version!==Ni?null:F}catch{return null}}function wt(){localStorage.removeItem(ui)}function la(){return localStorage.getItem(ui)!==null}function Si(){return{version:Ni,gold:0,totalGold:0,bestFloor:0,totalClears:0,totalRuns:0,storage:[],upgrades:{},totalEnemiesDefeated:0,totalTurns:0,endlessBestFloor:0,challengeClears:0,startersUsed:[],pokemonSeen:[],pokemonUsed:[]}}function Ye(){try{const G=localStorage.getItem(oa);if(!G)return Si();const F=JSON.parse(G);return F.version!==Ni?Si():(F.totalEnemiesDefeated===void 0&&(F.totalEnemiesDefeated=0),F.totalTurns===void 0&&(F.totalTurns=0),F.endlessBestFloor===void 0&&(F.endlessBestFloor=0),F.challengeClears===void 0&&(F.challengeClears=0),F.startersUsed===void 0&&(F.startersUsed=[]),F.pokemonSeen===void 0&&(F.pokemonSeen=[]),F.pokemonUsed===void 0&&(F.pokemonUsed=[]),F.customSkills===void 0&&(F.customSkills={}),F.ownedHeldItems===void 0&&(F.ownedHeldItems=[]),F.equippedHeldItem===void 0&&(F.equippedHeldItem=void 0),F.abilityLevels===void 0&&(F.abilityLevels={}),F.ngPlusLevel===void 0&&(F.ngPlusLevel=0),F.enchantmentId===void 0&&(F.enchantmentId=void 0),F.lastDungeonId===void 0&&(F.lastDungeonId=void 0),F.lastChallenge===void 0&&(F.lastChallenge=void 0),F.dungeonRunCounts===void 0&&(F.dungeonRunCounts={}),F.clearedDungeons===void 0&&(F.clearedDungeons=[]),F.lastVisitTimestamp===void 0&&(F.lastVisitTimestamp=void 0),F.bestTimes===void 0&&(F.bestTimes={}),F)}catch{return Si()}}function Ke(G){try{localStorage.setItem(oa,JSON.stringify(G))}catch{console.warn("Failed to save meta data")}}function wi(G){return G.map(F=>({id:F.id,currentPp:F.currentPp}))}function ha(G){return G.map(F=>{const b=Me[F.id];if(!b)return st(Me.tackle);const I=st(b);return I.currentPp=F.currentPp,I})}function ut(G){return G.map(F=>({itemId:F.item.id,count:F.count}))}function ir(G){return G.map(F=>{const b=We[F.itemId];return b?{item:b,count:F.count}:null}).filter(F=>F!==null)}function Fi(G,F,b){const I=G*20+F*5;return b?I*2:Math.floor(I*.5)}let At=null,Ft=!1,ht=.3,ke=.4,ai=null,ri=0,Ht="",Oi=!1;try{const G=localStorage.getItem("poke-roguelite-audio");if(G){const F=JSON.parse(G);typeof F.bgm=="number"&&(ht=F.bgm),typeof F.sfx=="number"&&(ke=F.sfx)}}catch{}function da(){try{localStorage.setItem("poke-roguelite-audio",JSON.stringify({bgm:ht,sfx:ke}))}catch{}}function zt(){return ht}function Ot(){return ke}function ua(G){ke=Math.max(0,Math.min(1,G)),da()}function Ui(){return At||(At=new AudioContext),At.state==="suspended"&&At.resume(),At}function qe(G,F,b="square",I=ke){try{const B=Ui(),O=B.createOscillator(),f=B.createGain();O.type=b,O.frequency.setValueAtTime(G,B.currentTime),f.gain.setValueAtTime(I,B.currentTime),f.gain.exponentialRampToValueAtTime(.001,B.currentTime+F),O.connect(f),f.connect(B.destination),O.start(B.currentTime),O.stop(B.currentTime+F)}catch{}}function _e(G,F="square",b=ke){for(const I of G)setTimeout(()=>qe(I.freq,I.dur,F,b),I.delay*1e3)}function Ti(){qe(200,.08,"square",ke*.6),setTimeout(()=>qe(150,.06,"sawtooth",ke*.4),30)}function sr(){_e([{freq:400,dur:.08,delay:0},{freq:600,dur:.08,delay:.06},{freq:800,dur:.12,delay:.12}],"square",ke*.5)}function ar(){qe(120,.15,"triangle",ke*.3)}function rr(){_e([{freq:500,dur:.06,delay:0},{freq:700,dur:.08,delay:.05}],"square",ke*.3)}function ki(){_e([{freq:523,dur:.1,delay:0},{freq:659,dur:.1,delay:.1},{freq:784,dur:.1,delay:.2},{freq:1047,dur:.2,delay:.3}],"square",ke*.4)}function rs(){_e([{freq:440,dur:.12,delay:0},{freq:554,dur:.12,delay:.12},{freq:659,dur:.12,delay:.24},{freq:880,dur:.25,delay:.36}],"triangle",ke*.4)}function nr(){_e([{freq:300,dur:.15,delay:0},{freq:400,dur:.15,delay:.12},{freq:500,dur:.15,delay:.24},{freq:600,dur:.2,delay:.36}],"triangle",ke*.35)}function or(){_e([{freq:400,dur:.15,delay:0},{freq:300,dur:.15,delay:.12},{freq:200,dur:.2,delay:.24},{freq:100,dur:.3,delay:.36}],"sawtooth",ke*.4)}function ns(){_e([{freq:523,dur:.12,delay:0},{freq:659,dur:.12,delay:.1},{freq:784,dur:.12,delay:.2},{freq:1047,dur:.15,delay:.3},{freq:1319,dur:.2,delay:.45},{freq:1568,dur:.3,delay:.6}],"square",ke*.5)}function Ci(){_e([{freq:600,dur:.08,delay:0},{freq:800,dur:.1,delay:.06}],"triangle",ke*.3)}function os(){_e([{freq:500,dur:.06,delay:0},{freq:700,dur:.06,delay:.04},{freq:400,dur:.08,delay:.08}],"sawtooth",ke*.35)}function Ct(){qe(600,.06,"square",ke*.2)}function It(){qe(400,.06,"square",ke*.2)}function lr(){_e([{freq:523,dur:.15,delay:0},{freq:659,dur:.15,delay:.15},{freq:784,dur:.15,delay:.3},{freq:1047,dur:.15,delay:.45},{freq:1319,dur:.15,delay:.6},{freq:1568,dur:.25,delay:.75},{freq:2093,dur:.4,delay:.95}],"triangle",ke*.5)}function hr(){_e([{freq:800,dur:.05,delay:0},{freq:200,dur:.15,delay:.05}],"sawtooth",ke*.5)}function bi(){_e([{freq:523,dur:.15,delay:0},{freq:659,dur:.15,delay:.15},{freq:784,dur:.2,delay:.3},{freq:1047,dur:.3,delay:.5},{freq:784,dur:.1,delay:.85},{freq:1047,dur:.15,delay:.95},{freq:1319,dur:.4,delay:1.1}],"square",ke*.45)}function ls(){_e([{freq:440,dur:.2,delay:0},{freq:349,dur:.2,delay:.25},{freq:294,dur:.2,delay:.5},{freq:220,dur:.4,delay:.75},{freq:165,dur:.5,delay:1.2}],"triangle",ke*.4)}function Vt(){_e([{freq:700,dur:.06,delay:0},{freq:900,dur:.06,delay:.06},{freq:700,dur:.08,delay:.12}],"square",ke*.3)}function hs(){qe(880,.06,"square",ke*.35),setTimeout(()=>qe(1320,.08,"square",ke*.35),60)}function ds(){qe(1200,.05,"sawtooth",ke*.45),setTimeout(()=>qe(1600,.08,"square",ke*.35),50)}function us(){qe(800,.1,"sine",ke*.25),setTimeout(()=>qe(400,.08,"sine",ke*.2),50)}function Ei(){qe(900,.04,"sine",ke*.25),setTimeout(()=>qe(1200,.06,"sine",ke*.3),40)}function nt(){_e([{freq:440,dur:.06,delay:0},{freq:554,dur:.06,delay:.06},{freq:659,dur:.08,delay:.12}],"triangle",ke*.3)}function cs(){qe(100,.3,"sawtooth",ke*.2),setTimeout(()=>qe(120,.2,"sawtooth",ke*.15),100)}let Ze=null;const fs={hub:"hub",beachCave:"dungeon-water",stormySea:"dungeon-water",tidalReef:"dungeon-water",coralDepths:"dungeon-water",abyssalTrench:"dungeon-water",deepSeaTrench:"dungeon-water",marineSanctuary:"dungeon-water",pelagicAbyss:"dungeon-water",oceanicVortex:"dungeon-water",magmaCavern:"dungeon-fire",volcanicPeak:"dungeon-fire",smolderingCaldera:"dungeon-fire",infernoChasm:"dungeon-fire",moltenCore:"dungeon-fire",blazingAbyss:"dungeon-fire",scorchedBastion:"dungeon-fire",pyreOfAshes:"dungeon-fire",volcanicInferno:"dungeon-fire",tinyWoods:"dungeon-grass",overgrownForest:"dungeon-grass",emeraldGrove:"dungeon-grass",verdantForest:"dungeon-grass",ancientWoodlands:"dungeon-grass",primordialGrove:"dungeon-grass",etherealCanopy:"dungeon-grass",elderGroveSanctum:"dungeon-grass",verdantParadise:"dungeon-grass",thunderwaveCave:"dungeon-electric",ampPlains:"dungeon-electric",stormPeak:"dungeon-electric",voltageSpire:"dungeon-electric",fulguriteCavern:"dungeon-electric",thunderstormNexus:"dungeon-electric",plasmaCitadel:"dungeon-electric",tempestSpire:"dungeon-electric",voltaicStorm:"dungeon-electric",frostyForest:"dungeon-ice",frozenPeak:"dungeon-ice",glacialCavern:"dungeon-ice",permafrostDepths:"dungeon-ice",blizzardSummit:"dungeon-ice",eternaFrost:"dungeon-ice",glacialDominion:"dungeon-ice",frozenEternity:"dungeon-ice",absoluteZero:"dungeon-ice",frozenNether:"dungeon-ice",shadowForest:"dungeon-dark",darkWasteland:"dungeon-dark",obsidianCrypt:"dungeon-dark",abyssalVoid:"dungeon-dark",eclipseDepths:"dungeon-dark",voidOfDespair:"dungeon-dark",stygianAbyss:"dungeon-dark",umbralDominion:"dungeon-dark",eclipsedRealm:"dungeon-dark",abyssalEclipse:"dungeon-dark",mtSteel:"dungeon-rock",buriedRuins:"dungeon-rock",rockfallCavern:"dungeon-rock",petrifiedCavern:"dungeon-rock",tectonicFault:"dungeon-rock",ancientGeode:"dungeon-rock",megalithicDepths:"dungeon-rock",primordialBasalt:"dungeon-rock",tectonicMonolith:"dungeon-rock",moonlitCave:"dungeon-psychic",mysticSanctum:"dungeon-psychic",astralRift:"dungeon-psychic",cosmicSpire:"dungeon-psychic",mindPalace:"dungeon-psychic",psychicNexus:"dungeon-psychic",astralDominion:"dungeon-psychic",cosmicSanctum:"dungeon-psychic",transcendentSpire:"dungeon-psychic",toxicSwamp:"dungeon-poison",venomousMarsh:"dungeon-poison",miasmaDepths:"dungeon-poison",corrosiveCavern:"dungeon-poison",blightedMire:"dungeon-poison",toxicWasteland:"dungeon-poison",venomousDominion:"dungeon-poison",pestilentAbyss:"dungeon-poison",miasmaHeart:"dungeon-poison",aridDesert:"dungeon-ground",sunscorchedBadlands:"dungeon-ground",terraFissure:"dungeon-ground",subterraneanLabyrinth:"dungeon-ground",seismicAbyss:"dungeon-ground",earthenCatacombs:"dungeon-ground",tectonicLabyrinth:"dungeon-ground",earthenDominion:"dungeon-ground",seismicHeart:"dungeon-ground",dragonsLair:"dungeon-dragon",draconsHollow:"dungeon-dragon",wyrmsAbyss:"dungeon-dragon",dragonspireKeep:"dungeon-dragon",draconicSanctuary:"dungeon-dragon",ancientDragonhold:"dungeon-dragon",draconicDominion:"dungeon-dragon",wyrmheartSanctum:"dungeon-dragon",draconicApex:"dungeon-dragon",voidDragonSpire:"dungeon-dragon",enchantedMeadow:"dungeon-fairy",sylvanGlade:"dungeon-fairy",faeWilds:"dungeon-fairy",stardustGrove:"dungeon-fairy",luminousSanctum:"dungeon-fairy",etherealParadise:"dungeon-fairy",faeDominion:"dungeon-fairy",celestialGrove:"dungeon-fairy",stardustParadise:"dungeon-fairy",radiantCrystalGarden:"dungeon-fairy",sinisterWoods:"dungeon-ghost",hauntedManor:"dungeon-ghost",spectersCrypt:"dungeon-ghost",phantomCitadel:"dungeon-ghost",liminalVoid:"dungeon-ghost",netherRealm:"dungeon-ghost",spectralDominion:"dungeon-ghost",etherealVoid:"dungeon-ghost",phantasmalNexus:"dungeon-ghost",steelFortress:"dungeon-steel",ironworks:"dungeon-steel",titaniumVault:"dungeon-steel",adamantineForge:"dungeon-steel",chromiumCitadel:"dungeon-steel",steelheartEngine:"dungeon-steel",adamantineDominion:"dungeon-steel",steelheartBastion:"dungeon-steel",forgedApex:"dungeon-steel",mossyCavern:"dungeon-bug",silkwoodThicket:"dungeon-bug",chitinousWarren:"dungeon-bug",hivemindNest:"dungeon-bug",entomophageDepths:"dungeon-bug",swarmCatacombs:"dungeon-bug",hivemindDominion:"dungeon-bug",entomophageNexus:"dungeon-bug",chitinousApex:"dungeon-bug",dojoRuins:"dungeon-fighting",battleArena:"dungeon-fighting",martialPeak:"dungeon-fighting",warlordsKeep:"dungeon-fighting",titansFist:"dungeon-fighting",battleSanctum:"dungeon-fighting",martialDominion:"dungeon-fighting",titansFistApex:"dungeon-fighting",warlordsDomain:"dungeon-fighting",skyTower:"dungeon-flying",windySummit:"dungeon-flying",cumulusSpire:"dungeon-flying",stormcallersPeak:"dungeon-flying",celestialAerie:"dungeon-flying",skywardDominion:"dungeon-flying",stormcallersDominion:"dungeon-flying",celestialZenith:"dungeon-flying",skywardApex:"dungeon-flying",celestialGalefort:"dungeon-flying",tranquilPlains:"dungeon-normal",sereneValley:"dungeon-normal",harvestFields:"dungeon-normal",idyllicMeadow:"dungeon-normal",elysianFields:"dungeon-normal",paradiseReach:"dungeon-normal",elysianDominion:"dungeon-normal",paradiseApex:"dungeon-normal",primordialPlains:"dungeon-normal",primordialColossus:"dungeon-normal",petrifiedColossus:"dungeon-rock",cyberHive:"dungeon-bug",justiceHall:"dungeon-fighting",ironSanctuary:"dungeon-steel",distortionRift:"dungeon-ghost",genesisChamber:"dungeon-psychic",frozenRegolith:"dungeon-ice",nihilityAbyss:"dungeon-dark",eternalGarden:"dungeon-fairy",temporalSpire:"dungeon-dragon",stormSovereign:"dungeon-flying",originHall:"dungeon-normal",primordialSea:"dungeon-water",truthPyre:"dungeon-fire",eternalMeadow:"dungeon-grass",thunderGodDomain:"dungeon-electric",eternaCore:"dungeon-poison",orderSanctum:"dungeon-ground",crownTundraThrone:"dungeon-ice",abyssalDarkhold:"dungeon-dark",radiantSwordGarden:"dungeon-fairy",dragonSovereignSpire:"dungeon-dragon",celestialThunderpeak:"dungeon-flying",harmonyHall:"dungeon-normal",destinyTower:"destiny",endlessDungeon:"dungeon-dark",dailyDungeon:"dungeon-psychic",bossRush:"dungeon-dark"};function ca(G){if(fs[G])return fs[G];const F=G.toLowerCase();return F.includes("cave")||F.includes("sea")||F.includes("reef")||F.includes("ocean")||F.includes("tidal")||F.includes("water")||F.includes("abyss")?"dungeon-water":F.includes("volcano")||F.includes("fire")||F.includes("magma")||F.includes("blaze")||F.includes("inferno")||F.includes("smolder")||F.includes("scorch")?"dungeon-fire":F.includes("forest")||F.includes("wood")||F.includes("grove")||F.includes("canopy")||F.includes("verdant")?"dungeon-grass":F.includes("thunder")||F.includes("electric")||F.includes("volt")||F.includes("storm")||F.includes("plasma")?"dungeon-electric":F.includes("ice")||F.includes("frost")||F.includes("frozen")||F.includes("glacial")||F.includes("blizzard")||F.includes("snow")?"dungeon-ice":F.includes("dark")||F.includes("shadow")||F.includes("obsidian")||F.includes("void")||F.includes("eclipse")?"dungeon-dark":F.includes("rock")||F.includes("steel")||F.includes("mt")||F.includes("ruin")||F.includes("petri")?"dungeon-rock":F.includes("psychic")||F.includes("moonlit")||F.includes("mystic")||F.includes("astral")||F.includes("cosmic")||F.includes("mind")?"dungeon-psychic":F.includes("toxic")||F.includes("poison")||F.includes("venom")||F.includes("swamp")||F.includes("marsh")||F.includes("miasma")?"dungeon-poison":F.includes("desert")||F.includes("ground")||F.includes("arid")||F.includes("terra")||F.includes("seismic")||F.includes("earthen")?"dungeon-ground":F.includes("dragon")||F.includes("wyrm")||F.includes("dracon")?"dungeon-dragon":F.includes("fairy")||F.includes("enchant")||F.includes("fae")||F.includes("sylvan")||F.includes("stardust")||F.includes("meadow")?"dungeon-fairy":F.includes("ghost")||F.includes("haunt")||F.includes("specter")||F.includes("phantom")||F.includes("sinister")?"dungeon-ghost":F.includes("iron")||F.includes("titan")||F.includes("chrome")||F.includes("forge")||F.includes("adamant")?"dungeon-steel":F.includes("bug")||F.includes("silk")||F.includes("chitin")||F.includes("hive")||F.includes("mossy")?"dungeon-bug":F.includes("fight")||F.includes("dojo")||F.includes("arena")||F.includes("martial")||F.includes("warlord")?"dungeon-fighting":F.includes("sky")||F.includes("wind")||F.includes("fly")||F.includes("cloud")||F.includes("cumulus")||F.includes("aerie")?"dungeon-flying":F.includes("destiny")?"destiny":"dungeon-normal"}const ps={cave:{melody:[196,185,175,196,220,196,175,165,196,220,262,247,220,196,175,165],bass:[98,98,88,88,110,110,88,88,98,98,131,131,110,110,88,82],tempo:.32,melodyType:"sawtooth",bassType:"triangle"},forest:{melody:[392,440,494,523,494,440,392,349,330,349,392,440,494,523,587,523],bass:[196,196,247,247,262,262,196,196,165,165,196,196,247,247,294,294],tempo:.28,melodyType:"triangle",bassType:"sine"},ocean:{melody:[330,392,440,523,440,392,330,294,262,294,330,440,523,587,523,440],bass:[165,165,196,196,220,220,165,165,131,131,165,165,262,262,220,220],tempo:.34,melodyType:"sine",bassType:"triangle"},volcano:{melody:[262,311,330,392,440,415,392,330,294,330,392,466,440,392,330,262],bass:[131,131,156,156,196,196,165,165,147,147,196,196,220,220,165,131],tempo:.2,melodyType:"sawtooth",bassType:"square"},sky:{melody:[523,587,659,784,659,587,523,494,440,494,523,659,784,880,784,659],bass:[262,262,294,294,330,330,262,262,220,220,262,262,392,392,330,330],tempo:.36,melodyType:"triangle",bassType:"sine"},boss:{melody:[262,330,392,523,494,440,392,330,262,330,392,523,659,587,523,440],bass:[131,131,196,196,262,262,196,196,131,131,196,196,330,330,262,220],tempo:.18,melodyType:"sawtooth",bassType:"square"},hub:{melody:[392,440,494,523,587,523,494,440,392,349,330,349,392,440,494,440],bass:[196,196,247,247,262,262,247,247,196,196,165,165,196,196,220,220],tempo:.35,melodyType:"triangle",bassType:"sine"},electric:{melody:[523,587,659,784,659,587,523,494,523,659,784,880,784,659,523,494],bass:[262,262,330,330,392,392,262,262,247,247,330,330,440,440,330,330],tempo:.22,melodyType:"square",bassType:"sawtooth"},ice:{melody:[523,494,440,392,349,392,440,494,523,587,523,494,440,392,349,330],bass:[262,262,220,220,175,175,196,196,262,262,294,294,220,220,175,175],tempo:.36,melodyType:"sine",bassType:"triangle"},dark:{melody:[196,185,175,165,175,185,196,220,247,220,196,175,165,156,165,175],bass:[98,98,88,88,82,82,98,98,123,123,110,110,82,82,78,78],tempo:.3,melodyType:"sawtooth",bassType:"triangle"},psychic:{melody:[523,587,659,784,659,587,523,494,523,587,659,784,880,784,659,523],bass:[262,262,294,294,330,330,262,262,247,247,294,294,330,330,262,262],tempo:.32,melodyType:"sine",bassType:"sine"},poison:{melody:[220,247,262,220,196,220,247,294,262,220,196,175,196,220,247,220],bass:[110,110,131,131,98,98,123,123,131,131,110,110,98,98,110,110],tempo:.3,melodyType:"sawtooth",bassType:"triangle"},ground:{melody:[196,220,262,294,262,220,196,175,196,262,294,330,294,262,220,196],bass:[98,98,131,131,147,147,98,98,98,98,147,147,165,165,131,131],tempo:.28,melodyType:"square",bassType:"sawtooth"},dragon:{melody:[196,262,330,392,330,262,196,175,196,262,330,392,440,392,330,262],bass:[98,98,165,165,196,196,98,98,88,88,131,131,220,220,165,165],tempo:.24,melodyType:"sawtooth",bassType:"square"},fairy:{melody:[523,587,659,698,659,587,523,494,440,494,523,587,659,698,784,698],bass:[262,262,330,330,349,349,262,262,220,220,262,262,330,330,392,392],tempo:.34,melodyType:"triangle",bassType:"sine"},ghost:{melody:[220,262,247,220,196,220,262,294,262,220,196,175,196,220,262,247],bass:[110,110,131,131,98,98,110,110,131,131,98,98,88,88,110,110],tempo:.38,melodyType:"sine",bassType:"triangle"},steel:{melody:[262,330,392,330,262,330,392,440,392,330,262,330,392,440,523,440],bass:[131,131,196,196,131,131,196,196,220,220,165,165,196,196,262,262],tempo:.24,melodyType:"square",bassType:"sawtooth"},bug:{melody:[330,392,349,330,294,330,349,392,440,392,349,330,294,262,294,330],bass:[165,165,175,175,147,147,175,175,220,220,196,196,147,147,131,131],tempo:.26,melodyType:"square",bassType:"sine"},fighting:{melody:[262,330,392,440,523,440,392,330,262,294,330,392,440,523,587,523],bass:[131,131,196,196,262,262,220,220,131,131,147,147,220,220,294,294],tempo:.22,melodyType:"sawtooth",bassType:"square"},flying:{melody:[392,440,523,587,523,440,392,349,392,523,587,659,587,523,440,392],bass:[196,196,262,262,294,294,196,196,175,175,262,262,330,330,220,196],tempo:.28,melodyType:"triangle",bassType:"sine"},normal:{melody:[330,392,440,494,440,392,330,294,262,294,330,392,440,494,523,494],bass:[165,165,220,220,220,220,165,165,131,131,165,165,220,220,262,262],tempo:.32,melodyType:"triangle",bassType:"sine"},rock:{melody:[196,220,196,165,196,220,262,220,196,165,147,165,196,220,196,165],bass:[98,98,82,82,98,98,131,131,98,98,73,73,82,82,98,98],tempo:.28,melodyType:"sawtooth",bassType:"sine"},destiny:{melody:[262,330,392,523,392,330,262,196,262,392,523,659,523,392,330,262],bass:[131,131,196,196,262,262,131,131,98,98,196,196,262,262,165,131],tempo:.25,melodyType:"square",bassType:"sawtooth"}};function dr(G){if(G.startsWith("dungeon-")){const F=G.slice(8);return{water:"ocean",fire:"volcano",grass:"forest",electric:"electric",ice:"ice",dark:"dark",rock:"rock",psychic:"psychic",poison:"poison",ground:"ground",dragon:"dragon",fairy:"fairy",ghost:"ghost",steel:"steel",bug:"bug",fighting:"fighting",flying:"flying",normal:"normal"}[F]??"cave"}return G==="hub"?"hub":G==="destiny"?"destiny":"cave"}function ur(G){if(!G||G==="hub")return"hub";if(G==="bossRush")return"boss";const F=ca(G);return dr(F)}function ni(G){const F=ps[G]??ps.cave;Oi=!0,ri=0;const b=()=>{if(!(!Oi||!Ft))try{const I=Ui(),B=ri%F.melody.length,O=F.melody[B];if(O>0){const x=I.createOscillator(),e=I.createGain();x.type=F.melodyType,x.frequency.setValueAtTime(O,I.currentTime),e.gain.setValueAtTime(ht*.15,I.currentTime),e.gain.exponentialRampToValueAtTime(.001,I.currentTime+F.tempo*.9),x.connect(e),e.connect(I.destination),x.start(I.currentTime),x.stop(I.currentTime+F.tempo*.95)}const f=F.bass[B];if(f>0){const x=I.createOscillator(),e=I.createGain();x.type=F.bassType,x.frequency.setValueAtTime(f,I.currentTime),e.gain.setValueAtTime(ht*.1,I.currentTime),e.gain.exponentialRampToValueAtTime(.001,I.currentTime+F.tempo*.9),x.connect(e),e.connect(I.destination),x.start(I.currentTime),x.stop(I.currentTime+F.tempo*.95)}ri++}catch{}};ai=setInterval(b,F.tempo*1e3),b()}function cr(){Oi=!1,ai&&(clearInterval(ai),ai=null),ri=0}function fa(G,F){const b=G??"beachCave",I=ur(b);if(Ft&&Ht===I)return;Tt(),Ft=!0,Ht=I;const B=ca(b);try{Ze=new Audio(`audio/bgm/${B}.ogg`),Ze.loop=!0,Ze.volume=ht;const O=()=>{Ze=null,ni(I)};Ze.addEventListener("error",O,{once:!0}),Ze.play().catch(()=>{if(!Ze||Ze.error){O();return}const f=()=>{Ze&&Ft?(Ze.volume=ht,Ze.play().catch(()=>{O()})):Ft&&ni(I),document.removeEventListener("pointerdown",f)};document.addEventListener("pointerdown",f,{once:!0})})}catch{ni(I)}}function Tt(){Ft=!1,Ht="",cr(),Ze&&(Ze.pause(),Ze.src="",Ze=null)}function Pi(){Ht!=="boss"&&(Tt(),Ft=!0,Ht="boss",ni("boss"))}function pa(G){ht=Math.max(0,Math.min(1,G)),Ze&&(Ze.volume=ht),da()}function Xi(){Ui()}class fr extends $e.Scene{constructor(){super({key:"BootScene"})}create(){const F=J/2,b=ee/2;this.add.rectangle(F,b,J,ee,657946),this.add.text(F,b-60,"Poke Roguelite",{fontSize:"24px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5),this.add.text(F,b-30,"Mystery Dungeon",{fontSize:"14px",color:"#667eea",fontFamily:"monospace"}).setOrigin(.5);const I=la(),B=I?"Saved run found!":"Tap to Start";this.add.text(F,b+20,B,{fontSize:"14px",color:I?"#4ade80":"#667eea",fontFamily:"monospace"}).setOrigin(.5),this.add.text(F,b+60,"v4.2.0  Legendaries + Mutations",{fontSize:"9px",color:"#444460",fontFamily:"monospace"}).setOrigin(.5),this.input.once("pointerdown",()=>{Xi(),this.cameras.main.fadeOut(300,0,0,0),this.time.delayedCall(350,()=>{this.scene.start("HubScene")})})}}const Lt=[{id:"powerBand",name:"Power Band",description:"+5 ATK",cost:200,unlockClears:0,effect:{atkBonus:5}},{id:"defenseScarf",name:"Defense Scarf",description:"+5 DEF",cost:200,unlockClears:0,effect:{defBonus:5}},{id:"healthCharm",name:"Health Charm",description:"+15 HP",cost:200,unlockClears:0,effect:{hpBonus:15}},{id:"scopeLens",name:"Scope Lens",description:"10% critical hit chance",cost:400,unlockClears:5,effect:{critChance:10}},{id:"brightPowder",name:"Bright Powder",description:"8% dodge chance",cost:400,unlockClears:5,effect:{dodgeChance:8}},{id:"shellBell",name:"Shell Bell",description:"Heal 10 HP each floor",cost:500,unlockClears:10,effect:{healPerFloor:10}},{id:"amuletCoin",name:"Amulet Coin",description:"+25% gold earned",cost:500,unlockClears:10,effect:{goldBonus:25}},{id:"luckyEgg",name:"Lucky Egg",description:"+25% EXP earned",cost:500,unlockClears:10,effect:{expBonus:25}},{id:"choiceBand",name:"Choice Band",description:"+12 ATK",cost:800,unlockClears:20,effect:{atkBonus:12}},{id:"assaultVest",name:"Assault Vest",description:"+12 DEF",cost:800,unlockClears:20,effect:{defBonus:12}},{id:"lifeOrb",name:"Life Orb",description:"+8 ATK, 15% crit",cost:1e3,unlockClears:30,effect:{atkBonus:8,critChance:15}},{id:"focusSash",name:"Focus Sash",description:"+20 HP, 5% dodge",cost:1e3,unlockClears:30,effect:{hpBonus:20,dodgeChance:5}}];function ci(G){return Lt.find(F=>F.id===G)}const Qe={beachCave:{id:"beachCave",name:"Beach Cave",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:5,enemySpeciesIds:["zubat","shellos","corsola","geodude"],floorEnemies:{1:["zubat"],2:["zubat","shellos"],3:["zubat","shellos","corsola"],4:["shellos","corsola","geodude"],5:["corsola","geodude"]},difficulty:1,itemsPerFloor:3,unlockClears:0,description:"B1F~B5F. Water and Rock types.",boss:{speciesId:"corsola",name:"Giant Corsola",statMultiplier:2.5}},thunderwaveCave:{id:"thunderwaveCave",name:"Thunderwave Cave",tilesetPath:"tilesets/ThunderwaveCave/tileset_0.png",tilesetKey:"thunderwave-tiles",floors:6,enemySpeciesIds:["voltorb","magnemite","pikachu"],floorEnemies:{1:["voltorb"],2:["voltorb","magnemite"],3:["voltorb","magnemite"],4:["magnemite","pikachu"],5:["magnemite","pikachu"],6:["pikachu"]},difficulty:1.3,itemsPerFloor:3,unlockClears:1,description:"B1F~B6F. Electric types. Harder!",boss:{speciesId:"pikachu",name:"Alpha Pikachu",statMultiplier:3}},tinyWoods:{id:"tinyWoods",name:"Tiny Woods",tilesetPath:"tilesets/TinyWoods/tileset_0.png",tilesetKey:"tinywoods-tiles",floors:4,enemySpeciesIds:["caterpie","pidgey"],floorEnemies:{1:["caterpie"],2:["caterpie","pidgey"],3:["pidgey","caterpie"],4:["pidgey"]},difficulty:.8,itemsPerFloor:4,unlockClears:0,description:"B1F~B4F. Bug and Flying. Easy!",boss:{speciesId:"pidgey",name:"Fierce Pidgey",statMultiplier:2}},mtSteel:{id:"mtSteel",name:"Mt. Steel",tilesetPath:"tilesets/ThunderwaveCave/tileset_0.png",tilesetKey:"thunderwave-tiles",floors:7,enemySpeciesIds:["aron","meditite","machop"],floorEnemies:{1:["aron"],2:["aron","meditite"],3:["meditite","aron"],4:["meditite","machop"],5:["machop","aron"],6:["machop","meditite"],7:["machop"]},difficulty:1.5,itemsPerFloor:3,unlockClears:2,description:"B1F~B7F. Steel and Fighting. Very tough!",boss:{speciesId:"machop",name:"Champion Machop",statMultiplier:3.5}},skyTower:{id:"skyTower",name:"Sky Tower",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:8,enemySpeciesIds:["gastly","drowzee","snorunt"],floorEnemies:{1:["gastly"],2:["gastly","drowzee"],3:["drowzee","gastly"],4:["drowzee","snorunt"],5:["snorunt","gastly"],6:["gastly","drowzee","snorunt"],7:["snorunt","drowzee"],8:["gastly","snorunt"]},difficulty:1.8,itemsPerFloor:3,unlockClears:3,description:"B1F~B8F. Ghost, Psychic, Ice. Dangerous!",boss:{speciesId:"gastly",name:"Phantom Gastly",statMultiplier:4}},frostyForest:{id:"frostyForest",name:"Frosty Forest",tilesetPath:"tilesets/TinyWoods/tileset_0.png",tilesetKey:"tinywoods-tiles",floors:10,enemySpeciesIds:["snorunt","shellos","zubat","drowzee"],floorEnemies:{1:["snorunt"],2:["snorunt","shellos"],3:["shellos","zubat"],4:["zubat","snorunt"],5:["snorunt","drowzee"],6:["drowzee","zubat"],7:["drowzee","snorunt","zubat"],8:["snorunt","drowzee"],9:["drowzee","snorunt"],10:["snorunt"]},difficulty:2,itemsPerFloor:4,unlockClears:5,description:"B1F~B10F. Ice and Psychic. The ultimate challenge!",boss:{speciesId:"snorunt",name:"Frost King Snorunt",statMultiplier:4.5}},magmaCavern:{id:"magmaCavern",name:"Magma Cavern",tilesetPath:"tilesets/ThunderwaveCave/tileset_0.png",tilesetKey:"thunderwave-tiles",floors:12,enemySpeciesIds:["numel","slugma","torkoal","geodude","aron"],floorEnemies:{1:["numel"],2:["numel","slugma"],3:["slugma","numel"],4:["slugma","geodude"],5:["numel","geodude","slugma"],6:["geodude","torkoal"],7:["torkoal","slugma"],8:["torkoal","aron","numel"],9:["aron","torkoal"],10:["torkoal","aron","slugma"],11:["torkoal","numel"],12:["torkoal"]},difficulty:2.2,itemsPerFloor:3,unlockClears:7,description:"B1F~B12F. Fire and Ground. Volcanic inferno!",boss:{speciesId:"torkoal",name:"Volcanic Torkoal",statMultiplier:5}},sinisterWoods:{id:"sinisterWoods",name:"Sinister Woods",tilesetPath:"tilesets/TinyWoods/tileset_0.png",tilesetKey:"tinywoods-tiles",floors:14,enemySpeciesIds:["murkrow","sableye","absol","gastly","drowzee","poochyena"],floorEnemies:{1:["poochyena"],2:["poochyena","murkrow"],3:["murkrow","sableye"],4:["sableye","gastly"],5:["poochyena","gastly"],6:["gastly","sableye"],7:["sableye","drowzee","murkrow"],8:["drowzee","gastly"],9:["murkrow","absol"],10:["absol","sableye"],11:["absol","gastly","murkrow"],12:["absol","drowzee"],13:["absol","sableye"],14:["absol"]},difficulty:2.5,itemsPerFloor:3,unlockClears:8,description:"B1F~B14F. Dark and Ghost. The abyss awaits!",boss:{speciesId:"absol",name:"Shadow Absol",statMultiplier:5.5}},overgrownForest:{id:"overgrownForest",name:"Overgrown Forest",tilesetPath:"tilesets/TinyWoods/tileset_0.png",tilesetKey:"tinywoods-tiles",floors:12,enemySpeciesIds:["chikorita","bellsprout","shroomish","caterpie","pidgey"],floorEnemies:{1:["chikorita"],2:["chikorita","bellsprout"],3:["bellsprout","caterpie"],4:["caterpie","chikorita"],5:["bellsprout","shroomish"],6:["shroomish","chikorita"],7:["shroomish","pidgey","bellsprout"],8:["pidgey","shroomish"],9:["shroomish","bellsprout","chikorita"],10:["shroomish","pidgey"],11:["shroomish","bellsprout"],12:["shroomish"]},difficulty:2.3,itemsPerFloor:4,unlockClears:9,description:"B1F~B12F. Grass and Bug. Nature's wrath!",boss:{speciesId:"shroomish",name:"Ancient Breloom",statMultiplier:5}},toxicSwamp:{id:"toxicSwamp",name:"Toxic Swamp",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["grimer","nidoranM","tentacool","bellsprout","zubat"],floorEnemies:{1:["grimer"],2:["grimer","nidoranM"],3:["nidoranM","grimer"],4:["nidoranM","zubat"],5:["grimer","tentacool"],6:["tentacool","nidoranM"],7:["tentacool","bellsprout","grimer"],8:["bellsprout","tentacool"],9:["grimer","nidoranM","tentacool"],10:["tentacool","bellsprout"],11:["nidoranM","grimer"],12:["grimer","tentacool"],13:["grimer","nidoranM"],14:["grimer"]},difficulty:2.6,itemsPerFloor:3,unlockClears:10,description:"B1F~B14F. Poison and Water. Toxic miasma!",boss:{speciesId:"grimer",name:"Toxic Muk",statMultiplier:5.5}},moonlitCave:{id:"moonlitCave",name:"Moonlit Cave",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:["clefairy","jigglypuff","ralts","drowzee","snorunt"],floorEnemies:{1:["clefairy"],2:["clefairy","jigglypuff"],3:["jigglypuff","clefairy"],4:["jigglypuff","ralts"],5:["ralts","clefairy"],6:["ralts","drowzee","jigglypuff"],7:["drowzee","ralts"],8:["ralts","snorunt","clefairy"],9:["snorunt","ralts"],10:["ralts"]},difficulty:2.4,itemsPerFloor:4,unlockClears:11,description:"B1F~B10F. Fairy and Psychic. Enchanted moonlight!",boss:{speciesId:"ralts",name:"Mystic Gardevoir",statMultiplier:5.5}},dragonsLair:{id:"dragonsLair",name:"Dragon's Lair",tilesetPath:"tilesets/ThunderwaveCave/tileset_0.png",tilesetKey:"thunderwave-tiles",floors:16,enemySpeciesIds:["dratini","bagon","gible","geodude","aron"],floorEnemies:{1:["dratini"],2:["dratini","bagon"],3:["bagon","dratini"],4:["bagon","geodude"],5:["dratini","gible"],6:["gible","bagon"],7:["gible","dratini","geodude"],8:["geodude","gible"],9:["gible","aron","bagon"],10:["aron","gible"],11:["gible","bagon","dratini"],12:["bagon","gible"],13:["gible","aron"],14:["gible","bagon"],15:["gible","dratini"],16:["gible"]},difficulty:3,itemsPerFloor:3,unlockClears:12,description:"B1F~B16F. Dragon types. The ultimate trial!",boss:{speciesId:"gible",name:"Elder Garchomp",statMultiplier:6,extraSkillIds:["dracoMeteor","earthPower"]}},steelFortress:{id:"steelFortress",name:"Steel Fortress",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["aron","beldum","skarmory","magnemite","geodude"],floorEnemies:{1:["aron","geodude"],2:["aron","magnemite"],3:["magnemite","geodude"],4:["aron","beldum"],5:["beldum","magnemite"],6:["beldum","skarmory"],7:["skarmory","aron"],8:["skarmory","beldum"],9:["beldum","skarmory","aron"],10:["skarmory","beldum","magnemite"],11:["beldum","skarmory"],12:["skarmory","beldum"],13:["beldum","skarmory"],14:["skarmory"]},difficulty:2.8,itemsPerFloor:3,unlockClears:13,description:"B1F~B14F. Steel types. Cold iron walls!",boss:{speciesId:"beldum",name:"Iron Metagross",statMultiplier:6,extraSkillIds:["flashCannon","bulletPunch"]}},buriedRuins:{id:"buriedRuins",name:"Buried Ruins",tilesetPath:"tilesets/ThunderwaveCave/tileset_0.png",tilesetKey:"thunderwave-tiles",floors:12,enemySpeciesIds:["sandshrew","trapinch","phanpy","geodude","numel"],floorEnemies:{1:["sandshrew","geodude"],2:["sandshrew","phanpy"],3:["geodude","phanpy"],4:["phanpy","trapinch"],5:["trapinch","sandshrew"],6:["trapinch","numel"],7:["numel","sandshrew"],8:["sandshrew","trapinch","phanpy"],9:["trapinch","phanpy","numel"],10:["trapinch","phanpy"],11:["trapinch","sandshrew"],12:["trapinch"]},difficulty:2.5,itemsPerFloor:3,unlockClears:14,description:"B1F~B12F. Ground types. Ancient desert ruins!",boss:{speciesId:"trapinch",name:"Ancient Flygon",statMultiplier:5.5,extraSkillIds:["earthPower","sandTomb"]}},stormySea:{id:"stormySea",name:"Stormy Sea",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:18,enemySpeciesIds:["horsea","lotad","carvanha","shellos","corsola","tentacool"],floorEnemies:{1:["shellos","lotad"],2:["shellos","horsea"],3:["horsea","lotad"],4:["lotad","corsola"],5:["corsola","horsea"],6:["horsea","tentacool"],7:["tentacool","carvanha"],8:["carvanha","horsea"],9:["carvanha","lotad"],10:["carvanha","tentacool","horsea"],11:["horsea","carvanha","corsola"],12:["tentacool","carvanha"],13:["carvanha","horsea"],14:["horsea","carvanha","tentacool"],15:["carvanha","horsea"],16:["carvanha","tentacool"],17:["carvanha","horsea"],18:["carvanha"]},difficulty:2.7,itemsPerFloor:3,unlockClears:10,description:"B1F~B18F. Water/Dark. Raging ocean depths!",boss:{speciesId:"carvanha",name:"Abyssal Sharpedo",statMultiplier:5.5,extraSkillIds:["darkPulse","brine"]}},ampPlains:{id:"ampPlains",name:"Amp Plains",tilesetPath:"tilesets/ThunderwaveCave/tileset_0.png",tilesetKey:"thunderwave-tiles",floors:10,enemySpeciesIds:["elekid","mareep","pikachu","voltorb","magnemite"],floorEnemies:{1:["mareep","voltorb"],2:["mareep","pikachu"],3:["pikachu","magnemite"],4:["magnemite","elekid"],5:["elekid","mareep"],6:["elekid","pikachu"],7:["pikachu","voltorb","elekid"],8:["elekid","mareep","magnemite"],9:["elekid","pikachu"],10:["elekid"]},difficulty:2.2,itemsPerFloor:3,unlockClears:6,description:"B1F~B10F. Electric types. Thunder crackles!",boss:{speciesId:"elekid",name:"Storm Electivire",statMultiplier:5,extraSkillIds:["thunderbolt","thunderPunch"]}},verdantForest:{id:"verdantForest",name:"Verdant Forest",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:8,enemySpeciesIds:["caterpie","wurmple","spinarak","pidgey"],floorEnemies:{1:["caterpie","wurmple"],2:["wurmple","pidgey"],3:["pidgey","caterpie"],4:["caterpie","spinarak"],5:["spinarak","wurmple"],6:["spinarak","pidgey"],7:["spinarak","wurmple","caterpie"],8:["spinarak"]},difficulty:1.6,itemsPerFloor:4,unlockClears:4,description:"B1F~B8F. Bug types. Creepy crawlies!",boss:{speciesId:"spinarak",name:"Matriarch Ariados",statMultiplier:4,extraSkillIds:["signalBeam"]}},mysticSanctum:{id:"mysticSanctum",name:"Mystic Sanctum",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["abra","natu","drowzee","ralts"],floorEnemies:{1:["natu","drowzee"],2:["drowzee","abra"],3:["abra","natu"],4:["natu","ralts"],5:["ralts","abra"],6:["abra","drowzee"],7:["drowzee","natu","abra"],8:["abra","ralts","natu"],9:["abra","natu"],10:["ralts","abra"],11:["abra","natu"],12:["abra"]},difficulty:2.4,itemsPerFloor:3,unlockClears:11,description:"B1F~B12F. Psychic types. Mind-bending mazes!",boss:{speciesId:"abra",name:"Grand Alakazam",statMultiplier:5.5,extraSkillIds:["psychic","hypnosis"]}},shadowForest:{id:"shadowForest",name:"Shadow Forest",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["houndour","sneasel","poochyena","murkrow","sableye","absol"],floorEnemies:{1:["poochyena","murkrow"],2:["murkrow","houndour"],3:["houndour","poochyena"],4:["poochyena","sneasel"],5:["sneasel","sableye"],6:["sableye","houndour"],7:["houndour","murkrow","sneasel"],8:["sneasel","sableye","poochyena"],9:["murkrow","houndour","sableye"],10:["absol","sneasel","houndour"],11:["absol","sableye","sneasel"],12:["absol","houndour"],13:["absol","sneasel"],14:["absol"]},difficulty:2.6,itemsPerFloor:3,unlockClears:12,description:"B1F~B14F. Dark types lurk in the shadows!",boss:{speciesId:"absol",name:"Dread Absol",statMultiplier:5.5,extraSkillIds:["darkPulse","nightSlash","crunch"]}},windySummit:{id:"windySummit",name:"Windy Summit",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:["taillow","starly","pidgey","zubat","murkrow"],floorEnemies:{1:["starly","pidgey"],2:["pidgey","taillow"],3:["taillow","starly"],4:["starly","zubat"],5:["zubat","taillow","pidgey"],6:["taillow","murkrow"],7:["murkrow","starly","taillow"],8:["taillow","murkrow","zubat"],9:["taillow","starly"],10:["taillow"]},difficulty:2,itemsPerFloor:3,unlockClears:5,description:"B1F~B10F. Flying types ride the wind!",boss:{speciesId:"taillow",name:"Storm Swellow",statMultiplier:5,extraSkillIds:["braveBird","airSlash","wingAttack"]}},battleArena:{id:"battleArena",name:"Battle Arena",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["makuhita","riolu","machop","meditite"],floorEnemies:{1:["machop","meditite"],2:["meditite","makuhita"],3:["makuhita","machop"],4:["machop","riolu"],5:["riolu","makuhita"],6:["makuhita","meditite","riolu"],7:["riolu","machop","makuhita"],8:["makuhita","riolu","meditite"],9:["riolu","machop"],10:["riolu","makuhita"],11:["riolu","machop"],12:["riolu"]},difficulty:2.3,itemsPerFloor:3,unlockClears:7,description:"B1F~B12F. Fighting types train here!",boss:{speciesId:"riolu",name:"Champion Lucario",statMultiplier:5.5,extraSkillIds:["auraSphere","focusPunch","drainPunch"]}},rockyCavern:{id:"rockyCavern",name:"Rocky Cavern",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["larvitar","nosepass","geodude","aron"],floorEnemies:{1:["geodude","aron"],2:["aron","nosepass"],3:["nosepass","geodude"],4:["geodude","larvitar"],5:["larvitar","nosepass"],6:["nosepass","aron","larvitar"],7:["larvitar","geodude","nosepass"],8:["nosepass","larvitar","aron"],9:["larvitar","geodude"],10:["larvitar","nosepass"],11:["larvitar","geodude"],12:["larvitar"]},difficulty:2.5,itemsPerFloor:3,unlockClears:9,description:"B1F~B12F. Rock types fortify the depths!",boss:{speciesId:"larvitar",name:"Ancient Tyranitar",statMultiplier:6,extraSkillIds:["stoneEdge","rockSlide","crunch"]}},frozenTundra:{id:"frozenTundra",name:"Frozen Tundra",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["swinub","spheal","snorunt"],floorEnemies:{1:["snorunt","spheal"],2:["spheal","swinub"],3:["swinub","snorunt"],4:["snorunt","spheal"],5:["spheal","swinub","snorunt"],6:["swinub","spheal"],7:["spheal","snorunt","swinub"],8:["swinub","snorunt"],9:["swinub","spheal"],10:["spheal","swinub"],11:["swinub","spheal"],12:["swinub","snorunt"],13:["swinub","spheal"],14:["swinub"]},difficulty:2.6,itemsPerFloor:3,unlockClears:10,description:"B1F~B14F. Ice types endure the cold!",boss:{speciesId:"swinub",name:"Frost Mamoswine",statMultiplier:5.5,extraSkillIds:["avalanche","iceBeam","earthPower"]}},meadowPath:{id:"meadowPath",name:"Meadow Path",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:8,enemySpeciesIds:["zigzagoon","whismur","caterpie","pidgey"],floorEnemies:{1:["caterpie","pidgey"],2:["pidgey","zigzagoon"],3:["zigzagoon","whismur"],4:["whismur","caterpie","zigzagoon"],5:["zigzagoon","whismur","pidgey"],6:["whismur","zigzagoon"],7:["zigzagoon","whismur"],8:["whismur"]},difficulty:1.4,itemsPerFloor:3,unlockClears:2,description:"B1F~B8F. A gentle stroll through the meadow!",boss:{speciesId:"whismur",name:"Booming Exploud",statMultiplier:4.5,extraSkillIds:["hyperVoice","headbutt"]}},petalGarden:{id:"petalGarden",name:"Petal Garden",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:["oddish","budew","bellsprout","shroomish"],floorEnemies:{1:["bellsprout","budew"],2:["budew","oddish"],3:["oddish","shroomish"],4:["shroomish","bellsprout","budew"],5:["oddish","budew","shroomish"],6:["shroomish","oddish"],7:["oddish","budew","bellsprout"],8:["oddish","shroomish"],9:["oddish","budew"],10:["oddish"]},difficulty:2,itemsPerFloor:3,unlockClears:4,description:"B1F~B10F. Grass types bloom in the garden!",boss:{speciesId:"oddish",name:"Blooming Vileplume",statMultiplier:5,extraSkillIds:["petalDance","energyBall","sleepPowder"]}},emberGrotto:{id:"emberGrotto",name:"Ember Grotto",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["vulpix","ponyta","charmander","slugma"],floorEnemies:{1:["charmander","slugma"],2:["slugma","vulpix"],3:["vulpix","ponyta"],4:["ponyta","charmander","vulpix"],5:["vulpix","slugma","ponyta"],6:["ponyta","vulpix"],7:["vulpix","ponyta","charmander"],8:["ponyta","vulpix"],9:["vulpix","ponyta"],10:["ponyta","vulpix"],11:["vulpix","ponyta"],12:["ponyta"]},difficulty:2.3,itemsPerFloor:3,unlockClears:6,description:"B1F~B12F. Fire types burn in the grotto!",boss:{speciesId:"ponyta",name:"Blazing Rapidash",statMultiplier:5.5,extraSkillIds:["fireBlast","flameWheel","bodySlam"]}},coralReef:{id:"coralReef",name:"Coral Reef",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:11,enemySpeciesIds:["staryu","clamperl","tentacool","horsea"],floorEnemies:{1:["tentacool","horsea"],2:["horsea","staryu"],3:["staryu","clamperl"],4:["clamperl","tentacool","staryu"],5:["staryu","clamperl","horsea"],6:["clamperl","staryu"],7:["staryu","tentacool","clamperl"],8:["clamperl","staryu"],9:["staryu","clamperl"],10:["clamperl","staryu"],11:["staryu"]},difficulty:2.2,itemsPerFloor:3,unlockClears:5,description:"B1F~B11F. Water types swirl in the reef!",boss:{speciesId:"staryu",name:"Dazzling Starmie",statMultiplier:5,extraSkillIds:["surf","aquaJet","whirlpool"]}},voltageLab:{id:"voltageLab",name:"Voltage Lab",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:["shinx","electrike","mareep","elekid"],floorEnemies:{1:["mareep","elekid"],2:["elekid","shinx"],3:["shinx","electrike"],4:["electrike","mareep","shinx"],5:["shinx","electrike","elekid"],6:["electrike","shinx"],7:["shinx","electrike","mareep"],8:["electrike","shinx"],9:["shinx","electrike"],10:["electrike"]},difficulty:2.1,itemsPerFloor:3,unlockClears:5,description:"B1F~B10F. Electric types spark in the lab!",boss:{speciesId:"electrike",name:"Storm Manectric",statMultiplier:5,extraSkillIds:["thunderbolt","wildCharge","bite"]}},quakeTunnel:{id:"quakeTunnel",name:"Quake Tunnel",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["cubone","diglett","sandshrew","trapinch"],floorEnemies:{1:["sandshrew","trapinch"],2:["trapinch","cubone"],3:["cubone","diglett"],4:["diglett","sandshrew","cubone"],5:["cubone","diglett","trapinch"],6:["diglett","cubone"],7:["cubone","sandshrew","diglett"],8:["diglett","cubone"],9:["cubone","diglett"],10:["diglett","cubone"],11:["cubone","diglett"],12:["cubone"]},difficulty:2.5,itemsPerFloor:3,unlockClears:8,description:"B1F~B12F. Ground types shake the tunnel!",boss:{speciesId:"cubone",name:"Skull Marowak",statMultiplier:5.5,extraSkillIds:["boneRush","earthPower","fireBlast"]}},mossBurrow:{id:"mossBurrow",name:"Moss Burrow",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:["paras","venonat","caterpie","spinarak"],floorEnemies:{1:["caterpie","spinarak"],2:["spinarak","paras"],3:["paras","venonat"],4:["venonat","caterpie","paras"],5:["paras","venonat","spinarak"],6:["venonat","paras"],7:["paras","spinarak","venonat"],8:["venonat","paras"],9:["paras","venonat"],10:["venonat"]},difficulty:2,itemsPerFloor:3,unlockClears:4,description:"B1F~B10F. Bug types thrive in the moss!",boss:{speciesId:"venonat",name:"Toxic Venomoth",statMultiplier:5,extraSkillIds:["signalBeam","sleepPowder","sludgeBomb"]}},ironWorks:{id:"ironWorks",name:"Iron Works",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["shieldon","bronzor","aron","magnemite"],floorEnemies:{1:["aron","magnemite"],2:["magnemite","shieldon"],3:["shieldon","bronzor"],4:["bronzor","aron","shieldon"],5:["shieldon","bronzor","magnemite"],6:["bronzor","shieldon"],7:["shieldon","aron","bronzor"],8:["bronzor","shieldon"],9:["shieldon","bronzor"],10:["bronzor","shieldon"],11:["shieldon","bronzor"],12:["bronzor","shieldon"],13:["shieldon"]},difficulty:2.7,itemsPerFloor:3,unlockClears:11,description:"B1F~B13F. Steel types forge in the works!",boss:{speciesId:"shieldon",name:"Iron Bastiodon",statMultiplier:6,extraSkillIds:["flashCannon","ironHead","gyroBall"]}},phantomCrypt:{id:"phantomCrypt",name:"Phantom Crypt",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["misdreavus","duskull","gastly"],floorEnemies:{1:["gastly"],2:["gastly","misdreavus"],3:["misdreavus","duskull"],4:["duskull","gastly","misdreavus"],5:["misdreavus","duskull","gastly"],6:["duskull","misdreavus"],7:["misdreavus","gastly","duskull"],8:["duskull","misdreavus"],9:["misdreavus","duskull"],10:["duskull","misdreavus"],11:["misdreavus","duskull"],12:["duskull"]},difficulty:2.6,itemsPerFloor:3,unlockClears:10,description:"B1F~B12F. Ghost types haunt the crypt!",boss:{speciesId:"misdreavus",name:"Phantom Mismagius",statMultiplier:5.5,extraSkillIds:["shadowBall","shadowSneak","nightShade"]}},wyrmAbyss:{id:"wyrmAbyss",name:"Wyrm Abyss",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["axew","deino","bagon","gible"],floorEnemies:{1:["axew"],2:["axew","bagon"],3:["bagon","deino"],4:["deino","axew"],5:["axew","gible"],6:["gible","bagon"],7:["bagon","deino"],8:["deino","gible"],9:["gible","axew"],10:["axew","deino","bagon"],11:["deino","gible","axew"],12:["gible","bagon","deino"],13:["axew","deino","gible"]},difficulty:2.8,itemsPerFloor:3,unlockClears:11,description:"B1F~B13F. Dragon types rule the abyss!",boss:{speciesId:"axew",name:"Titan Haxorus",statMultiplier:6.5,extraSkillIds:["dragonClaw","dragonRush","dragonPulse"]}},enchantedGlade:{id:"enchantedGlade",name:"Enchanted Glade",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:["snubbull","togepi","ralts","clefairy"],floorEnemies:{1:["snubbull"],2:["snubbull","togepi"],3:["togepi","ralts"],4:["ralts","snubbull"],5:["snubbull","clefairy"],6:["clefairy","togepi"],7:["togepi","ralts"],8:["ralts","clefairy","snubbull"],9:["snubbull","togepi","clefairy"],10:["togepi","ralts","snubbull"]},difficulty:2.1,itemsPerFloor:4,unlockClears:8,description:"B1F~B10F. Fairy types frolic in the glade!",boss:{speciesId:"snubbull",name:"Radiant Granbull",statMultiplier:5.5,extraSkillIds:["playRough","dazzlingGleam","moonblast"]}},glacialCavern:{id:"glacialCavern",name:"Glacial Cavern",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["snover","bergmite","snorunt","spheal"],floorEnemies:{1:["snover"],2:["snover","bergmite"],3:["bergmite","snorunt"],4:["snorunt","snover"],5:["snover","spheal"],6:["spheal","bergmite"],7:["bergmite","snorunt"],8:["snorunt","spheal","snover"],9:["snover","bergmite","spheal"],10:["spheal","snorunt","bergmite"],11:["bergmite","snover","snorunt"],12:["snover","bergmite","spheal","snorunt"]},difficulty:2.5,itemsPerFloor:3,unlockClears:10,description:"B1F~B12F. Ice types lurk in frozen depths!",boss:{speciesId:"snover",name:"Frost Abomasnow",statMultiplier:6,extraSkillIds:["iceBeam","iceHammer","avalanche"]}},astralSpire:{id:"astralSpire",name:"Astral Spire",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:11,enemySpeciesIds:["natu","spoink","ralts","abra"],floorEnemies:{1:["natu"],2:["natu","spoink"],3:["spoink","ralts"],4:["ralts","natu"],5:["natu","abra"],6:["abra","spoink"],7:["spoink","ralts"],8:["ralts","abra","natu"],9:["natu","spoink","abra"],10:["spoink","ralts","natu"],11:["natu","spoink","ralts","abra"]},difficulty:2.3,itemsPerFloor:3,unlockClears:9,description:"B1F~B11F. Psychic types guard the spire!",boss:{speciesId:"spoink",name:"Cosmic Grumpig",statMultiplier:5.5,extraSkillIds:["psychic","psyshock","zenHeadbutt"]}},shadowAlley:{id:"shadowAlley",name:"Shadow Alley",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:11,enemySpeciesIds:["stunky","purrloin","poochyena","absol"],floorEnemies:{1:["stunky"],2:["stunky","purrloin"],3:["purrloin","poochyena"],4:["poochyena","stunky"],5:["stunky","absol"],6:["absol","purrloin"],7:["purrloin","poochyena"],8:["poochyena","absol","stunky"],9:["stunky","purrloin","absol"],10:["absol","poochyena","purrloin"],11:["stunky","purrloin","poochyena","absol"]},difficulty:2.4,itemsPerFloor:3,unlockClears:10,description:"B1F~B11F. Dark types stalk the shadows!",boss:{speciesId:"stunky",name:"Shadow Skuntank",statMultiplier:5.8,extraSkillIds:["darkPulse","foulPlay","sludgeBomb"]}},galeCliffs:{id:"galeCliffs",name:"Gale Cliffs",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:11,enemySpeciesIds:["pidove","rufflet","starly","murkrow"],floorEnemies:{1:["pidove"],2:["pidove","rufflet"],3:["rufflet","starly"],4:["starly","pidove"],5:["pidove","murkrow"],6:["murkrow","rufflet"],7:["rufflet","starly"],8:["starly","murkrow","pidove"],9:["pidove","rufflet","murkrow"],10:["rufflet","starly","pidove"],11:["pidove","rufflet","starly","murkrow"]},difficulty:2.2,itemsPerFloor:3,unlockClears:8,description:"B1F~B11F. Flying types soar above the cliffs!",boss:{speciesId:"rufflet",name:"Storm Braviary",statMultiplier:5.5,extraSkillIds:["bravebird","hurricane","aerialAce"]}},brawlDojo:{id:"brawlDojo",name:"Brawl Dojo",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["tyrogue","crabrawler","machop","riolu"],floorEnemies:{1:["tyrogue"],2:["tyrogue","crabrawler"],3:["crabrawler","machop"],4:["machop","tyrogue"],5:["tyrogue","riolu"],6:["riolu","crabrawler"],7:["crabrawler","machop"],8:["machop","riolu","tyrogue"],9:["tyrogue","crabrawler","riolu"],10:["riolu","machop","crabrawler"],11:["crabrawler","tyrogue","machop"],12:["tyrogue","crabrawler","machop","riolu"]},difficulty:2.5,itemsPerFloor:3,unlockClears:10,description:"B1F~B12F. Fighting types train relentlessly!",boss:{speciesId:"crabrawler",name:"Grand Crabominable",statMultiplier:6,extraSkillIds:["hammerArm","closeCombat","drainPunch"]}},boulderPass:{id:"boulderPass",name:"Boulder Pass",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:12,enemySpeciesIds:["roggenrola","rockruff","geodude","larvitar"],floorEnemies:{1:["roggenrola"],2:["roggenrola","rockruff"],3:["rockruff","geodude"],4:["geodude","roggenrola"],5:["roggenrola","larvitar"],6:["larvitar","rockruff"],7:["rockruff","geodude"],8:["geodude","larvitar","roggenrola"],9:["roggenrola","rockruff","larvitar"],10:["larvitar","geodude","rockruff"],11:["rockruff","roggenrola","geodude"],12:["roggenrola","rockruff","geodude","larvitar"]},difficulty:2.6,itemsPerFloor:3,unlockClears:11,description:"B1F~B12F. Rock types block the pass!",boss:{speciesId:"rockruff",name:"Alpha Lycanroc",statMultiplier:6,extraSkillIds:["stoneEdge","rockWrecker","rockSlide"]}},tranquilGrove:{id:"tranquilGrove",name:"Tranquil Grove",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:["lillipup","minccino","zigzagoon","whismur"],floorEnemies:{1:["lillipup"],2:["lillipup","minccino"],3:["minccino","zigzagoon"],4:["zigzagoon","lillipup"],5:["lillipup","whismur"],6:["whismur","minccino"],7:["minccino","zigzagoon"],8:["zigzagoon","whismur","lillipup"],9:["lillipup","minccino","whismur"],10:["minccino","zigzagoon","lillipup","whismur"]},difficulty:1.8,itemsPerFloor:4,unlockClears:6,description:"B1F~B10F. Normal types roam the peaceful grove!",boss:{speciesId:"lillipup",name:"Noble Stoutland",statMultiplier:5,extraSkillIds:["triAttack","hyperVoice","headbutt"]}},fungalMarsh:{id:"fungalMarsh",name:"Fungal Marsh",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["foongus","petilil","oddish","budew"],floorEnemies:{1:["foongus"],2:["foongus","petilil"],3:["petilil","oddish"],4:["oddish","foongus"],5:["foongus","budew"],6:["budew","petilil"],7:["petilil","oddish"],8:["oddish","budew","foongus"],9:["foongus","petilil","budew"],10:["budew","oddish","petilil"],11:["petilil","foongus","oddish"],12:["oddish","budew","foongus","petilil"],13:["foongus","petilil","oddish","budew"]},difficulty:2.7,itemsPerFloor:3,unlockClears:12,description:"B1F~B13F. Fungal spores fill the misty marsh!",boss:{speciesId:"foongus",name:"Spore Lord Amoonguss",statMultiplier:6,extraSkillIds:["energyBall","grassKnot","sludgeBomb"]}},abyssalTrench:{id:"abyssalTrench",name:"Abyssal Trench",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["feebas","wailmer","shellos","horsea"],floorEnemies:{1:["feebas"],2:["feebas","shellos"],3:["shellos","wailmer"],4:["wailmer","feebas"],5:["feebas","horsea"],6:["horsea","wailmer"],7:["wailmer","shellos"],8:["shellos","feebas","horsea"],9:["feebas","wailmer","horsea"],10:["wailmer","horsea","shellos"],11:["horsea","feebas","shellos"],12:["shellos","wailmer","feebas","horsea"],13:["feebas","wailmer","shellos","horsea"],14:["wailmer","feebas","horsea","shellos"]},difficulty:2.8,itemsPerFloor:3,unlockClears:12,description:"B1F~B14F. Dark waters swirl in the ocean depths!",boss:{speciesId:"wailmer",name:"Leviathan Wailord",statMultiplier:6.5,extraSkillIds:["dive","brine","waterPulse"]}},infernoPit:{id:"infernoPit",name:"Inferno Pit",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["litwick","growlithe","slugma","vulpix"],floorEnemies:{1:["litwick"],2:["litwick","growlithe"],3:["growlithe","slugma"],4:["slugma","litwick"],5:["litwick","vulpix"],6:["vulpix","growlithe"],7:["growlithe","slugma"],8:["slugma","litwick","vulpix"],9:["litwick","growlithe","vulpix"],10:["growlithe","vulpix","slugma"],11:["vulpix","litwick","slugma"],12:["slugma","growlithe","litwick","vulpix"],13:["litwick","growlithe","slugma","vulpix"],14:["growlithe","litwick","vulpix","slugma"]},difficulty:2.9,itemsPerFloor:3,unlockClears:13,description:"B1F~B14F. Flames rage in the volcanic depths!",boss:{speciesId:"growlithe",name:"Infernal Arcanine",statMultiplier:6.5,extraSkillIds:["fireBlast","heatWave","flameWheel"]}},voltageSpire:{id:"voltageSpire",name:"Voltage Spire",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["joltik","tynamo","shinx","electrike"],floorEnemies:{1:["joltik"],2:["joltik","tynamo"],3:["tynamo","shinx"],4:["shinx","joltik"],5:["joltik","electrike"],6:["electrike","tynamo"],7:["tynamo","shinx"],8:["shinx","joltik","electrike"],9:["joltik","tynamo","electrike"],10:["tynamo","electrike","shinx"],11:["electrike","joltik","shinx"],12:["shinx","tynamo","joltik","electrike"],13:["joltik","tynamo","shinx","electrike"]},difficulty:2.8,itemsPerFloor:3,unlockClears:13,description:"B1F~B13F. Static charges crackle through the spire!",boss:{speciesId:"joltik",name:"Storm Galvantula",statMultiplier:6.5,extraSkillIds:["wildCharge","voltSwitch","thunderbolt"]}},corrosiveSewer:{id:"corrosiveSewer",name:"Corrosive Sewer",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["trubbish","skorupi","gulpin","grimer"],floorEnemies:{1:["trubbish"],2:["trubbish","skorupi"],3:["skorupi","gulpin"],4:["gulpin","trubbish"],5:["trubbish","grimer"],6:["grimer","skorupi"],7:["skorupi","gulpin"],8:["gulpin","trubbish","grimer"],9:["trubbish","skorupi","grimer"],10:["skorupi","grimer","gulpin"],11:["grimer","trubbish","gulpin"],12:["gulpin","skorupi","trubbish","grimer"],13:["trubbish","skorupi","gulpin","grimer"]},difficulty:2.7,itemsPerFloor:3,unlockClears:12,description:"B1F~B13F. Toxic waste pollutes the underground!",boss:{speciesId:"trubbish",name:"Toxic Garbodor",statMultiplier:6,extraSkillIds:["gunkShot","sludgeBomb","toxicSpikes"]}},seismicFault:{id:"seismicFault",name:"Seismic Fault",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["mudbray","hippopotas","sandshrew","diglett"],floorEnemies:{1:["mudbray"],2:["mudbray","hippopotas"],3:["hippopotas","sandshrew"],4:["sandshrew","mudbray"],5:["mudbray","diglett"],6:["diglett","hippopotas"],7:["hippopotas","sandshrew"],8:["sandshrew","mudbray","diglett"],9:["mudbray","hippopotas","diglett"],10:["hippopotas","diglett","sandshrew"],11:["diglett","mudbray","sandshrew"],12:["sandshrew","hippopotas","mudbray","diglett"],13:["mudbray","hippopotas","sandshrew","diglett"],14:["hippopotas","mudbray","diglett","sandshrew"]},difficulty:2.9,itemsPerFloor:3,unlockClears:13,description:"B1F~B14F. The ground trembles and splits apart!",boss:{speciesId:"mudbray",name:"Quake Mudsdale",statMultiplier:6.5,extraSkillIds:["highHorsepower","earthPower","bulldoze"]}},stalactiteGrotto:{id:"stalactiteGrotto",name:"Stalactite Grotto",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["dwebble","binacle","nosepass","roggenrola"],floorEnemies:{1:["dwebble"],2:["dwebble","binacle"],3:["binacle","nosepass"],4:["nosepass","dwebble"],5:["dwebble","roggenrola"],6:["roggenrola","binacle"],7:["binacle","nosepass"],8:["nosepass","dwebble","roggenrola"],9:["dwebble","binacle","roggenrola"],10:["binacle","roggenrola","nosepass"],11:["roggenrola","dwebble","nosepass"],12:["nosepass","binacle","dwebble","roggenrola"],13:["dwebble","binacle","nosepass","roggenrola"]},difficulty:2.8,itemsPerFloor:3,unlockClears:13,description:"B1F~B13F. Stalactites hang from the rocky ceiling!",boss:{speciesId:"binacle",name:"Stone Barbaracle",statMultiplier:6.5,extraSkillIds:["stoneEdge","smackDown","rockSlide"]}},chitinBurrow:{id:"chitinBurrow",name:"Chitin Burrow",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["nincada","venipede","spinarak","paras"],floorEnemies:{1:["nincada"],2:["nincada","venipede"],3:["venipede","spinarak"],4:["spinarak","nincada"],5:["nincada","paras"],6:["paras","venipede"],7:["venipede","spinarak"],8:["spinarak","nincada","paras"],9:["nincada","venipede","paras"],10:["venipede","paras","spinarak"],11:["paras","nincada","spinarak"],12:["spinarak","venipede","nincada","paras"],13:["nincada","venipede","spinarak","paras"]},difficulty:2.6,itemsPerFloor:3,unlockClears:12,description:"B1F~B13F. Bug types swarm in the underground nest!",boss:{speciesId:"nincada",name:"Swift Ninjask",statMultiplier:6,extraSkillIds:["megahorn","xScissor","signalBeam"]}},valorArena:{id:"valorArena",name:"Valor Arena",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["mienfoo","timburr","makuhita","tyrogue"],floorEnemies:{1:["mienfoo"],2:["mienfoo","timburr"],3:["timburr","makuhita"],4:["makuhita","mienfoo"],5:["mienfoo","tyrogue"],6:["tyrogue","timburr"],7:["timburr","makuhita"],8:["makuhita","mienfoo","tyrogue"],9:["mienfoo","timburr","tyrogue"],10:["timburr","tyrogue","makuhita"],11:["tyrogue","mienfoo","makuhita"],12:["makuhita","timburr","mienfoo","tyrogue"],13:["mienfoo","timburr","makuhita","tyrogue"],14:["timburr","mienfoo","tyrogue","makuhita"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Warriors clash in the ultimate arena!",boss:{speciesId:"mienfoo",name:"Grand Mienshao",statMultiplier:7,extraSkillIds:["superpower","closeCombat","drainPunch"]}},titaniumMine:{id:"titaniumMine",name:"Titanium Mine",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["klink","ferroseed","magnemite","bronzor"],floorEnemies:{1:["klink"],2:["klink","ferroseed"],3:["ferroseed","magnemite"],4:["magnemite","klink"],5:["klink","bronzor"],6:["bronzor","ferroseed"],7:["ferroseed","magnemite"],8:["magnemite","klink","bronzor"],9:["klink","ferroseed","bronzor"],10:["ferroseed","bronzor","magnemite"],11:["bronzor","klink","magnemite"],12:["magnemite","ferroseed","klink","bronzor"],13:["klink","ferroseed","magnemite","bronzor"],14:["ferroseed","klink","bronzor","magnemite"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Steel types guard the deep mine!",boss:{speciesId:"klink",name:"Overdrive Klinklang",statMultiplier:7,extraSkillIds:["gearGrind","flashCannon","gyroBall"]}},spectralWoods:{id:"spectralWoods",name:"Spectral Woods",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:13,enemySpeciesIds:["phantump","honedge","duskull","misdreavus"],floorEnemies:{1:["phantump"],2:["phantump","honedge"],3:["honedge","duskull"],4:["duskull","phantump"],5:["phantump","misdreavus"],6:["misdreavus","honedge"],7:["honedge","duskull"],8:["duskull","phantump","misdreavus"],9:["phantump","honedge","misdreavus"],10:["honedge","misdreavus","duskull"],11:["misdreavus","phantump","duskull"],12:["duskull","honedge","phantump","misdreavus"],13:["phantump","honedge","duskull","misdreavus"]},difficulty:2.9,itemsPerFloor:3,unlockClears:13,description:"B1F~B13F. Ghostly trees whisper in the haunted forest!",boss:{speciesId:"phantump",name:"Ancient Trevenant",statMultiplier:6.5,extraSkillIds:["phantomForce","shadowBall","energyBall"]}},cosmicRift:{id:"cosmicRift",name:"Cosmic Rift",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["solosis","elgyem","abra","ralts"],floorEnemies:{1:["solosis"],2:["solosis","elgyem"],3:["elgyem","abra"],4:["abra","solosis"],5:["solosis","ralts"],6:["ralts","elgyem"],7:["elgyem","abra"],8:["abra","solosis","ralts"],9:["solosis","elgyem","ralts"],10:["elgyem","ralts","abra"],11:["ralts","solosis","abra"],12:["abra","elgyem","solosis","ralts"],13:["solosis","elgyem","abra","ralts"],14:["elgyem","solosis","ralts","abra"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Psychic energy warps space and time!",boss:{speciesId:"solosis",name:"Cosmic Reuniclus",statMultiplier:7,extraSkillIds:["futuresight","psychic","psyshock"]}},frostbiteChasm:{id:"frostbiteChasm",name:"Frostbite Chasm",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["cryogonal","cubchoo","snorunt","swinub"],floorEnemies:{1:["snorunt","swinub"],2:["swinub","snorunt"],3:["snorunt","cubchoo"],4:["cubchoo","swinub"],5:["cubchoo","snorunt"],6:["snorunt","cryogonal"],7:["cryogonal","cubchoo"],8:["cubchoo","cryogonal","snorunt"],9:["cryogonal","snorunt","cubchoo"],10:["cryogonal","cubchoo","swinub"],11:["cubchoo","cryogonal","snorunt"],12:["cryogonal","cubchoo","snorunt","swinub"],13:["cryogonal","cubchoo","snorunt","swinub"],14:["cryogonal","cubchoo","snorunt","swinub"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Ancient ice formations creak and groan!",boss:{speciesId:"cryogonal",name:"Glacial Cryogonal",statMultiplier:7,extraSkillIds:["freezeDry","iceBeam","auroraBeam"]}},midnightAlley:{id:"midnightAlley",name:"Midnight Alley",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["sandile","inkay","absol","poochyena"],floorEnemies:{1:["poochyena","absol"],2:["absol","poochyena"],3:["poochyena","sandile"],4:["sandile","absol"],5:["sandile","poochyena"],6:["absol","inkay"],7:["inkay","sandile"],8:["sandile","inkay","absol"],9:["inkay","absol","sandile"],10:["inkay","sandile","poochyena"],11:["sandile","inkay","absol"],12:["inkay","sandile","absol","poochyena"],13:["sandile","inkay","absol","poochyena"],14:["inkay","sandile","absol","poochyena"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Dark shadows lurk in every corner!",boss:{speciesId:"sandile",name:"Shadow Krookodile",statMultiplier:7,extraSkillIds:["knockOff","crunch","bite"]}},pixieHollow:{id:"pixieHollow",name:"Pixie Hollow",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["spritzee","swirlix","ralts","clefairy"],floorEnemies:{1:["clefairy","ralts"],2:["ralts","clefairy"],3:["clefairy","spritzee"],4:["spritzee","ralts"],5:["spritzee","clefairy"],6:["ralts","swirlix"],7:["swirlix","spritzee"],8:["spritzee","swirlix","ralts"],9:["swirlix","ralts","spritzee"],10:["swirlix","spritzee","clefairy"],11:["spritzee","swirlix","ralts"],12:["swirlix","spritzee","ralts","clefairy"],13:["spritzee","swirlix","ralts","clefairy"],14:["swirlix","spritzee","ralts","clefairy"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Fairy magic fills the enchanted clearing!",boss:{speciesId:"spritzee",name:"Enchanted Aromatisse",statMultiplier:7,extraSkillIds:["moonlight","dazzlingGleam","drainingKiss"]}},drakeNest:{id:"drakeNest",name:"Drake Nest",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["goomy","jangmoo","gible","bagon"],floorEnemies:{1:["bagon","gible"],2:["gible","bagon"],3:["bagon","goomy"],4:["goomy","gible"],5:["goomy","bagon"],6:["gible","jangmoo"],7:["jangmoo","goomy"],8:["goomy","jangmoo","bagon"],9:["jangmoo","bagon","goomy"],10:["jangmoo","goomy","gible"],11:["goomy","jangmoo","bagon"],12:["jangmoo","goomy","bagon","gible"],13:["goomy","jangmoo","bagon","gible"],14:["jangmoo","goomy","bagon","gible"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Dragon eggs hatch in volcanic warmth!",boss:{speciesId:"goomy",name:"Elder Goodra",statMultiplier:7,extraSkillIds:["outrage","dragonClaw","dragonBreath"]}},stormyNest:{id:"stormyNest",name:"Stormy Nest",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["noibat","vullaby","starly","pidgey"],floorEnemies:{1:["pidgey","starly"],2:["starly","pidgey"],3:["pidgey","noibat"],4:["noibat","starly"],5:["noibat","pidgey"],6:["starly","vullaby"],7:["vullaby","noibat"],8:["noibat","vullaby","starly"],9:["vullaby","starly","noibat"],10:["vullaby","noibat","pidgey"],11:["noibat","vullaby","starly"],12:["vullaby","noibat","starly","pidgey"],13:["noibat","vullaby","starly","pidgey"],14:["vullaby","noibat","starly","pidgey"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Fierce winds buffet the mountain nests!",boss:{speciesId:"noibat",name:"Stormy Noivern",statMultiplier:7,extraSkillIds:["aerialAce","airSlash","dragonBreath"]}},cozyBurrow:{id:"cozyBurrow",name:"Cozy Burrow",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:14,enemySpeciesIds:["stufful","furfrou","sentret","zigzagoon"],floorEnemies:{1:["zigzagoon","sentret"],2:["sentret","zigzagoon"],3:["zigzagoon","stufful"],4:["stufful","sentret"],5:["stufful","zigzagoon"],6:["sentret","furfrou"],7:["furfrou","stufful"],8:["stufful","furfrou","sentret"],9:["furfrou","sentret","stufful"],10:["furfrou","stufful","zigzagoon"],11:["stufful","furfrou","sentret"],12:["furfrou","stufful","sentret","zigzagoon"],13:["stufful","furfrou","sentret","zigzagoon"],14:["furfrou","stufful","sentret","zigzagoon"]},difficulty:3,itemsPerFloor:3,unlockClears:14,description:"B1F~B14F. Normal types guard their cozy den!",boss:{speciesId:"stufful",name:"Mighty Bewear",statMultiplier:7,extraSkillIds:["workUp","bodySlam","headbutt"]}},tidalGrotto:{id:"tidalGrotto",name:"Tidal Grotto",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["wimpod","tympole","shellos","tentacool"],floorEnemies:{1:["shellos","tentacool"],2:["tentacool","shellos"],3:["shellos","tympole"],4:["tympole","tentacool"],5:["tympole","shellos"],6:["tentacool","wimpod"],7:["wimpod","tympole"],8:["tympole","wimpod","shellos"],9:["wimpod","shellos","tympole"],10:["wimpod","tympole","tentacool"],11:["tympole","wimpod","shellos"],12:["wimpod","tympole","shellos","tentacool"],13:["tympole","wimpod","shellos","tentacool"],14:["wimpod","tympole","shellos","tentacool"],15:["wimpod","tympole","shellos","tentacool"],16:["wimpod","tympole","shellos","tentacool"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Tidal waves crash through the sea cave!",boss:{speciesId:"wimpod",name:"Tidal Golisopod",statMultiplier:7.5,extraSkillIds:["waterfall","waterPulse","xScissor"]}},blazingCaldera:{id:"blazingCaldera",name:"Blazing Caldera",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["salandit","larvesta","torkoal","numel"],floorEnemies:{1:["numel","torkoal"],2:["torkoal","numel"],3:["numel","salandit"],4:["salandit","torkoal"],5:["salandit","numel"],6:["torkoal","larvesta"],7:["larvesta","salandit"],8:["salandit","larvesta","numel"],9:["larvesta","numel","salandit"],10:["larvesta","salandit","torkoal"],11:["salandit","larvesta","numel"],12:["larvesta","salandit","numel","torkoal"],13:["salandit","larvesta","numel","torkoal"],14:["larvesta","salandit","numel","torkoal"],15:["larvesta","salandit","numel","torkoal"],16:["larvesta","salandit","numel","torkoal"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Lava bubbles in the volcanic caldera!",boss:{speciesId:"larvesta",name:"Blazing Volcarona",statMultiplier:7.5,extraSkillIds:["fireWhip","heatWave","xScissor"]}},verdantCanopy:{id:"verdantCanopy",name:"Verdant Canopy",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["fomantis","morelull","oddish","petilil"],floorEnemies:{1:["oddish","petilil"],2:["petilil","oddish"],3:["oddish","fomantis"],4:["fomantis","petilil"],5:["fomantis","oddish"],6:["petilil","morelull"],7:["morelull","fomantis"],8:["fomantis","morelull","oddish"],9:["morelull","oddish","fomantis"],10:["morelull","fomantis","petilil"],11:["fomantis","morelull","oddish"],12:["morelull","fomantis","oddish","petilil"],13:["fomantis","morelull","oddish","petilil"],14:["morelull","fomantis","oddish","petilil"],15:["morelull","fomantis","oddish","petilil"],16:["morelull","fomantis","oddish","petilil"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Dense foliage blocks out the sunlight!",boss:{speciesId:"fomantis",name:"Verdant Lurantis",statMultiplier:7.5,extraSkillIds:["leafStorm","leafBlade","razorLeaf"]}},sparkingPlant:{id:"sparkingPlant",name:"Sparking Plant",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["charjabug","helioptile","pikachu","mareep"],floorEnemies:{1:["pikachu","mareep"],2:["mareep","pikachu"],3:["pikachu","charjabug"],4:["charjabug","mareep"],5:["charjabug","pikachu"],6:["mareep","helioptile"],7:["helioptile","charjabug"],8:["charjabug","helioptile","pikachu"],9:["helioptile","pikachu","charjabug"],10:["helioptile","charjabug","mareep"],11:["charjabug","helioptile","pikachu"],12:["helioptile","charjabug","pikachu","mareep"],13:["charjabug","helioptile","pikachu","mareep"],14:["helioptile","charjabug","pikachu","mareep"],15:["helioptile","charjabug","pikachu","mareep"],16:["helioptile","charjabug","pikachu","mareep"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Electric sparks crackle through the power plant!",boss:{speciesId:"charjabug",name:"Charged Vikavolt",statMultiplier:7.5,extraSkillIds:["electricTerrain","thunderbolt","xScissor"]}},venomousReef:{id:"venomousReef",name:"Venomous Reef",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["mareanie","croagunk","grimer","trubbish"],floorEnemies:{1:["grimer","trubbish"],2:["trubbish","grimer"],3:["grimer","mareanie"],4:["mareanie","trubbish"],5:["mareanie","grimer"],6:["trubbish","croagunk"],7:["croagunk","mareanie"],8:["mareanie","croagunk","grimer"],9:["croagunk","grimer","mareanie"],10:["croagunk","mareanie","trubbish"],11:["mareanie","croagunk","grimer"],12:["croagunk","mareanie","grimer","trubbish"],13:["mareanie","croagunk","grimer","trubbish"],14:["croagunk","mareanie","grimer","trubbish"],15:["croagunk","mareanie","grimer","trubbish"],16:["croagunk","mareanie","grimer","trubbish"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Toxic fumes rise from the venomous reef!",boss:{speciesId:"mareanie",name:"Venomous Toxapex",statMultiplier:7.5,extraSkillIds:["poisonJab","venoshock","waterPulse"]}},shiftingSands:{id:"shiftingSands",name:"Shifting Sands",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["sandygast","silicobra","phanpy","mudbray"],floorEnemies:{1:["phanpy","mudbray"],2:["mudbray","phanpy"],3:["phanpy","sandygast"],4:["sandygast","mudbray"],5:["sandygast","phanpy"],6:["mudbray","silicobra"],7:["silicobra","sandygast"],8:["sandygast","silicobra","phanpy"],9:["silicobra","phanpy","sandygast"],10:["silicobra","sandygast","mudbray"],11:["sandygast","silicobra","phanpy"],12:["silicobra","sandygast","phanpy","mudbray"],13:["sandygast","silicobra","phanpy","mudbray"],14:["silicobra","sandygast","phanpy","mudbray"],15:["silicobra","sandygast","phanpy","mudbray"],16:["silicobra","sandygast","phanpy","mudbray"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Dunes shift and swallow the unwary!",boss:{speciesId:"sandygast",name:"Colossal Palossand",statMultiplier:7.5,extraSkillIds:["scorchingSand","earthPower","shadowBall"]}},crystalCavern:{id:"crystalCavern",name:"Crystal Cavern",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["carbink","minior","dwebble","geodude"],floorEnemies:{1:["geodude","dwebble"],2:["dwebble","geodude"],3:["geodude","carbink"],4:["carbink","dwebble"],5:["carbink","geodude"],6:["dwebble","minior"],7:["minior","carbink"],8:["carbink","minior","geodude"],9:["minior","geodude","carbink"],10:["minior","carbink","dwebble"],11:["carbink","minior","geodude"],12:["minior","carbink","geodude","dwebble"],13:["carbink","minior","geodude","dwebble"],14:["minior","carbink","geodude","dwebble"],15:["minior","carbink","geodude","dwebble"],16:["minior","carbink","geodude","dwebble"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Crystals glimmer in the deep cavern!",boss:{speciesId:"carbink",name:"Crystal Carbink",statMultiplier:7.5,extraSkillIds:["stealthRock","rockSlide","dazzlingGleam"]}},silkWeb:{id:"silkWeb",name:"Silk Web",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["dewpider","sizzlipede","nincada","venipede"],floorEnemies:{1:["nincada","venipede"],2:["venipede","nincada"],3:["nincada","dewpider"],4:["dewpider","venipede"],5:["dewpider","nincada"],6:["venipede","sizzlipede"],7:["sizzlipede","dewpider"],8:["dewpider","sizzlipede","nincada"],9:["sizzlipede","nincada","dewpider"],10:["sizzlipede","dewpider","venipede"],11:["dewpider","sizzlipede","nincada"],12:["sizzlipede","dewpider","nincada","venipede"],13:["dewpider","sizzlipede","nincada","venipede"],14:["sizzlipede","dewpider","nincada","venipede"],15:["sizzlipede","dewpider","nincada","venipede"],16:["sizzlipede","dewpider","nincada","venipede"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Sticky silk webs cover every surface!",boss:{speciesId:"dewpider",name:"Web Araquanid",statMultiplier:7.5,extraSkillIds:["lunge","waterPulse","leechLife"]}},championDojo:{id:"championDojo",name:"Champion Dojo",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["pancham","hawlucha","mienfoo","tyrogue"],floorEnemies:{1:["tyrogue","mienfoo"],2:["mienfoo","tyrogue"],3:["tyrogue","pancham"],4:["pancham","mienfoo"],5:["pancham","tyrogue"],6:["mienfoo","hawlucha"],7:["hawlucha","pancham"],8:["pancham","hawlucha","tyrogue"],9:["hawlucha","tyrogue","pancham"],10:["hawlucha","pancham","mienfoo"],11:["pancham","hawlucha","tyrogue"],12:["hawlucha","pancham","tyrogue","mienfoo"],13:["pancham","hawlucha","tyrogue","mienfoo"],14:["hawlucha","pancham","tyrogue","mienfoo"],15:["hawlucha","pancham","tyrogue","mienfoo"],16:["hawlucha","pancham","tyrogue","mienfoo"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. The dojo's strongest fighters await!",boss:{speciesId:"hawlucha",name:"Champion Hawlucha",statMultiplier:7.5,extraSkillIds:["skyUppercut","aerialAce","closeCombat"]}},forgeMountain:{id:"forgeMountain",name:"Forge Mountain",tilesetPath:"tilesets/MtSteel/tileset_0.png",tilesetKey:"mtsteel-tiles",floors:16,enemySpeciesIds:["durant","togedemaru","klink","ferroseed","beldum","shieldon","bronzor","aron"],floorEnemies:{1:["aron","shieldon"],2:["shieldon","bronzor"],3:["aron","klink"],4:["klink","ferroseed"],5:["ferroseed","beldum"],6:["beldum","togedemaru"],7:["togedemaru","durant"],8:["durant","klink","ferroseed"],9:["durant","togedemaru","beldum"],10:["togedemaru","durant","klink"],11:["durant","ferroseed","beldum"],12:["durant","togedemaru","klink","ferroseed"],13:["durant","togedemaru","beldum","klink"],14:["durant","togedemaru","ferroseed","beldum"],15:["durant","togedemaru","klink","ferroseed"],16:["durant","togedemaru","klink","ferroseed"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. The mountain's forge burns eternal!",boss:{speciesId:"durant",name:"Forge Lord Durant",statMultiplier:7.5,extraSkillIds:["ironHead","autotomize","xScissor"]}},hauntedManor:{id:"hauntedManor",name:"Haunted Manor",tilesetPath:"tilesets/SinisterWoods/tileset_0.png",tilesetKey:"sinisterwoods-tiles",floors:16,enemySpeciesIds:["drifloon","golett","phantump","honedge","misdreavus","duskull","gastly"],floorEnemies:{1:["gastly","duskull"],2:["duskull","misdreavus"],3:["misdreavus","phantump"],4:["phantump","honedge"],5:["honedge","drifloon"],6:["drifloon","golett"],7:["golett","phantump","honedge"],8:["drifloon","golett","misdreavus"],9:["golett","drifloon","honedge"],10:["drifloon","golett","phantump"],11:["golett","drifloon","misdreavus"],12:["drifloon","golett","phantump","honedge"],13:["golett","drifloon","phantump","misdreavus"],14:["drifloon","golett","honedge","duskull"],15:["golett","drifloon","phantump","honedge"],16:["golett","drifloon","phantump","honedge"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Spirits of the manor cry out for company!",boss:{speciesId:"golett",name:"Ancient Golurk",statMultiplier:7.5,extraSkillIds:["shadowPunch","earthquake","phantomForce"]}},dreamTemple:{id:"dreamTemple",name:"Dream Temple",tilesetPath:"tilesets/MtSteel/tileset_0.png",tilesetKey:"mtsteel-tiles",floors:16,enemySpeciesIds:["hatenna","indeedee","solosis","elgyem","spoink","abra","natu","drowzee"],floorEnemies:{1:["abra","natu"],2:["natu","drowzee"],3:["drowzee","spoink"],4:["spoink","solosis"],5:["solosis","elgyem"],6:["elgyem","hatenna"],7:["hatenna","indeedee"],8:["indeedee","hatenna","solosis"],9:["hatenna","indeedee","elgyem"],10:["indeedee","hatenna","spoink"],11:["hatenna","indeedee","solosis"],12:["indeedee","hatenna","elgyem","solosis"],13:["hatenna","indeedee","spoink","elgyem"],14:["indeedee","hatenna","solosis","elgyem"],15:["hatenna","indeedee","solosis","elgyem"],16:["hatenna","indeedee","solosis","elgyem"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Psychic waves distort reality within!",boss:{speciesId:"indeedee",name:"Dream Oracle Indeedee",statMultiplier:7.5,extraSkillIds:["psychic","expandingForce","zenHeadbutt"]}},permafrostPeak:{id:"permafrostPeak",name:"Permafrost Peak",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["vanillite","snom","snover","bergmite","cryogonal","cubchoo","snorunt","swinub"],floorEnemies:{1:["snorunt","swinub"],2:["swinub","snover"],3:["snover","bergmite"],4:["bergmite","cubchoo"],5:["cubchoo","cryogonal"],6:["cryogonal","vanillite"],7:["vanillite","snom"],8:["snom","vanillite","cryogonal"],9:["vanillite","snom","cubchoo"],10:["snom","vanillite","bergmite"],11:["vanillite","snom","cryogonal"],12:["snom","vanillite","cubchoo","cryogonal"],13:["vanillite","snom","bergmite","cryogonal"],14:["snom","vanillite","cubchoo","cryogonal"],15:["vanillite","snom","cryogonal","cubchoo"],16:["vanillite","snom","cryogonal","cubchoo"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. The peak is forever frozen in ice!",boss:{speciesId:"vanillite",name:"Frost King Vanilluxe",statMultiplier:7.5,extraSkillIds:["iceBeam","auroraBeam","icyWind"]}},thiefsDen:{id:"thiefsDen",name:"Thief's Den",tilesetPath:"tilesets/SinisterWoods/tileset_0.png",tilesetKey:"sinisterwoods-tiles",floors:16,enemySpeciesIds:["nickit","impidimp","sandile","inkay","stunky","purrloin","houndour","sneasel"],floorEnemies:{1:["purrloin","stunky"],2:["stunky","houndour"],3:["houndour","sneasel"],4:["sneasel","sandile"],5:["sandile","inkay"],6:["inkay","nickit"],7:["nickit","impidimp"],8:["impidimp","nickit","sandile"],9:["nickit","impidimp","inkay"],10:["impidimp","nickit","stunky"],11:["nickit","impidimp","sandile"],12:["impidimp","nickit","inkay","sandile"],13:["nickit","impidimp","stunky","inkay"],14:["impidimp","nickit","sandile","houndour"],15:["nickit","impidimp","sandile","inkay"],16:["nickit","impidimp","sandile","inkay"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. A den of cunning thieves and tricksters!",boss:{speciesId:"impidimp",name:"Chaos Lord Grimmsnarl",statMultiplier:7.5,extraSkillIds:["crunch","throatChop","dazzlingGleam"]}},sugarGarden:{id:"sugarGarden",name:"Sugar Garden",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["milcery","comfey","spritzee","swirlix","snubbull","togepi","clefairy","jigglypuff"],floorEnemies:{1:["clefairy","jigglypuff"],2:["jigglypuff","togepi"],3:["togepi","snubbull"],4:["snubbull","spritzee"],5:["spritzee","swirlix"],6:["swirlix","milcery"],7:["milcery","comfey"],8:["comfey","milcery","spritzee"],9:["milcery","comfey","swirlix"],10:["comfey","milcery","togepi"],11:["milcery","comfey","spritzee"],12:["comfey","milcery","swirlix","spritzee"],13:["milcery","comfey","togepi","swirlix"],14:["comfey","milcery","spritzee","snubbull"],15:["milcery","comfey","swirlix","spritzee"],16:["milcery","comfey","swirlix","spritzee"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. A sweet garden where fairies dance!",boss:{speciesId:"comfey",name:"Garden Queen Comfey",statMultiplier:7.5,extraSkillIds:["dazzlingGleam","sweetKiss","moonlight"]}},draconicSpire:{id:"draconicSpire",name:"Draconic Spire",tilesetPath:"tilesets/MtSteel/tileset_0.png",tilesetKey:"mtsteel-tiles",floors:16,enemySpeciesIds:["turtonator","drampa","goomy","jangmoo","dratini","bagon","gible","axew"],floorEnemies:{1:["dratini","bagon"],2:["bagon","gible"],3:["gible","axew"],4:["axew","goomy"],5:["goomy","jangmoo"],6:["jangmoo","turtonator"],7:["turtonator","drampa"],8:["drampa","turtonator","goomy"],9:["turtonator","drampa","jangmoo"],10:["drampa","turtonator","axew"],11:["turtonator","drampa","goomy"],12:["drampa","turtonator","jangmoo","goomy"],13:["turtonator","drampa","axew","jangmoo"],14:["drampa","turtonator","goomy","gible"],15:["turtonator","drampa","goomy","jangmoo"],16:["turtonator","drampa","goomy","jangmoo"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. Ancient dragons guard the spire's peak!",boss:{speciesId:"drampa",name:"Elder Dragon Drampa",statMultiplier:7.5,extraSkillIds:["dragonPulse","dragonDance","hyperVoice"]}},skyHighNest:{id:"skyHighNest",name:"Sky High Nest",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["rookidee","archen","noibat","vullaby","taillow","starly","pidove","rufflet"],floorEnemies:{1:["taillow","starly"],2:["starly","pidove"],3:["pidove","rufflet"],4:["rufflet","noibat"],5:["noibat","vullaby"],6:["vullaby","rookidee"],7:["rookidee","archen"],8:["archen","rookidee","noibat"],9:["rookidee","archen","vullaby"],10:["archen","rookidee","rufflet"],11:["rookidee","archen","noibat"],12:["archen","rookidee","vullaby","noibat"],13:["rookidee","archen","rufflet","vullaby"],14:["archen","rookidee","noibat","starly"],15:["rookidee","archen","noibat","vullaby"],16:["rookidee","archen","noibat","vullaby"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. A towering nest above the clouds!",boss:{speciesId:"archen",name:"Primal Archeops",statMultiplier:7.5,extraSkillIds:["pluck","rockSlide","aerialAce"]}},pastoralPlains:{id:"pastoralPlains",name:"Pastoral Plains",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:16,enemySpeciesIds:["wooloo","skwovet","stufful","furfrou","lillipup","minccino","zigzagoon","whismur"],floorEnemies:{1:["zigzagoon","whismur"],2:["whismur","lillipup"],3:["lillipup","minccino"],4:["minccino","stufful"],5:["stufful","furfrou"],6:["furfrou","wooloo"],7:["wooloo","skwovet"],8:["skwovet","wooloo","stufful"],9:["wooloo","skwovet","furfrou"],10:["skwovet","wooloo","lillipup"],11:["wooloo","skwovet","stufful"],12:["skwovet","wooloo","furfrou","stufful"],13:["wooloo","skwovet","lillipup","furfrou"],14:["skwovet","wooloo","stufful","minccino"],15:["wooloo","skwovet","furfrou","stufful"],16:["wooloo","skwovet","furfrou","stufful"]},difficulty:3.5,itemsPerFloor:3,unlockClears:16,description:"B1F~B16F. A peaceful plain with hidden danger!",boss:{speciesId:"skwovet",name:"Hoard Master Greedent",statMultiplier:7.5,extraSkillIds:["headbutt","facade","hyperVoice"]}},abyssalDepths:{id:"abyssalDepths",name:"Abyssal Depths",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:18,enemySpeciesIds:["bruxish","chewtle","wimpod","tympole","feebas","wailmer","horsea","staryu"],floorEnemies:{1:["horsea","staryu"],2:["staryu","feebas"],3:["feebas","wailmer"],4:["wailmer","tympole"],5:["tympole","wimpod"],6:["wimpod","chewtle"],7:["chewtle","bruxish"],8:["bruxish","chewtle","wimpod"],9:["chewtle","bruxish","tympole"],10:["bruxish","chewtle","feebas"],11:["chewtle","bruxish","wimpod"],12:["bruxish","chewtle","tympole","wimpod"],13:["chewtle","bruxish","feebas","tympole"],14:["bruxish","chewtle","wimpod","horsea"],15:["chewtle","bruxish","tympole","wimpod"],16:["bruxish","chewtle","tympole","wimpod"],17:["bruxish","chewtle","tympole","wimpod"],18:["bruxish","chewtle","tympole","wimpod"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"B1F~B18F. The deepest abyss holds ancient water Pokemon!",boss:{speciesId:"bruxish",name:"Abyssal Bruxish",statMultiplier:8,extraSkillIds:["liquidation","psychic","waterPulse"]}},volcanicCore:{id:"volcanicCore",name:"Volcanic Core",tilesetPath:"tilesets/MtSteel/tileset_0.png",tilesetKey:"mtsteel-tiles",floors:18,enemySpeciesIds:["litleo","torchic","salandit","larvesta","litwick","growlithe","numel","slugma"],floorEnemies:{1:["numel","slugma"],2:["slugma","litwick"],3:["litwick","growlithe"],4:["growlithe","salandit"],5:["salandit","larvesta"],6:["larvesta","torchic"],7:["torchic","litleo"],8:["litleo","torchic","salandit"],9:["torchic","litleo","larvesta"],10:["litleo","torchic","growlithe"],11:["torchic","litleo","salandit"],12:["litleo","torchic","larvesta","salandit"],13:["torchic","litleo","growlithe","larvesta"],14:["litleo","torchic","salandit","numel"],15:["torchic","litleo","larvesta","salandit"],16:["litleo","torchic","larvesta","salandit"],17:["litleo","torchic","larvesta","salandit"],18:["litleo","torchic","larvesta","salandit"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"B1F~B18F. The volcano's core burns with primal fire!",boss:{speciesId:"litleo",name:"Primal Pyroar",statMultiplier:8,extraSkillIds:["blazeKick","flamethrower","hyperVoice"]}},ancientWoods:{id:"ancientWoods",name:"Ancient Woods",tilesetPath:"tilesets/SinisterWoods/tileset_0.png",tilesetKey:"sinisterwoods-tiles",floors:18,enemySpeciesIds:["gossifleur","bounsweet","fomantis","morelull","foongus","petilil","oddish","budew"],floorEnemies:{1:["oddish","budew"],2:["budew","foongus"],3:["foongus","petilil"],4:["petilil","fomantis"],5:["fomantis","morelull"],6:["morelull","gossifleur"],7:["gossifleur","bounsweet"],8:["bounsweet","gossifleur","fomantis"],9:["gossifleur","bounsweet","morelull"],10:["bounsweet","gossifleur","petilil"],11:["gossifleur","bounsweet","fomantis"],12:["bounsweet","gossifleur","morelull","fomantis"],13:["gossifleur","bounsweet","petilil","morelull"],14:["bounsweet","gossifleur","fomantis","budew"],15:["gossifleur","bounsweet","morelull","fomantis"],16:["bounsweet","gossifleur","morelull","fomantis"],17:["bounsweet","gossifleur","morelull","fomantis"],18:["bounsweet","gossifleur","morelull","fomantis"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"B1F~B18F. An ancient forest teeming with primal plant life!",boss:{speciesId:"bounsweet",name:"Forest Empress Tsareena",statMultiplier:8,extraSkillIds:["tropicalKick","leafBlade","petalDance"]}},thunderDome:{id:"thunderDome",name:"Thunder Dome",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:18,enemySpeciesIds:["yamper","pincurchin","charjabug","helioptile","joltik","tynamo","shinx","electrike"],floorEnemies:{1:["shinx","electrike"],2:["electrike","tynamo"],3:["tynamo","joltik"],4:["joltik","charjabug"],5:["charjabug","helioptile"],6:["helioptile","yamper"],7:["yamper","pincurchin"],8:["pincurchin","yamper","charjabug"],9:["yamper","pincurchin","helioptile"],10:["pincurchin","yamper","joltik"],11:["yamper","pincurchin","charjabug"],12:["pincurchin","yamper","helioptile","charjabug"],13:["yamper","pincurchin","joltik","helioptile"],14:["pincurchin","yamper","charjabug","tynamo"],15:["yamper","pincurchin","helioptile","charjabug"],16:["pincurchin","yamper","helioptile","charjabug"],17:["pincurchin","yamper","helioptile","charjabug"],18:["pincurchin","yamper","helioptile","charjabug"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"B1F~B18F. Lightning strikes endlessly in this dome!",boss:{speciesId:"pincurchin",name:"Thunder Lord Pincurchin",statMultiplier:8,extraSkillIds:["nuzzle","electricTerrain","thunderPunch"]}},miasmaSwamp:{id:"miasmaSwamp",name:"Miasma Swamp",tilesetPath:"tilesets/SinisterWoods/tileset_0.png",tilesetKey:"sinisterwoods-tiles",floors:18,enemySpeciesIds:["skrelp","toxel","mareanie","croagunk","trubbish","skorupi","gulpin","ekans"],floorEnemies:{1:["ekans","gulpin"],2:["gulpin","skorupi"],3:["skorupi","trubbish"],4:["trubbish","croagunk"],5:["croagunk","mareanie"],6:["mareanie","skrelp"],7:["skrelp","toxel"],8:["toxel","skrelp","croagunk"],9:["skrelp","toxel","mareanie"],10:["toxel","skrelp","trubbish"],11:["skrelp","toxel","croagunk"],12:["toxel","skrelp","mareanie","croagunk"],13:["skrelp","toxel","trubbish","mareanie"],14:["toxel","skrelp","croagunk","gulpin"],15:["skrelp","toxel","mareanie","croagunk"],16:["toxel","skrelp","mareanie","croagunk"],17:["toxel","skrelp","mareanie","croagunk"],18:["toxel","skrelp","mareanie","croagunk"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"B1F~B18F. Toxic miasma fills every corner of this swamp!",boss:{speciesId:"skrelp",name:"Miasma Lord Dragalge",statMultiplier:8,extraSkillIds:["poisonJab","sludgeBomb","waterPulse"]}},tectonicRift:{id:"tectonicRift",name:"Tectonic Rift",tilesetPath:"tilesets/MtSteel/tileset_0.png",tilesetKey:"mtsteel-tiles",floors:18,enemySpeciesIds:["drilbur","barboach","sandygast","silicobra","mudbray","hippopotas","cubone","diglett"],floorEnemies:{1:["cubone","diglett"],2:["diglett","hippopotas"],3:["hippopotas","mudbray"],4:["mudbray","silicobra"],5:["silicobra","sandygast"],6:["sandygast","drilbur"],7:["drilbur","barboach"],8:["barboach","drilbur","silicobra"],9:["drilbur","barboach","sandygast"],10:["barboach","drilbur","mudbray"],11:["drilbur","barboach","silicobra"],12:["barboach","drilbur","sandygast","silicobra"],13:["drilbur","barboach","mudbray","sandygast"],14:["barboach","drilbur","silicobra","diglett"],15:["drilbur","barboach","sandygast","silicobra"],16:["barboach","drilbur","sandygast","silicobra"],17:["barboach","drilbur","sandygast","silicobra"],18:["barboach","drilbur","sandygast","silicobra"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"B1F~B18F. The earth splits and reforms in this unstable rift!",boss:{speciesId:"drilbur",name:"Tectonic Excadrill",statMultiplier:8,extraSkillIds:["earthquake","dig","muddyWater"]}},crystalDepths:{id:"crystalDepths",name:"Crystal Depths",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset_crystalDepths",floors:18,enemySpeciesIds:["nacli","tyrunt"],floorEnemies:{1:["nacli"],2:["nacli"],3:["nacli","tyrunt"],4:["nacli","tyrunt"],5:["nacli","tyrunt"],6:["nacli","tyrunt"],7:["tyrunt","nacli"],8:["tyrunt","nacli"],9:["tyrunt","nacli"],10:["tyrunt","nacli"],11:["nacli","tyrunt"],12:["nacli","tyrunt"],13:["nacli","tyrunt"],14:["nacli","tyrunt"],15:["nacli","tyrunt"],16:["nacli","tyrunt"],17:["nacli","tyrunt"],18:["nacli","tyrunt"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"Glittering crystals line these ancient cavern walls.",boss:{speciesId:"nacli",name:"Rock Monarch",statMultiplier:8,extraSkillIds:["rockBlast","stoneEdge","rockSlide"]}},silkwoodGrove:{id:"silkwoodGrove",name:"Silkwood Grove",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_silkwoodGrove",floors:18,enemySpeciesIds:["blipbug","cutiefly"],floorEnemies:{1:["blipbug"],2:["blipbug"],3:["blipbug","cutiefly"],4:["blipbug","cutiefly"],5:["blipbug","cutiefly"],6:["blipbug","cutiefly"],7:["cutiefly","blipbug"],8:["cutiefly","blipbug"],9:["cutiefly","blipbug"],10:["cutiefly","blipbug"],11:["blipbug","cutiefly"],12:["blipbug","cutiefly"],13:["blipbug","cutiefly"],14:["blipbug","cutiefly"],15:["blipbug","cutiefly"],16:["blipbug","cutiefly"],17:["blipbug","cutiefly"],18:["blipbug","cutiefly"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A grove thick with silk webs and buzzing insects.",boss:{speciesId:"cutiefly",name:"Silk Queen",statMultiplier:8,extraSkillIds:["bugBuzz","dazzlingGleam","fairyWind"]}},warlordsArena:{id:"warlordsArena",name:"Warlord's Arena",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_warlordsArena",floors:18,enemySpeciesIds:["clobbopus","passimian"],floorEnemies:{1:["clobbopus"],2:["clobbopus"],3:["clobbopus","passimian"],4:["clobbopus","passimian"],5:["clobbopus","passimian"],6:["clobbopus","passimian"],7:["passimian","clobbopus"],8:["passimian","clobbopus"],9:["passimian","clobbopus"],10:["passimian","clobbopus"],11:["clobbopus","passimian"],12:["clobbopus","passimian"],13:["clobbopus","passimian"],14:["clobbopus","passimian"],15:["clobbopus","passimian"],16:["clobbopus","passimian"],17:["clobbopus","passimian"],18:["clobbopus","passimian"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A grand arena where fighting types test their mettle.",boss:{speciesId:"passimian",name:"Arena Champion",statMultiplier:8,extraSkillIds:["closeCombat","superpower","lowKick"]}},steelworksCitadel:{id:"steelworksCitadel",name:"Steelworks Citadel",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_steelworksCitadel",floors:18,enemySpeciesIds:["tinkatink","varoom"],floorEnemies:{1:["tinkatink"],2:["tinkatink"],3:["tinkatink","varoom"],4:["tinkatink","varoom"],5:["tinkatink","varoom"],6:["tinkatink","varoom"],7:["varoom","tinkatink"],8:["varoom","tinkatink"],9:["varoom","tinkatink"],10:["varoom","tinkatink"],11:["tinkatink","varoom"],12:["tinkatink","varoom"],13:["tinkatink","varoom"],14:["tinkatink","varoom"],15:["tinkatink","varoom"],16:["tinkatink","varoom"],17:["tinkatink","varoom"],18:["tinkatink","varoom"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A fortified citadel forged from living steel.",boss:{speciesId:"varoom",name:"Steel Warden",statMultiplier:8,extraSkillIds:["smartStrike","ironHead","sludgeBomb"]}},spectralCrypt:{id:"spectralCrypt",name:"Spectral Crypt",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_spectralCrypt",floors:18,enemySpeciesIds:["greavard","sinistea"],floorEnemies:{1:["greavard"],2:["greavard"],3:["greavard","sinistea"],4:["greavard","sinistea"],5:["greavard","sinistea"],6:["greavard","sinistea"],7:["sinistea","greavard"],8:["sinistea","greavard"],9:["sinistea","greavard"],10:["sinistea","greavard"],11:["greavard","sinistea"],12:["greavard","sinistea"],13:["greavard","sinistea"],14:["greavard","sinistea"],15:["greavard","sinistea"],16:["greavard","sinistea"],17:["greavard","sinistea"],18:["greavard","sinistea"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"An ancient crypt haunted by restless spirits.",boss:{speciesId:"greavard",name:"Crypt Guardian",statMultiplier:8,extraSkillIds:["poltergeist","shadowBall","phantomForce"]}},astralSanctum:{id:"astralSanctum",name:"Astral Sanctum",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset_astralSanctum",floors:18,enemySpeciesIds:["flittle","espurr"],floorEnemies:{1:["flittle"],2:["flittle"],3:["flittle","espurr"],4:["flittle","espurr"],5:["flittle","espurr"],6:["flittle","espurr"],7:["espurr","flittle"],8:["espurr","flittle"],9:["espurr","flittle"],10:["espurr","flittle"],11:["flittle","espurr"],12:["flittle","espurr"],13:["flittle","espurr"],14:["flittle","espurr"],15:["flittle","espurr"],16:["flittle","espurr"],17:["flittle","espurr"],18:["flittle","espurr"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A sanctum where psychic energy warps reality itself.",boss:{speciesId:"espurr",name:"Astral Sage",statMultiplier:8,extraSkillIds:["psyshock","psychic","expandingForce"]}},glacialAbyss:{id:"glacialAbyss",name:"Glacial Abyss",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset_glacialAbyss",floors:18,enemySpeciesIds:["cetoddle","frigibax"],floorEnemies:{1:["cetoddle"],2:["cetoddle"],3:["cetoddle","frigibax"],4:["cetoddle","frigibax"],5:["cetoddle","frigibax"],6:["cetoddle","frigibax"],7:["frigibax","cetoddle"],8:["frigibax","cetoddle"],9:["frigibax","cetoddle"],10:["frigibax","cetoddle"],11:["cetoddle","frigibax"],12:["cetoddle","frigibax"],13:["cetoddle","frigibax"],14:["cetoddle","frigibax"],15:["cetoddle","frigibax"],16:["cetoddle","frigibax"],17:["cetoddle","frigibax"],18:["cetoddle","frigibax"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A frozen abyss where icicles crash from the darkness above.",boss:{speciesId:"cetoddle",name:"Frost Titan",statMultiplier:8,extraSkillIds:["icicleCrash","iceBeam","avalanche"]}},shadowLabyrinth:{id:"shadowLabyrinth",name:"Shadow Labyrinth",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_shadowLabyrinth",floors:18,enemySpeciesIds:["zorua","pawniard"],floorEnemies:{1:["zorua"],2:["zorua"],3:["zorua","pawniard"],4:["zorua","pawniard"],5:["zorua","pawniard"],6:["zorua","pawniard"],7:["pawniard","zorua"],8:["pawniard","zorua"],9:["pawniard","zorua"],10:["pawniard","zorua"],11:["zorua","pawniard"],12:["zorua","pawniard"],13:["zorua","pawniard"],14:["zorua","pawniard"],15:["zorua","pawniard"],16:["zorua","pawniard"],17:["zorua","pawniard"],18:["zorua","pawniard"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A twisting labyrinth where shadows deceive and blades lurk.",boss:{speciesId:"pawniard",name:"Shadow Blade",statMultiplier:8,extraSkillIds:["darkPulse","ironHead","nightSlash"]}},faerieGarden:{id:"faerieGarden",name:"Faerie Garden",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_faerieGarden",floors:18,enemySpeciesIds:["fidough","dedenne"],floorEnemies:{1:["fidough"],2:["fidough"],3:["fidough","dedenne"],4:["fidough","dedenne"],5:["fidough","dedenne"],6:["fidough","dedenne"],7:["dedenne","fidough"],8:["dedenne","fidough"],9:["dedenne","fidough"],10:["dedenne","fidough"],11:["fidough","dedenne"],12:["fidough","dedenne"],13:["fidough","dedenne"],14:["fidough","dedenne"],15:["fidough","dedenne"],16:["fidough","dedenne"],17:["fidough","dedenne"],18:["fidough","dedenne"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A magical garden where fairy energy fills the air.",boss:{speciesId:"dedenne",name:"Glade Spirit",statMultiplier:8,extraSkillIds:["drainingKiss","thunderbolt","dazzlingGleam"]}},dragonsDen:{id:"dragonsDen",name:"Dragon's Den",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_dragonsDen",floors:18,enemySpeciesIds:["cyclizar","tatsugiri"],floorEnemies:{1:["cyclizar"],2:["cyclizar"],3:["cyclizar","tatsugiri"],4:["cyclizar","tatsugiri"],5:["cyclizar","tatsugiri"],6:["cyclizar","tatsugiri"],7:["tatsugiri","cyclizar"],8:["tatsugiri","cyclizar"],9:["tatsugiri","cyclizar"],10:["tatsugiri","cyclizar"],11:["cyclizar","tatsugiri"],12:["cyclizar","tatsugiri"],13:["cyclizar","tatsugiri"],14:["cyclizar","tatsugiri"],15:["cyclizar","tatsugiri"],16:["cyclizar","tatsugiri"],17:["cyclizar","tatsugiri"],18:["cyclizar","tatsugiri"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A cavernous den where dragon energy resonates through ancient stone.",boss:{speciesId:"cyclizar",name:"Dragon Sovereign",statMultiplier:8,extraSkillIds:["scaleShot","dragonPulse","outrage"]}},stormySkies:{id:"stormySkies",name:"Stormy Skies",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset_stormySkies",floors:18,enemySpeciesIds:["wingull","swablu"],floorEnemies:{1:["wingull"],2:["wingull"],3:["wingull","swablu"],4:["wingull","swablu"],5:["wingull","swablu"],6:["wingull","swablu"],7:["swablu","wingull"],8:["swablu","wingull"],9:["swablu","wingull"],10:["swablu","wingull"],11:["wingull","swablu"],12:["wingull","swablu"],13:["wingull","swablu"],14:["wingull","swablu"],15:["wingull","swablu"],16:["wingull","swablu"],17:["wingull","swablu"],18:["wingull","swablu"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"Turbulent skies where fierce winds and storms never cease.",boss:{speciesId:"wingull",name:"Storm Herald",statMultiplier:8,extraSkillIds:["hurricane","waterPulse","airSlash"]}},verdantMeadow:{id:"verdantMeadow",name:"Verdant Meadow",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_verdantMeadow",floors:18,enemySpeciesIds:["lechonk","tandemaus"],floorEnemies:{1:["lechonk"],2:["lechonk"],3:["lechonk","tandemaus"],4:["lechonk","tandemaus"],5:["lechonk","tandemaus"],6:["lechonk","tandemaus"],7:["tandemaus","lechonk"],8:["tandemaus","lechonk"],9:["tandemaus","lechonk"],10:["tandemaus","lechonk"],11:["lechonk","tandemaus"],12:["lechonk","tandemaus"],13:["lechonk","tandemaus"],14:["lechonk","tandemaus"],15:["lechonk","tandemaus"],16:["lechonk","tandemaus"],17:["lechonk","tandemaus"],18:["lechonk","tandemaus"]},difficulty:4,itemsPerFloor:3,unlockClears:20,description:"A sprawling meadow where normal-type Pokemon roam freely.",boss:{speciesId:"tandemaus",name:"Meadow Duo",statMultiplier:8,extraSkillIds:["hyperVoice","bodySlam","swift"]}},tidalTrench:{id:"tidalTrench",name:"Tidal Trench",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset_tidalTrench",floors:20,enemySpeciesIds:["buizel","finizen"],floorEnemies:{1:["buizel"],2:["buizel"],3:["buizel","finizen"],4:["buizel","finizen"],5:["buizel","finizen"],6:["buizel","finizen"],7:["finizen","buizel"],8:["finizen","buizel"],9:["finizen","buizel"],10:["finizen","buizel"],11:["buizel","finizen"],12:["buizel","finizen"],13:["buizel","finizen"],14:["buizel","finizen"],15:["finizen","buizel"],16:["finizen","buizel"],17:["finizen","buizel"],18:["finizen","buizel"],19:["finizen","buizel"],20:["finizen","buizel"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A deep ocean trench where tidal currents rage endlessly.",boss:{speciesId:"finizen",name:"Tidal Warden",statMultiplier:9,extraSkillIds:["aquaJet","liquidation","waterPulse"]}},infernoPeak:{id:"infernoPeak",name:"Inferno Peak",tilesetPath:"tilesets/dungeon_fire.png",tilesetKey:"tileset_infernoPeak",floors:20,enemySpeciesIds:["fletchinder","heatmor"],floorEnemies:{1:["fletchinder"],2:["fletchinder"],3:["fletchinder","heatmor"],4:["fletchinder","heatmor"],5:["fletchinder","heatmor"],6:["fletchinder","heatmor"],7:["heatmor","fletchinder"],8:["heatmor","fletchinder"],9:["heatmor","fletchinder"],10:["heatmor","fletchinder"],11:["fletchinder","heatmor"],12:["fletchinder","heatmor"],13:["fletchinder","heatmor"],14:["fletchinder","heatmor"],15:["heatmor","fletchinder"],16:["heatmor","fletchinder"],17:["heatmor","fletchinder"],18:["heatmor","fletchinder"],19:["heatmor","fletchinder"],20:["heatmor","fletchinder"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A volcanic peak engulfed in relentless infernal flames.",boss:{speciesId:"heatmor",name:"Inferno Master",statMultiplier:9,extraSkillIds:["fireBlast","flamethrower","heatWave"]}},eternaForest:{id:"eternaForest",name:"Eterna Forest",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_eternaForest",floors:20,enemySpeciesIds:["smoliv","deerling"],floorEnemies:{1:["smoliv"],2:["smoliv"],3:["smoliv","deerling"],4:["smoliv","deerling"],5:["smoliv","deerling"],6:["smoliv","deerling"],7:["deerling","smoliv"],8:["deerling","smoliv"],9:["deerling","smoliv"],10:["deerling","smoliv"],11:["smoliv","deerling"],12:["smoliv","deerling"],13:["smoliv","deerling"],14:["smoliv","deerling"],15:["deerling","smoliv"],16:["deerling","smoliv"],17:["deerling","smoliv"],18:["deerling","smoliv"],19:["deerling","smoliv"],20:["deerling","smoliv"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"An ancient forest where verdant guardians protect eternal trees.",boss:{speciesId:"deerling",name:"Verdant Guardian",statMultiplier:9,extraSkillIds:["leafStorm","bodySlam","energyBall"]}},voltChamber:{id:"voltChamber",name:"Volt Chamber",tilesetPath:"tilesets/dungeon_electric.png",tilesetKey:"tileset_voltChamber",floors:20,enemySpeciesIds:["pachirisu","emolga"],floorEnemies:{1:["pachirisu"],2:["pachirisu"],3:["pachirisu","emolga"],4:["pachirisu","emolga"],5:["pachirisu","emolga"],6:["pachirisu","emolga"],7:["emolga","pachirisu"],8:["emolga","pachirisu"],9:["emolga","pachirisu"],10:["emolga","pachirisu"],11:["pachirisu","emolga"],12:["pachirisu","emolga"],13:["pachirisu","emolga"],14:["pachirisu","emolga"],15:["emolga","pachirisu"],16:["emolga","pachirisu"],17:["emolga","pachirisu"],18:["emolga","pachirisu"],19:["emolga","pachirisu"],20:["emolga","pachirisu"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A high-voltage chamber crackling with electric energy.",boss:{speciesId:"emolga",name:"Volt Sentinel",statMultiplier:9,extraSkillIds:["discharge","thunderbolt","airSlash"]}},venomDepths:{id:"venomDepths",name:"Venom Depths",tilesetPath:"tilesets/dungeon_poison.png",tilesetKey:"tileset_venomDepths",floors:20,enemySpeciesIds:["glimmet","koffing"],floorEnemies:{1:["glimmet"],2:["glimmet"],3:["glimmet","koffing"],4:["glimmet","koffing"],5:["glimmet","koffing"],6:["glimmet","koffing"],7:["koffing","glimmet"],8:["koffing","glimmet"],9:["koffing","glimmet"],10:["koffing","glimmet"],11:["glimmet","koffing"],12:["glimmet","koffing"],13:["glimmet","koffing"],14:["glimmet","koffing"],15:["koffing","glimmet"],16:["koffing","glimmet"],17:["koffing","glimmet"],18:["koffing","glimmet"],19:["koffing","glimmet"],20:["koffing","glimmet"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"Toxic fumes fill the depths where poison types thrive.",boss:{speciesId:"koffing",name:"Venom Overlord",statMultiplier:9,extraSkillIds:["toxicSpikes","sludgeBomb","selfDestruct"]}},faultlineChasm:{id:"faultlineChasm",name:"Faultline Chasm",tilesetPath:"tilesets/dungeon_ground.png",tilesetKey:"tileset_faultlineChasm",floors:20,enemySpeciesIds:["wooper","baltoy"],floorEnemies:{1:["wooper"],2:["wooper"],3:["wooper","baltoy"],4:["wooper","baltoy"],5:["wooper","baltoy"],6:["wooper","baltoy"],7:["baltoy","wooper"],8:["baltoy","wooper"],9:["baltoy","wooper"],10:["baltoy","wooper"],11:["wooper","baltoy"],12:["wooper","baltoy"],13:["wooper","baltoy"],14:["wooper","baltoy"],15:["baltoy","wooper"],16:["baltoy","wooper"],17:["baltoy","wooper"],18:["baltoy","wooper"],19:["baltoy","wooper"],20:["baltoy","wooper"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A massive chasm split by seismic forces deep underground.",boss:{speciesId:"baltoy",name:"Earthen Titan",statMultiplier:9,extraSkillIds:["earthPower","earthquake","psychic"]}},fossilCrypt:{id:"fossilCrypt",name:"Fossil Crypt",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset_fossilCrypt",floors:20,enemySpeciesIds:["anorith","lunatone"],floorEnemies:{1:["anorith"],2:["anorith"],3:["anorith","lunatone"],4:["anorith","lunatone"],5:["anorith","lunatone"],6:["anorith","lunatone"],7:["lunatone","anorith"],8:["lunatone","anorith"],9:["lunatone","anorith"],10:["lunatone","anorith"],11:["anorith","lunatone"],12:["anorith","lunatone"],13:["anorith","lunatone"],14:["anorith","lunatone"],15:["lunatone","anorith"],16:["lunatone","anorith"],17:["lunatone","anorith"],18:["lunatone","anorith"],19:["lunatone","anorith"],20:["lunatone","anorith"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"An ancient crypt filled with fossilized Rock-type Pokemon.",boss:{speciesId:"lunatone",name:"Ancient Sentinel",statMultiplier:9,extraSkillIds:["ancientPower","rockSlide","psychic"]}},cocoonHollow:{id:"cocoonHollow",name:"Cocoon Hollow",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_cocoonHollow",floors:20,enemySpeciesIds:["surskit","volbeat"],floorEnemies:{1:["surskit"],2:["surskit"],3:["surskit","volbeat"],4:["surskit","volbeat"],5:["surskit","volbeat"],6:["surskit","volbeat"],7:["volbeat","surskit"],8:["volbeat","surskit"],9:["volbeat","surskit"],10:["volbeat","surskit"],11:["surskit","volbeat"],12:["surskit","volbeat"],13:["surskit","volbeat"],14:["surskit","volbeat"],15:["volbeat","surskit"],16:["volbeat","surskit"],17:["volbeat","surskit"],18:["volbeat","surskit"],19:["volbeat","surskit"],20:["volbeat","surskit"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A hollow tree trunk swarming with Bug-type Pokemon.",boss:{speciesId:"volbeat",name:"Silk Weaver",statMultiplier:9,extraSkillIds:["silverWind","bugBuzz","signalBeam"]}},titansDojo:{id:"titansDojo",name:"Titan's Dojo",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_titansDojo",floors:20,enemySpeciesIds:["scraggy","mankey"],floorEnemies:{1:["scraggy"],2:["scraggy"],3:["scraggy","mankey"],4:["scraggy","mankey"],5:["scraggy","mankey"],6:["scraggy","mankey"],7:["mankey","scraggy"],8:["mankey","scraggy"],9:["mankey","scraggy"],10:["mankey","scraggy"],11:["scraggy","mankey"],12:["scraggy","mankey"],13:["scraggy","mankey"],14:["scraggy","mankey"],15:["mankey","scraggy"],16:["mankey","scraggy"],17:["mankey","scraggy"],18:["mankey","scraggy"],19:["mankey","scraggy"],20:["mankey","scraggy"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A legendary dojo where Fighting-type titans train.",boss:{speciesId:"mankey",name:"Fury Champion",statMultiplier:9,extraSkillIds:["aurasphere","closeCombat","karateChop"]}},ironVault:{id:"ironVault",name:"Iron Vault",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_ironVault",floors:20,enemySpeciesIds:["klefki","mawile"],floorEnemies:{1:["klefki"],2:["klefki"],3:["klefki","mawile"],4:["klefki","mawile"],5:["klefki","mawile"],6:["klefki","mawile"],7:["mawile","klefki"],8:["mawile","klefki"],9:["mawile","klefki"],10:["mawile","klefki"],11:["klefki","mawile"],12:["klefki","mawile"],13:["klefki","mawile"],14:["klefki","mawile"],15:["mawile","klefki"],16:["mawile","klefki"],17:["mawile","klefki"],18:["mawile","klefki"],19:["mawile","klefki"],20:["mawile","klefki"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A sealed vault of iron where Steel-type guardians dwell.",boss:{speciesId:"mawile",name:"Iron Empress",statMultiplier:9,extraSkillIds:["ironDefense","smartStrike","ironHead"]}},phantomRift:{id:"phantomRift",name:"Phantom Rift",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_phantomRift",floors:20,enemySpeciesIds:["rotom","dreepy"],floorEnemies:{1:["rotom"],2:["rotom"],3:["rotom","dreepy"],4:["rotom","dreepy"],5:["rotom","dreepy"],6:["rotom","dreepy"],7:["dreepy","rotom"],8:["dreepy","rotom"],9:["dreepy","rotom"],10:["dreepy","rotom"],11:["rotom","dreepy"],12:["rotom","dreepy"],13:["rotom","dreepy"],14:["rotom","dreepy"],15:["dreepy","rotom"],16:["dreepy","rotom"],17:["dreepy","rotom"],18:["dreepy","rotom"],19:["dreepy","rotom"],20:["dreepy","rotom"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A rift between dimensions where Ghost-type phantoms roam.",boss:{speciesId:"rotom",name:"Phantom Lord",statMultiplier:9,extraSkillIds:["shadowForce","thunderbolt","shadowBall"]}},mindPalace:{id:"mindPalace",name:"Mind Palace",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset_mindPalace",floors:20,enemySpeciesIds:["munna","chingling"],floorEnemies:{1:["munna"],2:["munna"],3:["munna","chingling"],4:["munna","chingling"],5:["munna","chingling"],6:["munna","chingling"],7:["chingling","munna"],8:["chingling","munna"],9:["chingling","munna"],10:["chingling","munna"],11:["munna","chingling"],12:["munna","chingling"],13:["munna","chingling"],14:["munna","chingling"],15:["chingling","munna"],16:["chingling","munna"],17:["chingling","munna"],18:["chingling","munna"],19:["chingling","munna"],20:["chingling","munna"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A surreal palace constructed from pure psychic energy.",boss:{speciesId:"munna",name:"Dream Weaver",statMultiplier:9,extraSkillIds:["futuresight","psychic","hypnosis"]}},frozenCitadel:{id:"frozenCitadel",name:"Frozen Citadel",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset_frozenCitadel",floors:20,enemySpeciesIds:["smoochum","delibird"],floorEnemies:{1:["smoochum"],2:["smoochum"],3:["smoochum","delibird"],4:["smoochum","delibird"],5:["smoochum","delibird"],6:["smoochum","delibird"],7:["delibird","smoochum"],8:["delibird","smoochum"],9:["delibird","smoochum"],10:["delibird","smoochum"],11:["smoochum","delibird"],12:["smoochum","delibird"],13:["smoochum","delibird"],14:["smoochum","delibird"],15:["delibird","smoochum"],16:["delibird","smoochum"],17:["delibird","smoochum"],18:["delibird","smoochum"],19:["delibird","smoochum"],20:["delibird","smoochum"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A citadel of eternal frost where Ice-type sentinels patrol.",boss:{speciesId:"delibird",name:"Frost King",statMultiplier:9,extraSkillIds:["glacialLance","icicleCrash","iceBeam"]}},eclipseVault:{id:"eclipseVault",name:"Eclipse Vault",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_eclipseVault",floors:20,enemySpeciesIds:["nuzleaf","spiritomb"],floorEnemies:{1:["nuzleaf"],2:["nuzleaf"],3:["nuzleaf","spiritomb"],4:["nuzleaf","spiritomb"],5:["nuzleaf","spiritomb"],6:["nuzleaf","spiritomb"],7:["spiritomb","nuzleaf"],8:["spiritomb","nuzleaf"],9:["spiritomb","nuzleaf"],10:["spiritomb","nuzleaf"],11:["nuzleaf","spiritomb"],12:["nuzleaf","spiritomb"],13:["nuzleaf","spiritomb"],14:["nuzleaf","spiritomb"],15:["spiritomb","nuzleaf"],16:["spiritomb","nuzleaf"],17:["spiritomb","nuzleaf"],18:["spiritomb","nuzleaf"],19:["spiritomb","nuzleaf"],20:["spiritomb","nuzleaf"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A lightless vault where Dark-type shadows lurk in every corner.",boss:{speciesId:"spiritomb",name:"Void Keeper",statMultiplier:9,extraSkillIds:["nightSlash","shadowBall","darkPulse"]}},moonlitGarden:{id:"moonlitGarden",name:"Moonlit Garden",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_moonlitGarden",floors:20,enemySpeciesIds:["marill","cleffa"],floorEnemies:{1:["marill"],2:["marill"],3:["marill","cleffa"],4:["marill","cleffa"],5:["marill","cleffa"],6:["marill","cleffa"],7:["cleffa","marill"],8:["cleffa","marill"],9:["cleffa","marill"],10:["cleffa","marill"],11:["marill","cleffa"],12:["marill","cleffa"],13:["marill","cleffa"],14:["marill","cleffa"],15:["cleffa","marill"],16:["cleffa","marill"],17:["cleffa","marill"],18:["cleffa","marill"],19:["cleffa","marill"],20:["cleffa","marill"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A garden bathed in moonlight where Fairy-type creatures dance.",boss:{speciesId:"cleffa",name:"Starlight Guardian",statMultiplier:9,extraSkillIds:["moonblast","dazzlingGleam","drainingKiss"]}},wyrmsNest:{id:"wyrmsNest",name:"Wyrm's Nest",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_wyrmsNest",floors:20,enemySpeciesIds:["druddigon","applin"],floorEnemies:{1:["applin"],2:["applin"],3:["applin","druddigon"],4:["applin","druddigon"],5:["applin","druddigon"],6:["applin","druddigon"],7:["druddigon","applin"],8:["druddigon","applin"],9:["druddigon","applin"],10:["druddigon","applin"],11:["applin","druddigon"],12:["applin","druddigon"],13:["druddigon","applin"],14:["druddigon","applin"],15:["druddigon","applin"],16:["druddigon","applin"],17:["druddigon","applin"],18:["druddigon","applin"],19:["druddigon","applin"],20:["druddigon","applin"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A cavernous nest where Dragon-type wyrms guard their domain.",boss:{speciesId:"druddigon",name:"Dragon Elder",statMultiplier:9,extraSkillIds:["dracoMeteor","dragonPulse","dragonClaw"]}},skyPinnacle:{id:"skyPinnacle",name:"Sky Pinnacle",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset_skyPinnacle",floors:20,enemySpeciesIds:["hoppip","tropius"],floorEnemies:{1:["hoppip"],2:["hoppip"],3:["hoppip","tropius"],4:["hoppip","tropius"],5:["hoppip","tropius"],6:["hoppip","tropius"],7:["tropius","hoppip"],8:["tropius","hoppip"],9:["tropius","hoppip"],10:["tropius","hoppip"],11:["hoppip","tropius"],12:["hoppip","tropius"],13:["hoppip","tropius"],14:["hoppip","tropius"],15:["tropius","hoppip"],16:["tropius","hoppip"],17:["tropius","hoppip"],18:["tropius","hoppip"],19:["tropius","hoppip"],20:["tropius","hoppip"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"A towering peak above the clouds where Flying-type masters soar.",boss:{speciesId:"tropius",name:"Sky Sovereign",statMultiplier:9,extraSkillIds:["braveBird","hurricane","leafStorm"]}},primevalPlains:{id:"primevalPlains",name:"Primeval Plains",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_primevalPlains",floors:20,enemySpeciesIds:["aipom","smeargle"],floorEnemies:{1:["aipom"],2:["aipom"],3:["aipom","smeargle"],4:["aipom","smeargle"],5:["aipom","smeargle"],6:["aipom","smeargle"],7:["smeargle","aipom"],8:["smeargle","aipom"],9:["smeargle","aipom"],10:["smeargle","aipom"],11:["aipom","smeargle"],12:["aipom","smeargle"],13:["aipom","smeargle"],14:["aipom","smeargle"],15:["smeargle","aipom"],16:["smeargle","aipom"],17:["smeargle","aipom"],18:["smeargle","aipom"],19:["smeargle","aipom"],20:["smeargle","aipom"]},difficulty:4.5,itemsPerFloor:4,unlockClears:25,description:"Ancient plains where Normal-type artisans hone their craft.",boss:{speciesId:"smeargle",name:"Art Master",statMultiplier:9,extraSkillIds:["boomburst","hyperVoice","bodySlam"]}},abyssopelagic:{id:"abyssopelagic",name:"Abyssopelagic Zone",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset_abyssopelagic",floors:22,enemySpeciesIds:["poliwag","corphish"],floorEnemies:{1:["poliwag"],2:["poliwag"],3:["poliwag","corphish"],4:["poliwag","corphish"],5:["corphish"],6:["corphish","poliwag"],7:["poliwag","corphish"],8:["corphish","poliwag"],9:["poliwag","corphish"],10:["corphish","poliwag"],11:["poliwag","corphish"],12:["corphish"],13:["poliwag","corphish"],14:["corphish","poliwag"],15:["poliwag","corphish"],16:["corphish","poliwag"],17:["poliwag","corphish"],18:["corphish","poliwag"],19:["poliwag","corphish"],20:["corphish","poliwag"],21:["poliwag","corphish"],22:["corphish","poliwag"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"The deepest ocean trench, where crushing pressure breeds the strongest Water-types.",boss:{speciesId:"corphish",name:"Abyss Lord",statMultiplier:10,extraSkillIds:["hydroPump","brine","surf"]}},calderaCore:{id:"calderaCore",name:"Caldera Core",tilesetPath:"tilesets/dungeon_fire.png",tilesetKey:"tileset_calderaCore",floors:22,enemySpeciesIds:["magby","darumaka"],floorEnemies:{1:["magby"],2:["magby"],3:["magby","darumaka"],4:["magby","darumaka"],5:["darumaka"],6:["darumaka","magby"],7:["magby","darumaka"],8:["darumaka","magby"],9:["magby","darumaka"],10:["darumaka","magby"],11:["magby","darumaka"],12:["darumaka"],13:["magby","darumaka"],14:["darumaka","magby"],15:["magby","darumaka"],16:["darumaka","magby"],17:["magby","darumaka"],18:["darumaka","magby"],19:["magby","darumaka"],20:["darumaka","magby"],21:["magby","darumaka"],22:["darumaka","magby"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"The molten heart of an ancient supervolcano, where Fire-types rage unchecked.",boss:{speciesId:"darumaka",name:"Caldera Beast",statMultiplier:10,extraSkillIds:["eruption","heatWave","flamethrower"]}},primordialCanopy:{id:"primordialCanopy",name:"Primordial Canopy",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_primordialCanopy",floors:22,enemySpeciesIds:["sewaddle","pumpkaboo"],floorEnemies:{1:["sewaddle"],2:["sewaddle"],3:["sewaddle","pumpkaboo"],4:["sewaddle","pumpkaboo"],5:["pumpkaboo"],6:["pumpkaboo","sewaddle"],7:["sewaddle","pumpkaboo"],8:["pumpkaboo","sewaddle"],9:["sewaddle","pumpkaboo"],10:["pumpkaboo","sewaddle"],11:["sewaddle","pumpkaboo"],12:["pumpkaboo"],13:["sewaddle","pumpkaboo"],14:["pumpkaboo","sewaddle"],15:["sewaddle","pumpkaboo"],16:["pumpkaboo","sewaddle"],17:["sewaddle","pumpkaboo"],18:["pumpkaboo","sewaddle"],19:["sewaddle","pumpkaboo"],20:["pumpkaboo","sewaddle"],21:["sewaddle","pumpkaboo"],22:["pumpkaboo","sewaddle"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"An ancient forest canopy untouched by time, teeming with primal Grass-types.",boss:{speciesId:"pumpkaboo",name:"Canopy Phantom",statMultiplier:10,extraSkillIds:["powerWhip","shadowBall","seedBomb"]}},plasmaCorridor:{id:"plasmaCorridor",name:"Plasma Corridor",tilesetPath:"tilesets/dungeon_electric.png",tilesetKey:"tileset_plasmaCorridor",floors:22,enemySpeciesIds:["plusle","minun"],floorEnemies:{1:["plusle"],2:["plusle"],3:["plusle","minun"],4:["plusle","minun"],5:["minun"],6:["minun","plusle"],7:["plusle","minun"],8:["minun","plusle"],9:["plusle","minun"],10:["minun","plusle"],11:["plusle","minun"],12:["minun"],13:["plusle","minun"],14:["minun","plusle"],15:["plusle","minun"],16:["minun","plusle"],17:["plusle","minun"],18:["minun","plusle"],19:["plusle","minun"],20:["minun","plusle"],21:["plusle","minun"],22:["minun","plusle"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A corridor of pure electrical plasma where Plusle and Minun amplify each other.",boss:{speciesId:"plusle",name:"Plasma Duo",statMultiplier:10,extraSkillIds:["wildCharge","thunderbolt","nuzzle"]}},corrosivePit:{id:"corrosivePit",name:"Corrosive Pit",tilesetPath:"tilesets/dungeon_poison.png",tilesetKey:"tileset_corrosivePit",floors:22,enemySpeciesIds:["nidoranF","seviper"],floorEnemies:{1:["nidoranF"],2:["nidoranF"],3:["nidoranF","seviper"],4:["nidoranF","seviper"],5:["seviper"],6:["seviper","nidoranF"],7:["nidoranF","seviper"],8:["seviper","nidoranF"],9:["nidoranF","seviper"],10:["seviper","nidoranF"],11:["nidoranF","seviper"],12:["seviper"],13:["nidoranF","seviper"],14:["seviper","nidoranF"],15:["nidoranF","seviper"],16:["seviper","nidoranF"],17:["nidoranF","seviper"],18:["seviper","nidoranF"],19:["nidoranF","seviper"],20:["seviper","nidoranF"],21:["nidoranF","seviper"],22:["seviper","nidoranF"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A bottomless pit of corrosive sludge where only the deadliest Poison-types survive.",boss:{speciesId:"seviper",name:"Venom Sovereign",statMultiplier:10,extraSkillIds:["gunkShot","sludgeBomb","venoshock"]}},mantleCavern:{id:"mantleCavern",name:"Mantle Cavern",tilesetPath:"tilesets/dungeon_ground.png",tilesetKey:"tileset_mantleCavern",floors:22,enemySpeciesIds:["gligar","rhyhorn"],floorEnemies:{1:["gligar"],2:["gligar"],3:["gligar","rhyhorn"],4:["gligar","rhyhorn"],5:["rhyhorn"],6:["rhyhorn","gligar"],7:["gligar","rhyhorn"],8:["rhyhorn","gligar"],9:["gligar","rhyhorn"],10:["rhyhorn","gligar"],11:["gligar","rhyhorn"],12:["rhyhorn"],13:["gligar","rhyhorn"],14:["rhyhorn","gligar"],15:["gligar","rhyhorn"],16:["rhyhorn","gligar"],17:["gligar","rhyhorn"],18:["rhyhorn","gligar"],19:["gligar","rhyhorn"],20:["rhyhorn","gligar"],21:["gligar","rhyhorn"],22:["rhyhorn","gligar"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"Caverns bored into the Earth's mantle, home to primordial Ground-types.",boss:{speciesId:"rhyhorn",name:"Mantle Titan",statMultiplier:10,extraSkillIds:["drillRun","rockSlide","earthPower"]}},obsidianForge:{id:"obsidianForge",name:"Obsidian Forge",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset_obsidianForge",floors:22,enemySpeciesIds:["sudowoodo","boldore"],floorEnemies:{1:["sudowoodo"],2:["sudowoodo"],3:["sudowoodo","boldore"],4:["sudowoodo","boldore"],5:["boldore"],6:["boldore","sudowoodo"],7:["sudowoodo","boldore"],8:["boldore","sudowoodo"],9:["sudowoodo","boldore"],10:["boldore","sudowoodo"],11:["sudowoodo","boldore"],12:["boldore"],13:["sudowoodo","boldore"],14:["boldore","sudowoodo"],15:["sudowoodo","boldore"],16:["boldore","sudowoodo"],17:["sudowoodo","boldore"],18:["boldore","sudowoodo"],19:["sudowoodo","boldore"],20:["boldore","sudowoodo"],21:["sudowoodo","boldore"],22:["boldore","sudowoodo"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A forge of obsidian stone where Rock-types shape the earth's bones.",boss:{speciesId:"boldore",name:"Obsidian Titan",statMultiplier:10,extraSkillIds:["headSmash","stoneEdge","rockSlide"]}},chitinLabyrinth:{id:"chitinLabyrinth",name:"Chitin Labyrinth",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_chitinLabyrinth",floors:22,enemySpeciesIds:["pineco","heracross"],floorEnemies:{1:["pineco"],2:["pineco"],3:["pineco","heracross"],4:["pineco","heracross"],5:["heracross"],6:["heracross","pineco"],7:["pineco","heracross"],8:["heracross","pineco"],9:["pineco","heracross"],10:["heracross","pineco"],11:["pineco","heracross"],12:["heracross"],13:["pineco","heracross"],14:["heracross","pineco"],15:["pineco","heracross"],16:["heracross","pineco"],17:["pineco","heracross"],18:["heracross","pineco"],19:["pineco","heracross"],20:["heracross","pineco"],21:["pineco","heracross"],22:["heracross","pineco"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A labyrinth of hardened chitin where Bug-types swarm in the darkness.",boss:{speciesId:"heracross",name:"Chitin Emperor",statMultiplier:10,extraSkillIds:["megahorn","closeCombat","xScissor"]}},colosseum:{id:"colosseum",name:"Colosseum",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_colosseum",floors:22,enemySpeciesIds:["hitmonlee","hitmonchan"],floorEnemies:{1:["hitmonlee"],2:["hitmonlee"],3:["hitmonlee","hitmonchan"],4:["hitmonlee","hitmonchan"],5:["hitmonchan"],6:["hitmonchan","hitmonlee"],7:["hitmonlee","hitmonchan"],8:["hitmonchan","hitmonlee"],9:["hitmonlee","hitmonchan"],10:["hitmonchan","hitmonlee"],11:["hitmonlee","hitmonchan"],12:["hitmonchan"],13:["hitmonlee","hitmonchan"],14:["hitmonchan","hitmonlee"],15:["hitmonlee","hitmonchan"],16:["hitmonchan","hitmonlee"],17:["hitmonlee","hitmonchan"],18:["hitmonchan","hitmonlee"],19:["hitmonlee","hitmonchan"],20:["hitmonchan","hitmonlee"],21:["hitmonlee","hitmonchan"],22:["hitmonchan","hitmonlee"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"An ancient colosseum where Fighting-type gladiators clash without mercy.",boss:{speciesId:"hitmonchan",name:"Grand Champion",statMultiplier:10,extraSkillIds:["superpower","closeCombat","focusPunch"]}},steelAbyss:{id:"steelAbyss",name:"Steel Abyss",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_steelAbyss",floors:22,enemySpeciesIds:["steelix","scizor"],floorEnemies:{1:["steelix"],2:["steelix"],3:["steelix","scizor"],4:["steelix","scizor"],5:["scizor"],6:["scizor","steelix"],7:["steelix","scizor"],8:["scizor","steelix"],9:["steelix","scizor"],10:["scizor","steelix"],11:["steelix","scizor"],12:["scizor"],13:["steelix","scizor"],14:["scizor","steelix"],15:["steelix","scizor"],16:["scizor","steelix"],17:["steelix","scizor"],18:["scizor","steelix"],19:["steelix","scizor"],20:["scizor","steelix"],21:["steelix","scizor"],22:["scizor","steelix"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"An abyss of molten steel where Steel-type colossi guard the deepest forges.",boss:{speciesId:"scizor",name:"Steel Overlord",statMultiplier:10,extraSkillIds:["heavySlam","ironHead","bulletPunch"]}},necropolisDepths:{id:"necropolisDepths",name:"Necropolis Depths",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_necropolisDepths",floors:22,enemySpeciesIds:["banette","shedinja"],floorEnemies:{1:["banette"],2:["banette"],3:["banette","shedinja"],4:["banette","shedinja"],5:["shedinja"],6:["shedinja","banette"],7:["banette","shedinja"],8:["shedinja","banette"],9:["banette","shedinja"],10:["shedinja","banette"],11:["banette","shedinja"],12:["shedinja"],13:["banette","shedinja"],14:["shedinja","banette"],15:["banette","shedinja"],16:["shedinja","banette"],17:["banette","shedinja"],18:["shedinja","banette"],19:["banette","shedinja"],20:["shedinja","banette"],21:["banette","shedinja"],22:["shedinja","banette"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"The deepest necropolis where Ghost-type spirits guard eternal rest.",boss:{speciesId:"banette",name:"Necropolis Wraith",statMultiplier:10,extraSkillIds:["cursedFlame","phantomForce","shadowBall"]}},cosmicLibrary:{id:"cosmicLibrary",name:"Cosmic Library",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset_cosmicLibrary",floors:22,enemySpeciesIds:["slowpoke","girafarig"],floorEnemies:{1:["slowpoke"],2:["slowpoke"],3:["slowpoke","girafarig"],4:["slowpoke","girafarig"],5:["girafarig"],6:["girafarig","slowpoke"],7:["slowpoke","girafarig"],8:["girafarig","slowpoke"],9:["slowpoke","girafarig"],10:["girafarig","slowpoke"],11:["slowpoke","girafarig"],12:["girafarig"],13:["slowpoke","girafarig"],14:["girafarig","slowpoke"],15:["slowpoke","girafarig"],16:["girafarig","slowpoke"],17:["slowpoke","girafarig"],18:["girafarig","slowpoke"],19:["slowpoke","girafarig"],20:["girafarig","slowpoke"],21:["slowpoke","girafarig"],22:["girafarig","slowpoke"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A library of cosmic knowledge where Psychic-types bend reality itself.",boss:{speciesId:"girafarig",name:"Cosmic Sage",statMultiplier:10,extraSkillIds:["zenHeadbutt","psychic","futuresight"]}},glacierFortress:{id:"glacierFortress",name:"Glacier Fortress",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset_glacierFortress",floors:22,enemySpeciesIds:["glaceon","beartic"],floorEnemies:{1:["glaceon"],2:["glaceon"],3:["glaceon","beartic"],4:["glaceon","beartic"],5:["beartic"],6:["beartic","glaceon"],7:["glaceon","beartic"],8:["beartic","glaceon"],9:["glaceon","beartic"],10:["beartic","glaceon"],11:["glaceon","beartic"],12:["beartic"],13:["glaceon","beartic"],14:["beartic","glaceon"],15:["glaceon","beartic"],16:["beartic","glaceon"],17:["glaceon","beartic"],18:["beartic","glaceon"],19:["glaceon","beartic"],20:["beartic","glaceon"],21:["glaceon","beartic"],22:["beartic","glaceon"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A frozen fortress where Ice-type legends guard frozen relics.",boss:{speciesId:"beartic",name:"Glacier Emperor",statMultiplier:10,extraSkillIds:["blizzard","iceHammer","avalanche"]}},umbralCitadel:{id:"umbralCitadel",name:"Umbral Citadel",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_umbralCitadel",floors:22,enemySpeciesIds:["umbreon","cacturne"],floorEnemies:{1:["umbreon"],2:["umbreon"],3:["umbreon","cacturne"],4:["umbreon","cacturne"],5:["cacturne"],6:["cacturne","umbreon"],7:["umbreon","cacturne"],8:["cacturne","umbreon"],9:["umbreon","cacturne"],10:["cacturne","umbreon"],11:["umbreon","cacturne"],12:["cacturne"],13:["umbreon","cacturne"],14:["cacturne","umbreon"],15:["umbreon","cacturne"],16:["cacturne","umbreon"],17:["umbreon","cacturne"],18:["cacturne","umbreon"],19:["umbreon","cacturne"],20:["cacturne","umbreon"],21:["umbreon","cacturne"],22:["cacturne","umbreon"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A citadel shrouded in eternal darkness where Dark-types reign supreme.",boss:{speciesId:"cacturne",name:"Shadow Sovereign",statMultiplier:10,extraSkillIds:["foulPlay","nightSlash","darkPulse"]}},sylvanSanctuary:{id:"sylvanSanctuary",name:"Sylvan Sanctuary",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_sylvanSanctuary",floors:22,enemySpeciesIds:["granbull","togekiss"],floorEnemies:{1:["granbull"],2:["granbull"],3:["granbull","togekiss"],4:["granbull","togekiss"],5:["togekiss"],6:["togekiss","granbull"],7:["granbull","togekiss"],8:["togekiss","granbull"],9:["granbull","togekiss"],10:["togekiss","granbull"],11:["granbull","togekiss"],12:["togekiss"],13:["granbull","togekiss"],14:["togekiss","granbull"],15:["granbull","togekiss"],16:["togekiss","granbull"],17:["granbull","togekiss"],18:["togekiss","granbull"],19:["granbull","togekiss"],20:["togekiss","granbull"],21:["granbull","togekiss"],22:["togekiss","granbull"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"A sacred sanctuary blessed by Fairy-type guardians of the forest.",boss:{speciesId:"togekiss",name:"Celestial Guardian",statMultiplier:10,extraSkillIds:["dazzlingGleam","moonblast","airSlash"]}},dragonsSpine:{id:"dragonsSpine",name:"Dragon's Spine",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_dragonsSpine",floors:22,enemySpeciesIds:["shelgon","gabite"],floorEnemies:{1:["shelgon"],2:["shelgon"],3:["shelgon","gabite"],4:["shelgon","gabite"],5:["gabite"],6:["gabite","shelgon"],7:["shelgon","gabite"],8:["gabite","shelgon"],9:["shelgon","gabite"],10:["gabite","shelgon"],11:["shelgon","gabite"],12:["gabite"],13:["shelgon","gabite"],14:["gabite","shelgon"],15:["shelgon","gabite"],16:["gabite","shelgon"],17:["shelgon","gabite"],18:["gabite","shelgon"],19:["shelgon","gabite"],20:["gabite","shelgon"],21:["shelgon","gabite"],22:["gabite","shelgon"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"The spine of an ancient dragon where Dragon-types test the worthy.",boss:{speciesId:"gabite",name:"Dragon Overlord",statMultiplier:10,extraSkillIds:["outrage","dragonPulse","earthPower"]}},stratosphere:{id:"stratosphere",name:"Stratosphere",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset_stratosphere",floors:22,enemySpeciesIds:["noctowl","xatu"],floorEnemies:{1:["noctowl"],2:["noctowl"],3:["noctowl","xatu"],4:["noctowl","xatu"],5:["xatu"],6:["xatu","noctowl"],7:["noctowl","xatu"],8:["xatu","noctowl"],9:["noctowl","xatu"],10:["xatu","noctowl"],11:["noctowl","xatu"],12:["xatu"],13:["noctowl","xatu"],14:["xatu","noctowl"],15:["noctowl","xatu"],16:["xatu","noctowl"],17:["noctowl","xatu"],18:["xatu","noctowl"],19:["noctowl","xatu"],20:["xatu","noctowl"],21:["noctowl","xatu"],22:["xatu","noctowl"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"The highest reaches of the sky where Flying-types soar above the clouds.",boss:{speciesId:"xatu",name:"Sky Warden",statMultiplier:10,extraSkillIds:["skyAttack","psychic","hurricane"]}},sovereignHall:{id:"sovereignHall",name:"Sovereign Hall",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_sovereignHall",floors:22,enemySpeciesIds:["kangaskhan","tauros"],floorEnemies:{1:["kangaskhan"],2:["kangaskhan"],3:["kangaskhan","tauros"],4:["kangaskhan","tauros"],5:["tauros"],6:["tauros","kangaskhan"],7:["kangaskhan","tauros"],8:["tauros","kangaskhan"],9:["kangaskhan","tauros"],10:["tauros","kangaskhan"],11:["kangaskhan","tauros"],12:["tauros"],13:["kangaskhan","tauros"],14:["tauros","kangaskhan"],15:["kangaskhan","tauros"],16:["tauros","kangaskhan"],17:["kangaskhan","tauros"],18:["tauros","kangaskhan"],19:["kangaskhan","tauros"],20:["tauros","kangaskhan"],21:["kangaskhan","tauros"],22:["tauros","kangaskhan"]},difficulty:5,itemsPerFloor:5,unlockClears:30,description:"The grand hall where Normal-type sovereigns hold court over all challengers.",boss:{speciesId:"kangaskhan",name:"Sovereign Matriarch",statMultiplier:10,extraSkillIds:["extremeSpeed","bodySlam","hyperVoice"]}},hadopelagicTrench:{id:"hadopelagicTrench",name:"Hadopelagic Trench",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset_hadopelagicTrench",floors:25,enemySpeciesIds:["psyduck","seel"],floorEnemies:{1:["psyduck"],2:["psyduck"],3:["psyduck","seel"],4:["psyduck","seel"],5:["seel"],6:["seel","psyduck"],7:["psyduck","seel"],8:["seel","psyduck"],9:["psyduck","seel"],10:["seel","psyduck"],11:["psyduck","seel"],12:["seel"],13:["psyduck","seel"],14:["seel","psyduck"],15:["psyduck","seel"],16:["seel","psyduck"],17:["psyduck","seel"],18:["seel","psyduck"],19:["psyduck","seel"],20:["seel","psyduck"],21:["psyduck","seel"],22:["seel","psyduck"],23:["psyduck","seel"],24:["seel","psyduck"],25:["seel","psyduck"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"The deepest ocean trench where abyssal Water-types dwell in crushing pressure.",boss:{speciesId:"seel",name:"Abyssal Leviathan",statMultiplier:12,extraSkillIds:["originPulse","hydroPump","iceBeam"]}},primordialCaldera:{id:"primordialCaldera",name:"Primordial Caldera",tilesetPath:"tilesets/dungeon_fire.png",tilesetKey:"tileset_primordialCaldera",floors:25,enemySpeciesIds:["cyndaquil","fennekin"],floorEnemies:{1:["cyndaquil"],2:["cyndaquil"],3:["cyndaquil","fennekin"],4:["cyndaquil","fennekin"],5:["fennekin"],6:["fennekin","cyndaquil"],7:["cyndaquil","fennekin"],8:["fennekin","cyndaquil"],9:["cyndaquil","fennekin"],10:["fennekin","cyndaquil"],11:["cyndaquil","fennekin"],12:["fennekin"],13:["cyndaquil","fennekin"],14:["fennekin","cyndaquil"],15:["cyndaquil","fennekin"],16:["fennekin","cyndaquil"],17:["cyndaquil","fennekin"],18:["fennekin","cyndaquil"],19:["cyndaquil","fennekin"],20:["fennekin","cyndaquil"],21:["cyndaquil","fennekin"],22:["fennekin","cyndaquil"],23:["cyndaquil","fennekin"],24:["fennekin","cyndaquil"],25:["fennekin","cyndaquil"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A primordial volcano where sacred Fire-types guard eternal flames.",boss:{speciesId:"fennekin",name:"Primordial Inferno",statMultiplier:12,extraSkillIds:["sacredFire","eruption","heatWave"]}},worldTreeRoots:{id:"worldTreeRoots",name:"World Tree Roots",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_worldTreeRoots",floors:25,enemySpeciesIds:["sunkern","cacnea"],floorEnemies:{1:["sunkern"],2:["sunkern"],3:["sunkern","cacnea"],4:["sunkern","cacnea"],5:["cacnea"],6:["cacnea","sunkern"],7:["sunkern","cacnea"],8:["cacnea","sunkern"],9:["sunkern","cacnea"],10:["cacnea","sunkern"],11:["sunkern","cacnea"],12:["cacnea"],13:["sunkern","cacnea"],14:["cacnea","sunkern"],15:["sunkern","cacnea"],16:["cacnea","sunkern"],17:["sunkern","cacnea"],18:["cacnea","sunkern"],19:["sunkern","cacnea"],20:["cacnea","sunkern"],21:["sunkern","cacnea"],22:["cacnea","sunkern"],23:["sunkern","cacnea"],24:["cacnea","sunkern"],25:["cacnea","sunkern"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"The roots of the World Tree where ancient Grass-types channel nature's wrath.",boss:{speciesId:"cacnea",name:"World Tree Guardian",statMultiplier:12,extraSkillIds:["seedFlare","powerWhip","leafStorm"]}},teslaSpire:{id:"teslaSpire",name:"Tesla Spire",tilesetPath:"tilesets/dungeon_electric.png",tilesetKey:"tileset_teslaSpire",floors:25,enemySpeciesIds:["pichu","chinchou"],floorEnemies:{1:["pichu"],2:["pichu"],3:["pichu","chinchou"],4:["pichu","chinchou"],5:["chinchou"],6:["chinchou","pichu"],7:["pichu","chinchou"],8:["chinchou","pichu"],9:["pichu","chinchou"],10:["chinchou","pichu"],11:["pichu","chinchou"],12:["chinchou"],13:["pichu","chinchou"],14:["chinchou","pichu"],15:["pichu","chinchou"],16:["chinchou","pichu"],17:["pichu","chinchou"],18:["chinchou","pichu"],19:["pichu","chinchou"],20:["chinchou","pichu"],21:["pichu","chinchou"],22:["chinchou","pichu"],23:["pichu","chinchou"],24:["chinchou","pichu"],25:["chinchou","pichu"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A towering spire crackling with limitless Electric energy.",boss:{speciesId:"chinchou",name:"Tesla Overlord",statMultiplier:12,extraSkillIds:["thunderCage","thunderbolt","discharge"]}},bileswamp:{id:"bileswamp",name:"Bileswamp",tilesetPath:"tilesets/dungeon_poison.png",tilesetKey:"tileset_bileswamp",floors:25,enemySpeciesIds:["weedle","qwilfish"],floorEnemies:{1:["weedle"],2:["weedle"],3:["weedle","qwilfish"],4:["weedle","qwilfish"],5:["qwilfish"],6:["qwilfish","weedle"],7:["weedle","qwilfish"],8:["qwilfish","weedle"],9:["weedle","qwilfish"],10:["qwilfish","weedle"],11:["weedle","qwilfish"],12:["qwilfish"],13:["weedle","qwilfish"],14:["qwilfish","weedle"],15:["weedle","qwilfish"],16:["qwilfish","weedle"],17:["weedle","qwilfish"],18:["qwilfish","weedle"],19:["weedle","qwilfish"],20:["qwilfish","weedle"],21:["weedle","qwilfish"],22:["qwilfish","weedle"],23:["weedle","qwilfish"],24:["qwilfish","weedle"],25:["qwilfish","weedle"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A festering swamp where Poison-types brew lethal toxins.",boss:{speciesId:"qwilfish",name:"Toxic Archon",statMultiplier:12,extraSkillIds:["toxicThread","gunkShot","venoshock"]}},tectonicAbyss:{id:"tectonicAbyss",name:"Tectonic Abyss",tilesetPath:"tilesets/dungeon_ground.png",tilesetKey:"tileset_tectonicAbyss",floors:25,enemySpeciesIds:["donphan","marowak"],floorEnemies:{1:["donphan"],2:["donphan"],3:["donphan","marowak"],4:["donphan","marowak"],5:["marowak"],6:["marowak","donphan"],7:["donphan","marowak"],8:["marowak","donphan"],9:["donphan","marowak"],10:["marowak","donphan"],11:["donphan","marowak"],12:["marowak"],13:["donphan","marowak"],14:["marowak","donphan"],15:["donphan","marowak"],16:["marowak","donphan"],17:["donphan","marowak"],18:["marowak","donphan"],19:["donphan","marowak"],20:["marowak","donphan"],21:["donphan","marowak"],22:["marowak","donphan"],23:["donphan","marowak"],24:["marowak","donphan"],25:["marowak","donphan"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A yawning abyss where tectonic Ground-types command the earth itself.",boss:{speciesId:"donphan",name:"Tectonic Titan",statMultiplier:12,extraSkillIds:["precipiceBlades","earthquake","drillRun"]}},crystalVein:{id:"crystalVein",name:"Crystal Vein",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset_crystalVein",floors:25,enemySpeciesIds:["onix","omanyte"],floorEnemies:{1:["onix"],2:["onix"],3:["onix","omanyte"],4:["onix","omanyte"],5:["omanyte"],6:["omanyte","onix"],7:["onix","omanyte"],8:["omanyte","onix"],9:["onix","omanyte"],10:["omanyte","onix"],11:["onix","omanyte"],12:["omanyte"],13:["onix","omanyte"],14:["omanyte","onix"],15:["onix","omanyte"],16:["omanyte","onix"],17:["onix","omanyte"],18:["omanyte","onix"],19:["onix","omanyte"],20:["omanyte","onix"],21:["onix","omanyte"],22:["omanyte","onix"],23:["onix","omanyte"],24:["omanyte","onix"],25:["omanyte","onix"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A glittering vein of crystals where ancient Rock-types guard precious gems.",boss:{speciesId:"onix",name:"Crystal Colossus",statMultiplier:12,extraSkillIds:["diamondStorm","headSmash","stoneEdge"]}},hiveMind:{id:"hiveMind",name:"Hive Mind",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_hiveMind",floors:25,enemySpeciesIds:["scyther","pinsir"],floorEnemies:{1:["scyther"],2:["scyther"],3:["scyther","pinsir"],4:["scyther","pinsir"],5:["pinsir"],6:["pinsir","scyther"],7:["scyther","pinsir"],8:["pinsir","scyther"],9:["scyther","pinsir"],10:["pinsir","scyther"],11:["scyther","pinsir"],12:["pinsir"],13:["scyther","pinsir"],14:["pinsir","scyther"],15:["scyther","pinsir"],16:["pinsir","scyther"],17:["scyther","pinsir"],18:["pinsir","scyther"],19:["scyther","pinsir"],20:["pinsir","scyther"],21:["scyther","pinsir"],22:["pinsir","scyther"],23:["scyther","pinsir"],24:["pinsir","scyther"],25:["pinsir","scyther"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A sprawling hive where Bug-types swarm with hive-mind intelligence.",boss:{speciesId:"scyther",name:"Hive Overlord",statMultiplier:12,extraSkillIds:["xScissor","megahorn","airSlash"]}},grandArena:{id:"grandArena",name:"Grand Arena",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_grandArena",floors:25,enemySpeciesIds:["medicham","lucario"],floorEnemies:{1:["medicham"],2:["medicham"],3:["medicham","lucario"],4:["medicham","lucario"],5:["lucario"],6:["lucario","medicham"],7:["medicham","lucario"],8:["lucario","medicham"],9:["medicham","lucario"],10:["lucario","medicham"],11:["medicham","lucario"],12:["lucario"],13:["medicham","lucario"],14:["lucario","medicham"],15:["medicham","lucario"],16:["lucario","medicham"],17:["medicham","lucario"],18:["lucario","medicham"],19:["medicham","lucario"],20:["lucario","medicham"],21:["medicham","lucario"],22:["lucario","medicham"],23:["medicham","lucario"],24:["lucario","medicham"],25:["lucario","medicham"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A grand arena where Fighting-types compete for ultimate supremacy.",boss:{speciesId:"lucario",name:"Arena Champion",statMultiplier:12,extraSkillIds:["focusPunch","closeCombat","auraSphere"]}},adamantineChamber:{id:"adamantineChamber",name:"Adamantine Chamber",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_adamantineChamber",floors:25,enemySpeciesIds:["metang","lairon"],floorEnemies:{1:["metang"],2:["metang"],3:["metang","lairon"],4:["metang","lairon"],5:["lairon"],6:["lairon","metang"],7:["metang","lairon"],8:["lairon","metang"],9:["metang","lairon"],10:["lairon","metang"],11:["metang","lairon"],12:["lairon"],13:["metang","lairon"],14:["lairon","metang"],15:["metang","lairon"],16:["lairon","metang"],17:["metang","lairon"],18:["lairon","metang"],19:["metang","lairon"],20:["lairon","metang"],21:["metang","lairon"],22:["lairon","metang"],23:["metang","lairon"],24:["lairon","metang"],25:["lairon","metang"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A chamber forged from adamantine where Steel-types guard impenetrable walls.",boss:{speciesId:"metang",name:"Adamantine Sentinel",statMultiplier:12,extraSkillIds:["meteorMash","heavySlam","zenHeadbutt"]}},voidBreach:{id:"voidBreach",name:"Void Breach",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_voidBreach",floors:25,enemySpeciesIds:["gengar","chandelure"],floorEnemies:{1:["gengar"],2:["gengar"],3:["gengar","chandelure"],4:["gengar","chandelure"],5:["chandelure"],6:["chandelure","gengar"],7:["gengar","chandelure"],8:["chandelure","gengar"],9:["gengar","chandelure"],10:["chandelure","gengar"],11:["gengar","chandelure"],12:["chandelure"],13:["gengar","chandelure"],14:["chandelure","gengar"],15:["gengar","chandelure"],16:["chandelure","gengar"],17:["gengar","chandelure"],18:["chandelure","gengar"],19:["gengar","chandelure"],20:["chandelure","gengar"],21:["gengar","chandelure"],22:["chandelure","gengar"],23:["gengar","chandelure"],24:["chandelure","gengar"],25:["chandelure","gengar"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A tear in reality where Ghost-types emerge from the void between worlds.",boss:{speciesId:"gengar",name:"Void Phantom",statMultiplier:12,extraSkillIds:["shadowClaw","cursedFlame","shadowBall"]}},etherealNexus:{id:"etherealNexus",name:"Ethereal Nexus",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset_etherealNexus",floors:25,enemySpeciesIds:["alakazam","gardevoir"],floorEnemies:{1:["alakazam"],2:["alakazam"],3:["alakazam","gardevoir"],4:["alakazam","gardevoir"],5:["gardevoir"],6:["gardevoir","alakazam"],7:["alakazam","gardevoir"],8:["gardevoir","alakazam"],9:["alakazam","gardevoir"],10:["gardevoir","alakazam"],11:["alakazam","gardevoir"],12:["gardevoir"],13:["alakazam","gardevoir"],14:["gardevoir","alakazam"],15:["alakazam","gardevoir"],16:["gardevoir","alakazam"],17:["alakazam","gardevoir"],18:["gardevoir","alakazam"],19:["alakazam","gardevoir"],20:["gardevoir","alakazam"],21:["alakazam","gardevoir"],22:["gardevoir","alakazam"],23:["alakazam","gardevoir"],24:["gardevoir","alakazam"],25:["gardevoir","alakazam"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A nexus of psychic energy where Psychic-types bend the fabric of reality.",boss:{speciesId:"alakazam",name:"Nexus Sage",statMultiplier:12,extraSkillIds:["psychoCut","futuresight","psychic"]}},glacialTomb:{id:"glacialTomb",name:"Glacial Tomb",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset_glacialTomb",floors:25,enemySpeciesIds:["lapras","weavile"],floorEnemies:{1:["lapras"],2:["lapras"],3:["lapras","weavile"],4:["lapras","weavile"],5:["weavile"],6:["weavile","lapras"],7:["lapras","weavile"],8:["weavile","lapras"],9:["lapras","weavile"],10:["weavile","lapras"],11:["lapras","weavile"],12:["weavile"],13:["lapras","weavile"],14:["weavile","lapras"],15:["lapras","weavile"],16:["weavile","lapras"],17:["lapras","weavile"],18:["weavile","lapras"],19:["lapras","weavile"],20:["weavile","lapras"],21:["lapras","weavile"],22:["weavile","lapras"],23:["lapras","weavile"],24:["weavile","lapras"],25:["weavile","lapras"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"An ancient citadel sealed in eternal ice where Ice-types guard frozen treasures.",boss:{speciesId:"weavile",name:"Frost Sovereign",statMultiplier:12,extraSkillIds:["nightSlash","icePunch","icicleCrash"]}},abyssalShadow:{id:"abyssalShadow",name:"Abyssal Shadow",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset_abyssalShadow",floors:25,enemySpeciesIds:["honchkrow","houndoom"],floorEnemies:{1:["honchkrow"],2:["honchkrow"],3:["honchkrow","houndoom"],4:["honchkrow","houndoom"],5:["houndoom"],6:["houndoom","honchkrow"],7:["honchkrow","houndoom"],8:["houndoom","honchkrow"],9:["honchkrow","houndoom"],10:["houndoom","honchkrow"],11:["honchkrow","houndoom"],12:["houndoom"],13:["honchkrow","houndoom"],14:["houndoom","honchkrow"],15:["honchkrow","houndoom"],16:["houndoom","honchkrow"],17:["honchkrow","houndoom"],18:["houndoom","honchkrow"],19:["honchkrow","houndoom"],20:["houndoom","honchkrow"],21:["honchkrow","houndoom"],22:["houndoom","honchkrow"],23:["honchkrow","houndoom"],24:["houndoom","honchkrow"],25:["houndoom","honchkrow"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A realm of perpetual darkness where Dark-types plot from the deepest shadows.",boss:{speciesId:"honchkrow",name:"Shadow Don",statMultiplier:12,extraSkillIds:["nightSlash","braveBird","suckerPunch"]}},enchantedGrove:{id:"enchantedGrove",name:"Enchanted Grove",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset_enchantedGrove",floors:25,enemySpeciesIds:["florges","mimikyu"],floorEnemies:{1:["florges"],2:["florges"],3:["florges","mimikyu"],4:["florges","mimikyu"],5:["mimikyu"],6:["mimikyu","florges"],7:["florges","mimikyu"],8:["mimikyu","florges"],9:["florges","mimikyu"],10:["mimikyu","florges"],11:["florges","mimikyu"],12:["mimikyu"],13:["florges","mimikyu"],14:["mimikyu","florges"],15:["florges","mimikyu"],16:["mimikyu","florges"],17:["florges","mimikyu"],18:["mimikyu","florges"],19:["florges","mimikyu"],20:["mimikyu","florges"],21:["florges","mimikyu"],22:["mimikyu","florges"],23:["florges","mimikyu"],24:["mimikyu","florges"],25:["mimikyu","florges"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A mystical grove alive with fairy magic where Fairy-types dance under starlight.",boss:{speciesId:"florges",name:"Grove Enchantress",statMultiplier:12,extraSkillIds:["moonblast","dazzlingGleam","petalBlizzard"]}},wyrmpeakSummit:{id:"wyrmpeakSummit",name:"Wyrmpeak Summit",tilesetPath:"tilesets/dungeon_cave.png",tilesetKey:"tileset_wyrmpeakSummit",floors:25,enemySpeciesIds:["dragonite","flygon"],floorEnemies:{1:["dragonite"],2:["dragonite"],3:["dragonite","flygon"],4:["dragonite","flygon"],5:["flygon"],6:["flygon","dragonite"],7:["dragonite","flygon"],8:["flygon","dragonite"],9:["dragonite","flygon"],10:["flygon","dragonite"],11:["dragonite","flygon"],12:["flygon"],13:["dragonite","flygon"],14:["flygon","dragonite"],15:["dragonite","flygon"],16:["flygon","dragonite"],17:["dragonite","flygon"],18:["flygon","dragonite"],19:["dragonite","flygon"],20:["flygon","dragonite"],21:["dragonite","flygon"],22:["flygon","dragonite"],23:["dragonite","flygon"],24:["flygon","dragonite"],25:["flygon","dragonite"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"The highest peak where ancient Dragon-types rule the skies with unmatched power.",boss:{speciesId:"dragonite",name:"Wyrm Overlord",statMultiplier:12,extraSkillIds:["dragonClaw","extremeSpeed","hurricane"]}},galeStronghold:{id:"galeStronghold",name:"Gale Stronghold",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset_galeStronghold",floors:25,enemySpeciesIds:["staraptor","braviary"],floorEnemies:{1:["staraptor"],2:["staraptor"],3:["staraptor","braviary"],4:["staraptor","braviary"],5:["braviary"],6:["braviary","staraptor"],7:["staraptor","braviary"],8:["braviary","staraptor"],9:["staraptor","braviary"],10:["braviary","staraptor"],11:["staraptor","braviary"],12:["braviary"],13:["staraptor","braviary"],14:["braviary","staraptor"],15:["staraptor","braviary"],16:["braviary","staraptor"],17:["staraptor","braviary"],18:["braviary","staraptor"],19:["staraptor","braviary"],20:["braviary","staraptor"],21:["staraptor","braviary"],22:["braviary","staraptor"],23:["staraptor","braviary"],24:["braviary","staraptor"],25:["braviary","staraptor"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"A sky fortress battered by relentless gales where Flying-types command the winds.",boss:{speciesId:"staraptor",name:"Gale Commander",statMultiplier:12,extraSkillIds:["braveBird","closeCombat","aerialAce"]}},apexArena:{id:"apexArena",name:"Apex Arena",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset_apexArena",floors:25,enemySpeciesIds:["snorlax","zangoose"],floorEnemies:{1:["snorlax"],2:["snorlax"],3:["snorlax","zangoose"],4:["snorlax","zangoose"],5:["zangoose"],6:["zangoose","snorlax"],7:["snorlax","zangoose"],8:["zangoose","snorlax"],9:["snorlax","zangoose"],10:["zangoose","snorlax"],11:["snorlax","zangoose"],12:["zangoose"],13:["snorlax","zangoose"],14:["zangoose","snorlax"],15:["snorlax","zangoose"],16:["zangoose","snorlax"],17:["snorlax","zangoose"],18:["zangoose","snorlax"],19:["snorlax","zangoose"],20:["zangoose","snorlax"],21:["snorlax","zangoose"],22:["zangoose","snorlax"],23:["snorlax","zangoose"],24:["zangoose","snorlax"],25:["zangoose","snorlax"]},difficulty:5.5,itemsPerFloor:5,unlockClears:35,description:"The ultimate proving ground where only the strongest Normal-types remain standing.",boss:{speciesId:"snorlax",name:"Apex Champion",statMultiplier:12,extraSkillIds:["bodySlam","heavySlam","rest"]}},leviathanTrench:{id:"leviathanTrench",name:"Leviathan Trench",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset-water",floors:28,enemySpeciesIds:["gyarados","kingdra"],floorEnemies:{1:["gyarados"],2:["gyarados"],3:["gyarados","kingdra"],4:["gyarados","kingdra"],5:["kingdra"],6:["kingdra","gyarados"],7:["gyarados","kingdra"],8:["kingdra","gyarados"],9:["gyarados","kingdra"],10:["kingdra","gyarados"],11:["gyarados","kingdra"],12:["kingdra"],13:["gyarados","kingdra"],14:["kingdra","gyarados"],15:["gyarados","kingdra"],16:["kingdra","gyarados"],17:["gyarados","kingdra"],18:["kingdra","gyarados"],19:["gyarados","kingdra"],20:["kingdra","gyarados"],21:["gyarados","kingdra"],22:["kingdra","gyarados"],23:["gyarados","kingdra"],24:["kingdra","gyarados"],25:["gyarados","kingdra"],26:["kingdra","gyarados"],27:["gyarados","kingdra"],28:["kingdra","gyarados"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"An abyssal trench where monstrous sea serpents and dragon kings rule the crushing depths.",boss:{speciesId:"gyarados",name:"Leviathan Lord",statMultiplier:14,extraSkillIds:["waterSpout","hydroPump","crunch"]}},infernalSummit:{id:"infernalSummit",name:"Infernal Summit",tilesetPath:"tilesets/dungeon_fire.png",tilesetKey:"tileset-fire",floors:28,enemySpeciesIds:["blaziken","typhlosion"],floorEnemies:{1:["blaziken"],2:["blaziken"],3:["blaziken","typhlosion"],4:["blaziken","typhlosion"],5:["typhlosion"],6:["typhlosion","blaziken"],7:["blaziken","typhlosion"],8:["typhlosion","blaziken"],9:["blaziken","typhlosion"],10:["typhlosion","blaziken"],11:["blaziken","typhlosion"],12:["typhlosion"],13:["blaziken","typhlosion"],14:["typhlosion","blaziken"],15:["blaziken","typhlosion"],16:["typhlosion","blaziken"],17:["blaziken","typhlosion"],18:["typhlosion","blaziken"],19:["blaziken","typhlosion"],20:["typhlosion","blaziken"],21:["blaziken","typhlosion"],22:["typhlosion","blaziken"],23:["blaziken","typhlosion"],24:["typhlosion","blaziken"],25:["blaziken","typhlosion"],26:["typhlosion","blaziken"],27:["blaziken","typhlosion"],28:["typhlosion","blaziken"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A volcanic summit where blazing fighters and eruption masters clash in eternal flame.",boss:{speciesId:"blaziken",name:"Infernal Champion",statMultiplier:14,extraSkillIds:["dragonAscent","blazeKick","closeCombat"]}},worldTreeCanopy:{id:"worldTreeCanopy",name:"World Tree Canopy",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset-grass",floors:28,enemySpeciesIds:["venusaur","sceptile"],floorEnemies:{1:["venusaur"],2:["venusaur"],3:["venusaur","sceptile"],4:["venusaur","sceptile"],5:["sceptile"],6:["sceptile","venusaur"],7:["venusaur","sceptile"],8:["sceptile","venusaur"],9:["venusaur","sceptile"],10:["sceptile","venusaur"],11:["venusaur","sceptile"],12:["sceptile"],13:["venusaur","sceptile"],14:["sceptile","venusaur"],15:["venusaur","sceptile"],16:["sceptile","venusaur"],17:["venusaur","sceptile"],18:["sceptile","venusaur"],19:["venusaur","sceptile"],20:["sceptile","venusaur"],21:["venusaur","sceptile"],22:["sceptile","venusaur"],23:["venusaur","sceptile"],24:["sceptile","venusaur"],25:["venusaur","sceptile"],26:["sceptile","venusaur"],27:["venusaur","sceptile"],28:["sceptile","venusaur"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"The canopy of an ancient world tree where primal flora guardians reside.",boss:{speciesId:"venusaur",name:"World Tree Guardian",statMultiplier:14,extraSkillIds:["frenzyPlant","seedFlare","powerWhip"]}},thunderGodSpire:{id:"thunderGodSpire",name:"Thunder God Spire",tilesetPath:"tilesets/dungeon_electric.png",tilesetKey:"tileset-electric",floors:28,enemySpeciesIds:["jolteon","ampharos"],floorEnemies:{1:["jolteon"],2:["jolteon"],3:["jolteon","ampharos"],4:["jolteon","ampharos"],5:["ampharos"],6:["ampharos","jolteon"],7:["jolteon","ampharos"],8:["ampharos","jolteon"],9:["jolteon","ampharos"],10:["ampharos","jolteon"],11:["jolteon","ampharos"],12:["ampharos"],13:["jolteon","ampharos"],14:["ampharos","jolteon"],15:["jolteon","ampharos"],16:["ampharos","jolteon"],17:["jolteon","ampharos"],18:["ampharos","jolteon"],19:["jolteon","ampharos"],20:["ampharos","jolteon"],21:["jolteon","ampharos"],22:["ampharos","jolteon"],23:["jolteon","ampharos"],24:["ampharos","jolteon"],25:["jolteon","ampharos"],26:["ampharos","jolteon"],27:["jolteon","ampharos"],28:["ampharos","jolteon"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A towering spire crackling with divine lightning where electric titans dwell.",boss:{speciesId:"jolteon",name:"Thunder God",statMultiplier:14,extraSkillIds:["voltTackle","thunderbolt","discharge"]}},venomousAbyss:{id:"venomousAbyss",name:"Venomous Abyss",tilesetPath:"tilesets/dungeon_poison.png",tilesetKey:"tileset-poison",floors:28,enemySpeciesIds:["nidoking","crobat"],floorEnemies:{1:["nidoking"],2:["nidoking"],3:["nidoking","crobat"],4:["nidoking","crobat"],5:["crobat"],6:["crobat","nidoking"],7:["nidoking","crobat"],8:["crobat","nidoking"],9:["nidoking","crobat"],10:["crobat","nidoking"],11:["nidoking","crobat"],12:["crobat"],13:["nidoking","crobat"],14:["crobat","nidoking"],15:["nidoking","crobat"],16:["crobat","nidoking"],17:["nidoking","crobat"],18:["crobat","nidoking"],19:["nidoking","crobat"],20:["crobat","nidoking"],21:["nidoking","crobat"],22:["crobat","nidoking"],23:["nidoking","crobat"],24:["crobat","nidoking"],25:["nidoking","crobat"],26:["crobat","nidoking"],27:["nidoking","crobat"],28:["crobat","nidoking"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A fathomless abyss reeking of venom where the most toxic creatures reign supreme.",boss:{speciesId:"nidoking",name:"Venom Emperor",statMultiplier:14,extraSkillIds:["sludgeWave","gunkShot","earthquake"]}},tectonicThrone:{id:"tectonicThrone",name:"Tectonic Throne",tilesetPath:"tilesets/dungeon_ground.png",tilesetKey:"tileset-ground",floors:28,enemySpeciesIds:["krookodile","nidoqueen"],floorEnemies:{1:["krookodile"],2:["krookodile"],3:["krookodile","nidoqueen"],4:["krookodile","nidoqueen"],5:["nidoqueen"],6:["nidoqueen","krookodile"],7:["krookodile","nidoqueen"],8:["nidoqueen","krookodile"],9:["krookodile","nidoqueen"],10:["nidoqueen","krookodile"],11:["krookodile","nidoqueen"],12:["nidoqueen"],13:["krookodile","nidoqueen"],14:["nidoqueen","krookodile"],15:["krookodile","nidoqueen"],16:["nidoqueen","krookodile"],17:["krookodile","nidoqueen"],18:["nidoqueen","krookodile"],19:["krookodile","nidoqueen"],20:["nidoqueen","krookodile"],21:["krookodile","nidoqueen"],22:["nidoqueen","krookodile"],23:["krookodile","nidoqueen"],24:["nidoqueen","krookodile"],25:["krookodile","nidoqueen"],26:["nidoqueen","krookodile"],27:["krookodile","nidoqueen"],28:["nidoqueen","krookodile"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A throne of shifting tectonic plates where earth-shaking titans rule unchallenged.",boss:{speciesId:"krookodile",name:"Tectonic Tyrant",statMultiplier:14,extraSkillIds:["tectonicRage","earthquake","crunch"]}},ancientMonolith:{id:"ancientMonolith",name:"Ancient Monolith",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset-rock",floors:28,enemySpeciesIds:["tyranitar","aerodactyl"],floorEnemies:{1:["tyranitar"],2:["tyranitar"],3:["tyranitar","aerodactyl"],4:["tyranitar","aerodactyl"],5:["aerodactyl"],6:["aerodactyl","tyranitar"],7:["tyranitar","aerodactyl"],8:["aerodactyl","tyranitar"],9:["tyranitar","aerodactyl"],10:["aerodactyl","tyranitar"],11:["tyranitar","aerodactyl"],12:["aerodactyl"],13:["tyranitar","aerodactyl"],14:["aerodactyl","tyranitar"],15:["tyranitar","aerodactyl"],16:["aerodactyl","tyranitar"],17:["tyranitar","aerodactyl"],18:["aerodactyl","tyranitar"],19:["tyranitar","aerodactyl"],20:["aerodactyl","tyranitar"],21:["tyranitar","aerodactyl"],22:["aerodactyl","tyranitar"],23:["tyranitar","aerodactyl"],24:["aerodactyl","tyranitar"],25:["tyranitar","aerodactyl"],26:["aerodactyl","tyranitar"],27:["tyranitar","aerodactyl"],28:["aerodactyl","tyranitar"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A colossal stone monolith from an ancient era where primordial rock titans guard forgotten power.",boss:{speciesId:"tyranitar",name:"Monolith Sovereign",statMultiplier:14,extraSkillIds:["diamondStorm","stoneEdge","crunch"]}},predatorHive:{id:"predatorHive",name:"Predator Hive",tilesetPath:"tilesets/dungeon_bug.png",tilesetKey:"tileset-bug",floors:28,enemySpeciesIds:["yanmega","scolipede"],floorEnemies:{1:["yanmega"],2:["yanmega"],3:["yanmega","scolipede"],4:["yanmega","scolipede"],5:["scolipede"],6:["scolipede","yanmega"],7:["yanmega","scolipede"],8:["scolipede","yanmega"],9:["yanmega","scolipede"],10:["scolipede","yanmega"],11:["yanmega","scolipede"],12:["scolipede"],13:["yanmega","scolipede"],14:["scolipede","yanmega"],15:["yanmega","scolipede"],16:["scolipede","yanmega"],17:["yanmega","scolipede"],18:["scolipede","yanmega"],19:["yanmega","scolipede"],20:["scolipede","yanmega"],21:["yanmega","scolipede"],22:["scolipede","yanmega"],23:["yanmega","scolipede"],24:["scolipede","yanmega"],25:["yanmega","scolipede"],26:["scolipede","yanmega"],27:["yanmega","scolipede"],28:["scolipede","yanmega"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A nightmare hive teeming with apex predator insects that hunt with ruthless efficiency.",boss:{speciesId:"scolipede",name:"Hive Overlord",statMultiplier:14,extraSkillIds:["megahorn","sludgeWave","xScissor"]}},wargodsTemple:{id:"wargodsTemple",name:"Wargod's Temple",tilesetPath:"tilesets/dungeon_fighting.png",tilesetKey:"tileset-fighting",floors:28,enemySpeciesIds:["conkeldurr","machamp"],floorEnemies:{1:["conkeldurr"],2:["conkeldurr"],3:["conkeldurr","machamp"],4:["conkeldurr","machamp"],5:["machamp"],6:["machamp","conkeldurr"],7:["conkeldurr","machamp"],8:["machamp","conkeldurr"],9:["conkeldurr","machamp"],10:["machamp","conkeldurr"],11:["conkeldurr","machamp"],12:["machamp"],13:["conkeldurr","machamp"],14:["machamp","conkeldurr"],15:["conkeldurr","machamp"],16:["machamp","conkeldurr"],17:["conkeldurr","machamp"],18:["machamp","conkeldurr"],19:["conkeldurr","machamp"],20:["machamp","conkeldurr"],21:["conkeldurr","machamp"],22:["machamp","conkeldurr"],23:["conkeldurr","machamp"],24:["machamp","conkeldurr"],25:["conkeldurr","machamp"],26:["machamp","conkeldurr"],27:["conkeldurr","machamp"],28:["machamp","conkeldurr"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A sacred temple dedicated to the war gods where only the mightiest warriors survive.",boss:{speciesId:"machamp",name:"Wargod Champion",statMultiplier:14,extraSkillIds:["megaPunch","closeCombat","focusPunch"]}},magnetarCore:{id:"magnetarCore",name:"Magnetar Core",tilesetPath:"tilesets/dungeon_steel.png",tilesetKey:"tileset-steel",floors:28,enemySpeciesIds:["magnezone","empoleon"],floorEnemies:{1:["magnezone"],2:["magnezone"],3:["magnezone","empoleon"],4:["magnezone","empoleon"],5:["empoleon"],6:["empoleon","magnezone"],7:["magnezone","empoleon"],8:["empoleon","magnezone"],9:["magnezone","empoleon"],10:["empoleon","magnezone"],11:["magnezone","empoleon"],12:["empoleon"],13:["magnezone","empoleon"],14:["empoleon","magnezone"],15:["magnezone","empoleon"],16:["empoleon","magnezone"],17:["magnezone","empoleon"],18:["empoleon","magnezone"],19:["magnezone","empoleon"],20:["empoleon","magnezone"],21:["magnezone","empoleon"],22:["empoleon","magnezone"],23:["magnezone","empoleon"],24:["empoleon","magnezone"],25:["magnezone","empoleon"],26:["empoleon","magnezone"],27:["magnezone","empoleon"],28:["empoleon","magnezone"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"The ultra-dense core of a magnetar where steel titans forge their power from stellar forces.",boss:{speciesId:"magnezone",name:"Magnetar Overlord",statMultiplier:14,extraSkillIds:["doomDesire","flashCannon","thunderbolt"]}},spectralThrone:{id:"spectralThrone",name:"Spectral Throne",tilesetPath:"tilesets/dungeon_ghost.png",tilesetKey:"tileset-ghost",floors:28,enemySpeciesIds:["dusknoir","cofagrigus"],floorEnemies:{1:["dusknoir"],2:["dusknoir"],3:["dusknoir","cofagrigus"],4:["dusknoir","cofagrigus"],5:["cofagrigus"],6:["cofagrigus","dusknoir"],7:["dusknoir","cofagrigus"],8:["cofagrigus","dusknoir"],9:["dusknoir","cofagrigus"],10:["cofagrigus","dusknoir"],11:["dusknoir","cofagrigus"],12:["cofagrigus"],13:["dusknoir","cofagrigus"],14:["cofagrigus","dusknoir"],15:["dusknoir","cofagrigus"],16:["cofagrigus","dusknoir"],17:["dusknoir","cofagrigus"],18:["cofagrigus","dusknoir"],19:["dusknoir","cofagrigus"],20:["cofagrigus","dusknoir"],21:["dusknoir","cofagrigus"],22:["cofagrigus","dusknoir"],23:["dusknoir","cofagrigus"],24:["cofagrigus","dusknoir"],25:["dusknoir","cofagrigus"],26:["cofagrigus","dusknoir"],27:["dusknoir","cofagrigus"],28:["cofagrigus","dusknoir"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A throne room beyond the veil of death where spectral monarchs command legions of the departed.",boss:{speciesId:"dusknoir",name:"Spectral Monarch",statMultiplier:14,extraSkillIds:["shadowRave","shadowForce","phantomForce"]}},cognitionSpire:{id:"cognitionSpire",name:"Cognition Spire",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset-psychic",floors:28,enemySpeciesIds:["reuniclus","gothitelle"],floorEnemies:{1:["reuniclus"],2:["reuniclus"],3:["reuniclus","gothitelle"],4:["reuniclus","gothitelle"],5:["gothitelle"],6:["gothitelle","reuniclus"],7:["reuniclus","gothitelle"],8:["gothitelle","reuniclus"],9:["reuniclus","gothitelle"],10:["gothitelle","reuniclus"],11:["reuniclus","gothitelle"],12:["gothitelle"],13:["reuniclus","gothitelle"],14:["gothitelle","reuniclus"],15:["reuniclus","gothitelle"],16:["gothitelle","reuniclus"],17:["reuniclus","gothitelle"],18:["gothitelle","reuniclus"],19:["reuniclus","gothitelle"],20:["gothitelle","reuniclus"],21:["reuniclus","gothitelle"],22:["gothitelle","reuniclus"],23:["reuniclus","gothitelle"],24:["gothitelle","reuniclus"],25:["reuniclus","gothitelle"],26:["gothitelle","reuniclus"],27:["reuniclus","gothitelle"],28:["gothitelle","reuniclus"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A towering spire of pure thought where psychic masters bend reality to their will.",boss:{speciesId:"reuniclus",name:"Cognition Archon",statMultiplier:14,extraSkillIds:["futuresight","psychic","expandingForce"]}},absoluteZeroPeak:{id:"absoluteZeroPeak",name:"Absolute Zero Peak",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset-ice",floors:28,enemySpeciesIds:["mamoswine","walrein"],floorEnemies:{1:["mamoswine"],2:["mamoswine"],3:["mamoswine","walrein"],4:["mamoswine","walrein"],5:["walrein"],6:["walrein","mamoswine"],7:["mamoswine","walrein"],8:["walrein","mamoswine"],9:["mamoswine","walrein"],10:["walrein","mamoswine"],11:["mamoswine","walrein"],12:["walrein"],13:["mamoswine","walrein"],14:["walrein","mamoswine"],15:["mamoswine","walrein"],16:["walrein","mamoswine"],17:["mamoswine","walrein"],18:["walrein","mamoswine"],19:["mamoswine","walrein"],20:["walrein","mamoswine"],21:["mamoswine","walrein"],22:["walrein","mamoswine"],23:["mamoswine","walrein"],24:["walrein","mamoswine"],25:["mamoswine","walrein"],26:["walrein","mamoswine"],27:["mamoswine","walrein"],28:["walrein","mamoswine"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A mountain peak where temperatures plunge to absolute zero and ancient ice titans guard the summit.",boss:{speciesId:"mamoswine",name:"Glacial Titan",statMultiplier:14,extraSkillIds:["sheerCold","avalanche","blizzard"]}},eternalNight:{id:"eternalNight",name:"Eternal Night",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset-dark",floors:28,enemySpeciesIds:["darkrai","hydreigon"],floorEnemies:{1:["darkrai"],2:["darkrai"],3:["darkrai","hydreigon"],4:["darkrai","hydreigon"],5:["hydreigon"],6:["hydreigon","darkrai"],7:["darkrai","hydreigon"],8:["hydreigon","darkrai"],9:["darkrai","hydreigon"],10:["hydreigon","darkrai"],11:["darkrai","hydreigon"],12:["hydreigon"],13:["darkrai","hydreigon"],14:["hydreigon","darkrai"],15:["darkrai","hydreigon"],16:["hydreigon","darkrai"],17:["darkrai","hydreigon"],18:["hydreigon","darkrai"],19:["darkrai","hydreigon"],20:["hydreigon","darkrai"],21:["darkrai","hydreigon"],22:["hydreigon","darkrai"],23:["darkrai","hydreigon"],24:["hydreigon","darkrai"],25:["darkrai","hydreigon"],26:["hydreigon","darkrai"],27:["darkrai","hydreigon"],28:["hydreigon","darkrai"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"A realm of perpetual darkness where nightmares become reality and three-headed terrors lurk in the shadows.",boss:{speciesId:"darkrai",name:"Nightmare Sovereign",statMultiplier:14,extraSkillIds:["darkVoid","darkPulse","nastyPlot"]}},celestialBlossom:{id:"celestialBlossom",name:"Celestial Blossom",tilesetPath:"tilesets/dungeon_fairy.png",tilesetKey:"tileset-fairy",floors:28,enemySpeciesIds:["sylveon","hatterene"],floorEnemies:{1:["sylveon"],2:["sylveon"],3:["sylveon","hatterene"],4:["sylveon","hatterene"],5:["hatterene"],6:["hatterene","sylveon"],7:["sylveon","hatterene"],8:["hatterene","sylveon"],9:["sylveon","hatterene"],10:["hatterene","sylveon"],11:["sylveon","hatterene"],12:["hatterene"],13:["sylveon","hatterene"],14:["hatterene","sylveon"],15:["sylveon","hatterene"],16:["hatterene","sylveon"],17:["sylveon","hatterene"],18:["hatterene","sylveon"],19:["sylveon","hatterene"],20:["hatterene","sylveon"],21:["sylveon","hatterene"],22:["hatterene","sylveon"],23:["sylveon","hatterene"],24:["hatterene","sylveon"],25:["sylveon","hatterene"],26:["hatterene","sylveon"],27:["sylveon","hatterene"],28:["hatterene","sylveon"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"An ethereal garden of celestial flowers where fairy queens weave enchantments of devastating beauty.",boss:{speciesId:"hatterene",name:"Celestial Witch",statMultiplier:14,extraSkillIds:["moonforce","dazzlingGleam","psychic"]}},dragonsSovereignty:{id:"dragonsSovereignty",name:"Dragon's Sovereignty",tilesetPath:"tilesets/dungeon_dragon.png",tilesetKey:"tileset-dragon",floors:28,enemySpeciesIds:["haxorus","goodra"],floorEnemies:{1:["haxorus"],2:["haxorus"],3:["haxorus","goodra"],4:["haxorus","goodra"],5:["goodra"],6:["goodra","haxorus"],7:["haxorus","goodra"],8:["goodra","haxorus"],9:["haxorus","goodra"],10:["goodra","haxorus"],11:["haxorus","goodra"],12:["goodra"],13:["haxorus","goodra"],14:["goodra","haxorus"],15:["haxorus","goodra"],16:["goodra","haxorus"],17:["haxorus","goodra"],18:["goodra","haxorus"],19:["haxorus","goodra"],20:["goodra","haxorus"],21:["haxorus","goodra"],22:["goodra","haxorus"],23:["haxorus","goodra"],24:["goodra","haxorus"],25:["haxorus","goodra"],26:["goodra","haxorus"],27:["haxorus","goodra"],28:["goodra","haxorus"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"The throne room of the dragon sovereigns where axe-jawed warriors and slimy titans rule unchallenged.",boss:{speciesId:"haxorus",name:"Dragon Sovereign",statMultiplier:14,extraSkillIds:["eternaBeam","outrage","dragonRush"]}},zenithStormfront:{id:"zenithStormfront",name:"Zenith Stormfront",tilesetPath:"tilesets/dungeon_flying.png",tilesetKey:"tileset-flying",floors:28,enemySpeciesIds:["pidgeot","noivern"],floorEnemies:{1:["pidgeot"],2:["pidgeot"],3:["pidgeot","noivern"],4:["pidgeot","noivern"],5:["noivern"],6:["noivern","pidgeot"],7:["pidgeot","noivern"],8:["noivern","pidgeot"],9:["pidgeot","noivern"],10:["noivern","pidgeot"],11:["pidgeot","noivern"],12:["noivern"],13:["pidgeot","noivern"],14:["noivern","pidgeot"],15:["pidgeot","noivern"],16:["noivern","pidgeot"],17:["pidgeot","noivern"],18:["noivern","pidgeot"],19:["pidgeot","noivern"],20:["noivern","pidgeot"],21:["pidgeot","noivern"],22:["noivern","pidgeot"],23:["pidgeot","noivern"],24:["noivern","pidgeot"],25:["pidgeot","noivern"],26:["noivern","pidgeot"],27:["pidgeot","noivern"],28:["noivern","pidgeot"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"The highest point in the sky where eternal storms rage and the mightiest aerial predators command the winds.",boss:{speciesId:"noivern",name:"Stormfront Wyvern",statMultiplier:14,extraSkillIds:["oblivionWing","hurricane","boomburst"]}},infinityHall:{id:"infinityHall",name:"Infinity Hall",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset-normal",floors:28,enemySpeciesIds:["blissey","porygonZ"],floorEnemies:{1:["blissey"],2:["blissey"],3:["blissey","porygonZ"],4:["blissey","porygonZ"],5:["porygonZ"],6:["porygonZ","blissey"],7:["blissey","porygonZ"],8:["porygonZ","blissey"],9:["blissey","porygonZ"],10:["porygonZ","blissey"],11:["blissey","porygonZ"],12:["porygonZ"],13:["blissey","porygonZ"],14:["porygonZ","blissey"],15:["blissey","porygonZ"],16:["porygonZ","blissey"],17:["blissey","porygonZ"],18:["porygonZ","blissey"],19:["blissey","porygonZ"],20:["porygonZ","blissey"],21:["blissey","porygonZ"],22:["porygonZ","blissey"],23:["blissey","porygonZ"],24:["porygonZ","blissey"],25:["blissey","porygonZ"],26:["porygonZ","blissey"],27:["blissey","porygonZ"],28:["porygonZ","blissey"]},difficulty:6,itemsPerFloor:6,unlockClears:40,description:"An endless hall of infinite dimensions where digital anomalies and indestructible guardians test all challengers.",boss:{speciesId:"porygonZ",name:"Infinity Construct",statMultiplier:14,extraSkillIds:["gigaImpact","triAttack","hyperVoice"]}},abyssalMaelstrom:{id:"abyssalMaelstrom",name:"Abyssal Maelstrom",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset-water",floors:30,enemySpeciesIds:["blastoise","feraligatr"],floorEnemies:{1:["blastoise"],2:["blastoise"],3:["blastoise","feraligatr"],4:["blastoise","feraligatr"],5:["feraligatr"],6:["feraligatr","blastoise"],7:["blastoise","feraligatr"],8:["feraligatr","blastoise"],9:["blastoise","feraligatr"],10:["feraligatr","blastoise"],11:["blastoise","feraligatr"],12:["feraligatr"],13:["blastoise","feraligatr"],14:["feraligatr","blastoise"],15:["blastoise","feraligatr"],16:["feraligatr","blastoise"],17:["blastoise","feraligatr"],18:["feraligatr","blastoise"],19:["blastoise","feraligatr"],20:["feraligatr","blastoise"],21:["blastoise","feraligatr"],22:["feraligatr","blastoise"],23:["blastoise","feraligatr"],24:["feraligatr","blastoise"],25:["blastoise","feraligatr"],26:["feraligatr","blastoise"],27:["blastoise","feraligatr"],28:["feraligatr","blastoise"],29:["blastoise","feraligatr"],30:["feraligatr","blastoise"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A vortex in the deepest ocean where cannons of water and jaws of iron clash in an eternal maelstrom.",boss:{speciesId:"blastoise",name:"Maelstrom Titan",statMultiplier:16,extraSkillIds:["hydroCannon","shellSmash","originPulse"]}},primordialInferno:{id:"primordialInferno",name:"Primordial Inferno",tilesetPath:"tilesets/dungeon_fire.png",tilesetKey:"tileset-fire",floors:30,enemySpeciesIds:["charizard","delphox"],floorEnemies:{1:["charizard"],2:["charizard"],3:["charizard","delphox"],4:["charizard","delphox"],5:["delphox"],6:["delphox","charizard"],7:["charizard","delphox"],8:["delphox","charizard"],9:["charizard","delphox"],10:["delphox","charizard"],11:["charizard","delphox"],12:["delphox"],13:["charizard","delphox"],14:["delphox","charizard"],15:["charizard","delphox"],16:["delphox","charizard"],17:["charizard","delphox"],18:["delphox","charizard"],19:["charizard","delphox"],20:["delphox","charizard"],21:["charizard","delphox"],22:["delphox","charizard"],23:["charizard","delphox"],24:["delphox","charizard"],25:["charizard","delphox"],26:["delphox","charizard"],27:["charizard","delphox"],28:["delphox","charizard"],29:["charizard","delphox"],30:["delphox","charizard"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The origin of all flames where draconic fire and mystic infernos rage in a realm of pure destruction.",boss:{speciesId:"charizard",name:"Primordial Blaze",statMultiplier:16,extraSkillIds:["blastBurn","dragonAscent","airSlash"]}},yggdrasilRoot:{id:"yggdrasilRoot",name:"Yggdrasil Root",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset-grass",floors:30,enemySpeciesIds:["torterra","serperior"],floorEnemies:{1:["torterra"],2:["torterra"],3:["torterra","serperior"],4:["torterra","serperior"],5:["serperior"],6:["serperior","torterra"],7:["torterra","serperior"],8:["serperior","torterra"],9:["torterra","serperior"],10:["serperior","torterra"],11:["torterra","serperior"],12:["serperior"],13:["torterra","serperior"],14:["serperior","torterra"],15:["torterra","serperior"],16:["serperior","torterra"],17:["torterra","serperior"],18:["serperior","torterra"],19:["torterra","serperior"],20:["serperior","torterra"],21:["torterra","serperior"],22:["serperior","torterra"],23:["torterra","serperior"],24:["serperior","torterra"],25:["torterra","serperior"],26:["serperior","torterra"],27:["torterra","serperior"],28:["serperior","torterra"],29:["torterra","serperior"],30:["serperior","torterra"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The primordial roots of the World Tree where continent-bearing turtles and regal serpents guard nature's deepest secrets.",boss:{speciesId:"torterra",name:"World Root Guardian",statMultiplier:16,extraSkillIds:["woodHammer","earthquake","frenzyPlant"]}},voltexPinnacle:{id:"voltexPinnacle",name:"Voltex Pinnacle",tilesetPath:"tilesets/dungeon_electric.png",tilesetKey:"tileset-electric",floors:30,enemySpeciesIds:["electivire","luxray"],floorEnemies:{1:["electivire"],2:["electivire"],3:["electivire","luxray"],4:["electivire","luxray"],5:["luxray"],6:["luxray","electivire"],7:["electivire","luxray"],8:["luxray","electivire"],9:["electivire","luxray"],10:["luxray","electivire"],11:["electivire","luxray"],12:["luxray"],13:["electivire","luxray"],14:["luxray","electivire"],15:["electivire","luxray"],16:["luxray","electivire"],17:["electivire","luxray"],18:["luxray","electivire"],19:["electivire","luxray"],20:["luxray","electivire"],21:["electivire","luxray"],22:["luxray","electivire"],23:["electivire","luxray"],24:["luxray","electivire"],25:["electivire","luxray"],26:["luxray","electivire"],27:["electivire","luxray"],28:["luxray","electivire"],29:["electivire","luxray"],30:["luxray","electivire"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The highest lightning spire where thunderstorms never cease and electric predators rule the crackling skies.",boss:{speciesId:"electivire",name:"Voltex Overlord",statMultiplier:16,extraSkillIds:["thunder","voltTackle","crossChop"]}},miasmaticCore:{id:"miasmaticCore",name:"Miasmatic Core",tilesetPath:"tilesets/dungeon_poison.png",tilesetKey:"tileset-poison",floors:30,enemySpeciesIds:["roserade","vileplume"],floorEnemies:{1:["roserade"],2:["roserade"],3:["roserade","vileplume"],4:["roserade","vileplume"],5:["vileplume"],6:["vileplume","roserade"],7:["roserade","vileplume"],8:["vileplume","roserade"],9:["roserade","vileplume"],10:["vileplume","roserade"],11:["roserade","vileplume"],12:["vileplume"],13:["roserade","vileplume"],14:["vileplume","roserade"],15:["roserade","vileplume"],16:["vileplume","roserade"],17:["roserade","vileplume"],18:["vileplume","roserade"],19:["roserade","vileplume"],20:["vileplume","roserade"],21:["roserade","vileplume"],22:["vileplume","roserade"],23:["roserade","vileplume"],24:["vileplume","roserade"],25:["roserade","vileplume"],26:["vileplume","roserade"],27:["roserade","vileplume"],28:["vileplume","roserade"],29:["roserade","vileplume"],30:["vileplume","roserade"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The toxic heart of the earth where elegant assassins and spore queens reign over an ocean of lethal miasma.",boss:{speciesId:"roserade",name:"Miasma Empress",statMultiplier:16,extraSkillIds:["toxicWave","sludgeWave","energyBall"]}},pangaeaFault:{id:"pangaeaFault",name:"Pangaea Fault",tilesetPath:"tilesets/dungeon_ground.png",tilesetKey:"tileset-ground",floors:30,enemySpeciesIds:["rhyperior","dugtrio"],floorEnemies:{1:["rhyperior"],2:["rhyperior"],3:["rhyperior","dugtrio"],4:["rhyperior","dugtrio"],5:["dugtrio"],6:["dugtrio","rhyperior"],7:["rhyperior","dugtrio"],8:["dugtrio","rhyperior"],9:["rhyperior","dugtrio"],10:["dugtrio","rhyperior"],11:["rhyperior","dugtrio"],12:["dugtrio"],13:["rhyperior","dugtrio"],14:["dugtrio","rhyperior"],15:["rhyperior","dugtrio"],16:["dugtrio","rhyperior"],17:["rhyperior","dugtrio"],18:["dugtrio","rhyperior"],19:["rhyperior","dugtrio"],20:["dugtrio","rhyperior"],21:["rhyperior","dugtrio"],22:["dugtrio","rhyperior"],23:["rhyperior","dugtrio"],24:["dugtrio","rhyperior"],25:["rhyperior","dugtrio"],26:["dugtrio","rhyperior"],27:["rhyperior","dugtrio"],28:["dugtrio","rhyperior"],29:["rhyperior","dugtrio"],30:["dugtrio","rhyperior"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The continental fracture zone where armored behemoths and tunnel kings carve through the planet's deepest strata.",boss:{speciesId:"rhyperior",name:"Pangaea Colossus",statMultiplier:16,extraSkillIds:["fissure","tectonicRage","stoneEdge"]}},titansGeode:{id:"titansGeode",name:"Titan's Geode",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset-rock",floors:30,enemySpeciesIds:["golem","terrakion"],floorEnemies:{1:["golem"],2:["golem"],3:["golem","terrakion"],4:["golem","terrakion"],5:["terrakion"],6:["terrakion","golem"],7:["golem","terrakion"],8:["terrakion","golem"],9:["golem","terrakion"],10:["terrakion","golem"],11:["golem","terrakion"],12:["terrakion"],13:["golem","terrakion"],14:["terrakion","golem"],15:["golem","terrakion"],16:["terrakion","golem"],17:["golem","terrakion"],18:["terrakion","golem"],19:["golem","terrakion"],20:["terrakion","golem"],21:["golem","terrakion"],22:["terrakion","golem"],23:["golem","terrakion"],24:["terrakion","golem"],25:["golem","terrakion"],26:["terrakion","golem"],27:["golem","terrakion"],28:["terrakion","golem"],29:["golem","terrakion"],30:["terrakion","golem"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A colossal crystalline geode where ancient rock titans dwell, their footsteps shaking the very foundations of the earth.",boss:{speciesId:"terrakion",name:"Geode Titan",statMultiplier:16,extraSkillIds:["sacredSword","diamondStorm","closeCombat"]}},sovereignHive:{id:"sovereignHive",name:"Sovereign Hive",tilesetPath:"tilesets/dungeon_bug.png",tilesetKey:"tileset-bug",floors:30,enemySpeciesIds:["pheromosa","escavalier"],floorEnemies:{1:["escavalier"],2:["escavalier"],3:["escavalier","pheromosa"],4:["escavalier","pheromosa"],5:["pheromosa"],6:["pheromosa","escavalier"],7:["escavalier","pheromosa"],8:["pheromosa","escavalier"],9:["escavalier","pheromosa"],10:["pheromosa","escavalier"],11:["escavalier","pheromosa"],12:["pheromosa"],13:["escavalier","pheromosa"],14:["pheromosa","escavalier"],15:["escavalier","pheromosa"],16:["pheromosa","escavalier"],17:["escavalier","pheromosa"],18:["pheromosa","escavalier"],19:["escavalier","pheromosa"],20:["pheromosa","escavalier"],21:["escavalier","pheromosa"],22:["pheromosa","escavalier"],23:["escavalier","pheromosa"],24:["pheromosa","escavalier"],25:["escavalier","pheromosa"],26:["pheromosa","escavalier"],27:["escavalier","pheromosa"],28:["pheromosa","escavalier"],29:["escavalier","pheromosa"],30:["pheromosa","escavalier"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The supreme hive of an ultra-dimensional insect kingdom, ruled by lightning-fast hunters and steel-clad knights.",boss:{speciesId:"pheromosa",name:"Hive Sovereign",statMultiplier:16,extraSkillIds:["highJumpKick","bugBuzz","tripleAxel"]}},apexColosseum:{id:"apexColosseum",name:"Apex Colosseum",tilesetPath:"tilesets/dungeon_fighting.png",tilesetKey:"tileset-fighting",floors:30,enemySpeciesIds:["kommoo","gallade"],floorEnemies:{1:["gallade"],2:["gallade"],3:["gallade","kommoo"],4:["gallade","kommoo"],5:["kommoo"],6:["kommoo","gallade"],7:["gallade","kommoo"],8:["kommoo","gallade"],9:["gallade","kommoo"],10:["kommoo","gallade"],11:["gallade","kommoo"],12:["kommoo"],13:["gallade","kommoo"],14:["kommoo","gallade"],15:["gallade","kommoo"],16:["kommoo","gallade"],17:["gallade","kommoo"],18:["kommoo","gallade"],19:["gallade","kommoo"],20:["kommoo","gallade"],21:["gallade","kommoo"],22:["kommoo","gallade"],23:["gallade","kommoo"],24:["kommoo","gallade"],25:["gallade","kommoo"],26:["kommoo","gallade"],27:["gallade","kommoo"],28:["kommoo","gallade"],29:["gallade","kommoo"],30:["kommoo","gallade"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The ultimate arena where dragon-scaled warriors and psychic blade masters clash in an eternal tournament of champions.",boss:{speciesId:"kommoo",name:"Apex Champion",statMultiplier:16,extraSkillIds:["clangorousSoul","closeCombat","dragonClaw"]}},adamantineCitadel:{id:"adamantineCitadel",name:"Adamantine Citadel",tilesetPath:"tilesets/dungeon_steel.png",tilesetKey:"tileset-steel",floors:30,enemySpeciesIds:["corviknight","bastiodon"],floorEnemies:{1:["corviknight"],2:["corviknight"],3:["corviknight","bastiodon"],4:["corviknight","bastiodon"],5:["bastiodon"],6:["bastiodon","corviknight"],7:["corviknight","bastiodon"],8:["bastiodon","corviknight"],9:["corviknight","bastiodon"],10:["bastiodon","corviknight"],11:["corviknight","bastiodon"],12:["bastiodon"],13:["corviknight","bastiodon"],14:["bastiodon","corviknight"],15:["corviknight","bastiodon"],16:["bastiodon","corviknight"],17:["corviknight","bastiodon"],18:["bastiodon","corviknight"],19:["corviknight","bastiodon"],20:["bastiodon","corviknight"],21:["corviknight","bastiodon"],22:["bastiodon","corviknight"],23:["corviknight","bastiodon"],24:["bastiodon","corviknight"],25:["corviknight","bastiodon"],26:["bastiodon","corviknight"],27:["corviknight","bastiodon"],28:["bastiodon","corviknight"],29:["corviknight","bastiodon"],30:["bastiodon","corviknight"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"An impenetrable fortress of living metal where armored ravens patrol the skies and shield-faced sentinels guard every corridor.",boss:{speciesId:"corviknight",name:"Adamantine Warden",statMultiplier:16,extraSkillIds:["braveBird","ironHead","bodySlam"]}},etherealSanctum:{id:"etherealSanctum",name:"Ethereal Sanctum",tilesetPath:"tilesets/dungeon_ghost.png",tilesetKey:"tileset-ghost",floors:30,enemySpeciesIds:["aegislash","jellicent"],floorEnemies:{1:["aegislash"],2:["aegislash"],3:["aegislash","jellicent"],4:["aegislash","jellicent"],5:["jellicent"],6:["jellicent","aegislash"],7:["aegislash","jellicent"],8:["jellicent","aegislash"],9:["aegislash","jellicent"],10:["jellicent","aegislash"],11:["aegislash","jellicent"],12:["jellicent"],13:["aegislash","jellicent"],14:["jellicent","aegislash"],15:["aegislash","jellicent"],16:["jellicent","aegislash"],17:["aegislash","jellicent"],18:["jellicent","aegislash"],19:["aegislash","jellicent"],20:["jellicent","aegislash"],21:["aegislash","jellicent"],22:["jellicent","aegislash"],23:["aegislash","jellicent"],24:["jellicent","aegislash"],25:["aegislash","jellicent"],26:["jellicent","aegislash"],27:["aegislash","jellicent"],28:["jellicent","aegislash"],29:["aegislash","jellicent"],30:["jellicent","aegislash"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A sanctum between worlds where spectral swords stand vigil and phantom jellyfish drift through halls of eternal twilight.",boss:{speciesId:"aegislash",name:"Ethereal Blade King",statMultiplier:16,extraSkillIds:["shadowBall","sacredSword","kingsShield"]}},transcendenceSpire:{id:"transcendenceSpire",name:"Transcendence Spire",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset-psychic",floors:30,enemySpeciesIds:["slowking","bronzong"],floorEnemies:{1:["slowking"],2:["slowking"],3:["slowking","bronzong"],4:["slowking","bronzong"],5:["bronzong"],6:["bronzong","slowking"],7:["slowking","bronzong"],8:["bronzong","slowking"],9:["slowking","bronzong"],10:["bronzong","slowking"],11:["slowking","bronzong"],12:["bronzong"],13:["slowking","bronzong"],14:["bronzong","slowking"],15:["slowking","bronzong"],16:["bronzong","slowking"],17:["slowking","bronzong"],18:["bronzong","slowking"],19:["slowking","bronzong"],20:["bronzong","slowking"],21:["slowking","bronzong"],22:["bronzong","slowking"],23:["slowking","bronzong"],24:["bronzong","slowking"],25:["slowking","bronzong"],26:["bronzong","slowking"],27:["slowking","bronzong"],28:["bronzong","slowking"],29:["slowking","bronzong"],30:["bronzong","slowking"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A spire of pure psychic energy where regal mind-kings and ancient bell guardians transcend the boundaries of thought itself.",boss:{speciesId:"slowking",name:"Transcendent Sage",statMultiplier:16,extraSkillIds:["psychic","futuresight","surf"]}},frozenNether:{id:"frozenNether",name:"Frozen Nether",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset-ice",floors:30,enemySpeciesIds:["froslass","abomasnow"],floorEnemies:{1:["froslass"],2:["froslass"],3:["froslass","abomasnow"],4:["froslass","abomasnow"],5:["abomasnow"],6:["abomasnow","froslass"],7:["froslass","abomasnow"],8:["abomasnow","froslass"],9:["froslass","abomasnow"],10:["abomasnow","froslass"],11:["froslass","abomasnow"],12:["abomasnow"],13:["froslass","abomasnow"],14:["abomasnow","froslass"],15:["froslass","abomasnow"],16:["abomasnow","froslass"],17:["froslass","abomasnow"],18:["abomasnow","froslass"],19:["froslass","abomasnow"],20:["abomasnow","froslass"],21:["froslass","abomasnow"],22:["abomasnow","froslass"],23:["froslass","abomasnow"],24:["abomasnow","froslass"],25:["froslass","abomasnow"],26:["abomasnow","froslass"],27:["froslass","abomasnow"],28:["abomasnow","froslass"],29:["froslass","abomasnow"],30:["abomasnow","froslass"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A frozen underworld where spectral ice maidens drift through eternal blizzards and frost-covered giants guard the deepest chambers.",boss:{speciesId:"froslass",name:"Nether Frost Queen",statMultiplier:16,extraSkillIds:["blizzard","shadowBall","destinyBond"]}},abyssalEclipse:{id:"abyssalEclipse",name:"Abyssal Eclipse",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset-dark",floors:30,enemySpeciesIds:["sharpedo","zoroark"],floorEnemies:{1:["zoroark"],2:["zoroark"],3:["zoroark","sharpedo"],4:["zoroark","sharpedo"],5:["sharpedo"],6:["sharpedo","zoroark"],7:["zoroark","sharpedo"],8:["sharpedo","zoroark"],9:["zoroark","sharpedo"],10:["sharpedo","zoroark"],11:["zoroark","sharpedo"],12:["sharpedo"],13:["zoroark","sharpedo"],14:["sharpedo","zoroark"],15:["zoroark","sharpedo"],16:["sharpedo","zoroark"],17:["zoroark","sharpedo"],18:["sharpedo","zoroark"],19:["zoroark","sharpedo"],20:["sharpedo","zoroark"],21:["zoroark","sharpedo"],22:["sharpedo","zoroark"],23:["zoroark","sharpedo"],24:["sharpedo","zoroark"],25:["zoroark","sharpedo"],26:["sharpedo","zoroark"],27:["zoroark","sharpedo"],28:["sharpedo","zoroark"],29:["zoroark","sharpedo"],30:["sharpedo","zoroark"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A realm of perpetual eclipse where illusionist foxes weave nightmares and razor-fanged predators hunt in absolute darkness.",boss:{speciesId:"zoroark",name:"Eclipse Phantom",statMultiplier:16,extraSkillIds:["nightDaze","darkPulse","nastyPlot"]}},radiantCrystalGarden:{id:"radiantCrystalGarden",name:"Radiant Crystal Garden",tilesetPath:"tilesets/dungeon_fairy.png",tilesetKey:"tileset-fairy",floors:30,enemySpeciesIds:["primarina","diancie"],floorEnemies:{1:["primarina"],2:["primarina"],3:["primarina","diancie"],4:["primarina","diancie"],5:["diancie"],6:["diancie","primarina"],7:["primarina","diancie"],8:["diancie","primarina"],9:["primarina","diancie"],10:["diancie","primarina"],11:["primarina","diancie"],12:["diancie"],13:["primarina","diancie"],14:["diancie","primarina"],15:["primarina","diancie"],16:["diancie","primarina"],17:["primarina","diancie"],18:["diancie","primarina"],19:["primarina","diancie"],20:["diancie","primarina"],21:["primarina","diancie"],22:["diancie","primarina"],23:["primarina","diancie"],24:["diancie","primarina"],25:["primarina","diancie"],26:["diancie","primarina"],27:["primarina","diancie"],28:["diancie","primarina"],29:["primarina","diancie"],30:["diancie","primarina"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A magnificent garden of living crystals where songstress mermaids perform enchanting melodies and diamond princesses radiate prismatic light.",boss:{speciesId:"diancie",name:"Crystal Garden Sovereign",statMultiplier:16,extraSkillIds:["diamondStorm","moonblast","dazzlingGleam"]}},voidDragonSpire:{id:"voidDragonSpire",name:"Void Dragon Spire",tilesetPath:"tilesets/dungeon_dragon.png",tilesetKey:"tileset-dragon",floors:30,enemySpeciesIds:["dragapult","duraludon"],floorEnemies:{1:["duraludon"],2:["duraludon"],3:["duraludon","dragapult"],4:["duraludon","dragapult"],5:["dragapult"],6:["dragapult","duraludon"],7:["duraludon","dragapult"],8:["dragapult","duraludon"],9:["duraludon","dragapult"],10:["dragapult","duraludon"],11:["duraludon","dragapult"],12:["dragapult"],13:["duraludon","dragapult"],14:["dragapult","duraludon"],15:["duraludon","dragapult"],16:["dragapult","duraludon"],17:["duraludon","dragapult"],18:["dragapult","duraludon"],19:["duraludon","dragapult"],20:["dragapult","duraludon"],21:["duraludon","dragapult"],22:["dragapult","duraludon"],23:["duraludon","dragapult"],24:["dragapult","duraludon"],25:["duraludon","dragapult"],26:["dragapult","duraludon"],27:["duraludon","dragapult"],28:["dragapult","duraludon"],29:["duraludon","dragapult"],30:["dragapult","duraludon"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A spire piercing the boundary between dimensions where phantom dragons phase through walls and steel-clad wyrms guard the void between worlds.",boss:{speciesId:"dragapult",name:"Void Phantom Dragon",statMultiplier:16,extraSkillIds:["dragonDarts","shadowBall","phantomForce"]}},celestialGalefort:{id:"celestialGalefort",name:"Celestial Galefort",tilesetPath:"tilesets/dungeon_flying.png",tilesetKey:"tileset-flying",floors:30,enemySpeciesIds:["swellow","talonflame"],floorEnemies:{1:["swellow"],2:["swellow"],3:["swellow","talonflame"],4:["swellow","talonflame"],5:["talonflame"],6:["talonflame","swellow"],7:["swellow","talonflame"],8:["talonflame","swellow"],9:["swellow","talonflame"],10:["talonflame","swellow"],11:["swellow","talonflame"],12:["talonflame"],13:["swellow","talonflame"],14:["talonflame","swellow"],15:["swellow","talonflame"],16:["talonflame","swellow"],17:["swellow","talonflame"],18:["talonflame","swellow"],19:["swellow","talonflame"],20:["talonflame","swellow"],21:["swellow","talonflame"],22:["talonflame","swellow"],23:["swellow","talonflame"],24:["talonflame","swellow"],25:["swellow","talonflame"],26:["talonflame","swellow"],27:["swellow","talonflame"],28:["talonflame","swellow"],29:["swellow","talonflame"],30:["talonflame","swellow"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"A fortress built upon the highest gales where swift falcons command the winds and blazing hawks set the sky ablaze.",boss:{speciesId:"talonflame",name:"Galefort Blazehawk",statMultiplier:16,extraSkillIds:["braveBird","flareBlitz","flamethrower"]}},primordialColossus:{id:"primordialColossus",name:"Primordial Colossus",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset-normal",floors:30,enemySpeciesIds:["slaking","lopunny"],floorEnemies:{1:["lopunny"],2:["lopunny"],3:["lopunny","slaking"],4:["lopunny","slaking"],5:["slaking"],6:["slaking","lopunny"],7:["lopunny","slaking"],8:["slaking","lopunny"],9:["lopunny","slaking"],10:["slaking","lopunny"],11:["lopunny","slaking"],12:["slaking"],13:["lopunny","slaking"],14:["slaking","lopunny"],15:["lopunny","slaking"],16:["slaking","lopunny"],17:["lopunny","slaking"],18:["slaking","lopunny"],19:["lopunny","slaking"],20:["slaking","lopunny"],21:["lopunny","slaking"],22:["slaking","lopunny"],23:["lopunny","slaking"],24:["slaking","lopunny"],25:["lopunny","slaking"],26:["slaking","lopunny"],27:["lopunny","slaking"],28:["slaking","lopunny"],29:["lopunny","slaking"],30:["slaking","lopunny"]},difficulty:6.5,itemsPerFloor:6,unlockClears:45,description:"The domain of a primordial giant where unstoppable brutes and agile fighters clash in an ancient proving ground beyond civilization.",boss:{speciesId:"slaking",name:"Primordial Titan",statMultiplier:16,extraSkillIds:["gigaImpact","hammerArm","earthquake"]}},oceanSovereignty:{id:"oceanSovereignty",name:"Ocean Sovereignty",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset-water",floors:32,enemySpeciesIds:["suicune","lugia"],floorEnemies:{1:["suicune"],2:["suicune"],3:["suicune","lugia"],4:["suicune","lugia"],5:["lugia"],6:["lugia","suicune"],7:["suicune","lugia"],8:["lugia","suicune"],9:["suicune","lugia"],10:["lugia","suicune"],11:["suicune","lugia"],12:["lugia"],13:["suicune","lugia"],14:["lugia","suicune"],15:["suicune","lugia"],16:["lugia","suicune"],17:["suicune","lugia"],18:["lugia","suicune"],19:["suicune","lugia"],20:["lugia","suicune"],21:["suicune","lugia"],22:["lugia","suicune"],23:["suicune","lugia"],24:["lugia","suicune"],25:["suicune","lugia"],26:["lugia","suicune"],27:["suicune","lugia"],28:["lugia","suicune"],29:["suicune","lugia"],30:["lugia","suicune"],31:["suicune","lugia"],32:["lugia","suicune"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"The sunken throne of the ocean where the north wind's beast patrols frozen tides and the guardian of the sea commands abyssal storms.",boss:{speciesId:"lugia",name:"Abyssal Sea Guardian",statMultiplier:18,extraSkillIds:["aeroblast","tidalCrush","calmMind"]}},sacredPyre:{id:"sacredPyre",name:"Sacred Pyre",tilesetPath:"tilesets/dungeon_fire.png",tilesetKey:"tileset-fire",floors:32,enemySpeciesIds:["entei","hooh"],floorEnemies:{1:["entei"],2:["entei"],3:["entei","hooh"],4:["entei","hooh"],5:["hooh"],6:["hooh","entei"],7:["entei","hooh"],8:["hooh","entei"],9:["entei","hooh"],10:["hooh","entei"],11:["entei","hooh"],12:["hooh"],13:["entei","hooh"],14:["hooh","entei"],15:["entei","hooh"],16:["hooh","entei"],17:["entei","hooh"],18:["hooh","entei"],19:["entei","hooh"],20:["hooh","entei"],21:["entei","hooh"],22:["hooh","entei"],23:["entei","hooh"],24:["hooh","entei"],25:["entei","hooh"],26:["hooh","entei"],27:["entei","hooh"],28:["hooh","entei"],29:["entei","hooh"],30:["hooh","entei"],31:["entei","hooh"],32:["hooh","entei"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A sacred cremation tower where the volcano beast's roar shakes the foundations and the rainbow phoenix reigns above eternal sacred flames.",boss:{speciesId:"hooh",name:"Sacred Rainbow Phoenix",statMultiplier:18,extraSkillIds:["sacredBlaze","holyDive","recover"]}},timelessGrove:{id:"timelessGrove",name:"Timeless Grove",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset-grass",floors:32,enemySpeciesIds:["celebi","virizion"],floorEnemies:{1:["celebi"],2:["celebi"],3:["celebi","virizion"],4:["celebi","virizion"],5:["virizion"],6:["virizion","celebi"],7:["celebi","virizion"],8:["virizion","celebi"],9:["celebi","virizion"],10:["virizion","celebi"],11:["celebi","virizion"],12:["virizion"],13:["celebi","virizion"],14:["virizion","celebi"],15:["celebi","virizion"],16:["virizion","celebi"],17:["celebi","virizion"],18:["virizion","celebi"],19:["celebi","virizion"],20:["virizion","celebi"],21:["celebi","virizion"],22:["virizion","celebi"],23:["celebi","virizion"],24:["virizion","celebi"],25:["celebi","virizion"],26:["virizion","celebi"],27:["celebi","virizion"],28:["virizion","celebi"],29:["celebi","virizion"],30:["virizion","celebi"],31:["celebi","virizion"],32:["virizion","celebi"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"An ancient forest frozen in time where the voice of the forest flits between moments and the grassland musketeer stands as nature's eternal guardian.",boss:{speciesId:"celebi",name:"Chrono Forest Spirit",statMultiplier:18,extraSkillIds:["verdantWrath","healingWish","frenzyPlant"]}},thunderSovereignty:{id:"thunderSovereignty",name:"Thunder Sovereignty",tilesetPath:"tilesets/dungeon_electric.png",tilesetKey:"tileset-electric",floors:32,enemySpeciesIds:["raikou","zekrom"],floorEnemies:{1:["raikou"],2:["raikou"],3:["raikou","zekrom"],4:["raikou","zekrom"],5:["zekrom"],6:["zekrom","raikou"],7:["raikou","zekrom"],8:["zekrom","raikou"],9:["raikou","zekrom"],10:["zekrom","raikou"],11:["raikou","zekrom"],12:["zekrom"],13:["raikou","zekrom"],14:["zekrom","raikou"],15:["raikou","zekrom"],16:["zekrom","raikou"],17:["raikou","zekrom"],18:["zekrom","raikou"],19:["raikou","zekrom"],20:["zekrom","raikou"],21:["raikou","zekrom"],22:["zekrom","raikou"],23:["raikou","zekrom"],24:["zekrom","raikou"],25:["raikou","zekrom"],26:["zekrom","raikou"],27:["raikou","zekrom"],28:["zekrom","raikou"],29:["raikou","zekrom"],30:["zekrom","raikou"],31:["raikou","zekrom"],32:["zekrom","raikou"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A crackling spire of pure electrical energy where the thunder beast races through corridors of lightning and the deep black dragon embodies ideals made manifest.",boss:{speciesId:"zekrom",name:"Ideal Thunder Dragon",statMultiplier:18,extraSkillIds:["fusionBolt","boltStrike","thunder"]}},ultraVenomNexus:{id:"ultraVenomNexus",name:"Ultra Venom Nexus",tilesetPath:"tilesets/dungeon_poison.png",tilesetKey:"tileset-poison",floors:32,enemySpeciesIds:["nihilego","naganadel"],floorEnemies:{1:["nihilego"],2:["nihilego"],3:["nihilego","naganadel"],4:["nihilego","naganadel"],5:["naganadel"],6:["naganadel","nihilego"],7:["nihilego","naganadel"],8:["naganadel","nihilego"],9:["nihilego","naganadel"],10:["naganadel","nihilego"],11:["nihilego","naganadel"],12:["naganadel"],13:["nihilego","naganadel"],14:["naganadel","nihilego"],15:["nihilego","naganadel"],16:["naganadel","nihilego"],17:["nihilego","naganadel"],18:["naganadel","nihilego"],19:["nihilego","naganadel"],20:["naganadel","nihilego"],21:["nihilego","naganadel"],22:["naganadel","nihilego"],23:["nihilego","naganadel"],24:["naganadel","nihilego"],25:["nihilego","naganadel"],26:["naganadel","nihilego"],27:["nihilego","naganadel"],28:["naganadel","nihilego"],29:["nihilego","naganadel"],30:["naganadel","nihilego"],31:["nihilego","naganadel"],32:["naganadel","nihilego"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A rift between dimensions where Ultra Beasts prowl  the parasitic jellyfish drifts through toxic haze and the poison dragon streaks through corrosive portals.",boss:{speciesId:"naganadel",name:"Ultra Venom Wyrm",statMultiplier:18,extraSkillIds:["venomStorm","toxicDeluge","beastBoost"]}},pangaeaThrone:{id:"pangaeaThrone",name:"Pangaea Throne",tilesetPath:"tilesets/dungeon_ground.png",tilesetKey:"tileset-ground",floors:32,enemySpeciesIds:["groudon","landorus"],floorEnemies:{1:["landorus"],2:["landorus"],3:["landorus","groudon"],4:["landorus","groudon"],5:["groudon"],6:["groudon","landorus"],7:["landorus","groudon"],8:["groudon","landorus"],9:["landorus","groudon"],10:["groudon","landorus"],11:["landorus","groudon"],12:["groudon"],13:["landorus","groudon"],14:["groudon","landorus"],15:["landorus","groudon"],16:["groudon","landorus"],17:["landorus","groudon"],18:["groudon","landorus"],19:["landorus","groudon"],20:["groudon","landorus"],21:["landorus","groudon"],22:["groudon","landorus"],23:["landorus","groudon"],24:["groudon","landorus"],25:["landorus","groudon"],26:["groudon","landorus"],27:["landorus","groudon"],28:["groudon","landorus"],29:["landorus","groudon"],30:["groudon","landorus"],31:["landorus","groudon"],32:["groudon","landorus"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"The primordial throne of the earth itself where the continent-shaping titan guards the molten core and the land spirit commands storms of sand and stone.",boss:{speciesId:"groudon",name:"Primordial Earth Titan",statMultiplier:18,extraSkillIds:["continentalCrush","precipiceBlades","earthShatter"]}},petrifiedColossus:{id:"petrifiedColossus",name:"Petrified Colossus",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset-rock",floors:32,enemySpeciesIds:["regirock","stakataka"],floorEnemies:{1:["regirock"],2:["regirock"],3:["regirock","stakataka"],4:["regirock","stakataka"],5:["stakataka"],6:["stakataka","regirock"],7:["regirock","stakataka"],8:["stakataka","regirock"],9:["regirock","stakataka"],10:["stakataka","regirock"],11:["regirock","stakataka"],12:["stakataka"],13:["regirock","stakataka"],14:["stakataka","regirock"],15:["regirock","stakataka"],16:["stakataka","regirock"],17:["regirock","stakataka"],18:["stakataka","regirock"],19:["regirock","stakataka"],20:["stakataka","regirock"],21:["regirock","stakataka"],22:["stakataka","regirock"],23:["regirock","stakataka"],24:["stakataka","regirock"],25:["regirock","stakataka"],26:["stakataka","regirock"],27:["regirock","stakataka"],28:["stakataka","regirock"],29:["regirock","stakataka"],30:["stakataka","regirock"],31:["regirock","stakataka"],32:["stakataka","regirock"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A primordial stone labyrinth where the ancient golem of rock guards petrified corridors and the Ultra Beast wall assembles into an impenetrable fortress of living stone.",boss:{speciesId:"regirock",name:"Primordial Stone Titan",statMultiplier:18,extraSkillIds:["hammeringForce","lockOn","rockWrecker"]}},cyberHive:{id:"cyberHive",name:"Cyber Hive",tilesetPath:"tilesets/dungeon_bug.png",tilesetKey:"tileset-bug",floors:32,enemySpeciesIds:["genesect","buzzwole"],floorEnemies:{1:["genesect"],2:["genesect"],3:["genesect","buzzwole"],4:["genesect","buzzwole"],5:["buzzwole"],6:["buzzwole","genesect"],7:["genesect","buzzwole"],8:["buzzwole","genesect"],9:["genesect","buzzwole"],10:["buzzwole","genesect"],11:["genesect","buzzwole"],12:["buzzwole"],13:["genesect","buzzwole"],14:["buzzwole","genesect"],15:["genesect","buzzwole"],16:["buzzwole","genesect"],17:["genesect","buzzwole"],18:["buzzwole","genesect"],19:["genesect","buzzwole"],20:["buzzwole","genesect"],21:["genesect","buzzwole"],22:["buzzwole","genesect"],23:["genesect","buzzwole"],24:["buzzwole","genesect"],25:["genesect","buzzwole"],26:["buzzwole","genesect"],27:["genesect","buzzwole"],28:["buzzwole","genesect"],29:["genesect","buzzwole"],30:["buzzwole","genesect"],31:["genesect","buzzwole"],32:["buzzwole","genesect"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A fusion of ancient insect nest and ultra-dimensional technology where the cybernetic hunter fires volleys of plasma and the musclebound Ultra Beast flexes through steel bulkheads.",boss:{speciesId:"genesect",name:"Apex Cyber Predator",statMultiplier:18,extraSkillIds:["technoBlast","magnetBomb","xScissor"]}},justiceHall:{id:"justiceHall",name:"Justice Hall",tilesetPath:"tilesets/dungeon_fighting.png",tilesetKey:"tileset-fighting",floors:32,enemySpeciesIds:["cobalion","marshadow"],floorEnemies:{1:["cobalion"],2:["cobalion"],3:["cobalion","marshadow"],4:["cobalion","marshadow"],5:["marshadow"],6:["marshadow","cobalion"],7:["cobalion","marshadow"],8:["marshadow","cobalion"],9:["cobalion","marshadow"],10:["marshadow","cobalion"],11:["cobalion","marshadow"],12:["marshadow"],13:["cobalion","marshadow"],14:["marshadow","cobalion"],15:["cobalion","marshadow"],16:["marshadow","cobalion"],17:["cobalion","marshadow"],18:["marshadow","cobalion"],19:["cobalion","marshadow"],20:["marshadow","cobalion"],21:["cobalion","marshadow"],22:["marshadow","cobalion"],23:["cobalion","marshadow"],24:["marshadow","cobalion"],25:["cobalion","marshadow"],26:["marshadow","cobalion"],27:["cobalion","marshadow"],28:["marshadow","cobalion"],29:["cobalion","marshadow"],30:["marshadow","cobalion"],31:["cobalion","marshadow"],32:["marshadow","cobalion"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A hall of honor where the iron musketeer upholds justice with sacred blade and the gloomshroud phantom strikes from shadows with stolen souls.",boss:{speciesId:"marshadow",name:"Phantom Soul Thief",statMultiplier:18,extraSkillIds:["spectralThief","soulStealing","closeCombat"]}},ironSanctuary:{id:"ironSanctuary",name:"Iron Sanctuary",tilesetPath:"tilesets/dungeon_steel.png",tilesetKey:"tileset-steel",floors:32,enemySpeciesIds:["registeel","solgaleo"],floorEnemies:{1:["registeel"],2:["registeel"],3:["registeel","solgaleo"],4:["registeel","solgaleo"],5:["solgaleo"],6:["solgaleo","registeel"],7:["registeel","solgaleo"],8:["solgaleo","registeel"],9:["registeel","solgaleo"],10:["solgaleo","registeel"],11:["registeel","solgaleo"],12:["solgaleo"],13:["registeel","solgaleo"],14:["solgaleo","registeel"],15:["registeel","solgaleo"],16:["solgaleo","registeel"],17:["registeel","solgaleo"],18:["solgaleo","registeel"],19:["registeel","solgaleo"],20:["solgaleo","registeel"],21:["registeel","solgaleo"],22:["solgaleo","registeel"],23:["registeel","solgaleo"],24:["solgaleo","registeel"],25:["registeel","solgaleo"],26:["solgaleo","registeel"],27:["registeel","solgaleo"],28:["solgaleo","registeel"],29:["registeel","solgaleo"],30:["solgaleo","registeel"],31:["registeel","solgaleo"],32:["solgaleo","registeel"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A sanctuary forged from living metal where the indestructible iron titan stands vigil and the radiant sun beast charges with the force of a solar corona.",boss:{speciesId:"solgaleo",name:"Radiant Sun Emperor",statMultiplier:18,extraSkillIds:["sunsteelStrike","solarFlare","flashCannon"]}},distortionRift:{id:"distortionRift",name:"Distortion Rift",tilesetPath:"tilesets/dungeon_ghost.png",tilesetKey:"tileset-ghost",floors:32,enemySpeciesIds:["giratina","lunala"],floorEnemies:{1:["giratina"],2:["giratina"],3:["giratina","lunala"],4:["giratina","lunala"],5:["lunala"],6:["lunala","giratina"],7:["giratina","lunala"],8:["lunala","giratina"],9:["giratina","lunala"],10:["lunala","giratina"],11:["giratina","lunala"],12:["lunala"],13:["giratina","lunala"],14:["lunala","giratina"],15:["giratina","lunala"],16:["lunala","giratina"],17:["giratina","lunala"],18:["lunala","giratina"],19:["giratina","lunala"],20:["lunala","giratina"],21:["giratina","lunala"],22:["lunala","giratina"],23:["giratina","lunala"],24:["lunala","giratina"],25:["giratina","lunala"],26:["lunala","giratina"],27:["giratina","lunala"],28:["lunala","giratina"],29:["giratina","lunala"],30:["lunala","giratina"],31:["giratina","lunala"],32:["lunala","giratina"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A tear in reality where the renegade dragon of antimatter warps dimensions and the moone beast eclipses all light with its spectral wings.",boss:{speciesId:"giratina",name:"Antimatter Renegade",statMultiplier:18,extraSkillIds:["shadowRend","distortionWave","shadowForce"]}},genesisChamber:{id:"genesisChamber",name:"Genesis Chamber",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset-psychic",floors:32,enemySpeciesIds:["mewtwo","deoxys"],floorEnemies:{1:["mewtwo"],2:["mewtwo"],3:["mewtwo","deoxys"],4:["mewtwo","deoxys"],5:["deoxys"],6:["deoxys","mewtwo"],7:["mewtwo","deoxys"],8:["deoxys","mewtwo"],9:["mewtwo","deoxys"],10:["deoxys","mewtwo"],11:["mewtwo","deoxys"],12:["deoxys"],13:["mewtwo","deoxys"],14:["deoxys","mewtwo"],15:["mewtwo","deoxys"],16:["deoxys","mewtwo"],17:["mewtwo","deoxys"],18:["deoxys","mewtwo"],19:["mewtwo","deoxys"],20:["deoxys","mewtwo"],21:["mewtwo","deoxys"],22:["deoxys","mewtwo"],23:["mewtwo","deoxys"],24:["deoxys","mewtwo"],25:["mewtwo","deoxys"],26:["deoxys","mewtwo"],27:["mewtwo","deoxys"],28:["deoxys","mewtwo"],29:["mewtwo","deoxys"],30:["deoxys","mewtwo"],31:["mewtwo","deoxys"],32:["deoxys","mewtwo"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"The forbidden laboratory of psychic creation where the ultimate genetic weapon unleashes psionic devastation and the cosmic DNA mutant shifts between forms of pure destruction.",boss:{speciesId:"mewtwo",name:"Ultimate Genetic Weapon",statMultiplier:18,extraSkillIds:["psystrike","mindShatter","auraSphere"]}},frozenRegolith:{id:"frozenRegolith",name:"Frozen Regolith",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset-ice",floors:32,enemySpeciesIds:["regice","kyurem"],floorEnemies:{1:["regice"],2:["regice"],3:["regice","kyurem"],4:["regice","kyurem"],5:["kyurem"],6:["kyurem","regice"],7:["regice","kyurem"],8:["kyurem","regice"],9:["regice","kyurem"],10:["kyurem","regice"],11:["regice","kyurem"],12:["kyurem"],13:["regice","kyurem"],14:["kyurem","regice"],15:["regice","kyurem"],16:["kyurem","regice"],17:["regice","kyurem"],18:["kyurem","regice"],19:["regice","kyurem"],20:["kyurem","regice"],21:["regice","kyurem"],22:["kyurem","regice"],23:["regice","kyurem"],24:["kyurem","regice"],25:["regice","kyurem"],26:["kyurem","regice"],27:["regice","kyurem"],28:["kyurem","regice"],29:["regice","kyurem"],30:["kyurem","regice"],31:["regice","kyurem"],32:["kyurem","regice"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A frozen wasteland where the ancient ice golem guards crystalline corridors and the boundary dragon freezes all existence with the chill of absolute zero.",boss:{speciesId:"kyurem",name:"Boundary Dragon of Ice",statMultiplier:18,extraSkillIds:["glaciate","frozenWorld","dracoMeteor"]}},nihilityAbyss:{id:"nihilityAbyss",name:"Nihility Abyss",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset-dark",floors:32,enemySpeciesIds:["yveltal","hoopa"],floorEnemies:{1:["yveltal"],2:["yveltal"],3:["yveltal","hoopa"],4:["yveltal","hoopa"],5:["hoopa"],6:["hoopa","yveltal"],7:["yveltal","hoopa"],8:["hoopa","yveltal"],9:["yveltal","hoopa"],10:["hoopa","yveltal"],11:["yveltal","hoopa"],12:["hoopa"],13:["yveltal","hoopa"],14:["hoopa","yveltal"],15:["yveltal","hoopa"],16:["hoopa","yveltal"],17:["yveltal","hoopa"],18:["hoopa","yveltal"],19:["yveltal","hoopa"],20:["hoopa","yveltal"],21:["yveltal","hoopa"],22:["hoopa","yveltal"],23:["yveltal","hoopa"],24:["hoopa","yveltal"],25:["yveltal","hoopa"],26:["hoopa","yveltal"],27:["yveltal","hoopa"],28:["hoopa","yveltal"],29:["yveltal","hoopa"],30:["hoopa","yveltal"],31:["yveltal","hoopa"],32:["hoopa","yveltal"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A void between dimensions where the destruction cocoon drains all life and the mischief djinn tears open hyperspace portals to unleash chaos.",boss:{speciesId:"yveltal",name:"Cocoon of Destruction",statMultiplier:18,extraSkillIds:["deathWing","oblivionShroud","oblivionWing"]}},eternalGarden:{id:"eternalGarden",name:"Eternal Garden",tilesetPath:"tilesets/dungeon_fairy.png",tilesetKey:"tileset-fairy",floors:32,enemySpeciesIds:["xerneas","magearna"],floorEnemies:{1:["xerneas"],2:["xerneas"],3:["xerneas","magearna"],4:["xerneas","magearna"],5:["magearna"],6:["magearna","xerneas"],7:["xerneas","magearna"],8:["magearna","xerneas"],9:["xerneas","magearna"],10:["magearna","xerneas"],11:["xerneas","magearna"],12:["magearna"],13:["xerneas","magearna"],14:["magearna","xerneas"],15:["xerneas","magearna"],16:["magearna","xerneas"],17:["xerneas","magearna"],18:["magearna","xerneas"],19:["xerneas","magearna"],20:["magearna","xerneas"],21:["xerneas","magearna"],22:["magearna","xerneas"],23:["xerneas","magearna"],24:["magearna","xerneas"],25:["xerneas","magearna"],26:["magearna","xerneas"],27:["xerneas","magearna"],28:["magearna","xerneas"],29:["xerneas","magearna"],30:["magearna","xerneas"],31:["xerneas","magearna"],32:["magearna","xerneas"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"An eternal garden of immortality where the life deer radiates prismatic power and the artificial soul-heart fires devastating fairy cannons.",boss:{speciesId:"xerneas",name:"Tree of Life Incarnate",statMultiplier:18,extraSkillIds:["geomancy","hornLeech","moonblast"]}},temporalSpire:{id:"temporalSpire",name:"Temporal Spire",tilesetPath:"tilesets/dungeon_dragon.png",tilesetKey:"tileset-dragon",floors:32,enemySpeciesIds:["rayquaza","dialga"],floorEnemies:{1:["rayquaza"],2:["rayquaza"],3:["rayquaza","dialga"],4:["rayquaza","dialga"],5:["dialga"],6:["dialga","rayquaza"],7:["rayquaza","dialga"],8:["dialga","rayquaza"],9:["rayquaza","dialga"],10:["dialga","rayquaza"],11:["rayquaza","dialga"],12:["dialga"],13:["rayquaza","dialga"],14:["dialga","rayquaza"],15:["rayquaza","dialga"],16:["dialga","rayquaza"],17:["rayquaza","dialga"],18:["dialga","rayquaza"],19:["rayquaza","dialga"],20:["dialga","rayquaza"],21:["rayquaza","dialga"],22:["dialga","rayquaza"],23:["rayquaza","dialga"],24:["dialga","rayquaza"],25:["rayquaza","dialga"],26:["dialga","rayquaza"],27:["rayquaza","dialga"],28:["dialga","rayquaza"],29:["rayquaza","dialga"],30:["dialga","rayquaza"],31:["rayquaza","dialga"],32:["dialga","rayquaza"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"A spire that pierces through time and space where the sky-high serpent commands the ozone layer and the temporal dragon roars across the ages.",boss:{speciesId:"rayquaza",name:"Sky High Serpent",statMultiplier:18,extraSkillIds:["dragonAscent","skyBreaker","dracoMeteor"]}},stormSovereign:{id:"stormSovereign",name:"Storm Sovereign",tilesetPath:"tilesets/dungeon_flying.png",tilesetKey:"tileset-flying",floors:32,enemySpeciesIds:["tornadus","articuno"],floorEnemies:{1:["tornadus"],2:["tornadus"],3:["tornadus","articuno"],4:["tornadus","articuno"],5:["articuno"],6:["articuno","tornadus"],7:["tornadus","articuno"],8:["articuno","tornadus"],9:["tornadus","articuno"],10:["articuno","tornadus"],11:["tornadus","articuno"],12:["articuno"],13:["tornadus","articuno"],14:["articuno","tornadus"],15:["tornadus","articuno"],16:["articuno","tornadus"],17:["tornadus","articuno"],18:["articuno","tornadus"],19:["tornadus","articuno"],20:["articuno","tornadus"],21:["tornadus","articuno"],22:["articuno","tornadus"],23:["tornadus","articuno"],24:["articuno","tornadus"],25:["tornadus","articuno"],26:["articuno","tornadus"],27:["tornadus","articuno"],28:["articuno","tornadus"],29:["tornadus","articuno"],30:["articuno","tornadus"],31:["tornadus","articuno"],32:["articuno","tornadus"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"The throne of storms where the wind god unleashes devastating tempests and the legendary frost bird blankets the skies in glacial gales.",boss:{speciesId:"tornadus",name:"Incarnate Wind God",statMultiplier:18,extraSkillIds:["windGodSurge","hurricaneForce","hurricane"]}},originHall:{id:"originHall",name:"Origin Hall",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset-normal",floors:32,enemySpeciesIds:["arceus","regigigas"],floorEnemies:{1:["arceus"],2:["arceus"],3:["arceus","regigigas"],4:["arceus","regigigas"],5:["regigigas"],6:["regigigas","arceus"],7:["arceus","regigigas"],8:["regigigas","arceus"],9:["arceus","regigigas"],10:["regigigas","arceus"],11:["arceus","regigigas"],12:["regigigas"],13:["arceus","regigigas"],14:["regigigas","arceus"],15:["arceus","regigigas"],16:["regigigas","arceus"],17:["arceus","regigigas"],18:["regigigas","arceus"],19:["arceus","regigigas"],20:["regigigas","arceus"],21:["arceus","regigigas"],22:["regigigas","arceus"],23:["arceus","regigigas"],24:["regigigas","arceus"],25:["arceus","regigigas"],26:["regigigas","arceus"],27:["arceus","regigigas"],28:["regigigas","arceus"],29:["arceus","regigigas"],30:["regigigas","arceus"],31:["arceus","regigigas"],32:["regigigas","arceus"]},difficulty:7,itemsPerFloor:7,unlockClears:50,description:"The hall of origin where the creator god judges all existence and the colossal titan that towed continents guards the entrance to creation itself.",boss:{speciesId:"arceus",name:"The Original One",statMultiplier:18,extraSkillIds:["judgment","divineDecree","creatorAura"]}},primordialSea:{id:"primordialSea",name:"Primordial Sea",tilesetPath:"tilesets/dungeon_water.png",tilesetKey:"tileset-water",floors:35,enemySpeciesIds:["kyogre","palkia"],floorEnemies:{1:["kyogre"],2:["kyogre"],3:["kyogre","palkia"],4:["kyogre","palkia"],5:["palkia"],6:["palkia","kyogre"],7:["kyogre","palkia"],8:["palkia","kyogre"],9:["kyogre","palkia"],10:["palkia","kyogre"],11:["kyogre","palkia"],12:["palkia"],13:["kyogre","palkia"],14:["palkia","kyogre"],15:["kyogre","palkia"],16:["palkia","kyogre"],17:["kyogre","palkia"],18:["palkia","kyogre"],19:["kyogre","palkia"],20:["palkia","kyogre"],21:["kyogre","palkia"],22:["palkia","kyogre"],23:["kyogre","palkia"],24:["palkia","kyogre"],25:["kyogre","palkia"],26:["palkia","kyogre"],27:["kyogre","palkia"],28:["palkia","kyogre"],29:["kyogre","palkia"],30:["palkia","kyogre"],31:["kyogre","palkia"],32:["palkia","kyogre"],33:["kyogre","palkia"],34:["palkia","kyogre"],35:["kyogre","palkia"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The primordial ocean where the sea god commands endless rain and the spatial dragon rends the fabric of reality beneath the crushing depths.",boss:{speciesId:"kyogre",name:"Primordial Sea God",statMultiplier:20,extraSkillIds:["originPulseMax","primordialSurge","abyssalDeluge"]}},truthPyre:{id:"truthPyre",name:"Truth Pyre",tilesetPath:"tilesets/dungeon_fire.png",tilesetKey:"tileset-fire",floors:35,enemySpeciesIds:["reshiram","victini"],floorEnemies:{1:["reshiram"],2:["reshiram"],3:["reshiram","victini"],4:["reshiram","victini"],5:["victini"],6:["victini","reshiram"],7:["reshiram","victini"],8:["victini","reshiram"],9:["reshiram","victini"],10:["victini","reshiram"],11:["reshiram","victini"],12:["victini"],13:["reshiram","victini"],14:["victini","reshiram"],15:["reshiram","victini"],16:["victini","reshiram"],17:["reshiram","victini"],18:["victini","reshiram"],19:["reshiram","victini"],20:["victini","reshiram"],21:["reshiram","victini"],22:["victini","reshiram"],23:["reshiram","victini"],24:["victini","reshiram"],25:["reshiram","victini"],26:["victini","reshiram"],27:["reshiram","victini"],28:["victini","reshiram"],29:["reshiram","victini"],30:["victini","reshiram"],31:["reshiram","victini"],32:["victini","reshiram"],33:["reshiram","victini"],34:["victini","reshiram"],35:["reshiram","victini"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"A blazing tower of absolute truth where the vast white dragon burns with blue flames and the victory Pokemon ensures no challenger ever prevails.",boss:{speciesId:"reshiram",name:"Vast White Truth",statMultiplier:20,extraSkillIds:["blueFlare","fusionFlare","dracoInferno"]}},eternalMeadow:{id:"eternalMeadow",name:"Eternal Meadow",tilesetPath:"tilesets/dungeon_grass.png",tilesetKey:"tileset-grass",floors:35,enemySpeciesIds:["shaymin","tapuBulu"],floorEnemies:{1:["shaymin"],2:["shaymin"],3:["shaymin","tapuBulu"],4:["shaymin","tapuBulu"],5:["tapuBulu"],6:["tapuBulu","shaymin"],7:["shaymin","tapuBulu"],8:["tapuBulu","shaymin"],9:["shaymin","tapuBulu"],10:["tapuBulu","shaymin"],11:["shaymin","tapuBulu"],12:["tapuBulu"],13:["shaymin","tapuBulu"],14:["tapuBulu","shaymin"],15:["shaymin","tapuBulu"],16:["tapuBulu","shaymin"],17:["shaymin","tapuBulu"],18:["tapuBulu","shaymin"],19:["shaymin","tapuBulu"],20:["tapuBulu","shaymin"],21:["shaymin","tapuBulu"],22:["tapuBulu","shaymin"],23:["shaymin","tapuBulu"],24:["tapuBulu","shaymin"],25:["shaymin","tapuBulu"],26:["tapuBulu","shaymin"],27:["shaymin","tapuBulu"],28:["tapuBulu","shaymin"],29:["shaymin","tapuBulu"],30:["tapuBulu","shaymin"],31:["shaymin","tapuBulu"],32:["tapuBulu","shaymin"],33:["shaymin","tapuBulu"],34:["tapuBulu","shaymin"],35:["shaymin","tapuBulu"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"An eternal meadow of impossible beauty where the gratitude Pokemon blooms endlessly and the guardian deity of the wilds crushes all who defile its sacred ground.",boss:{speciesId:"tapuBulu",name:"Guardian of the Wilds",statMultiplier:20,extraSkillIds:["natureMadness","guardianVerdure","jungleStrike"]}},thunderGodDomain:{id:"thunderGodDomain",name:"Thunder God Domain",tilesetPath:"tilesets/dungeon_electric.png",tilesetKey:"tileset-electric",floors:35,enemySpeciesIds:["thundurus","zeraora"],floorEnemies:{1:["thundurus"],2:["thundurus"],3:["thundurus","zeraora"],4:["thundurus","zeraora"],5:["zeraora"],6:["zeraora","thundurus"],7:["thundurus","zeraora"],8:["zeraora","thundurus"],9:["thundurus","zeraora"],10:["zeraora","thundurus"],11:["thundurus","zeraora"],12:["zeraora"],13:["thundurus","zeraora"],14:["zeraora","thundurus"],15:["thundurus","zeraora"],16:["zeraora","thundurus"],17:["thundurus","zeraora"],18:["zeraora","thundurus"],19:["thundurus","zeraora"],20:["zeraora","thundurus"],21:["thundurus","zeraora"],22:["zeraora","thundurus"],23:["thundurus","zeraora"],24:["zeraora","thundurus"],25:["thundurus","zeraora"],26:["zeraora","thundurus"],27:["thundurus","zeraora"],28:["zeraora","thundurus"],29:["thundurus","zeraora"],30:["zeraora","thundurus"],31:["thundurus","zeraora"],32:["zeraora","thundurus"],33:["thundurus","zeraora"],34:["zeraora","thundurus"],35:["thundurus","zeraora"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The domain of the thunder god where endless lightning storms rage and the thunderclap Pokemon strikes with plasma fists faster than the eye can follow.",boss:{speciesId:"thundurus",name:"Incarnate Thunder God",statMultiplier:20,extraSkillIds:["thunderGodWrath","stormHammer","voltSurge"]}},eternaCore:{id:"eternaCore",name:"Eterna Core",tilesetPath:"tilesets/dungeon_poison.png",tilesetKey:"tileset-poison",floors:35,enemySpeciesIds:["eternatus","poipole"],floorEnemies:{1:["eternatus"],2:["eternatus"],3:["eternatus","poipole"],4:["eternatus","poipole"],5:["poipole"],6:["poipole","eternatus"],7:["eternatus","poipole"],8:["poipole","eternatus"],9:["eternatus","poipole"],10:["poipole","eternatus"],11:["eternatus","poipole"],12:["poipole"],13:["eternatus","poipole"],14:["poipole","eternatus"],15:["eternatus","poipole"],16:["poipole","eternatus"],17:["eternatus","poipole"],18:["poipole","eternatus"],19:["eternatus","poipole"],20:["poipole","eternatus"],21:["eternatus","poipole"],22:["poipole","eternatus"],23:["eternatus","poipole"],24:["poipole","eternatus"],25:["eternatus","poipole"],26:["poipole","eternatus"],27:["eternatus","poipole"],28:["poipole","eternatus"],29:["eternatus","poipole"],30:["poipole","eternatus"],31:["eternatus","poipole"],32:["poipole","eternatus"],33:["eternatus","poipole"],34:["poipole","eternatus"],35:["eternatus","poipole"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The toxic heart of eternity where the skeletal dragon of infinite energy poisons all reality and Ultra Beast larvae swarm with otherworldly venom.",boss:{speciesId:"eternatus",name:"Eternal Poison Dragon",statMultiplier:20,extraSkillIds:["eternaBeamMax","dynamaxCannon","cosmicVenom"]}},orderSanctum:{id:"orderSanctum",name:"Order Sanctum",tilesetPath:"tilesets/dungeon_ground.png",tilesetKey:"tileset-ground",floors:35,enemySpeciesIds:["zygarde","excadrill"],floorEnemies:{1:["zygarde"],2:["zygarde"],3:["zygarde","excadrill"],4:["zygarde","excadrill"],5:["excadrill"],6:["excadrill","zygarde"],7:["zygarde","excadrill"],8:["excadrill","zygarde"],9:["zygarde","excadrill"],10:["excadrill","zygarde"],11:["zygarde","excadrill"],12:["excadrill"],13:["zygarde","excadrill"],14:["excadrill","zygarde"],15:["zygarde","excadrill"],16:["excadrill","zygarde"],17:["zygarde","excadrill"],18:["excadrill","zygarde"],19:["zygarde","excadrill"],20:["excadrill","zygarde"],21:["zygarde","excadrill"],22:["excadrill","zygarde"],23:["zygarde","excadrill"],24:["excadrill","zygarde"],25:["zygarde","excadrill"],26:["excadrill","zygarde"],27:["zygarde","excadrill"],28:["excadrill","zygarde"],29:["zygarde","excadrill"],30:["excadrill","zygarde"],31:["zygarde","excadrill"],32:["excadrill","zygarde"],33:["zygarde","excadrill"],34:["excadrill","zygarde"],35:["zygarde","excadrill"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The sanctum of ecological order deep within the earth where the guardian serpent enforces balance and the master driller tunnels through bedrock like paper.",boss:{speciesId:"zygarde",name:"Complete Order Guardian",statMultiplier:20,extraSkillIds:["thousandArrows","landWrath","coreEnforcer"]}},petrifiedApex:{id:"petrifiedApex",name:"Petrified Apex",tilesetPath:"tilesets/dungeon_rock.png",tilesetKey:"tileset-rock",floors:35,enemySpeciesIds:["lycanroc","gigalith"],floorEnemies:{1:["lycanroc"],2:["lycanroc"],3:["lycanroc","gigalith"],4:["lycanroc","gigalith"],5:["gigalith"],6:["gigalith","lycanroc"],7:["lycanroc","gigalith"],8:["gigalith","lycanroc"],9:["lycanroc","gigalith"],10:["gigalith","lycanroc"],11:["lycanroc","gigalith"],12:["gigalith"],13:["lycanroc","gigalith"],14:["gigalith","lycanroc"],15:["lycanroc","gigalith"],16:["gigalith","lycanroc"],17:["lycanroc","gigalith"],18:["gigalith","lycanroc"],19:["lycanroc","gigalith"],20:["gigalith","lycanroc"],21:["lycanroc","gigalith"],22:["gigalith","lycanroc"],23:["lycanroc","gigalith"],24:["gigalith","lycanroc"],25:["lycanroc","gigalith"],26:["gigalith","lycanroc"],27:["lycanroc","gigalith"],28:["gigalith","lycanroc"],29:["lycanroc","gigalith"],30:["gigalith","lycanroc"],31:["lycanroc","gigalith"],32:["gigalith","lycanroc"],33:["lycanroc","gigalith"],34:["gigalith","lycanroc"],35:["lycanroc","gigalith"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The summit of a petrified mountain where the dusk wolf howls with stone fangs and the compressed crystal titan shatters all who dare climb to the apex.",boss:{speciesId:"lycanroc",name:"Dusk Apex Wolf",statMultiplier:20,extraSkillIds:["stoneFangCrush","accelerock","ancientFangBarrage"]}},primordialHive:{id:"primordialHive",name:"Primordial Hive",tilesetPath:"tilesets/dungeon_bug.png",tilesetKey:"tileset-bug",floors:35,enemySpeciesIds:["volcarona","golisopod"],floorEnemies:{1:["volcarona"],2:["volcarona"],3:["volcarona","golisopod"],4:["volcarona","golisopod"],5:["golisopod"],6:["golisopod","volcarona"],7:["volcarona","golisopod"],8:["golisopod","volcarona"],9:["volcarona","golisopod"],10:["golisopod","volcarona"],11:["volcarona","golisopod"],12:["golisopod"],13:["volcarona","golisopod"],14:["golisopod","volcarona"],15:["volcarona","golisopod"],16:["golisopod","volcarona"],17:["volcarona","golisopod"],18:["golisopod","volcarona"],19:["volcarona","golisopod"],20:["golisopod","volcarona"],21:["volcarona","golisopod"],22:["golisopod","volcarona"],23:["volcarona","golisopod"],24:["golisopod","volcarona"],25:["volcarona","golisopod"],26:["golisopod","volcarona"],27:["volcarona","golisopod"],28:["golisopod","volcarona"],29:["volcarona","golisopod"],30:["golisopod","volcarona"],31:["volcarona","golisopod"],32:["golisopod","volcarona"],33:["volcarona","golisopod"],34:["golisopod","volcarona"],35:["volcarona","golisopod"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"An ancient hive where the sun moth blazes with primordial flame and the armored isopod warlord commands legions of chitinous soldiers.",boss:{speciesId:"volcarona",name:"Primordial Sun Moth",statMultiplier:20,extraSkillIds:["sunMothStorm","fieryDance","solarFlareWings"]}},martialSummit:{id:"martialSummit",name:"Martial Summit",tilesetPath:"tilesets/dungeon_fighting.png",tilesetKey:"tileset-fighting",floors:35,enemySpeciesIds:["urshifu","keldeo"],floorEnemies:{1:["urshifu"],2:["urshifu"],3:["urshifu","keldeo"],4:["urshifu","keldeo"],5:["keldeo"],6:["keldeo","urshifu"],7:["urshifu","keldeo"],8:["keldeo","urshifu"],9:["urshifu","keldeo"],10:["keldeo","urshifu"],11:["urshifu","keldeo"],12:["keldeo"],13:["urshifu","keldeo"],14:["keldeo","urshifu"],15:["urshifu","keldeo"],16:["keldeo","urshifu"],17:["urshifu","keldeo"],18:["keldeo","urshifu"],19:["urshifu","keldeo"],20:["keldeo","urshifu"],21:["urshifu","keldeo"],22:["keldeo","urshifu"],23:["urshifu","keldeo"],24:["keldeo","urshifu"],25:["urshifu","keldeo"],26:["keldeo","urshifu"],27:["urshifu","keldeo"],28:["keldeo","urshifu"],29:["urshifu","keldeo"],30:["keldeo","urshifu"],31:["urshifu","keldeo"],32:["keldeo","urshifu"],33:["urshifu","keldeo"],34:["keldeo","urshifu"],35:["urshifu","keldeo"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The sacred summit of martial mastery where the single-strike bear and the resolute colt of justice wage an eternal war of fists and blades.",boss:{speciesId:"urshifu",name:"Supreme Martial Bear",statMultiplier:20,extraSkillIds:["surgingStrikesMax","wickedBlow","unseeableFist"]}},moltenForge:{id:"moltenForge",name:"Molten Forge",tilesetPath:"tilesets/dungeon_steel.png",tilesetKey:"tileset-steel",floors:35,enemySpeciesIds:["heatran","kartana"],floorEnemies:{1:["heatran"],2:["heatran"],3:["heatran","kartana"],4:["heatran","kartana"],5:["kartana"],6:["kartana","heatran"],7:["heatran","kartana"],8:["kartana","heatran"],9:["heatran","kartana"],10:["kartana","heatran"],11:["heatran","kartana"],12:["kartana"],13:["heatran","kartana"],14:["kartana","heatran"],15:["heatran","kartana"],16:["kartana","heatran"],17:["heatran","kartana"],18:["kartana","heatran"],19:["heatran","kartana"],20:["kartana","heatran"],21:["heatran","kartana"],22:["kartana","heatran"],23:["heatran","kartana"],24:["kartana","heatran"],25:["heatran","kartana"],26:["kartana","heatran"],27:["heatran","kartana"],28:["kartana","heatran"],29:["heatran","kartana"],30:["kartana","heatran"],31:["heatran","kartana"],32:["kartana","heatran"],33:["heatran","kartana"],34:["kartana","heatran"],35:["heatran","kartana"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The molten forge at the earth's core where the lava dome Pokemon melts reality and the Ultra Beast origami blade slices through dimensions of steel.",boss:{speciesId:"heatran",name:"Lava Dome Forgemaster",statMultiplier:20,extraSkillIds:["magmaStorm","flashCannonMax","lavaPlumeSteel"]}},spectralPlains:{id:"spectralPlains",name:"Spectral Plains",tilesetPath:"tilesets/dungeon_ghost.png",tilesetKey:"tileset-ghost",floors:35,enemySpeciesIds:["spectrier","polteageist"],floorEnemies:{1:["spectrier"],2:["spectrier"],3:["spectrier","polteageist"],4:["spectrier","polteageist"],5:["polteageist"],6:["polteageist","spectrier"],7:["spectrier","polteageist"],8:["polteageist","spectrier"],9:["spectrier","polteageist"],10:["polteageist","spectrier"],11:["spectrier","polteageist"],12:["polteageist"],13:["spectrier","polteageist"],14:["polteageist","spectrier"],15:["spectrier","polteageist"],16:["polteageist","spectrier"],17:["spectrier","polteageist"],18:["polteageist","spectrier"],19:["spectrier","polteageist"],20:["polteageist","spectrier"],21:["spectrier","polteageist"],22:["polteageist","spectrier"],23:["spectrier","polteageist"],24:["polteageist","spectrier"],25:["spectrier","polteageist"],26:["polteageist","spectrier"],27:["spectrier","polteageist"],28:["polteageist","spectrier"],29:["spectrier","polteageist"],30:["polteageist","spectrier"],31:["spectrier","polteageist"],32:["polteageist","spectrier"],33:["spectrier","polteageist"],34:["polteageist","spectrier"],35:["spectrier","polteageist"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"Endless ghostly plains where the spectral steed gallops through nightmares and the cursed teapot brews an eternity of haunted suffering.",boss:{speciesId:"spectrier",name:"Phantom Steed King",statMultiplier:20,extraSkillIds:["astralBarrage","eerieGallop","nightmareSteed"]}},genesisTemple:{id:"genesisTemple",name:"Genesis Temple",tilesetPath:"tilesets/dungeon_psychic.png",tilesetKey:"tileset-psychic",floors:35,enemySpeciesIds:["mew","cresselia"],floorEnemies:{1:["mew"],2:["mew"],3:["mew","cresselia"],4:["mew","cresselia"],5:["cresselia"],6:["cresselia","mew"],7:["mew","cresselia"],8:["cresselia","mew"],9:["mew","cresselia"],10:["cresselia","mew"],11:["mew","cresselia"],12:["cresselia"],13:["mew","cresselia"],14:["cresselia","mew"],15:["mew","cresselia"],16:["cresselia","mew"],17:["mew","cresselia"],18:["cresselia","mew"],19:["mew","cresselia"],20:["cresselia","mew"],21:["mew","cresselia"],22:["cresselia","mew"],23:["mew","cresselia"],24:["cresselia","mew"],25:["mew","cresselia"],26:["cresselia","mew"],27:["mew","cresselia"],28:["cresselia","mew"],29:["mew","cresselia"],30:["cresselia","mew"],31:["mew","cresselia"],32:["cresselia","mew"],33:["mew","cresselia"],34:["cresselia","mew"],35:["mew","cresselia"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The temple of genesis where the original mythical Pokemon weaves creation itself and the lunar crescent deity guards dreams from eternal dissolution.",boss:{speciesId:"mew",name:"Genesis Ancestor",statMultiplier:20,extraSkillIds:["psychicMax","auraStorm","transformStrike"]}},crownTundraThrone:{id:"crownTundraThrone",name:"Crown Tundra Throne",tilesetPath:"tilesets/dungeon_ice.png",tilesetKey:"tileset-ice",floors:35,enemySpeciesIds:["calyrexIce","cloyster"],floorEnemies:{1:["calyrexIce"],2:["calyrexIce"],3:["calyrexIce","cloyster"],4:["calyrexIce","cloyster"],5:["cloyster"],6:["cloyster","calyrexIce"],7:["calyrexIce","cloyster"],8:["cloyster","calyrexIce"],9:["calyrexIce","cloyster"],10:["cloyster","calyrexIce"],11:["calyrexIce","cloyster"],12:["cloyster"],13:["calyrexIce","cloyster"],14:["cloyster","calyrexIce"],15:["calyrexIce","cloyster"],16:["cloyster","calyrexIce"],17:["calyrexIce","cloyster"],18:["cloyster","calyrexIce"],19:["calyrexIce","cloyster"],20:["cloyster","calyrexIce"],21:["calyrexIce","cloyster"],22:["cloyster","calyrexIce"],23:["calyrexIce","cloyster"],24:["cloyster","calyrexIce"],25:["calyrexIce","cloyster"],26:["cloyster","calyrexIce"],27:["calyrexIce","cloyster"],28:["cloyster","calyrexIce"],29:["calyrexIce","cloyster"],30:["cloyster","calyrexIce"],31:["calyrexIce","cloyster"],32:["cloyster","calyrexIce"],33:["calyrexIce","cloyster"],34:["cloyster","calyrexIce"],35:["calyrexIce","cloyster"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The frozen throne beyond the crown tundra where the spectral ice king rides eternal frost and the armored shell fortress guards the point of absolute zero.",boss:{speciesId:"calyrexIce",name:"Crown Tundra Sovereign",statMultiplier:20,extraSkillIds:["glacialLanceMax","iceRiderCharge","permafrostCrush"]}},abyssalDarkhold:{id:"abyssalDarkhold",name:"Abyssal Darkhold",tilesetPath:"tilesets/dungeon_dark.png",tilesetKey:"tileset-dark",floors:35,enemySpeciesIds:["grimmsnarl","incineroar"],floorEnemies:{1:["grimmsnarl"],2:["grimmsnarl"],3:["grimmsnarl","incineroar"],4:["grimmsnarl","incineroar"],5:["incineroar"],6:["incineroar","grimmsnarl"],7:["grimmsnarl","incineroar"],8:["incineroar","grimmsnarl"],9:["grimmsnarl","incineroar"],10:["incineroar","grimmsnarl"],11:["grimmsnarl","incineroar"],12:["incineroar"],13:["grimmsnarl","incineroar"],14:["incineroar","grimmsnarl"],15:["grimmsnarl","incineroar"],16:["incineroar","grimmsnarl"],17:["grimmsnarl","incineroar"],18:["incineroar","grimmsnarl"],19:["grimmsnarl","incineroar"],20:["incineroar","grimmsnarl"],21:["grimmsnarl","incineroar"],22:["incineroar","grimmsnarl"],23:["grimmsnarl","incineroar"],24:["incineroar","grimmsnarl"],25:["grimmsnarl","incineroar"],26:["incineroar","grimmsnarl"],27:["grimmsnarl","incineroar"],28:["incineroar","grimmsnarl"],29:["grimmsnarl","incineroar"],30:["incineroar","grimmsnarl"],31:["grimmsnarl","incineroar"],32:["incineroar","grimmsnarl"],33:["grimmsnarl","incineroar"],34:["incineroar","grimmsnarl"],35:["grimmsnarl","incineroar"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The deepest darkness where the sinister trickster weaves nightmares from living hair and the heel wrestler burns souls with dark flames of malice.",boss:{speciesId:"grimmsnarl",name:"Nightmare Trickster King",statMultiplier:20,extraSkillIds:["falseSupremacy","hairTrap","spiritBreak"]}},radiantSwordGarden:{id:"radiantSwordGarden",name:"Radiant Sword Garden",tilesetPath:"tilesets/dungeon_fairy.png",tilesetKey:"tileset-fairy",floors:35,enemySpeciesIds:["zacian","tapuLele"],floorEnemies:{1:["zacian"],2:["zacian"],3:["zacian","tapuLele"],4:["zacian","tapuLele"],5:["tapuLele"],6:["tapuLele","zacian"],7:["zacian","tapuLele"],8:["tapuLele","zacian"],9:["zacian","tapuLele"],10:["tapuLele","zacian"],11:["zacian","tapuLele"],12:["tapuLele"],13:["zacian","tapuLele"],14:["tapuLele","zacian"],15:["zacian","tapuLele"],16:["tapuLele","zacian"],17:["zacian","tapuLele"],18:["tapuLele","zacian"],19:["zacian","tapuLele"],20:["tapuLele","zacian"],21:["zacian","tapuLele"],22:["tapuLele","zacian"],23:["zacian","tapuLele"],24:["tapuLele","zacian"],25:["zacian","tapuLele"],26:["tapuLele","zacian"],27:["zacian","tapuLele"],28:["tapuLele","zacian"],29:["zacian","tapuLele"],30:["tapuLele","zacian"],31:["zacian","tapuLele"],32:["tapuLele","zacian"],33:["zacian","tapuLele"],34:["tapuLele","zacian"],35:["zacian","tapuLele"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"A garden of eternal radiance where the legendary sword warrior dances with steel and fairy might while the island guardian sings psychic hymns of divine protection.",boss:{speciesId:"zacian",name:"Crowned Sword Sovereign",statMultiplier:20,extraSkillIds:["behemothBlade","playRoughMax","sacredSwordFae"]}},dragonSovereignSpire:{id:"dragonSovereignSpire",name:"Dragon Sovereign Spire",tilesetPath:"tilesets/dungeon_dragon.png",tilesetKey:"tileset-dragon",floors:35,enemySpeciesIds:["garchomp","latios"],floorEnemies:{1:["garchomp"],2:["garchomp"],3:["garchomp","latios"],4:["garchomp","latios"],5:["latios"],6:["latios","garchomp"],7:["garchomp","latios"],8:["latios","garchomp"],9:["garchomp","latios"],10:["latios","garchomp"],11:["garchomp","latios"],12:["latios"],13:["garchomp","latios"],14:["latios","garchomp"],15:["garchomp","latios"],16:["latios","garchomp"],17:["garchomp","latios"],18:["latios","garchomp"],19:["garchomp","latios"],20:["latios","garchomp"],21:["garchomp","latios"],22:["latios","garchomp"],23:["garchomp","latios"],24:["latios","garchomp"],25:["garchomp","latios"],26:["latios","garchomp"],27:["garchomp","latios"],28:["latios","garchomp"],29:["garchomp","latios"],30:["latios","garchomp"],31:["garchomp","latios"],32:["latios","garchomp"],33:["garchomp","latios"],34:["latios","garchomp"],35:["garchomp","latios"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The spire where dragon sovereignty reigns supreme  the land shark emperor shatters the earth while the eon dragon streaks across the sky at the speed of thought.",boss:{speciesId:"garchomp",name:"Land Shark Emperor",statMultiplier:20,extraSkillIds:["dragonRushMax","earthquakeMax","crunchDraco"]}},celestialThunderpeak:{id:"celestialThunderpeak",name:"Celestial Thunderpeak",tilesetPath:"tilesets/dungeon_flying.png",tilesetKey:"tileset-flying",floors:35,enemySpeciesIds:["zapdos","moltres"],floorEnemies:{1:["zapdos"],2:["zapdos"],3:["zapdos","moltres"],4:["zapdos","moltres"],5:["moltres"],6:["moltres","zapdos"],7:["zapdos","moltres"],8:["moltres","zapdos"],9:["zapdos","moltres"],10:["moltres","zapdos"],11:["zapdos","moltres"],12:["moltres"],13:["zapdos","moltres"],14:["moltres","zapdos"],15:["zapdos","moltres"],16:["moltres","zapdos"],17:["zapdos","moltres"],18:["moltres","zapdos"],19:["zapdos","moltres"],20:["moltres","zapdos"],21:["zapdos","moltres"],22:["moltres","zapdos"],23:["zapdos","moltres"],24:["moltres","zapdos"],25:["zapdos","moltres"],26:["moltres","zapdos"],27:["zapdos","moltres"],28:["moltres","zapdos"],29:["zapdos","moltres"],30:["moltres","zapdos"],31:["zapdos","moltres"],32:["moltres","zapdos"],33:["zapdos","moltres"],34:["moltres","zapdos"],35:["zapdos","moltres"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The celestial peak where thunder and fire clash eternally  the lightning bird commands storms while the flame bird sets the sky ablaze with sacred fire.",boss:{speciesId:"zapdos",name:"Thunder Sovereign",statMultiplier:20,extraSkillIds:["thunderboltMax","hurricaneZap","staticField"]}},harmonyHall:{id:"harmonyHall",name:"Harmony Hall",tilesetPath:"tilesets/dungeon_normal.png",tilesetKey:"tileset-normal",floors:35,enemySpeciesIds:["silvally","meloetta"],floorEnemies:{1:["silvally"],2:["silvally"],3:["silvally","meloetta"],4:["silvally","meloetta"],5:["meloetta"],6:["meloetta","silvally"],7:["silvally","meloetta"],8:["meloetta","silvally"],9:["silvally","meloetta"],10:["meloetta","silvally"],11:["silvally","meloetta"],12:["meloetta"],13:["silvally","meloetta"],14:["meloetta","silvally"],15:["silvally","meloetta"],16:["meloetta","silvally"],17:["silvally","meloetta"],18:["meloetta","silvally"],19:["silvally","meloetta"],20:["meloetta","silvally"],21:["silvally","meloetta"],22:["meloetta","silvally"],23:["silvally","meloetta"],24:["meloetta","silvally"],25:["silvally","meloetta"],26:["meloetta","silvally"],27:["silvally","meloetta"],28:["meloetta","silvally"],29:["silvally","meloetta"],30:["meloetta","silvally"],31:["silvally","meloetta"],32:["meloetta","silvally"],33:["silvally","meloetta"],34:["meloetta","silvally"],35:["silvally","meloetta"]},difficulty:8,itemsPerFloor:7,unlockClears:60,description:"The hall of ultimate harmony where the adaptive synthetic beast evolves beyond all limits and the melody mythical sings the song that rewrites reality itself.",boss:{speciesId:"silvally",name:"RKS System Alpha",statMultiplier:20,extraSkillIds:["multiAttackMax","rkSystemOverdrive","crushClawMax"]}},destinyTower:{id:"destinyTower",name:"Destiny Tower",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:20,enemySpeciesIds:["absol","gible","ralts","machop","torkoal","tentacool","gastly","snorunt","bagon","grimer","beldum","skarmory"],floorEnemies:{1:["machop","geodude"],2:["machop","aron"],3:["aron","torkoal"],4:["torkoal","grimer"],5:["grimer","tentacool"],6:["tentacool","gastly"],7:["gastly","snorunt"],8:["snorunt","ralts"],9:["ralts","absol"],10:["absol","bagon"],11:["bagon","gible"],12:["gible","machop","torkoal"],13:["torkoal","gastly","absol"],14:["absol","ralts","grimer"],15:["gible","bagon","snorunt"],16:["gible","absol","torkoal"],17:["gible","ralts","gastly"],18:["absol","gible","bagon"],19:["gible","absol"],20:["gible"]},difficulty:3.5,itemsPerFloor:2,unlockClears:15,description:"B1F~B20F. All types. The final challenge!",boss:{speciesId:"gible",name:"Apex Garchomp",statMultiplier:7,extraSkillIds:["dracoMeteor","earthPower","fireBlast"]}},endlessDungeon:{id:"endlessDungeon",name:"Endless Abyss",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:9999,enemySpeciesIds:[],floorEnemies:{},difficulty:1,itemsPerFloor:4,unlockClears:10,description:"Infinite floors. How deep can you go?"},bossRush:{id:"bossRush",name:"Boss Rush",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:10,enemySpeciesIds:[],floorEnemies:{},difficulty:5,itemsPerFloor:1,unlockClears:30,description:"10 boss fights in a row! Can you survive?"},dailyDungeon:{id:"dailyDungeon",name:"Daily Dungeon",tilesetPath:"tilesets/BeachCave/tileset_0.png",tilesetKey:"beachcave-tiles",floors:20,enemySpeciesIds:[],floorEnemies:{},difficulty:4,itemsPerFloor:4,unlockClears:5,description:"Today's challenge dungeon!"}},kt=[{id:"speedrun",name:"Speed Run",description:"Complete within turn limit!",color:"#fbbf24",unlockClears:15},{id:"noItems",name:"No Items",description:"Cannot use or pick up items.",color:"#ef4444",unlockClears:20},{id:"solo",name:"Solo",description:"No allies. +30% stats.",color:"#a855f7",unlockClears:25}];function pr(G){return Qe[G]??Qe.beachCave}function ms(G){return Object.values(Qe).filter(F=>F.unlockClears<=G)}function yt(G,F){return G.floorEnemies[F]??G.enemySpeciesIds}function mr(G){let F=0;for(let b=0;b<G.length;b++)F=(F<<5)-F+G.charCodeAt(b)|0;return Math.abs(F)}function gr(G){let F=G;return()=>(F=F*1664525+1013904223&4294967295,(F>>>0)/4294967295)}function Gt(){const G=new Date().toISOString().slice(0,10),F=mr(G),b=gr(F),I=Object.keys(Qe).filter(n=>n!=="endlessDungeon"&&n!=="destinyTower"&&n!=="dailyDungeon"),B=Math.floor(b()*I.length),O=I[B],f=["strongEnemies","fewItems","fastPace","moreGold","toughBoss"],x=1+Math.floor(b()*2),e=[];for(let n=0;n<x;n++){const r=f[Math.floor(b()*f.length)];e.includes(r)||e.push(r)}const o=15+Math.floor(b()*11),m=3+b()*4;return{date:G,seed:F,baseDungeonId:O,modifiers:e,floors:o,difficulty:m}}function gs(G,F,b,I){let B=G*100+F*10;return I&&(B+=500),B+=Math.max(0,2e3-b),Math.max(0,B)}const ma="poke-roguelite-daily";function vs(G){const F=ga(),b=F.findIndex(I=>I.date===G.date);for(b>=0?G.score>F[b].score&&(F[b]=G):F.push(G),F.sort((I,B)=>B.date.localeCompare(I.date));F.length>30;)F.pop();localStorage.setItem(ma,JSON.stringify(F))}function ga(){try{const G=localStorage.getItem(ma);return G?JSON.parse(G):[]}catch{return[]}}function vr(G){return ga().some(F=>F.date===G)}const Yt=[{id:"oranToSitrus",name:"Oran Fusion",ingredients:[{itemId:"oranBerry",count:2}],result:{itemId:"sitrusBerry",count:1},goldCost:50,requiredClears:0},{id:"appleTooBig",name:"Apple Merge",ingredients:[{itemId:"apple",count:2}],result:{itemId:"bigApple",count:1},goldCost:40,requiredClears:0},{id:"grimyPurify",name:"Purify Food",ingredients:[{itemId:"grimyFood",count:2},{itemId:"pechaberry",count:1}],result:{itemId:"apple",count:2},goldCost:30,requiredClears:1},{id:"reviveDuplicate",name:"Revive Synthesis",ingredients:[{itemId:"reviveSeed",count:1},{itemId:"oranBerry",count:2}],result:{itemId:"reviveSeed",count:2},goldCost:200,requiredClears:3},{id:"sleepToStun",name:"Seed Blend",ingredients:[{itemId:"sleepSeed",count:1},{itemId:"stunSeed",count:1}],result:{itemId:"stunSeed",count:3},goldCost:100,requiredClears:2},{id:"blastMultiply",name:"Blast Refinery",ingredients:[{itemId:"blastSeed",count:3}],result:{itemId:"blastSeed",count:5},goldCost:150,requiredClears:2},{id:"healSeedBrew",name:"Heal Brew",ingredients:[{itemId:"oranBerry",count:1},{itemId:"pechaberry",count:1}],result:{itemId:"healSeed",count:2},goldCost:60,requiredClears:1},{id:"warpOrbForge",name:"Warp Orb Forge",ingredients:[{itemId:"warpSeed",count:3}],result:{itemId:"warpOrb",count:1},goldCost:120,requiredClears:4},{id:"foeHoldCraft",name:"Foe-Hold Craft",ingredients:[{itemId:"stunSeed",count:2},{itemId:"sleepSeed",count:2}],result:{itemId:"foeHoldOrb",count:1},goldCost:180,requiredClears:5},{id:"vanishOrbSynth",name:"Vanish Synthesis",ingredients:[{itemId:"warpSeed",count:2},{itemId:"escapeOrb",count:1}],result:{itemId:"vanishOrb",count:1},goldCost:250,requiredClears:6},{id:"elixirBrew",name:"Elixir Brew",ingredients:[{itemId:"sitrusBerry",count:2},{itemId:"healSeed",count:1}],result:{itemId:"maxElixir",count:2},goldCost:160,requiredClears:4},{id:"allPowerForge",name:"Power Forge",ingredients:[{itemId:"allPowerOrb",count:1},{itemId:"blastSeed",count:2},{itemId:"reviveSeed",count:1}],result:{itemId:"allPowerOrb",count:2},goldCost:300,requiredClears:8}];function ys(G,F,b,I){if(I<G.requiredClears||b<G.goldCost)return!1;for(const B of G.ingredients){const O=F.find(f=>f.itemId===B.itemId);if(!O||O.count<B.count)return!1}return!0}function Kt(G,F){return F>=G.requiredClears}function $t(G){const F=We[G];return F?F.name:G}function va(G){return G.reduce((F,b)=>F+b.count,0)}function Vi(G,F,b){const I=G.find(B=>B.itemId===F);I?I.count+=b:G.push({itemId:F,count:b})}function yr(G,F,b){const I=G.find(B=>B.itemId===F);return!I||I.count<b?!1:(I.count-=b,!0)}function xr(G){return G.filter(F=>F.count>0)}var be=(G=>(G.Torrent="torrent",G.Sturdy="sturdy",G.RockHead="rockHead",G.Guts="guts",G.PurePower="purePower",G.NoGuard="noGuard",G.RunAway="runAway",G.ShieldDust="shieldDust",G.Static="static",G.Pickup="pickup",G.SwiftSwim="swiftSwim",G.Levitate="levitate",G.FlameBody="flameBody",G))(be||{});const fi={torrent:{id:"torrent",name:"Torrent",description:"Water moves deal +50% damage when HP is below 1/3."},sturdy:{id:"sturdy",name:"Sturdy",description:"Survives a lethal hit once per floor with 1 HP."},rockHead:{id:"rockHead",name:"Rock Head",description:"Takes no damage from traps."},guts:{id:"guts",name:"Guts",description:"ATK is boosted by 50% when afflicted with a status."},purePower:{id:"purePower",name:"Pure Power",description:"ATK is always boosted by 30%."},noGuard:{id:"noGuard",name:"No Guard",description:"All moves used by or against this Pokemon always hit."},runAway:{id:"runAway",name:"Run Away",description:"Warp Traps teleport you near the stairs."},shieldDust:{id:"shieldDust",name:"Shield Dust",description:"Immune to secondary effects from enemy moves."},static:{id:"static",name:"Static",description:"30% chance to paralyze an attacker on contact."},pickup:{id:"pickup",name:"Pickup",description:"10% chance to find an item when defeating an enemy."},swiftSwim:{id:"swiftSwim",name:"Swift Swim",description:"Moves faster in rain weather."},levitate:{id:"levitate",name:"Levitate",description:"Immune to Ground-type traps."},flameBody:{id:"flameBody",name:"Flame Body",description:"30% chance to burn an attacker on contact."}},He={mudkip:"torrent",zubat:"levitate",shellos:"swiftSwim",corsola:"sturdy",geodude:"rockHead",pikachu:"static",voltorb:"static",magnemite:"sturdy",caterpie:"shieldDust",pidgey:"runAway",aron:"sturdy",meditite:"purePower",machop:"guts",gastly:"levitate",drowzee:"noGuard",snorunt:"shieldDust",charmander:"torrent",eevee:"runAway",numel:"rockHead",slugma:"flameBody",torkoal:"sturdy",murkrow:"runAway",sableye:"pickup",absol:"purePower",chikorita:"torrent",bellsprout:"noGuard",shroomish:"shieldDust",grimer:"guts",nidoranM:"purePower",tentacool:"swiftSwim",clefairy:"shieldDust",jigglypuff:"shieldDust",ralts:"static",dratini:"shieldDust",bagon:"rockHead",gible:"rockHead",poochyena:"runAway",beldum:"rockHead",skarmory:"shieldDust",sandshrew:"rockHead",trapinch:"noGuard",phanpy:"guts",horsea:"swiftSwim",lotad:"swiftSwim",carvanha:"guts",elekid:"static",mareep:"static",wurmple:"shieldDust",spinarak:"shieldDust",abra:"shieldDust",natu:"shieldDust",houndour:"flameBody",sneasel:"pickup",taillow:"guts",starly:"guts",makuhita:"guts",riolu:"sturdy",larvitar:"guts",nosepass:"sturdy",swinub:"pickup",spheal:"swiftSwim",zigzagoon:"pickup",whismur:"shieldDust",oddish:"shieldDust",budew:"pickup",vulpix:"flameBody",ponyta:"runAway",staryu:"swiftSwim",clamperl:"shieldDust",shinx:"static",electrike:"static",gulpin:"guts",ekans:"shieldDust",cubone:"rockHead",diglett:"noGuard",paras:"shieldDust",venonat:"shieldDust",shieldon:"sturdy",bronzor:"levitate",misdreavus:"levitate",duskull:"levitate",axew:"guts",deino:"guts",snubbull:"guts",togepi:"shieldDust",snover:"sturdy",bergmite:"sturdy",spoink:"shieldDust",stunky:"shieldDust",purrloin:"noGuard",pidove:"shieldDust",rufflet:"guts",tyrogue:"guts",crabrawler:"guts",roggenrola:"sturdy",rockruff:"guts",lillipup:"guts",minccino:"shieldDust",foongus:"shieldDust",petilil:"torrent",feebas:"swiftSwim",wailmer:"swiftSwim",litwick:"flameBody",growlithe:"flameBody",joltik:"static",tynamo:"levitate",trubbish:"guts",skorupi:"shieldDust",mudbray:"guts",hippopotas:"rockHead",dwebble:"sturdy",binacle:"guts",nincada:"rockHead",venipede:"shieldDust",mienfoo:"purePower",timburr:"guts",klink:"sturdy",ferroseed:"sturdy",phantump:"levitate",honedge:"noGuard",solosis:"shieldDust",elgyem:"shieldDust",cryogonal:"levitate",cubchoo:"torrent",sandile:"guts",inkay:"shieldDust",spritzee:"shieldDust",swirlix:"torrent",goomy:"torrent",jangmoo:"sturdy",noibat:"levitate",vullaby:"sturdy",stufful:"guts",furfrou:"shieldDust",wimpod:"swiftSwim",tympole:"swiftSwim",salandit:"flameBody",larvesta:"flameBody",fomantis:"torrent",morelull:"shieldDust",charjabug:"sturdy",helioptile:"static",mareanie:"sturdy",croagunk:"guts",sandygast:"levitate",silicobra:"sturdy",carbink:"sturdy",minior:"shieldDust",dewpider:"swiftSwim",sizzlipede:"flameBody",pancham:"guts",hawlucha:"purePower",durant:"sturdy",togedemaru:"static",drifloon:"levitate",golett:"sturdy",hatenna:"shieldDust",indeedee:"purePower",vanillite:"shieldDust",snom:"shieldDust",nickit:"pickup",impidimp:"guts",milcery:"shieldDust",comfey:"shieldDust",turtonator:"sturdy",drampa:"guts",rookidee:"guts",archen:"guts",wooloo:"pickup",skwovet:"pickup",bruxish:"purePower",chewtle:"sturdy",litleo:"guts",torchic:"torrent",gossifleur:"shieldDust",bounsweet:"shieldDust",yamper:"static",pincurchin:"static",skrelp:"shieldDust",toxel:"static",drilbur:"guts",barboach:"swiftSwim",nacli:"sturdy",tyrunt:"guts",blipbug:"shieldDust",cutiefly:"shieldDust",clobbopus:"guts",passimian:"purePower",tinkatink:"shieldDust",varoom:"flameBody",greavard:"pickup",sinistea:"shieldDust",flittle:"runAway",espurr:"shieldDust",cetoddle:"sturdy",frigibax:"rockHead",zorua:"runAway",pawniard:"purePower",fidough:"shieldDust",dedenne:"static",cyclizar:"shieldDust",tatsugiri:"swiftSwim",wingull:"swiftSwim",swablu:"shieldDust",lechonk:"pickup",tandemaus:"pickup",buizel:"swiftSwim",finizen:"swiftSwim",fletchinder:"flameBody",heatmor:"flameBody",smoliv:"shieldDust",deerling:"runAway",pachirisu:"static",emolga:"static",glimmet:"sturdy",koffing:"levitate",wooper:"swiftSwim",baltoy:"levitate",anorith:"sturdy",lunatone:"levitate",surskit:"swiftSwim",volbeat:"shieldDust",scraggy:"guts",mankey:"guts",klefki:"shieldDust",mawile:"sturdy",rotom:"levitate",dreepy:"runAway",munna:"shieldDust",chingling:"levitate",smoochum:"shieldDust",delibird:"pickup",nuzleaf:"pickup",spiritomb:"sturdy",marill:"swiftSwim",cleffa:"shieldDust",druddigon:"guts",applin:"sturdy",hoppip:"runAway",tropius:"torrent",aipom:"pickup",smeargle:"shieldDust",poliwag:"swiftSwim",corphish:"guts",magby:"flameBody",darumaka:"guts",sewaddle:"shieldDust",pumpkaboo:"levitate",plusle:"static",minun:"static",nidoranF:"purePower",seviper:"guts",gligar:"levitate",rhyhorn:"rockHead",sudowoodo:"sturdy",boldore:"sturdy",pineco:"sturdy",heracross:"guts",hitmonlee:"purePower",hitmonchan:"guts",steelix:"sturdy",scizor:"shieldDust",banette:"guts",shedinja:"shieldDust",slowpoke:"shieldDust",girafarig:"shieldDust",glaceon:"shieldDust",beartic:"guts",umbreon:"shieldDust",cacturne:"pickup",granbull:"guts",togekiss:"shieldDust",shelgon:"rockHead",gabite:"rockHead",noctowl:"shieldDust",xatu:"shieldDust",kangaskhan:"guts",tauros:"guts",psyduck:"swiftSwim",seel:"swiftSwim",cyndaquil:"flameBody",fennekin:"flameBody",sunkern:"shieldDust",cacnea:"guts",pichu:"static",chinchou:"static",weedle:"shieldDust",qwilfish:"guts",donphan:"sturdy",marowak:"rockHead",onix:"sturdy",omanyte:"swiftSwim",scyther:"guts",pinsir:"guts",medicham:"purePower",lucario:"guts",metang:"sturdy",lairon:"sturdy",gengar:"levitate",chandelure:"flameBody",alakazam:"shieldDust",gardevoir:"shieldDust",omastar:"swiftSwim",metagross:"sturdy",aggron:"sturdy",lapras:"swiftSwim",weavile:"purePower",honchkrow:"guts",houndoom:"flameBody",florges:"shieldDust",mimikyu:"sturdy",dragonite:"purePower",flygon:"levitate",staraptor:"guts",braviary:"guts",snorlax:"sturdy",zangoose:"guts",gyarados:"guts",kingdra:"swiftSwim",blaziken:"purePower",typhlosion:"flameBody",venusaur:"torrent",sceptile:"purePower",jolteon:"static",ampharos:"static",nidoking:"guts",crobat:"levitate",krookodile:"guts",nidoqueen:"sturdy",tyranitar:"guts",aerodactyl:"rockHead",yanmega:"purePower",scolipede:"purePower",conkeldurr:"guts",machamp:"noGuard",magnezone:"sturdy",empoleon:"sturdy",dusknoir:"levitate",cofagrigus:"flameBody",reuniclus:"shieldDust",gothitelle:"shieldDust",mamoswine:"rockHead",walrein:"sturdy",darkrai:"purePower",hydreigon:"guts",sylveon:"shieldDust",hatterene:"shieldDust",haxorus:"purePower",goodra:"guts",pidgeot:"guts",noivern:"levitate",blissey:"sturdy",porygonZ:"purePower",blastoise:"torrent",feraligatr:"guts",charizard:"flameBody",delphox:"flameBody",torterra:"sturdy",serperior:"purePower",electivire:"guts",luxray:"guts",roserade:"purePower",vileplume:"shieldDust",rhyperior:"sturdy",dugtrio:"noGuard",golem:"sturdy",terrakion:"purePower",pheromosa:"purePower",escavalier:"sturdy",kommoo:"guts",gallade:"purePower",corviknight:"sturdy",bastiodon:"sturdy",aegislash:"noGuard",jellicent:"swiftSwim",slowking:"shieldDust",bronzong:"levitate",froslass:"levitate",abomasnow:"sturdy",sharpedo:"purePower",zoroark:"purePower",primarina:"torrent",diancie:"sturdy",dragapult:"levitate",duraludon:"sturdy",swellow:"guts",talonflame:"flameBody",slaking:"purePower",lopunny:"guts",suicune:"swiftSwim",lugia:"sturdy",hooh:"flameBody",entei:"purePower",celebi:"shieldDust",virizion:"purePower",raikou:"static",zekrom:"purePower",nihilego:"sturdy",naganadel:"purePower",groudon:"sturdy",landorus:"guts",regirock:"sturdy",stakataka:"sturdy",genesect:"purePower",buzzwole:"guts",cobalion:"sturdy",marshadow:"purePower",registeel:"sturdy",solgaleo:"purePower",giratina:"levitate",lunala:"shieldDust",mewtwo:"purePower",deoxys:"purePower",regice:"sturdy",kyurem:"purePower",yveltal:"purePower",hoopa:"purePower",xerneas:"purePower",magearna:"sturdy",rayquaza:"purePower",dialga:"sturdy",tornadus:"guts",articuno:"shieldDust",arceus:"purePower",regigigas:"sturdy",kyogre:"swiftSwim",palkia:"purePower",reshiram:"flameBody",victini:"purePower",shaymin:"shieldDust",tapuBulu:"purePower",thundurus:"static",zeraora:"purePower",eternatus:"sturdy",poipole:"purePower",zygarde:"sturdy",excadrill:"guts",lycanroc:"guts",gigalith:"sturdy",volcarona:"flameBody",golisopod:"sturdy",urshifu:"purePower",keldeo:"guts",heatran:"flameBody",kartana:"purePower",spectrier:"purePower",polteageist:"shieldDust",mew:"shieldDust",cresselia:"levitate",calyrexIce:"purePower",cloyster:"sturdy",grimmsnarl:"purePower",incineroar:"guts",zacian:"purePower",tapuLele:"shieldDust",garchomp:"guts",latios:"levitate",zapdos:"static",moltres:"flameBody",silvally:"purePower",meloetta:"shieldDust"},di={[be.Torrent]:[{level:1,name:"Torrent",description:"+50% damage when HP < 33%",cost:0,requiredClears:0},{level:2,name:"Torrent II",description:"+60% damage when HP < 38%",cost:300,requiredClears:5},{level:3,name:"Torrent III",description:"+70% damage when HP < 43%",cost:600,requiredClears:15},{level:4,name:"Torrent IV",description:"+80% damage when HP < 48%",cost:1e3,requiredClears:30},{level:5,name:"Torrent V",description:"+100% damage when HP < 55%",cost:2e3,requiredClears:50}],[be.Sturdy]:[{level:1,name:"Sturdy",description:"Survive lethal hit with 1 HP",cost:0,requiredClears:0},{level:2,name:"Sturdy II",description:"Survive lethal hit with 2 HP",cost:300,requiredClears:5},{level:3,name:"Sturdy III",description:"Survive lethal hit with 3 HP",cost:600,requiredClears:15},{level:4,name:"Sturdy IV",description:"Survive lethal hit with 4 HP",cost:1e3,requiredClears:30},{level:5,name:"Sturdy V",description:"Survive lethal hit with 5 HP",cost:2e3,requiredClears:50}],[be.RockHead]:[{level:1,name:"Rock Head",description:"Immune to trap damage",cost:0,requiredClears:0},{level:2,name:"Rock Head II",description:"Trap immune + 5% DEF bonus",cost:300,requiredClears:5},{level:3,name:"Rock Head III",description:"Trap immune + 10% DEF bonus",cost:600,requiredClears:15},{level:4,name:"Rock Head IV",description:"Trap immune + 15% DEF bonus",cost:1e3,requiredClears:30},{level:5,name:"Rock Head V",description:"Trap immune + 20% DEF bonus",cost:2e3,requiredClears:50}],[be.Guts]:[{level:1,name:"Guts",description:"+50% ATK when afflicted with status",cost:0,requiredClears:0},{level:2,name:"Guts II",description:"+60% ATK when afflicted with status",cost:300,requiredClears:5},{level:3,name:"Guts III",description:"+70% ATK when afflicted with status",cost:600,requiredClears:15},{level:4,name:"Guts IV",description:"+80% ATK when afflicted with status",cost:1e3,requiredClears:30},{level:5,name:"Guts V",description:"+100% ATK when afflicted with status",cost:2e3,requiredClears:50}],[be.PurePower]:[{level:1,name:"Pure Power",description:"+30% ATK always",cost:0,requiredClears:0},{level:2,name:"Pure Power II",description:"+35% ATK always",cost:300,requiredClears:5},{level:3,name:"Pure Power III",description:"+40% ATK always",cost:600,requiredClears:15},{level:4,name:"Pure Power IV",description:"+45% ATK always",cost:1e3,requiredClears:30},{level:5,name:"Pure Power V",description:"+50% ATK always",cost:2e3,requiredClears:50}],[be.NoGuard]:[{level:1,name:"No Guard",description:"All moves always hit",cost:0,requiredClears:0},{level:2,name:"No Guard II",description:"All moves hit + 5% ATK bonus",cost:300,requiredClears:5},{level:3,name:"No Guard III",description:"All moves hit + 10% ATK bonus",cost:600,requiredClears:15},{level:4,name:"No Guard IV",description:"All moves hit + 15% ATK bonus",cost:1e3,requiredClears:30},{level:5,name:"No Guard V",description:"All moves hit + 20% ATK bonus",cost:2e3,requiredClears:50}],[be.RunAway]:[{level:1,name:"Run Away",description:"Warp Traps teleport near stairs",cost:0,requiredClears:0},{level:2,name:"Run Away II",description:"Warp near stairs + 5% dodge chance",cost:300,requiredClears:5},{level:3,name:"Run Away III",description:"Warp near stairs + 10% dodge chance",cost:600,requiredClears:15},{level:4,name:"Run Away IV",description:"Warp near stairs + 15% dodge chance",cost:1e3,requiredClears:30},{level:5,name:"Run Away V",description:"Warp near stairs + 20% dodge chance",cost:2e3,requiredClears:50}],[be.ShieldDust]:[{level:1,name:"Shield Dust",description:"Immune to secondary effects",cost:0,requiredClears:0},{level:2,name:"Shield Dust II",description:"Effect immune + 3% DEF bonus",cost:300,requiredClears:5},{level:3,name:"Shield Dust III",description:"Effect immune + 6% DEF bonus",cost:600,requiredClears:15},{level:4,name:"Shield Dust IV",description:"Effect immune + 9% DEF bonus",cost:1e3,requiredClears:30},{level:5,name:"Shield Dust V",description:"Effect immune + 12% DEF bonus",cost:2e3,requiredClears:50}],[be.Static]:[{level:1,name:"Static",description:"30% chance to paralyze attacker",cost:0,requiredClears:0},{level:2,name:"Static II",description:"35% chance to paralyze attacker",cost:300,requiredClears:5},{level:3,name:"Static III",description:"40% chance to paralyze attacker",cost:600,requiredClears:15},{level:4,name:"Static IV",description:"50% chance to paralyze attacker",cost:1e3,requiredClears:30},{level:5,name:"Static V",description:"60% chance to paralyze attacker",cost:2e3,requiredClears:50}],[be.Pickup]:[{level:1,name:"Pickup",description:"10% chance to find item on KO",cost:0,requiredClears:0},{level:2,name:"Pickup II",description:"13% chance to find item on KO",cost:300,requiredClears:5},{level:3,name:"Pickup III",description:"16% chance to find item on KO",cost:600,requiredClears:15},{level:4,name:"Pickup IV",description:"20% chance to find item on KO",cost:1e3,requiredClears:30},{level:5,name:"Pickup V",description:"25% chance to find item on KO",cost:2e3,requiredClears:50}],[be.SwiftSwim]:[{level:1,name:"Swift Swim",description:"Faster in rain weather",cost:0,requiredClears:0},{level:2,name:"Swift Swim II",description:"Rain speed + 5% ATK in rain",cost:300,requiredClears:5},{level:3,name:"Swift Swim III",description:"Rain speed + 10% ATK in rain",cost:600,requiredClears:15},{level:4,name:"Swift Swim IV",description:"Rain speed + 15% ATK in rain",cost:1e3,requiredClears:30},{level:5,name:"Swift Swim V",description:"Rain speed + 20% ATK in rain",cost:2e3,requiredClears:50}],[be.Levitate]:[{level:1,name:"Levitate",description:"Immune to ground traps",cost:0,requiredClears:0},{level:2,name:"Levitate II",description:"Trap immune + 5% dodge chance",cost:300,requiredClears:5},{level:3,name:"Levitate III",description:"Trap immune + 10% dodge chance",cost:600,requiredClears:15},{level:4,name:"Levitate IV",description:"Trap immune + 15% dodge chance",cost:1e3,requiredClears:30},{level:5,name:"Levitate V",description:"Trap immune + 20% dodge chance",cost:2e3,requiredClears:50}],[be.FlameBody]:[{level:1,name:"Flame Body",description:"30% chance to burn attacker",cost:0,requiredClears:0},{level:2,name:"Flame Body II",description:"35% chance to burn attacker",cost:300,requiredClears:5},{level:3,name:"Flame Body III",description:"40% chance to burn attacker",cost:600,requiredClears:15},{level:4,name:"Flame Body IV",description:"50% chance to burn attacker",cost:1e3,requiredClears:30},{level:5,name:"Flame Body V",description:"60% chance to burn attacker",cost:2e3,requiredClears:50}]};function pi(G,F){return G?G[F]??1:1}function Sr(G,F){const b=di[G];if(!b)return;const I=Math.max(0,Math.min(F-1,b.length-1));return b[I]}function wr(G,F){const b=di[G];if(b&&!(F>=b.length))return b[F]}function Fr(G){switch(G){case 1:return{threshold:1/3,multiplier:1.5};case 2:return{threshold:.38,multiplier:1.6};case 3:return{threshold:.43,multiplier:1.7};case 4:return{threshold:.48,multiplier:1.8};case 5:return{threshold:.55,multiplier:2};default:return{threshold:1/3,multiplier:1.5}}}function Tr(G){return Math.min(G,5)}function kr(G){switch(G){case 1:return 1.5;case 2:return 1.6;case 3:return 1.7;case 4:return 1.8;case 5:return 2;default:return 1.5}}function Cr(G){switch(G){case 1:return 1.3;case 2:return 1.35;case 3:return 1.4;case 4:return 1.45;case 5:return 1.5;default:return 1.3}}function br(G){switch(G){case 1:return .3;case 2:return .35;case 3:return .4;case 4:return .5;case 5:return .6;default:return .3}}function Er(G){switch(G){case 1:return .3;case 2:return .35;case 3:return .4;case 4:return .5;case 5:return .6;default:return .3}}function Pr(G){switch(G){case 1:return .1;case 2:return .13;case 3:return .16;case 4:return .2;case 5:return .25;default:return .1}}function Mr(G){switch(G){case 1:return 1;case 2:return 1.05;case 3:return 1.1;case 4:return 1.15;case 5:return 1.2;default:return 1}}function Ar(G){switch(G){case 1:return 1;case 2:return 1.05;case 3:return 1.1;case 4:return 1.15;case 5:return 1.2;default:return 1}}function xs(G){switch(G){case 1:return 0;case 2:return .05;case 3:return .1;case 4:return .15;case 5:return .2;default:return 0}}function Ir(G){switch(G){case 1:return 1;case 2:return 1.03;case 3:return 1.06;case 4:return 1.09;case 5:return 1.12;default:return 1}}function Ss(G){switch(G){case 1:return 0;case 2:return .05;case 3:return .1;case 4:return .15;case 5:return .2;default:return 0}}const ya=[{id:"mudkip",name:"Mudkip",unlock:0},{id:"pikachu",name:"Pikachu",unlock:1},{id:"caterpie",name:"Caterpie",unlock:0},{id:"geodude",name:"Geodude",unlock:2},{id:"machop",name:"Machop",unlock:3},{id:"magnemite",name:"Magnemite",unlock:4},{id:"gastly",name:"Gastly",unlock:5},{id:"snorunt",name:"Snorunt",unlock:6},{id:"charmander",name:"Charmander",unlock:2},{id:"eevee",name:"Eevee",unlock:4},{id:"chikorita",name:"Chikorita",unlock:6},{id:"bellsprout",name:"Bellsprout",unlock:8},{id:"shroomish",name:"Shroomish",unlock:9},{id:"dratini",name:"Dratini",unlock:10},{id:"ralts",name:"Ralts",unlock:11},{id:"poochyena",name:"Poochyena",unlock:7},{id:"beldum",name:"Beldum",unlock:12},{id:"sandshrew",name:"Sandshrew",unlock:13},{id:"trapinch",name:"Trapinch",unlock:14},{id:"skarmory",name:"Skarmory",unlock:15},{id:"houndour",name:"Houndour",unlock:16},{id:"sneasel",name:"Sneasel",unlock:17},{id:"riolu",name:"Riolu",unlock:18},{id:"larvitar",name:"Larvitar",unlock:19},{id:"taillow",name:"Taillow",unlock:8},{id:"starly",name:"Starly",unlock:5},{id:"oddish",name:"Oddish",unlock:4},{id:"budew",name:"Budew",unlock:6},{id:"vulpix",name:"Vulpix",unlock:7},{id:"ponyta",name:"Ponyta",unlock:10},{id:"staryu",name:"Staryu",unlock:8},{id:"clamperl",name:"Clamperl",unlock:9},{id:"shinx",name:"Shinx",unlock:6},{id:"electrike",name:"Electrike",unlock:8},{id:"gulpin",name:"Gulpin",unlock:10},{id:"ekans",name:"Ekans",unlock:11},{id:"cubone",name:"Cubone",unlock:12},{id:"diglett",name:"Diglett",unlock:9},{id:"paras",name:"Paras",unlock:5},{id:"venonat",name:"Venonat",unlock:7},{id:"shieldon",name:"Shieldon",unlock:13},{id:"bronzor",name:"Bronzor",unlock:14},{id:"misdreavus",name:"Misdreavus",unlock:11},{id:"duskull",name:"Duskull",unlock:13},{id:"axew",name:"Axew",unlock:12},{id:"deino",name:"Deino",unlock:14},{id:"snubbull",name:"Snubbull",unlock:9},{id:"togepi",name:"Togepi",unlock:7},{id:"snover",name:"Snover",unlock:10},{id:"bergmite",name:"Bergmite",unlock:11},{id:"spoink",name:"Spoink",unlock:9},{id:"stunky",name:"Stunky",unlock:10},{id:"purrloin",name:"Purrloin",unlock:11},{id:"pidove",name:"Pidove",unlock:8},{id:"rufflet",name:"Rufflet",unlock:12},{id:"tyrogue",name:"Tyrogue",unlock:10},{id:"crabrawler",name:"Crabrawler",unlock:11},{id:"roggenrola",name:"Roggenrola",unlock:12},{id:"rockruff",name:"Rockruff",unlock:10},{id:"lillipup",name:"Lillipup",unlock:7},{id:"minccino",name:"Minccino",unlock:8},{id:"foongus",name:"Foongus",unlock:12},{id:"petilil",name:"Petilil",unlock:10},{id:"feebas",name:"Feebas",unlock:11},{id:"wailmer",name:"Wailmer",unlock:12},{id:"litwick",name:"Litwick",unlock:13},{id:"growlithe",name:"Growlithe",unlock:10},{id:"joltik",name:"Joltik",unlock:12},{id:"tynamo",name:"Tynamo",unlock:11},{id:"trubbish",name:"Trubbish",unlock:11},{id:"skorupi",name:"Skorupi",unlock:12},{id:"mudbray",name:"Mudbray",unlock:13},{id:"hippopotas",name:"Hippopotas",unlock:12},{id:"dwebble",name:"Dwebble",unlock:13},{id:"binacle",name:"Binacle",unlock:12},{id:"nincada",name:"Nincada",unlock:11},{id:"venipede",name:"Venipede",unlock:12},{id:"mienfoo",name:"Mienfoo",unlock:13},{id:"timburr",name:"Timburr",unlock:11},{id:"klink",name:"Klink",unlock:13},{id:"ferroseed",name:"Ferroseed",unlock:14},{id:"phantump",name:"Phantump",unlock:12},{id:"honedge",name:"Honedge",unlock:13},{id:"solosis",name:"Solosis",unlock:12},{id:"elgyem",name:"Elgyem",unlock:13},{id:"cryogonal",name:"Cryogonal",unlock:14},{id:"cubchoo",name:"Cubchoo",unlock:13},{id:"sandile",name:"Sandile",unlock:12},{id:"inkay",name:"Inkay",unlock:13},{id:"spritzee",name:"Spritzee",unlock:14},{id:"swirlix",name:"Swirlix",unlock:12},{id:"goomy",name:"Goomy",unlock:14},{id:"jangmoo",name:"Jangmo-o",unlock:13},{id:"noibat",name:"Noibat",unlock:12},{id:"vullaby",name:"Vullaby",unlock:13},{id:"stufful",name:"Stufful",unlock:14},{id:"furfrou",name:"Furfrou",unlock:12},{id:"wimpod",name:"Wimpod",unlock:15},{id:"tympole",name:"Tympole",unlock:14},{id:"salandit",name:"Salandit",unlock:15},{id:"larvesta",name:"Larvesta",unlock:14},{id:"fomantis",name:"Fomantis",unlock:13},{id:"morelull",name:"Morelull",unlock:14},{id:"charjabug",name:"Charjabug",unlock:15},{id:"helioptile",name:"Helioptile",unlock:14},{id:"mareanie",name:"Mareanie",unlock:15},{id:"croagunk",name:"Croagunk",unlock:14},{id:"sandygast",name:"Sandygast",unlock:15},{id:"silicobra",name:"Silicobra",unlock:14},{id:"carbink",name:"Carbink",unlock:15},{id:"minior",name:"Minior",unlock:14},{id:"dewpider",name:"Dewpider",unlock:13},{id:"sizzlipede",name:"Sizzlipede",unlock:14},{id:"pancham",name:"Pancham",unlock:15},{id:"hawlucha",name:"Hawlucha",unlock:14},{id:"durant",name:"Durant",unlock:16},{id:"togedemaru",name:"Togedemaru",unlock:15},{id:"drifloon",name:"Drifloon",unlock:14},{id:"golett",name:"Golett",unlock:15},{id:"hatenna",name:"Hatenna",unlock:16},{id:"indeedee",name:"Indeedee",unlock:15},{id:"vanillite",name:"Vanillite",unlock:16},{id:"snom",name:"Snom",unlock:15},{id:"nickit",name:"Nickit",unlock:14},{id:"impidimp",name:"Impidimp",unlock:15},{id:"milcery",name:"Milcery",unlock:16},{id:"comfey",name:"Comfey",unlock:15},{id:"turtonator",name:"Turtonator",unlock:16},{id:"drampa",name:"Drampa",unlock:15},{id:"rookidee",name:"Rookidee",unlock:14},{id:"archen",name:"Archen",unlock:15},{id:"wooloo",name:"Wooloo",unlock:14},{id:"skwovet",name:"Skwovet",unlock:15},{id:"bruxish",name:"Bruxish",unlock:17},{id:"chewtle",name:"Chewtle",unlock:16},{id:"litleo",name:"Litleo",unlock:15},{id:"torchic",name:"Torchic",unlock:16},{id:"gossifleur",name:"Gossifleur",unlock:17},{id:"bounsweet",name:"Bounsweet",unlock:16},{id:"yamper",name:"Yamper",unlock:17},{id:"pincurchin",name:"Pincurchin",unlock:16},{id:"skrelp",name:"Skrelp",unlock:15},{id:"toxel",name:"Toxel",unlock:16},{id:"drilbur",name:"Drilbur",unlock:17},{id:"barboach",name:"Barboach",unlock:16},{id:"nacli",name:"Nacli",unlock:17},{id:"tyrunt",name:"Tyrunt",unlock:16},{id:"blipbug",name:"Blipbug",unlock:15},{id:"cutiefly",name:"Cutiefly",unlock:16},{id:"clobbopus",name:"Clobbopus",unlock:17},{id:"passimian",name:"Passimian",unlock:16},{id:"tinkatink",name:"Tinkatink",unlock:17},{id:"varoom",name:"Varoom",unlock:16},{id:"greavard",name:"Greavard",unlock:15},{id:"sinistea",name:"Sinistea",unlock:16},{id:"flittle",name:"Flittle",unlock:17},{id:"espurr",name:"Espurr",unlock:16},{id:"cetoddle",name:"Cetoddle",unlock:17},{id:"frigibax",name:"Frigibax",unlock:16},{id:"zorua",name:"Zorua",unlock:15},{id:"pawniard",name:"Pawniard",unlock:16},{id:"fidough",name:"Fidough",unlock:17},{id:"dedenne",name:"Dedenne",unlock:16},{id:"cyclizar",name:"Cyclizar",unlock:17},{id:"tatsugiri",name:"Tatsugiri",unlock:16},{id:"wingull",name:"Wingull",unlock:15},{id:"swablu",name:"Swablu",unlock:16},{id:"lechonk",name:"Lechonk",unlock:15},{id:"tandemaus",name:"Tandemaus",unlock:16},{id:"buizel",name:"Buizel",unlock:18},{id:"finizen",name:"Finizen",unlock:17},{id:"fletchinder",name:"Fletchinder",unlock:18},{id:"heatmor",name:"Heatmor",unlock:17},{id:"smoliv",name:"Smoliv",unlock:16},{id:"deerling",name:"Deerling",unlock:17},{id:"pachirisu",name:"Pachirisu",unlock:18},{id:"emolga",name:"Emolga",unlock:17},{id:"glimmet",name:"Glimmet",unlock:18},{id:"koffing",name:"Koffing",unlock:17},{id:"wooper",name:"Wooper",unlock:16},{id:"baltoy",name:"Baltoy",unlock:17},{id:"anorith",name:"Anorith",unlock:18},{id:"lunatone",name:"Lunatone",unlock:17},{id:"surskit",name:"Surskit",unlock:16},{id:"volbeat",name:"Volbeat",unlock:17},{id:"scraggy",name:"Scraggy",unlock:18},{id:"mankey",name:"Mankey",unlock:17},{id:"klefki",name:"Klefki",unlock:18},{id:"mawile",name:"Mawile",unlock:17},{id:"rotom",name:"Rotom",unlock:18},{id:"dreepy",name:"Dreepy",unlock:17},{id:"munna",name:"Munna",unlock:16},{id:"chingling",name:"Chingling",unlock:17},{id:"smoochum",name:"Smoochum",unlock:18},{id:"delibird",name:"Delibird",unlock:17},{id:"nuzleaf",name:"Nuzleaf",unlock:16},{id:"spiritomb",name:"Spiritomb",unlock:17},{id:"marill",name:"Marill",unlock:18},{id:"cleffa",name:"Cleffa",unlock:17},{id:"druddigon",name:"Druddigon",unlock:18},{id:"applin",name:"Applin",unlock:17},{id:"hoppip",name:"Hoppip",unlock:16},{id:"tropius",name:"Tropius",unlock:17},{id:"aipom",name:"Aipom",unlock:16},{id:"smeargle",name:"Smeargle",unlock:17},{id:"poliwag",name:"Poliwag",unlock:19},{id:"corphish",name:"Corphish",unlock:18},{id:"magby",name:"Magby",unlock:19},{id:"darumaka",name:"Darumaka",unlock:18},{id:"sewaddle",name:"Sewaddle",unlock:17},{id:"pumpkaboo",name:"Pumpkaboo",unlock:18},{id:"plusle",name:"Plusle",unlock:19},{id:"minun",name:"Minun",unlock:18},{id:"nidoranF",name:"NidoranF",unlock:19},{id:"seviper",name:"Seviper",unlock:18},{id:"gligar",name:"Gligar",unlock:19},{id:"rhyhorn",name:"Rhyhorn",unlock:18},{id:"sudowoodo",name:"Sudowoodo",unlock:19},{id:"boldore",name:"Boldore",unlock:18},{id:"pineco",name:"Pineco",unlock:17},{id:"heracross",name:"Heracross",unlock:18},{id:"hitmonlee",name:"Hitmonlee",unlock:19},{id:"hitmonchan",name:"Hitmonchan",unlock:18},{id:"steelix",name:"Steelix",unlock:19},{id:"scizor",name:"Scizor",unlock:18},{id:"banette",name:"Banette",unlock:19},{id:"shedinja",name:"Shedinja",unlock:18},{id:"slowpoke",name:"Slowpoke",unlock:17},{id:"girafarig",name:"Girafarig",unlock:18},{id:"glaceon",name:"Glaceon",unlock:19},{id:"beartic",name:"Beartic",unlock:18},{id:"umbreon",name:"Umbreon",unlock:19},{id:"cacturne",name:"Cacturne",unlock:18},{id:"granbull",name:"Granbull",unlock:19},{id:"togekiss",name:"Togekiss",unlock:18},{id:"shelgon",name:"Shelgon",unlock:19},{id:"gabite",name:"Gabite",unlock:18},{id:"noctowl",name:"Noctowl",unlock:17},{id:"xatu",name:"Xatu",unlock:18},{id:"kangaskhan",name:"Kangaskhan",unlock:19},{id:"tauros",name:"Tauros",unlock:18},{id:"psyduck",name:"Psyduck",unlock:20},{id:"seel",name:"Seel",unlock:19},{id:"cyndaquil",name:"Cyndaquil",unlock:20},{id:"fennekin",name:"Fennekin",unlock:19},{id:"sunkern",name:"Sunkern",unlock:18},{id:"cacnea",name:"Cacnea",unlock:19},{id:"pichu",name:"Pichu",unlock:18},{id:"chinchou",name:"Chinchou",unlock:19},{id:"weedle",name:"Weedle",unlock:18},{id:"qwilfish",name:"Qwilfish",unlock:19},{id:"donphan",name:"Donphan",unlock:20},{id:"marowak",name:"Marowak",unlock:19},{id:"onix",name:"Onix",unlock:20},{id:"omanyte",name:"Omanyte",unlock:19},{id:"scyther",name:"Scyther",unlock:20},{id:"pinsir",name:"Pinsir",unlock:19},{id:"medicham",name:"Medicham",unlock:20},{id:"lucario",name:"Lucario",unlock:19},{id:"metang",name:"Metang",unlock:20},{id:"lairon",name:"Lairon",unlock:19},{id:"gengar",name:"Gengar",unlock:20},{id:"chandelure",name:"Chandelure",unlock:19},{id:"alakazam",name:"Alakazam",unlock:20},{id:"gardevoir",name:"Gardevoir",unlock:19},{id:"lapras",name:"Lapras",unlock:20},{id:"weavile",name:"Weavile",unlock:19},{id:"honchkrow",name:"Honchkrow",unlock:20},{id:"houndoom",name:"Houndoom",unlock:19},{id:"florges",name:"Florges",unlock:20},{id:"mimikyu",name:"Mimikyu",unlock:19},{id:"dragonite",name:"Dragonite",unlock:20},{id:"flygon",name:"Flygon",unlock:19},{id:"staraptor",name:"Staraptor",unlock:20},{id:"braviary",name:"Braviary",unlock:19},{id:"snorlax",name:"Snorlax",unlock:20},{id:"zangoose",name:"Zangoose",unlock:19},{id:"gyarados",name:"Gyarados",unlock:22},{id:"kingdra",name:"Kingdra",unlock:21},{id:"blaziken",name:"Blaziken",unlock:22},{id:"typhlosion",name:"Typhlosion",unlock:21},{id:"venusaur",name:"Venusaur",unlock:22},{id:"sceptile",name:"Sceptile",unlock:21},{id:"jolteon",name:"Jolteon",unlock:22},{id:"ampharos",name:"Ampharos",unlock:21},{id:"nidoking",name:"Nidoking",unlock:22},{id:"crobat",name:"Crobat",unlock:21},{id:"krookodile",name:"Krookodile",unlock:22},{id:"nidoqueen",name:"Nidoqueen",unlock:21},{id:"tyranitar",name:"Tyranitar",unlock:22},{id:"aerodactyl",name:"Aerodactyl",unlock:21},{id:"yanmega",name:"Yanmega",unlock:22},{id:"scolipede",name:"Scolipede",unlock:21},{id:"conkeldurr",name:"Conkeldurr",unlock:22},{id:"machamp",name:"Machamp",unlock:21},{id:"magnezone",name:"Magnezone",unlock:22},{id:"empoleon",name:"Empoleon",unlock:21},{id:"dusknoir",name:"Dusknoir",unlock:22},{id:"cofagrigus",name:"Cofagrigus",unlock:21},{id:"reuniclus",name:"Reuniclus",unlock:22},{id:"gothitelle",name:"Gothitelle",unlock:21},{id:"mamoswine",name:"Mamoswine",unlock:22},{id:"walrein",name:"Walrein",unlock:21},{id:"darkrai",name:"Darkrai",unlock:22},{id:"hydreigon",name:"Hydreigon",unlock:21},{id:"sylveon",name:"Sylveon",unlock:22},{id:"hatterene",name:"Hatterene",unlock:21},{id:"haxorus",name:"Haxorus",unlock:22},{id:"goodra",name:"Goodra",unlock:21},{id:"pidgeot",name:"Pidgeot",unlock:22},{id:"noivern",name:"Noivern",unlock:21},{id:"blissey",name:"Blissey",unlock:22},{id:"porygonZ",name:"Porygon-Z",unlock:21},{id:"blastoise",name:"Blastoise",unlock:24},{id:"feraligatr",name:"Feraligatr",unlock:23},{id:"charizard",name:"Charizard",unlock:24},{id:"delphox",name:"Delphox",unlock:23},{id:"torterra",name:"Torterra",unlock:24},{id:"serperior",name:"Serperior",unlock:23},{id:"electivire",name:"Electivire",unlock:24},{id:"luxray",name:"Luxray",unlock:23},{id:"roserade",name:"Roserade",unlock:24},{id:"vileplume",name:"Vileplume",unlock:23},{id:"rhyperior",name:"Rhyperior",unlock:24},{id:"dugtrio",name:"Dugtrio",unlock:23},{id:"golem",name:"Golem",unlock:24},{id:"terrakion",name:"Terrakion",unlock:23},{id:"pheromosa",name:"Pheromosa",unlock:24},{id:"escavalier",name:"Escavalier",unlock:23},{id:"kommoO",name:"Kommo-o",unlock:24},{id:"gallade",name:"Gallade",unlock:23},{id:"corviknight",name:"Corviknight",unlock:24},{id:"bastiodon",name:"Bastiodon",unlock:23},{id:"aegislash",name:"Aegislash",unlock:24},{id:"jellicent",name:"Jellicent",unlock:23},{id:"slowking",name:"Slowking",unlock:24},{id:"bronzong",name:"Bronzong",unlock:23},{id:"froslass",name:"Froslass",unlock:24},{id:"abomasnow",name:"Abomasnow",unlock:23},{id:"sharpedo",name:"Sharpedo",unlock:24},{id:"zoroark",name:"Zoroark",unlock:23},{id:"primarina",name:"Primarina",unlock:24},{id:"diancie",name:"Diancie",unlock:23},{id:"dragapult",name:"Dragapult",unlock:24},{id:"duraludon",name:"Duraludon",unlock:23},{id:"swellow",name:"Swellow",unlock:24},{id:"talonflame",name:"Talonflame",unlock:23},{id:"slaking",name:"Slaking",unlock:24},{id:"lopunny",name:"Lopunny",unlock:23},{id:"suicune",name:"Suicune",unlock:26},{id:"lugia",name:"Lugia",unlock:25},{id:"entei",name:"Entei",unlock:26},{id:"hoOh",name:"Ho-Oh",unlock:25},{id:"celebi",name:"Celebi",unlock:26},{id:"virizion",name:"Virizion",unlock:25},{id:"raikou",name:"Raikou",unlock:26},{id:"zekrom",name:"Zekrom",unlock:25},{id:"nihilego",name:"Nihilego",unlock:26},{id:"naganadel",name:"Naganadel",unlock:25},{id:"groudon",name:"Groudon",unlock:26},{id:"landorus",name:"Landorus",unlock:25},{id:"regirock",name:"Regirock",unlock:26},{id:"stakataka",name:"Stakataka",unlock:25},{id:"genesect",name:"Genesect",unlock:26},{id:"buzzwole",name:"Buzzwole",unlock:25},{id:"cobalion",name:"Cobalion",unlock:26},{id:"marshadow",name:"Marshadow",unlock:25},{id:"registeel",name:"Registeel",unlock:26},{id:"solgaleo",name:"Solgaleo",unlock:25},{id:"giratina",name:"Giratina",unlock:26},{id:"lunala",name:"Lunala",unlock:25},{id:"mewtwo",name:"Mewtwo",unlock:26},{id:"deoxys",name:"Deoxys",unlock:25},{id:"regice",name:"Regice",unlock:26},{id:"kyurem",name:"Kyurem",unlock:25},{id:"yveltal",name:"Yveltal",unlock:26},{id:"hoopa",name:"Hoopa",unlock:25},{id:"xerneas",name:"Xerneas",unlock:26},{id:"magearna",name:"Magearna",unlock:25},{id:"rayquaza",name:"Rayquaza",unlock:26},{id:"dialga",name:"Dialga",unlock:25},{id:"tornadus",name:"Tornadus",unlock:26},{id:"articuno",name:"Articuno",unlock:25},{id:"arceus",name:"Arceus",unlock:26},{id:"regigigas",name:"Regigigas",unlock:25},{id:"kyogre",name:"Kyogre",unlock:28},{id:"palkia",name:"Palkia",unlock:27},{id:"reshiram",name:"Reshiram",unlock:28},{id:"victini",name:"Victini",unlock:27},{id:"shaymin",name:"Shaymin",unlock:28},{id:"tapuBulu",name:"Tapu Bulu",unlock:27},{id:"thundurus",name:"Thundurus",unlock:28},{id:"zeraora",name:"Zeraora",unlock:27},{id:"eternatus",name:"Eternatus",unlock:28},{id:"poipole",name:"Poipole",unlock:27},{id:"zygarde",name:"Zygarde",unlock:28},{id:"excadrill",name:"Excadrill",unlock:27},{id:"lycanroc",name:"Lycanroc",unlock:28},{id:"gigalith",name:"Gigalith",unlock:27},{id:"volcarona",name:"Volcarona",unlock:28},{id:"golisopod",name:"Golisopod",unlock:27},{id:"urshifu",name:"Urshifu",unlock:28},{id:"keldeo",name:"Keldeo",unlock:27},{id:"heatran",name:"Heatran",unlock:28},{id:"kartana",name:"Kartana",unlock:27},{id:"spectrier",name:"Spectrier",unlock:28},{id:"polteageist",name:"Polteageist",unlock:27},{id:"mew",name:"Mew",unlock:28},{id:"cresselia",name:"Cresselia",unlock:27},{id:"calyrexIce",name:"Calyrex-Ice",unlock:28},{id:"cloyster",name:"Cloyster",unlock:27},{id:"grimmsnarl",name:"Grimmsnarl",unlock:28},{id:"incineroar",name:"Incineroar",unlock:27},{id:"zacian",name:"Zacian",unlock:28},{id:"tapuLele",name:"Tapu Lele",unlock:27},{id:"garchomp",name:"Garchomp",unlock:28},{id:"latios",name:"Latios",unlock:27},{id:"zapdos",name:"Zapdos",unlock:28},{id:"moltres",name:"Moltres",unlock:27},{id:"silvally",name:"Silvally",unlock:28},{id:"meloetta",name:"Meloetta",unlock:27}],mi=[{level:1,requiredClears:30,bonuses:[{id:"ng1_gold",name:"Gold Start",description:"+10% starting gold each run",effect:"startingGold",value:10},{id:"ng1_hp",name:"Vitality I",description:"+5% base HP",effect:"hpPercent",value:5}]},{level:2,requiredClears:50,bonuses:[{id:"ng2_exp",name:"Wisdom I",description:"+15% EXP gain",effect:"expPercent",value:15},{id:"ng2_item",name:"Lucky Start",description:"Start with a random item",effect:"startItem",value:1}]},{level:3,requiredClears:80,bonuses:[{id:"ng3_atk",name:"Power I",description:"+10% ATK",effect:"atkPercent",value:10},{id:"ng3_pp",name:"Deep Reserves",description:"+3 PP to all skills",effect:"bonusPP",value:3}]},{level:4,requiredClears:120,bonuses:[{id:"ng4_gold",name:"Bounty Hunter",description:"+20% gold from enemies",effect:"goldPercent",value:20},{id:"ng4_belly",name:"Iron Stomach",description:"Belly drains 10% slower",effect:"bellyDrain",value:10}]},{level:5,requiredClears:200,bonuses:[{id:"ng5_stats",name:"Ascendant",description:"+15% all stats",effect:"allStats",value:15},{id:"ng5_drops",name:"Fortune",description:"Enemies drop items 20% more",effect:"itemDrop",value:20}]}];function xa(G){let F=0;for(const b of mi)G.totalClears>=b.requiredClears&&(F=b.level);return F}function Wt(G){return G.ngPlusLevel??0}function Sa(G){const F=[];for(const b of mi)b.level<=G&&F.push(...b.bonuses);return F}function Br(G){const F=mi.find(b=>b.level===G+1);return F?{clears:F.requiredClears,bonuses:F.bonuses}:null}function Dr(G){const F=Wt(G);return xa(G)<=F||(G.ngPlusLevel=F+1,Ke(G)),G}function ws(G){const F=Wt(G);return xa(G)>F}function Fs(G){const F={startingGoldPercent:0,hpPercent:0,expPercent:0,startWithItem:!1,atkPercent:0,bonusPP:0,goldPercent:0,bellyDrainReduction:0,allStatsPercent:0,itemDropPercent:0},b=Sa(G);for(const I of b)switch(I.effect){case"startingGold":F.startingGoldPercent+=I.value;break;case"hpPercent":F.hpPercent+=I.value;break;case"expPercent":F.expPercent+=I.value;break;case"startItem":F.startWithItem=!0;break;case"atkPercent":F.atkPercent+=I.value;break;case"bonusPP":F.bonusPP+=I.value;break;case"goldPercent":F.goldPercent+=I.value;break;case"bellyDrain":F.bellyDrainReduction+=I.value;break;case"allStats":F.allStatsPercent+=I.value;break;case"itemDrop":F.itemDropPercent+=I.value;break}return F}mi.length;const wa={baseRate:10,maxAccumulation:24},Rr=2,Lr=50,zr=5;function Gi(G){const F=Math.min(G.totalClears,Lr)*Rr,b=(G.ngPlusLevel??0)*zr;return wa.baseRate+F+b}function Or(G){if(!G.lastVisitTimestamp)return{gold:0,hours:0};const b=Date.now()-G.lastVisitTimestamp;if(b<6e4)return{gold:0,hours:0};const I=b/(1e3*60*60),B=Math.min(I,wa.maxAccumulation),O=Gi(G);return{gold:Math.floor(O*B),hours:Math.round(B*10)/10}}function Gr(G){G.lastVisitTimestamp=Date.now(),Ke(G)}class Hr extends $e.Scene{constructor(){super({key:"HubScene"}),this.starterLabel=null,this.starterDesc=null}init(F){if(this.meta=Ye(),F?.gold!==void 0){if(this.meta.gold+=F.gold,this.meta.totalGold+=F.gold,this.meta.totalRuns++,F.cleared&&this.meta.totalClears++,F.bestFloor&&F.bestFloor>this.meta.bestFloor&&(this.meta.bestFloor=F.bestFloor),this.meta.totalEnemiesDefeated+=F.enemiesDefeated??0,this.meta.totalTurns+=F.turns??0,F.dungeonId==="endlessDungeon"&&F.bestFloor&&F.bestFloor>this.meta.endlessBestFloor&&(this.meta.endlessBestFloor=F.bestFloor),F.cleared&&F.challengeMode&&this.meta.challengeClears++,F.starter&&!this.meta.startersUsed.includes(F.starter)&&this.meta.startersUsed.push(F.starter),F.pokemonSeen&&F.pokemonSeen.length>0){const b=new Set(this.meta.pokemonSeen);for(const I of F.pokemonSeen)b.add(I);this.meta.pokemonSeen=Array.from(b)}if(F.starter&&!this.meta.pokemonUsed.includes(F.starter)&&this.meta.pokemonUsed.push(F.starter),F.inventory&&F.inventory.length>0)for(const b of F.inventory)Vi(this.meta.storage,b.itemId,b.count);F.cleared&&F.dungeonId&&(this.meta.clearedDungeons||(this.meta.clearedDungeons=[]),this.meta.clearedDungeons.includes(F.dungeonId)||this.meta.clearedDungeons.push(F.dungeonId)),F.dungeonId&&(this.meta.lastDungeonId=F.dungeonId,this.meta.lastChallenge=F.challengeMode??void 0),Ke(this.meta)}}create(){Xi(),fa("hub"),this.add.rectangle(J/2,ee/2,J,ee,1713988),this.add.rectangle(J/2,ee-100,J,200,2972199);for(let j=0;j<25;j++){const _=Math.random()*J,te=Math.random()*160,se=this.add.circle(_,te,Math.random()*2+1,16777215,Math.random()*.5+.3);this.tweens.add({targets:se,alpha:{from:se.alpha,to:se.alpha*.3},duration:1e3+Math.random()*2e3,yoyo:!0,repeat:-1})}this.add.text(J/2,30,"Pokemon Square",{fontSize:"16px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,55,`Gold: ${this.meta.gold}`,{fontSize:"12px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5);const F=Gi(this.meta);this.add.text(J/2,68,`+${F}G/hr`,{fontSize:"9px",color:"#c9a833",fontFamily:"monospace"}).setOrigin(.5),this.add.text(J/2,80,`Runs: ${this.meta.totalRuns}  Clears: ${this.meta.totalClears}`,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5),ms(this.meta.totalClears);const b=la();let I=105;const B=320;if(b){const j=as(),_=j?Qe[j.dungeonId]?.name??j.dungeonId:"Unknown",te=j?.challengeMode?kt.find(ie=>ie.id===j.challengeMode):null,se=te?` [${te.name}]`:"";this.createButton(J/2,I,B,42,`Continue: ${_} B${j?.floor??"?"}F${se}`,te?`Resume ${te.name} challenge run`:"Resume your saved run",te?te.color:"#4ade80",()=>this.continueSave()),I+=52}if(this.meta.lastDungeonId&&!b){const j=Qe[this.meta.lastDungeonId];if(j){const _=this.meta.lastChallenge?kt.find(ie=>ie.id===this.meta.lastChallenge):null,te=_?` [${_.name}]`:"",se=(this.meta.dungeonRunCounts??{})[this.meta.lastDungeonId]??0;this.createButton(J/2,I,B,42,`Last Dungeon: ${j.name}${te}`,`Quick re-enter  (${se} runs)`,"#f59e0b",()=>{this.meta.lastChallenge?this.enterDungeonWithChallenge(this.meta.lastDungeonId,this.meta.lastChallenge):this.enterDungeon(this.meta.lastDungeonId)}),I+=52}}if(this.meta.totalClears>=5){const j=Gt(),_=vr(j.date),te=j.modifiers.join(", ");this.createButton(J/2,I,B,42,_?"Daily Done!":"Daily Dungeon",_?"Come back tomorrow!":`${j.floors}F  Diff ${j.difficulty.toFixed(1)}  [${te}]`,_?"#444460":"#10b981",_?void 0:()=>this.enterDungeon("dailyDungeon")),I+=52}this.meta.totalClears>=10&&(this.createButton(J/2,I,B,42,"Endless Abyss ","Infinite floors. How deep can you go?","#ef4444",()=>this.enterDungeon("endlessDungeon")),I+=52),this.meta.totalClears>=30&&(this.createButton(J/2,I,B,42,"Boss Rush","10 boss fights! Survive them all!","#dc2626",()=>this.enterDungeon("bossRush")),I+=52);const O={speedrun:"",noItems:"",solo:""};for(const j of kt)this.meta.totalClears>=j.unlockClears&&(this.createButton(J/2,I,B,42,`${O[j.id]??""} ${j.name} Challenge`,j.description,j.color,()=>this.enterChallengeMode(j.id)),I+=52);const f=this.meta.starter??"mudkip",x=f.charAt(0).toUpperCase()+f.slice(1),e=ee-268,o=28,m=e-30,n=ee-m;this.add.rectangle(J/2,m+n/2,J,n,1713988).setDepth(50);const r=this.createFixedButton(J/2,e,B,28,`Starter: ${x}`,"Tap to change","#f472b6",()=>this.showStarterSelect());this.starterLabel=r.titleText,this.starterDesc=r.descText,this.createFixedButton(J/2,e+o,B,28,"Upgrade Shop",`Gold: ${this.meta.gold}`,"#fbbf24",()=>this.scene.start("UpgradeScene"));const a=this.meta.equippedHeldItem?ci(this.meta.equippedHeldItem):void 0,t=a?a.name:"None equipped";this.createFixedButton(J/2,e+o*2,B,28,"Held Items",t,"#f59e0b",()=>this.scene.start("HeldItemScene")),this.createFixedButton(J/2,e+o*3,B,28,"Move Tutor","Teach new skills!","#a855f7",()=>this.scene.start("MoveTutorScene"));const s=He[f]??He.mudkip,l=fi[s],i=pi(this.meta.abilityLevels,s),h=l?`${l.name} Lv.${i}`:"Enhance ability";this.createFixedButton(J/2,e+o*4,B,28,"Ability Dojo",h,"#667eea",()=>this.scene.start("AbilityUpgradeScene"));const d=va(this.meta.storage);this.createFixedButton(J/2,e+o*5,B,28,"Item Forge",`Stored: ${d} items`,"#ff8c42",()=>this.scene.start("CraftingScene"));const c=(this.meta.pokemonSeen??[]).length;this.createFixedButton(J/2,e+o*6,B,28,"Pokedex",`Seen: ${c} Pokemon`,"#e879f9",()=>this.scene.start("PokedexScene")),this.createFixedButton(J/2,e+o*7,B,28,"Records",`Clears: ${this.meta.totalClears}  Best: B${this.meta.bestFloor}F`,"#60a5fa",()=>this.scene.start("AchievementScene")),this.add.text(J/2,ee-8,"v4.2.0",{fontSize:"8px",color:"#444460",fontFamily:"monospace"}).setOrigin(.5).setDepth(51);const u=Wt(this.meta),p=ws(this.meta);if(p||u>0){const j=p?"NG+ Available!":`NG+${u}`,_=p?"#fbbf24":"#a855f7",te=this.add.text(J/2,ee-20,j,{fontSize:"9px",color:_,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(52).setInteractive({useHandCursor:!0});p&&this.tweens.add({targets:te,alpha:{from:1,to:.4},duration:800,yoyo:!0,repeat:-1}),te.on("pointerdown",()=>this.showNGPlusPanel())}this.add.text(J-50,ee-8,"[Gear]",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5).setDepth(51).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.scene.start("SettingsScene")),this.add.text(J-20,ee-8,"[?]",{fontSize:"10px",color:"#667eea",fontFamily:"monospace"}).setOrigin(.5).setDepth(51).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.scene.start("HelpScene")),this.add.text(20,ee-8,"[Hall of Fame]",{fontSize:"8px",color:"#fbbf24",fontFamily:"monospace"}).setOrigin(0,.5).setDepth(51).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.scene.start("LeaderboardScene"));const S=I,w=e-16,T=w-S,C=[{id:"t1",name:"Beginner",label:"Tier 1",minDiff:0,maxDiff:1.09,color:3359829,textColor:"#7a8a9a"},{id:"t2",name:"Novice",label:"Tier 2",minDiff:1.1,maxDiff:1.69,color:2771514,textColor:"#88b899"},{id:"t3",name:"Intermediate",label:"Tier 3",minDiff:1.7,maxDiff:2.09,color:3820074,textColor:"#a8c888"},{id:"t4",name:"Advanced",label:"Tier 4",minDiff:2.1,maxDiff:3.09,color:4868650,textColor:"#c8c888"},{id:"t5",name:"Expert",label:"Tier 5",minDiff:3.1,maxDiff:4.09,color:5913130,textColor:"#d8a878"},{id:"t6",name:"Master",label:"Tier 6",minDiff:4.1,maxDiff:4.59,color:5909050,textColor:"#d888a8"},{id:"t7",name:"Champion",label:"Tier 7",minDiff:4.6,maxDiff:5.09,color:4860506,textColor:"#b888d8"},{id:"t8",name:"Elite",label:"Tier 8",minDiff:5.1,maxDiff:5.59,color:3811930,textColor:"#9888d8"},{id:"t9",name:"Legendary",label:"Tier 9",minDiff:5.6,maxDiff:6.09,color:2767466,textColor:"#88a8e8"},{id:"t10",name:"Mythical",label:"Tier 10",minDiff:6.1,maxDiff:6.59,color:2771562,textColor:"#88c8e8"},{id:"t11",name:"Godlike",label:"Tier 11",minDiff:6.6,maxDiff:7.99,color:5909082,textColor:"#e888e8"},{id:"t12",name:"FINAL",label:"Tier 12",minDiff:8,maxDiff:9.99,color:6953498,textColor:"#f85858"},{id:"sp",name:"Destiny Tower",label:"Special",minDiff:-1,maxDiff:-1,color:6969882,textColor:"#ffd700"}],M=Object.values(Qe),E=C.map(j=>({tier:j,dungeons:[]}));for(const j of M)if(!(j.id==="endlessDungeon"||j.id==="dailyDungeon"||j.id==="bossRush")){if(j.id==="destinyTower"){E[E.length-1].dungeons.push(j);continue}for(const _ of E)if(_.tier.id!=="sp"&&j.difficulty>=_.tier.minDiff&&j.difficulty<=_.tier.maxDiff){_.dungeons.push(j);break}}const P=E.filter(j=>j.dungeons.length>0),A={};let D=null;for(const j of P){const _=j.dungeons.some(te=>te.unlockClears<=this.meta.totalClears);A[j.tier.id]=!1,_&&(D=j.tier.id)}D&&(A[D]=!0);const W=this.add.container(0,0).setDepth(10),V=this.make.graphics({x:0,y:0});V.fillRect(0,S,J,T);const K=V.createGeometryMask();W.setMask(K);let X=0,R=0,H=0;const L=this.add.rectangle(J-4,S,3,20,6717162,.5).setOrigin(.5,0).setDepth(11).setVisible(!1);let N=0;const z=new Set(this.meta.clearedDungeons??[]),U=Object.values(Qe).filter(j=>j.id!=="endlessDungeon"&&j.id!=="dailyDungeon"&&j.id!=="bossRush").length,Y=Object.values(Qe).filter(j=>j.id!=="endlessDungeon"&&j.id!=="dailyDungeon"&&j.id!=="bossRush"&&z.has(j.id)).length,$=()=>{W.removeAll(!0);let j=S;const _=Y>=U&&U>0,te=_?"ALL DUNGEONS COMPLETE!":`Dungeons Cleared: ${Y} / ${U}`,se=_?"#ffd700":"#94a3b8",ie=this.add.text(J/2,j,te,{fontSize:_?"10px":"9px",color:se,fontFamily:"monospace",fontStyle:_?"bold":"normal"}).setOrigin(.5);W.add(ie),j+=14;const ne=200,he=6,ue=J/2-ne/2,ae=this.add.rectangle(J/2,j,ne,he,2236979,.9).setStrokeStyle(1,3359061);W.add(ae);const oe=U>0?Y/U:0;if(oe>0){const fe=Math.max(2,ne*oe),de=_?16766720:4906624,me=this.add.rectangle(ue+fe/2,j,fe,he-2,de,.9);W.add(me)}j+=14;const le=this.add.text(15,j," Dungeons ",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"});W.add(le),j+=18;for(const fe of P){const{tier:de,dungeons:me}=fe,pe=A[de.id],we=me.filter(it=>it.unlockClears<=this.meta.totalClears).length===0,Ae=pe?"":"",Se=we?" ":"",Ce=me.filter(it=>z.has(it.id)).length,Ee=Ce>=me.length&&me.length>0,Fe=`${Ae} ${de.label}: ${de.name} (${me.length})${Se}`;de.id===D&&(N=j-S);const Re=Ee?4868634:de.color,Oe=Ee?16766720:we?2236979:5596791,Le=this.add.rectangle(J/2,j,B,28,Re,.85).setStrokeStyle(1,Oe);W.add(Le);const je=this.add.text(J/2-B/2+8,j-6,Fe,{fontSize:"10px",color:we?"#555566":de.textColor,fontFamily:"monospace",fontStyle:"bold"});W.add(je);const at=Ee?"COMPLETE":`${Ce}/${me.length} cleared`,Ut=Ee?"#ffd700":we?"#444455":"#778899",yi=this.add.text(J/2+B/2-8,j-6,at,{fontSize:"7px",color:Ut,fontFamily:"monospace",fontStyle:Ee?"bold":"normal"}).setOrigin(1,0);W.add(yi),Le.setInteractive({useHandCursor:!0});const _i=de.id;if(Le.on("pointerover",()=>Le.setAlpha(1)),Le.on("pointerout",()=>Le.setAlpha(.85)),Le.on("pointerdown",()=>{A[_i]=!A[_i];const it=X;$(),X=Math.max(-R,Math.min(0,it)),W.y=X,Z()}),j+=32,pe)for(const it of me){const Xt=it.unlockClears<=this.meta.totalClears,Xa=z.has(it.id),Va=Xt?"#e0e0e0":"#444460",Ya=Xt?it.description:`Unlock: ${it.unlockClears} clears needed`,pt=this.add.rectangle(J/2,j,B-8,38,1710638,.9).setStrokeStyle(1,Xt?3359061:2236979);if(W.add(pt),Xt){const xi=it.id;pt.setInteractive({useHandCursor:!0}),pt.on("pointerover",()=>pt.setFillStyle(2763342,1)),pt.on("pointerout",()=>pt.setFillStyle(1710638,.9)),pt.on("pointerdown",()=>this.enterDungeon(xi))}const Ka=this.add.text(J/2-B/2+14,j-9,it.name,{fontSize:"11px",color:Va,fontFamily:"monospace",fontStyle:"bold"});if(W.add(Ka),Xa){const xi=this.add.text(J/2+B/2-22,j-9,"",{fontSize:"11px",color:"#4ade80",fontFamily:"monospace"});W.add(xi)}const $a=this.add.text(J/2-B/2+14,j+5,Ya,{fontSize:"8px",color:"#666680",fontFamily:"monospace"});W.add($a),j+=44}}if(H=j-S,R=Math.max(0,H-T),R>0){const fe=Math.max(20,T/H*T);L.setVisible(!0).setSize(3,fe)}else L.setVisible(!1)},Z=()=>{if(R<=0)return;const j=L.height,_=-X/R;L.y=S+_*(T-j)};$(),N>T/2&&R>0&&(X=-Math.min(R,Math.max(0,N-10)),W.y=X,Z());let Q=0;this.input.on("pointerdown",j=>{j.y>=S&&j.y<=w&&(Q=j.y)}),this.input.on("pointermove",j=>{if(!j.isDown||j.y<S||j.y>w)return;const _=j.y-Q;Q=j.y,X=Math.max(-R,Math.min(0,X+_)),W.y=X,Z()}),this.time.addEvent({delay:50,loop:!0,callback:()=>Z()});const q=Or(this.meta);q.gold>0&&this.showPassiveIncomePopup(q.gold,q.hours,Gi(this.meta)),Gr(this.meta)}createButton(F,b,I,B,O,f,x,e){const o=this.add.rectangle(F,b,I,B,1710638,.9).setStrokeStyle(1,e?3359061:2236979);e&&(o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>o.setFillStyle(2763342,1)),o.on("pointerout",()=>o.setFillStyle(1710638,.9)),o.on("pointerdown",e)),this.add.text(F-I/2+12,b-10,O,{fontSize:"12px",color:x,fontFamily:"monospace",fontStyle:"bold"}),this.add.text(F-I/2+12,b+5,f,{fontSize:"9px",color:"#666680",fontFamily:"monospace"})}createFixedButton(F,b,I,B,O,f,x,e){const o=this.add.rectangle(F,b,I,B,1710638,.9).setStrokeStyle(1,e?3359061:2236979).setDepth(51);e&&(o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>o.setFillStyle(2763342,1)),o.on("pointerout",()=>o.setFillStyle(1710638,.9)),o.on("pointerdown",e));const m=this.add.text(F-I/2+12,b-8,O,{fontSize:"11px",color:x,fontFamily:"monospace",fontStyle:"bold"}).setDepth(52),n=this.add.text(F-I/2+12,b+5,f,{fontSize:"8px",color:"#666680",fontFamily:"monospace"}).setDepth(52);return{titleText:m,descText:n}}enterDungeon(F){this.scene.start("DungeonPreviewScene",{dungeonId:F,meta:this.meta})}enterChallengeMode(F){const b=ms(this.meta.totalClears).filter(B=>B.id!=="endlessDungeon"&&B.id!=="destinyTower"&&B.id!=="dailyDungeon"&&B.id!=="bossRush");if(b.length===0)return;const I=b[Math.floor(Math.random()*b.length)];this.enterDungeonWithChallenge(I.id,F)}enterDungeonWithChallenge(F,b){this.scene.start("DungeonPreviewScene",{dungeonId:F,meta:this.meta,challengeMode:b})}continueSave(){const F=as();if(!F){wt();return}this.cameras.main.fadeOut(400,0,0,0),this.time.delayedCall(450,()=>{this.scene.start("DungeonScene",{floor:F.floor,hp:F.hp,maxHp:F.maxHp,level:F.level,atk:F.atk,def:F.def,exp:F.totalExp,skills:ha(F.skills),inventory:ir(F.inventory),fromHub:!0,dungeonId:F.dungeonId,starter:F.starter??this.meta.starter??"mudkip",challengeMode:F.challengeMode,modifiers:F.modifiers})})}showNotice(F){const b=this.add.rectangle(J/2,ee/2,J,ee,0,.7).setDepth(200).setInteractive(),I=this.add.text(J/2,ee/2-20,F,{fontSize:"12px",color:"#e0e0e0",fontFamily:"monospace",align:"center"}).setOrigin(.5).setDepth(201),B=this.add.text(J/2,ee/2+50,"[Close]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setDepth(201).setInteractive(),O=()=>{b.destroy(),I.destroy(),B.destroy()};B.on("pointerdown",O),b.on("pointerdown",O)}showPassiveIncomePopup(F,b,I){const B=[],O=this.add.rectangle(J/2,ee/2,J,ee,0,.6).setDepth(300).setInteractive();B.push(O);const f=260,x=140,e=J/2,o=ee/2-40,m=this.add.rectangle(e,o,f,x,1710638,.95).setStrokeStyle(2,16498468).setDepth(301);B.push(m);const n=this.add.text(e,o-50,"Welcome back!",{fontSize:"14px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(302);B.push(n);const r=this.add.text(e,o-28,`Away for ${b} hour${b!==1?"s":""}`,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5).setDepth(302);B.push(r);const a=this.add.text(e,o,"0 Gold",{fontSize:"16px",color:"#fde68a",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(302);B.push(a);const t=Math.min(1500,F*20);this.tweens.addCounter({from:0,to:F,duration:Math.max(300,t),ease:"Cubic.easeOut",onUpdate:d=>{const c=Math.floor(d.getValue()??0);a.setText(`+${c} Gold`)},onComplete:()=>{a.setText(`+${F} Gold`)}});const s=this.add.text(e,o+25,`Income rate: ${I}G/hr`,{fontSize:"9px",color:"#c9a833",fontFamily:"monospace"}).setOrigin(.5).setDepth(302);B.push(s);const l=this.add.text(e,o+52,"[ Collect ]",{fontSize:"13px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(302).setInteractive({useHandCursor:!0});B.push(l);let i=!1;const h=()=>{i||(i=!0,this.meta.gold+=F,this.meta.totalGold+=F,Ke(this.meta),B.forEach(d=>d.destroy()))};l.on("pointerdown",h),O.on("pointerdown",h),this.time.delayedCall(5e3,()=>{i||h()})}showNGPlusPanel(){const F=[],b=Wt(this.meta),I=ws(this.meta),B=this.add.rectangle(J/2,ee/2,J,ee,0,.85).setDepth(200).setInteractive();F.push(B);const O=this.add.text(J/2,30,"-- New Game Plus --",{fontSize:"14px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(201);F.push(O);const f=b>0?`Current: NG+${b}`:"Not yet activated",x=this.add.text(J/2,52,f,{fontSize:"11px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setDepth(201);F.push(x);let e=75;if(b>0){const n=this.add.text(J/2,e,"Active Bonuses:",{fontSize:"10px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(201);F.push(n),e+=16;const r=Sa(b);for(const a of r){const t=this.add.text(J/2,e,a.description,{fontSize:"8px",color:"#a5f3a3",fontFamily:"monospace"}).setOrigin(.5).setDepth(201);F.push(t),e+=13}e+=8}const o=Br(b);if(o){const n=this.add.text(J/2,e,`Next: NG+${b+1} (${o.clears} clears)`,{fontSize:"10px",color:"#fde68a",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(201);F.push(n),e+=16;const r=`Progress: ${this.meta.totalClears}/${o.clears} clears`,a=this.add.text(J/2,e,r,{fontSize:"9px",color:this.meta.totalClears>=o.clears?"#4ade80":"#94a3b8",fontFamily:"monospace"}).setOrigin(.5).setDepth(201);F.push(a),e+=16;const t=this.add.text(J/2,e,"New bonuses:",{fontSize:"9px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5).setDepth(201);F.push(t),e+=14;for(const s of o.bonuses){const l=this.add.text(J/2,e,s.description,{fontSize:"8px",color:"#fef3c7",fontFamily:"monospace"}).setOrigin(.5).setDepth(201);F.push(l),e+=13}e+=12}else{const n=this.add.text(J/2,e,"Maximum NG+ level reached!",{fontSize:"10px",color:"#a855f7",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(201);F.push(n),e+=20}const m=()=>{F.forEach(n=>n.destroy())};if(I){const n=this.add.text(J/2-60,e,"[Activate NG+]",{fontSize:"13px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(201).setInteractive({useHandCursor:!0});F.push(n),n.on("pointerdown",()=>{Dr(this.meta),m(),this.scene.restart()});const r=this.add.text(J/2+60,e,"[Later]",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setDepth(201).setInteractive({useHandCursor:!0});F.push(r),r.on("pointerdown",m)}else{const n=this.add.text(J/2,e,"[Close]",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setDepth(201).setInteractive({useHandCursor:!0});F.push(n),n.on("pointerdown",m)}}showStarterSelect(){const F=[];let b=!0;const I=this.add.rectangle(J/2,ee/2,J,ee,0,.85).setDepth(200).setInteractive();F.push(I);const B=this.add.text(J/2,30," Choose Starter ",{fontSize:"14px",color:"#f472b6",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(201);F.push(B);const O=this.getStarterList(),f=this.meta.starter??"mudkip",x=36,e=50,m=ee-50-e,n=Math.ceil(m/x)+2,r=O.length*x+40,a=Math.max(0,r-m),t=this.make.graphics({x:0,y:0});t.fillRect(0,e,J,m),F.push(t);const s=t.createGeometryMask(),l=[],i=this.add.container(0,0).setDepth(202).setMask(s);F.push(i);for(let w=0;w<n;w++){const T=this.add.rectangle(J/2,0,300,30,1710638,.95).setStrokeStyle(1,3359061),C=this.add.text(J/2-130,0,"",{fontSize:"11px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"}),M=this.add.text(J/2-130,0,"",{fontSize:"7px",color:"#666680",fontFamily:"monospace"});i.add([T,C,M]),T.setInteractive({useHandCursor:!0}),l.push({bg:T,nameT:C,descT:M,idx:-1})}const h=this.add.text(J/2,0,"[Close]",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive().setDepth(202);i.add(h);let d=0;const c=O.findIndex(w=>w.id===f);c>5&&(d=Math.min(a,(c-3)*x));const u=()=>{b&&(b=!1,this.input.off("pointermove",S),F.forEach(w=>w.destroy()))},p=(w,T,C)=>{if(w.idx=T,w.bg.setY(C),w.nameT.setY(C-7),w.descT.setY(C+5),T<0||T>=O.length){w.bg.setVisible(!1),w.nameT.setVisible(!1),w.descT.setVisible(!1);return}const M=O[T],E=this.meta.totalClears>=M.unlock,P=M.id===(this.meta.starter??"mudkip"),A=P?"#fbbf24":E?"#e0e0e0":"#444460";w.bg.setVisible(!0).setFillStyle(1710638,.95).setStrokeStyle(1,P?16498468:E?3359061:2236979),w.nameT.setVisible(!0).setText(P?` ${M.name}`:M.name).setColor(A),w.descT.setVisible(!0).setText(E?P?"Currently selected":"Tap to select":`Need ${M.unlock} clears (have ${this.meta.totalClears})`),w.bg.removeAllListeners("pointerdown"),w.bg.removeAllListeners("pointerover"),w.bg.removeAllListeners("pointerout"),E&&!P&&(w.bg.on("pointerover",()=>w.bg.setFillStyle(2763342,1)),w.bg.on("pointerout",()=>w.bg.setFillStyle(1710638,.95)),w.bg.on("pointerdown",()=>{this.meta.starter=M.id,Ke(this.meta);const D=M.name.charAt(0).toUpperCase()+M.name.slice(1);this.starterLabel&&this.starterLabel.setText(`Starter: ${D}`),g()}))},g=()=>{const w=Math.floor(d/x);for(let C=0;C<n;C++){const M=w+C,E=e+10+M*x-d;p(l[C],M,E)}const T=e+10+O.length*x-d+10;h.setY(T)};g(),h.on("pointerdown",u);let y=0,v=!1;I.on("pointerdown",w=>{y=w.y,v=!0});const S=w=>{if(!b||!w.isDown||!v)return;const T=w.y-y;y=w.y,d=Math.max(0,Math.min(a,d-T)),g()};this.input.on("pointermove",S),this.input.on("pointerup",()=>{v=!1})}getStarterList(){return ya}}const Mt="'Courier New', Courier, monospace";function Wr(){const G=document.createElement("div");G.id="dom-hud",G.style.cssText=`
    position: relative;
    width: ${J}px;
    height: ${ee}px;
    pointer-events: none;
    font-family: ${Mt};
    overflow: hidden;
    user-select: none;
    -webkit-user-select: none;
  `;const F=bt("span",{left:"8px",top:"28px",fontSize:"11px",color:"#fbbf24",fontWeight:"bold"});G.appendChild(F);const b=bt("span",{left:"40px",top:"8px",fontSize:"8px",color:"#ffffff"});G.appendChild(b);const I=bt("span",{left:"8px",top:"40px",fontSize:"10px",color:"#60a5fa"});G.appendChild(I);const B=bt("span",{left:"8px",top:"52px",fontSize:"8px",color:"#6b7280"});G.appendChild(B);const O=bt("span",{left:"40px",top:"19px",fontSize:"5px",color:"#ffffff"});G.appendChild(O);const f=document.createElement("div");f.style.cssText=`
    position: absolute;
    left: 8px; bottom: 200px;
    max-width: 340px;
    font-size: 10px;
    color: #fbbf24;
    font-family: ${Mt};
    background: rgba(0,0,0,0.8);
    padding: 4px 6px;
    border-radius: 3px;
    line-height: 1.4;
    white-space: pre-wrap;
    pointer-events: none;
    display: none;
  `,G.appendChild(f);const x=bt("span",{right:"10px",bottom:"210px",fontSize:"11px",color:"#999999",fontWeight:"bold",textAlign:"right",textShadow:"1px 1px 2px #000"});x.style.display="none",G.appendChild(x);const e=[];for(let r=0;r<4;r++){const a=document.createElement("button");a.style.cssText=`
      position: absolute;
      width: 82px; height: 28px;
      font-size: 10px;
      font-family: ${Mt};
      color: #c0c8e0;
      background: rgba(26,26,46,0.85);
      border: 1px solid #333355;
      border-radius: 4px;
      pointer-events: auto;
      cursor: pointer;
      padding: 0 4px;
      text-align: center;
      line-height: 28px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,e.push(a),G.appendChild(a)}const o=document.createElement("button");o.textContent="",o.style.cssText=Ts(),G.appendChild(o);const m=document.createElement("button");m.textContent="",m.style.cssText=Ts(),G.appendChild(m);const n=document.createElement("button");return n.textContent="Team",n.style.cssText=`
    position: absolute;
    font-size: 10px;
    font-family: ${Mt};
    font-weight: bold;
    color: #60a5fa;
    background: rgba(26,26,46,0.85);
    border: 1px solid #333355;
    border-radius: 4px;
    padding: 3px 8px;
    pointer-events: auto;
    cursor: pointer;
  `,G.appendChild(n),{container:G,floorLabel:F,hpLabel:b,turnLabel:I,timerLabel:B,bellyLabel:O,logBox:f,chainLabel:x,skillBtns:e,pickupBtn:o,quickSlotBtn:m,teamBtn:n}}function bt(G,F){const b=document.createElement(G);b.style.position="absolute",b.style.fontFamily=Mt,b.style.pointerEvents="none";for(const[I,B]of Object.entries(F))b.style[I]=B;return b}function Ts(){return`
    position: absolute;
    font-size: 18px;
    font-family: ${Mt};
    color: #aab0c8;
    background: rgba(26,26,46,0.85);
    border: 1px solid #333355;
    border-radius: 4px;
    padding: 4px 6px;
    pointer-events: auto;
    cursor: pointer;
  `}function ks(G,F,b,I){const O=(F==="right"?"left":"right")==="left"?8:b-172,f=I-70;for(let o=0;o<4;o++){const m=o%2,n=Math.floor(o/2),r=G.skillBtns[o];r.style.left=`${O+m*84}px`,r.style.top=`${f+n*30}px`}const x=b/2,e=I-55;G.pickupBtn.style.left=`${x-36}px`,G.pickupBtn.style.top=`${e-15}px`,G.quickSlotBtn.style.left=`${x+8}px`,G.quickSlotBtn.style.top=`${e-15}px`,G.teamBtn.style.left=`${x-20}px`,G.teamBtn.style.top=`${e+12}px`}const Zt=23283064365386963e-26;class Yi{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(F){return F=F<1?1/F:F,this._seed=F,this._s0=(F>>>0)*Zt,F=F*69069+1>>>0,this._s1=F*Zt,F=F*69069+1>>>0,this._s2=F*Zt,this._c=1,this}getUniform(){let F=2091639*this._s0+this._c*Zt;return this._s0=this._s1,this._s1=this._s2,this._c=F|0,this._s2=F-this._c,this._s2}getUniformInt(F,b){let I=Math.max(F,b),B=Math.min(F,b);return Math.floor(this.getUniform()*(I-B+1))+B}getNormal(F=0,b=1){let I,B,O;do I=2*this.getUniform()-1,B=2*this.getUniform()-1,O=I*I+B*B;while(O>1||O==0);let f=I*Math.sqrt(-2*Math.log(O)/O);return F+f*b}getPercentage(){return 1+Math.floor(this.getUniform()*100)}getItem(F){return F.length?F[Math.floor(this.getUniform()*F.length)]:null}shuffle(F){let b=[],I=F.slice();for(;I.length;){let B=I.indexOf(this.getItem(I));b.push(I.splice(B,1)[0])}return b}getWeightedValue(F){let b=0;for(let f in F)b+=F[f];let I=this.getUniform()*b,B,O=0;for(B in F)if(O+=F[B],I<O)return B;return B}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(F){return this._s0=F[0],this._s1=F[1],this._s2=F[2],this._c=F[3],this}clone(){return new Yi().setState(this.getState())}}const Ve=new Yi().setSeed(Date.now());class Nr{getContainer(){return null}setOptions(F){this._options=F}}class Ur extends Nr{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}schedule(F){requestAnimationFrame(F)}getContainer(){return this._ctx.canvas}setOptions(F){super.setOptions(F);const I=`${F.fontStyle?`${F.fontStyle} `:""} ${F.fontSize}px ${F.fontFamily}`;this._ctx.font=I,this._updateSize(),this._ctx.font=I,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){const F=this._ctx.globalCompositeOperation;this._ctx.globalCompositeOperation="copy",this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height),this._ctx.globalCompositeOperation=F}eventToPosition(F,b){let I=this._ctx.canvas,B=I.getBoundingClientRect();return F-=B.left,b-=B.top,F*=I.width/B.width,b*=I.height/B.height,F<0||b<0||F>=I.width||b>=I.height?[-1,-1]:this._normalizedEventToPosition(F,b)}}class Ki extends Ur{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(F){super.setOptions(F),this._canvasCache={}}draw(F,b){Ki.cache?this._drawWithCache(F):this._drawNoCache(F,b)}_drawWithCache(F){let[b,I,B,O,f]=F,x=""+B+O+f,e;if(x in this._canvasCache)e=this._canvasCache[x];else{let o=this._options.border;e=document.createElement("canvas");let m=e.getContext("2d");if(e.width=this._spacingX,e.height=this._spacingY,m.fillStyle=f,m.fillRect(o,o,e.width-o,e.height-o),B){m.fillStyle=O,m.font=this._ctx.font,m.textAlign="center",m.textBaseline="middle";let n=[].concat(B);for(let r=0;r<n.length;r++)m.fillText(n[r],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[x]=e}this._ctx.drawImage(e,b*this._spacingX,I*this._spacingY)}_drawNoCache(F,b){let[I,B,O,f,x]=F;if(b){let o=this._options.border;this._ctx.fillStyle=x,this._ctx.fillRect(I*this._spacingX+o,B*this._spacingY+o,this._spacingX-o,this._spacingY-o)}if(!O)return;this._ctx.fillStyle=f;let e=[].concat(O);for(let o=0;o<e.length;o++)this._ctx.fillText(e[o],(I+.5)*this._spacingX,Math.ceil((B+.5)*this._spacingY))}computeSize(F,b){let I=Math.floor(F/this._spacingX),B=Math.floor(b/this._spacingY);return[I,B]}computeFontSize(F,b){let I=Math.floor(F/this._options.width),B=Math.floor(b/this._options.height),O=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let f=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=O;let e=f/100*B/I;return e>1&&(B=Math.floor(B/e)),Math.floor(B/this._options.spacing)}_normalizedEventToPosition(F,b){return[Math.floor(F/this._spacingX),Math.floor(b/this._spacingY)]}_updateSize(){const F=this._options,b=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(F.spacing*b),this._spacingY=Math.ceil(F.spacing*F.fontSize),F.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=F.width*this._spacingX,this._ctx.canvas.height=F.height*this._spacingY}}Ki.cache=!1;let Xr=80,Vr=25,Yr=class{constructor(F=Xr,b=Vr){this._width=F,this._height=b}_fillMap(F){let b=[];for(let I=0;I<this._width;I++){b.push([]);for(let B=0;B<this._height;B++)b[I].push(F)}return b}};class Kr extends Yr{constructor(F,b){super(F,b),this._rooms=[],this._corridors=[]}getRooms(){return this._rooms}getCorridors(){return this._corridors}}class Fa{}class $r extends Fa{constructor(F,b,I,B,O,f){super(),this._x1=F,this._y1=b,this._x2=I,this._y2=B,this._doors={},O!==void 0&&f!==void 0&&this.addDoor(O,f)}static createRandomAt(F,b,I,B,O){let f=O.roomWidth[0],x=O.roomWidth[1],e=Ve.getUniformInt(f,x);f=O.roomHeight[0],x=O.roomHeight[1];let o=Ve.getUniformInt(f,x);if(I==1){let m=b-Math.floor(Ve.getUniform()*o);return new this(F+1,m,F+e,m+o-1,F,b)}if(I==-1){let m=b-Math.floor(Ve.getUniform()*o);return new this(F-e,m,F-1,m+o-1,F,b)}if(B==1){let m=F-Math.floor(Ve.getUniform()*e);return new this(m,b+1,m+e-1,b+o,F,b)}if(B==-1){let m=F-Math.floor(Ve.getUniform()*e);return new this(m,b-o,m+e-1,b-1,F,b)}throw new Error("dx or dy must be 1 or -1")}static createRandomCenter(F,b,I){let B=I.roomWidth[0],O=I.roomWidth[1],f=Ve.getUniformInt(B,O);B=I.roomHeight[0],O=I.roomHeight[1];let x=Ve.getUniformInt(B,O),e=F-Math.floor(Ve.getUniform()*f),o=b-Math.floor(Ve.getUniform()*x),m=e+f-1,n=o+x-1;return new this(e,o,m,n)}static createRandom(F,b,I){let B=I.roomWidth[0],O=I.roomWidth[1],f=Ve.getUniformInt(B,O);B=I.roomHeight[0],O=I.roomHeight[1];let x=Ve.getUniformInt(B,O),e=F-f-1,o=b-x-1,m=1+Math.floor(Ve.getUniform()*e),n=1+Math.floor(Ve.getUniform()*o),r=m+f-1,a=n+x-1;return new this(m,n,r,a)}addDoor(F,b){return this._doors[F+","+b]=1,this}getDoors(F){for(let b in this._doors){let I=b.split(",");F(parseInt(I[0]),parseInt(I[1]))}return this}clearDoors(){return this._doors={},this}addDoors(F){let b=this._x1-1,I=this._x2+1,B=this._y1-1,O=this._y2+1;for(let f=b;f<=I;f++)for(let x=B;x<=O;x++)f!=b&&f!=I&&x!=B&&x!=O||F(f,x)||this.addDoor(f,x);return this}debug(){console.log("room",this._x1,this._y1,this._x2,this._y2)}isValid(F,b){let I=this._x1-1,B=this._x2+1,O=this._y1-1,f=this._y2+1;for(let x=I;x<=B;x++)for(let e=O;e<=f;e++)if(x==I||x==B||e==O||e==f){if(!F(x,e))return!1}else if(!b(x,e))return!1;return!0}create(F){let b=this._x1-1,I=this._x2+1,B=this._y1-1,O=this._y2+1,f=0;for(let x=b;x<=I;x++)for(let e=B;e<=O;e++)x+","+e in this._doors?f=2:x==b||x==I||e==B||e==O?f=1:f=0,F(x,e,f)}getCenter(){return[Math.round((this._x1+this._x2)/2),Math.round((this._y1+this._y2)/2)]}getLeft(){return this._x1}getRight(){return this._x2}getTop(){return this._y1}getBottom(){return this._y2}}class Zr extends Fa{constructor(F,b,I,B){super(),this._startX=F,this._startY=b,this._endX=I,this._endY=B,this._endsWithAWall=!0}static createRandomAt(F,b,I,B,O){let f=O.corridorLength[0],x=O.corridorLength[1],e=Ve.getUniformInt(f,x);return new this(F,b,F+I*e,b+B*e)}debug(){console.log("corridor",this._startX,this._startY,this._endX,this._endY)}isValid(F,b){let I=this._startX,B=this._startY,O=this._endX-I,f=this._endY-B,x=1+Math.max(Math.abs(O),Math.abs(f));O&&(O=O/Math.abs(O)),f&&(f=f/Math.abs(f));let e=f,o=-O,m=!0;for(let a=0;a<x;a++){let t=I+a*O,s=B+a*f;if(b(t,s)||(m=!1),F(t+e,s+o)||(m=!1),F(t-e,s-o)||(m=!1),!m){x=a,this._endX=t-O,this._endY=s-f;break}}if(x==0||x==1&&F(this._endX+O,this._endY+f))return!1;let n=!F(this._endX+O+e,this._endY+f+o),r=!F(this._endX+O-e,this._endY+f-o);return this._endsWithAWall=F(this._endX+O,this._endY+f),!((n||r)&&this._endsWithAWall)}create(F){let b=this._startX,I=this._startY,B=this._endX-b,O=this._endY-I,f=1+Math.max(Math.abs(B),Math.abs(O));B&&(B=B/Math.abs(B)),O&&(O=O/Math.abs(O));for(let x=0;x<f;x++){let e=b+x*B,o=I+x*O;F(e,o,0)}return!0}createPriorityWalls(F){if(!this._endsWithAWall)return;let b=this._startX,I=this._startY,B=this._endX-b,O=this._endY-I;B&&(B=B/Math.abs(B)),O&&(O=O/Math.abs(O));let f=O,x=-B;F(this._endX+B,this._endY+O),F(this._endX+f,this._endY+x),F(this._endX-f,this._endY-x)}}class Jr extends Kr{constructor(F,b,I){super(F,b),this._options={roomWidth:[3,9],roomHeight:[3,5],roomDugPercentage:.1,timeLimit:1e3},Object.assign(this._options,I),this._map=[],this._dug=0,this._roomAttempts=20,this._corridorAttempts=20,this._connected=[],this._unconnected=[],this._digCallback=this._digCallback.bind(this),this._canBeDugCallback=this._canBeDugCallback.bind(this),this._isWallCallback=this._isWallCallback.bind(this)}create(F){let b=Date.now();for(;;){if(Date.now()-b>this._options.timeLimit)return null;if(this._map=this._fillMap(1),this._dug=0,this._rooms=[],this._unconnected=[],this._generateRooms(),!(this._rooms.length<2)&&this._generateCorridors())break}if(F)for(let I=0;I<this._width;I++)for(let B=0;B<this._height;B++)F(I,B,this._map[I][B]);return this}_generateRooms(){let F=this._width-2,b=this._height-2,I;do if(I=this._generateRoom(),this._dug/(F*b)>this._options.roomDugPercentage)break;while(I)}_generateRoom(){let F=0;for(;F<this._roomAttempts;){F++;let b=$r.createRandom(this._width,this._height,this._options);if(b.isValid(this._isWallCallback,this._canBeDugCallback))return b.create(this._digCallback),this._rooms.push(b),b}return null}_generateCorridors(){let F=0;for(;F<this._corridorAttempts;){F++,this._corridors=[],this._map=this._fillMap(1);for(let b=0;b<this._rooms.length;b++){let I=this._rooms[b];I.clearDoors(),I.create(this._digCallback)}for(this._unconnected=Ve.shuffle(this._rooms.slice()),this._connected=[],this._unconnected.length&&this._connected.push(this._unconnected.pop());;){let b=Ve.getItem(this._connected);if(!b)break;let I=this._closestRoom(this._unconnected,b);if(!I)break;let B=this._closestRoom(this._connected,I);if(!B||!this._connectRooms(I,B))break;if(!this._unconnected.length)return!0}}return!1}_closestRoom(F,b){let I=1/0,B=b.getCenter(),O=null;for(let f=0;f<F.length;f++){let x=F[f],e=x.getCenter(),o=e[0]-B[0],m=e[1]-B[1],n=o*o+m*m;n<I&&(I=n,O=x)}return O}_connectRooms(F,b){let I=F.getCenter(),B=b.getCenter(),O=B[0]-I[0],f=B[1]-I[1],x,e,o,m,n,r,a;if(Math.abs(O)<Math.abs(f)?(o=f>0?2:0,m=(o+2)%4,n=b.getLeft(),r=b.getRight(),a=0):(o=O>0?1:3,m=(o+2)%4,n=b.getTop(),r=b.getBottom(),a=1),x=this._placeInWall(F,o),!x)return!1;if(x[a]>=n&&x[a]<=r){e=x.slice();let t=0;switch(m){case 0:t=b.getTop()-1;break;case 1:t=b.getRight()+1;break;case 2:t=b.getBottom()+1;break;case 3:t=b.getLeft()-1;break}e[(a+1)%2]=t,this._digLine([x,e])}else if(x[a]<n-1||x[a]>r+1){let t=x[a]-B[a],s=0;switch(m){case 0:case 1:s=t<0?3:1;break;case 2:case 3:s=t<0?1:3;break}if(m=(m+s)%4,e=this._placeInWall(b,m),!e)return!1;let l=[0,0];l[a]=x[a];let i=(a+1)%2;l[i]=e[i],this._digLine([x,l,e])}else{let t=(a+1)%2;if(e=this._placeInWall(b,m),!e)return!1;let s=Math.round((e[t]+x[t])/2),l=[0,0],i=[0,0];l[a]=x[a],l[t]=s,i[a]=e[a],i[t]=s,this._digLine([x,l,i,e])}return F.addDoor(x[0],x[1]),b.addDoor(e[0],e[1]),a=this._unconnected.indexOf(F),a!=-1&&(this._unconnected.splice(a,1),this._connected.push(F)),a=this._unconnected.indexOf(b),a!=-1&&(this._unconnected.splice(a,1),this._connected.push(b)),!0}_placeInWall(F,b){let I=[0,0],B=[0,0],O=0;switch(b){case 0:B=[1,0],I=[F.getLeft(),F.getTop()-1],O=F.getRight()-F.getLeft()+1;break;case 1:B=[0,1],I=[F.getRight()+1,F.getTop()],O=F.getBottom()-F.getTop()+1;break;case 2:B=[1,0],I=[F.getLeft(),F.getBottom()+1],O=F.getRight()-F.getLeft()+1;break;case 3:B=[0,1],I=[F.getLeft()-1,F.getTop()],O=F.getBottom()-F.getTop()+1;break}let f=[],x=-2;for(let e=0;e<O;e++){let o=I[0]+e*B[0],m=I[1]+e*B[1];f.push(null),this._map[o][m]==1?x!=e-1&&(f[e]=[o,m]):(x=e,e&&(f[e-1]=null))}for(let e=f.length-1;e>=0;e--)f[e]||f.splice(e,1);return f.length?Ve.getItem(f):null}_digLine(F){for(let b=1;b<F.length;b++){let I=F[b-1],B=F[b],O=new Zr(I[0],I[1],B[0],B[1]);O.create(this._digCallback),this._corridors.push(O)}}_digCallback(F,b,I){this._map[F][b]=I,I==0&&this._dug++}_isWallCallback(F,b){return F<0||b<0||F>=this._width||b>=this._height?!1:this._map[F][b]==1}_canBeDugCallback(F,b){return F<1||b<1||F+1>=this._width||b+1>=this._height?!1:this._map[F][b]==1}}const Qr={Uniform:Jr};var xe=(G=>(G[G.WALL=0]="WALL",G[G.WATER=1]="WATER",G[G.GROUND=2]="GROUND",G))(xe||{});function jr(G=qa,F=_a){const b=[];for(let m=0;m<F;m++){b[m]=[];for(let n=0;n<G;n++)b[m][n]=0}const I=new Qr.Uniform(G,F,{roomWidth:[3,7],roomHeight:[3,5],roomDugPercentage:.4});I.create((m,n,r)=>{r===0&&(b[n][m]=2)});const O=I.getRooms().map(m=>({x:m.getLeft(),y:m.getTop(),w:m.getRight()-m.getLeft()+1,h:m.getBottom()-m.getTop()+1})),f=O[0],x={x:Math.floor(f.x+f.w/2),y:Math.floor(f.y+f.h/2)},e=O[O.length-1],o={x:Math.floor(e.x+e.w/2),y:Math.floor(e.y+e.h/2)};return{width:G,height:F,terrain:b,rooms:O,stairsPos:o,playerStart:x}}const Cs=6,bs=18,Es={X:{x:4,y:1},A:{x:4,y:4},B:{x:3,y:3},C:{x:4,y:2},D:{x:5,y:3},AB:{x:3,y:2},AC:{x:3,y:1},AD:{x:5,y:1},BC:{x:3,y:0},BD:{x:4,y:0},CD:{x:5,y:0},ABC:{x:3,y:4},ABD:{x:2,y:4},ACD:{x:5,y:4},BCD:{x:2,y:3},ABCD:{x:4,y:3},A1B:{x:0,y:2},B2C:{x:0,y:0},C3D:{x:2,y:0},AD4:{x:2,y:2},A1BC:{x:2,y:5},AB2C:{x:2,y:6},B2CD:{x:5,y:5},BC3D:{x:4,y:5},AC3D:{x:3,y:6},ACD4:{x:3,y:5},A1BD:{x:5,y:6},ABD4:{x:4,y:6},A1B2C:{x:0,y:1},B2C3D:{x:1,y:0},AC3D4:{x:2,y:1},A1BD4:{x:1,y:2},A1BCD:{x:2,y:7},AB2CD:{x:0,y:7},ABC3D:{x:1,y:7},ABCD4:{x:3,y:7},A1B2CD:{x:1,y:3},AB2C3D:{x:0,y:4},ABC3D4:{x:0,y:3},A1BCD4:{x:1,y:4},A1B2C3D:{x:1,y:6},AB2C3D4:{x:0,y:6},A1BC3D4:{x:0,y:5},A1B2CD4:{x:1,y:5},A1BC3D:{x:4,y:7},AB2CD4:{x:5,y:7},A1B2C3D4:{x:1,y:1}};function qr(G,F,b,I,B,O){const f=(l,i)=>l<0||l>=B||i<0||i>=O?!0:G[i][l]===I,x=f(F,b-1),e=f(F+1,b),o=f(F,b+1),m=f(F-1,b),n=x&&e&&f(F+1,b-1),r=e&&o&&f(F+1,b+1),a=o&&m&&f(F-1,b+1),t=x&&m&&f(F-1,b-1);let s="";return x&&(s+="A"),n&&(s+="1"),e&&(s+="B"),r&&(s+="2"),o&&(s+="C"),a&&(s+="3"),m&&(s+="D"),t&&(s+="4"),s===""&&(s="X"),s}function _r(G,F,b,I,B){const O=G[b][F],f=qr(G,F,b,O,I,B),x=Es[f];if(!x){const o=Es.A1B2C3D4,m=o.x+O*Cs;return o.y*bs+m}const e=x.x+O*Cs;return x.y*bs+e}var ge=(G=>(G[G.Down=0]="Down",G[G.DownRight=1]="DownRight",G[G.Right=2]="Right",G[G.UpRight=3]="UpRight",G[G.Up=4]="Up",G[G.UpLeft=5]="UpLeft",G[G.Left=6]="Left",G[G.DownLeft=7]="DownLeft",G))(ge||{});const Ie={0:0,1:1,2:1,3:1,4:0,5:-1,6:-1,7:-1},Be={0:1,1:1,2:0,3:-1,4:-1,5:-1,6:0,7:1};class Ps{constructor(){this.turnNumber=0,this.processing=!1}get turn(){return this.turnNumber}get isBusy(){return this.processing}async executeTurn(F,b){if(!this.processing){this.processing=!0,await F();for(const I of b)await I();this.turnNumber++,this.processing=!1}}}var ze=(G=>(G.FollowMe="followMe",G.GoAfterFoes="goAfterFoes",G.StayHere="stayHere",G.Scatter="scatter",G))(ze||{});function Jt(G){let F=G.stats.atk;const b=G.abilityLevel??1;return G.ability===be.PurePower&&(F=Math.floor(F*Cr(b))),G.ability===be.Guts&&G.statusEffects.length>0&&(F=Math.floor(F*kr(b))),G.ability===be.NoGuard&&(F=Math.floor(F*Ar(b))),G.statusEffects.some(B=>B.type===ce.AtkUp)&&(F=Math.floor(F*1.5)),F}function Ms(G){let F=G.stats.def;const b=G.abilityLevel??1;return G.ability===be.RockHead&&(F=Math.floor(F*Mr(b))),G.ability===be.ShieldDust&&(F=Math.floor(F*Ir(b))),G.statusEffects.some(B=>B.type===ce.DefUp)&&(F=Math.floor(F*1.5)),F}const en={[ce.Burn]:"Burn",[ce.Paralyze]:"Paralysis",[ce.AtkUp]:"ATK boost",[ce.DefUp]:"DEF boost"};function tn(G){const F=[];return G.statusEffects=G.statusEffects.filter(b=>{if(b.turnsLeft--,b.turnsLeft<=0){const I=en[b.type]??b.type;return F.push(`${G.name}'s ${I} wore off!`),!1}return!0}),F}function As(G){return G.statusEffects.some(F=>F.type===ce.Paralyze)&&Math.random()<.5}function gi(G,F,b,I,B,O,f){if(G<0||G>=I||F<0||F>=B||b[F][G]!==xe.GROUND)return!1;for(const x of O)if(x!==f&&x.alive&&x.tileX===G&&x.tileY===F)return!1;return!0}function vi(G,F,b,I,B,O){const f=Ie[b],x=Be[b];return f===0||x===0?!0:F+x<0||F+x>=O||G+f<0||G+f>=B?!1:I[F][G+f]===xe.GROUND&&I[F+x][G]===xe.GROUND}function Xe(G,F,b,I){return Math.max(Math.abs(G-b),Math.abs(F-I))}const sn=5;function Is(G,F,b,I,B,O){const f=Xe(G.tileX,G.tileY,F.tileX,F.tileY);if(f>sn||f<=1)return null;let x=null,e=f;for(let o=0;o<8;o++){const m=o,n=G.tileX+Ie[m],r=G.tileY+Be[m];if(!gi(n,r,b,I,B,O,G)||!vi(G.tileX,G.tileY,m,b,I,B))continue;const a=Xe(n,r,F.tileX,F.tileY);a<e&&(e=a,x=m)}return x}function Bs(G,F){const b=Math.sign(F.tileX-G.tileX),I=Math.sign(F.tileY-G.tileY);return b===0&&I===-1?ge.Up:b===1&&I===-1?ge.UpRight:b===1&&I===0?ge.Right:b===1&&I===1?ge.DownRight:b===0&&I===1?ge.Down:b===-1&&I===1?ge.DownLeft:b===-1&&I===0?ge.Left:b===-1&&I===-1?ge.UpLeft:ge.Down}const Ta=2,ka=5,$i=3,an=8,rn=200;function Ca(G){return Ta+G}function ba(G){return ka+G}function nn(G,F,b=0){const I=Math.max(0,(G-F)*2);return Math.min(60,15+I+b)}function on(G,F,b=0){return Math.random()*100<nn(G,F,b)}function ln(G,F){const b=Math.sign(F.tileX-G.tileX),I=Math.sign(F.tileY-G.tileY);return b===0&&I===-1?ge.Up:b===1&&I===-1?ge.UpRight:b===1&&I===0?ge.Right:b===1&&I===1?ge.DownRight:b===0&&I===1?ge.Down:b===-1&&I===1?ge.DownLeft:b===-1&&I===0?ge.Left:b===-1&&I===-1?ge.UpLeft:ge.Down}function Zi(G,F,b,I,B,O,f,x,e,o=[]){if(G===b&&F===I)return null;const m=x.filter(s=>!o.includes(s)),n=new Set,r=(s,l)=>l*O+s;n.add(r(G,F));const a=[];for(let s=0;s<8;s++){const l=s,i=G+Ie[l],h=F+Be[l];if(i<0||i>=O||h<0||h>=f||B[h][i]!==xe.GROUND)continue;const d=Ie[l],c=Be[l];if(d!==0&&c!==0&&(B[F][G+d]!==xe.GROUND||B[F+c][G]!==xe.GROUND))continue;if(i===b&&h===I)return l;if(m.some(g=>g!==e&&g.alive&&g.tileX===i&&g.tileY===h))continue;const p=r(i,h);n.has(p)||(n.add(p),a.push({x:i,y:h,parentIdx:-1,dir:l}))}let t=0;for(;t<a.length&&t<rn;){const s=a[t++];for(let l=0;l<8;l++){const i=l,h=s.x+Ie[i],d=s.y+Be[i];if(h<0||h>=O||d<0||d>=f||B[d][h]!==xe.GROUND)continue;const c=Ie[i],u=Be[i];if(c!==0&&u!==0&&(B[s.y][s.x+c]!==xe.GROUND||B[s.y+u][s.x]!==xe.GROUND))continue;if(h===b&&d===I)return s.dir??a[t-1].dir;const p=r(h,d);n.has(p)||(n.add(p),m.some(y=>y!==e&&y.alive&&y.tileX===h&&y.tileY===d))||a.push({x:h,y:d,parentIdx:t-1,dir:s.dir})}}return null}function Ji(G,F,b=$i){let I=null,B=b+1;for(const O of F){if(!O.alive||O.isAlly)continue;const f=Xe(G.tileX,G.tileY,O.tileX,O.tileY);f<B&&(B=f,I=O)}return I}function hn(G,F,b,I,B,O,f,x=0){switch(G.allyTactic??ze.FollowMe){case ze.GoAfterFoes:return un(G,F,b,I,B,O,f,x);case ze.StayHere:return cn(G,b);case ze.Scatter:return fn(G,F,b,I,B,O,f);case ze.FollowMe:default:return dn(G,F,b,I,B,O,f,x)}}function dn(G,F,b,I,B,O,f,x=0){const e=Xe(G.tileX,G.tileY,F.tileX,F.tileY),o=Ca(x),m=ba(x);switch(pn(G,F,b,e,o,m)){case"yield":return{moveDir:Pa(G,F,I,B,O,f),attackTarget:null};case"attack":{for(const r of b)if(!(!r.alive||r.isAlly)&&Xe(G.tileX,G.tileY,r.tileX,r.tileY)===1)return{moveDir:null,attackTarget:r};return{moveDir:oi(G,F,I,B,O,f),attackTarget:null}}case"chase":{const r=Ji(G,b,$i);if(r){const a=Zi(G.tileX,G.tileY,r.tileX,r.tileY,I,B,O,f,G);if(a!==null)return{moveDir:a,attackTarget:null}}return{moveDir:oi(G,F,I,B,O,f),attackTarget:null}}default:return e<=o?{moveDir:null,attackTarget:null}:{moveDir:oi(G,F,I,B,O,f),attackTarget:null}}}function un(G,F,b,I,B,O,f,x=0){const e=Xe(G.tileX,G.tileY,F.tileX,F.tileY),o=ba(x);if(e===1&&Ea(G,F))return{moveDir:Pa(G,F,I,B,O,f),attackTarget:null};for(const n of b)if(!(!n.alive||n.isAlly)&&Xe(G.tileX,G.tileY,n.tileX,n.tileY)===1)return{moveDir:null,attackTarget:n};const m=Ji(G,b,an);if(m){const n=Zi(G.tileX,G.tileY,m.tileX,m.tileY,I,B,O,f,G);if(n!==null)return{moveDir:n,attackTarget:null}}return e>o?{moveDir:oi(G,F,I,B,O,f),attackTarget:null}:{moveDir:null,attackTarget:null}}function cn(G,F){for(const b of F)if(!(!b.alive||b.isAlly)&&Xe(G.tileX,G.tileY,b.tileX,b.tileY)===1)return{moveDir:null,attackTarget:b};return{moveDir:null,attackTarget:null}}function fn(G,F,b,I,B,O,f){for(const e of b)if(!(!e.alive||e.isAlly)&&Xe(G.tileX,G.tileY,e.tileX,e.tileY)===1)return{moveDir:null,attackTarget:e};const x=[];for(let e=0;e<8;e++)x.push(e);for(let e=x.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[x[e],x[o]]=[x[o],x[e]]}for(const e of x){const o=G.tileX+Ie[e],m=G.tileY+Be[e];if(gi(o,m,I,B,O,f,G)&&vi(G.tileX,G.tileY,e,I,B,O))return{moveDir:e,attackTarget:null}}return{moveDir:null,attackTarget:null}}function pn(G,F,b,I,B=Ta,O=ka){if(I===1&&Ea(G,F))return"yield";if(I>O)return"follow";for(const x of b)if(!(!x.alive||x.isAlly)&&Xe(G.tileX,G.tileY,x.tileX,x.tileY)===1)return"attack";return Ji(G,b,$i)&&I<=O-1?"chase":"follow"}function Ea(G,F){const b=G.tileX-F.tileX,I=G.tileY-F.tileY,B=Ie[F.facing],O=Be[F.facing];return b===B&&I===O}function Pa(G,F,b,I,B,O){const f=F.facing,e=[...mn(f),...gn(f)];for(const o of e){const m=G.tileX+Ie[o],n=G.tileY+Be[o];if(gi(m,n,b,I,B,O,G)&&vi(G.tileX,G.tileY,o,b,I,B))return o}return null}function mn(G){const F=Ie[G],b=Be[G],I=[];for(let B=0;B<8;B++){const O=B,f=Ie[O],x=Be[O];F*f+b*x===0&&I.push(O)}return I}function gn(G){const F=[];for(let b=0;b<8;b++)b!==G&&F.push(b);return F}function oi(G,F,b,I,B,O){return Zi(G.tileX,G.tileY,F.tileX,F.tileY,b,I,B,O,G,[F])}const Ds=.4,vn=.5,yn=3;function mt(G,F){return G.alive&&G.stats.hp<G.stats.maxHp*F}function xn(G){return G.skills.find(F=>F.currentPp>0&&F.effect===ce.Heal&&F.range===Je.Self)??null}function Sn(G){const F=G.statusEffects.some(I=>I.type===ce.AtkUp),b=G.statusEffects.some(I=>I.type===ce.DefUp);return G.skills.find(I=>I.currentPp<=0||I.range!==Je.Self?!1:I.effect===ce.AtkUp&&!F||I.effect===ce.DefUp&&!b)??null}function Mi(G,F){let b=null,I=0;for(const B of G.skills){if(B.currentPp<=0||B.power<=0)continue;const O=hi(B.type,F.types);if(O===0)continue;const f=B.power*O;f>I&&(I=f,b=B)}return b}function Rs(G,F){return G.skills.find(b=>b.currentPp<=0||b.power<=0?!1:hi(b.type,F.types)>=2)??null}function wn(G,F,b,I){const B=G.allyTactic??ze.FollowMe,O=xn(G),f=Sn(G);if(B===ze.Scatter){const x=G.skills.filter(o=>o.currentPp>0);if(x.length===0)return null;const e=x.filter(o=>!(o.effect===ce.Heal&&!mt(G,Ds)));return e.length===0?null:e[Math.floor(Math.random()*e.length)]}if(O&&mt(G,Ds))return O;if(B===ze.FollowMe&&O){if(mt(I,vn)&&Xe(G.tileX,G.tileY,I.tileX,I.tileY)<=1&&mt(G,.8))return O;for(const x of b)if(!(x===G||!x.alive)&&Xe(G.tileX,G.tileY,x.tileX,x.tileY)<=yn&&mt(x,.3)&&mt(G,.7))return O}if(B===ze.StayHere){if(O&&mt(G,.6))return O;if(f)return f}if(B===ze.FollowMe&&f&&(!F||F&&Xe(G.tileX,G.tileY,F.tileX,F.tileY)>1)||B===ze.GoAfterFoes&&f&&f.effect===ce.AtkUp&&(!F||Xe(G.tileX,G.tileY,F.tileX,F.tileY)>1))return f;if(!F)return null;if(B===ze.GoAfterFoes){const x=Rs(G,F);if(x)return x;const e=Mi(G,F);return e||null}if(B===ze.FollowMe){const x=Rs(G,F);if(x)return x;if(Math.random()<.6){const e=Mi(G,F);if(e)return e}return null}if(B===ze.StayHere){const x=Mi(G,F);return x||null}return null}function Ls(G,F,b,I,B,O,f){switch(G){case Je.Self:return[{x:F,y:b}];case Je.Front1:return Ai(F,b,I,1,B,O,f);case Je.Front2:return Ai(F,b,I,2,B,O,f);case Je.FrontLine:return Ai(F,b,I,10,B,O,f);case Je.Around:return Fn(F,b,O,f);case Je.Room:return Tn(F,b,B,O,f)}}function Ai(G,F,b,I,B,O,f){const x=[],e=Ie[b],o=Be[b];for(let m=1;m<=I;m++){const n=G+e*m,r=F+o*m;if(n<0||n>=O||r<0||r>=f||B[r][n]===xe.WALL)break;x.push({x:n,y:r})}return x}function Fn(G,F,b,I){const B=[];for(let O=-1;O<=1;O++)for(let f=-1;f<=1;f++){if(f===0&&O===0)continue;const x=G+f,e=F+O;x>=0&&x<b&&e>=0&&e<I&&B.push({x,y:e})}return B}function Tn(G,F,b,I,B){const O=[],x=new Set,e=[{x:G,y:F}];for(x.add(`${G},${F}`);e.length>0;){const o=e.shift();(o.x!==G||o.y!==F)&&O.push(o);for(let m=-1;m<=1;m++)for(let n=-1;n<=1;n++){if(n===0&&m===0)continue;const r=o.x+n,a=o.y+m,t=`${r},${a}`;x.has(t)||r<0||r>=I||a<0||a>=B||b[a][r]===xe.WALL||Math.max(Math.abs(r-G),Math.abs(a-F))>5||(x.add(t),e.push({x:r,y:a}))}}return O}const Qi=[{from:"mudkip",to:"marshtomp",level:16,newName:"Marshtomp",hpBonus:15,atkBonus:4,defBonus:3,newSkillId:"surf"},{from:"pikachu",to:"raichu",level:16,newName:"Raichu",hpBonus:10,atkBonus:5,defBonus:2,newSkillId:"thunderShock"},{from:"machop",to:"machoke",level:16,newName:"Machoke",hpBonus:15,atkBonus:5,defBonus:3,newSkillId:"focusPunch"},{from:"geodude",to:"graveler",level:16,newName:"Graveler",hpBonus:12,atkBonus:3,defBonus:5,newSkillId:"rockThrow"},{from:"gastly",to:"haunter",level:16,newName:"Haunter",hpBonus:8,atkBonus:6,defBonus:2,newSkillId:"shadowBall"},{from:"caterpie",to:"butterfree",level:10,newName:"Butterfree",hpBonus:12,atkBonus:4,defBonus:3,newSkillId:"gust"},{from:"pidgey",to:"pidgeotto",level:14,newName:"Pidgeotto",hpBonus:10,atkBonus:4,defBonus:3,newSkillId:"wingAttack"},{from:"aron",to:"lairon",level:16,newName:"Lairon",hpBonus:15,atkBonus:4,defBonus:6,newSkillId:"ironDefense"},{from:"drowzee",to:"hypno",level:16,newName:"Hypno",hpBonus:12,atkBonus:5,defBonus:4,newSkillId:"psybeam"},{from:"charmander",to:"charmeleon",level:16,newName:"Charmeleon",hpBonus:12,atkBonus:5,defBonus:3,newSkillId:"flamethrower"},{from:"eevee",to:"espeon",level:16,newName:"Espeon",hpBonus:10,atkBonus:5,defBonus:4,newSkillId:"confusion"},{from:"slugma",to:"magcargo",level:16,newName:"Magcargo",hpBonus:15,atkBonus:4,defBonus:6,newSkillId:"lavaSurf"},{from:"numel",to:"camerupt",level:16,newName:"Camerupt",hpBonus:15,atkBonus:5,defBonus:4,newSkillId:"earthPower"},{from:"chikorita",to:"bayleef",level:16,newName:"Bayleef",hpBonus:12,atkBonus:3,defBonus:4,newSkillId:"razorLeaf"},{from:"bellsprout",to:"weepinbell",level:16,newName:"Weepinbell",hpBonus:10,atkBonus:5,defBonus:2,newSkillId:"seedBomb"},{from:"shroomish",to:"breloom",level:16,newName:"Breloom",hpBonus:12,atkBonus:6,defBonus:3,newSkillId:"focusPunch"},{from:"snorunt",to:"glalie",level:16,newName:"Glalie",hpBonus:12,atkBonus:5,defBonus:5,newSkillId:"iceBeam"},{from:"grimer",to:"muk",level:16,newName:"Muk",hpBonus:15,atkBonus:5,defBonus:4,newSkillId:"venoshock"},{from:"nidoranM",to:"nidorino",level:16,newName:"Nidorino",hpBonus:12,atkBonus:6,defBonus:3,newSkillId:"sludgeBomb"},{from:"tentacool",to:"tentacruel",level:16,newName:"Tentacruel",hpBonus:14,atkBonus:5,defBonus:5,newSkillId:"venoshock"},{from:"clefairy",to:"clefable",level:16,newName:"Clefable",hpBonus:15,atkBonus:4,defBonus:5,newSkillId:"moonblast"},{from:"jigglypuff",to:"wigglytuff",level:16,newName:"Wigglytuff",hpBonus:18,atkBonus:3,defBonus:4,newSkillId:"dazzlingGleam"},{from:"ralts",to:"kirlia",level:16,newName:"Kirlia",hpBonus:10,atkBonus:7,defBonus:3,newSkillId:"moonblast"},{from:"dratini",to:"dragonair",level:16,newName:"Dragonair",hpBonus:12,atkBonus:6,defBonus:4,newSkillId:"dragonPulse"},{from:"bagon",to:"shelgon",level:16,newName:"Shelgon",hpBonus:15,atkBonus:5,defBonus:6,newSkillId:"dracoMeteor"},{from:"gible",to:"gabite",level:16,newName:"Gabite",hpBonus:14,atkBonus:7,defBonus:4,newSkillId:"dracoMeteor"},{from:"poochyena",to:"mightyena",level:16,newName:"Mightyena",hpBonus:14,atkBonus:6,defBonus:4,newSkillId:"darkPulse"},{from:"beldum",to:"metang",level:16,newName:"Metang",hpBonus:16,atkBonus:5,defBonus:7,newSkillId:"flashCannon"},{from:"aron",to:"lairon",level:16,newName:"Lairon",hpBonus:18,atkBonus:5,defBonus:8,newSkillId:"ironHead"},{from:"sandshrew",to:"sandslash",level:16,newName:"Sandslash",hpBonus:14,atkBonus:6,defBonus:6,newSkillId:"earthPower"},{from:"trapinch",to:"vibrava",level:16,newName:"Vibrava",hpBonus:12,atkBonus:7,defBonus:4,newSkillId:"earthPower"},{from:"phanpy",to:"donphan",level:16,newName:"Donphan",hpBonus:16,atkBonus:6,defBonus:6,newSkillId:"earthPower"},{from:"horsea",to:"seadra",level:16,newName:"Seadra",hpBonus:12,atkBonus:7,defBonus:5,newSkillId:"brine"},{from:"lotad",to:"lombre",level:16,newName:"Lombre",hpBonus:14,atkBonus:5,defBonus:5,newSkillId:"waterPulse"},{from:"carvanha",to:"sharpedo",level:16,newName:"Sharpedo",hpBonus:12,atkBonus:8,defBonus:3,newSkillId:"darkPulse"},{from:"elekid",to:"electabuzz",level:16,newName:"Electabuzz",hpBonus:14,atkBonus:7,defBonus:4,newSkillId:"thunderbolt"},{from:"mareep",to:"flaaffy",level:16,newName:"Flaaffy",hpBonus:14,atkBonus:6,defBonus:5,newSkillId:"thunderbolt"},{from:"wurmple",to:"silcoon",level:10,newName:"Silcoon",hpBonus:8,atkBonus:3,defBonus:5,newSkillId:"signalBeam"},{from:"spinarak",to:"ariados",level:16,newName:"Ariados",hpBonus:14,atkBonus:6,defBonus:5,newSkillId:"signalBeam"},{from:"abra",to:"kadabra",level:14,newName:"Kadabra",hpBonus:10,atkBonus:8,defBonus:4,newSkillId:"psychic"},{from:"natu",to:"xatu",level:16,newName:"Xatu",hpBonus:14,atkBonus:6,defBonus:5,newSkillId:"psychic"},{from:"houndour",to:"houndoom",level:16,newName:"Houndoom",hpBonus:14,atkBonus:6,defBonus:4,newSkillId:"flamethrower"},{from:"sneasel",to:"weavile",level:16,newName:"Weavile",hpBonus:12,atkBonus:8,defBonus:4,newSkillId:"darkPulse"},{from:"taillow",to:"swellow",level:16,newName:"Swellow",hpBonus:12,atkBonus:7,defBonus:4,newSkillId:"braveBird"},{from:"starly",to:"staravia",level:14,newName:"Staravia",hpBonus:10,atkBonus:6,defBonus:4,newSkillId:"airSlash"},{from:"makuhita",to:"hariyama",level:16,newName:"Hariyama",hpBonus:18,atkBonus:6,defBonus:4,newSkillId:"focusPunch"},{from:"riolu",to:"lucario",level:14,newName:"Lucario",hpBonus:12,atkBonus:8,defBonus:5,newSkillId:"auraSphere"},{from:"larvitar",to:"pupitar",level:16,newName:"Pupitar",hpBonus:15,atkBonus:5,defBonus:7,newSkillId:"stoneEdge"},{from:"swinub",to:"piloswine",level:16,newName:"Piloswine",hpBonus:16,atkBonus:5,defBonus:5,newSkillId:"avalanche"},{from:"spheal",to:"sealeo",level:16,newName:"Sealeo",hpBonus:15,atkBonus:5,defBonus:6,newSkillId:"iceBeam"},{from:"zigzagoon",to:"linoone",level:14,newName:"Linoone",hpBonus:12,atkBonus:6,defBonus:4,newSkillId:"headbutt"},{from:"whismur",to:"loudred",level:16,newName:"Loudred",hpBonus:14,atkBonus:6,defBonus:4,newSkillId:"hyperVoice"},{from:"oddish",to:"gloom",level:14,newName:"Gloom",hpBonus:12,atkBonus:5,defBonus:5,newSkillId:"petalDance"},{from:"budew",to:"roselia",level:14,newName:"Roselia",hpBonus:10,atkBonus:7,defBonus:4,newSkillId:"energyBall"},{from:"vulpix",to:"ninetales",level:14,newName:"Ninetales",hpBonus:12,atkBonus:8,defBonus:5,newSkillId:"flamethrower"},{from:"ponyta",to:"rapidash",level:14,newName:"Rapidash",hpBonus:14,atkBonus:9,defBonus:4,newSkillId:"fireBlast"},{from:"staryu",to:"starmie",level:14,newName:"Starmie",hpBonus:10,atkBonus:8,defBonus:5,newSkillId:"surf"},{from:"clamperl",to:"huntail",level:14,newName:"Huntail",hpBonus:12,atkBonus:9,defBonus:5,newSkillId:"surf"},{from:"shinx",to:"luxio",level:14,newName:"Luxio",hpBonus:12,atkBonus:8,defBonus:4,newSkillId:"wildCharge"},{from:"electrike",to:"manectric",level:14,newName:"Manectric",hpBonus:10,atkBonus:9,defBonus:4,newSkillId:"thunderbolt"},{from:"gulpin",to:"swalot",level:14,newName:"Swalot",hpBonus:15,atkBonus:7,defBonus:6,newSkillId:"sludgeBomb"},{from:"ekans",to:"arbok",level:14,newName:"Arbok",hpBonus:12,atkBonus:9,defBonus:4,newSkillId:"venoshock"},{from:"cubone",to:"marowak",level:14,newName:"Marowak",hpBonus:12,atkBonus:9,defBonus:5,newSkillId:"earthPower"},{from:"diglett",to:"dugtrio",level:14,newName:"Dugtrio",hpBonus:8,atkBonus:10,defBonus:3,newSkillId:"earthPower"},{from:"paras",to:"parasect",level:14,newName:"Parasect",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"xScissor"},{from:"venonat",to:"venomoth",level:14,newName:"Venomoth",hpBonus:10,atkBonus:8,defBonus:4,newSkillId:"signalBeam"},{from:"shieldon",to:"bastiodon",level:14,newName:"Bastiodon",hpBonus:15,atkBonus:5,defBonus:10,newSkillId:"flashCannon"},{from:"bronzor",to:"bronzong",level:14,newName:"Bronzong",hpBonus:12,atkBonus:7,defBonus:8,newSkillId:"flashCannon"},{from:"misdreavus",to:"mismagius",level:14,newName:"Mismagius",hpBonus:10,atkBonus:9,defBonus:4,newSkillId:"shadowBall"},{from:"duskull",to:"dusclops",level:14,newName:"Dusclops",hpBonus:14,atkBonus:6,defBonus:8,newSkillId:"shadowBall"},{from:"axew",to:"fraxure",level:14,newName:"Fraxure",hpBonus:12,atkBonus:10,defBonus:4,newSkillId:"dragonRush"},{from:"deino",to:"zweilous",level:14,newName:"Zweilous",hpBonus:14,atkBonus:8,defBonus:6,newSkillId:"dragonPulse"},{from:"snubbull",to:"granbull",level:14,newName:"Granbull",hpBonus:12,atkBonus:10,defBonus:5,newSkillId:"playRough"},{from:"togepi",to:"togetic",level:14,newName:"Togetic",hpBonus:10,atkBonus:7,defBonus:7,newSkillId:"moonblast"},{from:"snover",to:"abomasnow",level:14,newName:"Abomasnow",hpBonus:14,atkBonus:8,defBonus:6,newSkillId:"iceBeam"},{from:"bergmite",to:"avalugg",level:14,newName:"Avalugg",hpBonus:16,atkBonus:6,defBonus:10,newSkillId:"iceHammer"},{from:"spoink",to:"grumpig",level:14,newName:"Grumpig",hpBonus:12,atkBonus:7,defBonus:7,newSkillId:"psychic"},{from:"stunky",to:"skuntank",level:14,newName:"Skuntank",hpBonus:14,atkBonus:8,defBonus:6,newSkillId:"darkPulse"},{from:"purrloin",to:"liepard",level:14,newName:"Liepard",hpBonus:10,atkBonus:10,defBonus:4,newSkillId:"foulPlay"},{from:"pidove",to:"tranquill",level:14,newName:"Tranquill",hpBonus:10,atkBonus:8,defBonus:6,newSkillId:"hurricane"},{from:"rufflet",to:"braviary",level:14,newName:"Braviary",hpBonus:14,atkBonus:10,defBonus:4,newSkillId:"bravebird"},{from:"tyrogue",to:"hitmonchan",level:14,newName:"Hitmonchan",hpBonus:10,atkBonus:10,defBonus:6,newSkillId:"closeCombat"},{from:"crabrawler",to:"crabominable",level:14,newName:"Crabominable",hpBonus:16,atkBonus:10,defBonus:4,newSkillId:"hammerArm"},{from:"roggenrola",to:"boldore",level:14,newName:"Boldore",hpBonus:14,atkBonus:8,defBonus:8,newSkillId:"rockWrecker"},{from:"rockruff",to:"lycanroc",level:14,newName:"Lycanroc",hpBonus:10,atkBonus:12,defBonus:4,newSkillId:"stoneEdge"},{from:"lillipup",to:"herdier",level:14,newName:"Herdier",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"triAttack"},{from:"minccino",to:"cinccino",level:14,newName:"Cinccino",hpBonus:10,atkBonus:8,defBonus:6,newSkillId:"hyperVoice"},{from:"foongus",to:"amoonguss",level:14,newName:"Amoonguss",hpBonus:16,atkBonus:6,defBonus:8,newSkillId:"energyBall"},{from:"petilil",to:"lilligant",level:14,newName:"Lilligant",hpBonus:10,atkBonus:10,defBonus:4,newSkillId:"petalDance"},{from:"feebas",to:"milotic",level:14,newName:"Milotic",hpBonus:12,atkBonus:8,defBonus:8,newSkillId:"dive"},{from:"wailmer",to:"wailord",level:14,newName:"Wailord",hpBonus:20,atkBonus:6,defBonus:6,newSkillId:"brine"},{from:"litwick",to:"lampent",level:14,newName:"Lampent",hpBonus:10,atkBonus:10,defBonus:4,newSkillId:"heatWave"},{from:"growlithe",to:"arcanine",level:14,newName:"Arcanine",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"fireBlast"},{from:"joltik",to:"galvantula",level:14,newName:"Galvantula",hpBonus:10,atkBonus:10,defBonus:4,newSkillId:"wildCharge"},{from:"tynamo",to:"eelektrik",level:14,newName:"Eelektrik",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"wildCharge"},{from:"trubbish",to:"garbodor",level:14,newName:"Garbodor",hpBonus:16,atkBonus:8,defBonus:6,newSkillId:"gunkShot"},{from:"skorupi",to:"drapion",level:14,newName:"Drapion",hpBonus:12,atkBonus:10,defBonus:6,newSkillId:"sludgeBomb"},{from:"mudbray",to:"mudsdale",level:14,newName:"Mudsdale",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"highHorsepower"},{from:"hippopotas",to:"hippowdon",level:14,newName:"Hippowdon",hpBonus:16,atkBonus:8,defBonus:8,newSkillId:"earthPower"},{from:"dwebble",to:"crustle",level:14,newName:"Crustle",hpBonus:12,atkBonus:8,defBonus:10,newSkillId:"rockWrecker"},{from:"binacle",to:"barbaracle",level:14,newName:"Barbaracle",hpBonus:10,atkBonus:12,defBonus:6,newSkillId:"stoneEdge"},{from:"nincada",to:"ninjask",level:14,newName:"Ninjask",hpBonus:8,atkBonus:12,defBonus:4,newSkillId:"megahorn"},{from:"venipede",to:"whirlipede",level:14,newName:"Whirlipede",hpBonus:12,atkBonus:8,defBonus:8,newSkillId:"sludgeBomb"},{from:"mienfoo",to:"mienshao",level:14,newName:"Mienshao",hpBonus:10,atkBonus:12,defBonus:4,newSkillId:"superpower"},{from:"timburr",to:"gurdurr",level:14,newName:"Gurdurr",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"superpower"},{from:"klink",to:"klang",level:14,newName:"Klang",hpBonus:12,atkBonus:8,defBonus:8,newSkillId:"gearGrind"},{from:"ferroseed",to:"ferrothorn",level:14,newName:"Ferrothorn",hpBonus:14,atkBonus:6,defBonus:12,newSkillId:"flashCannon"},{from:"phantump",to:"trevenant",level:14,newName:"Trevenant",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"phantomForce"},{from:"honedge",to:"doublade",level:14,newName:"Doublade",hpBonus:10,atkBonus:12,defBonus:8,newSkillId:"shadowBall"},{from:"solosis",to:"duosion",level:14,newName:"Duosion",hpBonus:12,atkBonus:10,defBonus:4,newSkillId:"futuresight"},{from:"elgyem",to:"beheeyem",level:14,newName:"Beheeyem",hpBonus:14,atkBonus:8,defBonus:8,newSkillId:"futuresight"},{from:"cubchoo",to:"beartic",level:14,newName:"Beartic",hpBonus:16,atkBonus:10,defBonus:6,newSkillId:"iceBeam"},{from:"sandile",to:"krokorok",level:14,newName:"Krokorok",hpBonus:12,atkBonus:10,defBonus:8,newSkillId:"crunch"},{from:"inkay",to:"malamar",level:14,newName:"Malamar",hpBonus:12,atkBonus:8,defBonus:10,newSkillId:"knockOff"},{from:"spritzee",to:"aromatisse",level:14,newName:"Aromatisse",hpBonus:14,atkBonus:6,defBonus:10,newSkillId:"dazzlingGleam"},{from:"swirlix",to:"slurpuff",level:14,newName:"Slurpuff",hpBonus:12,atkBonus:10,defBonus:8,newSkillId:"dazzlingGleam"},{from:"goomy",to:"sliggoo",level:14,newName:"Sliggoo",hpBonus:14,atkBonus:6,defBonus:10,newSkillId:"outrage"},{from:"jangmoo",to:"hakamoo",level:14,newName:"Hakamo-o",hpBonus:12,atkBonus:10,defBonus:8,newSkillId:"dragonClaw"},{from:"noibat",to:"noivern",level:14,newName:"Noivern",hpBonus:10,atkBonus:12,defBonus:6,newSkillId:"airSlash"},{from:"vullaby",to:"mandibuzz",level:14,newName:"Mandibuzz",hpBonus:16,atkBonus:4,defBonus:10,newSkillId:"aerialAce"},{from:"stufful",to:"bewear",level:14,newName:"Bewear",hpBonus:16,atkBonus:10,defBonus:6,newSkillId:"bodySlam"},{from:"wimpod",to:"golisopod",level:14,newName:"Golisopod",hpBonus:14,atkBonus:12,defBonus:8,newSkillId:"waterfall"},{from:"tympole",to:"palpitoad",level:14,newName:"Palpitoad",hpBonus:14,atkBonus:8,defBonus:8,newSkillId:"surf"},{from:"salandit",to:"salazzle",level:14,newName:"Salazzle",hpBonus:10,atkBonus:14,defBonus:4,newSkillId:"fireWhip"},{from:"larvesta",to:"volcarona",level:14,newName:"Volcarona",hpBonus:12,atkBonus:12,defBonus:6,newSkillId:"heatWave"},{from:"fomantis",to:"lurantis",level:14,newName:"Lurantis",hpBonus:12,atkBonus:12,defBonus:6,newSkillId:"leafBlade"},{from:"morelull",to:"shiinotic",level:14,newName:"Shiinotic",hpBonus:14,atkBonus:6,defBonus:10,newSkillId:"leafStorm"},{from:"charjabug",to:"vikavolt",level:14,newName:"Vikavolt",hpBonus:12,atkBonus:14,defBonus:4,newSkillId:"thunderbolt"},{from:"helioptile",to:"heliolisk",level:14,newName:"Heliolisk",hpBonus:10,atkBonus:14,defBonus:4,newSkillId:"electricTerrain"},{from:"mareanie",to:"toxapex",level:14,newName:"Toxapex",hpBonus:14,atkBonus:4,defBonus:14,newSkillId:"poisonJab"},{from:"croagunk",to:"toxicroak",level:14,newName:"Toxicroak",hpBonus:12,atkBonus:12,defBonus:6,newSkillId:"drainPunch"},{from:"sandygast",to:"palossand",level:14,newName:"Palossand",hpBonus:14,atkBonus:8,defBonus:10,newSkillId:"scorchingSand"},{from:"silicobra",to:"sandaconda",level:14,newName:"Sandaconda",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"earthPower"},{from:"dewpider",to:"araquanid",level:14,newName:"Araquanid",hpBonus:14,atkBonus:8,defBonus:10,newSkillId:"lunge"},{from:"sizzlipede",to:"centiskorch",level:14,newName:"Centiskorch",hpBonus:12,atkBonus:12,defBonus:6,newSkillId:"fireWhip"},{from:"pancham",to:"pangoro",level:14,newName:"Pangoro",hpBonus:14,atkBonus:12,defBonus:4,newSkillId:"skyUppercut"},{from:"drifloon",to:"drifblim",level:14,newName:"Drifblim",hpBonus:18,atkBonus:6,defBonus:4,newSkillId:"shadowBall"},{from:"golett",to:"golurk",level:16,newName:"Golurk",hpBonus:16,atkBonus:10,defBonus:8,newSkillId:"phantomForce"},{from:"hatenna",to:"hattrem",level:14,newName:"Hattrem",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"expandingForce"},{from:"vanillite",to:"vanillish",level:14,newName:"Vanillish",hpBonus:12,atkBonus:8,defBonus:4,newSkillId:"iceBeam"},{from:"snom",to:"frosmoth",level:14,newName:"Frosmoth",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"auroraBeam"},{from:"nickit",to:"thievul",level:14,newName:"Thievul",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"throatChop"},{from:"impidimp",to:"morgrem",level:14,newName:"Morgrem",hpBonus:12,atkBonus:10,defBonus:4,newSkillId:"throatChop"},{from:"milcery",to:"alcremie",level:14,newName:"Alcremie",hpBonus:14,atkBonus:8,defBonus:8,newSkillId:"playRough"},{from:"rookidee",to:"corvisquire",level:14,newName:"Corvisquire",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"braveBird"},{from:"archen",to:"archeops",level:16,newName:"Archeops",hpBonus:14,atkBonus:12,defBonus:4,newSkillId:"rockSlide"},{from:"wooloo",to:"dubwool",level:14,newName:"Dubwool",hpBonus:14,atkBonus:6,defBonus:10,newSkillId:"facade"},{from:"skwovet",to:"greedent",level:14,newName:"Greedent",hpBonus:16,atkBonus:8,defBonus:8,newSkillId:"facade"},{from:"chewtle",to:"drednaw",level:14,newName:"Drednaw",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"liquidation"},{from:"litleo",to:"pyroar",level:14,newName:"Pyroar",hpBonus:14,atkBonus:10,defBonus:4,newSkillId:"flamethrower"},{from:"torchic",to:"combusken",level:14,newName:"Combusken",hpBonus:12,atkBonus:10,defBonus:6,newSkillId:"blazeKick"},{from:"gossifleur",to:"eldegoss",level:14,newName:"Eldegoss",hpBonus:14,atkBonus:6,defBonus:10,newSkillId:"energyBall"},{from:"bounsweet",to:"steenee",level:14,newName:"Steenee",hpBonus:12,atkBonus:10,defBonus:6,newSkillId:"tropicalKick"},{from:"yamper",to:"boltund",level:14,newName:"Boltund",hpBonus:12,atkBonus:10,defBonus:6,newSkillId:"wildCharge"},{from:"toxel",to:"toxtricity",level:14,newName:"Toxtricity",hpBonus:14,atkBonus:12,defBonus:4,newSkillId:"nuzzle"},{from:"skrelp",to:"dragalge",level:14,newName:"Dragalge",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"sludgeBomb"},{from:"drilbur",to:"excadrill",level:14,newName:"Excadrill",hpBonus:14,atkBonus:12,defBonus:8,newSkillId:"earthquake"},{from:"nacli",to:"naclstack",level:24,newName:"Naclstack",hpBonus:14,atkBonus:8,defBonus:10,newSkillId:"stoneEdge"},{from:"tyrunt",to:"tyrantrum",level:39,newName:"Tyrantrum",hpBonus:16,atkBonus:12,defBonus:8,newSkillId:"rockSlide"},{from:"blipbug",to:"dottler",level:10,newName:"Dottler",hpBonus:10,atkBonus:6,defBonus:8,newSkillId:"psychic"},{from:"cutiefly",to:"ribombee",level:25,newName:"Ribombee",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"dazzlingGleam"},{from:"clobbopus",to:"grapploct",level:35,newName:"Grapploct",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"superpower"},{from:"tinkatink",to:"tinkatuff",level:24,newName:"Tinkatuff",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"flashCannon"},{from:"varoom",to:"revavroom",level:40,newName:"Revavroom",hpBonus:16,atkBonus:12,defBonus:8,newSkillId:"gearGrind"},{from:"greavard",to:"houndstone",level:30,newName:"Houndstone",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"phantomForce"},{from:"sinistea",to:"polteageist",level:30,newName:"Polteageist",hpBonus:12,atkBonus:10,defBonus:4,newSkillId:"shadowBall"},{from:"flittle",to:"espathra",level:35,newName:"Espathra",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"futuresight"},{from:"espurr",to:"meowstic",level:25,newName:"Meowstic",hpBonus:12,atkBonus:8,defBonus:8,newSkillId:"expandingForce"},{from:"cetoddle",to:"cetitan",level:38,newName:"Cetitan",hpBonus:20,atkBonus:10,defBonus:8,newSkillId:"iceBeam"},{from:"frigibax",to:"arctibax",level:35,newName:"Arctibax",hpBonus:16,atkBonus:12,defBonus:6,newSkillId:"dragonClaw"},{from:"zorua",to:"zoroark",level:30,newName:"Zoroark",hpBonus:14,atkBonus:12,defBonus:6,newSkillId:"nightSlash"},{from:"pawniard",to:"bisharp",level:52,newName:"Bisharp",hpBonus:16,atkBonus:12,defBonus:10,newSkillId:"ironHead"},{from:"fidough",to:"dachsbun",level:26,newName:"Dachsbun",hpBonus:14,atkBonus:8,defBonus:10,newSkillId:"playRough"},{from:"wingull",to:"pelipper",level:25,newName:"Pelipper",hpBonus:14,atkBonus:8,defBonus:10,newSkillId:"hurricane"},{from:"swablu",to:"altaria",level:35,newName:"Altaria",hpBonus:16,atkBonus:10,defBonus:8,newSkillId:"moonblast"},{from:"lechonk",to:"oinkologne",level:18,newName:"Oinkologne",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"hyperVoice"},{from:"tandemaus",to:"maushold",level:25,newName:"Maushold",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"hyperVoice"},{from:"buizel",to:"floatzel",level:26,newName:"Floatzel",hpBonus:14,atkBonus:10,defBonus:6,newSkillId:"liquidation"},{from:"finizen",to:"palafin",level:38,newName:"Palafin",hpBonus:18,atkBonus:12,defBonus:8,newSkillId:"liquidation"},{from:"fletchinder",to:"talonflame",level:35,newName:"Talonflame",hpBonus:14,atkBonus:12,defBonus:6,newSkillId:"braveBird"},{from:"smoliv",to:"dolliv",level:25,newName:"Dolliv",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"energyBall"},{from:"deerling",to:"sawsbuck",level:34,newName:"Sawsbuck",hpBonus:16,atkBonus:10,defBonus:8,newSkillId:"bodySlam"},{from:"glimmet",to:"glimmora",level:35,newName:"Glimmora",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"sludgeBomb"},{from:"koffing",to:"weezing",level:35,newName:"Weezing",hpBonus:16,atkBonus:8,defBonus:12,newSkillId:"sludgeBomb"},{from:"wooper",to:"quagsire",level:20,newName:"Quagsire",hpBonus:16,atkBonus:8,defBonus:8,newSkillId:"earthquake"},{from:"baltoy",to:"claydol",level:36,newName:"Claydol",hpBonus:14,atkBonus:8,defBonus:12,newSkillId:"psychic"},{from:"anorith",to:"armaldo",level:40,newName:"Armaldo",hpBonus:16,atkBonus:12,defBonus:8,newSkillId:"rockSlide"},{from:"surskit",to:"masquerain",level:22,newName:"Masquerain",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"silverWind"},{from:"scraggy",to:"scrafty",level:39,newName:"Scrafty",hpBonus:16,atkBonus:10,defBonus:10,newSkillId:"closeCombat"},{from:"mankey",to:"primeape",level:28,newName:"Primeape",hpBonus:14,atkBonus:12,defBonus:6,newSkillId:"closeCombat"},{from:"dreepy",to:"drakloak",level:50,newName:"Drakloak",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"dragonPulse"},{from:"munna",to:"musharna",level:30,newName:"Musharna",hpBonus:16,atkBonus:8,defBonus:10,newSkillId:"futuresight"},{from:"chingling",to:"chimecho",level:20,newName:"Chimecho",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"psychic"},{from:"smoochum",to:"jynx",level:30,newName:"Jynx",hpBonus:16,atkBonus:10,defBonus:6,newSkillId:"iceBeam"},{from:"nuzleaf",to:"shiftry",level:36,newName:"Shiftry",hpBonus:14,atkBonus:12,defBonus:8,newSkillId:"leafStorm"},{from:"marill",to:"azumarill",level:18,newName:"Azumarill",hpBonus:18,atkBonus:8,defBonus:10,newSkillId:"waterPulse"},{from:"cleffa",to:"clefairy",level:16,newName:"Clefairy",hpBonus:12,atkBonus:6,defBonus:8,newSkillId:"dazzlingGleam"},{from:"applin",to:"flapple",level:28,newName:"Flapple",hpBonus:14,atkBonus:12,defBonus:6,newSkillId:"dragonPulse"},{from:"hoppip",to:"skiploom",level:18,newName:"Skiploom",hpBonus:12,atkBonus:8,defBonus:6,newSkillId:"hurricane"},{from:"aipom",to:"ambipom",level:32,newName:"Ambipom",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"hyperVoice"},{from:"poliwag",to:"poliwhirl",level:25,newName:"Poliwhirl",hpBonus:16,atkBonus:10,defBonus:8,newSkillId:"hydroPump"},{from:"corphish",to:"crawdaunt",level:30,newName:"Crawdaunt",hpBonus:14,atkBonus:14,defBonus:6,newSkillId:"hydroPump"},{from:"magby",to:"magmar",level:30,newName:"Magmar",hpBonus:16,atkBonus:12,defBonus:6,newSkillId:"eruption"},{from:"darumaka",to:"darmanitan",level:35,newName:"Darmanitan",hpBonus:18,atkBonus:14,defBonus:6,newSkillId:"eruption"},{from:"sewaddle",to:"swadloon",level:20,newName:"Swadloon",hpBonus:14,atkBonus:8,defBonus:10,newSkillId:"powerWhip"},{from:"pumpkaboo",to:"gourgeist",level:32,newName:"Gourgeist",hpBonus:16,atkBonus:10,defBonus:10,newSkillId:"powerWhip"},{from:"nidoranF",to:"nidorina",level:16,newName:"Nidorina",hpBonus:14,atkBonus:10,defBonus:8,newSkillId:"gunkShot"},{from:"gligar",to:"gliscor",level:35,newName:"Gliscor",hpBonus:16,atkBonus:10,defBonus:12,newSkillId:"drillRun"},{from:"rhyhorn",to:"rhydon",level:42,newName:"Rhydon",hpBonus:18,atkBonus:12,defBonus:10,newSkillId:"drillRun"},{from:"boldore",to:"gigalith",level:40,newName:"Gigalith",hpBonus:18,atkBonus:12,defBonus:12,newSkillId:"headSmash"},{from:"pineco",to:"forretress",level:31,newName:"Forretress",hpBonus:16,atkBonus:8,defBonus:14,newSkillId:"signalBeam"},{from:"slowpoke",to:"slowbro",level:37,newName:"Slowbro",hpBonus:18,atkBonus:10,defBonus:12,newSkillId:"zenHeadbutt"},{from:"shelgon",to:"salamence",level:50,newName:"Salamence",hpBonus:20,atkBonus:14,defBonus:10,newSkillId:"outrage"},{from:"gabite",to:"garchomp",level:48,newName:"Garchomp",hpBonus:18,atkBonus:16,defBonus:8,newSkillId:"outrage"},{from:"psyduck",to:"golduck",level:33,newName:"Golduck",hpBonus:18,atkBonus:14,defBonus:10,newSkillId:"originPulse"},{from:"seel",to:"dewgong",level:34,newName:"Dewgong",hpBonus:20,atkBonus:12,defBonus:14,newSkillId:"iceBeam"},{from:"cyndaquil",to:"quilava",level:14,newName:"Quilava",hpBonus:16,atkBonus:14,defBonus:8,newSkillId:"sacredFire"},{from:"fennekin",to:"braixen",level:16,newName:"Braixen",hpBonus:14,atkBonus:14,defBonus:8,newSkillId:"sacredFire"},{from:"sunkern",to:"sunflora",level:20,newName:"Sunflora",hpBonus:16,atkBonus:14,defBonus:10,newSkillId:"seedFlare"},{from:"cacnea",to:"cacturne",level:32,newName:"Cacturne",hpBonus:14,atkBonus:16,defBonus:8,newSkillId:"seedFlare"},{from:"pichu",to:"pikachu",level:16,newName:"Pikachu",hpBonus:12,atkBonus:12,defBonus:8,newSkillId:"thunderCage"},{from:"chinchou",to:"lanturn",level:27,newName:"Lanturn",hpBonus:20,atkBonus:12,defBonus:12,newSkillId:"thunderCage"},{from:"weedle",to:"kakuna",level:7,newName:"Kakuna",hpBonus:10,atkBonus:6,defBonus:10,newSkillId:"toxicThread"},{from:"onix",to:"steelix",level:36,newName:"Steelix",hpBonus:20,atkBonus:10,defBonus:16,newSkillId:"heavySlam"},{from:"omanyte",to:"omastar",level:40,newName:"Omastar",hpBonus:18,atkBonus:14,defBonus:12,newSkillId:"headSmash"},{from:"scyther",to:"scizor",level:36,newName:"Scizor",hpBonus:16,atkBonus:14,defBonus:12,newSkillId:"bulletPunch"},{from:"metang",to:"metagross",level:45,newName:"Metagross",hpBonus:20,atkBonus:16,defBonus:14,newSkillId:"meteorMash"},{from:"lairon",to:"aggron",level:42,newName:"Aggron",hpBonus:20,atkBonus:14,defBonus:16,newSkillId:"heavySlam"},{from:"murkrow",to:"honchkrow",level:36,newName:"Honchkrow",hpBonus:18,atkBonus:14,defBonus:10,newSkillId:"suckerPunch"},{from:"dragonair",to:"dragonite",level:55,newName:"Dragonite",hpBonus:22,atkBonus:16,defBonus:12,newSkillId:"hurricane"},{from:"vibrava",to:"flygon",level:45,newName:"Flygon",hpBonus:18,atkBonus:14,defBonus:10,newSkillId:"dragonRush"},{from:"staravia",to:"staraptor",level:34,newName:"Staraptor",hpBonus:16,atkBonus:14,defBonus:8,newSkillId:"braveBird"}];function kn(G,F){return Qi.find(b=>b.from===G&&F>=b.level)??null}const Te={mudkip:{id:"mudkip",name:"Mudkip",spriteKey:"mudkip",types:[k.Water],attackType:k.Water,baseStats:{hp:50,atk:12,def:6},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:6,idleFrames:7,skillIds:["tackle","waterGun","waterPulse","swordsDance"],floors:[]},zubat:{id:"zubat",name:"Zubat",spriteKey:"zubat",types:[k.Poison,k.Flying],attackType:k.Flying,baseStats:{hp:20,atk:8,def:3},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["wingAttack","leechLife","poisonSting","supersonic"],floors:[1,2,3]},shellos:{id:"shellos",name:"Shellos",spriteKey:"shellos",types:[k.Water],attackType:k.Water,baseStats:{hp:25,atk:7,def:5},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:24,walkFrames:6,idleFrames:3,skillIds:["waterGun","tackle"],floors:[2,3,4]},corsola:{id:"corsola",name:"Corsola",spriteKey:"corsola",types:[k.Water,k.Rock],attackType:k.Water,baseStats:{hp:30,atk:9,def:7},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:3,skillIds:["tackle","waterGun"],floors:[3,4,5]},geodude:{id:"geodude",name:"Geodude",spriteKey:"geodude",types:[k.Rock,k.Ground],attackType:k.Rock,baseStats:{hp:28,atk:11,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["tackle","rockThrow"],floors:[4,5]},pikachu:{id:"pikachu",name:"Pikachu",spriteKey:"pikachu",types:[k.Electric],attackType:k.Electric,baseStats:{hp:28,atk:12,def:5},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["spark","thunderShock","quickAttack"],floors:[]},voltorb:{id:"voltorb",name:"Voltorb",spriteKey:"voltorb",types:[k.Electric],attackType:k.Electric,baseStats:{hp:22,atk:8,def:4},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:8,idleFrames:5,skillIds:["tackle","sonicBoom","selfDestruct"],floors:[]},magnemite:{id:"magnemite",name:"Magnemite",spriteKey:"magnemite",types:[k.Electric],attackType:k.Electric,baseStats:{hp:22,atk:10,def:7},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["thunderShock","thunderWave","tackle"],floors:[]},caterpie:{id:"caterpie",name:"Caterpie",spriteKey:"caterpie",types:[k.Bug],attackType:k.Bug,baseStats:{hp:18,atk:6,def:3},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:3,idleFrames:10,skillIds:["tackle","stringShot","bugBite"],floors:[]},pidgey:{id:"pidgey",name:"Pidgey",spriteKey:"pidgey",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:20,atk:8,def:4},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:40,walkFrames:5,idleFrames:5,skillIds:["gust","quickAttack","tackle"],floors:[]},aron:{id:"aron",name:"Aron",spriteKey:"aron",types:[k.Steel,k.Rock],attackType:k.Steel,baseStats:{hp:30,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["metalClaw","headbutt","ironDefense"],floors:[]},beldum:{id:"beldum",name:"Beldum",spriteKey:"beldum",types:[k.Steel,k.Psychic],attackType:k.Steel,baseStats:{hp:26,atk:10,def:11},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:8,idleFrames:8,skillIds:["ironHead","bulletPunch","ironDefense"],floors:[]},skarmory:{id:"skarmory",name:"Skarmory",spriteKey:"skarmory",types:[k.Steel,k.Flying],attackType:k.Steel,baseStats:{hp:28,atk:9,def:12},walkFrameWidth:40,walkFrameHeight:72,idleFrameWidth:40,idleFrameHeight:64,walkFrames:9,idleFrames:7,skillIds:["metalClaw","airSlash","ironDefense"],floors:[]},sandshrew:{id:"sandshrew",name:"Sandshrew",spriteKey:"sandshrew",types:[k.Ground],attackType:k.Ground,baseStats:{hp:28,atk:9,def:10},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["sandAttack","dig","mudShot"],floors:[]},trapinch:{id:"trapinch",name:"Trapinch",spriteKey:"trapinch",types:[k.Ground],attackType:k.Ground,baseStats:{hp:24,atk:12,def:6},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["sandTomb","dig","mudShot"],floors:[]},phanpy:{id:"phanpy",name:"Phanpy",spriteKey:"phanpy",types:[k.Ground],attackType:k.Ground,baseStats:{hp:30,atk:9,def:9},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["tackle","earthPower","dig"],floors:[]},horsea:{id:"horsea",name:"Horsea",spriteKey:"horsea",types:[k.Water],attackType:k.Water,baseStats:{hp:22,atk:11,def:7},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["waterGun","brine","aquaJet"],floors:[]},lotad:{id:"lotad",name:"Lotad",spriteKey:"lotad",types:[k.Water,k.Grass],attackType:k.Water,baseStats:{hp:26,atk:8,def:8},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["waterGun","absorb","tackle"],floors:[]},carvanha:{id:"carvanha",name:"Carvanha",spriteKey:"carvanha",types:[k.Water,k.Dark],attackType:k.Water,baseStats:{hp:24,atk:12,def:5},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["bite","aquaJet","brine"],floors:[]},elekid:{id:"elekid",name:"Elekid",spriteKey:"elekid",types:[k.Electric],attackType:k.Electric,baseStats:{hp:24,atk:11,def:7},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["thunderPunch","spark","thunderShock"],floors:[]},mareep:{id:"mareep",name:"Mareep",spriteKey:"mareep",types:[k.Electric],attackType:k.Electric,baseStats:{hp:26,atk:9,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["thunderShock","thunderWave","tackle"],floors:[]},wurmple:{id:"wurmple",name:"Wurmple",spriteKey:"wurmple",types:[k.Bug],attackType:k.Bug,baseStats:{hp:20,atk:8,def:6},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:8,skillIds:["stringShot","bugBite","pinMissile"],floors:[]},spinarak:{id:"spinarak",name:"Spinarak",spriteKey:"spinarak",types:[k.Bug,k.Poison],attackType:k.Bug,baseStats:{hp:24,atk:10,def:7},walkFrameWidth:32,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:3,idleFrames:4,skillIds:["poisonSting","signalBeam","stringShot"],floors:[]},abra:{id:"abra",name:"Abra",spriteKey:"abra",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:20,atk:12,def:5},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:8,idleFrames:6,skillIds:["confusion","psybeam","hypnosis"],floors:[]},natu:{id:"natu",name:"Natu",spriteKey:"natu",types:[k.Psychic,k.Flying],attackType:k.Psychic,baseStats:{hp:24,atk:10,def:7},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["confusion","nightShade","psybeam"],floors:[]},meditite:{id:"meditite",name:"Meditite",spriteKey:"meditite",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:22,atk:11,def:5},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["karateChop","meditate","tackle"],floors:[]},machop:{id:"machop",name:"Machop",spriteKey:"machop",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:35,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["karateChop","lowKick","focusPunch"],floors:[]},gastly:{id:"gastly",name:"Gastly",spriteKey:"gastly",types:[k.Ghost,k.Poison],attackType:k.Ghost,baseStats:{hp:18,atk:12,def:3},walkFrameWidth:64,walkFrameHeight:64,idleFrameWidth:72,idleFrameHeight:56,walkFrames:9,idleFrames:4,skillIds:["lick","nightShade","hypnosis"],floors:[]},drowzee:{id:"drowzee",name:"Drowzee",spriteKey:"drowzee",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:30,atk:10,def:6},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["confusion","hypnosis","headbutt"],floors:[]},snorunt:{id:"snorunt",name:"Snorunt",spriteKey:"snorunt",types:[k.Ice],attackType:k.Ice,baseStats:{hp:25,atk:9,def:5},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:3,idleFrames:3,skillIds:["iceShard","iceBeam","headbutt"],floors:[]},charmander:{id:"charmander",name:"Charmander",spriteKey:"charmander",types:[k.Fire],attackType:k.Fire,baseStats:{hp:45,atk:13,def:5},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["scratch","ember","flamethrower","swordsDance"],floors:[]},eevee:{id:"eevee",name:"Eevee",spriteKey:"eevee",types:[k.Normal],attackType:k.Normal,baseStats:{hp:48,atk:11,def:7},walkFrameWidth:56,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:32,walkFrames:5,idleFrames:2,skillIds:["tackle","bite","swift","quickAttack"],floors:[]},numel:{id:"numel",name:"Numel",spriteKey:"numel",types:[k.Fire,k.Ground],attackType:k.Fire,baseStats:{hp:32,atk:10,def:6},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:40,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["ember","mudShot","bodySlam"],floors:[]},slugma:{id:"slugma",name:"Slugma",spriteKey:"slugma",types:[k.Fire],attackType:k.Fire,baseStats:{hp:25,atk:12,def:4},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["ember","rockThrow","bodySlam"],floors:[]},torkoal:{id:"torkoal",name:"Torkoal",spriteKey:"torkoal",types:[k.Fire],attackType:k.Fire,baseStats:{hp:40,atk:11,def:10},walkFrameWidth:40,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["flamethrower","bodySlam","ironDefense"],floors:[]},murkrow:{id:"murkrow",name:"Murkrow",spriteKey:"murkrow",types:[k.Dark,k.Flying],attackType:k.Dark,baseStats:{hp:28,atk:13,def:4},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:6,idleFrames:3,skillIds:["feintAttack","pursuit","wingAttack"],floors:[]},sableye:{id:"sableye",name:"Sableye",spriteKey:"sableye",types:[k.Dark,k.Ghost],attackType:k.Dark,baseStats:{hp:30,atk:11,def:7},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["nightSlash","lick","snarl"],floors:[]},absol:{id:"absol",name:"Absol",spriteKey:"absol",types:[k.Dark],attackType:k.Dark,baseStats:{hp:35,atk:15,def:5},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["nightSlash","darkPulse","quickAttack"],floors:[]},chikorita:{id:"chikorita",name:"Chikorita",spriteKey:"chikorita",types:[k.Grass],attackType:k.Grass,baseStats:{hp:45,atk:10,def:7},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["vineWhip","razorLeaf","tackle"],floors:[]},bellsprout:{id:"bellsprout",name:"Bellsprout",spriteKey:"bellsprout",types:[k.Grass,k.Poison],attackType:k.Grass,baseStats:{hp:25,atk:12,def:3},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["vineWhip","absorb","sleepPowder"],floors:[]},shroomish:{id:"shroomish",name:"Shroomish",spriteKey:"shroomish",types:[k.Grass],attackType:k.Grass,baseStats:{hp:30,atk:9,def:6},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:5,skillIds:["absorb","seedBomb","tackle"],floors:[]},grimer:{id:"grimer",name:"Grimer",spriteKey:"grimer",types:[k.Poison],attackType:k.Poison,baseStats:{hp:35,atk:10,def:6},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["poisonSting","sludgeBomb","tackle"],floors:[]},nidoranM:{id:"nidoranM",name:"Nidoran",spriteKey:"nidoranM",types:[k.Poison],attackType:k.Poison,baseStats:{hp:28,atk:12,def:5},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:5,skillIds:["poisonSting","acidSpray","tackle"],floors:[]},tentacool:{id:"tentacool",name:"Tentacool",spriteKey:"tentacool",types:[k.Water,k.Poison],attackType:k.Poison,baseStats:{hp:30,atk:11,def:5},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:7,skillIds:["poisonSting","waterPulse","acidSpray"],floors:[]},clefairy:{id:"clefairy",name:"Clefairy",spriteKey:"clefairy",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:35,atk:9,def:7},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:8,idleFrames:6,skillIds:["fairyWind","disarmingVoice","tackle"],floors:[]},jigglypuff:{id:"jigglypuff",name:"Jigglypuff",spriteKey:"jigglypuff",types:[k.Fairy,k.Normal],attackType:k.Fairy,baseStats:{hp:40,atk:8,def:5},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:5,idleFrames:5,skillIds:["disarmingVoice","drainingKiss","tackle"],floors:[]},ralts:{id:"ralts",name:"Ralts",spriteKey:"ralts",types:[k.Psychic,k.Fairy],attackType:k.Fairy,baseStats:{hp:25,atk:13,def:4},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["confusion","disarmingVoice","tackle"],floors:[]},dratini:{id:"dratini",name:"Dratini",spriteKey:"dratini",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:30,atk:12,def:5},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:5,idleFrames:4,skillIds:["dragonBreath","twister","tackle"],floors:[]},bagon:{id:"bagon",name:"Bagon",spriteKey:"bagon",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:32,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["dragonClaw","dragonBreath","tackle"],floors:[]},gible:{id:"gible",name:"Gible",spriteKey:"gible",types:[k.Dragon,k.Ground],attackType:k.Dragon,baseStats:{hp:35,atk:15,def:5},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["dragonClaw","mudShot","tackle"],floors:[]},poochyena:{id:"poochyena",name:"Poochyena",spriteKey:"poochyena",types:[k.Dark],attackType:k.Dark,baseStats:{hp:28,atk:11,def:5},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:40,walkFrames:5,idleFrames:6,skillIds:["bite","pursuit","tackle"],floors:[]},houndour:{id:"houndour",name:"Houndour",spriteKey:"houndour",types:[k.Dark,k.Fire],attackType:k.Dark,baseStats:{hp:28,atk:12,def:6},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["crunch","ember","pursuit"],floors:[]},sneasel:{id:"sneasel",name:"Sneasel",spriteKey:"sneasel",types:[k.Dark,k.Ice],attackType:k.Dark,baseStats:{hp:26,atk:14,def:5},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["nightSlash","icePunch","pursuit"],floors:[]},taillow:{id:"taillow",name:"Taillow",spriteKey:"taillow",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:24,atk:11,def:5},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:5,idleFrames:5,skillIds:["wingAttack","quickAttack","gust"],floors:[]},starly:{id:"starly",name:"Starly",spriteKey:"starly",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:22,atk:10,def:5},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:5,idleFrames:5,skillIds:["gust","quickAttack","tackle"],floors:[]},makuhita:{id:"makuhita",name:"Makuhita",spriteKey:"makuhita",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:35,atk:12,def:5},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["karateChop","drainPunch","tackle"],floors:[]},riolu:{id:"riolu",name:"Riolu",spriteKey:"riolu",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:26,atk:13,def:6},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["auraSphere","quickAttack","focusPunch"],floors:[]},larvitar:{id:"larvitar",name:"Larvitar",spriteKey:"larvitar",types:[k.Rock,k.Ground],attackType:k.Rock,baseStats:{hp:30,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["rockThrow","bite","rockSlide"],floors:[]},nosepass:{id:"nosepass",name:"Nosepass",spriteKey:"nosepass",types:[k.Rock],attackType:k.Rock,baseStats:{hp:32,atk:8,def:12},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["rockThrow","ironDefense","stoneEdge"],floors:[]},swinub:{id:"swinub",name:"Swinub",spriteKey:"swinub",types:[k.Ice,k.Ground],attackType:k.Ice,baseStats:{hp:30,atk:10,def:7},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["iceShard","dig","avalanche"],floors:[]},spheal:{id:"spheal",name:"Spheal",spriteKey:"spheal",types:[k.Ice,k.Water],attackType:k.Ice,baseStats:{hp:32,atk:9,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["icyWind","waterPulse","iceBeam"],floors:[]},zigzagoon:{id:"zigzagoon",name:"Zigzagoon",spriteKey:"zigzagoon",types:[k.Normal],attackType:k.Normal,baseStats:{hp:26,atk:9,def:6},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:7,idleFrames:6,skillIds:["headbutt","tackle","quickAttack"],floors:[]},whismur:{id:"whismur",name:"Whismur",spriteKey:"whismur",types:[k.Normal],attackType:k.Normal,baseStats:{hp:30,atk:10,def:5},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["hyperVoice","tackle","headbutt"],floors:[]},oddish:{id:"oddish",name:"Oddish",spriteKey:"oddish",types:[k.Grass,k.Poison],attackType:k.Grass,baseStats:{hp:28,atk:10,def:7},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["absorb","petalDance","poisonSting"],floors:[]},budew:{id:"budew",name:"Budew",spriteKey:"budew",types:[k.Grass,k.Poison],attackType:k.Grass,baseStats:{hp:24,atk:11,def:6},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["energyBall","absorb","poisonSting"],floors:[]},vulpix:{id:"vulpix",name:"Vulpix",spriteKey:"vulpix",types:[k.Fire],attackType:k.Fire,baseStats:{hp:26,atk:11,def:7},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:32,walkFrames:5,idleFrames:4,skillIds:["ember","fireSpin","scratch"],floors:[]},ponyta:{id:"ponyta",name:"Ponyta",spriteKey:"ponyta",types:[k.Fire],attackType:k.Fire,baseStats:{hp:30,atk:13,def:7},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["flameWheel","ember","tackle"],floors:[]},staryu:{id:"staryu",name:"Staryu",spriteKey:"staryu",types:[k.Water],attackType:k.Water,baseStats:{hp:25,atk:11,def:8},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["waterGun","aquaJet","tackle"],floors:[]},clamperl:{id:"clamperl",name:"Clamperl",spriteKey:"clamperl",types:[k.Water],attackType:k.Water,baseStats:{hp:28,atk:12,def:9},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["whirlpool","waterGun","tackle"],floors:[]},shinx:{id:"shinx",name:"Shinx",spriteKey:"shinx",types:[k.Electric],attackType:k.Electric,baseStats:{hp:28,atk:12,def:6},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:7,idleFrames:6,skillIds:["sparkCharge","thunderShock","tackle"],floors:[]},electrike:{id:"electrike",name:"Electrike",spriteKey:"electrike",types:[k.Electric],attackType:k.Electric,baseStats:{hp:26,atk:13,def:5},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["wildCharge","thunderShock","bite"],floors:[]},gulpin:{id:"gulpin",name:"Gulpin",spriteKey:"gulpin",types:[k.Poison],attackType:k.Poison,baseStats:{hp:32,atk:10,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["sludgeBomb","poisonSting","tackle"],floors:[]},ekans:{id:"ekans",name:"Ekans",spriteKey:"ekans",types:[k.Poison],attackType:k.Poison,baseStats:{hp:27,atk:12,def:6},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["venoshock","poisonSting","bite"],floors:[]},cubone:{id:"cubone",name:"Cubone",spriteKey:"cubone",types:[k.Ground],attackType:k.Ground,baseStats:{hp:30,atk:12,def:9},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["boneRush","dig","headbutt"],floors:[]},diglett:{id:"diglett",name:"Diglett",spriteKey:"diglett",types:[k.Ground],attackType:k.Ground,baseStats:{hp:20,atk:14,def:4},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:24,walkFrames:3,idleFrames:2,skillIds:["bulldoze","dig","scratch"],floors:[]},paras:{id:"paras",name:"Paras",spriteKey:"paras",types:[k.Bug,k.Grass],attackType:k.Bug,baseStats:{hp:28,atk:11,def:8},walkFrameWidth:32,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["xScissor","leechLife","absorb"],floors:[]},venonat:{id:"venonat",name:"Venonat",spriteKey:"venonat",types:[k.Bug,k.Poison],attackType:k.Bug,baseStats:{hp:30,atk:10,def:7},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["signalBeam","poisonSting","tackle"],floors:[]},shieldon:{id:"shieldon",name:"Shieldon",spriteKey:"shieldon",types:[k.Rock,k.Steel],attackType:k.Steel,baseStats:{hp:32,atk:8,def:14},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["ironHead","metalClaw","tackle"],floors:[]},bronzor:{id:"bronzor",name:"Bronzor",spriteKey:"bronzor",types:[k.Steel,k.Psychic],attackType:k.Steel,baseStats:{hp:26,atk:9,def:12},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["gyroBall","flashCannon","tackle"],floors:[]},misdreavus:{id:"misdreavus",name:"Misdreavus",spriteKey:"misdreavus",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:28,atk:12,def:6},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["shadowBall","shadowSneak","nightShade"],floors:[]},duskull:{id:"duskull",name:"Duskull",spriteKey:"duskull",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:24,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["shadowSneak","nightShade","lick"],floors:[]},axew:{id:"axew",name:"Axew",spriteKey:"axew",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:30,atk:14,def:6},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["dragonClaw","dragonRush","dragonBreath"],floors:[]},deino:{id:"deino",name:"Deino",spriteKey:"deino",types:[k.Dragon,k.Dark],attackType:k.Dragon,baseStats:{hp:28,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["dragonBreath","dragonRush","bite"],floors:[]},snubbull:{id:"snubbull",name:"Snubbull",spriteKey:"snubbull",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:30,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["playRough","fairyWind","bite"],floors:[]},togepi:{id:"togepi",name:"Togepi",spriteKey:"togepi",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:26,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["disarmingVoice","drainingKiss","fairyWind"],floors:[]},snover:{id:"snover",name:"Snover",spriteKey:"snover",types:[k.Ice,k.Grass],attackType:k.Ice,baseStats:{hp:30,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["iceShard","iceHammer","absorb"],floors:[]},bergmite:{id:"bergmite",name:"Bergmite",spriteKey:"bergmite",types:[k.Ice],attackType:k.Ice,baseStats:{hp:28,atk:10,def:12},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["avalanche","iceShard","iceHammer"],floors:[]},spoink:{id:"spoink",name:"Spoink",spriteKey:"spoink",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:28,atk:10,def:10},walkFrameWidth:32,walkFrameHeight:64,idleFrameWidth:24,idleFrameHeight:56,walkFrames:8,idleFrames:6,skillIds:["psybeam","psyshock","zenHeadbutt"],floors:[]},stunky:{id:"stunky",name:"Stunky",spriteKey:"stunky",types:[k.Dark,k.Poison],attackType:k.Dark,baseStats:{hp:28,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["foulPlay","bite","sludgeBomb"],floors:[]},purrloin:{id:"purrloin",name:"Purrloin",spriteKey:"purrloin",types:[k.Dark],attackType:k.Dark,baseStats:{hp:24,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:3,skillIds:["nightSlash","foulPlay","pursuit"],floors:[]},pidove:{id:"pidove",name:"Pidove",spriteKey:"pidove",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:26,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:40,walkFrames:5,idleFrames:4,skillIds:["airSlash","hurricane","wingAttack"],floors:[]},rufflet:{id:"rufflet",name:"Rufflet",spriteKey:"rufflet",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:30,atk:14,def:6},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:5,idleFrames:4,skillIds:["bravebird","aerialAce","hurricane"],floors:[]},tyrogue:{id:"tyrogue",name:"Tyrogue",spriteKey:"tyrogue",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:26,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["hammerArm","closeCombat","machPunch"],floors:[]},crabrawler:{id:"crabrawler",name:"Crabrawler",spriteKey:"crabrawler",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:30,atk:14,def:6},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:40,walkFrames:4,idleFrames:3,skillIds:["drainPunch","hammerArm","closeCombat"],floors:[]},roggenrola:{id:"roggenrola",name:"Roggenrola",spriteKey:"roggenrola",types:[k.Rock],attackType:k.Rock,baseStats:{hp:28,atk:12,def:10},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["rockSlide","rockWrecker","stoneEdge"],floors:[]},rockruff:{id:"rockruff",name:"Rockruff",spriteKey:"rockruff",types:[k.Rock],attackType:k.Rock,baseStats:{hp:26,atk:14,def:6},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:4,skillIds:["stoneEdge","rockWrecker","bite"],floors:[]},lillipup:{id:"lillipup",name:"Lillipup",spriteKey:"lillipup",types:[k.Normal],attackType:k.Normal,baseStats:{hp:26,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:6,idleFrames:4,skillIds:["headbutt","triAttack","bite"],floors:[]},minccino:{id:"minccino",name:"Minccino",spriteKey:"minccino",types:[k.Normal],attackType:k.Normal,baseStats:{hp:24,atk:10,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:4,skillIds:["triAttack","hyperVoice","headbutt"],floors:[]},foongus:{id:"foongus",name:"Foongus",spriteKey:"foongus",types:[k.Grass,k.Poison],attackType:k.Grass,baseStats:{hp:30,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["grassKnot","sludgeBomb","sleepPowder"],floors:[]},petilil:{id:"petilil",name:"Petilil",spriteKey:"petilil",types:[k.Grass],attackType:k.Grass,baseStats:{hp:24,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:4,skillIds:["energyBall","grassKnot","petalDance"],floors:[]},feebas:{id:"feebas",name:"Feebas",spriteKey:"feebas",types:[k.Water],attackType:k.Water,baseStats:{hp:22,atk:8,def:8},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["waterPulse","dive","tackle"],floors:[]},wailmer:{id:"wailmer",name:"Wailmer",spriteKey:"wailmer",types:[k.Water],attackType:k.Water,baseStats:{hp:34,atk:10,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:7,idleFrames:7,skillIds:["dive","brine","waterPulse"],floors:[]},litwick:{id:"litwick",name:"Litwick",spriteKey:"litwick",types:[k.Fire,k.Ghost],attackType:k.Fire,baseStats:{hp:24,atk:12,def:6},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["flamethrower","heatWave","shadowBall"],floors:[]},growlithe:{id:"growlithe",name:"Growlithe",spriteKey:"growlithe",types:[k.Fire],attackType:k.Fire,baseStats:{hp:28,atk:14,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:3,skillIds:["flameWheel","heatWave","bite"],floors:[]},joltik:{id:"joltik",name:"Joltik",spriteKey:"joltik",types:[k.Electric,k.Bug],attackType:k.Electric,baseStats:{hp:22,atk:12,def:6},walkFrameWidth:24,walkFrameHeight:16,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:10,skillIds:["voltSwitch","thunderbolt","signalBeam"],floors:[]},tynamo:{id:"tynamo",name:"Tynamo",spriteKey:"tynamo",types:[k.Electric],attackType:k.Electric,baseStats:{hp:24,atk:10,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["thunderbolt","voltSwitch","tackle"],floors:[]},trubbish:{id:"trubbish",name:"Trubbish",spriteKey:"trubbish",types:[k.Poison],attackType:k.Poison,baseStats:{hp:28,atk:10,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:5,idleFrames:5,skillIds:["gunkShot","sludgeBomb","toxicSpikes"],floors:[]},skorupi:{id:"skorupi",name:"Skorupi",spriteKey:"skorupi",types:[k.Poison,k.Bug],attackType:k.Poison,baseStats:{hp:26,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["venoshock","gunkShot","bite"],floors:[]},mudbray:{id:"mudbray",name:"Mudbray",spriteKey:"mudbray",types:[k.Ground],attackType:k.Ground,baseStats:{hp:28,atk:14,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:14,skillIds:["highHorsepower","earthPower","bulldoze"],floors:[]},hippopotas:{id:"hippopotas",name:"Hippopotas",spriteKey:"hippopotas",types:[k.Ground],attackType:k.Ground,baseStats:{hp:30,atk:10,def:12},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:6,skillIds:["earthPower","highHorsepower","sandTomb"],floors:[]},dwebble:{id:"dwebble",name:"Dwebble",spriteKey:"dwebble",types:[k.Rock,k.Bug],attackType:k.Rock,baseStats:{hp:26,atk:12,def:10},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["smackDown","rockSlide","xScissor"],floors:[]},binacle:{id:"binacle",name:"Binacle",spriteKey:"binacle",types:[k.Rock,k.Water],attackType:k.Rock,baseStats:{hp:24,atk:14,def:8},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:8,idleFrames:5,skillIds:["rockSlide","smackDown","waterPulse"],floors:[]},nincada:{id:"nincada",name:"Nincada",spriteKey:"nincada",types:[k.Bug,k.Ground],attackType:k.Bug,baseStats:{hp:22,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:5,skillIds:["megahorn","xScissor","bulldoze"],floors:[]},venipede:{id:"venipede",name:"Venipede",spriteKey:"venipede",types:[k.Bug,k.Poison],attackType:k.Bug,baseStats:{hp:24,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:24,idleFrameWidth:32,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["megahorn","venoshock","signalBeam"],floors:[]},mienfoo:{id:"mienfoo",name:"Mienfoo",spriteKey:"mienfoo",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:24,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["superpower","drainPunch","closeCombat"],floors:[]},timburr:{id:"timburr",name:"Timburr",spriteKey:"timburr",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:28,atk:14,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["hammerArm","superpower","rockSlide"],floors:[]},klink:{id:"klink",name:"Klink",spriteKey:"klink",types:[k.Steel],attackType:k.Steel,baseStats:{hp:26,atk:12,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:10,idleFrames:10,skillIds:["gearGrind","flashCannon","gyroBall"],floors:[]},ferroseed:{id:"ferroseed",name:"Ferroseed",spriteKey:"ferroseed",types:[k.Steel,k.Grass],attackType:k.Steel,baseStats:{hp:28,atk:8,def:14},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:8,idleFrames:9,skillIds:["ironHead","gearGrind","energyBall"],floors:[]},phantump:{id:"phantump",name:"Phantump",spriteKey:"phantump",types:[k.Ghost,k.Grass],attackType:k.Ghost,baseStats:{hp:24,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:6,skillIds:["phantomForce","shadowBall","energyBall"],floors:[]},honedge:{id:"honedge",name:"Honedge",spriteKey:"honedge",types:[k.Ghost,k.Steel],attackType:k.Ghost,baseStats:{hp:22,atk:14,def:10},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["phantomForce","shadowSneak","ironHead"],floors:[]},solosis:{id:"solosis",name:"Solosis",spriteKey:"solosis",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:24,atk:12,def:6},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:10,idleFrames:4,skillIds:["futuresight","psychic","psyshock"],floors:[]},elgyem:{id:"elgyem",name:"Elgyem",spriteKey:"elgyem",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:26,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["psybeam","futuresight","psyshock"],floors:[]},cryogonal:{id:"cryogonal",name:"Cryogonal",spriteKey:"cryogonal",types:[k.Ice],attackType:k.Ice,baseStats:{hp:22,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:48,walkFrames:8,idleFrames:8,skillIds:["freezeDry","iceBeam","auroraBeam"],floors:[]},cubchoo:{id:"cubchoo",name:"Cubchoo",spriteKey:"cubchoo",types:[k.Ice],attackType:k.Ice,baseStats:{hp:28,atk:10,def:8},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:11,skillIds:["icyWind","freezeDry","auroraBeam"],floors:[]},sandile:{id:"sandile",name:"Sandile",spriteKey:"sandile",types:[k.Dark,k.Ground],attackType:k.Dark,baseStats:{hp:26,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["knockOff","bite","crunch"],floors:[]},inkay:{id:"inkay",name:"Inkay",spriteKey:"inkay",types:[k.Dark,k.Psychic],attackType:k.Dark,baseStats:{hp:24,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:7,skillIds:["bite","knockOff","psybeam"],floors:[]},spritzee:{id:"spritzee",name:"Spritzee",spriteKey:"spritzee",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:28,atk:8,def:10},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:6,idleFrames:10,skillIds:["moonlight","dazzlingGleam","drainingKiss"],floors:[]},swirlix:{id:"swirlix",name:"Swirlix",spriteKey:"swirlix",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:26,atk:10,def:8},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:5,skillIds:["drainingKiss","moonlight","dazzlingGleam"],floors:[]},goomy:{id:"goomy",name:"Goomy",spriteKey:"goomy",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:28,atk:8,def:10},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:24,walkFrames:6,idleFrames:3,skillIds:["outrage","dragonBreath","dragonClaw"],floors:[]},jangmoo:{id:"jangmoo",name:"Jangmo-o",spriteKey:"jangmoo",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:24,atk:12,def:10},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["dragonClaw","outrage","headbutt"],floors:[]},noibat:{id:"noibat",name:"Noibat",spriteKey:"noibat",types:[k.Flying,k.Dragon],attackType:k.Flying,baseStats:{hp:22,atk:12,def:6},walkFrameWidth:32,walkFrameHeight:72,idleFrameWidth:32,idleFrameHeight:72,walkFrames:8,idleFrames:10,skillIds:["aerialAce","airSlash","dragonBreath"],floors:[]},vullaby:{id:"vullaby",name:"Vullaby",spriteKey:"vullaby",types:[k.Flying,k.Dark],attackType:k.Flying,baseStats:{hp:28,atk:8,def:12},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["airSlash","aerialAce","knockOff"],floors:[]},stufful:{id:"stufful",name:"Stufful",spriteKey:"stufful",types:[k.Normal,k.Fighting],attackType:k.Normal,baseStats:{hp:28,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["workUp","bodySlam","headbutt"],floors:[]},furfrou:{id:"furfrou",name:"Furfrou",spriteKey:"furfrou",types:[k.Normal],attackType:k.Normal,baseStats:{hp:26,atk:10,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["headbutt","workUp","hyperVoice"],floors:[]},wimpod:{id:"wimpod",name:"Wimpod",spriteKey:"wimpod",types:[k.Water,k.Bug],attackType:k.Water,baseStats:{hp:22,atk:8,def:14},walkFrameWidth:40,walkFrameHeight:32,idleFrameWidth:40,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["waterfall","waterPulse","xScissor"],floors:[]},tympole:{id:"tympole",name:"Tympole",spriteKey:"tympole",types:[k.Water],attackType:k.Water,baseStats:{hp:26,atk:10,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:24,walkFrames:6,idleFrames:4,skillIds:["waterGun","waterfall","mudShot"],floors:[]},salandit:{id:"salandit",name:"Salandit",spriteKey:"salandit",types:[k.Fire,k.Poison],attackType:k.Fire,baseStats:{hp:22,atk:14,def:6},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["fireWhip","venoshock","ember"],floors:[]},larvesta:{id:"larvesta",name:"Larvesta",spriteKey:"larvesta",types:[k.Fire,k.Bug],attackType:k.Fire,baseStats:{hp:26,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:3,idleFrames:10,skillIds:["ember","fireWhip","xScissor"],floors:[]},fomantis:{id:"fomantis",name:"Fomantis",spriteKey:"fomantis",types:[k.Grass],attackType:k.Grass,baseStats:{hp:24,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:5,skillIds:["leafStorm","leafBlade","razorLeaf"],floors:[]},morelull:{id:"morelull",name:"Morelull",spriteKey:"morelull",types:[k.Grass,k.Fairy],attackType:k.Grass,baseStats:{hp:28,atk:8,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:56,walkFrames:5,idleFrames:8,skillIds:["energyBall","leafStorm","drainingKiss"],floors:[]},charjabug:{id:"charjabug",name:"Charjabug",spriteKey:"charjabug",types:[k.Electric,k.Bug],attackType:k.Electric,baseStats:{hp:28,atk:8,def:14},walkFrameWidth:40,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:24,walkFrames:6,idleFrames:2,skillIds:["electricTerrain","thunderbolt","xScissor"],floors:[]},helioptile:{id:"helioptile",name:"Helioptile",spriteKey:"helioptile",types:[k.Electric,k.Normal],attackType:k.Electric,baseStats:{hp:22,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["thunderbolt","electricTerrain","headbutt"],floors:[]},mareanie:{id:"mareanie",name:"Mareanie",spriteKey:"mareanie",types:[k.Poison,k.Water],attackType:k.Poison,baseStats:{hp:26,atk:8,def:14},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:24,walkFrames:6,idleFrames:4,skillIds:["poisonJab","venoshock","waterPulse"],floors:[]},croagunk:{id:"croagunk",name:"Croagunk",spriteKey:"croagunk",types:[k.Poison,k.Fighting],attackType:k.Poison,baseStats:{hp:24,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:7,skillIds:["poisonJab","drainPunch","venoshock"],floors:[]},sandygast:{id:"sandygast",name:"Sandygast",spriteKey:"sandygast",types:[k.Ground,k.Ghost],attackType:k.Ground,baseStats:{hp:26,atk:10,def:12},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:24,walkFrames:3,idleFrames:2,skillIds:["scorchingSand","earthPower","shadowBall"],floors:[]},silicobra:{id:"silicobra",name:"Silicobra",spriteKey:"silicobra",types:[k.Ground],attackType:k.Ground,baseStats:{hp:28,atk:10,def:10},walkFrameWidth:48,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:6,idleFrames:2,skillIds:["earthPower","scorchingSand","headbutt"],floors:[]},carbink:{id:"carbink",name:"Carbink",spriteKey:"carbink",types:[k.Rock,k.Fairy],attackType:k.Rock,baseStats:{hp:24,atk:8,def:16},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:48,walkFrames:7,idleFrames:6,skillIds:["stealthRock","rockSlide","dazzlingGleam"],floors:[]},minior:{id:"minior",name:"Minior",spriteKey:"minior",types:[k.Rock,k.Flying],attackType:k.Rock,baseStats:{hp:22,atk:14,def:10},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:12,idleFrames:12,skillIds:["rockSlide","stealthRock","airSlash"],floors:[]},dewpider:{id:"dewpider",name:"Dewpider",spriteKey:"dewpider",types:[k.Bug,k.Water],attackType:k.Bug,baseStats:{hp:26,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["lunge","waterPulse","leechLife"],floors:[]},sizzlipede:{id:"sizzlipede",name:"Sizzlipede",spriteKey:"sizzlipede",types:[k.Bug,k.Fire],attackType:k.Bug,baseStats:{hp:24,atk:12,def:8},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["lunge","ember","leechLife"],floors:[]},pancham:{id:"pancham",name:"Pancham",spriteKey:"pancham",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:26,atk:14,def:6},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["skyUppercut","hammerArm","crunch"],floors:[]},hawlucha:{id:"hawlucha",name:"Hawlucha",spriteKey:"hawlucha",types:[k.Fighting,k.Flying],attackType:k.Fighting,baseStats:{hp:22,atk:14,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["skyUppercut","aerialAce","closeCombat"],floors:[]},durant:{id:"durant",name:"Durant",spriteKey:"durant",types:[k.Bug,k.Steel],attackType:k.Steel,baseStats:{hp:22,atk:14,def:14},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:40,walkFrames:3,idleFrames:4,skillIds:["ironHead","autotomize","xScissor"],floors:[]},togedemaru:{id:"togedemaru",name:"Togedemaru",spriteKey:"togedemaru",types:[k.Electric,k.Steel],attackType:k.Steel,baseStats:{hp:20,atk:12,def:12},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:56,walkFrames:8,idleFrames:6,skillIds:["ironHead","sparkCharge","autotomize"],floors:[]},drifloon:{id:"drifloon",name:"Drifloon",spriteKey:"drifloon",types:[k.Ghost,k.Flying],attackType:k.Ghost,baseStats:{hp:24,atk:10,def:8},walkFrameWidth:24,walkFrameHeight:64,idleFrameWidth:24,idleFrameHeight:64,walkFrames:8,idleFrames:8,skillIds:["shadowBall","shadowPunch","airSlash"],floors:[]},golett:{id:"golett",name:"Golett",spriteKey:"golett",types:[k.Ground,k.Ghost],attackType:k.Ghost,baseStats:{hp:24,atk:12,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:5,skillIds:["shadowPunch","earthquake","phantomForce"],floors:[]},hatenna:{id:"hatenna",name:"Hatenna",spriteKey:"hatenna",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:20,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["psybeam","expandingForce","dazzlingGleam"],floors:[]},indeedee:{id:"indeedee",name:"Indeedee",spriteKey:"indeedee",types:[k.Psychic,k.Normal],attackType:k.Psychic,baseStats:{hp:22,atk:14,def:8},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["psychic","zenHeadbutt","expandingForce"],floors:[]},vanillite:{id:"vanillite",name:"Vanillite",spriteKey:"vanillite",types:[k.Ice],attackType:k.Ice,baseStats:{hp:18,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["iceBeam","auroraBeam","icyWind"],floors:[]},snom:{id:"snom",name:"Snom",spriteKey:"snom",types:[k.Ice,k.Bug],attackType:k.Ice,baseStats:{hp:16,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:3,idleFrames:10,skillIds:["icyWind","auroraBeam","bugBite"],floors:[]},nickit:{id:"nickit",name:"Nickit",spriteKey:"nickit",types:[k.Dark],attackType:k.Dark,baseStats:{hp:20,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:32,walkFrames:5,idleFrames:4,skillIds:["crunch","throatChop","foulPlay"],floors:[]},impidimp:{id:"impidimp",name:"Impidimp",spriteKey:"impidimp",types:[k.Dark,k.Fairy],attackType:k.Dark,baseStats:{hp:20,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:5,skillIds:["crunch","throatChop","dazzlingGleam"],floors:[]},milcery:{id:"milcery",name:"Milcery",spriteKey:"milcery",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:18,atk:10,def:10},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["dazzlingGleam","sweetKiss","playRough"],floors:[]},comfey:{id:"comfey",name:"Comfey",spriteKey:"comfey",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:22,atk:12,def:10},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:32,idleFrameHeight:56,walkFrames:10,idleFrames:4,skillIds:["dazzlingGleam","sweetKiss","moonlight"],floors:[]},turtonator:{id:"turtonator",name:"Turtonator",spriteKey:"turtonator",types:[k.Fire,k.Dragon],attackType:k.Dragon,baseStats:{hp:24,atk:12,def:14},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:10,skillIds:["dragonPulse","dragonDance","flamethrower"],floors:[]},drampa:{id:"drampa",name:"Drampa",spriteKey:"drampa",types:[k.Normal,k.Dragon],attackType:k.Dragon,baseStats:{hp:26,atk:14,def:8},walkFrameWidth:64,walkFrameHeight:64,idleFrameWidth:64,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["dragonPulse","dragonDance","hyperVoice"],floors:[]},rookidee:{id:"rookidee",name:"Rookidee",spriteKey:"rookidee",types:[k.Flying],attackType:k.Flying,baseStats:{hp:18,atk:12,def:10},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:5,idleFrames:5,skillIds:["pluck","braveBird","airSlash"],floors:[]},archen:{id:"archen",name:"Archen",spriteKey:"archen",types:[k.Rock,k.Flying],attackType:k.Flying,baseStats:{hp:20,atk:14,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["pluck","rockSlide","aerialAce"],floors:[]},wooloo:{id:"wooloo",name:"Wooloo",spriteKey:"wooloo",types:[k.Normal],attackType:k.Normal,baseStats:{hp:20,atk:10,def:12},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["headbutt","facade","bodySlam"],floors:[]},skwovet:{id:"skwovet",name:"Skwovet",spriteKey:"skwovet",types:[k.Normal],attackType:k.Normal,baseStats:{hp:22,atk:12,def:10},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["headbutt","facade","hyperVoice"],floors:[]},bruxish:{id:"bruxish",name:"Bruxish",spriteKey:"bruxish",types:[k.Water,k.Psychic],attackType:k.Water,baseStats:{hp:22,atk:14,def:8},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:12,idleFrames:8,skillIds:["liquidation","psychic","waterPulse"],floors:[]},chewtle:{id:"chewtle",name:"Chewtle",spriteKey:"chewtle",types:[k.Water],attackType:k.Water,baseStats:{hp:22,atk:12,def:10},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["liquidation","waterfall","headbutt"],floors:[]},litleo:{id:"litleo",name:"Litleo",spriteKey:"litleo",types:[k.Fire,k.Normal],attackType:k.Fire,baseStats:{hp:20,atk:12,def:8},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:7,idleFrames:7,skillIds:["blazeKick","flamethrower","hyperVoice"],floors:[]},torchic:{id:"torchic",name:"Torchic",spriteKey:"torchic",types:[k.Fire],attackType:k.Fire,baseStats:{hp:18,atk:12,def:8},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:5,skillIds:["blazeKick","flameWheel","ember"],floors:[]},gossifleur:{id:"gossifleur",name:"Gossifleur",spriteKey:"gossifleur",types:[k.Grass],attackType:k.Grass,baseStats:{hp:20,atk:10,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:8,idleFrames:2,skillIds:["leafStorm","tropicalKick","energyBall"],floors:[]},bounsweet:{id:"bounsweet",name:"Bounsweet",spriteKey:"bounsweet",types:[k.Grass],attackType:k.Grass,baseStats:{hp:20,atk:12,def:10},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["tropicalKick","leafBlade","petalDance"],floors:[]},yamper:{id:"yamper",name:"Yamper",spriteKey:"yamper",types:[k.Electric],attackType:k.Electric,baseStats:{hp:20,atk:12,def:10},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:32,walkFrames:7,idleFrames:2,skillIds:["nuzzle","wildCharge","thunderbolt"],floors:[]},pincurchin:{id:"pincurchin",name:"Pincurchin",spriteKey:"pincurchin",types:[k.Electric],attackType:k.Electric,baseStats:{hp:22,atk:14,def:10},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["nuzzle","electricTerrain","thunderPunch"],floors:[]},skrelp:{id:"skrelp",name:"Skrelp",spriteKey:"skrelp",types:[k.Poison,k.Water],attackType:k.Poison,baseStats:{hp:20,atk:12,def:10},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["poisonJab","sludgeBomb","waterPulse"],floors:[]},toxel:{id:"toxel",name:"Toxel",spriteKey:"toxel",types:[k.Electric,k.Poison],attackType:k.Electric,baseStats:{hp:18,atk:10,def:8},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["nuzzle","poisonJab","sparkCharge"],floors:[]},drilbur:{id:"drilbur",name:"Drilbur",spriteKey:"drilbur",types:[k.Ground],attackType:k.Ground,baseStats:{hp:20,atk:14,def:10},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:3,skillIds:["earthquake","dig","muddyWater"],floors:[]},barboach:{id:"barboach",name:"Barboach",spriteKey:"barboach",types:[k.Water,k.Ground],attackType:k.Water,baseStats:{hp:20,atk:10,def:8},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:6,idleFrames:6,skillIds:["muddyWater","earthquake","waterPulse"],floors:[]},nacli:{id:"nacli",name:"Nacli",spriteKey:"nacli",types:[k.Rock],attackType:k.Rock,baseStats:{hp:55,atk:55,def:75},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:8,idleFrames:5,skillIds:["rockBlast","stoneEdge","rockSlide"],floors:[]},tyrunt:{id:"tyrunt",name:"Tyrunt",spriteKey:"tyrunt",types:[k.Rock,k.Dragon],attackType:k.Rock,baseStats:{hp:58,atk:89,def:77},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:8,skillIds:["rockBlast","crunch","dragonClaw"],floors:[]},blipbug:{id:"blipbug",name:"Blipbug",spriteKey:"blipbug",types:[k.Bug],attackType:k.Bug,baseStats:{hp:25,atk:20,def:45},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:40,walkFrames:6,idleFrames:2,skillIds:["bugBuzz","psychic","bugBite"],floors:[]},cutiefly:{id:"cutiefly",name:"Cutiefly",spriteKey:"cutiefly",types:[k.Bug,k.Fairy],attackType:k.Bug,baseStats:{hp:40,atk:45,def:40},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:6,idleFrames:12,skillIds:["bugBuzz","dazzlingGleam","fairyWind"],floors:[]},clobbopus:{id:"clobbopus",name:"Clobbopus",spriteKey:"clobbopus",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:50,atk:68,def:60},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:5,idleFrames:2,skillIds:["closeCombat","rockSmash","karateChop"],floors:[]},passimian:{id:"passimian",name:"Passimian",spriteKey:"passimian",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:100,atk:120,def:90},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["closeCombat","rockSmash","superpower"],floors:[]},tinkatink:{id:"tinkatink",name:"Tinkatink",spriteKey:"tinkatink",types:[k.Fairy,k.Steel],attackType:k.Steel,baseStats:{hp:50,atk:45,def:45},walkFrameWidth:32,walkFrameHeight:24,idleFrameWidth:32,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["smartStrike","dazzlingGleam","metalClaw"],floors:[]},varoom:{id:"varoom",name:"Varoom",spriteKey:"varoom",types:[k.Steel,k.Poison],attackType:k.Steel,baseStats:{hp:45,atk:70,def:63},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:5,idleFrames:8,skillIds:["smartStrike","sludgeBomb","ironHead"],floors:[]},greavard:{id:"greavard",name:"Greavard",spriteKey:"greavard",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:50,atk:61,def:60},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["poltergeist","shadowBall","lick"],floors:[]},sinistea:{id:"sinistea",name:"Sinistea",spriteKey:"sinistea",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:40,atk:45,def:45},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:8,idleFrames:8,skillIds:["poltergeist","shadowBall","nightShade"],floors:[]},flittle:{id:"flittle",name:"Flittle",spriteKey:"flittle",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:30,atk:35,def:30},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:8,idleFrames:8,skillIds:["psyshock","psychic","confusion"],floors:[]},espurr:{id:"espurr",name:"Espurr",spriteKey:"espurr",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:62,atk:48,def:54},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["psyshock","psychic","confusion"],floors:[]},cetoddle:{id:"cetoddle",name:"Cetoddle",spriteKey:"cetoddle",types:[k.Ice],attackType:k.Ice,baseStats:{hp:108,atk:68,def:45},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:48,idleFrameHeight:40,walkFrames:17,idleFrames:6,skillIds:["icicleCrash","iceBeam","iceShard"],floors:[]},frigibax:{id:"frigibax",name:"Frigibax",spriteKey:"frigibax",types:[k.Dragon,k.Ice],attackType:k.Ice,baseStats:{hp:65,atk:75,def:45},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["icicleCrash","dragonBreath","iceShard"],floors:[]},zorua:{id:"zorua",name:"Zorua",spriteKey:"zorua",types:[k.Dark],attackType:k.Dark,baseStats:{hp:40,atk:65,def:40},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:5,idleFrames:4,skillIds:["darkPulse","shadowBall","feintAttack"],floors:[]},pawniard:{id:"pawniard",name:"Pawniard",spriteKey:"pawniard",types:[k.Dark,k.Steel],attackType:k.Dark,baseStats:{hp:45,atk:85,def:70},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:3,skillIds:["darkPulse","ironHead","nightSlash"],floors:[]},fidough:{id:"fidough",name:"Fidough",spriteKey:"fidough",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:37,atk:55,def:70},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:7,skillIds:["drainingKiss","dazzlingGleam","playRough"],floors:[]},dedenne:{id:"dedenne",name:"Dedenne",spriteKey:"dedenne",types:[k.Electric,k.Fairy],attackType:k.Fairy,baseStats:{hp:67,atk:58,def:57},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:8,idleFrames:4,skillIds:["drainingKiss","thunderbolt","nuzzle"],floors:[]},cyclizar:{id:"cyclizar",name:"Cyclizar",spriteKey:"cyclizar",types:[k.Dragon,k.Normal],attackType:k.Dragon,baseStats:{hp:70,atk:95,def:65},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:56,idleFrameHeight:48,walkFrames:6,idleFrames:10,skillIds:["scaleShot","dragonPulse","bodySlam"],floors:[]},tatsugiri:{id:"tatsugiri",name:"Tatsugiri",spriteKey:"tatsugiri",types:[k.Dragon,k.Water],attackType:k.Dragon,baseStats:{hp:68,atk:50,def:60},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:24,walkFrames:6,idleFrames:3,skillIds:["scaleShot","dragonPulse","waterPulse"],floors:[]},wingull:{id:"wingull",name:"Wingull",spriteKey:"wingull",types:[k.Water,k.Flying],attackType:k.Flying,baseStats:{hp:40,atk:30,def:30},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:18,skillIds:["hurricane","waterPulse","wingAttack"],floors:[]},swablu:{id:"swablu",name:"Swablu",spriteKey:"swablu",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:45,atk:40,def:60},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:6,idleFrames:9,skillIds:["hurricane","moonblast","wingAttack"],floors:[]},lechonk:{id:"lechonk",name:"Lechonk",spriteKey:"lechonk",types:[k.Normal],attackType:k.Normal,baseStats:{hp:54,atk:45,def:40},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["hyperVoice","bodySlam","tackle"],floors:[]},tandemaus:{id:"tandemaus",name:"Tandemaus",spriteKey:"tandemaus",types:[k.Normal],attackType:k.Normal,baseStats:{hp:50,atk:50,def:45},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:40,walkFrames:7,idleFrames:8,skillIds:["hyperVoice","bodySlam","swift"],floors:[]},buizel:{id:"buizel",name:"Buizel",spriteKey:"buizel",types:[k.Water],attackType:k.Water,baseStats:{hp:55,atk:65,def:35},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:8,idleFrames:4,skillIds:["aquaJet","waterPulse","tackle"],floors:[]},finizen:{id:"finizen",name:"Finizen",spriteKey:"finizen",types:[k.Water],attackType:k.Water,baseStats:{hp:70,atk:45,def:40},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["aquaJet","liquidation","tackle"],floors:[]},fletchinder:{id:"fletchinder",name:"Fletchinder",spriteKey:"fletchinder",types:[k.Fire,k.Flying],attackType:k.Fire,baseStats:{hp:62,atk:73,def:55},walkFrameWidth:48,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:8,idleFrames:4,skillIds:["fireBlast","braveBird","ember"],floors:[]},heatmor:{id:"heatmor",name:"Heatmor",spriteKey:"heatmor",types:[k.Fire],attackType:k.Fire,baseStats:{hp:85,atk:97,def:66},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:8,idleFrames:4,skillIds:["fireBlast","flamethrower","scratch"],floors:[]},smoliv:{id:"smoliv",name:"Smoliv",spriteKey:"smoliv",types:[k.Grass,k.Normal],attackType:k.Grass,baseStats:{hp:41,atk:35,def:45},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["leafStorm","energyBall","tackle"],floors:[]},deerling:{id:"deerling",name:"Deerling",spriteKey:"deerling",types:[k.Normal,k.Grass],attackType:k.Grass,baseStats:{hp:60,atk:60,def:50},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:8,idleFrames:4,skillIds:["leafStorm","bodySlam","tackle"],floors:[]},pachirisu:{id:"pachirisu",name:"Pachirisu",spriteKey:"pachirisu",types:[k.Electric],attackType:k.Electric,baseStats:{hp:60,atk:45,def:70},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:6,idleFrames:4,skillIds:["discharge","thunderbolt","quickAttack"],floors:[]},emolga:{id:"emolga",name:"Emolga",spriteKey:"emolga",types:[k.Electric,k.Flying],attackType:k.Electric,baseStats:{hp:55,atk:75,def:60},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["discharge","thunderbolt","quickAttack"],floors:[]},glimmet:{id:"glimmet",name:"Glimmet",spriteKey:"glimmet",types:[k.Rock,k.Poison],attackType:k.Poison,baseStats:{hp:48,atk:35,def:55},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["toxicSpikes","sludgeBomb","rockThrow"],floors:[]},koffing:{id:"koffing",name:"Koffing",spriteKey:"koffing",types:[k.Poison],attackType:k.Poison,baseStats:{hp:40,atk:65,def:95},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["toxicSpikes","sludgeBomb","selfDestruct"],floors:[]},wooper:{id:"wooper",name:"Wooper",spriteKey:"wooper",types:[k.Water,k.Ground],attackType:k.Ground,baseStats:{hp:55,atk:45,def:45},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:4,skillIds:["earthPower","earthquake","waterGun"],floors:[]},baltoy:{id:"baltoy",name:"Baltoy",spriteKey:"baltoy",types:[k.Ground,k.Psychic],attackType:k.Ground,baseStats:{hp:40,atk:40,def:70},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:8,idleFrames:4,skillIds:["earthPower","psychic","confusion"],floors:[]},anorith:{id:"anorith",name:"Anorith",spriteKey:"anorith",types:[k.Rock,k.Bug],attackType:k.Rock,baseStats:{hp:45,atk:95,def:50},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["ancientPower","rockBlast","rockThrow"],floors:[]},lunatone:{id:"lunatone",name:"Lunatone",spriteKey:"lunatone",types:[k.Rock,k.Psychic],attackType:k.Rock,baseStats:{hp:90,atk:55,def:65},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["ancientPower","psychic","rockSlide"],floors:[]},surskit:{id:"surskit",name:"Surskit",spriteKey:"surskit",types:[k.Bug,k.Water],attackType:k.Bug,baseStats:{hp:40,atk:30,def:32},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["silverWind","bugBuzz","waterGun"],floors:[]},volbeat:{id:"volbeat",name:"Volbeat",spriteKey:"volbeat",types:[k.Bug],attackType:k.Bug,baseStats:{hp:65,atk:73,def:75},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["silverWind","bugBuzz","signalBeam"],floors:[]},scraggy:{id:"scraggy",name:"Scraggy",spriteKey:"scraggy",types:[k.Dark,k.Fighting],attackType:k.Fighting,baseStats:{hp:50,atk:75,def:70},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["aurasphere","closeCombat","darkPulse"],floors:[]},mankey:{id:"mankey",name:"Mankey",spriteKey:"mankey",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:40,atk:80,def:35},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["aurasphere","closeCombat","karateChop"],floors:[]},klefki:{id:"klefki",name:"Klefki",spriteKey:"klefki",types:[k.Steel,k.Fairy],attackType:k.Steel,baseStats:{hp:57,atk:80,def:91},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["ironDefense","smartStrike","flashCannon"],floors:[]},mawile:{id:"mawile",name:"Mawile",spriteKey:"mawile",types:[k.Steel,k.Fairy],attackType:k.Steel,baseStats:{hp:50,atk:85,def:85},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["ironDefense","smartStrike","ironHead"],floors:[]},rotom:{id:"rotom",name:"Rotom",spriteKey:"rotom",types:[k.Electric,k.Ghost],attackType:k.Ghost,baseStats:{hp:50,atk:65,def:77},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["shadowForce","thunderbolt","shadowBall"],floors:[]},dreepy:{id:"dreepy",name:"Dreepy",spriteKey:"dreepy",types:[k.Dragon,k.Ghost],attackType:k.Ghost,baseStats:{hp:28,atk:60,def:30},walkFrameWidth:32,walkFrameHeight:24,idleFrameWidth:32,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["shadowForce","dragonPulse","shadowBall"],floors:[]},munna:{id:"munna",name:"Munna",spriteKey:"munna",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:76,atk:67,def:55},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["futuresight","psychic","confusion"],floors:[]},chingling:{id:"chingling",name:"Chingling",spriteKey:"chingling",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:45,atk:30,def:50},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["futuresight","psychic","confusion"],floors:[]},smoochum:{id:"smoochum",name:"Smoochum",spriteKey:"smoochum",types:[k.Ice,k.Psychic],attackType:k.Ice,baseStats:{hp:45,atk:55,def:15},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["glacialLance","psychic","iceBeam"],floors:[]},delibird:{id:"delibird",name:"Delibird",spriteKey:"delibird",types:[k.Ice,k.Flying],attackType:k.Ice,baseStats:{hp:45,atk:55,def:45},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["glacialLance","icicleCrash","iceBeam"],floors:[]},nuzleaf:{id:"nuzleaf",name:"Nuzleaf",spriteKey:"nuzleaf",types:[k.Grass,k.Dark],attackType:k.Dark,baseStats:{hp:70,atk:70,def:40},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["nightSlash","leafStorm","darkPulse"],floors:[]},spiritomb:{id:"spiritomb",name:"Spiritomb",spriteKey:"spiritomb",types:[k.Ghost,k.Dark],attackType:k.Dark,baseStats:{hp:50,atk:92,def:108},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["nightSlash","shadowBall","darkPulse"],floors:[]},marill:{id:"marill",name:"Marill",spriteKey:"marill",types:[k.Water,k.Fairy],attackType:k.Fairy,baseStats:{hp:70,atk:20,def:50},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["moonblast","waterPulse","dazzlingGleam"],floors:[]},cleffa:{id:"cleffa",name:"Cleffa",spriteKey:"cleffa",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:50,atk:25,def:28},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["moonblast","dazzlingGleam","drainingKiss"],floors:[]},druddigon:{id:"druddigon",name:"Druddigon",spriteKey:"druddigon",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:77,atk:120,def:90},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["dracoMeteor","dragonPulse","dragonClaw"],floors:[]},applin:{id:"applin",name:"Applin",spriteKey:"applin",types:[k.Grass,k.Dragon],attackType:k.Dragon,baseStats:{hp:40,atk:40,def:80},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["dracoMeteor","leafStorm","dragonBreath"],floors:[]},hoppip:{id:"hoppip",name:"Hoppip",spriteKey:"hoppip",types:[k.Grass,k.Flying],attackType:k.Flying,baseStats:{hp:35,atk:35,def:40},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["braveBird","hurricane","leafStorm"],floors:[]},tropius:{id:"tropius",name:"Tropius",spriteKey:"tropius",types:[k.Grass,k.Flying],attackType:k.Flying,baseStats:{hp:99,atk:68,def:83},walkFrameWidth:48,walkFrameHeight:48,idleFrameWidth:48,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["braveBird","leafStorm","hurricane"],floors:[]},aipom:{id:"aipom",name:"Aipom",spriteKey:"aipom",types:[k.Normal],attackType:k.Normal,baseStats:{hp:55,atk:70,def:55},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["boomburst","bodySlam","hyperVoice"],floors:[]},smeargle:{id:"smeargle",name:"Smeargle",spriteKey:"smeargle",types:[k.Normal],attackType:k.Normal,baseStats:{hp:55,atk:20,def:35},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["boomburst","hyperVoice","bodySlam"],floors:[]},poliwag:{id:"poliwag",name:"Poliwag",spriteKey:"poliwag",types:[k.Water],attackType:k.Water,baseStats:{hp:40,atk:50,def:40},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:48,walkFrames:5,idleFrames:8,skillIds:["waterPulse","surf","hydroPump"],floors:[]},corphish:{id:"corphish",name:"Corphish",spriteKey:"corphish",types:[k.Water],attackType:k.Water,baseStats:{hp:43,atk:80,def:65},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["waterPulse","brine","hydroPump"],floors:[]},magby:{id:"magby",name:"Magby",spriteKey:"magby",types:[k.Fire],attackType:k.Fire,baseStats:{hp:45,atk:75,def:37},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["flamethrower","fireBlast","eruption"],floors:[]},darumaka:{id:"darumaka",name:"Darumaka",spriteKey:"darumaka",types:[k.Fire],attackType:k.Fire,baseStats:{hp:70,atk:90,def:45},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:8,idleFrames:6,skillIds:["flamethrower","heatWave","eruption"],floors:[]},sewaddle:{id:"sewaddle",name:"Sewaddle",spriteKey:"sewaddle",types:[k.Bug,k.Grass],attackType:k.Grass,baseStats:{hp:45,atk:53,def:70},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:6,idleFrames:10,skillIds:["razorLeaf","energyBall","powerWhip"],floors:[]},pumpkaboo:{id:"pumpkaboo",name:"Pumpkaboo",spriteKey:"pumpkaboo",types:[k.Ghost,k.Grass],attackType:k.Grass,baseStats:{hp:49,atk:66,def:70},walkFrameWidth:24,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["seedBomb","shadowBall","powerWhip"],floors:[]},plusle:{id:"plusle",name:"Plusle",spriteKey:"plusle",types:[k.Electric],attackType:k.Electric,baseStats:{hp:60,atk:85,def:40},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:8,idleFrames:4,skillIds:["thunderbolt","wildCharge","nuzzle"],floors:[]},minun:{id:"minun",name:"Minun",spriteKey:"minun",types:[k.Electric],attackType:k.Electric,baseStats:{hp:60,atk:75,def:50},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:8,idleFrames:4,skillIds:["thunderbolt","wildCharge","nuzzle"],floors:[]},nidoranF:{id:"nidoranF",name:"Nidoran F",spriteKey:"nidoranF",types:[k.Poison],attackType:k.Poison,baseStats:{hp:55,atk:47,def:52},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:40,walkFrames:7,idleFrames:5,skillIds:["poisonSting","sludgeBomb","gunkShot"],floors:[]},seviper:{id:"seviper",name:"Seviper",spriteKey:"seviper",types:[k.Poison],attackType:k.Poison,baseStats:{hp:73,atk:100,def:60},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["venoshock","sludgeBomb","gunkShot"],floors:[]},gligar:{id:"gligar",name:"Gligar",spriteKey:"gligar",types:[k.Ground,k.Flying],attackType:k.Ground,baseStats:{hp:65,atk:75,def:105},walkFrameWidth:32,walkFrameHeight:64,idleFrameWidth:32,idleFrameHeight:56,walkFrames:8,idleFrames:4,skillIds:["earthPower","earthquake","drillRun"],floors:[]},rhyhorn:{id:"rhyhorn",name:"Rhyhorn",spriteKey:"rhyhorn",types:[k.Ground,k.Rock],attackType:k.Ground,baseStats:{hp:80,atk:85,def:95},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:40,idleFrameHeight:32,walkFrames:4,idleFrames:3,skillIds:["earthPower","rockSlide","drillRun"],floors:[]},sudowoodo:{id:"sudowoodo",name:"Sudowoodo",spriteKey:"sudowoodo",types:[k.Rock],attackType:k.Rock,baseStats:{hp:70,atk:100,def:115},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:1,skillIds:["rockSlide","stoneEdge","headSmash"],floors:[]},boldore:{id:"boldore",name:"Boldore",spriteKey:"boldore",types:[k.Rock],attackType:k.Rock,baseStats:{hp:70,atk:105,def:105},walkFrameWidth:40,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:7,skillIds:["rockThrow","stoneEdge","headSmash"],floors:[]},pineco:{id:"pineco",name:"Pineco",spriteKey:"pineco",types:[k.Bug],attackType:k.Bug,baseStats:{hp:50,atk:65,def:90},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:6,idleFrames:2,skillIds:["bugBite","signalBeam","selfDestruct"],floors:[]},heracross:{id:"heracross",name:"Heracross",spriteKey:"heracross",types:[k.Bug,k.Fighting],attackType:k.Bug,baseStats:{hp:80,atk:125,def:75},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["megahorn","closeCombat","xScissor"],floors:[]},hitmonlee:{id:"hitmonlee",name:"Hitmonlee",spriteKey:"hitmonlee",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:50,atk:120,def:53},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["lowKick","closeCombat","superpower"],floors:[]},hitmonchan:{id:"hitmonchan",name:"Hitmonchan",spriteKey:"hitmonchan",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:50,atk:105,def:79},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:48,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["focusPunch","closeCombat","superpower"],floors:[]},steelix:{id:"steelix",name:"Steelix",spriteKey:"steelix",types:[k.Steel,k.Ground],attackType:k.Steel,baseStats:{hp:75,atk:85,def:200},walkFrameWidth:72,walkFrameHeight:112,idleFrameWidth:64,idleFrameHeight:112,walkFrames:4,idleFrames:4,skillIds:["ironHead","flashCannon","heavySlam"],floors:[]},scizor:{id:"scizor",name:"Scizor",spriteKey:"scizor",types:[k.Bug,k.Steel],attackType:k.Steel,baseStats:{hp:70,atk:130,def:100},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:64,walkFrames:4,idleFrames:6,skillIds:["bulletPunch","ironHead","heavySlam"],floors:[]},banette:{id:"banette",name:"Banette",spriteKey:"banette",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:64,atk:115,def:65},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:56,walkFrames:4,idleFrames:9,skillIds:["shadowBall","phantomForce","cursedFlame"],floors:[]},shedinja:{id:"shedinja",name:"Shedinja",spriteKey:"shedinja",types:[k.Bug,k.Ghost],attackType:k.Ghost,baseStats:{hp:1,atk:90,def:45},walkFrameWidth:24,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:56,walkFrames:16,idleFrames:12,skillIds:["shadowSneak","shadowBall","cursedFlame"],floors:[]},slowpoke:{id:"slowpoke",name:"Slowpoke",spriteKey:"slowpoke",types:[k.Water,k.Psychic],attackType:k.Psychic,baseStats:{hp:90,atk:65,def:65},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["confusion","psychic","zenHeadbutt"],floors:[]},girafarig:{id:"girafarig",name:"Girafarig",spriteKey:"girafarig",types:[k.Normal,k.Psychic],attackType:k.Psychic,baseStats:{hp:70,atk:90,def:65},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:8,skillIds:["psybeam","psychic","zenHeadbutt"],floors:[]},glaceon:{id:"glaceon",name:"Glaceon",spriteKey:"glaceon",types:[k.Ice],attackType:k.Ice,baseStats:{hp:65,atk:95,def:80},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:6,skillIds:["iceBeam","blizzard","iceShard"],floors:[]},beartic:{id:"beartic",name:"Beartic",spriteKey:"beartic",types:[k.Ice],attackType:k.Ice,baseStats:{hp:95,atk:85,def:70},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:14,skillIds:["iceHammer","blizzard","avalanche"],floors:[]},umbreon:{id:"umbreon",name:"Umbreon",spriteKey:"umbreon",types:[k.Dark],attackType:k.Dark,baseStats:{hp:95,atk:65,def:95},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:14,skillIds:["foulPlay","darkPulse","moonlight"],floors:[]},cacturne:{id:"cacturne",name:"Cacturne",spriteKey:"cacturne",types:[k.Dark,k.Grass],attackType:k.Dark,baseStats:{hp:70,atk:95,def:60},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:64,walkFrames:4,idleFrames:6,skillIds:["nightSlash","foulPlay","seedBomb"],floors:[]},granbull:{id:"granbull",name:"Granbull",spriteKey:"granbull",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:90,atk:95,def:60},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["playRough","crunch","dazzlingGleam"],floors:[]},togekiss:{id:"togekiss",name:"Togekiss",spriteKey:"togekiss",types:[k.Fairy,k.Flying],attackType:k.Fairy,baseStats:{hp:85,atk:80,def:85},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:8,idleFrames:8,skillIds:["dazzlingGleam","airSlash","moonblast"],floors:[]},shelgon:{id:"shelgon",name:"Shelgon",spriteKey:"shelgon",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:85,atk:80,def:95},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["dragonClaw","outrage","dragonPulse"],floors:[]},gabite:{id:"gabite",name:"Gabite",spriteKey:"gabite",types:[k.Dragon,k.Ground],attackType:k.Dragon,baseStats:{hp:78,atk:95,def:70},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["dragonClaw","outrage","dig"],floors:[]},noctowl:{id:"noctowl",name:"Noctowl",spriteKey:"noctowl",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:90,atk:76,def:76},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:64,walkFrames:4,idleFrames:16,skillIds:["airSlash","skyAttack","psychic"],floors:[]},xatu:{id:"xatu",name:"Xatu",spriteKey:"xatu",types:[k.Psychic,k.Flying],attackType:k.Flying,baseStats:{hp:65,atk:95,def:70},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["skyAttack","psychic","airSlash"],floors:[]},kangaskhan:{id:"kangaskhan",name:"Kangaskhan",spriteKey:"kangaskhan",types:[k.Normal],attackType:k.Normal,baseStats:{hp:105,atk:80,def:80},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:5,skillIds:["extremeSpeed","bodySlam","headbutt"],floors:[]},tauros:{id:"tauros",name:"Tauros",spriteKey:"tauros",types:[k.Normal],attackType:k.Normal,baseStats:{hp:75,atk:95,def:75},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:7,idleFrames:5,skillIds:["extremeSpeed","hyperVoice","headbutt"],floors:[]},psyduck:{id:"psyduck",name:"Psyduck",spriteKey:"psyduck",types:[k.Water],attackType:k.Water,baseStats:{hp:50,atk:52,def:48},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["originPulse","hydroPump","surf"],floors:[]},seel:{id:"seel",name:"Seel",spriteKey:"seel",types:[k.Water],attackType:k.Water,baseStats:{hp:65,atk:45,def:55},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:32,walkFrames:7,idleFrames:2,skillIds:["originPulse","hydroPump","iceBeam"],floors:[]},cyndaquil:{id:"cyndaquil",name:"Cyndaquil",spriteKey:"cyndaquil",types:[k.Fire],attackType:k.Fire,baseStats:{hp:52,atk:60,def:43},walkFrameWidth:24,walkFrameHeight:32,idleFrameWidth:24,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["sacredFire","eruption","flamethrower"],floors:[]},fennekin:{id:"fennekin",name:"Fennekin",spriteKey:"fennekin",types:[k.Fire],attackType:k.Fire,baseStats:{hp:48,atk:62,def:45},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:32,walkFrames:7,idleFrames:4,skillIds:["sacredFire","eruption","heatWave"],floors:[]},sunkern:{id:"sunkern",name:"Sunkern",spriteKey:"sunkern",types:[k.Grass],attackType:k.Grass,baseStats:{hp:46,atk:52,def:46},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:32,walkFrames:8,idleFrames:2,skillIds:["seedFlare","powerWhip","leafStorm"],floors:[]},cacnea:{id:"cacnea",name:"Cacnea",spriteKey:"cacnea",types:[k.Grass],attackType:k.Grass,baseStats:{hp:55,atk:65,def:40},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["seedFlare","powerWhip","energyBall"],floors:[]},pichu:{id:"pichu",name:"Pichu",spriteKey:"pichu",types:[k.Electric],attackType:k.Electric,baseStats:{hp:45,atk:55,def:42},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:8,idleFrames:4,skillIds:["thunderCage","thunderbolt","discharge"],floors:[]},chinchou:{id:"chinchou",name:"Chinchou",spriteKey:"chinchou",types:[k.Electric,k.Water],attackType:k.Electric,baseStats:{hp:60,atk:50,def:48},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:7,idleFrames:5,skillIds:["thunderCage","thunderbolt","waterPulse"],floors:[]},weedle:{id:"weedle",name:"Weedle",spriteKey:"weedle",types:[k.Poison,k.Bug],attackType:k.Poison,baseStats:{hp:48,atk:55,def:45},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:3,idleFrames:4,skillIds:["toxicThread","gunkShot","venoshock"],floors:[]},qwilfish:{id:"qwilfish",name:"Qwilfish",spriteKey:"qwilfish",types:[k.Poison,k.Water],attackType:k.Poison,baseStats:{hp:60,atk:62,def:50},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:7,skillIds:["toxicThread","gunkShot","waterPulse"],floors:[]},donphan:{id:"donphan",name:"Donphan",spriteKey:"donphan",types:[k.Ground],attackType:k.Ground,baseStats:{hp:72,atk:70,def:65},walkFrameWidth:40,walkFrameHeight:32,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["precipiceBlades","earthquake","drillRun"],floors:[]},marowak:{id:"marowak",name:"Marowak",spriteKey:"marowak",types:[k.Ground],attackType:k.Ground,baseStats:{hp:60,atk:68,def:60},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["precipiceBlades","earthquake","boneRush"],floors:[]},onix:{id:"onix",name:"Onix",spriteKey:"onix",types:[k.Rock,k.Ground],attackType:k.Rock,baseStats:{hp:70,atk:55,def:72},walkFrameWidth:88,walkFrameHeight:112,idleFrameWidth:96,idleFrameHeight:104,walkFrames:4,idleFrames:4,skillIds:["diamondStorm","headSmash","stoneEdge"],floors:[]},omanyte:{id:"omanyte",name:"Omanyte",spriteKey:"omanyte",types:[k.Rock,k.Water],attackType:k.Rock,baseStats:{hp:58,atk:62,def:65},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:2,skillIds:["diamondStorm","headSmash","waterPulse"],floors:[]},scyther:{id:"scyther",name:"Scyther",spriteKey:"scyther",types:[k.Bug,k.Flying],attackType:k.Bug,baseStats:{hp:55,atk:72,def:50},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["xScissor","megahorn","airSlash"],floors:[]},pinsir:{id:"pinsir",name:"Pinsir",spriteKey:"pinsir",types:[k.Bug],attackType:k.Bug,baseStats:{hp:60,atk:70,def:58},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:5,skillIds:["xScissor","megahorn","closeCombat"],floors:[]},medicham:{id:"medicham",name:"Medicham",spriteKey:"medicham",types:[k.Fighting,k.Psychic],attackType:k.Fighting,baseStats:{hp:55,atk:68,def:52},walkFrameWidth:24,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["focusPunch","closeCombat","zenHeadbutt"],floors:[]},lucario:{id:"lucario",name:"Lucario",spriteKey:"lucario",types:[k.Fighting,k.Steel],attackType:k.Fighting,baseStats:{hp:58,atk:72,def:55},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["focusPunch","closeCombat","auraSphere"],floors:[]},metang:{id:"metang",name:"Metang",spriteKey:"metang",types:[k.Steel,k.Psychic],attackType:k.Steel,baseStats:{hp:62,atk:65,def:68},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:8,idleFrames:8,skillIds:["meteorMash","heavySlam","zenHeadbutt"],floors:[]},lairon:{id:"lairon",name:"Lairon",spriteKey:"lairon",types:[k.Steel,k.Rock],attackType:k.Steel,baseStats:{hp:65,atk:62,def:70},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["meteorMash","heavySlam","ironHead"],floors:[]},gengar:{id:"gengar",name:"Gengar",spriteKey:"gengar",types:[k.Ghost,k.Poison],attackType:k.Ghost,baseStats:{hp:55,atk:72,def:48},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:8,skillIds:["shadowClaw","cursedFlame","shadowBall"],floors:[]},chandelure:{id:"chandelure",name:"Chandelure",spriteKey:"chandelure",types:[k.Ghost,k.Fire],attackType:k.Ghost,baseStats:{hp:52,atk:75,def:45},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:40,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["shadowClaw","cursedFlame","flamethrower"],floors:[]},alakazam:{id:"alakazam",name:"Alakazam",spriteKey:"alakazam",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:50,atk:75,def:42},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:8,skillIds:["psychoCut","futuresight","psychic"],floors:[]},gardevoir:{id:"gardevoir",name:"Gardevoir",spriteKey:"gardevoir",types:[k.Psychic,k.Fairy],attackType:k.Psychic,baseStats:{hp:55,atk:72,def:48},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["psychoCut","futuresight","moonblast"],floors:[]},omastar:{id:"omastar",name:"Omastar",spriteKey:"omanyte",types:[k.Rock,k.Water],attackType:k.Rock,baseStats:{hp:70,atk:72,def:68},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:56,idleFrameHeight:48,walkFrames:4,idleFrames:13,skillIds:["headSmash","ancientPower","brine"],floors:[]},metagross:{id:"metagross",name:"Metagross",spriteKey:"metang",types:[k.Steel,k.Psychic],attackType:k.Steel,baseStats:{hp:80,atk:78,def:75},walkFrameWidth:48,walkFrameHeight:40,idleFrameWidth:48,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["meteorMash","heavySlam","zenHeadbutt"],floors:[]},aggron:{id:"aggron",name:"Aggron",spriteKey:"lairon",types:[k.Steel,k.Rock],attackType:k.Steel,baseStats:{hp:70,atk:72,def:80},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:56,idleFrameHeight:48,walkFrames:4,idleFrames:13,skillIds:["heavySlam","headSmash","ironHead"],floors:[]},lapras:{id:"lapras",name:"Lapras",spriteKey:"lapras",types:[k.Water,k.Ice],attackType:k.Ice,baseStats:{hp:78,atk:62,def:60},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:48,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["iceBeam","surf","freezeDry"],floors:[]},weavile:{id:"weavile",name:"Weavile",spriteKey:"weavile",types:[k.Dark,k.Ice],attackType:k.Ice,baseStats:{hp:60,atk:76,def:50},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["nightSlash","icePunch","icicleCrash"],floors:[]},honchkrow:{id:"honchkrow",name:"Honchkrow",spriteKey:"honchkrow",types:[k.Dark,k.Flying],attackType:k.Dark,baseStats:{hp:70,atk:75,def:48},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:40,walkFrames:7,idleFrames:4,skillIds:["nightSlash","braveBird","suckerPunch"],floors:[]},houndoom:{id:"houndoom",name:"Houndoom",spriteKey:"houndoom",types:[k.Dark,k.Fire],attackType:k.Dark,baseStats:{hp:65,atk:72,def:45},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:64,walkFrames:4,idleFrames:14,skillIds:["flamethrower","darkPulse","nastyPlot"],floors:[]},florges:{id:"florges",name:"Florges",spriteKey:"florges",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:68,atk:70,def:64},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["moonblast","dazzlingGleam","petalBlizzard"],floors:[]},mimikyu:{id:"mimikyu",name:"Mimikyu",spriteKey:"mimikyu",types:[k.Ghost,k.Fairy],attackType:k.Fairy,baseStats:{hp:62,atk:72,def:58},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["shadowClaw","playRough","shadowSneak"],floors:[]},dragonite:{id:"dragonite",name:"Dragonite",spriteKey:"dragonite",types:[k.Dragon,k.Flying],attackType:k.Dragon,baseStats:{hp:80,atk:78,def:65},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:64,walkFrames:4,idleFrames:7,skillIds:["dragonClaw","extremeSpeed","hurricane"],floors:[]},flygon:{id:"flygon",name:"Flygon",spriteKey:"flygon",types:[k.Ground,k.Dragon],attackType:k.Dragon,baseStats:{hp:68,atk:70,def:58},walkFrameWidth:32,walkFrameHeight:64,idleFrameWidth:32,idleFrameHeight:72,walkFrames:4,idleFrames:7,skillIds:["dragonPulse","earthquake","dragonRush"],floors:[]},staraptor:{id:"staraptor",name:"Staraptor",spriteKey:"staraptor",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:65,atk:76,def:52},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["braveBird","closeCombat","aerialAce"],floors:[]},braviary:{id:"braviary",name:"Braviary",spriteKey:"braviary",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:70,atk:74,def:56},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["braveBird","superpower","crushClaw"],floors:[]},snorlax:{id:"snorlax",name:"Snorlax",spriteKey:"snorlax",types:[k.Normal],attackType:k.Normal,baseStats:{hp:90,atk:68,def:62},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:64,walkFrames:4,idleFrames:6,skillIds:["bodySlam","heavySlam","rest"],floors:[]},zangoose:{id:"zangoose",name:"Zangoose",spriteKey:"zangoose",types:[k.Normal],attackType:k.Normal,baseStats:{hp:63,atk:75,def:48},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["closeCombat","crushClaw","facade"],floors:[]},gyarados:{id:"gyarados",name:"Gyarados",spriteKey:"gyarados",types:[k.Water],attackType:k.Water,baseStats:{hp:95,atk:85,def:70},walkFrameWidth:88,walkFrameHeight:128,idleFrameWidth:72,idleFrameHeight:128,walkFrames:4,idleFrames:4,skillIds:["waterSpout","hydroPump","crunch"],floors:[]},kingdra:{id:"kingdra",name:"Kingdra",spriteKey:"kingdra",types:[k.Water],attackType:k.Water,baseStats:{hp:85,atk:80,def:80},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:40,idleFrameHeight:72,walkFrames:4,idleFrames:12,skillIds:["waterSpout","dragonPulse","originPulse"],floors:[]},blaziken:{id:"blaziken",name:"Blaziken",spriteKey:"blaziken",types:[k.Fire],attackType:k.Fire,baseStats:{hp:85,atk:90,def:65},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:2,skillIds:["dragonAscent","blazeKick","closeCombat"],floors:[]},typhlosion:{id:"typhlosion",name:"Typhlosion",spriteKey:"typhlosion",types:[k.Fire],attackType:k.Fire,baseStats:{hp:90,atk:82,def:70},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["dragonAscent","eruption","sacredFire"],floors:[]},venusaur:{id:"venusaur",name:"Venusaur",spriteKey:"venusaur",types:[k.Grass],attackType:k.Grass,baseStats:{hp:95,atk:78,def:78},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:32,walkFrames:4,idleFrames:4,skillIds:["frenzyPlant","seedFlare","powerWhip"],floors:[]},sceptile:{id:"sceptile",name:"Sceptile",spriteKey:"sceptile",types:[k.Grass],attackType:k.Grass,baseStats:{hp:80,atk:88,def:65},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["frenzyPlant","leafStorm","dragonPulse"],floors:[]},jolteon:{id:"jolteon",name:"Jolteon",spriteKey:"jolteon",types:[k.Electric],attackType:k.Electric,baseStats:{hp:75,atk:90,def:55},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["voltTackle","thunderbolt","discharge"],floors:[]},ampharos:{id:"ampharos",name:"Ampharos",spriteKey:"ampharos",types:[k.Electric],attackType:k.Electric,baseStats:{hp:90,atk:82,def:72},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:64,walkFrames:4,idleFrames:7,skillIds:["voltTackle","thunderCage","dragonPulse"],floors:[]},nidoking:{id:"nidoking",name:"Nidoking",spriteKey:"nidoking",types:[k.Poison],attackType:k.Poison,baseStats:{hp:90,atk:85,def:72},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["sludgeWave","gunkShot","earthquake"],floors:[]},crobat:{id:"crobat",name:"Crobat",spriteKey:"crobat",types:[k.Poison],attackType:k.Poison,baseStats:{hp:82,atk:80,def:70},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["sludgeWave","poisonJab","braveBird"],floors:[]},krookodile:{id:"krookodile",name:"Krookodile",spriteKey:"krookodile",types:[k.Ground],attackType:k.Ground,baseStats:{hp:88,atk:88,def:68},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["tectonicRage","earthquake","crunch"],floors:[]},nidoqueen:{id:"nidoqueen",name:"Nidoqueen",spriteKey:"nidoqueen",types:[k.Ground],attackType:k.Ground,baseStats:{hp:95,atk:78,def:80},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:5,skillIds:["tectonicRage","precipiceBlades","sludgeWave"],floors:[]},tyranitar:{id:"tyranitar",name:"Tyranitar",spriteKey:"tyranitar",types:[k.Rock,k.Dark],attackType:k.Rock,baseStats:{hp:100,atk:95,def:90},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["diamondStorm","stoneEdge","crunch"],floors:[]},aerodactyl:{id:"aerodactyl",name:"Aerodactyl",spriteKey:"aerodactyl",types:[k.Rock,k.Flying],attackType:k.Rock,baseStats:{hp:80,atk:92,def:70},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:40,idleFrameHeight:64,walkFrames:4,idleFrames:8,skillIds:["headSmash","rockPolish","skyAttack"],floors:[]},yanmega:{id:"yanmega",name:"Yanmega",spriteKey:"yanmega",types:[k.Bug,k.Flying],attackType:k.Bug,baseStats:{hp:86,atk:90,def:72},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:16,idleFrames:12,skillIds:["bugBuzz","megahorn","airSlash"],floors:[]},scolipede:{id:"scolipede",name:"Scolipede",spriteKey:"scolipede",types:[k.Bug,k.Poison],attackType:k.Bug,baseStats:{hp:90,atk:88,def:78},walkFrameWidth:64,walkFrameHeight:72,idleFrameWidth:64,idleFrameHeight:72,walkFrames:4,idleFrames:4,skillIds:["megahorn","sludgeWave","xScissor"],floors:[]},conkeldurr:{id:"conkeldurr",name:"Conkeldurr",spriteKey:"conkeldurr",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:105,atk:95,def:85},walkFrameWidth:48,walkFrameHeight:48,idleFrameWidth:48,idleFrameHeight:56,walkFrames:4,idleFrames:11,skillIds:["megaPunch","superpower","hammerArm"],floors:[]},machamp:{id:"machamp",name:"Machamp",spriteKey:"machamp",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:90,atk:98,def:75},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:10,skillIds:["megaPunch","closeCombat","focusPunch"],floors:[]},magnezone:{id:"magnezone",name:"Magnezone",spriteKey:"magnezone",types:[k.Electric,k.Steel],attackType:k.Steel,baseStats:{hp:85,atk:90,def:92},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:6,idleFrames:13,skillIds:["doomDesire","flashCannon","thunderbolt"],floors:[]},empoleon:{id:"empoleon",name:"Empoleon",spriteKey:"empoleon",types:[k.Water,k.Steel],attackType:k.Steel,baseStats:{hp:92,atk:86,def:95},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["doomDesire","meteorMash","hydroPump"],floors:[]},dusknoir:{id:"dusknoir",name:"Dusknoir",spriteKey:"dusknoir",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:95,atk:85,def:92},walkFrameWidth:48,walkFrameHeight:72,idleFrameWidth:48,idleFrameHeight:80,walkFrames:4,idleFrames:13,skillIds:["shadowRave","shadowForce","phantomForce"],floors:[]},cofagrigus:{id:"cofagrigus",name:"Cofagrigus",spriteKey:"cofagrigus",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:88,atk:80,def:98},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["shadowRave","cursedFlame","shadowBall"],floors:[]},reuniclus:{id:"reuniclus",name:"Reuniclus",spriteKey:"reuniclus",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:100,atk:90,def:75},walkFrameWidth:56,walkFrameHeight:56,idleFrameWidth:56,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["futuresight","psychic","expandingForce"],floors:[]},gothitelle:{id:"gothitelle",name:"Gothitelle",spriteKey:"gothitelle",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:88,atk:88,def:85},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["futuresight","psychoCut","hypnosis"],floors:[]},mamoswine:{id:"mamoswine",name:"Mamoswine",spriteKey:"mamoswine",types:[k.Ice,k.Ground],attackType:k.Ice,baseStats:{hp:110,atk:95,def:70},walkFrameWidth:48,walkFrameHeight:40,idleFrameWidth:48,idleFrameHeight:48,walkFrames:4,idleFrames:9,skillIds:["sheerCold","avalanche","blizzard","earthPower"],floors:[]},walrein:{id:"walrein",name:"Walrein",spriteKey:"walrein",types:[k.Ice,k.Water],attackType:k.Ice,baseStats:{hp:105,atk:88,def:80},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:48,walkFrames:7,idleFrames:8,skillIds:["sheerCold","iceBeam","blizzard","surf"],floors:[]},darkrai:{id:"darkrai",name:"Darkrai",spriteKey:"darkrai",types:[k.Dark],attackType:k.Dark,baseStats:{hp:90,atk:100,def:70},walkFrameWidth:40,walkFrameHeight:80,idleFrameWidth:40,idleFrameHeight:80,walkFrames:8,idleFrames:7,skillIds:["darkVoid","darkPulse","nastyPlot","shadowBall"],floors:[]},hydreigon:{id:"hydreigon",name:"Hydreigon",spriteKey:"hydreigon",types:[k.Dark,k.Dragon],attackType:k.Dark,baseStats:{hp:98,atk:98,def:72},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:48,idleFrameHeight:72,walkFrames:6,idleFrames:6,skillIds:["darkVoid","crunch","dracoMeteor","darkPulse"],floors:[]},sylveon:{id:"sylveon",name:"Sylveon",spriteKey:"sylveon",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:95,atk:92,def:80},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:8,skillIds:["moonforce","moonblast","dazzlingGleam","drainingKiss"],floors:[]},hatterene:{id:"hatterene",name:"Hatterene",spriteKey:"hatterene",types:[k.Fairy,k.Psychic],attackType:k.Fairy,baseStats:{hp:90,atk:95,def:85},walkFrameWidth:56,walkFrameHeight:64,idleFrameWidth:56,idleFrameHeight:64,walkFrames:4,idleFrames:9,skillIds:["moonforce","dazzlingGleam","psychic","playRough"],floors:[]},haxorus:{id:"haxorus",name:"Haxorus",spriteKey:"haxorus",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:92,atk:102,def:72},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["eternaBeam","outrage","dragonRush","swordsDance"],floors:[]},goodra:{id:"goodra",name:"Goodra",spriteKey:"goodra",types:[k.Dragon],attackType:k.Dragon,baseStats:{hp:105,atk:90,def:85},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:64,walkFrames:4,idleFrames:7,skillIds:["eternaBeam","dragonPulse","dracoMeteor","surf"],floors:[]},pidgeot:{id:"pidgeot",name:"Pidgeot",spriteKey:"pidgeot",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:90,atk:92,def:70},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["oblivionWing","hurricane","braveBird","airSlash"],floors:[]},noivern:{id:"noivern",name:"Noivern",spriteKey:"noivern",types:[k.Flying,k.Dragon],attackType:k.Flying,baseStats:{hp:88,atk:95,def:70},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:40,idleFrameHeight:64,walkFrames:4,idleFrames:8,skillIds:["oblivionWing","hurricane","boomburst","dragonPulse"],floors:[]},blissey:{id:"blissey",name:"Blissey",spriteKey:"blissey",types:[k.Normal],attackType:k.Normal,baseStats:{hp:130,atk:75,def:60},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["gigaImpact","hyperVoice","bodySlam","rest"],floors:[]},porygonZ:{id:"porygonZ",name:"Porygon-Z",spriteKey:"porygonZ",types:[k.Normal],attackType:k.Normal,baseStats:{hp:85,atk:100,def:65},walkFrameWidth:24,walkFrameHeight:64,idleFrameWidth:24,idleFrameHeight:64,walkFrames:7,idleFrames:16,skillIds:["gigaImpact","triAttack","hyperVoice","swordsDance"],floors:[]},blastoise:{id:"blastoise",name:"Blastoise",spriteKey:"blastoise",types:[k.Water],attackType:k.Water,baseStats:{hp:100,atk:90,def:85},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:40,walkFrames:4,idleFrames:8,skillIds:["hydroCannon","waterSpout","shellSmash","originPulse"],floors:[]},feraligatr:{id:"feraligatr",name:"Feraligatr",spriteKey:"feraligatr",types:[k.Water],attackType:k.Water,baseStats:{hp:95,atk:95,def:80},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["hydroCannon","waterSpout","crunch","superpower"],floors:[]},charizard:{id:"charizard",name:"Charizard",spriteKey:"charizard",types:[k.Fire,k.Flying],attackType:k.Fire,baseStats:{hp:95,atk:100,def:75},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["blastBurn","dragonAscent","airSlash","fireBlast"],floors:[]},delphox:{id:"delphox",name:"Delphox",spriteKey:"delphox",types:[k.Fire,k.Psychic],attackType:k.Fire,baseStats:{hp:90,atk:95,def:72},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["blastBurn","mysticFire","psychic","futuresight"],floors:[]},torterra:{id:"torterra",name:"Torterra",spriteKey:"torterra",types:[k.Grass,k.Ground],attackType:k.Grass,baseStats:{hp:105,atk:90,def:90},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:48,idleFrameHeight:48,walkFrames:4,idleFrames:5,skillIds:["woodHammer","frenzyPlant","earthquake","stompingTantrum"],floors:[]},serperior:{id:"serperior",name:"Serperior",spriteKey:"serperior",types:[k.Grass],attackType:k.Grass,baseStats:{hp:90,atk:95,def:80},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:48,walkFrames:7,idleFrames:2,skillIds:["leafBlade","frenzyPlant","leafStorm","swordsDance"],floors:[]},electivire:{id:"electivire",name:"Electivire",spriteKey:"electivire",types:[k.Electric],attackType:k.Electric,baseStats:{hp:95,atk:100,def:75},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:48,idleFrameHeight:56,walkFrames:4,idleFrames:7,skillIds:["thunder","voltTackle","thunderPunch","crossChop"],floors:[]},luxray:{id:"luxray",name:"Luxray",spriteKey:"luxray",types:[k.Electric],attackType:k.Electric,baseStats:{hp:90,atk:95,def:78},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:8,skillIds:["thunder","voltTackle","crunch","wildCharge"],floors:[]},roserade:{id:"roserade",name:"Roserade",spriteKey:"roserade",types:[k.Grass,k.Poison],attackType:k.Poison,baseStats:{hp:85,atk:100,def:70},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["toxicWave","sludgeWave","energyBall","venomDrench"],floors:[]},vileplume:{id:"vileplume",name:"Vileplume",spriteKey:"vileplume",types:[k.Grass,k.Poison],attackType:k.Poison,baseStats:{hp:95,atk:90,def:78},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:12,skillIds:["toxicWave","sludgeWave","petalDance","sleepPowder"],floors:[]},rhyperior:{id:"rhyperior",name:"Rhyperior",spriteKey:"rhyperior",types:[k.Ground,k.Rock],attackType:k.Ground,baseStats:{hp:110,atk:95,def:90},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:48,idleFrameHeight:64,walkFrames:4,idleFrames:11,skillIds:["fissure","tectonicRage","stoneEdge","stompingTantrum"],floors:[]},dugtrio:{id:"dugtrio",name:"Dugtrio",spriteKey:"dugtrio",types:[k.Ground],attackType:k.Ground,baseStats:{hp:80,atk:100,def:65},walkFrameWidth:56,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:32,walkFrames:3,idleFrames:2,skillIds:["fissure","tectonicRage","earthquake","dig"],floors:[]},golem:{id:"golem",name:"Golem",spriteKey:"golem",types:[k.Rock,k.Ground],attackType:k.Rock,baseStats:{hp:100,atk:95,def:95},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:32,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["diamondStorm","headSmash","earthquake","stoneEdge"],floors:[]},terrakion:{id:"terrakion",name:"Terrakion",spriteKey:"terrakion",types:[k.Rock,k.Fighting],attackType:k.Rock,baseStats:{hp:95,atk:100,def:85},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:48,idleFrameHeight:40,walkFrames:4,idleFrames:8,skillIds:["sacredSword","diamondStorm","closeCombat","stoneEdge"],floors:[]},pheromosa:{id:"pheromosa",name:"Pheromosa",spriteKey:"pheromosa",types:[k.Bug,k.Fighting],attackType:k.Bug,baseStats:{hp:75,atk:105,def:55},walkFrameWidth:48,walkFrameHeight:72,idleFrameWidth:48,idleFrameHeight:72,walkFrames:4,idleFrames:6,skillIds:["tripleAxel","bugBuzz","highJumpKick","closeCombat"],floors:[]},escavalier:{id:"escavalier",name:"Escavalier",spriteKey:"escavalier",types:[k.Bug,k.Steel],attackType:k.Bug,baseStats:{hp:90,atk:100,def:95},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["megahorn","ironHead","xScissor","drillRun"],floors:[]},kommoo:{id:"kommoo",name:"Kommo-o",spriteKey:"kommoo",types:[k.Dragon,k.Fighting],attackType:k.Fighting,baseStats:{hp:95,atk:95,def:95},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["clangorousSoul","closeCombat","dragonClaw","auraSphere"],floors:[]},gallade:{id:"gallade",name:"Gallade",spriteKey:"gallade",types:[k.Psychic,k.Fighting],attackType:k.Fighting,baseStats:{hp:85,atk:100,def:75},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:64,walkFrames:4,idleFrames:5,skillIds:["psychoCut","closeCombat","leafBlade","swordsDance"],floors:[]},corviknight:{id:"corviknight",name:"Corviknight",spriteKey:"corviknight",types:[k.Flying,k.Steel],attackType:k.Steel,baseStats:{hp:100,atk:90,def:95},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:4,skillIds:["braveBird","ironHead","bodySlam","ironDefense"],floors:[]},bastiodon:{id:"bastiodon",name:"Bastiodon",spriteKey:"bastiodon",types:[k.Rock,k.Steel],attackType:k.Steel,baseStats:{hp:90,atk:70,def:110},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["flashCannon","ironDefense","stoneEdge","heavySlam"],floors:[]},aegislash:{id:"aegislash",name:"Aegislash",spriteKey:"aegislash",types:[k.Steel,k.Ghost],attackType:k.Ghost,baseStats:{hp:85,atk:100,def:100},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:8,idleFrames:8,skillIds:["shadowBall","ironHead","sacredSword","kingsShield"],floors:[]},jellicent:{id:"jellicent",name:"Jellicent",spriteKey:"jellicent",types:[k.Water,k.Ghost],attackType:k.Ghost,baseStats:{hp:105,atk:80,def:85},walkFrameWidth:24,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:56,walkFrames:7,idleFrames:7,skillIds:["hexBlast","shadowBall","surf","recover"],floors:[]},slowking:{id:"slowking",name:"Slowking",spriteKey:"slowking",types:[k.Water,k.Psychic],attackType:k.Psychic,baseStats:{hp:100,atk:90,def:85},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:10,skillIds:["psychic","surf","futuresight","zenHeadbutt"],floors:[]},bronzong:{id:"bronzong",name:"Bronzong",spriteKey:"bronzong",types:[k.Steel,k.Psychic],attackType:k.Psychic,baseStats:{hp:85,atk:85,def:100},walkFrameWidth:24,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:48,walkFrames:8,idleFrames:8,skillIds:["flashCannon","psychic","gyroBall","hypnosis"],floors:[]},froslass:{id:"froslass",name:"Froslass",spriteKey:"froslass",types:[k.Ice,k.Ghost],attackType:k.Ice,baseStats:{hp:80,atk:95,def:75},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:8,idleFrames:14,skillIds:["blizzard","shadowBall","iceBeam","destinyBond"],floors:[]},abomasnow:{id:"abomasnow",name:"Abomasnow",spriteKey:"abomasnow",types:[k.Grass,k.Ice],attackType:k.Ice,baseStats:{hp:105,atk:90,def:85},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:7,skillIds:["woodHammer","blizzard","iceBeam","auroraVeil"],floors:[]},sharpedo:{id:"sharpedo",name:"Sharpedo",spriteKey:"sharpedo",types:[k.Water,k.Dark],attackType:k.Dark,baseStats:{hp:75,atk:105,def:55},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:48,walkFrames:8,idleFrames:4,skillIds:["crunch","nightSlash","aquaFang","waterfall"],floors:[]},zoroark:{id:"zoroark",name:"Zoroark",spriteKey:"zoroark",types:[k.Dark],attackType:k.Dark,baseStats:{hp:85,atk:100,def:70},walkFrameWidth:48,walkFrameHeight:48,idleFrameWidth:56,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["nightDaze","darkPulse","nastyPlot","nightSlash"],floors:[]},primarina:{id:"primarina",name:"Primarina",spriteKey:"primarina",types:[k.Water,k.Fairy],attackType:k.Fairy,baseStats:{hp:95,atk:100,def:80},walkFrameWidth:48,walkFrameHeight:64,idleFrameWidth:48,idleFrameHeight:56,walkFrames:7,idleFrames:6,skillIds:["sparklingAria","moonblast","surf","dazzlingGleam"],floors:[]},diancie:{id:"diancie",name:"Diancie",spriteKey:"diancie",types:[k.Rock,k.Fairy],attackType:k.Fairy,baseStats:{hp:85,atk:95,def:100},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:56,walkFrames:5,idleFrames:8,skillIds:["diamondStorm","moonblast","dazzlingGleam","stoneEdge"],floors:[]},dragapult:{id:"dragapult",name:"Dragapult",spriteKey:"dragapult",types:[k.Dragon,k.Ghost],attackType:k.Dragon,baseStats:{hp:90,atk:105,def:70},walkFrameWidth:48,walkFrameHeight:80,idleFrameWidth:48,idleFrameHeight:72,walkFrames:8,idleFrames:4,skillIds:["dragonDarts","shadowBall","dragonDance","phantomForce"],floors:[]},duraludon:{id:"duraludon",name:"Duraludon",spriteKey:"duraludon",types:[k.Steel,k.Dragon],attackType:k.Dragon,baseStats:{hp:85,atk:90,def:100},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["steelBeam","dragonPulse","flashCannon","ironDefense"],floors:[]},swellow:{id:"swellow",name:"Swellow",spriteKey:"swellow",types:[k.Normal,k.Flying],attackType:k.Flying,baseStats:{hp:80,atk:100,def:65},walkFrameWidth:32,walkFrameHeight:32,idleFrameWidth:32,idleFrameHeight:64,walkFrames:4,idleFrames:14,skillIds:["braveBird","aerialAce","facade","boomburst"],floors:[]},talonflame:{id:"talonflame",name:"Talonflame",spriteKey:"talonflame",types:[k.Fire,k.Flying],attackType:k.Flying,baseStats:{hp:85,atk:100,def:70},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:40,idleFrameHeight:64,walkFrames:4,idleFrames:4,skillIds:["braveBird","flareBlitz","flamethrower","aerialAce"],floors:[]},slaking:{id:"slaking",name:"Slaking",spriteKey:"slaking",types:[k.Normal],attackType:k.Normal,baseStats:{hp:115,atk:105,def:80},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:7,skillIds:["gigaImpact","hammerArm","heavySlam","earthquake"],floors:[]},lopunny:{id:"lopunny",name:"Lopunny",spriteKey:"lopunny",types:[k.Normal],attackType:k.Normal,baseStats:{hp:80,atk:100,def:75},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:32,idleFrameHeight:56,walkFrames:9,idleFrames:7,skillIds:["returnStrike","highJumpKick","facade","swordsDance"],floors:[]},suicune:{id:"suicune",name:"Suicune",spriteKey:"suicune",types:[k.Water],attackType:k.Water,baseStats:{hp:110,atk:95,def:100},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:48,idleFrameHeight:48,walkFrames:4,idleFrames:14,skillIds:["auroraBeam11","tidalCrush","calmMind","originPulse"],floors:[]},lugia:{id:"lugia",name:"Lugia",spriteKey:"lugia",types:[k.Water,k.Flying],attackType:k.Water,baseStats:{hp:120,atk:100,def:110},walkFrameWidth:80,walkFrameHeight:96,idleFrameWidth:72,idleFrameHeight:96,walkFrames:2,idleFrames:2,skillIds:["aeroblast","tidalCrush","calmMind","hydroCannon"],floors:[]},hooh:{id:"hooh",name:"Ho-Oh",spriteKey:"hooh",types:[k.Fire,k.Flying],attackType:k.Fire,baseStats:{hp:120,atk:110,def:100},walkFrameWidth:72,walkFrameHeight:112,idleFrameWidth:72,idleFrameHeight:112,walkFrames:5,idleFrames:5,skillIds:["sacredBlaze","holyDive","sacredFire","recover"],floors:[]},entei:{id:"entei",name:"Entei",spriteKey:"entei",types:[k.Fire],attackType:k.Fire,baseStats:{hp:115,atk:105,def:90},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:48,idleFrameHeight:56,walkFrames:4,idleFrames:14,skillIds:["sacredFire","fireForce","flareBlitz","sacredBlaze"],floors:[]},celebi:{id:"celebi",name:"Celebi",spriteKey:"celebi",types:[k.Grass,k.Psychic],attackType:k.Grass,baseStats:{hp:110,atk:100,def:100},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:56,walkFrames:8,idleFrames:6,skillIds:["verdantWrath","healingWish","seedFlare","frenzyPlant"],floors:[]},virizion:{id:"virizion",name:"Virizion",spriteKey:"virizion",types:[k.Grass,k.Fighting],attackType:k.Grass,baseStats:{hp:100,atk:105,def:95},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:14,skillIds:["sacredBlade","verdantWrath","leafBlade","closeCombat"],floors:[]},raikou:{id:"raikou",name:"Raikou",spriteKey:"raikou",types:[k.Electric],attackType:k.Electric,baseStats:{hp:105,atk:105,def:90},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:56,idleFrameHeight:48,walkFrames:4,idleFrames:14,skillIds:["boltStrike","thunder","thunderFang","voltTackle"],floors:[]},zekrom:{id:"zekrom",name:"Zekrom",spriteKey:"zekrom",types:[k.Electric,k.Dragon],attackType:k.Electric,baseStats:{hp:120,atk:115,def:100},walkFrameWidth:72,walkFrameHeight:104,idleFrameWidth:72,idleFrameHeight:96,walkFrames:6,idleFrames:14,skillIds:["fusionBolt","boltStrike","thunder","dragonClaw"],floors:[]},nihilego:{id:"nihilego",name:"Nihilego",spriteKey:"nihilego",types:[k.Poison,k.Rock],attackType:k.Poison,baseStats:{hp:105,atk:100,def:85},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:7,idleFrames:7,skillIds:["powerGem","toxicDeluge","beastBoost","sludgeWave"],floors:[]},naganadel:{id:"naganadel",name:"Naganadel",spriteKey:"naganadel",types:[k.Poison,k.Dragon],attackType:k.Poison,baseStats:{hp:100,atk:110,def:85},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:72,walkFrames:4,idleFrames:7,skillIds:["venomStorm","toxicDeluge","beastBoost","sludgeWave"],floors:[]},groudon:{id:"groudon",name:"Groudon",spriteKey:"groudon",types:[k.Ground],attackType:k.Ground,baseStats:{hp:120,atk:115,def:105},walkFrameWidth:64,walkFrameHeight:88,idleFrameWidth:64,idleFrameHeight:80,walkFrames:4,idleFrames:14,skillIds:["continentalCrush","precipiceBlades","earthquake","earthShatter"],floors:[]},landorus:{id:"landorus",name:"Landorus",spriteKey:"landorus",types:[k.Ground,k.Flying],attackType:k.Ground,baseStats:{hp:105,atk:110,def:90},walkFrameWidth:48,walkFrameHeight:64,idleFrameWidth:40,idleFrameHeight:64,walkFrames:9,idleFrames:9,skillIds:["earthShatter","sandVortex","continentalCrush","tectonicRage"],floors:[]},regirock:{id:"regirock",name:"Regirock",spriteKey:"regirock",types:[k.Rock],attackType:k.Rock,baseStats:{hp:115,atk:100,def:115},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:7,skillIds:["lockOn","hammeringForce","stoneEdge","rockWrecker"],floors:[]},stakataka:{id:"stakataka",name:"Stakataka",spriteKey:"stakataka",types:[k.Rock,k.Steel],attackType:k.Rock,baseStats:{hp:110,atk:105,def:120},walkFrameWidth:64,walkFrameHeight:96,idleFrameWidth:48,idleFrameHeight:64,walkFrames:4,idleFrames:12,skillIds:["ultraWall","beastCrush","stoneEdge","ironHead"],floors:[]},genesect:{id:"genesect",name:"Genesect",spriteKey:"genesect",types:[k.Bug,k.Steel],attackType:k.Bug,baseStats:{hp:105,atk:115,def:90},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:56,walkFrames:4,idleFrames:4,skillIds:["technoBlast","magnetBomb","xScissor","flashCannon"],floors:[]},buzzwole:{id:"buzzwole",name:"Buzzwole",spriteKey:"buzzwole",types:[k.Bug,k.Fighting],attackType:k.Bug,baseStats:{hp:120,atk:110,def:100},walkFrameWidth:56,walkFrameHeight:72,idleFrameWidth:48,idleFrameHeight:72,walkFrames:6,idleFrames:24,skillIds:["beastImpact","leechPunch","megahorn","superpower"],floors:[]},cobalion:{id:"cobalion",name:"Cobalion",spriteKey:"cobalion",types:[k.Steel,k.Fighting],attackType:k.Fighting,baseStats:{hp:100,atk:105,def:110},walkFrameWidth:32,walkFrameHeight:64,idleFrameWidth:32,idleFrameHeight:64,walkFrames:4,idleFrames:14,skillIds:["ironWill","sacredCharge","sacredSword","flashCannon"],floors:[]},marshadow:{id:"marshadow",name:"Marshadow",spriteKey:"marshadow",types:[k.Fighting,k.Ghost],attackType:k.Fighting,baseStats:{hp:105,atk:115,def:90},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:40,walkFrames:4,idleFrames:7,skillIds:["spectralThief","soulStealing","closeCombat","shadowPunch"],floors:[]},registeel:{id:"registeel",name:"Registeel",spriteKey:"registeel",types:[k.Steel],attackType:k.Steel,baseStats:{hp:115,atk:95,def:120},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:40,idleFrameHeight:40,walkFrames:4,idleFrames:2,skillIds:["ironJudgment","registeelBarrier","flashCannon","ironHead"],floors:[]},solgaleo:{id:"solgaleo",name:"Solgaleo",spriteKey:"solgaleo",types:[k.Steel,k.Psychic],attackType:k.Steel,baseStats:{hp:120,atk:115,def:100},walkFrameWidth:48,walkFrameHeight:72,idleFrameWidth:48,idleFrameHeight:72,walkFrames:4,idleFrames:8,skillIds:["sunsteelStrike","solarFlare","flashCannon","psychic"],floors:[]},giratina:{id:"giratina",name:"Giratina",spriteKey:"giratina",types:[k.Ghost,k.Dragon],attackType:k.Ghost,baseStats:{hp:120,atk:110,def:105},walkFrameWidth:64,walkFrameHeight:80,idleFrameWidth:56,idleFrameHeight:80,walkFrames:4,idleFrames:2,skillIds:["shadowRend","distortionWave","shadowForce","dragonClaw"],floors:[]},lunala:{id:"lunala",name:"Lunala",spriteKey:"lunala",types:[k.Ghost,k.Psychic],attackType:k.Ghost,baseStats:{hp:115,atk:113,def:95},walkFrameWidth:80,walkFrameHeight:104,idleFrameWidth:80,idleFrameHeight:96,walkFrames:4,idleFrames:4,skillIds:["moongeistBeam","phantomEclipse","shadowBall","psychic"],floors:[]},mewtwo:{id:"mewtwo",name:"Mewtwo",spriteKey:"mewtwo",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:115,atk:120,def:90},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:64,walkFrames:6,idleFrames:8,skillIds:["psystrike","mindShatter","psychic","auraSphere"],floors:[]},deoxys:{id:"deoxys",name:"Deoxys",spriteKey:"deoxys",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:100,atk:120,def:85},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:32,idleFrameHeight:64,walkFrames:8,idleFrames:8,skillIds:["psychoBoost","cosmicRay","psychic","expandingForce"],floors:[]},regice:{id:"regice",name:"Regice",spriteKey:"regice",types:[k.Ice],attackType:k.Ice,baseStats:{hp:115,atk:95,def:120},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:3,skillIds:["glacialPrison","frigidBarrier","sheerCold","absoluteZero"],floors:[]},kyurem:{id:"kyurem",name:"Kyurem",spriteKey:"kyurem",types:[k.Ice,k.Dragon],attackType:k.Ice,baseStats:{hp:110,atk:115,def:95},walkFrameWidth:80,walkFrameHeight:80,idleFrameWidth:80,idleFrameHeight:80,walkFrames:4,idleFrames:2,skillIds:["glaciate","frozenWorld","iceBreath","dracoMeteor"],floors:[]},yveltal:{id:"yveltal",name:"Yveltal",spriteKey:"yveltal",types:[k.Dark,k.Flying],attackType:k.Dark,baseStats:{hp:115,atk:115,def:95},walkFrameWidth:80,walkFrameHeight:96,idleFrameWidth:80,idleFrameHeight:96,walkFrames:6,idleFrames:6,skillIds:["deathWing","oblivionShroud","deathGaze","oblivionWing"],floors:[]},hoopa:{id:"hoopa",name:"Hoopa",spriteKey:"hoopa",types:[k.Dark,k.Psychic],attackType:k.Dark,baseStats:{hp:105,atk:120,def:90},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:8,idleFrames:16,skillIds:["hyperspaceFury","dimensionalRift","darkVortex","psychic"],floors:[]},xerneas:{id:"xerneas",name:"Xerneas",spriteKey:"xerneas",types:[k.Fairy],attackType:k.Fairy,baseStats:{hp:115,atk:110,def:100},walkFrameWidth:64,walkFrameHeight:120,idleFrameWidth:56,idleFrameHeight:120,walkFrames:4,idleFrames:6,skillIds:["geomancy","hornLeech","auroraBeam","moonblast"],floors:[]},magearna:{id:"magearna",name:"Magearna",spriteKey:"magearna",types:[k.Fairy,k.Steel],attackType:k.Fairy,baseStats:{hp:110,atk:115,def:105},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:2,skillIds:["fleurCannon","heartSwap","fairyLockdown","flashCannon"],floors:[]},rayquaza:{id:"rayquaza",name:"Rayquaza",spriteKey:"rayquaza",types:[k.Dragon,k.Flying],attackType:k.Dragon,baseStats:{hp:110,atk:120,def:95},walkFrameWidth:80,walkFrameHeight:128,idleFrameWidth:80,idleFrameHeight:120,walkFrames:12,idleFrames:4,skillIds:["dragonAscent","skyBreaker","dragonForce","dracoMeteor"],floors:[]},dialga:{id:"dialga",name:"Dialga",spriteKey:"dialga",types:[k.Dragon,k.Steel],attackType:k.Dragon,baseStats:{hp:115,atk:115,def:105},walkFrameWidth:72,walkFrameHeight:104,idleFrameWidth:72,idleFrameHeight:104,walkFrames:4,idleFrames:2,skillIds:["roarOfTime","temporalBeam","flashCrush","adamantOrb"],floors:[]},tornadus:{id:"tornadus",name:"Tornadus",spriteKey:"tornadus",types:[k.Flying],attackType:k.Flying,baseStats:{hp:105,atk:115,def:90},walkFrameWidth:48,walkFrameHeight:72,idleFrameWidth:40,idleFrameHeight:64,walkFrames:9,idleFrames:9,skillIds:["hurricaneForce","windGodSurge","tempestWing","hurricane"],floors:[]},articuno:{id:"articuno",name:"Articuno",spriteKey:"articuno",types:[k.Flying,k.Ice],attackType:k.Flying,baseStats:{hp:110,atk:105,def:110},walkFrameWidth:88,walkFrameHeight:88,idleFrameWidth:88,idleFrameHeight:88,walkFrames:4,idleFrames:4,skillIds:["glacialGale","blizzardWind","frostAura","blizzard"],floors:[]},arceus:{id:"arceus",name:"Arceus",spriteKey:"arceus",types:[k.Normal],attackType:k.Normal,baseStats:{hp:120,atk:120,def:110},walkFrameWidth:48,walkFrameHeight:88,idleFrameWidth:48,idleFrameHeight:88,walkFrames:8,idleFrames:6,skillIds:["judgment","divineDecree","creatorAura","extremeSpeed"],floors:[]},regigigas:{id:"regigigas",name:"Regigigas",spriteKey:"regigigas",types:[k.Normal],attackType:k.Normal,baseStats:{hp:120,atk:115,def:100},walkFrameWidth:48,walkFrameHeight:72,idleFrameWidth:64,idleFrameHeight:88,walkFrames:4,idleFrames:8,skillIds:["crushGrip","titanForce","slowStart","confuseRay"],floors:[]},kyogre:{id:"kyogre",name:"Kyogre",spriteKey:"kyogre",types:[k.Water],attackType:k.Water,baseStats:{hp:130,atk:130,def:110},walkFrameWidth:64,walkFrameHeight:72,idleFrameWidth:64,idleFrameHeight:72,walkFrames:10,idleFrames:10,skillIds:["originPulseMax","primordialSurge","oceanSovereignty","abyssalDeluge"],floors:[]},palkia:{id:"palkia",name:"Palkia",spriteKey:"palkia",types:[k.Water,k.Dragon],attackType:k.Water,baseStats:{hp:125,atk:135,def:105},walkFrameWidth:80,walkFrameHeight:104,idleFrameWidth:72,idleFrameHeight:104,walkFrames:4,idleFrames:2,skillIds:["spacialRend","dimensionalTide","voidBarrier","abyssalDeluge"],floors:[]},reshiram:{id:"reshiram",name:"Reshiram",spriteKey:"reshiram",types:[k.Fire,k.Dragon],attackType:k.Fire,baseStats:{hp:130,atk:135,def:105},walkFrameWidth:88,walkFrameHeight:96,idleFrameWidth:72,idleFrameHeight:104,walkFrames:5,idleFrames:6,skillIds:["blueFlare","fusionFlare","truthFlame","dracoInferno"],floors:[]},victini:{id:"victini",name:"Victini",spriteKey:"victini",types:[k.Fire,k.Psychic],attackType:k.Fire,baseStats:{hp:125,atk:130,def:110},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["vCreate","searingVictory","victoryCharge","truthFlame"],floors:[]},shaymin:{id:"shaymin",name:"Shaymin",spriteKey:"shaymin",types:[k.Grass],attackType:k.Grass,baseStats:{hp:125,atk:130,def:110},walkFrameWidth:24,walkFrameHeight:24,idleFrameWidth:24,idleFrameHeight:24,walkFrames:4,idleFrames:4,skillIds:["seedFlareMax","aromatherapy","floralWind","gratitudeBloom"],floors:[]},tapuBulu:{id:"tapuBulu",name:"Tapu Bulu",spriteKey:"tapuBulu",types:[k.Grass,k.Fairy],attackType:k.Grass,baseStats:{hp:128,atk:135,def:108},walkFrameWidth:32,walkFrameHeight:72,idleFrameWidth:32,idleFrameHeight:72,walkFrames:4,idleFrames:4,skillIds:["natureMadness","guardianVerdure","jungleStrike","grassySurge"],floors:[]},thundurus:{id:"thundurus",name:"Thundurus",spriteKey:"thundurus",types:[k.Electric,k.Flying],attackType:k.Electric,baseStats:{hp:125,atk:135,def:100},walkFrameWidth:48,walkFrameHeight:72,idleFrameWidth:40,idleFrameHeight:64,walkFrames:9,idleFrames:9,skillIds:["thunderGodWrath","stormHammer","voltSurge","thunderousRoar"],floors:[]},zeraora:{id:"zeraora",name:"Zeraora",spriteKey:"zeraora",types:[k.Electric],attackType:k.Electric,baseStats:{hp:125,atk:135,def:105},walkFrameWidth:48,walkFrameHeight:40,idleFrameWidth:48,idleFrameHeight:48,walkFrames:4,idleFrames:6,skillIds:["plasmaFists","thunderousKick","closeThunder","electricAura"],floors:[]},eternatus:{id:"eternatus",name:"Eternatus",spriteKey:"eternatus",types:[k.Poison,k.Dragon],attackType:k.Poison,baseStats:{hp:135,atk:130,def:100},walkFrameWidth:104,walkFrameHeight:120,idleFrameWidth:104,idleFrameHeight:128,walkFrames:6,idleFrames:4,skillIds:["eternaBeamMax","dynamaxCannon","cosmicVenom","infiniteAbsorb"],floors:[]},poipole:{id:"poipole",name:"Poipole",spriteKey:"poipole",types:[k.Poison],attackType:k.Poison,baseStats:{hp:120,atk:125,def:105},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:24,idleFrameHeight:48,walkFrames:10,idleFrames:4,skillIds:["venomDrizzle","ultraSting","toxicNeedles","ultraBoost"],floors:[]},zygarde:{id:"zygarde",name:"Zygarde",spriteKey:"zygarde",types:[k.Ground,k.Dragon],attackType:k.Ground,baseStats:{hp:135,atk:130,def:115},walkFrameWidth:64,walkFrameHeight:80,idleFrameWidth:64,idleFrameHeight:80,walkFrames:3,idleFrames:4,skillIds:["thousandArrows","landWrath","coreEnforcer","orderRestoration"],floors:[]},excadrill:{id:"excadrill",name:"Excadrill",spriteKey:"excadrill",types:[k.Ground,k.Steel],attackType:k.Ground,baseStats:{hp:120,atk:130,def:105},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:40,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["drillRunMax","ironDrill","earthquakeStrike","sandRush"],floors:[]},lycanroc:{id:"lycanroc",name:"Lycanroc",spriteKey:"lycanroc",types:[k.Rock],attackType:k.Rock,baseStats:{hp:125,atk:135,def:105},walkFrameWidth:48,walkFrameHeight:56,idleFrameWidth:56,idleFrameHeight:56,walkFrames:4,idleFrames:12,skillIds:["accelerock","stoneFangCrush","duskHowl","ancientFangBarrage"],floors:[]},gigalith:{id:"gigalith",name:"Gigalith",spriteKey:"gigalith",types:[k.Rock],attackType:k.Rock,baseStats:{hp:130,atk:130,def:115},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:72,idleFrameHeight:48,walkFrames:4,idleFrames:5,skillIds:["meteorCrush","crystalBarrier","geoForce","diamondStormMax"],floors:[]},volcarona:{id:"volcarona",name:"Volcarona",spriteKey:"volcarona",types:[k.Bug,k.Fire],attackType:k.Bug,baseStats:{hp:125,atk:135,def:100},walkFrameWidth:48,walkFrameHeight:48,idleFrameWidth:56,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["fieryDance","sunMothStorm","quiverDanceMax","solarFlareWings"],floors:[]},golisopod:{id:"golisopod",name:"Golisopod",spriteKey:"golisopod",types:[k.Bug,k.Water],attackType:k.Bug,baseStats:{hp:130,atk:130,def:115},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:80,idleFrameHeight:56,walkFrames:4,idleFrames:5,skillIds:["firstImpression","armoredAssault","emergencyShell","liquidSlash"],floors:[]},urshifu:{id:"urshifu",name:"Urshifu",spriteKey:"urshifu",types:[k.Fighting],attackType:k.Fighting,baseStats:{hp:130,atk:140,def:105},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:64,idleFrameHeight:64,walkFrames:4,idleFrames:2,skillIds:["wickedBlow","surgingStrikesMax","unseeableFist","martialSpirit"],floors:[]},keldeo:{id:"keldeo",name:"Keldeo",spriteKey:"keldeo",types:[k.Fighting,k.Water],attackType:k.Fighting,baseStats:{hp:125,atk:135,def:105},walkFrameWidth:32,walkFrameHeight:40,idleFrameWidth:64,idleFrameHeight:40,walkFrames:4,idleFrames:7,skillIds:["secretSword","resoluteCharge","mysticWaterBlade","justiceHeart"],floors:[]},heatran:{id:"heatran",name:"Heatran",spriteKey:"heatran",types:[k.Steel,k.Fire],attackType:k.Steel,baseStats:{hp:130,atk:130,def:115},walkFrameWidth:40,walkFrameHeight:40,idleFrameWidth:80,idleFrameHeight:40,walkFrames:4,idleFrames:4,skillIds:["magmaStorm","flashCannonMax","lavaPlumeSteel","volcanicArmor"],floors:[]},kartana:{id:"kartana",name:"Kartana",spriteKey:"kartana",types:[k.Steel,k.Grass],attackType:k.Steel,baseStats:{hp:120,atk:140,def:100},walkFrameWidth:24,walkFrameHeight:48,idleFrameWidth:64,idleFrameHeight:48,walkFrames:6,idleFrames:3,skillIds:["origamiBlade","smartStrikeMax","beastBlade","paperThinEdge"],floors:[]},spectrier:{id:"spectrier",name:"Spectrier",spriteKey:"spectrier",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:130,atk:140,def:100},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:80,idleFrameHeight:56,walkFrames:4,idleFrames:7,skillIds:["astralBarrage","eerieGallop","nightmareSteed","spectralSurge"],floors:[]},polteageist:{id:"polteageist",name:"Polteageist",spriteKey:"polteageist",types:[k.Ghost],attackType:k.Ghost,baseStats:{hp:120,atk:130,def:105},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:60,idleFrameHeight:40,walkFrames:6,idleFrames:2,skillIds:["teapotShatter","cursedBrew","teaTimeTerror","spiritPour"],floors:[]},mew:{id:"mew",name:"Mew",spriteKey:"mew",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:130,atk:135,def:110},walkFrameWidth:40,walkFrameHeight:64,idleFrameWidth:64,idleFrameHeight:56,walkFrames:6,idleFrames:2,skillIds:["psychicMax","auraStorm","genesisBarrier","transformStrike"],floors:[]},cresselia:{id:"cresselia",name:"Cresselia",spriteKey:"cresselia",types:[k.Psychic],attackType:k.Psychic,baseStats:{hp:135,atk:125,def:120},walkFrameWidth:48,walkFrameHeight:72,idleFrameWidth:72,idleFrameHeight:64,walkFrames:9,idleFrames:4,skillIds:["lunarBeamMax","lunarVeil","crescentSlash","lunarBlessing"],floors:[]},calyrexIce:{id:"calyrexIce",name:"Calyrex-Ice",spriteKey:"calyrexIce",types:[k.Ice,k.Psychic],attackType:k.Ice,baseStats:{hp:190,atk:175,def:155},walkFrameWidth:24,walkFrameHeight:64,idleFrameWidth:24,idleFrameHeight:64,walkFrames:8,idleFrames:8,skillIds:["glacialLanceMax","iceRiderCharge","crownTundraAura","permafrostCrush"],floors:[]},cloyster:{id:"cloyster",name:"Cloyster",spriteKey:"cloyster",types:[k.Water,k.Ice],attackType:k.Ice,baseStats:{hp:160,atk:150,def:170},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:6,idleFrames:6,skillIds:["shellSmashMax","icicleCrashMax","razorShell","frozenSpikeCannon"],floors:[]},grimmsnarl:{id:"grimmsnarl",name:"Grimmsnarl",spriteKey:"grimmsnarl",types:[k.Dark,k.Fairy],attackType:k.Dark,baseStats:{hp:175,atk:170,def:145},walkFrameWidth:40,walkFrameHeight:56,idleFrameWidth:40,idleFrameHeight:56,walkFrames:4,idleFrames:10,skillIds:["spiritBreak","falseSupremacy","hairTrap","bulkUpDark"],floors:[]},incineroar:{id:"incineroar",name:"Incineroar",spriteKey:"incineroar",types:[k.Fire,k.Dark],attackType:k.Dark,baseStats:{hp:180,atk:165,def:150},walkFrameWidth:32,walkFrameHeight:48,idleFrameWidth:32,idleFrameHeight:48,walkFrames:4,idleFrames:4,skillIds:["darkestLariat","maliciousMoonsault","flareBlitzMax","intimidateRoar"],floors:[]},zacian:{id:"zacian",name:"Zacian",spriteKey:"zacian",types:[k.Fairy,k.Steel],attackType:k.Fairy,baseStats:{hp:185,atk:180,def:145},walkFrameWidth:48,walkFrameHeight:64,idleFrameWidth:56,idleFrameHeight:64,walkFrames:4,idleFrames:8,skillIds:["behemothBlade","playRoughMax","swordOfRuin","sacredSwordFae"],floors:[]},tapuLele:{id:"tapuLele",name:"Tapu Lele",spriteKey:"tapuLele",types:[k.Psychic,k.Fairy],attackType:k.Fairy,baseStats:{hp:165,atk:170,def:150},walkFrameWidth:32,walkFrameHeight:56,idleFrameWidth:24,idleFrameHeight:64,walkFrames:5,idleFrames:8,skillIds:["psychicTerrain","natureMadnessFae","guardianShell","moonblastMax"],floors:[]},garchomp:{id:"garchomp",name:"Garchomp",spriteKey:"garchomp",types:[k.Dragon,k.Ground],attackType:k.Dragon,baseStats:{hp:185,atk:180,def:150},walkFrameWidth:40,walkFrameHeight:48,idleFrameWidth:48,idleFrameHeight:56,walkFrames:4,idleFrames:6,skillIds:["dragonRushMax","earthquakeMax","sandstormCloak","crunchDraco"],floors:[]},latios:{id:"latios",name:"Latios",spriteKey:"latios",types:[k.Dragon,k.Psychic],attackType:k.Dragon,baseStats:{hp:170,atk:175,def:145},walkFrameWidth:64,walkFrameHeight:80,idleFrameWidth:64,idleFrameHeight:80,walkFrames:12,idleFrames:6,skillIds:["lusterPurge","dragonPulseMax","eonBarrier","mistBallStrike"],floors:[]},zapdos:{id:"zapdos",name:"Zapdos",spriteKey:"zapdos",types:[k.Electric,k.Flying],attackType:k.Flying,baseStats:{hp:175,atk:170,def:150},walkFrameWidth:56,walkFrameHeight:96,idleFrameWidth:56,idleFrameHeight:96,walkFrames:4,idleFrames:4,skillIds:["thunderboltMax","hurricaneZap","staticField","drillPeckMax"],floors:[]},moltres:{id:"moltres",name:"Moltres",spriteKey:"moltres",types:[k.Fire,k.Flying],attackType:k.Flying,baseStats:{hp:180,atk:175,def:150},walkFrameWidth:80,walkFrameHeight:96,idleFrameWidth:80,idleFrameHeight:96,walkFrames:4,idleFrames:4,skillIds:["sacredFireMax","skyAttackMax","heatWaveMax","phoenixRise"],floors:[]},silvally:{id:"silvally",name:"Silvally",spriteKey:"silvally",types:[k.Normal],attackType:k.Normal,baseStats:{hp:175,atk:165,def:155},walkFrameWidth:32,walkFrameHeight:72,idleFrameWidth:32,idleFrameHeight:72,walkFrames:4,idleFrames:14,skillIds:["multiAttackMax","rkSystemOverdrive","adaptiveBarrier","crushClawMax"],floors:[]},meloetta:{id:"meloetta",name:"Meloetta",spriteKey:"meloetta",types:[k.Normal,k.Psychic],attackType:k.Normal,baseStats:{hp:170,atk:170,def:150},walkFrameWidth:24,walkFrameHeight:40,idleFrameWidth:24,idleFrameHeight:48,walkFrames:4,idleFrames:7,skillIds:["relicSong","psychoVoice","melodicShield","ariaFinale"],floors:[]}};function et(G){return G.skillIds.filter(F=>Me[F]).map(F=>st(Me[F]))}const Ma={mudkip:{8:"rockThrow",12:"ironDefense"},pikachu:{7:"quickAttack",10:"thunderWave"},machop:{8:"lowKick",12:"focusPunch"},caterpie:{6:"stringShot",9:"bugBite"},geodude:{7:"rockThrow",11:"ironDefense"},magnemite:{8:"thunderWave",11:"sonicBoom"},zubat:{7:"poisonSting",10:"wingAttack"},shellos:{7:"waterPulse"},corsola:{8:"waterPulse",12:"ironDefense"},voltorb:{8:"sonicBoom",11:"selfDestruct"},pidgey:{7:"gust",10:"quickAttack"},aron:{8:"metalClaw",11:"ironDefense"},meditite:{8:"meditate",11:"focusPunch"},gastly:{7:"nightShade",10:"hypnosis"},drowzee:{7:"confusion",10:"hypnosis"},snorunt:{7:"iceBeam",10:"iceShard"},charmander:{7:"ember",10:"flamethrower"},eevee:{7:"bite",10:"swift"},numel:{7:"mudShot",10:"earthPower"},slugma:{7:"ember",10:"flamethrower"},torkoal:{8:"fireBlast",12:"lavaSurf"},murkrow:{7:"pursuit",10:"darkPulse"},sableye:{7:"snarl",10:"nightSlash"},absol:{7:"nightSlash",10:"darkPulse"},chikorita:{7:"vineWhip",10:"razorLeaf"},bellsprout:{7:"absorb",10:"sleepPowder"},shroomish:{7:"seedBomb",10:"absorb"},grimer:{7:"sludgeBomb",10:"toxicSpikes"},nidoranM:{7:"acidSpray",10:"venoshock"},tentacool:{7:"acidSpray",10:"sludgeBomb"},clefairy:{7:"drainingKiss",10:"moonblast"},jigglypuff:{7:"fairyWind",10:"dazzlingGleam"},ralts:{7:"drainingKiss",10:"moonblast"},dratini:{7:"twister",10:"dragonPulse"},bagon:{7:"dragonBreath",10:"dragonPulse"},gible:{7:"dragonBreath",10:"dracoMeteor"},poochyena:{7:"snarl",10:"darkPulse"},beldum:{8:"bulletPunch",11:"flashCannon"},skarmory:{8:"ironHead",11:"flashCannon"},sandshrew:{7:"dig",10:"earthPower"},trapinch:{7:"dig",10:"earthPower"},phanpy:{7:"dig",10:"earthPower"},horsea:{7:"brine",10:"waterPulse"},lotad:{7:"waterPulse",10:"absorb"},carvanha:{7:"brine",10:"darkPulse"},elekid:{7:"thunderPunch",10:"thunderbolt"},mareep:{7:"spark",10:"thunderbolt"},wurmple:{6:"pinMissile",9:"signalBeam"},spinarak:{7:"signalBeam",10:"pinMissile"},abra:{7:"psybeam",10:"psychic"},natu:{7:"psybeam",10:"psychic"},houndour:{7:"crunch",10:"flamethrower"},sneasel:{7:"icePunch",10:"darkPulse"},taillow:{7:"airSlash",10:"braveBird"},starly:{7:"wingAttack",10:"airSlash"},makuhita:{7:"drainPunch",10:"focusPunch"},riolu:{7:"auraSphere",10:"focusPunch"},larvitar:{7:"rockSlide",10:"stoneEdge"},nosepass:{7:"rockSlide",10:"stoneEdge"},swinub:{7:"avalanche",10:"earthPower"},spheal:{7:"icyWind",10:"iceBeam"},zigzagoon:{7:"headbutt",10:"hyperVoice"},whismur:{7:"hyperVoice",10:"headbutt"},oddish:{7:"petalDance",10:"sleepPowder"},budew:{7:"energyBall",10:"petalDance"},vulpix:{7:"fireSpin",12:"flamethrower"},ponyta:{7:"flameWheel",12:"fireBlast"},staryu:{7:"aquaJet",10:"surf"},clamperl:{7:"whirlpool",10:"surf"},shinx:{7:"sparkCharge",10:"wildCharge"},electrike:{7:"wildCharge",10:"thunderbolt"},gulpin:{7:"sludgeBomb",10:"venoshock"},ekans:{7:"venoshock",10:"sludgeBomb"},cubone:{7:"boneRush",10:"earthPower"},diglett:{7:"bulldoze",10:"earthPower"},paras:{7:"xScissor",10:"absorb"},venonat:{7:"signalBeam",10:"sleepPowder"},shieldon:{7:"ironHead",10:"flashCannon"},bronzor:{7:"gyroBall",10:"flashCannon"},misdreavus:{7:"shadowBall",10:"shadowSneak"},duskull:{7:"shadowSneak",10:"shadowBall"},axew:{7:"dragonClaw",10:"dragonRush"},deino:{7:"dragonRush",10:"dragonPulse"},snubbull:{7:"playRough",10:"dazzlingGleam"},togepi:{7:"drainingKiss",10:"moonblast"},snover:{7:"iceHammer",10:"iceBeam"},bergmite:{7:"avalanche",10:"iceHammer"},spoink:{7:"psyshock",10:"psychic"},stunky:{7:"foulPlay",10:"darkPulse"},purrloin:{7:"nightSlash",10:"foulPlay"},pidove:{7:"airSlash",10:"hurricane"},rufflet:{7:"bravebird",10:"hurricane"},tyrogue:{7:"hammerArm",10:"closeCombat"},crabrawler:{7:"drainPunch",10:"hammerArm"},roggenrola:{7:"rockWrecker",10:"stoneEdge"},rockruff:{7:"stoneEdge",10:"rockWrecker"},lillipup:{7:"triAttack",10:"hyperVoice"},minccino:{7:"hyperVoice",10:"triAttack"},foongus:{7:"grassKnot",10:"energyBall"},petilil:{7:"energyBall",10:"grassKnot"},feebas:{7:"dive",10:"waterPulse"},wailmer:{7:"brine",10:"dive"},litwick:{7:"heatWave",10:"shadowBall"},growlithe:{7:"heatWave",10:"flameWheel"},joltik:{7:"voltSwitch",10:"thunderbolt"},tynamo:{7:"voltSwitch",10:"thunderbolt"},trubbish:{7:"gunkShot",10:"sludgeBomb"},skorupi:{7:"gunkShot",10:"venoshock"},mudbray:{7:"highHorsepower",10:"earthPower"},hippopotas:{7:"earthPower",10:"highHorsepower"},dwebble:{7:"smackDown",10:"rockSlide"},binacle:{7:"smackDown",10:"rockSlide"},nincada:{7:"megahorn",10:"xScissor"},venipede:{7:"megahorn",10:"venoshock"},mienfoo:{7:"superpower",10:"drainPunch"},timburr:{7:"superpower",10:"hammerArm"},klink:{7:"gearGrind",10:"flashCannon"},ferroseed:{7:"gearGrind",10:"ironHead"},phantump:{7:"phantomForce",10:"shadowBall"},honedge:{7:"phantomForce",10:"ironHead"},solosis:{7:"futuresight",10:"psychic"},elgyem:{7:"futuresight",10:"psybeam"},cryogonal:{7:"freezeDry",10:"iceBeam"},cubchoo:{7:"freezeDry",10:"iceBeam"},sandile:{7:"knockOff",10:"crunch"},inkay:{7:"knockOff",10:"psybeam"},spritzee:{7:"moonlight",10:"dazzlingGleam"},swirlix:{7:"moonlight",10:"dazzlingGleam"},goomy:{7:"outrage",10:"dragonClaw"},jangmoo:{7:"outrage",10:"dragonClaw"},noibat:{7:"aerialAce",10:"airSlash"},vullaby:{7:"aerialAce",10:"airSlash"},stufful:{7:"workUp",10:"bodySlam"},furfrou:{7:"workUp",10:"hyperVoice"},wimpod:{7:"waterfall",10:"waterPulse"},tympole:{7:"waterfall",10:"surf"},salandit:{7:"fireWhip",10:"venoshock"},larvesta:{7:"fireWhip",10:"flameWheel"},fomantis:{7:"leafStorm",10:"leafBlade"},morelull:{7:"leafStorm",10:"energyBall"},charjabug:{7:"electricTerrain",10:"thunderbolt"},helioptile:{7:"electricTerrain",10:"thunderbolt"},mareanie:{7:"poisonJab",10:"venoshock"},croagunk:{7:"poisonJab",10:"drainPunch"},sandygast:{7:"scorchingSand",10:"earthPower"},silicobra:{7:"scorchingSand",10:"earthPower"},carbink:{7:"stealthRock",10:"rockSlide"},minior:{7:"stealthRock",10:"rockSlide"},dewpider:{7:"lunge",10:"waterPulse"},sizzlipede:{7:"lunge",10:"ember"},pancham:{7:"skyUppercut",10:"hammerArm"},hawlucha:{7:"skyUppercut",10:"aerialAce"},durant:{7:"autotomize",10:"xScissor"},togedemaru:{7:"sparkCharge",10:"ironHead"},drifloon:{7:"shadowPunch",10:"airSlash"},golett:{7:"shadowPunch",10:"earthquake"},hatenna:{7:"expandingForce",10:"dazzlingGleam"},indeedee:{7:"expandingForce",10:"zenHeadbutt"},vanillite:{7:"auroraBeam",10:"iceBeam"},snom:{7:"auroraBeam",10:"bugBite"},nickit:{7:"throatChop",10:"foulPlay"},impidimp:{7:"throatChop",10:"dazzlingGleam"},milcery:{7:"sweetKiss",10:"playRough"},comfey:{7:"sweetKiss",10:"moonlight"},turtonator:{7:"dragonDance",10:"flamethrower"},drampa:{7:"dragonDance",10:"hyperVoice"},rookidee:{7:"pluck",10:"braveBird"},archen:{7:"pluck",10:"rockSlide"},wooloo:{7:"facade",10:"bodySlam"},skwovet:{7:"facade",10:"hyperVoice"},bruxish:{7:"liquidation",10:"psychic"},chewtle:{7:"liquidation",10:"waterfall"},litleo:{7:"blazeKick",10:"flamethrower"},torchic:{7:"blazeKick",10:"flameWheel"},gossifleur:{7:"tropicalKick",10:"energyBall"},bounsweet:{7:"tropicalKick",10:"leafBlade"},yamper:{7:"nuzzle",10:"wildCharge"},pincurchin:{7:"nuzzle",10:"electricTerrain"},skrelp:{7:"poisonJab",10:"sludgeBomb"},toxel:{7:"nuzzle",10:"poisonJab"},drilbur:{7:"dig",10:"earthquake"},barboach:{7:"muddyWater",10:"earthquake"},nacli:{7:"rockBlast",10:"stoneEdge"},tyrunt:{7:"rockBlast",10:"crunch"},blipbug:{7:"bugBuzz",10:"psychic"},cutiefly:{7:"bugBuzz",10:"dazzlingGleam"},clobbopus:{7:"closeCombat",10:"lowKick"},passimian:{7:"closeCombat",10:"lowKick"},tinkatink:{7:"smartStrike",10:"dazzlingGleam"},varoom:{7:"smartStrike",10:"sludgeBomb"},greavard:{7:"poltergeist",10:"shadowBall"},sinistea:{7:"poltergeist",10:"shadowBall"},flittle:{7:"psyshock",10:"psychic"},espurr:{7:"psyshock",10:"psychic"},cetoddle:{7:"icicleCrash",10:"iceBeam"},frigibax:{7:"icicleCrash",10:"dragonBreath"},zorua:{7:"darkPulse",10:"shadowBall"},pawniard:{7:"darkPulse",10:"ironHead"},fidough:{7:"drainingKiss",10:"dazzlingGleam"},dedenne:{7:"drainingKiss",10:"thunderbolt"},cyclizar:{7:"scaleShot",10:"dragonPulse"},tatsugiri:{7:"scaleShot",10:"dragonPulse"},wingull:{7:"hurricane",10:"waterPulse"},swablu:{7:"hurricane",10:"moonblast"},lechonk:{7:"hyperVoice",10:"bodySlam"},tandemaus:{7:"hyperVoice",10:"bodySlam"},buizel:{7:"aquaJet",10:"waterPulse"},finizen:{7:"aquaJet",10:"liquidation"},fletchinder:{7:"fireBlast",10:"braveBird"},heatmor:{7:"fireBlast",10:"flamethrower"},smoliv:{7:"leafStorm",10:"energyBall"},deerling:{7:"leafStorm",10:"bodySlam"},pachirisu:{7:"discharge",10:"thunderbolt"},emolga:{7:"discharge",10:"thunderbolt"},glimmet:{7:"toxicSpikes",10:"sludgeBomb"},koffing:{7:"toxicSpikes",10:"sludgeBomb"},wooper:{7:"earthPower",10:"earthquake"},baltoy:{7:"earthPower",10:"psychic"},anorith:{7:"ancientPower",10:"rockBlast"},lunatone:{7:"ancientPower",10:"psychic"},surskit:{7:"silverWind",10:"bugBuzz"},volbeat:{7:"silverWind",10:"bugBuzz"},scraggy:{7:"aurasphere",10:"closeCombat"},mankey:{7:"aurasphere",10:"closeCombat"},klefki:{7:"ironDefense",10:"smartStrike"},mawile:{7:"ironDefense",10:"smartStrike"},rotom:{7:"shadowForce",10:"thunderbolt"},dreepy:{7:"shadowForce",10:"dragonPulse"},munna:{7:"futuresight",10:"psychic"},chingling:{7:"futuresight",10:"psychic"},smoochum:{7:"glacialLance",10:"psychic"},delibird:{7:"glacialLance",10:"icicleCrash"},nuzleaf:{7:"nightSlash",10:"leafStorm"},spiritomb:{7:"nightSlash",10:"shadowBall"},marill:{7:"moonblast",10:"waterPulse"},cleffa:{7:"moonblast",10:"dazzlingGleam"},druddigon:{7:"dracoMeteor",10:"dragonPulse"},applin:{7:"dracoMeteor",10:"leafStorm"},hoppip:{7:"braveBird",10:"hurricane"},tropius:{7:"braveBird",10:"leafStorm"},aipom:{7:"boomburst",10:"bodySlam"},smeargle:{7:"boomburst",10:"hyperVoice"},poliwag:{7:"surf",10:"hydroPump"},corphish:{7:"brine",10:"hydroPump"},magby:{7:"fireBlast",10:"eruption"},darumaka:{7:"heatWave",10:"eruption"},sewaddle:{7:"energyBall",10:"powerWhip"},pumpkaboo:{7:"shadowBall",10:"powerWhip"},plusle:{7:"wildCharge",10:"thunderbolt"},minun:{7:"wildCharge",10:"thunderbolt"},nidoranF:{7:"sludgeBomb",10:"gunkShot"},seviper:{7:"sludgeBomb",10:"gunkShot"},gligar:{7:"earthquake",10:"drillRun"},rhyhorn:{7:"rockSlide",10:"drillRun"},sudowoodo:{7:"stoneEdge",10:"headSmash"},boldore:{7:"stoneEdge",10:"headSmash"},pineco:{7:"signalBeam",10:"selfDestruct"},heracross:{7:"closeCombat",10:"megahorn"},hitmonlee:{7:"closeCombat",10:"superpower"},hitmonchan:{7:"closeCombat",10:"superpower"},steelix:{7:"flashCannon",10:"heavySlam"},scizor:{7:"ironHead",10:"heavySlam"},banette:{7:"phantomForce",10:"cursedFlame"},shedinja:{7:"shadowBall",10:"cursedFlame"},slowpoke:{7:"psychic",10:"zenHeadbutt"},girafarig:{7:"psychic",10:"zenHeadbutt"},glaceon:{7:"blizzard",10:"avalanche"},beartic:{7:"blizzard",10:"iceBeam"},umbreon:{7:"foulPlay",10:"moonlight"},cacturne:{7:"foulPlay",10:"energyBall"},granbull:{7:"playRough",10:"dazzlingGleam"},togekiss:{7:"moonblast",10:"dazzlingGleam"},shelgon:{7:"outrage",10:"dracoMeteor"},gabite:{7:"outrage",10:"dragonPulse"},noctowl:{7:"skyAttack",10:"hurricane"},xatu:{7:"skyAttack",10:"psychic"},kangaskhan:{7:"extremeSpeed",10:"hyperVoice"},tauros:{7:"extremeSpeed",10:"bodySlam"},psyduck:{7:"originPulse",10:"hydroPump"},seel:{7:"originPulse",10:"iceBeam"},cyndaquil:{7:"sacredFire",10:"eruption"},fennekin:{7:"sacredFire",10:"heatWave"},sunkern:{7:"seedFlare",10:"powerWhip"},cacnea:{7:"seedFlare",10:"energyBall"},pichu:{7:"thunderCage",10:"thunderbolt"},chinchou:{7:"thunderCage",10:"waterPulse"},weedle:{7:"toxicThread",10:"gunkShot"},qwilfish:{7:"toxicThread",10:"waterPulse"},donphan:{7:"precipiceBlades",10:"earthquake"},marowak:{7:"precipiceBlades",10:"boneRush"},onix:{7:"diamondStorm",10:"headSmash"},omanyte:{7:"diamondStorm",10:"headSmash"},scyther:{7:"xScissor",10:"megahorn"},pinsir:{7:"xScissor",10:"megahorn"},medicham:{7:"focusPunch",10:"closeCombat"},lucario:{7:"focusPunch",10:"closeCombat"},metang:{7:"meteorMash",10:"heavySlam"},lairon:{7:"meteorMash",10:"ironHead"},gengar:{7:"shadowClaw",10:"cursedFlame"},chandelure:{7:"shadowClaw",10:"cursedFlame"},alakazam:{7:"psychoCut",10:"futuresight"},gardevoir:{7:"psychoCut",10:"moonblast"},omastar:{7:"ancientPower",10:"headSmash"},metagross:{7:"meteorMash",10:"zenHeadbutt"},aggron:{7:"heavySlam",10:"headSmash"},lapras:{7:"freezeDry",10:"blizzard"},weavile:{7:"icicleCrash",10:"nightSlash"},honchkrow:{7:"suckerPunch",10:"braveBird"},houndoom:{7:"nastyPlot",10:"darkPulse"},florges:{7:"petalBlizzard",10:"moonblast"},mimikyu:{7:"playRough",10:"shadowClaw"},dragonite:{7:"hurricane",10:"extremeSpeed"},flygon:{7:"dragonRush",10:"earthquake"},staraptor:{7:"braveBird",10:"closeCombat"},braviary:{7:"crushClaw",10:"superpower"},snorlax:{7:"heavySlam",10:"rest"},zangoose:{7:"crushClaw",10:"closeCombat"},gyarados:{7:"hydroPump",10:"waterSpout"},kingdra:{7:"dragonPulse",10:"waterSpout"},blaziken:{7:"blazeKick",10:"dragonAscent"},typhlosion:{7:"eruption",10:"dragonAscent"},venusaur:{7:"seedFlare",10:"frenzyPlant"},sceptile:{7:"leafStorm",10:"frenzyPlant"},jolteon:{7:"thunderbolt",10:"voltTackle"},ampharos:{7:"thunderCage",10:"voltTackle"},nidoking:{7:"gunkShot",10:"sludgeWave"},crobat:{7:"poisonJab",10:"sludgeWave"},krookodile:{7:"earthquake",10:"tectonicRage"},nidoqueen:{7:"precipiceBlades",10:"tectonicRage"},tyranitar:{7:"stoneEdge",10:"diamondStorm"},aerodactyl:{7:"rockPolish",10:"headSmash"},yanmega:{7:"megahorn",10:"bugBuzz"},scolipede:{7:"xScissor",10:"megahorn"},conkeldurr:{7:"superpower",10:"megaPunch"},machamp:{7:"closeCombat",10:"megaPunch"},magnezone:{7:"flashCannon",10:"doomDesire"},empoleon:{7:"meteorMash",10:"doomDesire"},dusknoir:{7:"shadowForce",10:"shadowRave"},cofagrigus:{7:"cursedFlame",10:"shadowRave"},reuniclus:{7:"expandingForce",10:"futuresight"},gothitelle:{7:"psychoCut",10:"futuresight"},mamoswine:{7:"sheerCold",10:"earthPower"},walrein:{7:"sheerCold",10:"blizzard"},darkrai:{7:"darkVoid",10:"nastyPlot"},hydreigon:{7:"darkVoid",10:"dracoMeteor"},sylveon:{7:"moonforce",10:"drainingKiss"},hatterene:{7:"moonforce",10:"psychic"},haxorus:{7:"eternaBeam",10:"outrage"},goodra:{7:"eternaBeam",10:"dracoMeteor"},pidgeot:{7:"oblivionWing",10:"hurricane"},noivern:{7:"oblivionWing",10:"boomburst"},blissey:{7:"gigaImpact",10:"rest"},porygonZ:{7:"gigaImpact",10:"triAttack"},blastoise:{7:"hydroCannon",10:"shellSmash"},feraligatr:{7:"hydroCannon",10:"superpower"},charizard:{7:"blastBurn",10:"airSlash"},delphox:{7:"blastBurn",10:"futuresight"},torterra:{7:"woodHammer",10:"earthquake"},serperior:{7:"leafBlade",10:"swordsDance"},electivire:{7:"thunder",10:"crossChop"},luxray:{7:"thunder",10:"crunch"},roserade:{7:"toxicWave",10:"energyBall"},vileplume:{7:"toxicWave",10:"sleepPowder"},rhyperior:{7:"fissure",10:"stoneEdge"},dugtrio:{7:"fissure",10:"earthquake"},golem:{7:"diamondStorm",10:"earthquake"},terrakion:{7:"sacredSword",10:"diamondStorm"},pheromosa:{7:"highJumpKick",10:"bugBuzz"},escavalier:{7:"megahorn",10:"ironHead"},kommoo:{7:"clangorousSoul",10:"closeCombat"},gallade:{7:"psychoCut",10:"closeCombat"},corviknight:{7:"braveBird",10:"ironHead"},bastiodon:{7:"flashCannon",10:"heavySlam"},aegislash:{7:"sacredSword",10:"kingsShield"},jellicent:{7:"hexBlast",10:"recover"},slowking:{7:"futuresight",10:"psychic"},bronzong:{7:"gyroBall",10:"psychic"},froslass:{7:"sheerCold",10:"destinyBond"},abomasnow:{7:"sheerCold",10:"auroraVeil"},sharpedo:{7:"aquaFang",10:"crunch"},zoroark:{7:"nightDaze",10:"nastyPlot"},primarina:{7:"sparklingAria",10:"moonblast"},diancie:{7:"diamondStorm",10:"moonblast"},dragapult:{7:"dragonDarts",10:"phantomForce"},duraludon:{7:"steelBeam",10:"dragonPulse"},swellow:{7:"braveBird",10:"boomburst"},talonflame:{7:"flareBlitz",10:"braveBird"},slaking:{7:"gigaImpact",10:"earthquake"},lopunny:{7:"returnStrike",10:"highJumpKick"},suicune:{7:"tidalCrush",10:"calmMind"},lugia:{7:"aeroblast",10:"tidalCrush"},hooh:{7:"sacredBlaze",10:"holyDive"},entei:{7:"fireForce",10:"sacredBlaze"},celebi:{7:"verdantWrath",10:"healingWish"},virizion:{7:"sacredBlade",10:"verdantWrath"},raikou:{7:"boltStrike",10:"thunder"},zekrom:{7:"fusionBolt",10:"boltStrike"},nihilego:{7:"powerGem",10:"beastBoost"},naganadel:{7:"venomStorm",10:"beastBoost"},groudon:{7:"continentalCrush",10:"earthShatter"},landorus:{7:"earthShatter",10:"continentalCrush"},regirock:{7:"hammeringForce",10:"lockOn"},stakataka:{7:"beastCrush",10:"ultraWall"},genesect:{7:"technoBlast",10:"magnetBomb"},buzzwole:{7:"beastImpact",10:"leechPunch"},cobalion:{7:"sacredCharge",10:"ironWill"},marshadow:{7:"spectralThief",10:"soulStealing"},registeel:{7:"ironJudgment",10:"registeelBarrier"},solgaleo:{7:"sunsteelStrike",10:"solarFlare"},giratina:{7:"shadowRend",10:"distortionWave"},lunala:{7:"moongeistBeam",10:"phantomEclipse"},mewtwo:{7:"psystrike",10:"mindShatter"},deoxys:{7:"psychoBoost",10:"cosmicRay"},regice:{7:"absoluteZero",10:"frigidBarrier"},kyurem:{7:"glaciate",10:"frozenWorld"},yveltal:{7:"deathWing",10:"oblivionShroud"},hoopa:{7:"hyperspaceFury",10:"dimensionalRift"},xerneas:{7:"geomancy",10:"auroraBeam"},magearna:{7:"fleurCannon",10:"fairyLockdown"},rayquaza:{7:"dragonAscent",10:"skyBreaker"},dialga:{7:"roarOfTime",10:"flashCrush"},tornadus:{7:"windGodSurge",10:"hurricaneForce"},articuno:{7:"glacialGale",10:"frostAura"},arceus:{7:"judgment",10:"divineDecree"},regigigas:{7:"crushGrip",10:"titanForce"},kyogre:{7:"originPulseMax",10:"primordialSurge"},palkia:{7:"spacialRend",10:"dimensionalTide"},reshiram:{7:"blueFlare",10:"fusionFlare"},victini:{7:"vCreate",10:"searingVictory"},shaymin:{7:"seedFlareMax",10:"aromatherapy"},tapuBulu:{7:"natureMadness",10:"guardianVerdure"},thundurus:{7:"thunderGodWrath",10:"stormHammer"},zeraora:{7:"plasmaFists",10:"thunderousKick"},eternatus:{7:"eternaBeamMax",10:"dynamaxCannon"},poipole:{7:"venomDrizzle",10:"ultraSting"},zygarde:{7:"thousandArrows",10:"landWrath"},excadrill:{7:"drillRunMax",10:"ironDrill"},lycanroc:{7:"accelerock",10:"stoneFangCrush"},gigalith:{7:"meteorCrush",10:"geoForce"},volcarona:{7:"fieryDance",10:"sunMothStorm"},golisopod:{7:"firstImpression",10:"armoredAssault"},urshifu:{7:"wickedBlow",10:"surgingStrikesMax"},keldeo:{7:"secretSword",10:"resoluteCharge"},heatran:{7:"magmaStorm",10:"flashCannonMax"},kartana:{7:"origamiBlade",10:"smartStrikeMax"},spectrier:{7:"astralBarrage",10:"eerieGallop"},polteageist:{7:"teapotShatter",10:"cursedBrew"},mew:{7:"psychicMax",10:"auraStorm"},cresselia:{7:"lunarBeamMax",10:"crescentSlash"},calyrexIce:{7:"glacialLanceMax",10:"iceRiderCharge"},cloyster:{7:"icicleCrashMax",10:"frozenSpikeCannon"},grimmsnarl:{7:"falseSupremacy",10:"hairTrap"},incineroar:{7:"darkestLariat",10:"maliciousMoonsault"},zacian:{7:"behemothBlade",10:"playRoughMax"},tapuLele:{7:"psychicTerrain",10:"natureMadnessFae"},garchomp:{7:"dragonRushMax",10:"earthquakeMax"},latios:{7:"lusterPurge",10:"dragonPulseMax"},zapdos:{7:"thunderboltMax",10:"hurricaneZap"},moltres:{7:"sacredFireMax",10:"skyAttackMax"},silvally:{7:"multiAttackMax",10:"rkSystemOverdrive"},meloetta:{7:"relicSong",10:"psychoVoice"}};function Cn(G,F){const b=Ma[G];return b?b[F]??null:null}function bn(G){return 10+(G-1)*5}function En(G,F){return 10+G*3+F*5}function Qt(G,F,b){const I=[];let B=b,O=G.level;for(;;){const f=bn(O+1);if(B<f)break;B-=f,O++;const x=3+Math.floor(Math.random()*3),e=Math.random()<.6?1:0,o=Math.random()<.4?1:0;G.level=O,G.maxHp+=x,G.hp+=x,G.atk+=e,G.def+=o,I.push({newLevel:O,hpGain:x,atkGain:e,defGain:o})}return{results:I,remainingExp:B,totalExp:B}}var tt=(G=>(G.Spike="spike",G.Poison="poison",G.Warp="warp",G.Spin="spin",G.Slowdown="slowdown",G.Blast="blast",G.Trip="trip",G.Seal="seal",G))(tt||{});const Pn={spike:{type:"spike",name:"Spike Trap",symbol:"",color:"#ef4444",hexColor:15680580,description:"Deals damage!"},poison:{type:"poison",name:"Poison Trap",symbol:"",color:"#a855f7",hexColor:11032055,description:"Inflicts burn!"},warp:{type:"warp",name:"Warp Trap",symbol:"",color:"#3b82f6",hexColor:3900150,description:"Teleports you!"},spin:{type:"spin",name:"Spin Trap",symbol:"",color:"#fbbf24",hexColor:16498468,description:"Reduces accuracy!"},slowdown:{type:"slowdown",name:"Slowdown Trap",symbol:"",color:"#f97316",hexColor:16347926,description:"Weakens attack!"},blast:{type:"blast",name:"Blast Trap",symbol:"",color:"#dc2626",hexColor:14427686,description:"Area explosion!"},trip:{type:"trip",name:"Trip Trap",symbol:"",color:"#78716c",hexColor:7893356,description:"Drops an item!"},seal:{type:"seal",name:"Seal Trap",symbol:"",color:"#6366f1",hexColor:6514417,description:"Seals a skill!"}};function Mn(){const G=Object.values(tt);return Pn[G[Math.floor(Math.random()*G.length)]]}function An(G,F){const b=Math.min(5,1+Math.floor(G/2));return F!==void 0?Math.floor(b+F*1.5):b}function In(G,F,b,I,B,O,f,x,e,o){const m=[];for(let n=0;n<I;n++){let r=0;for(;r<50;){const a=Math.floor(Math.random()*G),t=Math.floor(Math.random()*F);if(b[t]?.[a]!==o){r++;continue}if(a===B&&t===O){r++;continue}if(a===f&&t===x){r++;continue}if(e.has(`${a},${t}`)){r++;continue}if(m.some(l=>l.x===a&&l.y===t)){r++;continue}const s=Mn();m.push({x:a,y:t,trap:s,revealed:!1,triggered:!1});break}}return m}var xt=(G=>(G.Lava="lava",G.Water="water",G.ToxicSwamp="toxicSwamp",G.IcePatch="icePatch",G.Quicksand="quicksand",G.ElectricFloor="electricFloor",G))(xt||{});const Aa={lava:{id:"lava",type:"lava",name:"Lava",color:16729088,damage:8,effect:"none",effectChance:0,immuneTypes:[k.Fire]},water:{id:"water",type:"water",name:"Water",color:4491519,damage:0,effect:"slow",effectChance:1,immuneTypes:[k.Water]},toxicSwamp:{id:"toxicSwamp",type:"toxicSwamp",name:"Toxic Swamp",color:8930440,damage:5,effect:"poison",effectChance:.35,immuneTypes:[k.Poison,k.Steel]},icePatch:{id:"icePatch",type:"icePatch",name:"Ice Patch",color:11197951,damage:0,effect:"slide",effectChance:1,immuneTypes:[k.Ice]},quicksand:{id:"quicksand",type:"quicksand",name:"Quicksand",color:13412966,damage:3,effect:"trap",effectChance:1,immuneTypes:[k.Flying,k.Ground]},electricFloor:{id:"electricFloor",type:"electricFloor",name:"Electric Floor",color:16772676,damage:6,effect:"paralyze",effectChance:.25,immuneTypes:[k.Electric,k.Ground]}};function Bn(G,F){const b=Aa[G];return F.some(I=>b.immuneTypes.includes(I))}function Dn(G,F){const b=[],B={magmaCavern:["lava"],emberGrotto:["lava"],beachCave:["water"],stormySea:["water"],coralReef:["water"],toxicSwamp:["toxicSwamp"],sinisterWoods:["toxicSwamp"],frostyForest:["icePatch"],frozenTundra:["icePatch"],thunderwaveCave:["electricFloor"],voltageLab:["electricFloor"],ampPlains:["electricFloor"],quakeTunnel:["quicksand"],rockyCavern:["quicksand"],buriedRuins:["quicksand"]}[F];if(B)for(const f of B)b.includes(f)||b.push(f);const O=[{minFloor:3,type:"water"},{minFloor:3,type:"quicksand"},{minFloor:5,type:"toxicSwamp"},{minFloor:5,type:"icePatch"},{minFloor:7,type:"lava"},{minFloor:7,type:"electricFloor"}];for(const f of O)G>=f.minFloor&&!b.includes(f.type)&&b.push(f.type);return b}function Rn(G){return Math.min(.15,.05+(G-1)*.01)}function Ln(G,F,b,I,B,O,f,x,e,o,m){const n=Dn(I,B);if(n.length===0)return[];const r=Rn(I);let a=0;for(let i=0;i<F;i++)for(let h=0;h<G;h++)b[i]?.[h]===m&&a++;const t=Math.floor(a*r),s=[],l=new Set;for(let i=0;i<t;i++){let h=0;for(;h<50;){const d=Math.floor(Math.random()*G),c=Math.floor(Math.random()*F),u=`${d},${c}`;if(b[c]?.[d]!==m){h++;continue}if(d===O&&c===f){h++;continue}if(d===x&&c===e){h++;continue}if(Math.abs(d-x)<=1&&Math.abs(c-e)<=1){h++;continue}if(o.has(u)){h++;continue}if(l.has(u)){h++;continue}const p=n[Math.floor(Math.random()*n.length)],g=Aa[p];s.push({x:d,y:c,type:p,def:g}),l.add(u);break}}return s}var Ue=(G=>(G.None="none",G.Rain="rain",G.Sandstorm="sandstorm",G.Hail="hail",G))(Ue||{}),Ia=(G=>(G.Mild="Mild",G.Normal="Normal",G.Intense="Intense",G.Extreme="Extreme",G))(Ia||{});const Ii={Mild:.5,Normal:1,Intense:1.5,Extreme:2},jt={Mild:"#ffffff",Normal:"#facc15",Intense:"#f97316",Extreme:"#ef4444"};function zn(G,F){const b=G/F;return b<=.25?"Mild":b<=.5?"Normal":b<=.75?"Intense":"Extreme"}const qt={none:{type:"none",name:"Clear",description:"",color:"#94a3b8",symbol:""},rain:{type:"rain",name:"Rain",description:"Water +50%, Fire -50%",color:"#3b82f6",symbol:""},sandstorm:{type:"sandstorm",name:"Sandstorm",description:"Non Rock/Steel/Ground take 5 dmg/turn",color:"#d4a574",symbol:""},hail:{type:"hail",name:"Hail",description:"Non Ice types take 5 dmg/turn",color:"#93c5fd",symbol:""}};function zs(G,F){if(G==="rain"){if(F===k.Water)return 1.5;if(F===k.Fire)return .5}return 1}function On(G,F){return G==="sandstorm"?F.some(b=>b===k.Rock||b===k.Steel||b===k.Ground):G==="hail"?F.some(b=>b===k.Ice):!0}function Gn(G){return Math.min(.2,.05+Math.floor(G/3)*.01)}function Hn(G){return Math.random()<Gn(G)}function Os(G,F){return G==="rain"&&F===k.Water||G==="sandstorm"&&(F===k.Rock||F===k.Ground||F===k.Steel)||G==="hail"&&F===k.Ice?.15:0}function Gs(G,F){const b=Math.min(.4,.1+F*.05);if(Math.random()>b)return"none";const B={beachCave:["rain"],tinyWoods:["rain"],thunderwaveCave:["rain","sandstorm"],mtSteel:["sandstorm"],skyTower:["hail","rain"],frostyForest:["hail"],magmaCavern:["sandstorm"],sinisterWoods:["rain","hail"],overgrownForest:["rain"],toxicSwamp:["rain","sandstorm"],moonlitCave:["hail"],dragonsLair:["sandstorm","hail"],steelFortress:["sandstorm","hail"],buriedRuins:["sandstorm"],stormySea:["rain"],ampPlains:["rain","sandstorm"],verdantForest:["rain"],mysticSanctum:["hail","rain"],shadowForest:["rain","hail"],windySummit:["rain","sandstorm"],battleArena:["sandstorm"],rockyCavern:["sandstorm"],frozenTundra:["hail"],meadowPath:["rain"],petalGarden:["rain"],emberGrotto:["sandstorm"],coralReef:["rain"],voltageLab:["rain","sandstorm"],venomDepths:["rain","sandstorm"],quakeTunnel:["sandstorm"],mossBurrow:["rain"],ironWorks:["sandstorm","hail"],phantomCrypt:["hail"],wyrmAbyss:["sandstorm","hail"],enchantedGlade:["rain"],glacialCavern:["hail"],astralSpire:["rain","hail"],shadowAlley:["sandstorm","hail"],galeCliffs:["rain","sandstorm"],brawlDojo:["sandstorm"],boulderPass:["sandstorm"],tranquilGrove:["rain"],fungalMarsh:["rain"],abyssalTrench:["rain"],infernoPit:["sandstorm"],voltageSpire:["rain","sandstorm"],corrosiveSewer:["rain","sandstorm"],seismicFault:["sandstorm"],stalactiteGrotto:["sandstorm"],chitinBurrow:["rain"],valorArena:["sandstorm"],titaniumMine:["sandstorm","hail"],spectralWoods:["hail"],cosmicRift:["rain","hail"],frostbiteChasm:["hail"],midnightAlley:["sandstorm","hail"],pixieHollow:["rain"],drakeNest:["sandstorm","hail"],stormyNest:["rain","sandstorm"],cozyBurrow:["rain"],tidalGrotto:["rain"],blazingCaldera:["sandstorm"],verdantCanopy:["rain"],sparkingPlant:["rain","sandstorm"],venomousReef:["rain","sandstorm"],shiftingSands:["sandstorm"],crystalCavern:["sandstorm","hail"],silkWeb:["rain"],championDojo:["sandstorm"],forgeMountain:["sandstorm","hail"],hauntedManor:["hail"],dreamTemple:["rain","hail"],permafrostPeak:["hail"],thiefsDen:["sandstorm","hail"],sugarGarden:["rain"],draconicSpire:["sandstorm","hail"],skyHighNest:["rain","sandstorm"],pastoralPlains:["rain"],abyssalDepths:["rain"],volcanicCore:["sandstorm"],ancientWoods:["rain"],thunderDome:["rain","sandstorm"],miasmaSwamp:["rain","sandstorm"],tectonicRift:["sandstorm"],crystalDepths:["sandstorm","none"],silkwoodGrove:["rain","none"],warlordsArena:["sandstorm","none"],steelworksCitadel:["none","sandstorm"],spectralCrypt:["none","hail"],astralSanctum:["none","hail"],glacialAbyss:["hail"],shadowLabyrinth:["sandstorm","hail"],faerieGarden:["rain"],dragonsDen:["sandstorm","hail"],stormySkies:["rain","sandstorm"],verdantMeadow:["rain"],tidalTrench:["rain"],infernoPeak:["sandstorm"],eternaForest:["rain"],voltChamber:["rain","sandstorm"],faultlineChasm:["sandstorm"],fossilCrypt:["sandstorm"],cocoonHollow:["rain"],titansDojo:["sandstorm"],ironVault:["sandstorm","hail"],phantomRift:["hail"],mindPalace:["rain","hail"],frozenCitadel:["hail"],eclipseVault:["sandstorm","hail"],moonlitGarden:["rain"],wyrmsNest:["sandstorm","hail"],skyPinnacle:["rain","sandstorm"],primevalPlains:["rain","sandstorm"],abyssopelagic:["rain"],calderaCore:["sandstorm"],primordialCanopy:["rain"],plasmaCorridor:["rain","sandstorm"],corrosivePit:["rain","sandstorm"],mantleCavern:["sandstorm"],obsidianForge:["sandstorm"],chitinLabyrinth:["rain"],colosseum:["sandstorm"],steelAbyss:["sandstorm","hail"],necropolisDepths:["hail"],cosmicLibrary:["rain","hail"],glacierFortress:["hail"],umbralCitadel:["sandstorm","hail"],sylvanSanctuary:["rain"],dragonsSpine:["sandstorm","hail"],stratosphere:["rain","sandstorm"],sovereignHall:["rain","sandstorm"],hadopelagicTrench:["rain"],primordialCaldera:["sandstorm"],worldTreeRoots:["rain"],teslaSpire:["rain","sandstorm"],bileswamp:["rain","sandstorm"],tectonicAbyss:["sandstorm"],crystalVein:["sandstorm"],hiveMind:["rain"],grandArena:["sandstorm","rain"],adamantineChamber:["sandstorm","hail"],voidBreach:["hail"],etherealNexus:["rain","hail"],glacialTomb:["hail"],abyssalShadow:["none","sandstorm"],enchantedGrove:["none","rain"],wyrmpeakSummit:["sandstorm","hail"],galeStronghold:["rain","hail"],apexArena:["none","sandstorm"],leviathanTrench:["rain"],infernalSummit:["sandstorm"],worldTreeCanopy:["rain"],thunderGodSpire:["rain","sandstorm"],venomousAbyss:["rain","sandstorm"],tectonicThrone:["sandstorm"],ancientMonolith:["sandstorm"],predatorHive:["rain"],wargodsTemple:["sandstorm","rain"],magnetarCore:["sandstorm","hail"],spectralThrone:["hail"],cognitionSpire:["rain","hail"],absoluteZeroPeak:["hail"],eternalNight:["sandstorm","hail"],celestialBlossom:["rain"],dragonsSovereignty:["sandstorm","hail"],zenithStormfront:["rain","sandstorm"],infinityHall:["rain","sandstorm"],abyssalMaelstrom:["rain"],primordialInferno:["sandstorm"],yggdrasilRoot:["rain"],voltexPinnacle:["rain","sandstorm"],miasmaticCore:["rain","sandstorm"],pangaeaFault:["sandstorm"],titansGeode:["sandstorm"],sovereignHive:["rain"],apexColosseum:["sandstorm","rain"],adamantineCitadel:["sandstorm","hail"],etherealSanctum:["hail"],transcendenceSpire:["rain","hail"],frozenNether:["hail"],abyssalEclipse:["sandstorm","hail"],radiantCrystalGarden:["rain"],voidDragonSpire:["sandstorm","hail"],celestialGalefort:["rain","sandstorm"],primordialColossus:["rain","sandstorm"],oceanSovereignty:["rain"],sacredPyre:["sandstorm"],timelessGrove:["rain"],thunderSovereignty:["rain","sandstorm"],ultraVenomNexus:["rain","sandstorm"],pangaeaThrone:["sandstorm"],petrifiedColossus:["sandstorm"],cyberHive:["rain"],justiceHall:["sandstorm","rain"],ironSanctuary:["sandstorm","hail"],distortionRift:["hail"],genesisChamber:["rain","hail"],frozenRegolith:["hail"],nihilityAbyss:["sandstorm","hail"],eternalGarden:["rain"],temporalSpire:["sandstorm","hail"],stormSovereign:["rain","sandstorm"],originHall:["rain","sandstorm"],primordialSea:["rain"],truthPyre:["sandstorm"],eternalMeadow:["rain"],thunderGodDomain:["rain","sandstorm"],eternaCore:["rain","sandstorm"],orderSanctum:["sandstorm"],petrifiedApex:["sandstorm"],primordialHive:["none","rain"],martialSummit:["none","sandstorm"],moltenForge:["sandstorm","hail"],spectralPlains:["hail","none"],genesisTemple:["none","rain"],crownTundraThrone:["hail"],abyssalDarkhold:["none","sandstorm"],radiantSwordGarden:["none","rain"],dragonSovereignSpire:["sandstorm","none"],celestialThunderpeak:["rain","none"],harmonyHall:["none"],destinyTower:["rain","sandstorm","hail"],endlessDungeon:["none","rain","sandstorm","hail"],dailyDungeon:["none","rain","sandstorm","hail"],bossRush:["none"]}[G]??["rain","sandstorm","hail"];return B[Math.floor(Math.random()*B.length)]}const Bi=["oranBerry","apple","pechaberry","healSeed"],_t=["sitrusBerry","maxElixir","bigApple","stunSeed","reviveSeed","warpSeed"],Wn=["blastSeed","sleepSeed","escapeOrb","luminousOrb","allPowerOrb","vanishOrb"],Ba={oranBerry:30,apple:25,pechaberry:35,healSeed:40,sitrusBerry:80,maxElixir:70,bigApple:60,stunSeed:55,reviveSeed:150,warpSeed:45,blastSeed:50,sleepSeed:45,escapeOrb:120,luminousOrb:60,allPowerOrb:100,vanishOrb:90,warpOrb:80,foeHoldOrb:85,grimyFood:15};function Nn(G){if(G<=5){const F=[...Bi];return Math.random()<.2&&F.push(_t[Math.floor(Math.random()*_t.length)]),F}return G<=15?[...Bi,..._t]:[...Bi,..._t,...Wn]}function Un(G,F){const b=4+Math.floor(Math.random()*5),I=Nn(G),B=[],O=new Set;for(let f=0;f<b;f++){let x,e=0;do x=I[Math.floor(Math.random()*I.length)],e++;while(O.has(x)&&e<10);if(!We[x])continue;O.add(x);const o=Ba[x]??50,m=Math.floor(o*(1+G*.05)*F),n=We[x].stackable?1+Math.floor(Math.random()*3):1;B.push({itemId:x,price:m,stock:n})}return{items:B,sellMultiplier:.4}}function Xn(G,F){return G<=1||G>=F?!1:F>=10&&G>=3&&G<=5&&Math.random()<.5?!0:Math.random()<.15}function Hs(G,F){const b=Ba[G]??50,I=Math.floor(b*(1+F*.05));return Math.floor(I*.4)}const Vn=[{id:"maxHp",name:"HP Boost",description:"+5 max HP per level",maxLevel:10,baseCost:50,costScale:30},{id:"atk",name:"ATK Boost",description:"+1 ATK per level",maxLevel:10,baseCost:80,costScale:50},{id:"def",name:"DEF Boost",description:"+1 DEF per level",maxLevel:10,baseCost:80,costScale:50},{id:"bagSize",name:"Bigger Bag",description:"+2 inventory slots per level",maxLevel:5,baseCost:100,costScale:80},{id:"startItems",name:"Starter Kit",description:"Start with Oran Berry (+1 per level)",maxLevel:3,baseCost:60,costScale:40},{id:"bellyMax",name:"Iron Stomach",description:"+20 max belly per level",maxLevel:5,baseCost:70,costScale:40},{id:"recruitRate",name:"Charm Aura",description:"+5% recruit chance per level",maxLevel:5,baseCost:90,costScale:60}];class Yn extends $e.Scene{constructor(){super({key:"UpgradeScene"}),this.upgradeTexts=[],this.costTexts=[]}create(){this.meta=Ye(),this.add.rectangle(J/2,ee/2,J,ee,986906),this.add.text(J/2,30,"Upgrade Shop",{fontSize:"18px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.goldText=this.add.text(J/2,58,`Gold: ${this.meta.gold}`,{fontSize:"13px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5);const F=90,b=62;Vn.forEach((B,O)=>{const f=F+O*b,x=this.meta.upgrades[B.id]??0,e=x>=B.maxLevel,o=B.baseCost+x*B.costScale,m=this.add.text(20,f,`${B.name}  Lv.${x}/${B.maxLevel}`,{fontSize:"13px",color:e?"#4ade80":"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"});if(this.upgradeTexts.push(m),this.add.text(20,f+18,B.description,{fontSize:"9px",color:"#666680",fontFamily:"monospace"}),e)this.add.text(280,f+10,"MAX",{fontSize:"12px",color:"#4ade80",fontFamily:"monospace",padding:{x:8,y:6}});else{const n=this.meta.gold>=o,r=this.add.text(20,f+36,`Cost: ${o}G`,{fontSize:"10px",color:n?"#fde68a":"#ef4444",fontFamily:"monospace"});this.costTexts.push(r);const a=this.add.text(280,f+10,"[BUY]",{fontSize:"12px",color:n?"#4ade80":"#444460",fontFamily:"monospace",backgroundColor:n?"#1a2e1a":"#1a1a1a",padding:{x:8,y:6}}).setInteractive();n&&a.on("pointerdown",()=>{this.purchaseUpgrade(B.id,o)})}}),this.add.text(J/2,ee-50,"[Back to Town]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive().on("pointerdown",()=>{this.scene.start("HubScene")})}purchaseUpgrade(F,b){this.meta.gold<b||(this.meta.gold-=b,this.meta.upgrades[F]=(this.meta.upgrades[F]??0)+1,Ke(this.meta),this.scene.restart())}}function lt(G,F){return G.upgrades[F]??0}const Da=[{id:"sharpness",name:"Sharpness",description:"+3 ATK",tier:1,goldCost:100,requiredClears:0},{id:"resilience",name:"Resilience",description:"+3 DEF",tier:1,goldCost:120,requiredClears:0},{id:"vitality",name:"Vitality",description:"+10 HP",tier:1,goldCost:150,requiredClears:3},{id:"lucky",name:"Lucky",description:"+5% item find chance",tier:1,goldCost:200,requiredClears:5},{id:"vampiric",name:"Vampiric",description:"Heal 1 HP per enemy defeated",tier:2,goldCost:300,requiredClears:10},{id:"thorns",name:"Thorns",description:"Reflect 10% damage back",tier:2,goldCost:350,requiredClears:12},{id:"haste",name:"Haste",description:"15% chance to act twice",tier:2,goldCost:400,requiredClears:15},{id:"abundance",name:"Abundance",description:"+15% gold earned",tier:2,goldCost:500,requiredClears:20},{id:"phoenix",name:"Phoenix",description:"Auto-revive once per run (25% HP)",tier:3,goldCost:800,requiredClears:30},{id:"overlord",name:"Overlord",description:"+5% to all stats",tier:3,goldCost:1200,requiredClears:50}];function Ws(G){return Da.filter(F=>G>=F.requiredClears)}function li(G){return G.enchantmentId?Da.find(F=>F.id===G.enchantmentId)??null:null}function Ns(G){switch(G){case 1:return"#4ade80";case 2:return"#60a5fa";case 3:return"#f59e0b";default:return"#e0e0e0"}}function Kn(G){switch(G){case 1:return"";case 2:return"";case 3:return"";default:return""}}const Ra="poke-roguelite-leaderboard",La="poke-roguelite-recent-runs",$n=10,Zn=20;function Us(G){let F=0;if(F+=G.floorsCleared*100,F+=G.enemiesDefeated*10,G.cleared&&(F+=1e3),F+=G.goldEarned,G.cleared){const b=Math.max(0,(G.totalFloors*50-G.turns)*2);F+=b}if(G.challengeMode){const I={speedrun:1.5,noItems:1.3,solo:1.5}[G.challengeMode]??1;F=Math.floor(F*I)}return F}function Nt(){try{const G=localStorage.getItem(Ra);return G?JSON.parse(G):{}}catch{return{}}}function Jn(G){try{localStorage.setItem(Ra,JSON.stringify(G))}catch{}}function ji(){try{const G=localStorage.getItem(La);return G?JSON.parse(G):[]}catch{return[]}}function Qn(G){try{localStorage.setItem(La,JSON.stringify(G))}catch{}}function Xs(G){const F=Nt(),b=F[G.dungeonId]??[];b.push(G),b.sort((B,O)=>O.score-B.score),F[G.dungeonId]=b.slice(0,$n),Jn(F);const I=ji();I.unshift(G),Qn(I.slice(0,Zn))}function Vs(G,F=10){return(Nt()[G]??[]).slice(0,F)}function jn(G=10){return ji().slice(0,G)}function qn(G=10){const F=Nt(),b=[];for(const I of Object.keys(F))b.push(...F[I]);return b.sort((I,B)=>B.score-I.score),b.slice(0,G)}function _n(){const G=Nt(),F=ji();let b=0,I=null;for(const B of Object.keys(G))for(const O of G[B])b+=O.score,(!I||O.score>I.score)&&(I=O);return{totalScore:b,bestScore:I,totalRuns:F.length}}function Ys(){const G=Nt();return Object.keys(G).filter(F=>G[F].length>0)}const za=[{id:"goldRush",name:"Gold Rush",description:"+50% gold earned",color:"#fbbf24",goldMult:1.5},{id:"powerSurge",name:"Power Surge",description:"+20% ATK",color:"#ef4444",playerAtkMult:1.2},{id:"ironWill",name:"Iron Will",description:"+20% DEF",color:"#60a5fa",playerDefMult:1.2},{id:"expBoost",name:"EXP Boost",description:"+50% experience",color:"#a855f7",expMult:1.5},{id:"restoration",name:"Restoration",description:"Full heal on each floor",color:"#4ade80",healOnFloor:!0},{id:"bounty",name:"Bounty",description:"+3 items per floor",color:"#fde68a",itemsPerFloorMod:3},{id:"hardMode",name:"Hard Mode",description:"+40% enemy difficulty, +30% gold",color:"#dc2626",difficultyMult:1.4,goldMult:1.3},{id:"famine",name:"Famine",description:"-2 items per floor, +20% gold",color:"#92400e",itemsPerFloorMod:-2,goldMult:1.2},{id:"swarm",name:"Swarm",description:"Double enemies, +40% gold",color:"#b91c1c",doubleEnemies:!0,goldMult:1.4},{id:"loneWolf",name:"Lone Wolf",description:"No allies, +25% ATK",color:"#7c3aed",noRecruits:!0,playerAtkMult:1.25},{id:"fragile",name:"Fragile",description:"-20% DEF, +50% EXP",color:"#f97316",playerDefMult:.8,expMult:1.5},{id:"tankEnemies",name:"Tank Enemies",description:"+30% enemy HP, +25% gold",color:"#991b1b",enemyHpMult:1.3,goldMult:1.25}];function Oa(){if(Math.random()>.3)return[];const G=Math.random()<.7?1:2,F=[...za],b=[];for(let I=0;I<G&&F.length>0;I++){const B=Math.floor(Math.random()*F.length);b.push(F[B]),F.splice(B,1)}return b}function eo(G){return za.find(F=>F.id===G)}function to(G){return G.map(eo).filter(F=>F!==void 0)}function Ks(G){const F={difficultyMult:1,goldMult:1,itemsPerFloorMod:0,playerAtkMult:1,playerDefMult:1,enemyHpMult:1,expMult:1,healOnFloor:!1,noRecruits:!1,doubleEnemies:!1};for(const b of G)b.difficultyMult&&(F.difficultyMult*=b.difficultyMult),b.goldMult&&(F.goldMult*=b.goldMult),b.itemsPerFloorMod&&(F.itemsPerFloorMod+=b.itemsPerFloorMod),b.playerAtkMult&&(F.playerAtkMult*=b.playerAtkMult),b.playerDefMult&&(F.playerDefMult*=b.playerDefMult),b.enemyHpMult&&(F.enemyHpMult*=b.enemyHpMult),b.expMult&&(F.expMult*=b.expMult),b.healOnFloor&&(F.healOnFloor=!0),b.noRecruits&&(F.noRecruits=!0),b.doubleEnemies&&(F.doubleEnemies=!0);return F}var ft=(G=>(G.Easy="easy",G.Normal="normal",G.Hard="hard",G.Nightmare="nightmare",G))(ft||{});const io={easy:{enemyHpMult:.7,enemyAtkMult:.8,playerDamageMult:.8,goldMult:1.5,expMult:1.3,itemDropMult:1.5,bellyDrainMult:.7,trapFreqMult:.5},normal:{enemyHpMult:1,enemyAtkMult:1,playerDamageMult:1,goldMult:1,expMult:1,itemDropMult:1,bellyDrainMult:1,trapFreqMult:1},hard:{enemyHpMult:1.3,enemyAtkMult:1.2,playerDamageMult:1.2,goldMult:.8,expMult:.8,itemDropMult:.7,bellyDrainMult:1.3,trapFreqMult:1.5},nightmare:{enemyHpMult:1.6,enemyAtkMult:1.5,playerDamageMult:1.5,goldMult:.5,expMult:.6,itemDropMult:.5,bellyDrainMult:1.5,trapFreqMult:2}},Ga="poke-roguelite-difficulty";function Hi(G){return{...io[G]}}function so(G){try{localStorage.setItem(Ga,G)}catch{}}function Ha(){try{const G=localStorage.getItem(Ga);if(G&&Object.values(ft).includes(G))return G}catch{}return"normal"}const ao={easy:"Weaker foes, more loot, slower hunger",normal:"The standard experience",hard:"Tougher foes, scarce loot, faster hunger",nightmare:"Extreme challenge. Good luck."};function $s(G){return G!=="normal"}var Pt=(G=>(G.DoubleDamage="doubleDamage",G.AreaBlast="areaBlast",G.HealBurst="healBurst",G.SpeedBoost="speedBoost",G.CritGuarantee="critGuarantee",G))(Pt||{});const Wa=[{id:"fireChain",name:"Fire Chain",slots:[{mode:"exactId",value:"ember"},{mode:"exactId",value:"fireBlast"}],effect:"doubleDamage",description:"Ember then Fire Blast: next skill deals 2x damage!"},{id:"quickStrike",name:"Quick Strike",slots:[{mode:"exactId",value:"quickAttack"},{mode:"anyAttack"}],effect:"critGuarantee",description:"Quick Attack then any attack: guaranteed critical hit!"},{id:"powerSurge",name:"Power Surge",slots:[{mode:"anyBuff"},{mode:"anyAttack"}],effect:"doubleDamage",description:"Use a buff then attack: next skill deals 2x damage!"},{id:"doubleHeal",name:"Double Heal",slots:[{mode:"anyHeal"},{mode:"anyHeal"}],effect:"healBurst",description:"Two heals in a row: burst heal 30% max HP!"},{id:"typeBarrage",name:"Type Barrage",slots:[{mode:"anyAttack"},{mode:"anyAttack"}],effect:"areaBlast",description:"Two same-type attacks in a row: blast all enemies in room!"},{id:"thunderSurge",name:"Thunder Surge",slots:[{mode:"byType",value:k.Electric},{mode:"byType",value:k.Electric}],effect:"speedBoost",description:"Two Electric moves in a row: gain 2 actions next turn!"},{id:"frostBite",name:"Frost Bite",slots:[{mode:"exactId",value:"iceShard"},{mode:"exactId",value:"iceBeam"}],effect:"critGuarantee",description:"Ice Shard then Ice Beam: guaranteed critical hit!"},{id:"ironWall",name:"Iron Wall",slots:[{mode:"exactId",value:"ironDefense"},{mode:"anyAttack"}],effect:"doubleDamage",description:"Iron Defense then attack: next skill deals 2x damage!"},{id:"waterTorrent",name:"Water Torrent",slots:[{mode:"exactId",value:"waterGun"},{mode:"exactId",value:"surf"}],effect:"areaBlast",description:"Water Gun then Surf: blast all enemies in the room!"},{id:"dragonFury",name:"Dragon Fury",slots:[{mode:"byType",value:k.Dragon},{mode:"byType",value:k.Dragon},{mode:"byType",value:k.Dragon}],effect:"doubleDamage",description:"Three Dragon moves in a row: next skill deals 2x damage!"}];function ro(G,F){const b=Me[F];if(!b)return!1;switch(G.mode){case"exactId":return F===G.value;case"byType":return b.type===G.value;case"byEffect":return b.effect===G.value;case"anyAttack":return b.power>0;case"anyBuff":return b.effect===ce.AtkUp||b.effect===ce.DefUp;case"anyHeal":return b.effect===ce.Heal;default:return!1}}function no(G){if(G.length<2)return null;const F=[...Wa].sort((b,I)=>{if(I.slots.length!==b.slots.length)return I.slots.length-b.slots.length;const B=b.slots.filter(f=>f.mode==="exactId").length;return I.slots.filter(f=>f.mode==="exactId").length-B});for(const b of F){const I=b.slots.length;if(G.length<I)continue;const B=G.slice(-I);let O=!0;for(let f=0;f<I;f++)if(!ro(b.slots[f],B[f])){O=!1;break}if(O){if(b.id==="typeBarrage"){const f=Me[B[0]],x=Me[B[1]];if(!f||!x||f.type!==x.type||f.type===k.Electric||f.type===k.Dragon)continue}return b}}return null}function oo(){return[...Wa]}const lo=[{id:"wishingWell",name:"Wishing Well",description:"A mysterious well glimmers with starlight. Ancient coins rest at the bottom, radiating faint energy...",choices:[{label:"Toss 50G",description:"Make a wish. Random buff: ATK+3, DEF+3, or HP+20",effectId:"wishingWell_toss",effectValue:50},{label:"Walk Away",description:"Leave the well undisturbed.",effectId:"nothing"}],minFloor:2,rarity:1},{id:"abandonedStash",name:"Abandoned Stash",description:"An old supply cache lies half-buried in rubble. Something rattles inside when you nudge it...",choices:[{label:"Open It",description:"50% chance of good items, 50% chance enemies spawn!",effectId:"stash_open"},{label:"Leave It",description:"Better safe than sorry.",effectId:"nothing"}],minFloor:2,rarity:1},{id:"mysteriousStatue",name:"Mysterious Statue",description:"A glowing statue of a legendary Pokemon stands in the center. Its eyes pulse with a warm light...",choices:[{label:"Pray",description:"Receive a full HP heal.",effectId:"statue_pray"},{label:"Smash",description:"Gain 3 random items but take 20 damage.",effectId:"statue_smash",effectValue:20}],minFloor:3,rarity:.5},{id:"lostTraveler",name:"Lost Traveler",description:"A wandering Pokemon shivers in the corner, looking lost and hungry. It gazes at you with hopeful eyes...",choices:[{label:"Give Food",description:"Lose 1 Apple. Gain an ally for this floor.",effectId:"traveler_feed"},{label:"Ignore",description:"You don't have food to spare.",effectId:"nothing"}],minFloor:3,rarity:.5},{id:"cursedChest",name:"Cursed Chest",description:"A dark chest pulses with ominous energy. Purple mist seeps from its edges...",choices:[{label:"Open",description:"Get a powerful item, but receive Burn status.",effectId:"chest_open"},{label:"Leave",description:"The curse isn't worth the risk.",effectId:"nothing"}],minFloor:4,rarity:.5},{id:"trainingGround",name:"Training Ground",description:"A marked training area with worn battle scratches. The air hums with residual fighting spirit...",choices:[{label:"Train",description:"Gain 500 EXP but lose 30% belly.",effectId:"train_do",effectValue:500},{label:"Skip",description:"Save your energy for the journey.",effectId:"nothing"}],minFloor:3,rarity:.5},{id:"fortuneTeller",name:"Fortune Teller",description:"A mystic orb floats above a velvet cloth, swirling with visions of the dungeon's secrets...",choices:[{label:"Pay 100G",description:"Reveal all items and stairs on the minimap.",effectId:"fortune_pay",effectValue:100},{label:"Pass",description:"You'll find the way yourself.",effectId:"nothing"}],minFloor:2,rarity:.2},{id:"restSpot",name:"Rest Spot",description:"A calm clearing bathed in soft light. The gentle breeze and warm glow invite you to rest...",choices:[{label:"Rest",description:"Full HP heal and Belly +30, but skip your turn.",effectId:"rest_do",effectValue:30}],minFloor:2,rarity:1}];function ho(G){const F=lo.filter(B=>G>=B.minFloor);if(F.length===0)return null;const b=F.reduce((B,O)=>B+O.rarity,0);let I=Math.random()*b;for(const B of F)if(I-=B.rarity,I<=0)return B;return F[F.length-1]}const Zs={cave:{id:"cave",name:"Cave",wallColor:4863784,floorColor:9139029,floorAltColor:8217928,corridorColor:7034176,ambientTint:14535850,fogColor:1708040},forest:{id:"forest",name:"Forest",wallColor:1718810,floorColor:4021309,floorAltColor:2968621,corridorColor:2771498,ambientTint:13426124,fogColor:662026},ocean:{id:"ocean",name:"Ocean",wallColor:1714746,floorColor:3824250,floorAltColor:2771562,corridorColor:2767450,ambientTint:13421806,fogColor:526872},volcano:{id:"volcano",name:"Volcano",wallColor:3807754,floorColor:6959136,floorAltColor:5908504,corridorColor:4857872,ambientTint:15649962,fogColor:1575429},temple:{id:"temple",name:"Temple",wallColor:2759226,floorColor:5913194,floorAltColor:4860506,corridorColor:3809360,ambientTint:14535918,fogColor:657432},shadow:{id:"shadow",name:"Shadow",wallColor:657941,floorColor:2763317,floorAltColor:1710629,corridorColor:1381663,ambientTint:12303308,fogColor:328968},metal:{id:"metal",name:"Metal",wallColor:2763312,floorColor:5921381,floorAltColor:4868693,corridorColor:3816005,ambientTint:13421789,fogColor:657936},dojo:{id:"dojo",name:"Dojo",wallColor:3811352,floorColor:8020032,floorAltColor:6967344,corridorColor:5916712,ambientTint:14535867,fogColor:1314312},sky:{id:"sky",name:"Sky",wallColor:2767450,floorColor:5929626,floorAltColor:4876938,corridorColor:3824250,ambientTint:13426158,fogColor:659480},toxic:{id:"toxic",name:"Toxic",wallColor:1714714,floorColor:4864602,floorAltColor:3811914,corridorColor:2760768,ambientTint:13426124,fogColor:526856},frost:{id:"frost",name:"Frost",wallColor:1714746,floorColor:6982314,floorAltColor:5929626,corridorColor:4876938,ambientTint:14544639,fogColor:659488},void:{id:"void",name:"Void",wallColor:328976,floorColor:1381669,floorAltColor:657946,corridorColor:657941,ambientTint:11184844,fogColor:131589}},uo={beachCave:"cave",rockyCavern:"cave",buriedRuins:"cave",tinyWoods:"forest",overgrownForest:"forest",verdantForest:"forest",petalGarden:"forest",stormySea:"ocean",magmaCavern:"volcano",emberGrotto:"volcano",moonlitCave:"temple",mysticSanctum:"temple",sinisterWoods:"shadow",skyTower:"shadow",shadowForest:"shadow",thunderwaveCave:"metal",steelFortress:"metal",ampPlains:"metal",mtSteel:"dojo",battleArena:"dojo",meadowPath:"dojo",windySummit:"sky",dragonsLair:"sky",toxicSwamp:"toxic",frostyForest:"frost",frozenTundra:"frost",endlessDungeon:"void",dailyDungeon:"void"};function co(G){const F=Qe[G];if(!F)return"cave";const b={};for(const f of F.enemySpeciesIds){const x=Te[f];if(x)for(const e of x.types)b[e]=(b[e]??0)+1}let I=k.Normal,B=0;for(const[f,x]of Object.entries(b))x>B&&(B=x,I=f);return{[k.Rock]:"cave",[k.Ground]:"cave",[k.Grass]:"forest",[k.Bug]:"forest",[k.Water]:"ocean",[k.Fire]:"volcano",[k.Psychic]:"temple",[k.Fairy]:"temple",[k.Dark]:"shadow",[k.Ghost]:"shadow",[k.Steel]:"metal",[k.Electric]:"metal",[k.Fighting]:"dojo",[k.Normal]:"dojo",[k.Flying]:"sky",[k.Dragon]:"sky",[k.Poison]:"toxic",[k.Ice]:"frost"}[I]??"cave"}function fo(G){const F=uo[G]??co(G);return Zs[F]??Zs.cave}function St(G,F){const b=Math.floor((G>>16&255)*F),I=Math.floor((G>>8&255)*F),B=Math.floor((G&255)*F);return Math.min(b,255)<<16|Math.min(I,255)<<8|Math.min(B,255)}function po(G,F){const b=fo(G),I=Math.floor((F-1)/5);if(I<=0)return b;const B=Math.pow(.95,I);return{...b,wallColor:St(b.wallColor,B),floorColor:St(b.floorColor,B),floorAltColor:St(b.floorAltColor,B),corridorColor:St(b.corridorColor,B),ambientTint:St(b.ambientTint,B),fogColor:St(b.fogColor,B)}}const mo={kill:.1,effective:.05,monsterHouseClear:.5,itemPickup:.02,quickFloor:.2},go={kill:50,effective:20,monsterHouseClear:200,itemPickup:10,quickFloor:100},vo=5,yo=5;function Js(){return{currentMultiplier:1,chainCount:0,maxChainReached:1,totalBonusScore:0,turnsSinceLastAction:0}}function gt(G,F){const b=mo[F];G.currentMultiplier=Math.min(vo,Math.round((G.currentMultiplier+b)*100)/100),G.chainCount++,G.turnsSinceLastAction=0,G.currentMultiplier>G.maxChainReached&&(G.maxChainReached=G.currentMultiplier);const I=go[F],B=Math.floor(I*(G.currentMultiplier-1));return G.totalBonusScore+=B,B}function ct(G){G.currentMultiplier=1,G.chainCount=0,G.turnsSinceLastAction=0}function xo(G){return G.currentMultiplier<=1?!1:(G.turnsSinceLastAction++,G.turnsSinceLastAction>=yo?(ct(G),!0):!1)}function Di(G){return G>=4?"SSS":G>=3?"SS":G>=2.5?"S":G>=2?"A":G>=1.5?"B":G>1?"C":""}function So(G){switch(G){case"C":return"#999999";case"B":return"#ffffff";case"A":return"#4ade80";case"S":return"#60a5fa";case"SS":return"#a855f7";case"SSS":return"#fbbf24";default:return"#999999"}}function wo(G){switch(G){case"C":return 10066329;case"B":return 16777215;case"A":return 4906624;case"S":return 6333946;case"SS":return 11032055;case"SSS":return 16498468;default:return 10066329}}const Qs=["sitrusBerry","reviveSeed","oranBerry","maxElixir","xAttack","xDefend","blazeSeed"];function Fo(G,F,b){if(G<=1||G>=b&&F!=="bossRush"||F==="endlessDungeon"||F==="dailyDungeon")return!1;if(F==="bossRush")return G%3===0;if(F==="destinyTower")return G%10===0;if(b>=6){const I=Math.floor(b*.5);return G===I}return!1}function To(G,F,b){const I=F==="bossRush",B=F==="destinyTower",O=Co(F,G),f=[],x=Math.floor(2+G+b*2);f.push({bossSpecies:ei(O),level:x,hpMultiplier:1.5,count:1}),Math.random()<.5?f.push({bossSpecies:ei(O),level:x+1,hpMultiplier:1,count:2}):f.push({bossSpecies:ei(O),level:x+1,hpMultiplier:2,count:1}),I&&f.push({bossSpecies:ei(O),level:x+3,hpMultiplier:3,count:1});const e=!B,o=Math.floor(30*b*(1+G*.1));return{waves:f,restBetweenWaves:e,rewardPerWave:o}}function ko(G,F){const b=G.rewardPerWave*F,I=Math.floor(b*.8);let B;return F>=G.waves.length&&(B=Qs[Math.floor(Math.random()*Qs.length)]),{gold:b,exp:I,item:B}}function Co(G,F){const b=Qe[G];if(!b)return Object.keys(Te);const I=yt(b,F);if(I.length>0){const B=I.filter(O=>Te[O]);if(B.length>0)return B}if(b.enemySpeciesIds.length>0){const B=b.enemySpeciesIds.filter(O=>Te[O]);if(B.length>0)return B}return Object.keys(Te)}function ei(G){return G[Math.floor(Math.random()*G.length)]}var Pe=(G=>(G.TileSequence="tileSequence",G.SwitchOrder="switchOrder",G.MemoryMatch="memoryMatch",G.EnemyRush="enemyRush",G.ItemSacrifice="itemSacrifice",G))(Pe||{});const bo={tileSequence:"Step on the glowing tiles in the correct order!",switchOrder:"Activate the colored switches in the right sequence!",memoryMatch:"Watch the pattern, then reproduce it!",enemyRush:"Defeat all enemies before time runs out!",itemSacrifice:"Place an offering on the altar!"},js=["oranBerry","apple","pechaberry"],qs=["sitrusBerry","maxElixir","reviveSeed","bigApple"],Eo=["allPowerOrb","luminousOrb","escapeOrb"];function Po(G){return G<=5?js:G<=12?[...js,...qs]:[...qs,...Eo]}const _s=["tileSequence","switchOrder","memoryMatch","enemyRush","itemSacrifice"];function Mo(G,F){return G<=1||G>=F?!1:Math.random()<.1}function Ao(G,F){const b=_s[Math.floor(Math.random()*_s.length)],I=G<=5?1:G<=12?2:3,B=Io(G,I,F),O={type:b,description:bo[b],difficulty:I,reward:B,solved:!1};return b==="enemyRush"&&(O.timeLimit=15),O}function Io(G,F,b){const I=40+G*8,B=Math.floor(I*(.8+F*.3)*b),O=20+G*5,f=Math.floor(O*(.8+F*.3)),x=Po(G),e=F>=2?2:1,o=[];for(let m=0;m<e;m++)o.push(x[Math.floor(Math.random()*x.length)]);return{gold:B,exp:f,items:o}}function Bo(G){return G.reward}function Do(G,F,b,I,B){const O=[],f=new Set,x=G+1,e=G+b-2,o=F+1,m=F+I-2;let n=0;for(;O.length<B&&n<50;){const r=x+Math.floor(Math.random()*Math.max(1,e-x+1)),a=o+Math.floor(Math.random()*Math.max(1,m-o+1)),t=`${r},${a}`;f.has(t)||(f.add(t),O.push({x:r,y:a})),n++}return O}function ea(G,F){switch(G){case"tileSequence":return 3+Math.min(2,F-1);case"switchOrder":return 3;case"memoryMatch":return 4+Math.min(2,F-1);case"enemyRush":return 4+Math.min(2,F-1);case"itemSacrifice":return 1;default:return 3}}const Et=[16729156,4491519,16763904],ta=["Red","Blue","Yellow"],ia=[{speciesId:"mewtwo",name:"Mewtwo",type:"Psychic",level:50,hpMultiplier:3,atkMultiplier:2.5,defMultiplier:1.5,specialMove:"psychicBlast",reward:{gold:500,exp:800,skillId:"psychicBlast"},flavorText:"The air warps with immense psychic energy..."},{speciesId:"rayquaza",name:"Rayquaza",type:"Dragon",level:55,hpMultiplier:4,atkMultiplier:3,defMultiplier:1.5,specialMove:"dragonAscent",reward:{gold:800,exp:1200,uniqueItem:"autoReviver"},flavorText:"A deafening roar echoes from above..."},{speciesId:"lugia",name:"Lugia",type:"Flying",level:50,hpMultiplier:3.5,atkMultiplier:2,defMultiplier:2,specialMove:"aeroblast",reward:{gold:600,exp:900},flavorText:"A gust of oceanic wind sweeps through the dungeon..."},{speciesId:"hooh",name:"Ho-Oh",type:"Fire",level:50,hpMultiplier:3,atkMultiplier:2.5,defMultiplier:1.5,specialMove:"sacredFire",reward:{gold:600,exp:900,skillId:"sacredFire"},flavorText:"Radiant flames illuminate the darkness..."},{speciesId:"groudon",name:"Groudon",type:"Ground",level:55,hpMultiplier:4,atkMultiplier:2,defMultiplier:2,specialMove:"precipiceBlades",reward:{gold:700,exp:1e3},flavorText:"The ground trembles violently..."},{speciesId:"kyogre",name:"Kyogre",type:"Water",level:55,hpMultiplier:4,atkMultiplier:2,defMultiplier:2,specialMove:"originPulse",reward:{gold:700,exp:1e3},flavorText:"Water seeps from every crack in the walls..."},{speciesId:"dialga",name:"Dialga",type:"Steel",level:60,hpMultiplier:4,atkMultiplier:3,defMultiplier:2,specialMove:"roarOfTime",reward:{gold:1e3,exp:1500},flavorText:"Time itself seems to slow and distort..."},{speciesId:"palkia",name:"Palkia",type:"Dragon",level:60,hpMultiplier:4,atkMultiplier:3,defMultiplier:2,specialMove:"spacialRend",reward:{gold:1e3,exp:1500},flavorText:"Cracks appear in the fabric of space..."},{speciesId:"arceus",name:"Arceus",type:"Normal",level:70,hpMultiplier:5,atkMultiplier:4,defMultiplier:3,specialMove:"judgment",reward:{gold:2e3,exp:3e3,uniqueItem:"goldenApple"},flavorText:"A blinding divine light fills the floor..."},{speciesId:"giratina",name:"Giratina",type:"Ghost",level:60,hpMultiplier:4.5,atkMultiplier:3,defMultiplier:2,specialMove:"shadowForce",reward:{gold:1e3,exp:1500,skillId:"shadowForce"},flavorText:"Shadows writhe and twist unnaturally..."}];function Ro(G,F,b,I=!1){if(I||F<8||G/F<.7)return!1;const f=.03+(b.ngPlusLevel??0)*.01;return Math.random()<f}function Lo(G,F){const b=zo(F),I=b.map((f,x)=>{const e=Math.max(.1,1-Math.abs(f.level-G)/50);return{enc:f,weight:e}}),B=I.reduce((f,x)=>f+x.weight,0);let O=Math.random()*B;for(const f of I)if(O-=f.weight,O<=0)return f.enc;return b[Math.floor(Math.random()*b.length)]}function zo(G){let F;G<2?F=50:G<5?F=55:G<8?F=60:F=70;const b=ia.filter(I=>I.level<=F);return b.length>0?b:ia.filter(I=>I.level<=50)}var ye=(G=>(G.GiantEnemies="giantEnemies",G.TinyDungeon="tinyDungeon",G.DarkFloor="darkFloor",G.GoldenAge="goldenAge",G.ItemRain="itemRain",G.EnemySwarm="enemySwarm",G.FastEnemies="fastEnemies",G.RegenFloor="regenFloor",G.CursedFloor="cursedFloor",G.TypeShift="typeShift",G.MirrorWorld="mirrorWorld",G.TreasureFloor="treasureFloor",G))(ye||{});const Oo={giantEnemies:{type:"giantEnemies",name:"Giant Enemies",description:"Enemies are 1.5x larger with +30% HP",icon:"",isPositive:!1,color:15680580},tinyDungeon:{type:"tinyDungeon",name:"Tiny Dungeon",description:"Rooms and corridors are smaller",icon:"",isPositive:!0,color:6333946},darkFloor:{type:"darkFloor",name:"Dark Floor",description:"Sight range reduced to 2 tiles",icon:"",isPositive:!1,color:7020968},goldenAge:{type:"goldenAge",name:"Golden Age",description:"2x gold drops from all sources",icon:"",isPositive:!0,color:16498468},itemRain:{type:"itemRain",name:"Item Rain",description:"50% more items spawn on each floor",icon:"",isPositive:!0,color:4906624},enemySwarm:{type:"enemySwarm",name:"Enemy Swarm",description:"50% more enemies per floor",icon:"",isPositive:!1,color:14427686},fastEnemies:{type:"fastEnemies",name:"Fast Enemies",description:"Enemies have 20% chance of double-move",icon:"",isPositive:!1,color:16347926},regenFloor:{type:"regenFloor",name:"Regen Floor",description:"Regenerate 1 HP every 3 turns",icon:"",isPositive:!0,color:2278750},cursedFloor:{type:"cursedFloor",name:"Cursed Floor",description:"Lose 1 HP every 10 turns",icon:"",isPositive:!1,color:10033947},typeShift:{type:"typeShift",name:"Type Shift",description:"All enemies change to a random type",icon:"",isPositive:!1,color:11032055},mirrorWorld:{type:"mirrorWorld",name:"Mirror World",description:"Player and enemy ATK/DEF are swapped",icon:"",isPositive:!1,color:8490232},treasureFloor:{type:"treasureFloor",name:"Treasure Floor",description:"Rare items appear but enemies +50% stronger",icon:"",isPositive:!1,color:16639626}},Go=[["goldenAge","cursedFloor"],["regenFloor","cursedFloor"],["itemRain","enemySwarm"],["tinyDungeon","enemySwarm"]],Ho={giantEnemies:{enemySpriteScale:1.5,enemyHpMult:1.3},tinyDungeon:{},darkFloor:{sightRadius:2},goldenAge:{goldMult:2},itemRain:{itemMult:1.5},enemySwarm:{enemyCountMult:1.5},fastEnemies:{doubleMoveChance:.2},regenFloor:{regenInterval:3,regenAmount:1},cursedFloor:{curseInterval:10,curseDamage:1},typeShift:{},mirrorWorld:{},treasureFloor:{enemyAtkMult:1.5,enemyHpMult:1.5,extraRareItems:3}};function Wo(G){return Oo[G]}function Ge(G,F){return Ho[G]?.[F]??0}function No(G,F){return Go.some(([b,I])=>b===G&&I===F||b===F&&I===G)}function Uo(G,F){if(Math.random()>.2)return[];const b=Math.random()<.7?1:2,B=[...Object.values(ye)],O=[];for(let f=0;f<b&&B.length>0;f++){const x=Math.floor(Math.random()*B.length),e=B[x];B.splice(x,1);for(let o=B.length-1;o>=0;o--)No(e,B[o])&&B.splice(o,1);O.push(Wo(e))}return O}function Ne(G,F){return G.some(b=>b.type===F)}function sa(G){return`#${G.color.toString(16).padStart(6,"0")}`}const Ri=150;function aa(G){return Math.min(3,1+Math.floor((G-1)/3))}const ra=4;function ot(G,F,b,I=0){const B=(1+(G-1)*.25)*F*(1+I*.1),O=b?.baseStats??{hp:20,atk:8,def:3};return{hp:Math.floor(O.hp*B),maxHp:Math.floor(O.hp*B),atk:Math.floor(O.atk*B),def:Math.floor(O.def*B),level:2+G}}class Xo extends $e.Scene{constructor(){super({key:"DungeonScene"}),this.turnManager=new Ps,this.currentFloor=1,this.enemies=[],this.allies=[],this.allEntities=[],this.persistentHp=50,this.persistentMaxHp=50,this.persistentSkills=null,this.persistentLevel=5,this.persistentAtk=12,this.persistentDef=6,this.totalExp=0,this.logMessages=[],this.skillButtons=[],this.minimapVisible=!0,this.minimapExpanded=!1,this.minimapLegendTexts=[],this.MINIMAP_TILE_SMALL=3,this.MINIMAP_TILE_LARGE=7,this.MINIMAP_TILE_FULLMAP=4,this.MINIMAP_X_SMALL=J-80,this.MINIMAP_Y_SMALL=4,this.fullMapOpen=!1,this.fullMapOverlayBg=null,this.fullMapGfx=null,this.fullMapCloseZone=null,this.fullMapUI=[],this.statusHudTexts=[],this.statusFlashTimers=[],this.bellyWarningShown=!1,this.bellyUrgentShown=!1,this.activeSkillIndex=-1,this.inventory=[],this.floorItems=[],this.persistentInventory=null,this.bagOpen=!1,this.bagUI=[],this.gameOver=!1,this.enemiesDefeated=0,this.floorTraps=[],this.trapGraphics=[],this.floorHazards=[],this.hazardGraphics=[],this.hazardTweens=[],this.belly=100,this.maxBelly=100,this.persistentBelly=null,this.shopConfig=null,this.shopItems=[],this.shopRoom=null,this.shopUI=[],this.shopOpen=!1,this.gold=0,this.shopTiles=[],this.shopCarpet=null,this.shopWelcomeShown=!1,this.playerInShopRoom=!1,this.shopGoldHud=null,this.shopTheftTriggered=!1,this.shopClosed=!1,this.starterId="mudkip",this.monsterHouseRoom=null,this.monsterHouseTriggered=!1,this.monsterHouseType="standard",this.monsterHouseCleared=!1,this.monsterHouseEnemies=[],this.eventRoom=null,this.eventTriggered=!1,this.eventOpen=!1,this.eventUI=[],this.currentEvent=null,this.eventMarker=null,this.puzzleRoom=null,this.puzzleData=null,this.puzzleTriggered=!1,this.puzzleActive=!1,this.puzzleSolved=!1,this.puzzleFailed=!1,this.puzzleTiles=[],this.puzzleTileGraphics=[],this.puzzleTileTweens=[],this.puzzleSequence=[],this.puzzlePlayerStep=0,this.puzzleWrongAttempts=0,this.puzzleTurnsUsed=0,this.puzzleEnemies=[],this.puzzleMarker=null,this.puzzleCarpet=null,this.puzzleHudText=null,this.puzzleHudBg=null,this.puzzleUI=[],this.puzzleShowingSequence=!1,this.ngPlusLevel=0,this.ngPlusBonuses=Fs(0),this.ngPlusBadgeText=null,this.currentWeather=Ue.None,this.currentWeatherIntensity=Ia.Mild,this.weatherIntensityHudText=null,this.weatherOverlay=null,this.weatherParticles=null,this.weatherTimer=null,this.floorTurns=0,this.bossEntity=null,this.bossHpBar=null,this.bossHpBg=null,this.bossNameText=null,this.gauntletActive=!1,this.gauntletConfig=null,this.gauntletCurrentWave=0,this.gauntletTotalWavesCleared=0,this.gauntletEnemies=[],this.gauntletStairsLocked=!1,this.gauntletWaveText=null,this.gauntletVignette=null,this.gauntletVignetteTween=null,this.menuOpen=!1,this.menuUI=[],this.teamPanelOpen=!1,this.teamPanelUI=[],this.settingsOpen=!1,this.settingsUI=[],this.dpadUI=[],this.dpadSide="right",this.lastUsedItemId=null,this.quickSlotBtn=null,this.pickupBtnPhaser=null,this.teamBtnPhaser=null,this.domHud=null,this.domHudElement=null,this.challengeMode=null,this.isBossRush=!1,this.bossesDefeated=0,this.challengeTurnLimit=0,this.challengeBadgeText=null,this.legendaryEncountered=!1,this.legendaryEntity=null,this.legendaryEncounter=null,this.legendaryHpBar=null,this.legendaryHpBg=null,this.legendaryNameText=null,this.legendaryParticleTimer=null,this.legendaryParticleGraphics=null,this.activeModifiers=[],this.modifierEffects=Ks([]),this.difficultyLevel=ft.Normal,this.difficultyMods=Hi(ft.Normal),this.seenSpecies=new Set,this.heldItemEffect={},this.enchantment=null,this.phoenixUsed=!1,this.autoExploring=!1,this.autoExploreTimer=null,this.autoExploreText=null,this.autoExploreTween=null,this.recentSkillIds=[],this.comboDoubleDamage=!1,this.comboCritGuarantee=!1,this.comboSpeedBoost=!1,this.scoreChain=Js(),this.chainHudText=null,this.chainHudBg=null,this.lastChainTier="",this.chainActionThisTurn=!1,this.themeOverlay=null,this.runElapsedSeconds=0,this.timerEvent=null,this.floorMutations=[],this.mutationHudTexts=[],this.typeShiftType=null,this.mirrorApplied=!1,this.persistentAllies=null,this.skillPreviewUI=[],this.skillPreviewActive=!1,this.teamPanelScroll=0,this.onAutoExploreInterrupt=()=>{this.autoExploring&&this.stopAutoExplore("Stopped.")}}init(F){try{const v=localStorage.getItem("poke-roguelite-dpadSide");(v==="left"||v==="right")&&(this.dpadSide=v)}catch{}this.difficultyLevel=Ha(),this.difficultyMods=Hi(this.difficultyLevel);const b=Ye(),I=lt(b,"maxHp")*5,B=lt(b,"atk"),O=lt(b,"def");this.ngPlusLevel=Wt(b),this.ngPlusBonuses=Fs(this.ngPlusLevel),this.ngPlusBadgeText=null;const f=b.equippedHeldItem,x=f?ci(f):void 0;this.heldItemEffect=x?.effect??{};const e=this.heldItemEffect.hpBonus??0,o=this.heldItemEffect.atkBonus??0,m=this.heldItemEffect.defBonus??0;this.enchantment=f?li(b):null,this.phoenixUsed=!1;let n=0,r=0,a=0;if(this.enchantment)switch(this.enchantment.id){case"sharpness":r=3;break;case"resilience":a=3;break;case"vitality":n=10;break}this.dungeonDef=pr(F?.dungeonId??"beachCave");const t=(F?.floor??1)===1&&!F?.hp;if(this.currentFloor=F?.floor??1,this.dungeonDef.id==="endlessDungeon"&&(this.dungeonDef={...this.dungeonDef},this.dungeonDef.difficulty=1+this.currentFloor*.1,this.dungeonDef.itemsPerFloor=Math.min(7,3+Math.floor(this.currentFloor/15))),this.dungeonDef.id==="dailyDungeon"){const v=Gt();this.dungeonDef={...this.dungeonDef,floors:v.floors,difficulty:v.difficulty},v.modifiers.includes("strongEnemies")&&(this.dungeonDef.difficulty*=1.3),v.modifiers.includes("fewItems")&&(this.dungeonDef.itemsPerFloor=2),v.modifiers.includes("toughBoss")&&this.dungeonDef.boss&&(this.dungeonDef.boss={...this.dungeonDef.boss,statMultiplier:this.dungeonDef.boss.statMultiplier*1.5})}this.isBossRush=this.dungeonDef.id==="bossRush",this.bossesDefeated=0,this.isBossRush&&(this.dungeonDef={...this.dungeonDef});const s=1+(this.ngPlusBonuses.hpPercent+this.ngPlusBonuses.allStatsPercent)/100,l=1+(this.ngPlusBonuses.atkPercent+this.ngPlusBonuses.allStatsPercent)/100,i=1+this.ngPlusBonuses.allStatsPercent/100,h=this.enchantment?.id==="overlord"?1.05:1,d=Math.floor((50+I+e+n)*s*h),c=Math.floor((12+B+o+r)*l*h),u=Math.floor((6+O+m+a)*i*h);this.persistentHp=F?.hp??d,this.persistentMaxHp=F?.maxHp??d,this.persistentSkills=F?.skills??null,this.persistentInventory=F?.inventory??null,this.persistentLevel=F?.level??5,this.persistentAtk=F?.atk??c,this.persistentDef=F?.def??u,this.totalExp=F?.exp??0,this.enemies=[],this.allies=[],this.allEntities=[],this.floorItems=[],this.gameOver=!1,this.bossEntity=null,this.bossHpBar=null,this.bossHpBg=null,this.bossNameText=null,this.legendaryEncountered=F?.legendaryEncountered??!1,this.legendaryEntity=null,this.legendaryEncounter=null,this.legendaryHpBar=null,this.legendaryHpBg=null,this.legendaryNameText=null,this.legendaryParticleTimer=null,this.legendaryParticleGraphics=null,this.gauntletActive=!1,this.gauntletConfig=null,this.gauntletCurrentWave=0,this.gauntletTotalWavesCleared=0,this.gauntletEnemies=[],this.gauntletStairsLocked=!1,this.gauntletWaveText=null,this.gauntletVignette=null,this.gauntletVignetteTween=null,this.activeSkillIndex=-1,this.skillButtons=[],this.bagOpen=!1,this.bagUI=[],this.teamPanelOpen=!1,this.teamPanelUI=[],this.enemiesDefeated=0,this.recentSkillIds=[],this.comboDoubleDamage=!1,this.comboCritGuarantee=!1,this.comboSpeedBoost=!1,this.scoreChain=F?.scoreChain??Js(),this.chainHudText=null,this.chainHudBg=null,this.lastChainTier="",this.chainActionThisTurn=!1,this.turnManager=new Ps,this.persistentAllies=F?.allies??null,this.floorTraps=[],this.trapGraphics=[],this.floorHazards=[],this.hazardGraphics=[],this.hazardTweens=[];const p=lt(b,"bellyMax")*20;this.maxBelly=100+p,this.belly=F?.belly??this.maxBelly,this.bellyWarningShown=this.belly<=this.maxBelly*.2,this.bellyUrgentShown=this.belly<=this.maxBelly*.1,this.starterId=F?.starter??"mudkip",this.seenSpecies=new Set,this.seenSpecies.add(this.starterId),this.shopConfig=null,this.shopItems=[],this.shopRoom=null,this.shopUI=[],this.shopOpen=!1,this.shopTiles=[],this.shopCarpet=null,this.shopWelcomeShown=!1,this.playerInShopRoom=!1,this.shopGoldHud=null,this.shopTheftTriggered=!1,this.shopClosed=!1,this.monsterHouseRoom=null,this.monsterHouseTriggered=!1,this.monsterHouseType="standard",this.monsterHouseCleared=!1,this.monsterHouseEnemies=[],this.eventRoom=null,this.eventTriggered=!1,this.eventOpen=!1,this.eventUI=[],this.currentEvent=null,this.eventMarker=null,this.puzzleRoom=null,this.puzzleData=null,this.puzzleTriggered=!1,this.puzzleActive=!1,this.puzzleSolved=!1,this.puzzleFailed=!1,this.puzzleTiles=[],this.puzzleTileGraphics=[],this.puzzleTileTweens=[],this.puzzleSequence=[],this.puzzlePlayerStep=0,this.puzzleWrongAttempts=0,this.puzzleTurnsUsed=0,this.puzzleEnemies=[],this.puzzleMarker=null,this.puzzleCarpet=null,this.puzzleHudText=null,this.puzzleHudBg=null,this.puzzleUI=[],this.puzzleShowingSequence=!1,this.autoExploring=!1,this.autoExploreTimer=null,this.autoExploreText=null,this.autoExploreTween=null,this.fullMapOpen=!1,this.fullMapOverlayBg=null,this.fullMapGfx=null,this.fullMapCloseZone=null,this.fullMapUI=[],this.runElapsedSeconds=F?.runElapsedTime??0,this.timerEvent=null;const g=t&&this.ngPlusBonuses.startingGoldPercent>0?Math.floor(b.gold*this.ngPlusBonuses.startingGoldPercent/100):0;this.gold=b.gold+g,this.challengeMode=F?.challengeMode??null,this.challengeTurnLimit=0,this.challengeBadgeText=null,this.challengeMode==="speedrun"&&(this.challengeTurnLimit=this.dungeonDef.floors*50),this.challengeMode==="noItems"&&(this.dungeonDef={...this.dungeonDef},this.dungeonDef.difficulty=this.dungeonDef.difficulty*.85),this.challengeMode==="solo"&&t&&(this.persistentAtk=Math.floor(this.persistentAtk*1.3),this.persistentDef=Math.floor(this.persistentDef*1.3));const y=this.dungeonDef.id!=="endlessDungeon"&&this.dungeonDef.id!=="dailyDungeon"&&this.dungeonDef.id!=="bossRush"&&!this.challengeMode;if(F?.modifiers&&F.modifiers.length>0?this.activeModifiers=to(F.modifiers):y&&F?.fromHub&&t?this.activeModifiers=Oa():this.activeModifiers=[],this.modifierEffects=Ks(this.activeModifiers),this.activeModifiers.length>0&&(this.dungeonDef={...this.dungeonDef},this.modifierEffects.difficultyMult!==1&&(this.dungeonDef.difficulty*=this.modifierEffects.difficultyMult),this.modifierEffects.itemsPerFloorMod!==0&&(this.dungeonDef.itemsPerFloor=Math.max(0,this.dungeonDef.itemsPerFloor+this.modifierEffects.itemsPerFloorMod)),t&&(this.modifierEffects.playerAtkMult!==1&&(this.persistentAtk=Math.floor(this.persistentAtk*this.modifierEffects.playerAtkMult)),this.modifierEffects.playerDefMult!==1&&(this.persistentDef=Math.floor(this.persistentDef*this.modifierEffects.playerDefMult)))),t){const v=lt(b,"startItems");v>0&&!this.persistentInventory&&(this.persistentInventory=[{item:We.oranBerry,count:v}])}}preload(){this.load.image(this.dungeonDef.tilesetKey,this.dungeonDef.tilesetPath);const F={mudkip:"0258",zubat:"0041",shellos:"0422",corsola:"0222",geodude:"0074",pikachu:"0025",voltorb:"0100",magnemite:"0081",caterpie:"0010",pidgey:"0016",aron:"0304",meditite:"0307",machop:"0066",gastly:"0092",drowzee:"0096",snorunt:"0361",charmander:"0004",eevee:"0133",numel:"0322",slugma:"0218",torkoal:"0324",murkrow:"0198",sableye:"0302",absol:"0359",chikorita:"0152",bellsprout:"0069",shroomish:"0285",grimer:"0088",nidoranM:"0032",tentacool:"0072",clefairy:"0035",jigglypuff:"0039",ralts:"0280",dratini:"0147",bagon:"0371",gible:"0443",poochyena:"0261",beldum:"0374",skarmory:"0227",sandshrew:"0027",trapinch:"0328",phanpy:"0231",horsea:"0116",lotad:"0270",carvanha:"0318",elekid:"0239",mareep:"0179",wurmple:"0265",spinarak:"0167",abra:"0063",natu:"0177",houndour:"0228",sneasel:"0215",taillow:"0276",starly:"0396",makuhita:"0296",riolu:"0447",larvitar:"0246",nosepass:"0299",swinub:"0220",spheal:"0363",zigzagoon:"0263",whismur:"0293",oddish:"0043",budew:"0406",vulpix:"0037",ponyta:"0077",staryu:"0120",clamperl:"0366",shinx:"0403",electrike:"0309",gulpin:"0316",ekans:"0023",cubone:"0104",diglett:"0050",paras:"0046",venonat:"0048",shieldon:"0410",bronzor:"0436",misdreavus:"0200",duskull:"0355",axew:"0610",deino:"0633",snubbull:"0209",togepi:"0175",snover:"0459",bergmite:"0712",spoink:"0325",stunky:"0434",purrloin:"0509",pidove:"0519",rufflet:"0627",tyrogue:"0236",crabrawler:"0739",roggenrola:"0524",rockruff:"0744",lillipup:"0506",minccino:"0572",foongus:"0590",petilil:"0548",feebas:"0349",wailmer:"0320",litwick:"0607",growlithe:"0058",joltik:"0595",tynamo:"0602",trubbish:"0568",skorupi:"0451",mudbray:"0749",hippopotas:"0449",dwebble:"0557",binacle:"0688",nincada:"0290",venipede:"0543",mienfoo:"0619",timburr:"0532",klink:"0599",ferroseed:"0597",phantump:"0708",honedge:"0679",solosis:"0577",elgyem:"0605",cryogonal:"0615",cubchoo:"0613",sandile:"0551",inkay:"0686",spritzee:"0682",swirlix:"0684",goomy:"0704",jangmoo:"0782",noibat:"0714",vullaby:"0629",stufful:"0759",furfrou:"0676",wimpod:"0767",tympole:"0535",salandit:"0757",larvesta:"0636",fomantis:"0753",morelull:"0755",charjabug:"0737",helioptile:"0694",mareanie:"0747",croagunk:"0453",sandygast:"0769",silicobra:"0843",carbink:"0703",minior:"0774",dewpider:"0751",sizzlipede:"0850",pancham:"0674",hawlucha:"0701",durant:"0632",togedemaru:"0777",drifloon:"0425",golett:"0622",hatenna:"0856",indeedee:"0876",vanillite:"0582",snom:"0872",nickit:"0827",impidimp:"0859",milcery:"0868",comfey:"0764",turtonator:"0776",drampa:"0780",rookidee:"0821",archen:"0566",wooloo:"0831",skwovet:"0819",bruxish:"0779",chewtle:"0833",litleo:"0667",torchic:"0255",gossifleur:"0829",bounsweet:"0761",yamper:"0835",pincurchin:"0871",skrelp:"0690",toxel:"0848",drilbur:"0529",barboach:"0339",nacli:"0932",tyrunt:"0696",blipbug:"0824",cutiefly:"0742",clobbopus:"0852",passimian:"0766",tinkatink:"0957",varoom:"0965",greavard:"0971",sinistea:"0854",flittle:"0955",espurr:"0677",cetoddle:"0974",frigibax:"0996",zorua:"0570",pawniard:"0624",fidough:"0926",dedenne:"0702",cyclizar:"0967",tatsugiri:"0978",wingull:"0278",swablu:"0333",lechonk:"0915",tandemaus:"0921",buizel:"0418",finizen:"0963",fletchinder:"0662",heatmor:"0631",smoliv:"0928",deerling:"0585",pachirisu:"0417",emolga:"0587",glimmet:"0969",koffing:"0109",wooper:"0194",baltoy:"0343",anorith:"0347",lunatone:"0337",surskit:"0283",volbeat:"0313",scraggy:"0559",mankey:"0056",klefki:"0707",mawile:"0303",rotom:"0479",dreepy:"0885",munna:"0517",chingling:"0433",smoochum:"0238",delibird:"0225",nuzleaf:"0274",spiritomb:"0442",marill:"0183",cleffa:"0173",druddigon:"0621",applin:"0840",hoppip:"0187",tropius:"0357",aipom:"0190",smeargle:"0235",poliwag:"0060",corphish:"0341",magby:"0240",darumaka:"0554",sewaddle:"0540",pumpkaboo:"0710",plusle:"0311",minun:"0312",nidoranF:"0029",seviper:"0336",gligar:"0207",rhyhorn:"0111",sudowoodo:"0185",boldore:"0525",pineco:"0204",heracross:"0214",hitmonlee:"0106",hitmonchan:"0107",steelix:"0208",scizor:"0212",banette:"0354",shedinja:"0292",slowpoke:"0079",girafarig:"0203",glaceon:"0471",beartic:"0614",umbreon:"0197",cacturne:"0332",granbull:"0210",togekiss:"0468",shelgon:"0372",gabite:"0444",noctowl:"0164",xatu:"0178",kangaskhan:"0115",tauros:"0128",psyduck:"0054",seel:"0086",cyndaquil:"0155",fennekin:"0653",sunkern:"0191",cacnea:"0331",pichu:"0172",chinchou:"0170",weedle:"0013",qwilfish:"0211",donphan:"0232",marowak:"0105",onix:"0095",omanyte:"0138",scyther:"0123",pinsir:"0127",medicham:"0308",lucario:"0448",metang:"0375",lairon:"0305",gengar:"0094",chandelure:"0609",alakazam:"0065",gardevoir:"0282",lapras:"0131",weavile:"0461",honchkrow:"0430",houndoom:"0229",florges:"0671",mimikyu:"0778",dragonite:"0149",flygon:"0330",staraptor:"0398",braviary:"0628",snorlax:"0143",zangoose:"0335",gyarados:"0130",kingdra:"0230",blaziken:"0257",typhlosion:"0157",venusaur:"0003",sceptile:"0254",jolteon:"0135",ampharos:"0181",nidoking:"0034",crobat:"0169",krookodile:"0553",nidoqueen:"0031",tyranitar:"0248",aerodactyl:"0142",yanmega:"0469",scolipede:"0545",conkeldurr:"0534",machamp:"0068",magnezone:"0462",empoleon:"0395",dusknoir:"0477",cofagrigus:"0563",reuniclus:"0579",gothitelle:"0576",mamoswine:"0473",walrein:"0365",darkrai:"0491",hydreigon:"0635",sylveon:"0700",hatterene:"0858",haxorus:"0612",goodra:"0706",pidgeot:"0018",noivern:"0715",blissey:"0242",porygonZ:"0474",blastoise:"0009",feraligatr:"0160",charizard:"0006",delphox:"0655",torterra:"0389",serperior:"0497",electivire:"0466",luxray:"0405",roserade:"0407",vileplume:"0045",rhyperior:"0464",dugtrio:"0051",golem:"0076",terrakion:"0639",pheromosa:"0795",escavalier:"0589",kommoo:"0784",gallade:"0475",corviknight:"0823",bastiodon:"0411",aegislash:"0681",jellicent:"0593",slowking:"0199",bronzong:"0437",froslass:"0478",abomasnow:"0460",sharpedo:"0319",zoroark:"0571",primarina:"0730",diancie:"0719",dragapult:"0887",duraludon:"0884",swellow:"0277",talonflame:"0663",slaking:"0289",lopunny:"0428",suicune:"0245",lugia:"0249",hooh:"0250",entei:"0244",celebi:"0251",virizion:"0640",raikou:"0243",zekrom:"0644",nihilego:"0793",naganadel:"0804",groudon:"0383",landorus:"0645",regirock:"0377",stakataka:"0805",genesect:"0649",buzzwole:"0794",cobalion:"0638",marshadow:"0802",registeel:"0379",solgaleo:"0791",giratina:"0487",lunala:"0792",mewtwo:"0150",deoxys:"0386",regice:"0378",kyurem:"0646",yveltal:"0717",hoopa:"0720",xerneas:"0716",magearna:"0801",rayquaza:"0384",dialga:"0483",tornadus:"0641",articuno:"0144",arceus:"0493",regigigas:"0486",kyogre:"0382",palkia:"0484",reshiram:"0643",victini:"0494",shaymin:"0492",tapuBulu:"0787",thundurus:"0642",zeraora:"0807",eternatus:"0890",poipole:"0803",zygarde:"0718",excadrill:"0530",lycanroc:"0745",gigalith:"0526",volcarona:"0637",golisopod:"0768",urshifu:"0892",keldeo:"0647",heatran:"0485",kartana:"0798",spectrier:"0897",polteageist:"0855",mew:"0151",cresselia:"0488",calyrexIce:"0898",cloyster:"0091",grimmsnarl:"0861",incineroar:"0727",zacian:"0888",tapuLele:"0786",garchomp:"0445",latios:"0381",zapdos:"0145",moltres:"0146",silvally:"0773",meloetta:"0648"},b=(this.persistentAllies??[]).map(B=>B.speciesId),I=new Set([this.starterId,...this.dungeonDef.enemySpeciesIds,...b]);for(const B of I){const O=F[B],f=Te[B];!f||!O||(this.load.spritesheet(`${B}-walk`,`sprites/${O}/Walk-Anim.png`,{frameWidth:f.walkFrameWidth,frameHeight:f.walkFrameHeight}),this.load.spritesheet(`${B}-idle`,`sprites/${O}/Idle-Anim.png`,{frameWidth:f.idleFrameWidth,frameHeight:f.idleFrameHeight}))}}create(){Xi(),fa(this.dungeonDef.id),this.dungeon=jr();const{width:F,height:b,terrain:I,playerStart:B,stairsPos:O}=this.dungeon;if(this.currentTheme=po(this.dungeonDef.id,this.currentFloor),this.floorMutations=Uo(this.currentFloor,this.dungeonDef.id),this.typeShiftType=null,this.mirrorApplied=!1,this.mutationHudTexts=[],Ne(this.floorMutations,ye.TypeShift)){const X=Object.values(k);this.typeShiftType=X[Math.floor(Math.random()*X.length)]}const f=this.dungeon.rooms,x=new Set;for(const X of f)for(let R=X.y;R<X.y+X.h;R++)for(let H=X.x;H<X.x+X.w;H++)x.add(`${H},${R}`);const e=[];for(let X=0;X<b;X++){e[X]=[];for(let R=0;R<F;R++)e[X][R]=_r(I,R,X,F,b)}const o=this.make.tilemap({data:e,tileWidth:zi,tileHeight:zi}),m=o.addTilesetImage(this.dungeonDef.tilesetKey);if(m){const X=o.createLayer(0,m,0,0);X&&(X.setScale(De),X.setTint(this.currentTheme.ambientTint))}this.themeOverlay=this.add.graphics().setDepth(1);const n=.18;for(let X=0;X<b;X++)for(let R=0;R<F;R++){const H=I[X][R];let L,N=n;H===xe.WALL?(L=this.currentTheme.wallColor,N=.25):H===xe.GROUND?x.has(`${R},${X}`)?L=(R+X)%2===0?this.currentTheme.floorColor:this.currentTheme.floorAltColor:L=this.currentTheme.corridorColor:(L=this.currentTheme.floorColor,N=.12),this.themeOverlay.fillStyle(L,N),this.themeOverlay.fillRect(R*re,X*re,re,re)}const r=this.add.graphics(),a=O.x*re+re/2,t=O.y*re+re/2;r.fillStyle(16498468,.9),r.fillTriangle(a,t-14,a+10,t,a-10,t),r.fillTriangle(a,t+14,a+10,t,a-10,t),r.setDepth(5);const s=new Set([this.starterId,...this.dungeonDef.enemySpeciesIds]);for(const X of s)try{const R=Te[X];if(!R||this.anims.exists(`${X}-walk-0`))continue;this.createAnimations(R.spriteKey,R.walkFrames,R.idleFrames)}catch(R){console.warn(`[DungeonScene] Failed to create animations for "${X}":`,R)}const l=Te[this.starterId]??Te.mudkip;let i=this.persistentSkills;if(!i){const R=Ye().customSkills?.[this.starterId];R&&R.length>0&&(i=R.filter(H=>Me[H]).map(H=>st(Me[H]))),(!i||i.length===0)&&(i=et(l))}if(this.ngPlusBonuses.bonusPP>0)for(const X of i)X.pp+=this.ngPlusBonuses.bonusPP,X.currentPp+=this.ngPlusBonuses.bonusPP;this.player={tileX:B.x,tileY:B.y,facing:ge.Down,stats:{hp:this.persistentHp,maxHp:this.persistentMaxHp,atk:this.persistentAtk,def:this.persistentDef,level:this.persistentLevel},alive:!0,spriteKey:l.spriteKey,name:l.name,types:l.types,attackType:l.attackType,skills:i,statusEffects:[],ability:He[this.starterId]??He.mudkip,abilityLevel:pi(Ye().abilityLevels,He[this.starterId]??He.mudkip),speciesId:this.starterId};const h=`${l.spriteKey}-idle`;if(this.textures.exists(h)){this.player.sprite=this.add.sprite(this.tileToPixelX(this.player.tileX),this.tileToPixelY(this.player.tileY),h),this.player.sprite.setScale(De).setDepth(10);const X=`${l.spriteKey}-idle-${ge.Down}`;this.anims.exists(X)&&this.player.sprite.play(X)}else{const X=this.add.graphics();X.fillStyle(4906624,1),X.fillCircle(this.tileToPixelX(this.player.tileX),this.tileToPixelY(this.player.tileY),re/3),X.setDepth(10)}if(this.allEntities.push(this.player),this.persistentAllies)for(let X=0;X<this.persistentAllies.length;X++){const R=this.persistentAllies[X],H=Te[R.speciesId];if(!H)continue;const L=B.x+(X===0?1:-1),N=B.y,z=L>=0&&L<F&&I[N]?.[L]===xe.GROUND?L:B.x,U=z===B.x&&N+1<b&&I[N+1]?.[z]===xe.GROUND?N+1:N,Y={tileX:z,tileY:U===N&&z===B.x?N:U,facing:ge.Down,stats:{hp:R.hp,maxHp:R.maxHp,atk:R.atk,def:R.def,level:R.level},alive:!0,spriteKey:H.spriteKey,name:H.name,types:H.types,attackType:H.attackType,skills:ha(R.skills),statusEffects:[],isAlly:!0,speciesId:R.speciesId,ability:He[R.speciesId],allyTactic:ze.FollowMe},$=`${H.spriteKey}-idle`;if(this.textures.exists($)){Y.sprite=this.add.sprite(this.tileToPixelX(Y.tileX),this.tileToPixelY(Y.tileY),$).setScale(De).setDepth(10);const Z=`${H.spriteKey}-idle-${ge.Down}`;this.anims.exists(Z)&&Y.sprite.play(Z)}this.allies.push(Y),this.allEntities.push(Y),this.seenSpecies.add(R.speciesId)}if(!this.isBossRush){const R=(this.dungeonDef.id==="endlessDungeon"||this.dungeonDef.id==="dailyDungeon"?this.getEndlessEnemies(this.currentFloor):yt(this.dungeonDef,this.currentFloor)).map(H=>Te[H]).filter(Boolean);R.length===0&&R.push(Te.zubat);for(let H=1;H<f.length;H++){const L=f[H],N=this.modifierEffects.doubleEnemies?aa(this.currentFloor)*2:aa(this.currentFloor),z=Ne(this.floorMutations,ye.EnemySwarm)?Ge(ye.EnemySwarm,"enemyCountMult"):1,U=Math.max(1,Math.ceil(N*z));for(let Y=0;Y<U;Y++){const $=L.x+1+Math.floor(Math.random()*(L.w-2)),Z=L.y+1+Math.floor(Math.random()*(L.h-2));if(I[Z][$]!==xe.GROUND||$===O.x&&Z===O.y)continue;const Q=R[Math.floor(Math.random()*R.length)],q=ot(this.currentFloor,this.dungeonDef.difficulty,Q,this.ngPlusLevel);if(this.modifierEffects.enemyHpMult!==1&&(q.hp=Math.floor(q.hp*this.modifierEffects.enemyHpMult),q.maxHp=Math.floor(q.maxHp*this.modifierEffects.enemyHpMult)),this.difficultyMods.enemyHpMult!==1&&(q.hp=Math.floor(q.hp*this.difficultyMods.enemyHpMult),q.maxHp=Math.floor(q.maxHp*this.difficultyMods.enemyHpMult)),this.difficultyMods.enemyAtkMult!==1&&(q.atk=Math.floor(q.atk*this.difficultyMods.enemyAtkMult)),Ne(this.floorMutations,ye.GiantEnemies)){const ie=Ge(ye.GiantEnemies,"enemyHpMult");q.hp=Math.floor(q.hp*ie),q.maxHp=Math.floor(q.maxHp*ie)}if(Ne(this.floorMutations,ye.TreasureFloor)){const ie=Ge(ye.TreasureFloor,"enemyHpMult"),ne=Ge(ye.TreasureFloor,"enemyAtkMult");q.hp=Math.floor(q.hp*ie),q.maxHp=Math.floor(q.maxHp*ie),q.atk=Math.floor(q.atk*ne)}const j=this.typeShiftType?[this.typeShiftType]:Q.types,_=this.typeShiftType??Q.attackType,te={tileX:$,tileY:Z,facing:ge.Down,stats:{...q},alive:!0,spriteKey:Q.spriteKey,name:Q.name,types:j,attackType:_,skills:et(Q),statusEffects:[],speciesId:Q.spriteKey,ability:He[Q.spriteKey]},se=`${Q.spriteKey}-idle`;if(this.textures.exists(se)){te.sprite=this.add.sprite(this.tileToPixelX($),this.tileToPixelY(Z),se);const ie=Ne(this.floorMutations,ye.GiantEnemies)?De*Ge(ye.GiantEnemies,"enemySpriteScale"):De;te.sprite.setScale(ie).setDepth(9);const ne=`${Q.spriteKey}-idle-${ge.Down}`;this.anims.exists(ne)&&te.sprite.play(ne)}this.enemies.push(te),this.allEntities.push(te),this.seenSpecies.add(Q.id)}}}if(this.currentFloor===this.dungeonDef.floors&&this.dungeonDef.boss){const X=this.dungeonDef.boss,R=Te[X.speciesId];if(R){const H=f.slice(1).reduce((Z,Q)=>Q.w*Q.h>Z.w*Z.h?Q:Z,f[1]),L=H.x+Math.floor(H.w/2),N=H.y+Math.floor(H.h/2),z=ot(this.currentFloor,this.dungeonDef.difficulty,R,this.ngPlusLevel),U={hp:Math.floor(z.hp*X.statMultiplier*this.difficultyMods.enemyHpMult),maxHp:Math.floor(z.hp*X.statMultiplier*this.difficultyMods.enemyHpMult),atk:Math.floor(z.atk*X.statMultiplier*this.difficultyMods.enemyAtkMult),def:Math.floor(z.def*X.statMultiplier),level:z.level+3},Y={tileX:L,tileY:N,facing:ge.Down,stats:U,alive:!0,spriteKey:R.spriteKey,name:X.name,types:R.types,attackType:R.attackType,skills:et(R),statusEffects:[],speciesId:R.spriteKey,isBoss:!0,ability:He[R.spriteKey]},$=`${R.spriteKey}-idle`;if(this.textures.exists($)){Y.sprite=this.add.sprite(this.tileToPixelX(L),this.tileToPixelY(N),$),Y.sprite.setScale(De*1.5).setDepth(11);const Z=`${R.spriteKey}-idle-${ge.Down}`;this.anims.exists(Z)&&Y.sprite.play(Z)}Y.sprite&&Y.sprite.setTint(16737894),this.time.delayedCall(800,()=>{Y.sprite&&Y.sprite.clearTint()}),this.bossEntity=Y,this.enemies.push(Y),this.allEntities.push(Y),this.seenSpecies.add(R.id)}}if(this.dungeonDef.id==="endlessDungeon"&&this.currentFloor%10===0){const X=Object.keys(Te),R=X[Math.floor(Math.random()*X.length)],H=Te[R];if(H){const L=f.slice(1).reduce((q,j)=>j.w*j.h>q.w*q.h?j:q,f[1]),N=L.x+Math.floor(L.w/2),z=L.y+Math.floor(L.h/2),U=2+this.currentFloor*.2,Y=ot(this.currentFloor,this.dungeonDef.difficulty,H,this.ngPlusLevel),$={hp:Math.floor(Y.hp*U*this.difficultyMods.enemyHpMult),maxHp:Math.floor(Y.hp*U*this.difficultyMods.enemyHpMult),atk:Math.floor(Y.atk*U*this.difficultyMods.enemyAtkMult),def:Math.floor(Y.def*U),level:Y.level+3},Z={tileX:N,tileY:z,facing:ge.Down,stats:$,alive:!0,spriteKey:H.spriteKey,name:`Abyss ${H.name}`,types:H.types,attackType:H.attackType,skills:et(H),statusEffects:[],speciesId:H.spriteKey,isBoss:!0,ability:He[H.spriteKey]},Q=`${H.spriteKey}-idle`;if(this.textures.exists(Q)){Z.sprite=this.add.sprite(this.tileToPixelX(N),this.tileToPixelY(z),Q),Z.sprite.setScale(De*1.5).setDepth(11);const q=`${H.spriteKey}-idle-${ge.Down}`;this.anims.exists(q)&&Z.sprite.play(q)}Z.sprite&&Z.sprite.setTint(11167487),this.time.delayedCall(800,()=>{Z.sprite&&Z.sprite.clearTint()}),this.bossEntity=Z,this.enemies.push(Z),this.allEntities.push(Z),this.seenSpecies.add(H.id)}}if(this.isBossRush){const X=Object.keys(Te),R=X[Math.floor(Math.random()*X.length)],H=Te[R];if(H){const L=f.slice(1).reduce((te,se)=>se.w*se.h>te.w*te.h?se:te,f[1]),N=L.x+Math.floor(L.w/2),z=L.y+Math.floor(L.h/2),U=3+this.currentFloor*1.5,Y=ot(this.currentFloor,this.dungeonDef.difficulty,H,this.ngPlusLevel),$={hp:Math.floor(Y.hp*U*this.difficultyMods.enemyHpMult),maxHp:Math.floor(Y.hp*U*this.difficultyMods.enemyHpMult),atk:Math.floor(Y.atk*U*this.difficultyMods.enemyAtkMult),def:Math.floor(Y.def*U),level:Y.level+5+this.currentFloor},Q=["I","II","III","IV","V","VI","VII","VIII","IX","X"][this.currentFloor-1]??`${this.currentFloor}`,q=`${H.name} Overlord ${Q}`,j={tileX:N,tileY:z,facing:ge.Down,stats:$,alive:!0,spriteKey:H.spriteKey,name:q,types:H.types,attackType:H.attackType,skills:et(H),statusEffects:[],speciesId:H.spriteKey,isBoss:!0,ability:He[H.spriteKey]},_=`${H.spriteKey}-idle`;if(this.textures.exists(_)){j.sprite=this.add.sprite(this.tileToPixelX(N),this.tileToPixelY(z),_),j.sprite.setScale(De*1.5).setDepth(11);const te=`${H.spriteKey}-idle-${ge.Down}`;this.anims.exists(te)&&j.sprite.play(te)}j.sprite&&j.sprite.setTint(16720418),this.time.delayedCall(800,()=>{j.sprite&&j.sprite.clearTint()}),this.bossEntity=j,this.enemies.push(j),this.allEntities.push(j),this.seenSpecies.add(H.id)}}if(!this.bossEntity&&!this.isBossRush&&Ro(this.currentFloor,this.dungeonDef.floors,Ye(),this.legendaryEncountered)){const X=Lo(this.currentFloor,this.dungeonDef.difficulty),R=Te[X.speciesId];if(R){this.legendaryEncountered=!0,this.legendaryEncounter=X;const H=f.slice(1).reduce((q,j)=>j.w*j.h>q.w*q.h?j:q,f[1]),L=H.x+Math.floor(H.w/2),N=H.y+Math.floor(H.h/2),z=ot(this.currentFloor,this.dungeonDef.difficulty,R,this.ngPlusLevel),U={hp:Math.floor(z.hp*X.hpMultiplier*this.difficultyMods.enemyHpMult),maxHp:Math.floor(z.hp*X.hpMultiplier*this.difficultyMods.enemyHpMult),atk:Math.floor(z.atk*X.atkMultiplier*this.difficultyMods.enemyAtkMult),def:Math.floor(z.def*X.defMultiplier),level:X.level},Y=et(R),$=Me[X.specialMove];if($&&!Y.some(q=>q.id===X.specialMove))if(Y.length>=4){const q=Y.reduce((j,_,te)=>_.power<Y[j].power?te:j,0);Y[q]=st($)}else Y.push(st($));const Z={tileX:L,tileY:N,facing:ge.Down,stats:U,alive:!0,spriteKey:R.spriteKey,name:X.name,types:R.types,attackType:R.attackType,skills:Y,statusEffects:[],speciesId:R.spriteKey,isBoss:!0},Q=`${R.spriteKey}-idle`;if(this.textures.exists(Q)){Z.sprite=this.add.sprite(this.tileToPixelX(L),this.tileToPixelY(N),Q),Z.sprite.setScale(De*1.5).setDepth(11);const q=`${R.spriteKey}-idle-${ge.Down}`;this.anims.exists(q)&&Z.sprite.play(q)}Z.sprite&&Z.sprite.setTint(16766720),this.time.delayedCall(1200,()=>{Z.sprite&&Z.sprite.clearTint()}),this.legendaryEntity=Z,this.enemies.push(Z),this.allEntities.push(Z),this.seenSpecies.add(R.id)}}if(!this.bossEntity&&Fo(this.currentFloor,this.dungeonDef.id,this.dungeonDef.floors)&&(this.gauntletConfig=To(this.currentFloor,this.dungeonDef.id,this.dungeonDef.difficulty),this.gauntletActive=!0,this.gauntletCurrentWave=0,this.gauntletTotalWavesCleared=0,this.gauntletStairsLocked=!0,this.gauntletEnemies=[]),this.inventory=this.persistentInventory??[],this.ngPlusBonuses.startWithItem&&this.currentFloor===1&&!this.persistentInventory){const X=dt(),R=this.inventory.find(H=>H.item.id===X.id&&X.stackable);R?R.count++:this.inventory.push({item:X,count:1})}const d=1+this.ngPlusBonuses.itemDropPercent/100,c=this.enchantment?.id==="lucky"?1.05:1,u=Ne(this.floorMutations,ye.ItemRain)?Ge(ye.ItemRain,"itemMult"):1,p=Math.max(1,Math.floor(this.dungeonDef.itemsPerFloor*this.difficultyMods.itemDropMult*d*c*u));for(let X=0;X<p;X++){const R=f[Math.floor(Math.random()*f.length)],H=R.x+1+Math.floor(Math.random()*(R.w-2)),L=R.y+1+Math.floor(Math.random()*(R.h-2));if(I[L][H]!==xe.GROUND||H===O.x&&L===O.y||H===B.x&&L===B.y)continue;const N=dt(),z=N.category==="berry"?"":N.category==="seed"?"":"",U=N.category==="berry"?"#ff6b9d":N.category==="seed"?"#4ade80":"#60a5fa",Y=this.add.text(H*re+re/2,L*re+re/2,z,{fontSize:"16px",color:U,fontFamily:"monospace"}).setOrigin(.5).setDepth(6);this.floorItems.push({x:H,y:L,item:N,sprite:Y})}const g=Math.floor(An(this.currentFloor,this.dungeonDef.difficulty)*this.difficultyMods.trapFreqMult),y=new Set;for(const X of this.floorItems)y.add(`${X.x},${X.y}`);for(const X of this.enemies)y.add(`${X.tileX},${X.tileY}`);for(const X of this.allies)y.add(`${X.tileX},${X.tileY}`);this.floorTraps=In(F,b,I,g,O.x,O.y,B.x,B.y,y,xe.GROUND);const v=new Set(y);for(const X of this.floorTraps)v.add(`${X.x},${X.y}`);this.floorHazards=Ln(F,b,I,this.currentFloor,this.dungeonDef.id,O.x,O.y,B.x,B.y,v,xe.GROUND),this.renderHazardTiles();const S=this.dungeonDef.boss&&this.currentFloor===this.dungeonDef.floors||this.isBossRush;if(S&&Pi(),!S&&Xn(this.currentFloor,this.dungeonDef.floors)&&f.length>2){const X=f.filter(R=>!(B.x>=R.x&&B.x<R.x+R.w&&B.y>=R.y&&B.y<R.y+R.h)&&!(O.x>=R.x&&O.x<R.x+R.w&&O.y>=R.y&&O.y<R.y+R.h));if(X.length>0){const R=X[Math.floor(Math.random()*X.length)];this.shopRoom=R,this.shopConfig=Un(this.currentFloor,this.dungeonDef.difficulty),this.shopItems=this.shopConfig.items,this.shopCarpet=this.add.graphics().setDepth(3),this.shopCarpet.fillStyle(13808780,.3),this.shopCarpet.fillRect((R.x+1)*re,(R.y+1)*re,(R.w-2)*re,(R.h-2)*re),this.shopCarpet.lineStyle(1,13808780,.5),this.shopCarpet.strokeRect((R.x+1)*re,(R.y+1)*re,(R.w-2)*re,(R.h-2)*re);for(let N=0;N<this.shopItems.length;N++){const z=R.x+1+N%Math.max(1,R.w-2),U=R.y+1+Math.floor(N/Math.max(1,R.w-2));if(U>=R.y+R.h-1)break;if(I[U][z]!==xe.GROUND)continue;const Y=this.shopItems[N];if(!We[Y.itemId])continue;const Z=this.add.text(z*re+re/2,U*re+re/2,"",{fontSize:"14px",fontFamily:"monospace"}).setOrigin(.5).setDepth(7),Q=this.add.text(z*re+re/2,U*re+re+2,`${Y.price}G`,{fontSize:"7px",color:"#fbbf24",fontFamily:"monospace"}).setOrigin(.5).setDepth(7);this.shopTiles.push({x:z,y:U,shopIdx:N,sprite:Z,priceTag:Q})}const H=R.x*re+R.w*re/2,L=R.y*re+4;this.add.text(H,L,"Kecleon Shop",{fontSize:"8px",color:"#4ade80",fontFamily:"monospace",backgroundColor:"#1a1a2ecc",padding:{x:4,y:2}}).setOrigin(.5).setDepth(8),this.showLog("There's a Kecleon Shop on this floor!")}}if(this.currentFloor>=3&&!S&&Math.random()<.15&&f.length>2){const X=f.filter(R=>!(B.x>=R.x&&B.x<R.x+R.w&&B.y>=R.y&&B.y<R.y+R.h)&&R!==this.shopRoom&&R.w*R.h>=16);if(X.length>0){this.monsterHouseRoom=X[Math.floor(Math.random()*X.length)];const R=Math.random();if(R<.5?this.monsterHouseType="standard":R<.75?this.monsterHouseType="treasure":this.monsterHouseType="ambush",this.monsterHouseType==="treasure"){const H=this.monsterHouseRoom,L=2+Math.floor(Math.random()*3);for(let N=0;N<L;N++){const z=H.x+1+Math.floor(Math.random()*Math.max(1,H.w-2)),U=H.y+1+Math.floor(Math.random()*Math.max(1,H.h-2));if(I[U]?.[z]!==xe.GROUND||z===O.x&&U===O.y)continue;const Y=dt(),$=Y.category==="berry"?"":Y.category==="seed"?"":"",Z=Y.category==="berry"?"#ff6b9d":Y.category==="seed"?"#4ade80":"#60a5fa",Q=this.add.text(z*re+re/2,U*re+re/2,$,{fontSize:"16px",color:Z,fontFamily:"monospace"}).setOrigin(.5).setDepth(6);this.floorItems.push({x:z,y:U,item:Y,sprite:Q})}}}}if(this.currentFloor>=3&&!S&&Math.random()<.2&&f.length>2){const X=f.filter(R=>!(B.x>=R.x&&B.x<R.x+R.w&&B.y>=R.y&&B.y<R.y+R.h)&&!(O.x>=R.x&&O.x<R.x+R.w&&O.y>=R.y&&O.y<R.y+R.h)&&R!==this.shopRoom&&R!==this.monsterHouseRoom);if(X.length>0){const R=X[Math.floor(Math.random()*X.length)],H=ho(this.currentFloor);if(H){this.eventRoom=R,this.currentEvent=H;const L=Math.floor(R.x+R.w/2),N=Math.floor(R.y+R.h/2);this.eventMarker=this.add.text(L*re+re/2,N*re+re/2-8,"!",{fontSize:"18px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(8),this.tweens.add({targets:this.eventMarker,scaleX:{from:1,to:1.3},scaleY:{from:1,to:1.3},alpha:{from:1,to:.6},duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}}}if(!S&&Mo(this.currentFloor,this.dungeonDef.floors)&&f.length>2){const X=f.filter(R=>!(B.x>=R.x&&B.x<R.x+R.w&&B.y>=R.y&&B.y<R.y+R.h)&&!(O.x>=R.x&&O.x<R.x+R.w&&O.y>=R.y&&O.y<R.y+R.h)&&R!==this.shopRoom&&R!==this.monsterHouseRoom&&R!==this.eventRoom&&R.w>=4&&R.h>=4);if(X.length>0){const R=X[Math.floor(Math.random()*X.length)];this.puzzleRoom=R,this.puzzleData=Ao(this.currentFloor,this.dungeonDef.difficulty),this.puzzleCarpet=this.add.graphics().setDepth(3),this.puzzleCarpet.fillStyle(2282478,.12),this.puzzleCarpet.fillRect((R.x+1)*re,(R.y+1)*re,(R.w-2)*re,(R.h-2)*re),this.puzzleCarpet.lineStyle(1,2282478,.4),this.puzzleCarpet.strokeRect((R.x+1)*re,(R.y+1)*re,(R.w-2)*re,(R.h-2)*re);const H=Math.floor(R.x+R.w/2),L=Math.floor(R.y+R.h/2);this.puzzleMarker=this.add.text(H*re+re/2,L*re+re/2-8,"?",{fontSize:"18px",color:"#22d3ee",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(8),this.tweens.add({targets:this.puzzleMarker,scaleX:{from:1,to:1.3},scaleY:{from:1,to:1.3},alpha:{from:1,to:.6},duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});const N=this.puzzleData.type,z=ea(N,this.puzzleData.difficulty);if(N!==Pe.EnemyRush){this.puzzleTiles=Do(R.x,R.y,R.w,R.h,z),this.puzzleSequence=this.puzzleTiles.map((U,Y)=>Y);for(let U=this.puzzleSequence.length-1;U>0;U--){const Y=Math.floor(Math.random()*(U+1));[this.puzzleSequence[U],this.puzzleSequence[Y]]=[this.puzzleSequence[Y],this.puzzleSequence[U]]}for(let U=0;U<this.puzzleTiles.length;U++){const Y=this.puzzleTiles[U],$=this.add.graphics().setDepth(4);let Z=2282478;N===Pe.SwitchOrder&&U<Et.length&&(Z=Et[U]),$.fillStyle(Z,0),$.fillRect(Y.x*re+4,Y.y*re+4,re-8,re-8),$.setVisible(!1),this.puzzleTileGraphics.push($)}}this.showLog("There's a Puzzle Room on this floor!")}}this.visited=Array.from({length:b},()=>new Array(F).fill(!1)),this.currentlyVisible=Array.from({length:b},()=>new Array(F).fill(!1));const w=Ne(this.floorMutations,ye.DarkFloor)?Ge(ye.DarkFloor,"sightRadius"):4;this.revealArea(B.x,B.y,w);const T=F*re,C=b*re;this.cameras.main.setBounds(0,0,T,C),this.cameras.main.startFollow(this.player.sprite,!0,.15,.15);const M=`${this.starterId}-idle`;if(this.textures.exists(M)&&(this.portraitSprite=this.add.sprite(20,20,M).setScrollFactor(0).setDepth(101).setScale(1.2),this.anims.exists(`${this.starterId}-idle-0`)&&this.portraitSprite.play(`${this.starterId}-idle-0`)),this.hpBarBg=this.add.graphics().setScrollFactor(0).setDepth(100),this.hpBarBg.fillStyle(1710638,.9),this.hpBarBg.fillRoundedRect(38,8,100,10,3),this.hpBarBg.lineStyle(1,3355477),this.hpBarBg.strokeRoundedRect(38,8,100,10,3),this.hpBarFill=this.add.graphics().setScrollFactor(0).setDepth(101),this.bellyBarBg=this.add.graphics().setScrollFactor(0).setDepth(100),this.bellyBarBg.fillStyle(1710638,.9),this.bellyBarBg.fillRoundedRect(38,19,100,6,2),this.bellyBarBg.lineStyle(1,3355477),this.bellyBarBg.strokeRoundedRect(38,19,100,6,2),this.bellyBarFill=this.add.graphics().setScrollFactor(0).setDepth(101),this.bellyText=this.add.text(40,19,"",{fontSize:"5px",color:"#ffffff",fontFamily:"monospace"}).setScrollFactor(0).setDepth(102),this.floorText=this.add.text(8,6,"",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setScrollFactor(0).setDepth(100),this.hpText=this.add.text(40,9,"",{fontSize:"8px",color:"#ffffff",fontFamily:"monospace"}).setScrollFactor(0).setDepth(102),this.turnText=this.add.text(8,40,"",{fontSize:"10px",color:"#60a5fa",fontFamily:"monospace"}).setScrollFactor(0).setDepth(100),this.timerText=this.add.text(8,52,this.formatTime(this.runElapsedSeconds),{fontSize:"8px",color:"#6b7280",fontFamily:"monospace"}).setScrollFactor(0).setDepth(100),this.timerEvent=this.time.addEvent({delay:1e3,loop:!0,callback:()=>{if(this.gameOver||this.bagOpen||this.menuOpen||this.settingsOpen||this.shopOpen||this.eventOpen||this.teamPanelOpen||this.fullMapOpen)return;this.runElapsedSeconds++;const X=this.formatTime(this.runElapsedSeconds);this.timerText.setText(X),this.domHud&&(this.domHud.timerLabel.textContent=X)}}),this.logText=this.add.text(8,ee-200,"",{fontSize:"10px",color:"#fbbf24",fontFamily:"monospace",wordWrap:{width:340},backgroundColor:"#000000cc",padding:{x:6,y:4}}).setScrollFactor(0).setDepth(100),this.chainHudBg=this.add.graphics().setScrollFactor(0).setDepth(99),this.chainHudText=this.add.text(J-10,ee-210,"",{fontSize:"11px",color:"#999999",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(1,1).setScrollFactor(0).setDepth(100),this.chainHudText.setAlpha(0),this.lastChainTier="",this.scoreChain.currentMultiplier>1&&this.updateChainHUD(),this.currentWeather=Gs(this.dungeonDef.id,this.currentFloor),this.currentWeatherIntensity=zn(this.currentFloor,this.dungeonDef.floors),this.floorTurns=0,this.weatherText=this.add.text(J/2,24,"",{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(100),this.currentWeather!==Ue.None){const X=qt[this.currentWeather],R=this.currentWeatherIntensity;this.weatherText.setText(`${X.symbol} ${X.name} (${R}): ${X.description}`),this.weatherText.setColor(jt[this.currentWeatherIntensity]),cs(),this.showLog(`The weather is ${X.name} (${R})!`)}if(this.setupWeatherVisuals(),this.setupStatusFlashAnimations(),this.weatherIntensityHudText=null,this.currentWeather!==Ue.None){const X={[Ue.Rain]:"Rain",[Ue.Sandstorm]:"Sandstorm",[Ue.Hail]:"Hail"},R=this.currentWeatherIntensity;this.weatherIntensityHudText=this.add.text(J-10,55,`${X[this.currentWeather]} (${R})`,{fontSize:"8px",color:jt[this.currentWeatherIntensity],fontFamily:"monospace"}).setOrigin(1,0).setScrollFactor(0).setDepth(100)}if(this.challengeMode){const X=kt.find(R=>R.id===this.challengeMode);X&&(this.challengeBadgeText=this.add.text(J/2,36,`[${X.name.toUpperCase()}]`,{fontSize:"9px",color:X.color,fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#00000088",padding:{x:4,y:1}}).setOrigin(.5).setScrollFactor(0).setDepth(103),this.challengeMode==="speedrun"?this.showLog(`Speed Run! Complete in ${this.challengeTurnLimit} turns!`):this.challengeMode==="noItems"?this.showLog("No Items challenge! Items are forbidden!"):this.challengeMode==="solo"&&this.showLog("Solo challenge! No allies, +30% stats!"))}if(this.ngPlusLevel>0){const X=this.challengeMode?48:36;this.ngPlusBadgeText=this.add.text(J-8,X,`NG+${this.ngPlusLevel}`,{fontSize:"8px",color:"#a855f7",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#00000088",padding:{x:3,y:1}}).setOrigin(1,0).setScrollFactor(0).setDepth(103)}if(this.activeModifiers.length>0){const X=this.challengeMode?48:36;for(let N=0;N<this.activeModifiers.length;N++){const z=this.activeModifiers[N];this.add.text(J/2,X+N*12,`[${z.name}]`,{fontSize:"8px",color:z.color,fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#00000088",padding:{x:3,y:1}}).setOrigin(.5).setScrollFactor(0).setDepth(103)}const R=this.add.rectangle(J/2,ee/2,J*.8,30+this.activeModifiers.length*22,0,.85).setScrollFactor(0).setDepth(300),H=[],L=this.add.text(J/2,ee/2-10-this.activeModifiers.length*8,"Dungeon Modifiers",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(301);H.push(L);for(let N=0;N<this.activeModifiers.length;N++){const z=this.activeModifiers[N],U=this.add.text(J/2,ee/2+6+N*18-(this.activeModifiers.length-1)*4,`[${z.name}] ${z.description}`,{fontSize:"9px",color:z.color,fontFamily:"monospace",backgroundColor:"#00000066",padding:{x:4,y:2}}).setOrigin(.5).setScrollFactor(0).setDepth(301);H.push(U)}this.time.delayedCall(2e3,()=>{R.destroy();for(const N of H)N.destroy()})}if(Ne(this.floorMutations,ye.MirrorWorld)&&!this.mirrorApplied){this.mirrorApplied=!0;const X=this.player.stats.atk;this.player.stats.atk=this.player.stats.def,this.player.stats.def=X;for(const R of this.enemies){const H=R.stats.atk;R.stats.atk=R.stats.def,R.stats.def=H}}if(Ne(this.floorMutations,ye.TreasureFloor)){const X=Ge(ye.TreasureFloor,"extraRareItems");for(let R=0;R<X;R++){const H=f[Math.floor(Math.random()*f.length)],L=H.x+1+Math.floor(Math.random()*Math.max(1,H.w-2)),N=H.y+1+Math.floor(Math.random()*Math.max(1,H.h-2));if(I[N]?.[L]!==xe.GROUND)continue;const z=dt(),U=z.category==="berry"?"":z.category==="seed"?"":"",$=this.add.text(L*re+re/2,N*re+re/2,U,{fontSize:"16px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5).setDepth(6);this.floorItems.push({x:L,y:N,item:z,sprite:$})}}if(this.floorMutations.length>0){for(let N=0;N<this.floorMutations.length;N++){const z=this.floorMutations[N],U=sa(z),Y=this.add.text(8,64+N*14,`${z.icon} ${z.name}`,{fontSize:"8px",color:U,fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#00000088",padding:{x:3,y:1}}).setScrollFactor(0).setDepth(103).setInteractive();Y.on("pointerdown",()=>{this.showLog(`${z.name}: ${z.description}`)}),this.mutationHudTexts.push(Y)}const R=this.add.rectangle(J/2,ee/2,J*.85,30+this.floorMutations.length*22,0,.88).setScrollFactor(0).setDepth(300),H=[],L=this.add.text(J/2,ee/2-10-this.floorMutations.length*8,"Floor Mutation!",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(301);H.push(L);for(let N=0;N<this.floorMutations.length;N++){const z=this.floorMutations[N],U=sa(z),Y=this.add.text(J/2,ee/2+6+N*18-(this.floorMutations.length-1)*4,`${z.icon} [${z.name}] ${z.description}`,{fontSize:"9px",color:U,fontFamily:"monospace",backgroundColor:"#00000066",padding:{x:4,y:2}}).setOrigin(.5).setScrollFactor(0).setDepth(301);H.push(Y)}this.time.delayedCall(2500,()=>{R.destroy();for(const N of H)N.destroy()});for(const N of this.floorMutations)this.showLog(`Floor Mutation: ${N.name}  ${N.description}`)}this.minimapBg=this.add.graphics().setScrollFactor(0).setDepth(100),this.minimapBorder=this.add.graphics().setScrollFactor(0).setDepth(100),this.minimapGfx=this.add.graphics().setScrollFactor(0).setDepth(101),this.minimapExpanded=!1,this.minimapLegendTexts=[],this.createMinimap();const E=F*this.MINIMAP_TILE_SMALL+4,P=b*this.MINIMAP_TILE_SMALL+4;this.minimapHitZone=this.add.zone(this.MINIMAP_X_SMALL-2+E/2,this.MINIMAP_Y_SMALL-2+P/2,E,P).setScrollFactor(0).setDepth(102).setInteractive(),this.minimapHitZone.on("pointerdown",()=>{this.minimapExpanded=!this.minimapExpanded,this.updateMinimapHitZone(),this.updateMinimap()}),this.fullMapOpen=!1,this.fullMapUI=[],this.mapButton=this.add.text(this.MINIMAP_X_SMALL-2,this.MINIMAP_Y_SMALL+b*this.MINIMAP_TILE_SMALL+10,"MAP",{fontSize:"8px",color:"#60a5fa",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#1a1a2ecc",padding:{x:4,y:2}}).setScrollFactor(0).setDepth(110).setInteractive(),this.mapButton.on("pointerdown",()=>{this.fullMapOpen||this.openFullMap()}),this.createDPad(),this.createSkillButtons();const A=J/2,D=ee-55,W={fontSize:"18px",color:"#aab0c8",fontFamily:"monospace",backgroundColor:"#1a1a2ecc",padding:{x:6,y:4}};this.pickupBtnPhaser=this.add.text(A-22,D-5,"",W).setOrigin(.5).setScrollFactor(0).setDepth(110).setInteractive().on("pointerdown",()=>this.pickupItem()),this.quickSlotBtn=this.add.text(A+22,D-5,"",W).setOrigin(.5).setScrollFactor(0).setDepth(110).setInteractive().on("pointerdown",()=>this.useQuickSlot()),this.updateQuickSlotLabel(),this.teamBtnPhaser=this.add.text(A,D+22,"Team",{fontSize:"10px",color:"#60a5fa",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#1a1a2ecc",padding:{x:8,y:3}}).setOrigin(.5).setScrollFactor(0).setDepth(110).setInteractive().on("pointerdown",()=>this.openTeamPanel());const V=this.MINIMAP_X_SMALL+30,K=this.MINIMAP_Y_SMALL+70;if(this.add.text(V,K,"",{fontSize:"20px",color:"#aab0c8",fontFamily:"monospace",backgroundColor:"#1a1a2ecc",padding:{x:6,y:2}}).setOrigin(.5).setScrollFactor(0).setDepth(110).setInteractive().on("pointerdown",()=>this.openHamburgerMenu()),this.bossEntity){const R=(J-200)/2,H=56;this.bossHpBg=this.add.graphics().setScrollFactor(0).setDepth(100),this.bossHpBg.fillStyle(1710638,.95),this.bossHpBg.fillRoundedRect(R-4,H-4,208,24,4),this.bossHpBg.lineStyle(2,16729156),this.bossHpBg.strokeRoundedRect(R-4,H-4,208,24,4),this.bossHpBar=this.add.graphics().setScrollFactor(0).setDepth(101),this.bossNameText=this.add.text(J/2,H-2,` ${this.bossEntity.name} `,{fontSize:"10px",color:"#ff6666",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5,1).setScrollFactor(0).setDepth(102)}if(this.legendaryEntity&&!this.bossEntity){const R=(J-200)/2,H=56;this.legendaryHpBg=this.add.graphics().setScrollFactor(0).setDepth(100),this.legendaryHpBg.fillStyle(1710638,.95),this.legendaryHpBg.fillRoundedRect(R-4,H-4,208,24,4),this.legendaryHpBg.lineStyle(2,16766720),this.legendaryHpBg.strokeRoundedRect(R-4,H-4,208,24,4),this.legendaryHpBar=this.add.graphics().setScrollFactor(0).setDepth(101),this.legendaryNameText=this.add.text(J/2,H-2,` ${this.legendaryEntity.name} `,{fontSize:"10px",color:"#ffd700",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5,1).setScrollFactor(0).setDepth(102),this.legendaryParticleGraphics=this.add.graphics().setDepth(12),this.legendaryParticleTimer=this.time.addEvent({delay:200,loop:!0,callback:()=>{if(!this.legendaryEntity||!this.legendaryEntity.alive||!this.legendaryEntity.sprite||!this.legendaryParticleGraphics)return;this.legendaryParticleGraphics.clear();const L=this.legendaryEntity.sprite.x,N=this.legendaryEntity.sprite.y;for(let z=0;z<4;z++){const U=L+(Math.random()-.5)*24,Y=N+(Math.random()-.5)*24,$=.4+Math.random()*.6;this.legendaryParticleGraphics.fillStyle(16766720,$),this.legendaryParticleGraphics.fillCircle(U,Y,1+Math.random())}}})}this.initDomHud(),this.updateHUD(),this.bossEntity?this.showLog(` BOSS FLOOR! ${this.bossEntity.name} awaits!`):this.legendaryEntity&&this.legendaryEncounter?(this.cameras.main.fadeOut(500,0,0,0),this.time.delayedCall(500,()=>{this.cameras.main.fadeIn(500,0,0,0)}),Pi(),this.time.delayedCall(600,()=>{this.showLog("A powerful presence approaches...")}),this.time.delayedCall(1500,()=>{this.legendaryEncounter&&this.showLog(this.legendaryEncounter.flavorText)}),this.time.delayedCall(2500,()=>{this.legendaryEntity&&this.showLog(` ${this.legendaryEntity.name} appeared! `)})):this.gauntletActive?(this.showLog(`${this.dungeonDef.name} B${this.currentFloor}F`),this.time.delayedCall(300,()=>this.startGauntlet())):this.showLog(`${this.dungeonDef.name} B${this.currentFloor}F`),this.currentFloor===1&&Ye().totalRuns<=1&&(this.time.delayedCall(1500,()=>{this.showLog("Tip: Use the D-Pad to move. Walk into enemies to attack!")}),this.time.delayedCall(4500,()=>{this.showLog("Tip: Find the stairs (gold marker) to go deeper!")}))}tileToPixelX(F){return F*re+re/2}tileToPixelY(F){return F*re+re/2}createAnimations(F,b,I){if(!this.textures.exists(`${F}-walk`)||!this.textures.exists(`${F}-idle`)){console.warn(`[DungeonScene] Missing sprite textures for "${F}", skipping animations`);return}for(let B=0;B<8;B++)this.anims.create({key:`${F}-walk-${B}`,frames:this.anims.generateFrameNumbers(`${F}-walk`,{start:B*b,end:B*b+b-1}),frameRate:10,repeat:-1}),this.anims.create({key:`${F}-idle-${B}`,frames:this.anims.generateFrameNumbers(`${F}-idle`,{start:B*I,end:B*I+I-1}),frameRate:5,repeat:-1})}createDPad(){this.dpadUI.forEach(a=>a.destroy()),this.dpadUI=[];const b=this.dpadSide==="right"?J-70:70,I=ee-70,B=50,O=18,f=this.add.graphics().setScrollFactor(0).setDepth(108);f.fillStyle(0,.4),f.fillCircle(b,I,B+5),f.lineStyle(2,3359061,.6),f.strokeCircle(b,I,B+5),this.dpadUI.push(f);const x=[{dir:ge.Up,label:"",dx:0,dy:-1},{dir:ge.UpRight,label:"",dx:.7,dy:-.7},{dir:ge.Right,label:"",dx:1,dy:0},{dir:ge.DownRight,label:"",dx:.7,dy:.7},{dir:ge.Down,label:"",dx:0,dy:1},{dir:ge.DownLeft,label:"",dx:-.7,dy:.7},{dir:ge.Left,label:"",dx:-1,dy:0},{dir:ge.UpLeft,label:"",dx:-.7,dy:-.7}];for(const a of x){const t=b+a.dx*(B-5),s=I+a.dy*(B-5),l=this.add.circle(t,s,O,1710638,.7).setScrollFactor(0).setDepth(109).setInteractive(),i=this.add.text(t,s,a.label,{fontSize:"12px",color:"#8899bb",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(110);l.on("pointerdown",()=>{if(this.autoExploring){this.stopAutoExplore("Stopped.");return}this.turnManager.isBusy||!this.player.alive||this.gameOver||this.bagOpen||this.menuOpen||this.settingsOpen||this.teamPanelOpen||this.eventOpen||this.fullMapOpen||(i.setColor("#fbbf24"),this.time.delayedCall(150,()=>i.setColor("#8899bb")),this.handlePlayerAction(a.dir))}),this.dpadUI.push(l,i)}const e=this.add.circle(b,I,14,3359061,.8).setScrollFactor(0).setDepth(109).setInteractive(),o=this.add.text(b,I,"",{fontSize:"10px",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(110);e.on("pointerdown",()=>{if(this.autoExploring){this.stopAutoExplore("Stopped.");return}this.turnManager.isBusy||!this.player.alive||this.gameOver||this.bagOpen||this.menuOpen||this.settingsOpen||this.teamPanelOpen||this.eventOpen||this.fullMapOpen||(o.setAlpha(.5),this.time.delayedCall(150,()=>o.setAlpha(1)),this.turnManager.executeTurn(()=>Promise.resolve(),[...this.getAllyActions(),...this.getEnemyActions()]).then(()=>{this.recoverPP(this.player),this.tickBelly(),this.tickWeather(),this.tickEntityStatus(this.player),this.updateHUD()}))}),this.dpadUI.push(e,o);const m=b,n=I+B+22,r=this.add.text(m,n,"Auto",{fontSize:"10px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#1a1a2ecc",padding:{x:8,y:3}}).setOrigin(.5).setScrollFactor(0).setDepth(110).setInteractive();r.on("pointerdown",a=>{a.event.stopPropagation(),this.startAutoExplore()}),this.dpadUI.push(r)}createSkillButtons(){const b=this.dpadSide==="right"?10:J-120,I=ee-95,B=58,O=38,f=this.player.skills,x=[{col:0,row:0},{col:1,row:0},{col:0,row:1},{col:1,row:1}];for(let e=0;e<4;e++){const o=f[e],m=x[e],n=b+m.col*B,r=I+m.row*O,a=o?`${o.name}
${o.currentPp}/${o.pp}`:"---",t=o&&o.currentPp>0?"#667eea":"#444460",s=this.add.text(n,r,a,{fontSize:"9px",color:t,fontFamily:"monospace",fixedWidth:B-4,align:"center",backgroundColor:"#1a1a2e",padding:{x:2,y:3}}).setScrollFactor(0).setDepth(110).setInteractive();s.on("pointerdown",()=>{if(!(this.turnManager.isBusy||!this.player.alive||this.gameOver||this.fullMapOpen)){if(!o||o.currentPp<=0){this.showLog("No PP left!");return}this.showSkillPreview(e)}}),this.skillButtons.push(s)}}showSkillPreview(F){this.clearSkillPreview();const b=this.player.skills[F];if(!b)return;this.skillPreviewActive=!0;const I=this.player.facing,B=Ls(b.range,this.player.tileX,this.player.tileY,I,this.dungeon.terrain,this.dungeon.width,this.dungeon.height);for(const n of B){const r=n.x*re+re/2,a=n.y*re+re/2,t=this.add.rectangle(r,a,re+2,re+2,16737792,.25).setDepth(7);this.skillPreviewUI.push(t);const s=this.add.rectangle(r,a,re-2,re-2,16498468,.6).setDepth(8);this.skillPreviewUI.push(s),this.tweens.add({targets:s,alpha:{from:.6,to:.35},duration:500,yoyo:!0,repeat:-1})}const O=this.add.text(J/2,42,`${b.name} (${b.type}) Pow:${b.power} PP:${b.currentPp}/${b.pp}`,{fontSize:"10px",color:"#fbbf24",fontFamily:"monospace",backgroundColor:"#000000cc",padding:{x:6,y:3}}).setOrigin(.5).setScrollFactor(0).setDepth(200);this.skillPreviewUI.push(O);const x=this.dpadSide==="right"?10:J-120,e=ee-95;for(const n of this.skillButtons)n.setVisible(!1);const o=this.add.text(x,e+8,"  OK  ",{fontSize:"14px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#1a3a2e",padding:{x:8,y:8}}).setScrollFactor(0).setDepth(210).setInteractive(),m=this.add.text(x+60,e+8,"Cancel",{fontSize:"14px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#3a1a1e",padding:{x:8,y:8}}).setScrollFactor(0).setDepth(210).setInteractive();this.skillPreviewUI.push(o,m),o.on("pointerdown",()=>{this.clearSkillPreview(),this.handleSkillUse(F,this.player.facing)}),m.on("pointerdown",()=>{this.clearSkillPreview()})}clearSkillPreview(){for(const F of this.skillPreviewUI)F.destroy();this.skillPreviewUI=[],this.skillPreviewActive=!1;for(const F of this.skillButtons)F.setVisible(!0)}updateSkillButtons(){const F=this.player.skills;for(let b=0;b<this.skillButtons.length;b++){const I=F[b];if(!I)continue;const O=I.currentPp>0?"#667eea":"#444460";this.skillButtons[b].setText(`${I.name}
${I.currentPp}/${I.pp}`),this.skillButtons[b].setColor(O),this.skillButtons[b].setBackgroundColor("#1a1a2e")}}revealArea(F,b,I){const{width:B,height:O}=this.dungeon;for(let f=0;f<O;f++)for(let x=0;x<B;x++)this.currentlyVisible[f][x]=!1;for(let f=-I;f<=I;f++)for(let x=-I;x<=I;x++){const e=F+x,o=b+f;e>=0&&e<B&&o>=0&&o<O&&(this.visited[o][e]=!0,this.currentlyVisible[o][e]=!0)}for(const f of this.allies)if(f.alive)for(let x=-2;x<=2;x++)for(let e=-2;e<=2;e++){const o=f.tileX+e,m=f.tileY+x;o>=0&&o<B&&m>=0&&m<O&&(this.currentlyVisible[m][o]=!0,this.visited[m][o]=!0)}}getMinimapParams(){const{width:F,height:b}=this.dungeon;if(this.minimapExpanded){const f=this.MINIMAP_TILE_LARGE,x=F*f,e=b*f,o=Math.floor((J-x)/2),m=Math.floor((ee-e)/2)-10;return{t:f,mx:o,my:m,totalW:x,totalH:e}}const I=this.MINIMAP_TILE_SMALL,B=F*I,O=b*I;return{t:I,mx:this.MINIMAP_X_SMALL,my:this.MINIMAP_Y_SMALL,totalW:B,totalH:O}}updateMinimapHitZone(){const{mx:F,my:b,totalW:I,totalH:B}=this.getMinimapParams(),O=4;this.minimapHitZone.setPosition(F-O/2+I/2,b-O/2+B/2),this.minimapHitZone.setSize(I+O,B+O)}createMinimap(){this.updateMinimap()}drawMinimapContent(F,b,I,B,O){const{width:f,height:x,terrain:e}=this.dungeon,o=this.currentTheme.floorColor,m=St(o,.35);for(let r=0;r<x;r++)for(let a=0;a<f;a++)if(e[r][a]===xe.GROUND){if(this.currentlyVisible[r][a])F.fillStyle(o,.9);else if(this.visited[r][a])F.fillStyle(m,.6);else continue;F.fillRect(I+a*b,B+r*b,b,b)}if(this.shopRoom&&!this.shopClosed){const r=this.shopRoom;let a=!1;for(let t=r.y;t<r.y+r.h&&!a;t++)for(let s=r.x;s<r.x+r.w&&!a;s++)this.visited[t]?.[s]&&(a=!0);if(a){F.fillStyle(12592851,.2);for(let t=r.y;t<r.y+r.h;t++)for(let s=r.x;s<r.x+r.w;s++)this.visited[t]?.[s]&&this.dungeon.terrain[t]?.[s]===xe.GROUND&&F.fillRect(I+s*b,B+t*b,b,b);F.lineStyle(O?2:1,12592851,.8),F.strokeRect(I+r.x*b-1,B+r.y*b-1,r.w*b+2,r.h*b+2)}}if(this.eventRoom&&!this.eventTriggered){const r=this.eventRoom;let a=!1;for(let t=r.y;t<r.y+r.h&&!a;t++)for(let s=r.x;s<r.x+r.w&&!a;s++)this.visited[t]?.[s]&&(a=!0);a&&(F.lineStyle(O?2:1,2282478,.8),F.strokeRect(I+r.x*b-1,B+r.y*b-1,r.w*b+2,r.h*b+2))}if(this.puzzleRoom&&!this.puzzleSolved&&!this.puzzleFailed){const r=this.puzzleRoom;let a=!1;for(let t=r.y;t<r.y+r.h&&!a;t++)for(let s=r.x;s<r.x+r.w&&!a;s++)this.visited[t]?.[s]&&(a=!0);if(a){F.fillStyle(2282478,.25);for(let t=r.y;t<r.y+r.h;t++)for(let s=r.x;s<r.x+r.w;s++)this.visited[t]?.[s]&&this.dungeon.terrain[t]?.[s]===xe.GROUND&&F.fillRect(I+s*b,B+t*b,b,b);F.lineStyle(O?2:1,2282478,.9),F.strokeRect(I+r.x*b-1,B+r.y*b-1,r.w*b+2,r.h*b+2)}}const{stairsPos:n}=this.dungeon;if(this.visited[n.y]?.[n.x]){F.fillStyle(6333946,1);const r=O?1:0;F.fillRect(I+n.x*b-r,B+n.y*b-r,b+r*2,b+r*2)}F.fillStyle(16638023,1);for(const r of this.floorItems)this.visited[r.y]?.[r.x]&&F.fillRect(I+r.x*b,B+r.y*b,b,b);for(const r of this.floorTraps)r.revealed&&(F.fillStyle(r.trap.hexColor,1),F.fillRect(I+r.x*b,B+r.y*b,b,b));for(const r of this.floorHazards)this.visited[r.y]?.[r.x]&&(F.fillStyle(r.def.color,.8),F.fillRect(I+r.x*b,B+r.y*b,b,b));for(const r of this.enemies)r.alive&&this.currentlyVisible[r.tileY]?.[r.tileX]&&(r.isBoss?(F.fillStyle(16720418,1),F.fillRect(I+r.tileX*b-1,B+r.tileY*b-1,b+2,b+2)):(F.fillStyle(15680580,1),F.fillRect(I+r.tileX*b,B+r.tileY*b,b,b)));F.fillStyle(4906624,1);for(const r of this.allies)r.alive&&F.fillRect(I+r.tileX*b,B+r.tileY*b,b,b);F.fillStyle(4906624,1),F.fillRect(I+this.player.tileX*b-1,B+this.player.tileY*b-1,b+2,b+2)}getExplorationPercent(){const{width:F,height:b,terrain:I}=this.dungeon;let B=0,O=0;for(let f=0;f<b;f++)for(let x=0;x<F;x++)I[f][x]===xe.GROUND&&(B++,this.visited[f][x]&&O++);return B>0?Math.floor(O/B*100):0}updateMinimap(){if(!this.minimapVisible)return;const{width:F,height:b}=this.dungeon,{t:I,mx:B,my:O,totalW:f,totalH:x}=this.getMinimapParams(),e=this.minimapExpanded,o=4,m=Ne(this.floorMutations,ye.DarkFloor)?Ge(ye.DarkFloor,"sightRadius"):4;this.revealArea(this.player.tileX,this.player.tileY,m),this.minimapBg.clear(),this.minimapBg.fillStyle(0,e?.92:.85),this.minimapBg.fillRoundedRect(B-o,O-o,f+o*2,x+o*2,4),this.minimapBorder.clear(),this.minimapBorder.lineStyle(1,e?5596842:3359846,e?.9:.6),this.minimapBorder.strokeRoundedRect(B-o,O-o,f+o*2,x+o*2,4),this.minimapGfx.clear(),this.drawMinimapContent(this.minimapGfx,I,B,O,e),this.updateMinimapLegend(e,B,O,f,x,o),this.updateExplorationText(B,O,f,x,o),this.fullMapOpen&&this.drawFullMapOverlay()}updateExplorationText(F,b,I,B,O){const f=this.getExplorationPercent(),x=this.minimapExpanded;let e=b+B+O+2;x&&(e+=30),(!this.explorationText||!this.explorationText.scene)&&(this.explorationText=this.add.text(0,0,"",{fontSize:"7px",fontFamily:"monospace",color:"#aab0c8"}).setScrollFactor(0).setDepth(102)),f>=100?(this.explorationText.setText("FULLY EXPLORED"),this.explorationText.setColor("#fbbf24")):(this.explorationText.setText(`Explored: ${f}%`),this.explorationText.setColor("#aab0c8")),this.explorationText.setPosition(F+I/2,e),this.explorationText.setOrigin(.5,0),this.explorationText.setVisible(!x)}updateMinimapLegend(F,b,I,B,O,f){for(const x of this.minimapLegendTexts)x.destroy();if(this.minimapLegendTexts=[],F){const x=I+O+f+4,e={fontSize:"8px",fontFamily:"monospace",color:"#aab0c8"},o=[{color:"#4ade80",label:"You"},{color:"#4ade80",label:"Ally"},{color:"#ef4444",label:"Foe"},{color:"#fde047",label:"Item"},{color:"#60a5fa",label:"Stairs"},{color:"#a855f7",label:"Trap"}],m=42,n=3,r=Math.ceil(o.length/n),a=n*m,t=b+Math.floor((B-a)/2);for(let c=0;c<o.length;c++){const u=c%n,p=Math.floor(c/n),g=t+u*m,y=x+p*12,{color:v,label:S}=o[c],w=this.add.text(g,y,` ${S}`,{...e,color:v}).setScrollFactor(0).setDepth(102);this.minimapLegendTexts.push(w)}const s=this.getExplorationPercent(),l=s>=100?"#fbbf24":"#aab0c8",i=s>=100?"FULLY EXPLORED":`Explored: ${s}%`,h=this.add.text(b+B/2,x+r*12+2,i,{fontSize:"8px",fontFamily:"monospace",color:l,fontStyle:s>=100?"bold":"normal"}).setOrigin(.5,0).setScrollFactor(0).setDepth(102);this.minimapLegendTexts.push(h);const d=this.add.text(b+B/2,x+r*12+14,"tap map to close",{fontSize:"7px",fontFamily:"monospace",color:"#555570"}).setOrigin(.5,0).setScrollFactor(0).setDepth(102);this.minimapLegendTexts.push(d)}else{const x=[{color:4906624},{color:15680580},{color:16638023},{color:6333946}],e=5,o=b+B-x.length*e+1,m=I+O+f+1;for(let n=0;n<x.length;n++){const r=o+n*e,a="#"+x[n].color.toString(16).padStart(6,"0"),t=this.add.text(r,m,"",{fontSize:"5px",fontFamily:"monospace",color:a}).setScrollFactor(0).setDepth(102);this.minimapLegendTexts.push(t)}}}openFullMap(){if(this.fullMapOpen)return;this.fullMapOpen=!0;const F=500;this.fullMapOverlayBg=this.add.graphics().setScrollFactor(0).setDepth(F),this.fullMapOverlayBg.fillStyle(0,.85),this.fullMapOverlayBg.fillRect(0,0,J,ee),this.fullMapGfx=this.add.graphics().setScrollFactor(0).setDepth(F+1),this.drawFullMapOverlay();const b=this.add.text(J/2,12,`${this.dungeonDef.name} B${this.currentFloor}F`,{fontSize:"10px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(F+2);this.fullMapUI.push(b);const I=ee-40,B=[{color:"#4ade80",label:"Player"},{color:"#ef4444",label:"Enemy"},{color:"#fde047",label:"Item"},{color:"#60a5fa",label:"Stairs"}],O=J/2-B.length*45/2;for(let n=0;n<B.length;n++){const{color:r,label:a}=B[n],t=this.add.text(O+n*45,I,` ${a}`,{fontSize:"8px",fontFamily:"monospace",color:r}).setScrollFactor(0).setDepth(F+2);this.fullMapUI.push(t)}const f=this.getExplorationPercent(),x=f>=100?"#fbbf24":"#aab0c8",e=f>=100?"FULLY EXPLORED":`Explored: ${f}%`,o=this.add.text(J/2,I+14,e,{fontSize:"8px",fontFamily:"monospace",color:x,fontStyle:f>=100?"bold":"normal"}).setOrigin(.5,0).setScrollFactor(0).setDepth(F+2);this.fullMapUI.push(o);const m=this.add.text(J/2,ee-10,"tap anywhere to close",{fontSize:"7px",fontFamily:"monospace",color:"#555570"}).setOrigin(.5).setScrollFactor(0).setDepth(F+2);this.fullMapUI.push(m),this.fullMapCloseZone=this.add.zone(J/2,ee/2,J,ee).setScrollFactor(0).setDepth(F+3).setInteractive(),this.fullMapCloseZone.on("pointerdown",()=>{this.closeFullMap()})}drawFullMapOverlay(){if(!this.fullMapGfx)return;this.fullMapGfx.clear();const{width:F,height:b}=this.dungeon,I=this.MINIMAP_TILE_FULLMAP,B=F*I,O=b*I,f=Math.floor((J-B)/2),x=Math.floor((ee-O)/2);this.fullMapGfx.fillStyle(1118498,.9),this.fullMapGfx.fillRoundedRect(f-4,x-4,B+8,O+8,4),this.fullMapGfx.lineStyle(1,5596842,.8),this.fullMapGfx.strokeRoundedRect(f-4,x-4,B+8,O+8,4),this.drawMinimapContent(this.fullMapGfx,I,f,x,!0)}closeFullMap(){if(this.fullMapOpen){this.fullMapOpen=!1,this.fullMapOverlayBg&&(this.fullMapOverlayBg.destroy(),this.fullMapOverlayBg=null),this.fullMapGfx&&(this.fullMapGfx.destroy(),this.fullMapGfx=null),this.fullMapCloseZone&&(this.fullMapCloseZone.destroy(),this.fullMapCloseZone=null);for(const F of this.fullMapUI)F&&F.destroy&&F.destroy();this.fullMapUI=[]}}updateHUD(){const F=this.player.stats,b=F.hp/F.maxHp;this.hpBarFill.clear();const I=b>.5?4906624:b>.25?16498468:15680580,B=Math.max(0,Math.floor(98*b));this.hpBarFill.fillStyle(I,1),this.hpBarFill.fillRoundedRect(39,9,B,8,2);const O=this.maxBelly>0?this.belly/this.maxBelly:0;this.bellyBarFill.clear();const f=O>.5?4906624:O>.2?16498468:15680580,x=Math.max(0,Math.floor(98*O));this.bellyBarFill.fillStyle(f,1),this.bellyBarFill.fillRoundedRect(39,20,x,4,1),this.bellyText.setText(`${Math.floor(this.belly)}/${this.maxBelly}`);const e=this.ngPlusLevel>0?` NG+${this.ngPlusLevel}`:"";this.floorText.setText(`${this.dungeonDef.name}  B${this.currentFloor}F${e}`),this.floorText.setPosition(40,27),this.hpText.setText(`${F.hp}/${F.maxHp}`);const o=this.player.ability?fi[this.player.ability]?.name??"":"",m=o?` [${o}]`:"",n=this.gold>0?` ${this.gold}G`:"";if(this.turnText.setText(`Lv.${F.level}${n} T${this.turnManager.turn}${m}`),this.updateStatusHud(),this.updateStatusTint(this.player),this.bossEntity&&this.bossHpBar)if(this.bossHpBar.clear(),this.bossEntity.alive){const r=this.bossEntity.stats.hp/this.bossEntity.stats.maxHp,a=200,t=(J-a)/2,s=56,l=r>.5?16729156:r>.25?16746564:16763904,i=Math.max(0,Math.floor(a*r));this.bossHpBar.fillStyle(l,1),this.bossHpBar.fillRoundedRect(t,s,i,12,3),this.bossNameText&&this.bossNameText.setText(` ${this.bossEntity.name}  ${this.bossEntity.stats.hp}/${this.bossEntity.stats.maxHp} `)}else this.bossHpBg&&this.bossHpBg.setVisible(!1),this.bossHpBar.setVisible(!1),this.bossNameText&&this.bossNameText.setVisible(!1);if(this.legendaryEntity&&this.legendaryHpBar)if(this.legendaryHpBar.clear(),this.legendaryEntity.alive){const r=this.legendaryEntity.stats.hp/this.legendaryEntity.stats.maxHp,a=200,t=(J-a)/2,s=56,l=r>.5?16766720:r>.25?16755200:16737792,i=Math.max(0,Math.floor(a*r));this.legendaryHpBar.fillStyle(l,1),this.legendaryHpBar.fillRoundedRect(t,s,i,12,3),this.legendaryNameText&&this.legendaryNameText.setText(` ${this.legendaryEntity.name}  ${this.legendaryEntity.stats.hp}/${this.legendaryEntity.stats.maxHp} `)}else this.legendaryHpBg&&this.legendaryHpBg.setVisible(!1),this.legendaryHpBar.setVisible(!1),this.legendaryNameText&&this.legendaryNameText.setVisible(!1),this.legendaryParticleTimer&&(this.legendaryParticleTimer.destroy(),this.legendaryParticleTimer=null),this.legendaryParticleGraphics&&(this.legendaryParticleGraphics.destroy(),this.legendaryParticleGraphics=null);if(this.challengeMode==="speedrun"&&this.challengeBadgeText){const r=this.challengeTurnLimit-this.turnManager.turn,a=r<=20?"#ef4444":"#fbbf24";this.challengeBadgeText.setText(`[SPEED RUN] ${r} turns left`),this.challengeBadgeText.setColor(a),r<=0&&!this.gameOver&&(this.showLog("Time's up! You ran out of turns!"),this.showGameOver())}this.updateSkillButtons(),this.updateMinimap(),this.syncDomHud()}openHamburgerMenu(){if(this.menuOpen){this.closeMenu();return}if(this.bagOpen||this.settingsOpen||this.shopOpen||this.teamPanelOpen||this.eventOpen||this.fullMapOpen)return;Ct(),this.menuOpen=!0;const F=this.add.rectangle(J/2,ee/2,J,ee,0,.5).setScrollFactor(0).setDepth(150).setInteractive();F.on("pointerdown",()=>this.closeMenu()),this.menuUI.push(F);const b=[{label:"Bag",icon:"",action:()=>{this.closeMenu(),this.openBag()}},{label:"Save",icon:"",action:()=>{this.closeMenu(),this.saveGame()}},{label:"Give Up",icon:"",action:()=>{this.closeMenu(),this.confirmGiveUp()}},{label:"Settings",icon:"",action:()=>{this.closeMenu(),this.openSettings()}}];this.playerInShopRoom&&!this.shopClosed&&this.shopItems.some(e=>e.price>0)&&b.splice(1,0,{label:"Shop",icon:"",action:()=>{this.closeMenu(),this.openShopUI()}});const I=J-130,B=90,O=120,f=28+b.length*36,x=this.add.graphics().setScrollFactor(0).setDepth(151);x.fillStyle(1710638,.95),x.fillRoundedRect(I,B,O,f,8),x.lineStyle(1,3359061),x.strokeRoundedRect(I,B,O,f,8),this.menuUI.push(x),b.forEach((e,o)=>{const m=B+14+o*36,n=this.add.text(I+O/2,m,`${e.icon} ${e.label}`,{fontSize:"13px",color:"#e0e0e0",fontFamily:"monospace",backgroundColor:"#2a2a4e",padding:{x:10,y:6},fixedWidth:O-12,align:"center"}).setOrigin(.5,0).setScrollFactor(0).setDepth(152).setInteractive();n.on("pointerover",()=>n.setColor("#fbbf24")),n.on("pointerout",()=>n.setColor("#e0e0e0")),n.on("pointerdown",()=>e.action()),this.menuUI.push(n)})}closeMenu(){It(),this.menuOpen=!1,this.menuUI.forEach(F=>F.destroy()),this.menuUI=[]}openTeamPanel(){if(this.teamPanelOpen){this.closeTeamPanel();return}if(this.bagOpen||this.menuOpen||this.settingsOpen||this.shopOpen||this.eventOpen||this.gameOver||this.fullMapOpen)return;if(this.allies.filter(b=>b.alive).length===0){this.showLog("No allies in your team.");return}Ct(),this.teamPanelOpen=!0,this.teamPanelScroll=0,this.buildTeamPanelUI()}closeTeamPanel(){It(),this.teamPanelOpen=!1,this.teamPanelUI.forEach(F=>F.destroy()),this.teamPanelUI=[]}swapAllyOrder(F,b){F<0||b<0||F>=this.allies.length||b>=this.allies.length||([this.allies[F],this.allies[b]]=[this.allies[b],this.allies[F]],this.buildTeamPanelUI())}dismissAlly(F){this.allies=this.allies.filter(b=>b!==F),this.allEntities=this.allEntities.filter(b=>b!==F),F.sprite&&(F.sprite.destroy(),F.sprite=void 0),F.alive=!1,this.showLog(`${F.name} was dismissed from the team.`),this.allies.filter(b=>b.alive).length===0?this.closeTeamPanel():this.buildTeamPanelUI(),this.updateHUD()}buildTeamPanelUI(){this.teamPanelUI.forEach(l=>l.destroy()),this.teamPanelUI=[];const F=this.allies.filter(l=>l.alive),b=this.add.rectangle(J/2,ee/2,J,ee,0,.6).setScrollFactor(0).setDepth(150).setInteractive();b.on("pointerdown",()=>this.closeTeamPanel()),this.teamPanelUI.push(b);const I=J-16,B=118,O=36,f=36,x=F.length*B,e=O+x+f,o=8,m=Math.max(8,Math.floor((ee-e)/2)),n=this.add.graphics().setScrollFactor(0).setDepth(151);n.fillStyle(1710638,.97),n.fillRoundedRect(o,m,I,e,8),n.lineStyle(2,6333946,.8),n.strokeRoundedRect(o,m,I,e,8),this.teamPanelUI.push(n);const r=this.add.text(J/2,m+14,"Party Formation",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(152);this.teamPanelUI.push(r);const a=[{tactic:ze.FollowMe,label:"Follow"},{tactic:ze.GoAfterFoes,label:"Attack"},{tactic:ze.StayHere,label:"Stay"},{tactic:ze.Scatter,label:"Scatter"}];F.forEach((l,i)=>{const h=m+O+i*B,d=l.allyTactic??ze.FollowMe,c=this.allies.indexOf(l),u=Ca(c>=0?c:i);if(i>0){const q=this.add.graphics().setScrollFactor(0).setDepth(152);q.lineStyle(1,6333946,.25),q.lineBetween(o+8,h,o+I-8,h),this.teamPanelUI.push(q)}const p=`#${i+1}`,g=this.add.text(o+8,h+4,p,{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setScrollFactor(0).setDepth(152);this.teamPanelUI.push(g);const y=`${l.name}  Lv.${l.stats.level}`,v=this.add.text(o+30,h+4,y,{fontSize:"10px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"}).setScrollFactor(0).setDepth(152);this.teamPanelUI.push(v);const S=22,w=o+I-58;if(i>0){const q=this.add.text(w,h+2,"Up",{fontSize:"8px",color:"#60a5fa",fontFamily:"monospace",backgroundColor:"#2a2a4e",padding:{x:3,y:2}}).setScrollFactor(0).setDepth(153).setInteractive();q.on("pointerdown",j=>{j.event?.stopPropagation(),this.swapAllyOrder(c,c-1)}),q.on("pointerover",()=>q.setColor("#fbbf24")),q.on("pointerout",()=>q.setColor("#60a5fa")),this.teamPanelUI.push(q)}if(i<F.length-1){const q=this.add.text(w+S+4,h+2,"Dn",{fontSize:"8px",color:"#60a5fa",fontFamily:"monospace",backgroundColor:"#2a2a4e",padding:{x:3,y:2}}).setScrollFactor(0).setDepth(153).setInteractive();q.on("pointerdown",j=>{j.event?.stopPropagation(),this.swapAllyOrder(c,c+1)}),q.on("pointerover",()=>q.setColor("#fbbf24")),q.on("pointerout",()=>q.setColor("#60a5fa")),this.teamPanelUI.push(q)}const T=h+20,C=l.stats.hp/l.stats.maxHp,M=80,E=o+10,P=this.add.graphics().setScrollFactor(0).setDepth(152);P.fillStyle(3355477,1),P.fillRoundedRect(E,T,M,7,2),this.teamPanelUI.push(P);const A=this.add.graphics().setScrollFactor(0).setDepth(153),D=C>.5?4906624:C>.25?16498468:15680580,W=Math.max(0,Math.floor(M*C));A.fillStyle(D,1),A.fillRoundedRect(E,T,W,7,2),this.teamPanelUI.push(A);const V=this.add.text(E+M+4,T-1,`${l.stats.hp}/${l.stats.maxHp}`,{fontSize:"8px",color:"#aab0c8",fontFamily:"monospace"}).setScrollFactor(0).setDepth(152);this.teamPanelUI.push(V);const K=l.types.join("/"),X=this.add.text(E+M+60,T-1,K,{fontSize:"8px",color:"#a78bfa",fontFamily:"monospace"}).setScrollFactor(0).setDepth(152);this.teamPanelUI.push(X);const R=this.add.text(o+I-10,T-1,`${u}tile`,{fontSize:"7px",color:"#6b7280",fontFamily:"monospace"}).setOrigin(1,0).setScrollFactor(0).setDepth(152);this.teamPanelUI.push(R);const H=T+14,L=l.skills.length>0?l.skills.map(q=>q.name).join(", "):"(no skills)",N=this.add.text(o+10,H,L,{fontSize:"8px",color:"#8899bb",fontFamily:"monospace",wordWrap:{width:I-24}}).setScrollFactor(0).setDepth(152);this.teamPanelUI.push(N);const z=H+16,U=62,Y=a.length*U+(a.length-1)*3,$=o+(I-Y)/2;a.forEach((q,j)=>{const _=$+j*(U+3),te=d===q.tactic,se=te?"#2a4a3e":"#2a2a4e",ie=te?"#4ade80":"#8899bb",ne=this.add.text(_+U/2,z,q.label,{fontSize:"8px",color:ie,fontFamily:"monospace",fontStyle:te?"bold":"normal",backgroundColor:se,padding:{x:3,y:3},fixedWidth:U-4,align:"center"}).setOrigin(.5,0).setScrollFactor(0).setDepth(153).setInteractive();if(ne.on("pointerdown",he=>{he.event?.stopPropagation(),l.allyTactic=q.tactic,this.buildTeamPanelUI()}),ne.on("pointerover",()=>{te||ne.setColor("#fbbf24")}),ne.on("pointerout",()=>{te||ne.setColor(ie)}),this.teamPanelUI.push(ne),te){const he=this.add.graphics().setScrollFactor(0).setDepth(152);he.lineStyle(1,4906624,.8),he.strokeRoundedRect(_+1,z-1,U-2,20,3),this.teamPanelUI.push(he)}});const Z=z+24,Q=this.add.text(o+I-12,Z,"Dismiss",{fontSize:"8px",color:"#ef4444",fontFamily:"monospace",backgroundColor:"#3a1a2e",padding:{x:4,y:2}}).setOrigin(1,0).setScrollFactor(0).setDepth(153).setInteractive();Q.on("pointerdown",q=>{q.event?.stopPropagation(),this.dismissAlly(l)}),Q.on("pointerover",()=>Q.setColor("#fbbf24")),Q.on("pointerout",()=>Q.setColor("#ef4444")),this.teamPanelUI.push(Q)});const t=m+e-28,s=this.add.text(J/2,t,"[ Close ]",{fontSize:"12px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#3a1a2e",padding:{x:14,y:5}}).setOrigin(.5).setScrollFactor(0).setDepth(153).setInteractive();s.on("pointerdown",()=>this.closeTeamPanel()),s.on("pointerover",()=>s.setColor("#fbbf24")),s.on("pointerout",()=>s.setColor("#ef4444")),this.teamPanelUI.push(s)}confirmGiveUp(){if(this.gameOver)return;Ct();const F=[],b=this.add.rectangle(J/2,ee/2,J,ee,0,.7).setScrollFactor(0).setDepth(160).setInteractive();F.push(b);const I=this.add.text(J/2,ee/2-50,"Give Up?",{fontSize:"18px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(161);F.push(I);const B=this.add.text(J/2,ee/2-20,`All items & progress
from this run will be lost!`,{fontSize:"10px",color:"#fbbf24",fontFamily:"monospace",align:"center"}).setOrigin(.5).setScrollFactor(0).setDepth(161);F.push(B);const O=this.add.text(J/2-50,ee/2+25,"[Yes]",{fontSize:"14px",color:"#ef4444",fontFamily:"monospace",backgroundColor:"#1a1a2ecc",padding:{x:12,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(161).setInteractive(),f=this.add.text(J/2+50,ee/2+25,"[No]",{fontSize:"14px",color:"#4ade80",fontFamily:"monospace",backgroundColor:"#1a1a2ecc",padding:{x:12,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(161).setInteractive();F.push(O,f);const x=()=>{F.forEach(e=>e.destroy())};f.on("pointerdown",()=>{It(),x()}),O.on("pointerdown",()=>{x(),this.gameOver=!0,Tt(),wt(),this.cameras.main.fadeOut(500),this.time.delayedCall(600,()=>{this.scene.start("HubScene",{gold:0,cleared:!1,bestFloor:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,dungeonId:this.dungeonDef.id,starter:this.starterId,challengeMode:this.challengeMode??void 0,pokemonSeen:Array.from(this.seenSpecies),inventory:ut(this.inventory)})})})}openSettings(){if(this.settingsOpen)return;Ct(),this.settingsOpen=!0;const F=this.add.rectangle(J/2,ee/2,J,ee,0,.85).setScrollFactor(0).setDepth(150).setInteractive();this.settingsUI.push(F);const b=this.add.text(J/2,35," Settings",{fontSize:"16px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(151);this.settingsUI.push(b);let I=80;const B=this.add.text(J/2,I,` BGM Volume: ${Math.round(zt()*100)}%`,{fontSize:"12px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(151);this.settingsUI.push(B),I+=28;const O=60,f=J-120,x=I,e=this.add.graphics().setScrollFactor(0).setDepth(151);e.fillStyle(3359061,1),e.fillRoundedRect(O,x,f,20,4),this.settingsUI.push(e);const o=this.add.graphics().setScrollFactor(0).setDepth(152),m=()=>{o.clear(),o.fillStyle(6717162,1),o.fillRoundedRect(O,x,f*zt(),20,4)};m(),this.settingsUI.push(o);const n=this.add.rectangle(O+f/2,x+10,f,20,0,0).setScrollFactor(0).setDepth(153).setInteractive();n.on("pointerdown",w=>{const T=Math.max(0,Math.min(1,(w.x-O)/f));pa(T),B.setText(` BGM Volume: ${Math.round(T*100)}%`),m()}),this.settingsUI.push(n),I+=40;const r=this.add.text(J/2,I,` SFX Volume: ${Math.round(Ot()*100)}%`,{fontSize:"12px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(151);this.settingsUI.push(r),I+=28;const a=60,t=J-120,s=I,l=this.add.graphics().setScrollFactor(0).setDepth(151);l.fillStyle(3359061,1),l.fillRoundedRect(a,s,t,20,4),this.settingsUI.push(l);const i=this.add.graphics().setScrollFactor(0).setDepth(152),h=()=>{i.clear(),i.fillStyle(4906624,1),i.fillRoundedRect(a,s,t*Ot(),20,4)};h(),this.settingsUI.push(i);const d=this.add.rectangle(a+t/2,s+10,t,20,0,0).setScrollFactor(0).setDepth(153).setInteractive();d.on("pointerdown",w=>{const T=Math.max(0,Math.min(1,(w.x-a)/t));ua(T),r.setText(` SFX Volume: ${Math.round(T*100)}%`),h()}),this.settingsUI.push(d),I+=50;const c=this.add.text(J/2,I,"D-Pad Position",{fontSize:"12px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(151);this.settingsUI.push(c),I+=28;const u=this.dpadSide==="left"?"#fbbf24":"#667eea",p=this.dpadSide==="right"?"#fbbf24":"#667eea",g=this.add.text(J/2-55,I," Left",{fontSize:"12px",color:u,fontFamily:"monospace",backgroundColor:this.dpadSide==="left"?"#3a3a5e":"#1a1a2e",padding:{x:10,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(152).setInteractive(),y=this.add.text(J/2+55,I,"Right ",{fontSize:"12px",color:p,fontFamily:"monospace",backgroundColor:this.dpadSide==="right"?"#3a3a5e":"#1a1a2e",padding:{x:10,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(152).setInteractive(),v=()=>{g.setColor(this.dpadSide==="left"?"#fbbf24":"#667eea"),g.setBackgroundColor(this.dpadSide==="left"?"#3a3a5e":"#1a1a2e"),y.setColor(this.dpadSide==="right"?"#fbbf24":"#667eea"),y.setBackgroundColor(this.dpadSide==="right"?"#3a3a5e":"#1a1a2e")};g.on("pointerdown",()=>{this.dpadSide="left";try{localStorage.setItem("poke-roguelite-dpadSide","left")}catch{}v(),this.rebuildControls()}),y.on("pointerdown",()=>{this.dpadSide="right";try{localStorage.setItem("poke-roguelite-dpadSide","right")}catch{}v(),this.rebuildControls()}),this.settingsUI.push(g,y),I+=50;const S=this.add.text(J/2,ee-60,"[Close]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(151).setInteractive();S.on("pointerdown",()=>this.closeSettings()),this.settingsUI.push(S)}closeSettings(){It(),this.settingsOpen=!1,this.settingsUI.forEach(F=>F.destroy()),this.settingsUI=[]}rebuildControls(){this.createDPad(),this.skillButtons.forEach(F=>F.destroy()),this.skillButtons=[],this.createSkillButtons(),this.domHud&&ks(this.domHud,this.dpadSide,J,ee)}initDomHud(){const F=Wr();this.domHud=F,this.domHudElement=this.add.dom(J/2,ee/2,F.container),this.domHudElement.setScrollFactor(0),this.domHudElement.setDepth(500),ks(F,this.dpadSide,J,ee);for(let b=0;b<4;b++)F.skillBtns[b].addEventListener("pointerdown",I=>{if(I.stopPropagation(),this.turnManager.isBusy||!this.player.alive||this.gameOver||this.fullMapOpen)return;const B=this.player.skills[b];if(!B||B.currentPp<=0){this.showLog("No PP left!");return}this.showSkillPreview(b)});F.pickupBtn.addEventListener("pointerdown",b=>{b.stopPropagation(),this.pickupItem()}),F.quickSlotBtn.addEventListener("pointerdown",b=>{b.stopPropagation(),this.useQuickSlot()}),F.teamBtn.addEventListener("pointerdown",b=>{b.stopPropagation(),this.openTeamPanel()}),this.floorText.setAlpha(0),this.hpText.setAlpha(0),this.turnText.setAlpha(0),this.timerText.setAlpha(0),this.bellyText.setAlpha(0),this.logText.setAlpha(0),this.chainHudText&&this.chainHudText.setAlpha(0);for(const b of this.skillButtons)b.setAlpha(0).disableInteractive();this.quickSlotBtn&&this.quickSlotBtn.setAlpha(0).disableInteractive(),this.pickupBtnPhaser&&this.pickupBtnPhaser.setAlpha(0).disableInteractive(),this.teamBtnPhaser&&this.teamBtnPhaser.setAlpha(0).disableInteractive()}syncDomHud(){const F=this.domHud;if(!F)return;F.floorLabel.textContent=this.floorText.text,F.hpLabel.textContent=this.hpText.text,F.turnLabel.textContent=this.turnText.text,F.timerLabel.textContent=this.timerText.text,F.bellyLabel.textContent=this.bellyText.text;const b=this.logMessages.join(`
`);b?(F.logBox.textContent=b,F.logBox.style.display="block"):F.logBox.style.display="none",this.chainHudText&&this.chainHudText.text&&this.scoreChain.currentMultiplier>1?(F.chainLabel.textContent=this.chainHudText.text,F.chainLabel.style.color=this.chainHudText.style.color?.toString()??"#999999",F.chainLabel.style.display="block"):F.chainLabel.style.display="none";const I=this.player.skills;for(let B=0;B<4;B++){const O=I[B],f=F.skillBtns[B];if(!O)f.textContent="---",f.style.color="#444460";else{const x=O.currentPp>0;f.textContent=`${O.name} ${O.currentPp}/${O.pp}`,f.style.color=x?"#c0c8e0":"#444460",f.style.borderColor=x?"#333355":"#222240"}}if(!this.lastUsedItemId)F.quickSlotBtn.textContent="",F.quickSlotBtn.style.color="#555570";else{const B=this.inventory.find(O=>O.item.id===this.lastUsedItemId);if(!B)F.quickSlotBtn.textContent="",F.quickSlotBtn.style.color="#555570";else{const O=B.item.category==="berry"?"":B.item.category==="seed"?"":"",f=B.count>1?`${B.count}`:"";F.quickSlotBtn.textContent=`${O}${f}`,F.quickSlotBtn.style.color="#4ade80"}}}showLog(F){this.logMessages.push(F),this.logMessages.length>4&&this.logMessages.shift();const b=this.logMessages.join(`
`);this.logText.setText(b),this.domHud&&(this.domHud.logBox.textContent=b,this.domHud.logBox.style.display="block");const I=[...this.logMessages];this.time.delayedCall(4e3,()=>{if(this.logMessages.length>0&&this.logMessages[0]===I[0]){this.logMessages.shift();const B=this.logMessages.join(`
`);this.logText.setText(B),this.domHud&&(B?this.domHud.logBox.textContent=B:this.domHud.logBox.style.display="none")}})}pickupItem(){if(this.turnManager.isBusy||!this.player.alive||this.gameOver)return;if(this.challengeMode==="noItems"){this.showLog("Items are forbidden!");return}const F=this.shopTiles.find(O=>O.x===this.player.tileX&&O.y===this.player.tileY);if(F&&!this.shopClosed){const O=this.shopItems[F.shopIdx];if(O&&O.price>0){const f=We[O.itemId];if(f){if(this.inventory.length<rt){const e=this.inventory.find(o=>o.item.id===O.itemId&&f.stackable);e?e.count++:this.inventory.push({item:f,count:1})}F.sprite.destroy(),F.priceTag.destroy();const x=this.shopTiles.indexOf(F);x>=0&&this.shopTiles.splice(x,1),this.shopItems[F.shopIdx]={itemId:"",price:0,stock:0},this.triggerShopTheft(),this.updateHUD();return}}}const b=this.floorItems.findIndex(O=>O.x===this.player.tileX&&O.y===this.player.tileY);if(b===-1){this.showLog("Nothing here to pick up.");return}if(this.inventory.length>=rt){this.showLog("Inventory is full!");return}const I=this.floorItems[b],B=this.inventory.find(O=>O.item.id===I.item.id&&I.item.stackable);B?B.count++:this.inventory.push({item:I.item,count:1}),Ei(),I.sprite.destroy(),this.floorItems.splice(b,1),this.showLog(`Picked up ${I.item.name}!`),this.updateQuickSlotLabel(),gt(this.scoreChain,"itemPickup"),this.chainActionThisTurn=!0,this.updateChainHUD()}toggleBag(){this.bagOpen?this.closeBag():this.openBag()}openBag(){if(this.turnManager.isBusy||this.gameOver||this.menuOpen||this.settingsOpen||this.teamPanelOpen||this.eventOpen||this.fullMapOpen)return;Ct(),this.bagOpen=!0;const F=this.add.rectangle(J/2,ee/2,J,ee,0,.8).setScrollFactor(0).setDepth(150).setInteractive();this.bagUI.push(F);const b=this.add.text(J/2,30," Bag ",{fontSize:"14px",color:"#fbbf24",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(151);this.bagUI.push(b);const I=this.playerInShopRoom&&!this.shopClosed;if(this.inventory.length===0){const O=this.add.text(J/2,ee/2,"Empty",{fontSize:"12px",color:"#666680",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(151);this.bagUI.push(O)}else this.inventory.forEach((O,f)=>{const x=60+f*32,e=O.item.category==="berry"?"":O.item.category==="seed"?"":"",o=O.count>1?` x${O.count}`:"",m=I?` (Sell: ${Hs(O.item.id,this.currentFloor)}G)`:"",n=this.add.text(20,x,`${e} ${O.item.name}${o}${m}`,{fontSize:"11px",color:"#e0e0e0",fontFamily:"monospace",backgroundColor:"#1a1a3e",padding:{x:4,y:4},fixedWidth:I?250:200}).setScrollFactor(0).setDepth(151).setInteractive(),r=this.add.text(I?280:230,x,"[Use]",{fontSize:"11px",color:"#4ade80",fontFamily:"monospace",padding:{x:4,y:4}}).setScrollFactor(0).setDepth(151).setInteractive(),a=this.add.text(20,x+16,O.item.description,{fontSize:"9px",color:"#666680",fontFamily:"monospace"}).setScrollFactor(0).setDepth(151);if(r.on("pointerdown",()=>{this.useItem(f),this.closeBag()}),this.bagUI.push(n,r,a),I){const t=this.add.text(320,x,"[Sell]",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",padding:{x:4,y:4}}).setScrollFactor(0).setDepth(151).setInteractive();t.on("pointerdown",()=>{this.closeBag(),this.showSellPrompt(f)}),this.bagUI.push(t)}});const B=this.add.text(J/2,ee-50,"[Close]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(151).setInteractive();B.on("pointerdown",()=>this.closeBag()),this.bagUI.push(B),F.on("pointerdown",()=>this.closeBag())}closeBag(){It(),this.bagOpen=!1,this.bagUI.forEach(F=>F.destroy()),this.bagUI=[]}useQuickSlot(){if(this.turnManager.isBusy||!this.player.alive||this.gameOver||this.fullMapOpen)return;if(!this.lastUsedItemId){this.showLog("No recent item. Use an item from the Bag first.");return}const F=this.inventory.findIndex(b=>b.item.id===this.lastUsedItemId);if(F===-1){this.showLog(`No ${this.lastUsedItemId} left!`);return}this.useItem(F),this.closeBag()}updateQuickSlotLabel(){if(!this.quickSlotBtn)return;if(!this.lastUsedItemId){this.quickSlotBtn.setText(""),this.quickSlotBtn.setColor("#555570");return}const F=this.inventory.find(B=>B.item.id===this.lastUsedItemId);if(!F){this.quickSlotBtn.setText(""),this.quickSlotBtn.setColor("#555570");return}const b=F.item.category==="berry"?"":F.item.category==="seed"?"":"",I=F.count>1?`${F.count}`:"";this.quickSlotBtn.setText(`${b}${I}`),this.quickSlotBtn.setColor("#4ade80")}useItem(F){if(this.challengeMode==="noItems"){this.showLog("Items are forbidden!");return}const b=this.inventory[F];if(!b)return;const I=b.item;switch(this.lastUsedItemId=I.id,Ci(),I.id){case"oranBerry":{const B=Math.min(30,this.player.stats.maxHp-this.player.stats.hp);this.player.stats.hp+=B,this.showLog(`Used Oran Berry! Restored ${B} HP.`),this.player.sprite&&this.showHealPopup(this.player.sprite.x,this.player.sprite.y,B),this.scoreChain.currentMultiplier>1&&(ct(this.scoreChain),this.showLog("Chain reset (healed)."),this.updateChainHUD());break}case"sitrusBerry":{const B=Math.floor(this.player.stats.maxHp*.5),O=Math.min(B,this.player.stats.maxHp-this.player.stats.hp);this.player.stats.hp+=O,this.showLog(`Used Sitrus Berry! Restored ${O} HP.`),this.player.sprite&&this.showHealPopup(this.player.sprite.x,this.player.sprite.y,O),this.scoreChain.currentMultiplier>1&&(ct(this.scoreChain),this.showLog("Chain reset (healed)."),this.updateChainHUD());break}case"pechaberry":{this.player.statusEffects=[],this.showLog("Used Pecha Berry! Status cleared.");break}case"reviveSeed":{this.showLog("Revive Seed will activate if you faint.");return}case"blastSeed":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.stats.hp=Math.max(0,e.stats.hp-40),this.flashEntity(e,2),this.showLog(`Blast Seed hit ${e.name}! 40 dmg!`),this.checkDeath(e)):this.showLog("Blast Seed missed! No enemy in front.");break}case"sleepSeed":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.statusEffects.push({type:ce.Paralyze,turnsLeft:5}),this.showLog(`Sleep Seed hit ${e.name}! Paralyzed!`)):this.showLog("Sleep Seed missed! No enemy in front.");break}case"escapeOrb":{this.showLog("Used Escape Orb! Escaped the dungeon!"),this.gameOver=!0,wt();const B=1+(this.heldItemEffect.goldBonus??0)/100,O=1+this.ngPlusBonuses.goldPercent/100,f=this.enchantment?.id==="abundance"?1.15:1,x=Ne(this.floorMutations,ye.GoldenAge)?Ge(ye.GoldenAge,"goldMult"):1,e=Math.floor(Fi(this.currentFloor,this.enemiesDefeated,!1)*this.modifierEffects.goldMult*B*this.difficultyMods.goldMult*O*f*x);this.cameras.main.fadeOut(500),this.time.delayedCall(600,()=>{this.scene.start("HubScene",{gold:e,cleared:!1,bestFloor:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,dungeonId:this.dungeonDef.id,starter:this.starterId,challengeMode:this.challengeMode??void 0,pokemonSeen:Array.from(this.seenSpecies),inventory:ut(this.inventory)})});break}case"luminousOrb":{this.showLog("Used Luminous Orb! Floor layout revealed!");break}case"allPowerOrb":{this.player.statusEffects.push({type:ce.AtkUp,turnsLeft:10}),this.player.statusEffects.push({type:ce.DefUp,turnsLeft:10}),nt(),this.showLog("Used All-Power Orb! ATK & DEF boosted!");break}case"apple":{const B=Math.min(50,this.maxBelly-this.belly);this.belly+=B,this.resetBellyWarnings(),this.showLog(`Ate an Apple! Belly +${B}. (${Math.floor(this.belly)}/${this.maxBelly})`);break}case"bigApple":{this.belly=this.maxBelly,this.resetBellyWarnings(),this.showLog("Ate a Big Apple! Belly fully restored!");break}case"grimyFood":{const B=Math.min(30,this.maxBelly-this.belly);if(this.belly+=B,this.resetBellyWarnings(),this.showLog(`Ate Grimy Food... Belly +${B}. (${Math.floor(this.belly)}/${this.maxBelly})`),Math.random()<.5)this.player.statusEffects.some(O=>O.type===ce.Burn)||(this.player.statusEffects.push({type:ce.Burn,turnsLeft:5}),this.showLog("Ugh! The food was bad... You got burned!"));else{const O=Math.max(1,Math.floor(this.player.stats.maxHp*.1));this.player.stats.hp=Math.max(1,this.player.stats.hp-O),this.player.sprite&&this.showDamagePopup(this.player.sprite.x,this.player.sprite.y,O,.8),this.showLog(`The food was rotten! Lost ${O} HP!`)}break}case"warpOrb":{let B=0;for(const O of this.enemies){if(!O.alive)continue;const f=this.findWalkableTile();f&&(O.tileX=f.x,O.tileY=f.y,O.sprite&&O.sprite.setPosition(this.tileToPixelX(f.x),this.tileToPixelY(f.y)),B++)}this.showLog(`Used Warp Orb! ${B} enemies warped away!`);break}case"foeHoldOrb":{let B=0;for(const O of this.enemies)O.alive&&(O.statusEffects.push({type:ce.Paralyze,turnsLeft:5}),B++);this.showLog(`Used Foe-Hold Orb! ${B} enemies paralyzed!`);break}case"maxElixir":{for(const B of this.player.skills)B.currentPp=B.pp;this.showLog("Used Max Elixir! All PP restored!");break}case"warpSeed":{const B=this.findWalkableTile();B?(this.player.tileX=B.x,this.player.tileY=B.y,this.player.sprite&&this.player.sprite.setPosition(this.tileToPixelX(B.x),this.tileToPixelY(B.y)),this.showLog("Used Warp Seed! Warped to a new location!")):this.showLog("Warp Seed fizzled...");break}case"stunSeed":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.statusEffects.push({type:ce.Paralyze,turnsLeft:3}),this.showLog(`Stun Seed hit ${e.name}! Stunned for 3 turns!`)):this.showLog("Stun Seed missed! No enemy in front.");break}case"healSeed":{this.player.statusEffects=[];const B=Math.min(20,this.player.stats.maxHp-this.player.stats.hp);this.player.stats.hp+=B,this.showLog(`Used Heal Seed! Status cleared, restored ${B} HP.`),this.player.sprite&&this.showHealPopup(this.player.sprite.x,this.player.sprite.y,B);break}case"vanishOrb":{this.player.statusEffects.push({type:ce.DefUp,turnsLeft:10}),this.player.sprite&&this.player.sprite.setAlpha(.3),this.showLog("Used Vanish Orb! You became invisible for 10 turns!");break}case"reviveSeed":{const B=this.allies.find(O=>!O.alive);if(B)B.alive=!0,B.stats.hp=Math.floor(B.stats.maxHp/2),B.sprite&&B.sprite.setAlpha(1),this.showLog(`Used Revive Seed! ${B.speciesId} was revived!`);else{this.showLog("No fainted allies to revive.");return}break}case"allPowerOrb":{this.player.statusEffects.push({type:ce.AtkUp,turnsLeft:10}),this.player.statusEffects.push({type:ce.DefUp,turnsLeft:10}),nt(),this.showLog("Used All-Power Orb! ATK and DEF boosted for 10 turns!");break}case"escapeOrb":{this.showLog("Used Escape Orb! Escaping the dungeon..."),this.time.delayedCall(800,()=>{this.scene.start("HubScene",{gold:0,cleared:!1,bestFloor:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,dungeonId:this.dungeonDef.id,starter:this.starterId,challengeMode:this.challengeMode??void 0,pokemonSeen:Array.from(this.seenSpecies),inventory:ut(this.inventory)})});break}case"pebble":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.stats.hp=Math.max(0,e.stats.hp-15),this.flashEntity(e,2),this.showLog(`Pebble hit ${e.name}! 15 dmg!`),this.checkDeath(e)):this.showLog("Pebble missed! No enemy in front.");break}case"gravelrock":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.stats.hp=Math.max(0,e.stats.hp-25),this.flashEntity(e,2),this.showLog(`Gravelrock hit ${e.name}! 25 dmg!`),this.checkDeath(e)):this.showLog("Gravelrock missed! No enemy in front.");break}case"xAttack":{this.player.statusEffects.push({type:ce.AtkUp,turnsLeft:10}),nt(),this.showLog("Used X-Attack! ATK boosted for 10 turns!");break}case"xDefend":{this.player.statusEffects.push({type:ce.DefUp,turnsLeft:10}),nt(),this.showLog("Used X-Defend! DEF boosted for 10 turns!");break}case"megaOranBerry":{const B=Math.min(80,this.player.stats.maxHp-this.player.stats.hp);this.player.stats.hp+=B,this.showLog(`Used Mega Oran Berry! Restored ${B} HP.`),this.player.sprite&&this.showHealPopup(this.player.sprite.x,this.player.sprite.y,B),this.scoreChain.currentMultiplier>1&&(ct(this.scoreChain),this.showLog("Chain reset (healed)."),this.updateChainHUD());break}case"megaSitrusBerry":{const B=Math.min(150,this.player.stats.maxHp-this.player.stats.hp);this.player.stats.hp+=B,this.showLog(`Used Mega Sitrus Berry! Restored ${B} HP.`),this.player.sprite&&this.showHealPopup(this.player.sprite.x,this.player.sprite.y,B),this.scoreChain.currentMultiplier>1&&(ct(this.scoreChain),this.showLog("Chain reset (healed)."),this.updateChainHUD());break}case"goldenApple":{const B=Math.min(200,this.maxBelly-this.belly);this.belly+=B,this.resetBellyWarnings(),this.showLog(`Ate a Golden Apple! Belly +${B}. (${Math.floor(this.belly)}/${this.maxBelly})`);break}case"crystalPebble":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.stats.hp=Math.max(0,e.stats.hp-30),this.flashEntity(e,2),this.showLog(`Crystal Pebble hit ${e.name}! 30 dmg!`),this.checkDeath(e)):this.showLog("Crystal Pebble missed! No enemy in front.");break}case"meteorRock":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.stats.hp=Math.max(0,e.stats.hp-50),this.flashEntity(e,2),this.showLog(`Meteor Rock hit ${e.name}! 50 dmg!`),this.checkDeath(e)):this.showLog("Meteor Rock missed! No enemy in front.");break}case"autoReviver":{this.showLog("Auto Reviver will activate instantly if you faint.");return}case"megaElixir":{for(const B of this.player.skills)B.currentPp=B.pp+10;this.showLog("Used Mega Elixir! All PP restored + 10 bonus PP!");break}case"megaBlastSeed":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.stats.hp=Math.max(0,e.stats.hp-80),this.flashEntity(e,2),this.showLog(`Mega Blast Seed hit ${e.name}! 80 dmg!`),this.checkDeath(e)):this.showLog("Mega Blast Seed missed! No enemy in front.");break}case"deepSleepSeed":{const B=Ie[this.player.facing],O=Be[this.player.facing],f=this.player.tileX+B,x=this.player.tileY+O,e=this.enemies.find(o=>o.alive&&o.tileX===f&&o.tileY===x);e?(e.statusEffects.push({type:ce.Paralyze,turnsLeft:8}),this.showLog(`Deep Sleep Seed hit ${e.name}! Deep sleep for 8 turns!`)):this.showLog("Deep Sleep Seed missed! No enemy in front.");break}case"megaXAttack":{this.player.statusEffects.push({type:ce.AtkUp,turnsLeft:15}),nt(),this.showLog("Used Mega X-Attack! ATK greatly boosted for 15 turns!");break}case"megaXDefend":{this.player.statusEffects.push({type:ce.DefUp,turnsLeft:15}),nt(),this.showLog("Used Mega X-Defend! DEF greatly boosted for 15 turns!");break}default:{if(I.tmSkillId){this.useTM(F,I);return}this.showLog(`Used ${I.name}.`);break}}b.count--,b.count<=0&&this.inventory.splice(F,1),this.updateHUD(),this.updateQuickSlotLabel()}findWalkableTile(){const{terrain:F,width:b,height:I}=this.dungeon;for(let B=0;B<200;B++){const O=Math.floor(Math.random()*b),f=Math.floor(Math.random()*I);if(F[f][O]===xe.GROUND&&!this.allEntities.some(x=>x.alive&&x.tileX===O&&x.tileY===f))return{x:O,y:f}}return null}useTM(F,b){if(!b.tmSkillId)return;const I=Me[b.tmSkillId];if(!I){this.showLog("Invalid TM!");return}let B=0,O=1/0;for(let e=0;e<this.player.skills.length;e++)this.player.skills[e].power<O&&(O=this.player.skills[e].power,B=e);const f=this.player.skills[B].name;this.player.skills[B]=st(Me[b.tmSkillId]),this.showLog(`Learned ${I.name}! (replaced ${f})`);const x=this.inventory[F];x.count--,x.count<=0&&this.inventory.splice(F,1),this.updateHUD()}tryRevive(){const F=this.inventory.findIndex(I=>I.item.id==="autoReviver");if(F!==-1){const I=this.inventory[F];return I.count--,I.count<=0&&this.inventory.splice(F,1),this.player.stats.hp=Math.floor(this.player.stats.maxHp*.75),this.player.alive=!0,this.player.sprite&&(this.player.sprite.setAlpha(1),this.player.sprite.setTint(16768324),this.time.delayedCall(500,()=>{this.player.sprite&&this.player.sprite.clearTint()})),this.cameras.main.flash(400,255,215,0),this.showLog("Auto Reviver activated! Instantly restored to 75% HP!"),!0}const b=this.inventory.findIndex(I=>I.item.id==="reviveSeed");if(b!==-1){const I=this.inventory[b];return I.count--,I.count<=0&&this.inventory.splice(b,1),this.player.stats.hp=Math.floor(this.player.stats.maxHp*.5),this.player.alive=!0,this.player.sprite&&(this.player.sprite.setAlpha(1),this.player.sprite.setTint(4521796),this.time.delayedCall(500,()=>{this.player.sprite&&this.player.sprite.clearTint()})),this.showLog("Revive Seed activated! Restored to 50% HP!"),!0}if(this.enchantment?.id==="phoenix"&&!this.phoenixUsed){if(this.phoenixUsed=!0,this.player.stats.hp=Math.floor(this.player.stats.maxHp*.25),this.player.alive=!0,this.player.sprite){this.player.sprite.setAlpha(1),this.cameras.main.flash(600,255,180,50),this.cameras.main.shake(400,.015),this.player.sprite.setTint(16729088),this.time.delayedCall(150,()=>{this.player.sprite&&this.player.sprite.setTint(16746496)}),this.time.delayedCall(300,()=>{this.player.sprite&&this.player.sprite.setTint(16763904)}),this.time.delayedCall(500,()=>{this.player.sprite&&this.player.sprite.setTint(16777215)}),this.time.delayedCall(700,()=>{this.player.sprite&&this.player.sprite.clearTint()});const I=this.player.sprite.x,B=this.player.sprite.y,O=this.add.text(I,B-10,"PHOENIX!",{fontSize:"16px",color:"#ff8800",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setDepth(310);this.tweens.add({targets:O,y:B-60,alpha:{from:1,to:0},scaleX:{from:1.3,to:.8},scaleY:{from:1.3,to:.8},duration:1200,onComplete:()=>O.destroy()})}return this.showLog("Phoenix enchantment activated! Revived at 25% HP!"),!0}return!1}saveGame(){this.gameOver||(ss({version:1,timestamp:Date.now(),floor:this.currentFloor,dungeonId:this.dungeonDef.id,hp:this.player.stats.hp,maxHp:this.player.stats.maxHp,level:this.player.stats.level,atk:this.player.stats.atk,def:this.player.stats.def,totalExp:this.totalExp,skills:wi(this.player.skills),inventory:ut(this.inventory),starter:this.starterId,challengeMode:this.challengeMode??void 0,modifiers:this.activeModifiers.length>0?this.activeModifiers.map(F=>F.id):void 0}),this.showLog("Game saved!"))}autoSave(){this.gameOver||ss({version:1,timestamp:Date.now(),floor:this.currentFloor,dungeonId:this.dungeonDef.id,hp:this.player.stats.hp,maxHp:this.player.stats.maxHp,level:this.player.stats.level,atk:this.player.stats.atk,def:this.player.stats.def,totalExp:this.totalExp,skills:wi(this.player.skills),inventory:ut(this.inventory),starter:this.starterId,challengeMode:this.challengeMode??void 0,modifiers:this.activeModifiers.length>0?this.activeModifiers.map(F=>F.id):void 0})}updateChainHUD(){if(!this.chainHudText||!this.chainHudBg)return;const F=this.scoreChain.currentMultiplier,b=Di(F);if(!b||F<=1){this.chainHudText.setAlpha(0),this.chainHudBg.clear(),this.lastChainTier="",this.domHud&&(this.domHud.chainLabel.style.display="none");return}const I=So(b),B=`[${b}] x${F.toFixed(1)}`;this.chainHudText.setText(B),this.chainHudText.setColor(I),this.chainHudText.setAlpha(0),this.domHud&&(this.domHud.chainLabel.textContent=B,this.domHud.chainLabel.style.color=I,this.domHud.chainLabel.style.display="block");const O=this.chainHudText.getBounds();if(this.chainHudBg.clear(),this.chainHudBg.fillStyle(0,.7),this.chainHudBg.fillRoundedRect(O.x-4,O.y-2,O.width+8,O.height+4,3),b!==this.lastChainTier&&this.lastChainTier!==""){this.tweens.add({targets:this.chainHudText,scaleX:1.4,scaleY:1.4,duration:150,yoyo:!0,ease:"Quad.easeOut"});const f=wo(b),x=f>>16&255,e=f>>8&255,o=f&255;this.cameras.main.flash(150,x,e,o)}this.lastChainTier=b}updateStatusHud(){for(const O of this.statusHudTexts)O.destroy();this.statusHudTexts=[];const F=this.player.statusEffects;if(F.length===0)return;let b=142;const I=8,B={[ce.Burn]:{label:"BRN",color:"#ff6644"},[ce.Paralyze]:{label:"PAR",color:"#ffdd44"},[ce.AtkUp]:{label:"ATK",color:"#ff8844"},[ce.DefUp]:{label:"DEF",color:"#4488ff"}};for(const O of F){const f=B[O.type];if(!f)continue;const x=this.add.text(b,I,`${f.label}${O.turnsLeft}`,{fontSize:"7px",color:f.color,fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#0a0a1ecc",padding:{x:2,y:1}}).setScrollFactor(0).setDepth(102);this.statusHudTexts.push(x),b+=x.width+3}}updateStatusTint(F){if(!F.sprite)return;const b=F.statusEffects.some(f=>f.type===ce.Burn),I=F.statusEffects.some(f=>f.type===ce.Paralyze),B=F.statusEffects.some(f=>f.type===ce.AtkUp),O=F.statusEffects.some(f=>f.type===ce.DefUp);b?F.sprite.setTint(16746564):I?F.sprite.setTint(16777028):B&&O?F.sprite.setTint(4521983):B?F.sprite.setTint(16729156):O?F.sprite.setTint(4474111):F.sprite.clearTint()}tickEntityStatus(F){F.statusEffects.some(B=>B.type===ce.Burn)&&F.alive&&(F.stats.hp=Math.max(0,F.stats.hp-5),F.sprite&&this.showDamagePopup(F.sprite.x,F.sprite.y,5,1),this.showLog(`${F.name} is hurt by its burn!`),F.stats.hp<=0&&(F.alive=!1));const I=tn(F);for(const B of I)this.showLog(B),F===this.player&&F.sprite&&this.showStatusPopup(F.sprite.x,F.sprite.y-16,B);this.updateStatusTint(F)}showStatusPopup(F,b,I){const B=this.add.text(F,b-8,I,{fontSize:"8px",color:"#88ff88",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#00000099",padding:{x:3,y:1}}).setOrigin(.5).setDepth(200);this.tweens.add({targets:B,y:b-30,alpha:0,duration:1200,ease:"Power2",onComplete:()=>B.destroy()})}setupStatusFlashAnimations(){for(const I of this.statusFlashTimers)I.destroy();this.statusFlashTimers=[];const F=this.time.addEvent({delay:2e3,loop:!0,callback:()=>{const I=[this.player,...this.allies,...this.enemies];for(const B of I)!B.alive||!B.sprite||B.statusEffects.some(O=>O.type===ce.Burn)&&(B.sprite.setTint(16733440),this.time.delayedCall(150,()=>{B.sprite&&B.alive&&this.updateStatusTint(B)}))}});this.statusFlashTimers.push(F);const b=this.time.addEvent({delay:2e3,startAt:1e3,loop:!0,callback:()=>{const I=[this.player,...this.allies,...this.enemies];for(const B of I){if(!B.alive||!B.sprite||!B.statusEffects.some(f=>f.type===ce.Paralyze))continue;const O=B.sprite.x;B.sprite.setTint(16776960),this.tweens.add({targets:B.sprite,x:O+2,duration:50,yoyo:!0,repeat:2,onComplete:()=>{B.sprite&&B.alive&&(B.sprite.x=O,this.updateStatusTint(B))}})}}});this.statusFlashTimers.push(b)}checkTraps(){const F=this.floorTraps.find(b=>b.x===this.player.tileX&&b.y===this.player.tileY&&!b.triggered);if(F){if(hr(),F.triggered=!0,F.revealed=!0,this.player.ability===be.RockHead){this.showLog(`Stepped on a ${F.trap.name}! Rock Head negated it!`),this.drawTrap(F),this.updateHUD();return}if(this.player.ability===be.Levitate&&(F.trap.type===tt.Spike||F.trap.type===tt.Warp||F.trap.type===tt.Blast)){this.showLog(`Stepped on a ${F.trap.name}! Levitate avoided it!`),this.drawTrap(F),this.updateHUD();return}switch(this.showLog(`Stepped on a ${F.trap.name}! ${F.trap.description}`),this.cameras.main.shake(150,.008),F.trap.type){case tt.Spike:{const b=Math.floor(this.player.stats.maxHp*.15);this.player.stats.hp=Math.max(1,this.player.stats.hp-b),this.player.sprite&&this.showDamagePopup(this.player.sprite.x,this.player.sprite.y,b,1),this.scoreChain.currentMultiplier>1&&(ct(this.scoreChain),this.showLog("Chain broken!"),this.updateChainHUD()),this.checkPlayerDeath();break}case tt.Poison:this.player.statusEffects.some(b=>b.type===ce.Burn)||(this.player.statusEffects.push({type:ce.Burn,turnsLeft:5}),this.showLog("You were burned!")),this.player.sprite&&this.player.sprite.setTint(11032055),this.time.delayedCall(300,()=>{this.player.sprite&&this.player.sprite.clearTint()});break;case tt.Warp:{const{terrain:b,width:I,height:B,stairsPos:O}=this.dungeon;let f,x,e=0;if(this.player.ability===be.RunAway){const o=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1}];let m=!1;for(const n of o){const r=O.x+n.x,a=O.y+n.y;if(r>=0&&r<I&&a>=0&&a<B&&b[a][r]===xe.GROUND&&!this.allEntities.some(t=>t!==this.player&&t.alive&&t.tileX===r&&t.tileY===a)){f=r,x=a,m=!0;break}}m||(f=O.x,x=O.y),this.showLog("Run Away warped you near the stairs!")}else do f=Math.floor(Math.random()*I),x=Math.floor(Math.random()*B),e++;while(e<200&&(b[x][f]!==xe.GROUND||this.allEntities.some(o=>o!==this.player&&o.alive&&o.tileX===f&&o.tileY===x)));this.player.tileX=f,this.player.tileY=x,this.player.sprite&&this.player.sprite.setPosition(this.tileToPixelX(f),this.tileToPixelY(x)),this.cameras.main.flash(200,100,100,255);break}case tt.Spin:{this.showLog("You got confused!"),this.player.statusEffects.some(b=>b.type===ce.Paralyze)||this.player.statusEffects.push({type:ce.Paralyze,turnsLeft:5}),this.cameras.main.shake(200,.01);break}case tt.Slowdown:{const b=Math.floor(this.player.stats.atk*.1);this.player.stats.atk=Math.max(1,this.player.stats.atk-b),this.showLog(`ATK reduced by ${b} for this floor!`),this.player.sprite&&this.player.sprite.setTint(16347926),this.time.delayedCall(400,()=>{this.player.sprite&&this.player.sprite.clearTint()});break}case tt.Blast:{const b=Math.floor(this.player.stats.maxHp*.25);this.player.stats.hp=Math.max(1,this.player.stats.hp-b),this.player.sprite&&this.showDamagePopup(this.player.sprite.x,this.player.sprite.y,b,1);for(const I of this.allEntities){if(I===this.player||!I.alive)continue;const B=Math.abs(I.tileX-F.x),O=Math.abs(I.tileY-F.y);if(B<=1&&O<=1){const f=Math.floor(I.stats.maxHp*.25);I.stats.hp=Math.max(1,I.stats.hp-f),I.sprite&&this.showDamagePopup(I.sprite.x,I.sprite.y,f,1),this.showLog(`${I.name} was caught in the blast!`)}}this.cameras.main.flash(200,255,50,50),this.checkPlayerDeath();break}case tt.Trip:if(this.inventory.length>0){const b=Math.floor(Math.random()*this.inventory.length),I=this.inventory[b];this.showLog(`Dropped ${I.item.name}!`),I.count--,I.count<=0&&this.inventory.splice(b,1)}else this.showLog("Nothing to drop!");break;case tt.Seal:{const b=this.player.skills.filter(I=>I.currentPp>0);if(b.length>0){const I=b[Math.floor(Math.random()*b.length)];I.currentPp=0,this.showLog(`${I.name} was sealed!`),this.player.sprite&&this.player.sprite.setTint(6514417),this.time.delayedCall(400,()=>{this.player.sprite&&this.player.sprite.clearTint()})}else this.showLog("No skills to seal!");break}}this.drawTrap(F),this.updateHUD()}}drawTrap(F){if(!F.revealed)return;const b=this.add.graphics(),I=F.x*re+re/2,B=F.y*re+re/2;b.fillStyle(F.trap.hexColor,.6),b.fillCircle(I,B,4),b.setDepth(3),this.trapGraphics.push(b)}revealNearbyTraps(){for(const F of this.floorTraps){if(F.revealed)continue;const b=Math.abs(F.x-this.player.tileX),I=Math.abs(F.y-this.player.tileY);b<=1&&I<=1&&(F.revealed=!0,this.drawTrap(F))}}renderHazardTiles(){for(const F of this.hazardGraphics)F.destroy();for(const F of this.hazardTweens)F.destroy();this.hazardGraphics=[],this.hazardTweens=[];for(const F of this.floorHazards){const b=this.add.graphics(),I=F.x*re,B=F.y*re;switch(b.fillStyle(F.def.color,.4),b.fillRect(I,B,re,re),b.setDepth(2),this.hazardGraphics.push(b),F.type){case xt.Lava:{const O=this.tweens.add({targets:b,alpha:{from:.6,to:1},duration:800+Math.random()*400,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});this.hazardTweens.push(O);break}case xt.Water:{const O=this.tweens.add({targets:b,alpha:{from:.5,to:.85},duration:1200+Math.random()*600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});this.hazardTweens.push(O);break}case xt.ToxicSwamp:{const O=this.tweens.add({targets:b,scaleX:{from:1,to:1.04},scaleY:{from:1,to:1.04},alpha:{from:.5,to:.8},duration:1e3+Math.random()*800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:Math.random()*1e3});this.hazardTweens.push(O);break}case xt.IcePatch:{const O=this.tweens.add({targets:b,alpha:{from:.55,to:.75},duration:2e3+Math.random()*1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});this.hazardTweens.push(O);break}case xt.Quicksand:{const O=this.tweens.add({targets:b,alpha:{from:.5,to:.8},duration:1500+Math.random()*500,yoyo:!0,repeat:-1,ease:"Quad.easeInOut"});this.hazardTweens.push(O);break}case xt.ElectricFloor:{const O=this.tweens.add({targets:b,alpha:{from:.3,to:.9},duration:200+Math.random()*200,yoyo:!0,repeat:-1,ease:"Stepped"});this.hazardTweens.push(O);break}}}}checkPlayerHazard(){this.checkEntityHazard(this.player,!0)}checkEntityHazard(F,b){if(!F.alive)return;const I=this.floorHazards.find(f=>f.x===F.tileX&&f.y===F.tileY);if(!I)return;const B=F.types;if(Bn(I.type,B)){b&&this.showLog(`${F.name} is immune to ${I.def.name}!`);return}if(b?this.showLog(`Stepped on ${I.def.name}!`):this.currentlyVisible[F.tileY]?.[F.tileX]&&this.showLog(`${F.name} stepped on ${I.def.name}!`),I.def.damage>0&&(F.stats.hp=Math.max(1,F.stats.hp-I.def.damage),F.sprite&&this.showDamagePopup(F.sprite.x,F.sprite.y,I.def.damage,1),F.sprite&&(F.sprite.setTint(I.def.color),this.time.delayedCall(300,()=>{F.sprite&&F.sprite.clearTint()}))),Math.random()<I.def.effectChance)switch(I.def.effect){case"slow":{F.statusEffects.some(f=>f.type===ce.Paralyze)||(F.statusEffects.push({type:ce.Paralyze,turnsLeft:1}),b&&this.showLog("Slowed by water!"));break}case"slide":{const f=Ie[F.facing],x=Be[F.facing];let e=F.tileX,o=F.tileY;const{terrain:m,width:n,height:r}=this.dungeon;for(let a=0;a<5;a++){const t=e+f,s=o+x;if(t<0||t>=n||s<0||s>=r||m[s][t]!==xe.GROUND||this.allEntities.some(l=>l!==F&&l.alive&&l.tileX===t&&l.tileY===s))break;e=t,o=s}(e!==F.tileX||o!==F.tileY)&&(F.tileX=e,F.tileY=o,F.sprite&&F.sprite.setPosition(this.tileToPixelX(e),this.tileToPixelY(o)),b&&(this.showLog("Slid on the ice!"),this.cameras.main.flash(150,170,220,255)));break}case"trap":{F.statusEffects.some(f=>f.type===ce.Paralyze)||(F.statusEffects.push({type:ce.Paralyze,turnsLeft:1}),b&&this.showLog("Trapped in quicksand!"));break}case"poison":{F.statusEffects.some(f=>f.type===ce.Burn)||(F.statusEffects.push({type:ce.Burn,turnsLeft:5}),b?this.showLog("Poisoned by toxic swamp!"):this.currentlyVisible[F.tileY]?.[F.tileX]&&this.showLog(`${F.name} was poisoned!`),F.sprite&&(F.sprite.setTint(11032055),this.time.delayedCall(300,()=>{F.sprite&&F.sprite.clearTint()})));break}case"paralyze":{F.statusEffects.some(f=>f.type===ce.Paralyze)||(F.statusEffects.push({type:ce.Paralyze,turnsLeft:3}),b?this.showLog("Paralyzed by electric floor!"):this.currentlyVisible[F.tileY]?.[F.tileX]&&this.showLog(`${F.name} was paralyzed!`),F.sprite&&(F.sprite.setTint(16772676),this.time.delayedCall(300,()=>{F.sprite&&F.sprite.clearTint()})));break}}b?this.checkPlayerDeath():F.stats.hp<=0&&(F.alive=!1),this.updateHUD()}tickBelly(){if(this.belly>0){const F=1-this.ngPlusBonuses.bellyDrainReduction/100,b=(.5+this.dungeonDef.difficulty*.1)*this.difficultyMods.bellyDrainMult*F,I=this.belly;this.belly=Math.max(0,this.belly-b),this.belly<=0?(this.belly=0,this.showLog("Your belly is empty! HP will drain each turn!"),this.bellyWarningShown=!0,this.bellyUrgentShown=!0):this.belly<=this.maxBelly*.1&&!this.bellyUrgentShown?(this.showLog("You're starving! Find food quickly!"),this.bellyUrgentShown=!0):this.belly<=this.maxBelly*.2&&I>this.maxBelly*.2&&!this.bellyWarningShown&&(this.showLog("Your belly is getting empty..."),this.bellyWarningShown=!0)}else{const F=Math.max(1,Math.floor(this.player.stats.maxHp*.02));this.player.stats.hp=Math.max(0,this.player.stats.hp-F),this.player.sprite&&this.showDamagePopup(this.player.sprite.x,this.player.sprite.y,F,.5),this.turnManager.turn%5===0&&this.showLog(`Starving! Took ${F} damage!`),this.checkPlayerDeath()}}resetBellyWarnings(){this.belly>this.maxBelly*.2?(this.bellyWarningShown=!1,this.bellyUrgentShown=!1):this.belly>this.maxBelly*.1&&(this.bellyUrgentShown=!1)}tickWeather(){if(this.floorTurns++,!this.chainActionThisTurn&&this.scoreChain.currentMultiplier>1&&xo(this.scoreChain)&&(this.showLog("Chain expired (idle)."),this.updateChainHUD()),this.chainActionThisTurn=!1,Ne(this.floorMutations,ye.RegenFloor)&&this.player.alive){const B=Ge(ye.RegenFloor,"regenInterval")||3,O=Ge(ye.RegenFloor,"regenAmount")||1;this.floorTurns>0&&this.floorTurns%B===0&&this.player.stats.hp<this.player.stats.maxHp&&(this.player.stats.hp=Math.min(this.player.stats.maxHp,this.player.stats.hp+O),this.player.sprite&&this.showDamagePopup(this.player.sprite.x,this.player.sprite.y,0,1,`+${O} Regen`))}if(Ne(this.floorMutations,ye.CursedFloor)&&this.player.alive){const B=Ge(ye.CursedFloor,"curseInterval")||10,O=Ge(ye.CursedFloor,"curseDamage")||1;this.floorTurns>0&&this.floorTurns%B===0&&(this.player.stats.hp=Math.max(1,this.player.stats.hp-O),this.player.sprite&&this.showDamagePopup(this.player.sprite.x,this.player.sprite.y,O,.5,"Curse"),this.showLog("The curse saps your strength!"),this.checkPlayerDeath())}if(this.floorTurns%10===0&&this.currentWeather!==Ue.None&&this.checkWeatherTransition(),this.currentWeather===Ue.None||this.currentWeather===Ue.Rain)return;const F=5,b=Ii[this.currentWeatherIntensity],I=Math.max(1,Math.floor(F*b));for(const B of this.allEntities)B.alive&&(On(this.currentWeather,B.types)||(B.stats.hp=Math.max(0,B.stats.hp-I),B.sprite&&this.showDamagePopup(B.sprite.x,B.sprite.y,I,.5),B===this.player?this.checkPlayerDeath():B.stats.hp<=0&&this.checkDeath(B)))}checkWeatherTransition(){if(!Hn(this.currentFloor))return;const F=Gs(this.dungeonDef.id,this.currentFloor);if(F!==this.currentWeather){if(this.currentWeather=F,this.showLog("The weather changed!"),this.currentWeather!==Ue.None){const b=qt[this.currentWeather],I=this.currentWeatherIntensity;this.weatherText.setText(`${b.symbol} ${b.name} (${I}): ${b.description}`),this.weatherText.setColor(jt[this.currentWeatherIntensity]),cs(),this.showLog(`The weather is now ${b.name} (${I})!`)}else this.weatherText.setText("");if(this.weatherIntensityHudText&&(this.weatherIntensityHudText.destroy(),this.weatherIntensityHudText=null),this.currentWeather!==Ue.None){const b={[Ue.Rain]:"Rain",[Ue.Sandstorm]:"Sandstorm",[Ue.Hail]:"Hail"},I=this.currentWeatherIntensity;this.weatherIntensityHudText=this.add.text(J-10,55,`${b[this.currentWeather]} (${I})`,{fontSize:"8px",color:jt[this.currentWeatherIntensity],fontFamily:"monospace"}).setOrigin(1,0).setScrollFactor(0).setDepth(100),this.weatherIntensityHudText.setAlpha(0),this.tweens.add({targets:this.weatherIntensityHudText,alpha:{from:0,to:1},duration:300,yoyo:!0,repeat:2,onComplete:()=>{this.weatherIntensityHudText&&this.weatherIntensityHudText.setAlpha(1)}})}this.setupWeatherVisuals()}}checkPlayerDeath(){if(this.player.stats.hp<=0&&this.player.alive){if(this.tryRevive())return;this.player.alive=!1,this.showGameOver()}}clearWeatherVisuals(){this.weatherOverlay&&(this.weatherOverlay.destroy(),this.weatherOverlay=null),this.weatherParticles&&(this.weatherParticles.destroy(),this.weatherParticles=null),this.weatherTimer&&(this.weatherTimer.destroy(),this.weatherTimer=null)}setupWeatherVisuals(){if(this.clearWeatherVisuals(),this.currentWeather!==Ue.None)switch(this.currentWeather){case Ue.Rain:{this.weatherOverlay=this.add.rectangle(J/2,ee/2,J,ee,3900150,.06).setScrollFactor(0).setDepth(150);const F=this.add.graphics().setScrollFactor(0).setDepth(150);this.weatherParticles=F,this.weatherTimer=this.time.addEvent({delay:80,loop:!0,callback:()=>{F.clear(),F.lineStyle(1,6525168,.3);for(let b=0;b<40;b++){const I=Math.random()*J,B=Math.random()*ee;F.lineBetween(I,B,I-3,B+12)}}});break}case Ue.Sandstorm:{this.weatherOverlay=this.add.rectangle(J/2,ee/2,J,ee,13935988,.08).setScrollFactor(0).setDepth(150);const F=this.add.graphics().setScrollFactor(0).setDepth(150);this.weatherParticles=F,this.weatherTimer=this.time.addEvent({delay:100,loop:!0,callback:()=>{F.clear(),F.fillStyle(13936707,.15);for(let b=0;b<30;b++){const I=Math.random()*J,B=Math.random()*ee;F.fillCircle(I,B,1+Math.random()*2)}}});break}case Ue.Hail:{this.weatherOverlay=this.add.rectangle(J/2,ee/2,J,ee,9684477,.06).setScrollFactor(0).setDepth(150);const F=this.add.graphics().setScrollFactor(0).setDepth(150);this.weatherParticles=F,this.weatherTimer=this.time.addEvent({delay:120,loop:!0,callback:()=>{F.clear(),F.fillStyle(16777215,.25);for(let b=0;b<25;b++){const I=Math.random()*J,B=Math.random()*ee;F.fillCircle(I,B,1+Math.random())}}});break}}}checkStairs(){const{stairsPos:F}=this.dungeon;if(this.player.tileX===F.x&&this.player.tileY===F.y){if(this.bossEntity&&this.bossEntity.alive){this.showLog("The stairs are sealed! Defeat the boss first!");return}if(this.gauntletStairsLocked){this.showLog("The stairs are sealed! Clear the gauntlet first!");return}this.legendaryEntity&&this.legendaryEntity.alive&&(this.showLog("The legendary Pokemon disappeared..."),this.legendaryEntity.sprite&&this.legendaryEntity.sprite.destroy(),this.legendaryEntity.alive=!1,this.legendaryEntity=null,this.legendaryEncounter=null,this.legendaryHpBg&&this.legendaryHpBg.setVisible(!1),this.legendaryHpBar&&this.legendaryHpBar.setVisible(!1),this.legendaryNameText&&this.legendaryNameText.setVisible(!1),this.legendaryParticleTimer&&(this.legendaryParticleTimer.destroy(),this.legendaryParticleTimer=null),this.legendaryParticleGraphics&&(this.legendaryParticleGraphics.destroy(),this.legendaryParticleGraphics=null)),this.advanceFloor()}}checkShop(){if(!this.shopRoom||this.shopOpen||this.shopClosed)return;const F=this.shopRoom,b=this.player.tileX,I=this.player.tileY,B=b>=F.x&&b<F.x+F.w&&I>=F.y&&I<F.y+F.h;if(B&&!this.playerInShopRoom?(this.playerInShopRoom=!0,this.shopWelcomeShown||(this.shopWelcomeShown=!0,this.showLog("Welcome to the Shop!"),Vt()),this.shopItems.length>0&&this.showLog(`Gold: ${this.gold}G. Step on items to buy!`),this.showShopGoldHud()):!B&&this.playerInShopRoom&&(this.playerInShopRoom=!1,this.hideShopGoldHud(),this.checkShopTheft()),B){const O=this.shopTiles.find(f=>f.x===b&&f.y===I);if(O){const f=this.shopItems[O.shopIdx];f&&We[f.itemId]&&this.showShopBuyPrompt(O.shopIdx)}this.updateShopGoldHud()}}showShopGoldHud(){this.hideShopGoldHud(),this.shopGoldHud=this.add.text(J/2,50,`Gold: ${this.gold}G`,{fontSize:"12px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#1a1a2ecc",padding:{x:8,y:4}}).setOrigin(.5).setScrollFactor(0).setDepth(105)}updateShopGoldHud(){this.shopGoldHud&&this.shopGoldHud.setText(`Gold: ${this.gold}G`)}hideShopGoldHud(){this.shopGoldHud&&(this.shopGoldHud.destroy(),this.shopGoldHud=null)}checkShopTheft(){this.shopTheftTriggered||this.shopClosed}triggerShopTheft(){if(this.shopTheftTriggered)return;this.shopTheftTriggered=!0,this.shopClosed=!0,this.showLog("Stop, thief!"),this.cameras.main.shake(300,.015),this.cameras.main.flash(200,255,0,0);const F=this.add.text(J/2,ee/2-40,"Stop, thief!",{fontSize:"22px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(300);this.tweens.add({targets:F,y:ee/2-80,alpha:{from:1,to:0},scaleX:{from:1,to:1.3},scaleY:{from:1,to:1.3},duration:2e3,ease:"Quad.easeOut",onComplete:()=>F.destroy()});const b=this.shopRoom,I=this.dungeon.terrain,B=this.dungeon.width,O=this.dungeon.height,f=this.player.stats.level+5,x=2+Math.floor(Math.random()*2),e=[];for(let a=b.x;a<b.x+b.w;a++)b.y-1>=0&&I[b.y-1][a]===xe.GROUND&&e.push({x:a,y:b.y-1}),b.y+b.h<O&&I[b.y+b.h][a]===xe.GROUND&&e.push({x:a,y:b.y+b.h});for(let a=b.y;a<b.y+b.h;a++)b.x-1>=0&&I[a][b.x-1]===xe.GROUND&&e.push({x:b.x-1,y:a}),b.x+b.w<B&&I[a][b.x+b.w]===xe.GROUND&&e.push({x:b.x+b.w,y:a});const o=e.filter((a,t,s)=>s.findIndex(l=>l.x===a.x&&l.y===a.y)===t&&!this.allEntities.some(l=>l.alive&&l.tileX===a.x&&l.tileY===a.y)),n=yt(this.dungeonDef,this.currentFloor).map(a=>Te[a]).filter(Boolean),r=n.length>0?n[0]:Te.zubat;for(let a=0;a<Math.min(x,o.length);a++){const t=o[a],s={hp:Math.floor(r.baseStats.hp*3),maxHp:Math.floor(r.baseStats.hp*3),atk:Math.floor(r.baseStats.atk*2.5),def:Math.floor(r.baseStats.def*2),level:f},l={tileX:t.x,tileY:t.y,facing:ge.Down,stats:s,alive:!0,spriteKey:r.spriteKey,name:`Security ${r.name}`,types:r.types,attackType:r.attackType,skills:et(r),statusEffects:[],speciesId:r.spriteKey,ability:He[r.spriteKey]},i=`${r.spriteKey}-idle`;if(this.textures.exists(i)){l.sprite=this.add.sprite(this.tileToPixelX(t.x),this.tileToPixelY(t.y),i),l.sprite.setScale(De).setDepth(9),l.sprite.setTint(16729156);const h=`${r.spriteKey}-idle-${ge.Down}`;this.anims.exists(h)&&l.sprite.play(h)}this.enemies.push(l),this.allEntities.push(l)}this.clearShopVisuals(),this.hideShopGoldHud()}clearShopVisuals(){for(const F of this.shopTiles)F.sprite.destroy(),F.priceTag.destroy();this.shopTiles=[],this.shopCarpet&&(this.shopCarpet.destroy(),this.shopCarpet=null)}showShopBuyPrompt(F){if(this.shopOpen||this.shopClosed)return;const b=this.shopItems[F];if(!b)return;const I=We[b.itemId];if(!I)return;Vt(),this.shopOpen=!0;const B=this.add.rectangle(J/2,ee/2,J,ee,0,.6).setScrollFactor(0).setDepth(200).setInteractive();this.shopUI.push(B);const O=260,f=120,x=(J-O)/2,e=(ee-f)/2,o=this.add.graphics().setScrollFactor(0).setDepth(201);o.fillStyle(1710638,.95),o.fillRoundedRect(x,e,O,f,8),o.lineStyle(2,16498468,1),o.strokeRoundedRect(x,e,O,f,8),this.shopUI.push(o);const m=this.add.text(J/2,e+18,`${I.name} - ${b.price}G`,{fontSize:"13px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(202);this.shopUI.push(m);const n=this.add.text(J/2,e+38,I.description,{fontSize:"9px",color:"#aaaaaa",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(202);this.shopUI.push(n);const r=this.add.text(J/2,e+58,"Buy?",{fontSize:"11px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(202);this.shopUI.push(r);const a=this.gold>=b.price,t=this.add.text(J/2-50,e+80,"[Yes]",{fontSize:"13px",color:a?"#4ade80":"#666666",fontFamily:"monospace",backgroundColor:"#2a2a4e",padding:{x:12,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(202).setInteractive();this.shopUI.push(t),a?t.on("pointerdown",()=>{this.buyShopItemNew(F),this.closeShopUI()}):t.on("pointerdown",()=>{this.showLog("Not enough gold!"),this.closeShopUI()});const s=this.add.text(J/2+50,e+80,"[No]",{fontSize:"13px",color:"#ef4444",fontFamily:"monospace",backgroundColor:"#2a2a4e",padding:{x:12,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(202).setInteractive();this.shopUI.push(s),s.on("pointerdown",()=>this.closeShopUI())}buyShopItemNew(F){const b=this.shopItems[F];if(!b||this.gold<b.price)return;const I=We[b.itemId];if(!I)return;if(this.inventory.length>=rt&&!this.inventory.find(f=>f.item.id===b.itemId&&I.stackable)){this.showLog("Bag is full! Can't buy.");return}this.gold-=b.price;const B=this.inventory.find(O=>O.item.id===b.itemId&&I.stackable);if(B?B.count++:this.inventory.push({item:I,count:1}),this.showLog(`Bought ${I.name} for ${b.price}G!`),b.stock--,b.stock<=0){const O=this.shopTiles.findIndex(f=>f.shopIdx===F);O>=0&&(this.shopTiles[O].sprite.destroy(),this.shopTiles[O].priceTag.destroy(),this.shopTiles.splice(O,1)),this.shopItems[F]={itemId:"",price:0,stock:0}}this.updateHUD(),this.updateShopGoldHud()}checkMonsterHouse(){if(!this.monsterHouseRoom||this.monsterHouseTriggered)return;const F=this.monsterHouseRoom,b=this.player.tileX,I=this.player.tileY;if(b>=F.x&&b<F.x+F.w&&I>=F.y&&I<F.y+F.h){this.monsterHouseTriggered=!0;const O={standard:{color:"#ff4444",hexColor:16729156,label:"Monster House!",flashR:255,flashG:0,flashB:0},treasure:{color:"#ffd700",hexColor:16766720,label:"Treasure House!",flashR:255,flashG:215,flashB:0},ambush:{color:"#bb44ff",hexColor:12272895,label:"Ambush House!",flashR:187,flashG:68,flashB:255}}[this.monsterHouseType],f=this.monsterHouseType==="ambush"?.02:.01;this.cameras.main.shake(400,f),this.cameras.main.flash(250,O.flashR,O.flashG,O.flashB);const x=this.add.text(J/2,ee/2-40,O.label,{fontSize:"24px",color:O.color,fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(300);this.tweens.add({targets:x,y:ee/2-80,alpha:{from:1,to:0},scaleX:{from:1,to:1.3},scaleY:{from:1,to:1.3},duration:2e3,ease:"Quad.easeOut",onComplete:()=>x.destroy()}),this.showLog(`It's a ${O.label}`);const e=1+(this.currentFloor-3)*.15;let o,m;switch(this.monsterHouseType){case"standard":o=3,m=5;break;case"treasure":o=5,m=8;break;case"ambush":o=4,m=6;break}const n=Math.floor(o*e),r=Math.floor(m*e),a=n+Math.floor(Math.random()*(r-n+1)),s=(this.dungeonDef.id==="endlessDungeon"||this.dungeonDef.id==="dailyDungeon"?this.getEndlessEnemies(this.currentFloor):yt(this.dungeonDef,this.currentFloor)).map(i=>Te[i]).filter(Boolean);if(s.length===0)return;const l=this.monsterHouseType==="ambush"?1.3:1.2;this.monsterHouseEnemies=[];for(let i=0;i<a;i++){const h=F.x+1+Math.floor(Math.random()*Math.max(1,F.w-2)),d=F.y+1+Math.floor(Math.random()*Math.max(1,F.h-2));if(this.dungeon.terrain[d]?.[h]!==xe.GROUND||this.allEntities.some(y=>y.alive&&y.tileX===h&&y.tileY===d))continue;const c=s[Math.floor(Math.random()*s.length)],u=ot(this.currentFloor,this.dungeonDef.difficulty*l,c,this.ngPlusLevel);this.difficultyMods.enemyHpMult!==1&&(u.hp=Math.floor(u.hp*this.difficultyMods.enemyHpMult),u.maxHp=Math.floor(u.maxHp*this.difficultyMods.enemyHpMult)),this.difficultyMods.enemyAtkMult!==1&&(u.atk=Math.floor(u.atk*this.difficultyMods.enemyAtkMult));const p={tileX:h,tileY:d,facing:ge.Down,stats:{...u},alive:!0,spriteKey:c.spriteKey,name:c.name,types:c.types,attackType:c.attackType,skills:et(c),statusEffects:[],speciesId:c.spriteKey,ability:He[c.spriteKey]},g=`${c.spriteKey}-idle`;if(this.textures.exists(g)){p.sprite=this.add.sprite(this.tileToPixelX(h),this.tileToPixelY(d),g),p.sprite.setScale(De).setDepth(9);const y=`${c.spriteKey}-idle-${ge.Down}`;this.anims.exists(y)&&p.sprite.play(y),this.monsterHouseType==="ambush"&&(p.sprite.setAlpha(0),this.tweens.add({targets:p.sprite,alpha:1,duration:600,delay:200+i*100,ease:"Power2"}))}this.enemies.push(p),this.allEntities.push(p),this.monsterHouseEnemies.push(p),this.seenSpecies.add(c.id)}for(const i of this.enemies)i.alive&&!this.monsterHouseEnemies.includes(i)&&i.tileX>=F.x&&i.tileX<F.x+F.w&&i.tileY>=F.y&&i.tileY<F.y+F.h&&this.monsterHouseEnemies.push(i)}}checkMonsterHouseCleared(){if(!this.monsterHouseRoom||!this.monsterHouseTriggered||this.monsterHouseCleared||this.monsterHouseEnemies.length===0||!this.monsterHouseEnemies.every(O=>!O.alive))return;this.monsterHouseCleared=!0;const b=this.monsterHouseType==="treasure"?"#ffd700":this.monsterHouseType==="ambush"?"#bb44ff":"#4ade80",I=this.add.text(J/2,ee/2-40,"Monster House Cleared!",{fontSize:"20px",color:b,fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setScrollFactor(0).setDepth(300);this.tweens.add({targets:I,y:ee/2-80,alpha:{from:1,to:0},scaleX:{from:1,to:1.2},scaleY:{from:1,to:1.2},duration:2500,ease:"Quad.easeOut",onComplete:()=>I.destroy()});const B=this.monsterHouseRoom;switch(this.monsterHouseType){case"standard":{this.spawnMonsterHouseRewardItems(B,1),this.showLog("Monster House cleared! A reward appeared!");break}case"treasure":{const O=3+Math.floor(Math.random()*3);this.spawnMonsterHouseRewardItems(B,O);const f=Ne(this.floorMutations,ye.GoldenAge)?Ge(ye.GoldenAge,"goldMult"):1,x=Math.floor((20+this.currentFloor*10)*2*f);this.gold+=x;const e=Ye();e.gold=this.gold,Ke(e),this.showLog(`Treasure House cleared! +${x}G and items!`);break}case"ambush":{this.spawnMonsterHouseRewardItems(B,2);const O=1+(this.heldItemEffect.expBonus??0)/100,f=1+this.ngPlusBonuses.expPercent/100,x=Math.floor((15+this.currentFloor*8)*this.modifierEffects.expMult*O*f);this.totalExp+=x;const e=Qt(this.player.stats,0,this.totalExp);this.totalExp=e.totalExp,this.showLog(`Ambush House survived! +${x} EXP bonus!`);break}}bi(),this.cameras.main.flash(300,200,255,200);{const O=gt(this.scoreChain,"monsterHouseClear");this.chainActionThisTurn=!0,O>0&&this.showLog(`Monster House chain bonus! +${O} pts!`),this.updateChainHUD()}this.updateHUD()}spawnMonsterHouseRewardItems(F,b){for(let I=0;I<b;I++){const B=F.x+1+Math.floor(Math.random()*Math.max(1,F.w-2)),O=F.y+1+Math.floor(Math.random()*Math.max(1,F.h-2));if(this.dungeon.terrain[O]?.[B]!==xe.GROUND)continue;const f=dt(),x=f.category==="berry"?"":f.category==="seed"?"":"",e=f.category==="berry"?"#ff6b9d":f.category==="seed"?"#4ade80":"#60a5fa",o=this.add.text(B*re+re/2,O*re+re/2,x,{fontSize:"16px",color:e,fontFamily:"monospace"}).setOrigin(.5).setDepth(6);o.setScale(0),this.tweens.add({targets:o,scaleX:1,scaleY:1,duration:400,delay:I*150,ease:"Back.easeOut"}),this.floorItems.push({x:B,y:O,item:f,sprite:o})}}openShopUI(){if(this.shopOpen||this.shopClosed)return;if(this.shopItems.filter(x=>x.price>0).length===0){this.showLog("Shop is empty!");return}Vt(),this.shopOpen=!0;const b=this.add.rectangle(J/2,ee/2,J,ee,0,.7).setScrollFactor(0).setDepth(200).setInteractive();this.shopUI.push(b);const I=this.add.text(J/2,40,`Kecleon Shop  Gold: ${this.gold}G`,{fontSize:"12px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(201);this.shopUI.push(I);const B=70;let O=0;for(let x=0;x<this.shopItems.length;x++){const e=this.shopItems[x];if(e.price<=0)continue;const o=We[e.itemId];if(!o)continue;const m=B+O*32,n=this.gold>=e.price,r=e.stock>1?` x${e.stock}`:"",a=`${o.name}${r} - ${e.price}G`,t=n?"#e0e0e0":"#666666",s=this.add.text(J/2-80,m,a,{fontSize:"11px",color:t,fontFamily:"monospace",backgroundColor:"#1a1a2eee",padding:{x:6,y:4}}).setScrollFactor(0).setDepth(201).setInteractive();if(this.shopUI.push(s),n){const i=this.add.text(J/2+80,m,"[Buy]",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",backgroundColor:"#333344ee",padding:{x:4,y:4}}).setScrollFactor(0).setDepth(201).setInteractive();this.shopUI.push(i);const h=x;i.on("pointerdown",()=>this.buyShopItem(h))}const l=this.add.text(J/2-80,m+15,o.description,{fontSize:"8px",color:"#888888",fontFamily:"monospace"}).setScrollFactor(0).setDepth(201);this.shopUI.push(l),O++}const f=this.add.text(J/2,ee-60,"[Close Shop]",{fontSize:"12px",color:"#ef4444",fontFamily:"monospace",backgroundColor:"#1a1a2eee",padding:{x:10,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(201).setInteractive();this.shopUI.push(f),f.on("pointerdown",()=>this.closeShopUI())}buyShopItem(F){const b=this.shopItems[F];if(!b||b.price<=0||this.gold<b.price)return;const I=We[b.itemId];if(!I)return;if(this.inventory.length>=rt&&!this.inventory.find(f=>f.item.id===b.itemId&&I.stackable)){this.showLog("Bag is full! Can't buy.");return}this.gold-=b.price;const B=this.inventory.find(O=>O.item.id===b.itemId&&I.stackable);if(B?B.count++:this.inventory.push({item:I,count:1}),this.showLog(`Bought ${I.name} for ${b.price}G!`),b.stock--,b.stock<=0){const O=this.shopTiles.findIndex(f=>f.shopIdx===F);O>=0&&(this.shopTiles[O].sprite.destroy(),this.shopTiles[O].priceTag.destroy(),this.shopTiles.splice(O,1)),this.shopItems[F]={itemId:"",price:0,stock:0}}this.closeShopUI(),this.shopItems.some(O=>O.price>0)&&this.openShopUI(),this.updateHUD(),this.updateShopGoldHud()}showSellPrompt(F){if(this.shopOpen||!this.playerInShopRoom||this.shopClosed)return;const b=this.inventory[F];if(!b)return;const I=Hs(b.item.id,this.currentFloor);Vt(),this.shopOpen=!0;const B=this.add.rectangle(J/2,ee/2,J,ee,0,.6).setScrollFactor(0).setDepth(200).setInteractive();this.shopUI.push(B);const O=260,f=100,x=(J-O)/2,e=(ee-f)/2,o=this.add.graphics().setScrollFactor(0).setDepth(201);o.fillStyle(1710638,.95),o.fillRoundedRect(x,e,O,f,8),o.lineStyle(2,4906624,1),o.strokeRoundedRect(x,e,O,f,8),this.shopUI.push(o);const m=this.add.text(J/2,e+20,`Sell ${b.item.name} for ${I}G?`,{fontSize:"11px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(202);this.shopUI.push(m);const n=this.add.text(J/2-50,e+60,"[Yes]",{fontSize:"13px",color:"#4ade80",fontFamily:"monospace",backgroundColor:"#2a2a4e",padding:{x:12,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(202).setInteractive();this.shopUI.push(n),n.on("pointerdown",()=>{this.sellItem(F,I),this.closeShopUI()});const r=this.add.text(J/2+50,e+60,"[No]",{fontSize:"13px",color:"#ef4444",fontFamily:"monospace",backgroundColor:"#2a2a4e",padding:{x:12,y:6}}).setOrigin(.5).setScrollFactor(0).setDepth(202).setInteractive();this.shopUI.push(r),r.on("pointerdown",()=>this.closeShopUI())}sellItem(F,b){const I=this.inventory[F];I&&(this.gold+=b,this.showLog(`Sold ${I.item.name} for ${b}G!`),I.count--,I.count<=0&&this.inventory.splice(F,1),this.updateHUD(),this.updateShopGoldHud())}closeShopUI(){for(const F of this.shopUI)F.destroy();this.shopUI=[],this.shopOpen=!1}checkEventRoom(){if(!this.eventRoom||this.eventTriggered||this.eventOpen)return;const F=this.eventRoom,b=this.player.tileX,I=this.player.tileY;b>=F.x&&b<F.x+F.w&&I>=F.y&&I<F.y+F.h&&(this.eventTriggered=!0,this.eventMarker&&(this.eventMarker.destroy(),this.eventMarker=null),this.openEventUI())}openEventUI(){if(this.eventOpen||!this.currentEvent)return;Ct(),this.eventOpen=!0,this.stopAutoExplore();const F=this.currentEvent,b=this.add.rectangle(J/2,ee/2,J,ee,0,.75).setScrollFactor(0).setDepth(200).setInteractive();this.eventUI.push(b);const I=this.add.text(J/2,60,F.name,{fontSize:"16px",color:"#22d3ee",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setScrollFactor(0).setDepth(201);this.eventUI.push(I);const B=this.add.graphics().setScrollFactor(0).setDepth(201);B.lineStyle(1,2282478,.5),B.lineBetween(J/2-120,82,J/2+120,82),this.eventUI.push(B);const O=this.add.text(J/2,105,F.description,{fontSize:"10px",color:"#c0c8e0",fontFamily:"monospace",wordWrap:{width:280},align:"center",lineSpacing:4}).setOrigin(.5,0).setScrollFactor(0).setDepth(201);this.eventUI.push(O);const f=220;for(let x=0;x<F.choices.length;x++){const e=F.choices[x],o=f+x*80,m=this.add.rectangle(J/2,o,280,60,1710638,.95).setScrollFactor(0).setDepth(201).setInteractive().setStrokeStyle(1,2282478,.6);this.eventUI.push(m);const n=this.add.text(J/2,o-12,e.label,{fontSize:"12px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(202);this.eventUI.push(n);const r=this.add.text(J/2,o+8,e.description,{fontSize:"9px",color:"#888ea8",fontFamily:"monospace",wordWrap:{width:250},align:"center"}).setOrigin(.5,0).setScrollFactor(0).setDepth(202);this.eventUI.push(r),m.on("pointerover",()=>{m.setStrokeStyle(2,16498468,1),n.setColor("#ffffff")}),m.on("pointerout",()=>{m.setStrokeStyle(1,2282478,.6),n.setColor("#fbbf24")}),m.on("pointerdown",()=>{this.applyEventEffect(e)})}}closeEventUI(){for(const F of this.eventUI)F.destroy();this.eventUI=[],this.eventOpen=!1}showEventResult(F,b="#4ade80"){this.closeEventUI();const I=this.add.rectangle(J/2,ee/2,J,ee,0,.6).setScrollFactor(0).setDepth(200).setInteractive(),B=this.add.text(J/2,ee/2-20,F,{fontSize:"12px",color:b,fontFamily:"monospace",fontStyle:"bold",wordWrap:{width:280},align:"center",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setScrollFactor(0).setDepth(201);this.time.delayedCall(1500,()=>{I.destroy(),B.destroy(),this.updateHUD(),this.updateMinimap()})}applyEventEffect(F){const b=F.effectId,I=F.effectValue??0;switch(b){case"nothing":{this.closeEventUI(),this.showLog("You decided to move on.");break}case"wishingWell_toss":{if(this.gold<I){this.showLog(`Not enough gold! Need ${I}G.`);return}this.gold-=I;const B=Math.random();B<.33?(this.player.stats.atk+=3,this.showEventResult(`The well grants power!
ATK +3!`,"#ff6b6b")):B<.66?(this.player.stats.def+=3,this.showEventResult(`The well grants resilience!
DEF +3!`,"#60a5fa")):(this.player.stats.maxHp+=20,this.player.stats.hp=Math.min(this.player.stats.hp+20,this.player.stats.maxHp),this.showEventResult(`The well grants vitality!
Max HP +20!`,"#4ade80")),nt(),this.showLog("Your wish was granted!");break}case"stash_open":{if(this.closeEventUI(),Math.random()<.5){const B=2+Math.floor(Math.random()*2);let O=0;for(let f=0;f<B&&!(this.inventory.length>=rt);f++){const x=dt(),e=this.inventory.find(o=>o.item.id===x.id&&x.stackable);e?e.count++:this.inventory.push({item:x,count:1}),O++}Ei(),this.showEventResult(`Found ${O} items in the stash!`,"#4ade80"),this.showLog(`Found ${O} items!`)}else this.showLog("It was a trap! Enemies appear!"),this.spawnEventEnemies(2+Math.floor(Math.random()*2)),this.showEventResult("Enemies burst out of the stash!","#ef4444");break}case"statue_pray":{this.player.stats.hp=this.player.stats.maxHp,Ci(),this.showEventResult(`The statue's warmth heals you fully!
HP fully restored!`,"#4ade80"),this.showLog("HP fully restored!");break}case"statue_smash":{this.player.stats.hp=Math.max(1,this.player.stats.hp-I);let B=0;for(let O=0;O<3&&!(this.inventory.length>=rt);O++){const f=dt(),x=this.inventory.find(e=>e.item.id===f.id&&f.stackable);x?x.count++:this.inventory.push({item:f,count:1}),B++}Ti(),this.showEventResult(`Smashed! Took ${I} damage.
Found ${B} items!`,"#fbbf24"),this.showLog(`Took ${I} damage but found ${B} items!`);break}case"traveler_feed":{const B=this.inventory.findIndex(f=>f.item.id==="apple"||f.item.id==="bigApple"||f.item.id==="goldenApple");if(B===-1){this.showLog("You don't have any Apples!");return}const O=this.inventory[B];O.count--,O.count<=0&&this.inventory.splice(B,1),this.spawnEventAlly(),rs(),this.showEventResult(`The traveler is grateful!
They join your team!`,"#ff6b9d"),this.showLog("A grateful traveler joins you!");break}case"chest_open":{const B=["allPowerOrb","reviveSeed","luminousOrb","maxElixir","sitrusBerry"],O=B[Math.floor(Math.random()*B.length)],f=We[O];if(this.inventory.length<rt&&f){const x=this.inventory.find(e=>e.item.id===f.id&&f.stackable);x?x.count++:this.inventory.push({item:f,count:1})}this.player.statusEffects.push({type:ce.Burn,turnsLeft:5}),Ei(),this.showEventResult(`Got ${f?.name??"an item"}!
But you were cursed with Burn!`,"#bb44ff"),this.showLog(`Got ${f?.name??"an item"}, but burned!`);break}case"train_do":{const B=Math.floor(this.maxBelly*.3);this.belly=Math.max(0,this.belly-B),this.player.stats.level;const O=Qt(this.player.stats,I,this.totalExp);this.totalExp=O.totalExp;for(const f of O.results)ki(),this.showLog(`Level up! Lv.${f.newLevel}! HP+${f.hpGain} ATK+${f.atkGain} DEF+${f.defGain}`);nt(),this.showEventResult(`Intense training!
+${I} EXP, Belly -${B}`,"#fbbf24"),this.showLog(`Gained ${I} EXP! Belly -${B}.`);break}case"fortune_pay":{if(this.gold<I){this.showLog(`Not enough gold! Need ${I}G.`);return}this.gold-=I;const{width:B,height:O}=this.dungeon;for(let f=0;f<O;f++)for(let x=0;x<B;x++)this.visited[f][x]=!0,this.currentlyVisible[f][x]=!0;for(const f of this.floorTraps)f.revealed=!0;this.updateMinimap(),nt(),this.showEventResult(`The orb reveals all secrets!
Floor map fully revealed!`,"#22d3ee"),this.showLog("Floor layout fully revealed!");break}case"rest_do":{this.player.stats.hp=this.player.stats.maxHp,this.belly=Math.min(this.maxBelly,this.belly+I),this.resetBellyWarnings(),Ci(),this.showEventResult(`You rest peacefully...
HP fully restored! Belly +${I}`,"#4ade80"),this.showLog(`Rested! HP restored, Belly +${I}.`);break}default:{this.closeEventUI(),this.showLog("Nothing happened.");break}}}spawnEventEnemies(F){if(!this.eventRoom)return;const b=this.eventRoom,B=(this.dungeonDef.id==="endlessDungeon"||this.dungeonDef.id==="dailyDungeon"?this.getEndlessEnemies(this.currentFloor):yt(this.dungeonDef,this.currentFloor)).map(O=>Te[O]).filter(Boolean);if(B.length!==0)for(let O=0;O<F;O++){const f=b.x+1+Math.floor(Math.random()*Math.max(1,b.w-2)),x=b.y+1+Math.floor(Math.random()*Math.max(1,b.h-2));if(this.dungeon.terrain[x]?.[f]!==xe.GROUND||this.allEntities.some(r=>r.alive&&r.tileX===f&&r.tileY===x))continue;const e=B[Math.floor(Math.random()*B.length)],o=ot(this.currentFloor,this.dungeonDef.difficulty,e,this.ngPlusLevel);this.difficultyMods.enemyHpMult!==1&&(o.hp=Math.floor(o.hp*this.difficultyMods.enemyHpMult),o.maxHp=Math.floor(o.maxHp*this.difficultyMods.enemyHpMult)),this.difficultyMods.enemyAtkMult!==1&&(o.atk=Math.floor(o.atk*this.difficultyMods.enemyAtkMult));const m={tileX:f,tileY:x,facing:ge.Down,stats:{...o},alive:!0,spriteKey:e.spriteKey,name:e.name,types:e.types,attackType:e.attackType,skills:et(e),statusEffects:[],speciesId:e.spriteKey,ability:He[e.spriteKey]},n=`${e.spriteKey}-idle`;if(this.textures.exists(n)){m.sprite=this.add.sprite(this.tileToPixelX(f),this.tileToPixelY(x),n),m.sprite.setScale(De).setDepth(9);const r=`${e.spriteKey}-idle-${ge.Down}`;this.anims.exists(r)&&m.sprite.play(r)}this.enemies.push(m),this.allEntities.push(m),this.seenSpecies.add(e.spriteKey)}}spawnEventAlly(){if(!this.eventRoom||this.allies.length>=ra)return;const F=this.eventRoom,I=(this.dungeonDef.id==="endlessDungeon"||this.dungeonDef.id==="dailyDungeon"?this.getEndlessEnemies(this.currentFloor):yt(this.dungeonDef,this.currentFloor)).map(n=>Te[n]).filter(Boolean);if(I.length===0)return;const B=I[Math.floor(Math.random()*I.length)],O=ot(this.currentFloor,this.dungeonDef.difficulty*.9,B,this.ngPlusLevel),f=Math.floor(F.x+F.w/2),x=Math.floor(F.y+F.h/2),e={tileX:f,tileY:x,facing:ge.Down,stats:{...O},alive:!0,spriteKey:B.spriteKey,name:B.name,types:B.types,attackType:B.attackType,skills:et(B),statusEffects:[],isAlly:!0,speciesId:B.spriteKey,ability:He[B.spriteKey],allyTactic:ze.FollowMe},o=`${B.spriteKey}-idle`;if(this.textures.exists(o)){e.sprite=this.add.sprite(this.tileToPixelX(f),this.tileToPixelY(x),o).setScale(De).setDepth(10);const n=`${B.spriteKey}-idle-${ge.Down}`;this.anims.exists(n)&&e.sprite.play(n)}e.sprite&&e.sprite.setTint(16746700),this.time.delayedCall(400,()=>{e.sprite&&e.sprite.clearTint()});const m=this.add.text(this.tileToPixelX(f),this.tileToPixelY(x)-20,"",{fontSize:"18px",color:"#ff6b9d",fontFamily:"monospace"}).setOrigin(.5).setDepth(50);this.tweens.add({targets:m,y:m.y-30,alpha:{from:1,to:0},duration:1e3,ease:"Quad.easeOut",onComplete:()=>m.destroy()}),this.allies.push(e),this.allEntities.push(e),this.seenSpecies.add(B.spriteKey)}checkPuzzleRoom(){if(!this.puzzleRoom||!this.puzzleData||this.puzzleSolved||this.puzzleFailed)return;if(this.puzzleTriggered&&this.puzzleActive){this.handlePuzzleStep();return}const F=this.puzzleRoom,b=this.player.tileX,I=this.player.tileY;b>=F.x&&b<F.x+F.w&&I>=F.y&&I<F.y+F.h&&(this.puzzleTriggered||(this.puzzleTriggered=!0,this.stopAutoExplore(),this.puzzleMarker&&(this.puzzleMarker.destroy(),this.puzzleMarker=null),this.showPuzzleIntro()))}showPuzzleIntro(){if(!this.puzzleData)return;const F=this.add.rectangle(J/2,ee/2,J,ee,0,.7).setScrollFactor(0).setDepth(200).setInteractive();this.puzzleUI.push(F);const b=this.add.text(J/2,100,"Puzzle Room",{fontSize:"16px",color:"#22d3ee",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setScrollFactor(0).setDepth(201);this.puzzleUI.push(b);const I={[Pe.TileSequence]:"Tile Sequence",[Pe.SwitchOrder]:"Switch Order",[Pe.MemoryMatch]:"Memory Match",[Pe.EnemyRush]:"Enemy Rush",[Pe.ItemSacrifice]:"Item Sacrifice"},B=this.add.text(J/2,130,I[this.puzzleData.type],{fontSize:"12px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(201);this.puzzleUI.push(B);const O=this.add.text(J/2,170,this.puzzleData.description,{fontSize:"10px",color:"#c0c8e0",fontFamily:"monospace",wordWrap:{width:280},align:"center",lineSpacing:4}).setOrigin(.5,0).setScrollFactor(0).setDepth(201);this.puzzleUI.push(O);const f=this.puzzleData.reward,x=f.items.map(a=>We[a]?.name??a).join(", "),e=this.add.text(J/2,220,`Reward: ${f.gold}G, ${f.exp} EXP
${x}`,{fontSize:"9px",color:"#4ade80",fontFamily:"monospace",wordWrap:{width:280},align:"center"}).setOrigin(.5,0).setScrollFactor(0).setDepth(201);this.puzzleUI.push(e);const o=this.add.rectangle(J/2,310,160,40,1710638,.95).setScrollFactor(0).setDepth(201).setInteractive().setStrokeStyle(1,2282478,.8);this.puzzleUI.push(o);const m=this.add.text(J/2,310,"Begin!",{fontSize:"14px",color:"#22d3ee",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(202);this.puzzleUI.push(m),o.on("pointerover",()=>{o.setStrokeStyle(2,16498468,1),m.setColor("#fbbf24")}),o.on("pointerout",()=>{o.setStrokeStyle(1,2282478,.8),m.setColor("#22d3ee")}),o.on("pointerdown",()=>{this.closePuzzleUI(),this.activatePuzzle()});const n=this.add.rectangle(J/2,365,160,30,1710638,.7).setScrollFactor(0).setDepth(201).setInteractive().setStrokeStyle(1,6710912,.5);this.puzzleUI.push(n);const r=this.add.text(J/2,365,"Skip",{fontSize:"10px",color:"#666680",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(202);this.puzzleUI.push(r),n.on("pointerdown",()=>{this.closePuzzleUI(),this.puzzleFailed=!0,this.showLog("You skipped the puzzle.")})}closePuzzleUI(){for(const F of this.puzzleUI)F.destroy();this.puzzleUI=[]}activatePuzzle(){if(!this.puzzleData||!this.puzzleRoom)return;this.puzzleActive=!0,this.puzzlePlayerStep=0,this.puzzleWrongAttempts=0,this.puzzleTurnsUsed=0;const F=this.puzzleData.type;switch(this.showPuzzleHud(),F){case Pe.TileSequence:this.showPuzzleTileSequence();break;case Pe.SwitchOrder:this.showPuzzleSwitchOrder();break;case Pe.MemoryMatch:this.showPuzzleMemoryMatch();break;case Pe.EnemyRush:this.spawnPuzzleEnemies();break;case Pe.ItemSacrifice:this.showPuzzleAltar();break}}showPuzzleHud(){if(this.hidePuzzleHud(),!this.puzzleData)return;const F=this.puzzleData.type;let b="";switch(F){case Pe.TileSequence:b="Step on tiles in order!";break;case Pe.SwitchOrder:b="Step on switches in order!";break;case Pe.MemoryMatch:b="Memorize the pattern!";break;case Pe.EnemyRush:b=`Defeat all enemies! (${this.puzzleData.timeLimit??15} turns)`;break;case Pe.ItemSacrifice:b="Drop any item on the altar!";break}this.puzzleHudBg=this.add.graphics().setScrollFactor(0).setDepth(110),this.puzzleHudBg.fillStyle(660768,.85),this.puzzleHudBg.fillRoundedRect(J/2-130,58,260,22,4),this.puzzleHudBg.lineStyle(1,2282478,.5),this.puzzleHudBg.strokeRoundedRect(J/2-130,58,260,22,4),this.puzzleHudText=this.add.text(J/2,69,b,{fontSize:"9px",color:"#22d3ee",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(111)}updatePuzzleHud(){if(!this.puzzleHudText||!this.puzzleData)return;const F=this.puzzleData.type;let b="";switch(F){case Pe.TileSequence:b=`Step on tiles in order! (${this.puzzlePlayerStep}/${this.puzzleTiles.length})`;break;case Pe.SwitchOrder:b=`Switch order! (${this.puzzlePlayerStep}/${this.puzzleTiles.length})`;break;case Pe.MemoryMatch:{b=`Reproduce pattern! (${this.puzzlePlayerStep}/${this.puzzleTiles.length}) Tries: ${2-this.puzzleWrongAttempts}`;break}case Pe.EnemyRush:{const I=this.puzzleEnemies.filter(O=>O.alive).length,B=this.puzzleData.timeLimit??15;b=`Enemies: ${I} left | Turn ${this.puzzleTurnsUsed}/${B}`;break}case Pe.ItemSacrifice:b="Drop any item on the glowing altar!";break}this.puzzleHudText.setText(b)}hidePuzzleHud(){this.puzzleHudText&&(this.puzzleHudText.destroy(),this.puzzleHudText=null),this.puzzleHudBg&&(this.puzzleHudBg.destroy(),this.puzzleHudBg=null)}showPuzzleTileSequence(){this.puzzleShowingSequence=!0;for(const b of this.puzzleTileGraphics)b.setVisible(!0),b.setAlpha(.3);let F=500;for(let b=0;b<this.puzzleSequence.length;b++){const I=this.puzzleSequence[b],B=this.puzzleTiles[I];this.time.delayedCall(F,()=>{this.flashPuzzleTile(B.x,B.y,4521796,800)}),F+=1200}this.time.delayedCall(F+200,()=>{this.puzzleShowingSequence=!1,this.showLog("Now step on the tiles in that order!"),this.updatePuzzleHud()})}showPuzzleSwitchOrder(){this.puzzleShowingSequence=!0;for(let b=0;b<this.puzzleTileGraphics.length;b++){const I=this.puzzleTileGraphics[b];I.setVisible(!0),I.clear();const B=Et[b%Et.length],O=this.puzzleTiles[b];I.fillStyle(B,.5),I.fillRect(O.x*re+4,O.y*re+4,re-8,re-8)}let F=500;for(let b=0;b<this.puzzleSequence.length;b++){const I=this.puzzleSequence[b],B=this.puzzleTiles[I],O=Et[I%Et.length];this.time.delayedCall(F,()=>{this.flashPuzzleTile(B.x,B.y,O,600);const f=ta[I%ta.length];this.showLog(`${f}!`)}),F+=900}this.time.delayedCall(F+200,()=>{this.puzzleShowingSequence=!1,this.showLog("Step on the switches in that order!"),this.updatePuzzleHud()})}showPuzzleMemoryMatch(){this.puzzleShowingSequence=!0;for(const b of this.puzzleTileGraphics)b.setVisible(!0),b.setAlpha(.2);let F=500;for(let b=0;b<this.puzzleSequence.length;b++){const I=this.puzzleSequence[b],B=this.puzzleTiles[I];this.time.delayedCall(F,()=>{this.flashPuzzleTile(B.x,B.y,16777215,600)}),F+=900}this.time.delayedCall(F+200,()=>{this.puzzleShowingSequence=!1,this.showLog("Now reproduce the pattern!"),this.updatePuzzleHud()})}spawnPuzzleEnemies(){if(!this.puzzleRoom||!this.puzzleData)return;const F=this.puzzleRoom,b=ea(Pe.EnemyRush,this.puzzleData.difficulty),B=(this.dungeonDef.id==="endlessDungeon"||this.dungeonDef.id==="dailyDungeon"?this.getEndlessEnemies(this.currentFloor):yt(this.dungeonDef,this.currentFloor)).map(O=>Te[O]).filter(Boolean);if(B.length!==0){for(let O=0;O<b;O++){const f=F.x+1+Math.floor(Math.random()*Math.max(1,F.w-2)),x=F.y+1+Math.floor(Math.random()*Math.max(1,F.h-2));if(this.dungeon.terrain[x]?.[f]!==xe.GROUND||this.allEntities.some(r=>r.alive&&r.tileX===f&&r.tileY===x))continue;const e=B[Math.floor(Math.random()*B.length)],o=ot(this.currentFloor,this.dungeonDef.difficulty,e,this.ngPlusLevel);this.difficultyMods.enemyHpMult!==1&&(o.hp=Math.floor(o.hp*this.difficultyMods.enemyHpMult),o.maxHp=Math.floor(o.maxHp*this.difficultyMods.enemyHpMult)),this.difficultyMods.enemyAtkMult!==1&&(o.atk=Math.floor(o.atk*this.difficultyMods.enemyAtkMult));const m={tileX:f,tileY:x,facing:ge.Down,stats:{...o},alive:!0,spriteKey:e.spriteKey,name:e.name,types:e.types,attackType:e.attackType,skills:et(e),statusEffects:[],speciesId:e.spriteKey,ability:He[e.spriteKey]},n=`${e.spriteKey}-idle`;if(this.textures.exists(n)){m.sprite=this.add.sprite(this.tileToPixelX(f),this.tileToPixelY(x),n),m.sprite.setScale(De).setDepth(9);const r=`${e.spriteKey}-idle-${ge.Down}`;this.anims.exists(r)&&m.sprite.play(r)}this.enemies.push(m),this.allEntities.push(m),this.puzzleEnemies.push(m),this.seenSpecies.add(e.spriteKey)}this.showLog(`${b} enemies appeared! Defeat them all!`),this.updatePuzzleHud()}}showPuzzleAltar(){if(this.puzzleTiles.length===0)return;const F=this.puzzleTiles[0];if(this.puzzleTileGraphics.length>0){const B=this.puzzleTileGraphics[0];B.setVisible(!0),B.clear(),B.fillStyle(16498468,.5),B.fillRect(F.x*re+2,F.y*re+2,re-4,re-4),B.lineStyle(2,16498468,.8),B.strokeRect(F.x*re+2,F.y*re+2,re-4,re-4)}const b=this.tweens.add({targets:this.puzzleTileGraphics[0],alpha:{from:.5,to:1},duration:600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});this.puzzleTileTweens.push(b);const I=this.add.text(F.x*re+re/2,F.y*re+re/2,"",{fontSize:"16px",fontFamily:"monospace"}).setOrigin(.5).setDepth(7);this.puzzleUI.push(I),this.showLog("Step on the altar with an item in your bag!"),this.updatePuzzleHud()}flashPuzzleTile(F,b,I,B){const O=this.add.graphics().setDepth(5);O.fillStyle(I,.7),O.fillRect(F*re+2,b*re+2,re-4,re-4),this.tweens.add({targets:O,alpha:{from:.7,to:0},duration:B,ease:"Quad.easeOut",onComplete:()=>O.destroy()})}handlePuzzleStep(){if(!this.puzzleData||this.puzzleSolved||this.puzzleFailed||this.puzzleShowingSequence)return;const F=this.puzzleData.type,b=this.player.tileX,I=this.player.tileY;switch(F){case Pe.TileSequence:case Pe.SwitchOrder:case Pe.MemoryMatch:this.handleStepOnPuzzleTile(b,I);break;case Pe.EnemyRush:this.handleEnemyRushTurn();break;case Pe.ItemSacrifice:this.handleItemSacrificeTile(b,I);break}}handleStepOnPuzzleTile(F,b){const I=this.puzzleTiles.findIndex(O=>O.x===F&&O.y===b);if(I===-1)return;const B=this.puzzleSequence[this.puzzlePlayerStep];if(I===B)this.puzzlePlayerStep++,this.flashPuzzleTile(F,b,4521796,400),rr(),this.updatePuzzleHud(),this.puzzlePlayerStep>=this.puzzleSequence.length&&this.solvePuzzle();else{if(this.flashPuzzleTile(F,b,16729156,400),Ti(),this.puzzleData?.type===Pe.MemoryMatch){if(this.puzzleWrongAttempts++,this.puzzleWrongAttempts>=2){this.failPuzzle();return}this.showLog(`Wrong! ${2-this.puzzleWrongAttempts} tries left.`)}else this.showLog("Wrong order! Resetting...");this.puzzlePlayerStep=0,this.updatePuzzleHud()}}handleEnemyRushTurn(){if(this.puzzleTurnsUsed++,this.updatePuzzleHud(),this.puzzleEnemies.every(I=>!I.alive)){this.solvePuzzle();return}const b=this.puzzleData?.timeLimit??15;this.puzzleTurnsUsed>=b&&this.failPuzzle()}handleItemSacrificeTile(F,b){if(this.puzzleTiles.length===0)return;const I=this.puzzleTiles[0];if(F!==I.x||b!==I.y)return;if(this.inventory.length===0){this.showLog("You need an item to sacrifice!");return}const B=this.inventory[0],O=B.item.name;B.count--,B.count<=0&&this.inventory.splice(0,1),this.showLog(`Sacrificed ${O} on the altar!`),os(),this.solvePuzzle()}solvePuzzle(){if(!this.puzzleData)return;this.puzzleSolved=!0,this.puzzleActive=!1;const F=Bo(this.puzzleData),b=Ne(this.floorMutations,ye.GoldenAge)?Ge(ye.GoldenAge,"goldMult"):1;this.gold+=Math.floor(F.gold*b);const I=Qt(this.player.stats,F.exp,this.totalExp);this.totalExp=I.totalExp;for(const f of I.results)ki(),this.showLog(`Level up! Lv.${f.newLevel}! HP+${f.hpGain} ATK+${f.atkGain} DEF+${f.defGain}`);for(const f of F.items){const x=We[f];if(!x)continue;if(this.inventory.length>=rt){this.showLog(`Bag full! Couldn't get ${x.name}.`);continue}const e=this.inventory.find(o=>o.item.id===x.id&&x.stackable);e?e.count++:this.inventory.push({item:x,count:1})}const B=gt(this.scoreChain,"monsterHouseClear");B>0&&this.showLog(`Puzzle Chain +${B} pts!`),this.puzzleSuccessEffect();const O=F.items.map(f=>We[f]?.name??f).join(", ");this.showPuzzleResult("Puzzle Solved!",`+${F.gold}G, +${F.exp} EXP
${O}`,"#4ade80"),this.cleanupPuzzleTiles(),this.hidePuzzleHud(),bi()}failPuzzle(){this.puzzleData&&(this.puzzleFailed=!0,this.puzzleActive=!1,this.puzzleFailEffect(),this.showPuzzleResult("Puzzle Failed","Better luck next time...","#ef4444"),this.cleanupPuzzleTiles(),this.hidePuzzleHud(),ls())}showPuzzleResult(F,b,I){const B=this.add.rectangle(J/2,ee/2,J,ee,0,.6).setScrollFactor(0).setDepth(200).setInteractive(),O=this.add.text(J/2,ee/2-30,F,{fontSize:"18px",color:I,fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setScrollFactor(0).setDepth(201),f=this.add.text(J/2,ee/2+10,b,{fontSize:"11px",color:"#e0e0e0",fontFamily:"monospace",wordWrap:{width:280},align:"center"}).setOrigin(.5).setScrollFactor(0).setDepth(201);this.time.delayedCall(2e3,()=>{B.destroy(),O.destroy(),f.destroy()})}puzzleSuccessEffect(){if(!this.puzzleRoom)return;const F=this.puzzleRoom,b=(F.x+F.w/2)*re,I=(F.y+F.h/2)*re,B=this.add.graphics().setDepth(15);B.fillStyle(4521796,.3),B.fillRect(F.x*re,F.y*re,F.w*re,F.h*re),this.tweens.add({targets:B,alpha:{from:.3,to:0},duration:1e3,ease:"Quad.easeOut",onComplete:()=>B.destroy()});for(let O=0;O<8;O++){const f=this.add.graphics().setDepth(16);f.fillStyle(4521796,1),f.fillCircle(0,0,3),f.setPosition(b+(Math.random()-.5)*F.w*re,I),this.tweens.add({targets:f,y:f.y-40-Math.random()*40,x:f.x+(Math.random()-.5)*30,alpha:{from:1,to:0},duration:800+Math.random()*400,ease:"Quad.easeOut",onComplete:()=>f.destroy()})}}puzzleFailEffect(){if(!this.puzzleRoom)return;const F=this.puzzleRoom,b=this.add.graphics().setDepth(15);b.fillStyle(16729156,.3),b.fillRect(F.x*re,F.y*re,F.w*re,F.h*re),this.tweens.add({targets:b,alpha:{from:.3,to:0},duration:1e3,ease:"Quad.easeOut",onComplete:()=>b.destroy()})}cleanupPuzzleTiles(){for(const F of this.puzzleTileTweens)F.isPlaying()&&F.stop();this.puzzleTileTweens=[];for(const F of this.puzzleTileGraphics)F.destroy();this.puzzleTileGraphics=[],this.puzzleCarpet&&(this.puzzleCarpet.destroy(),this.puzzleCarpet=null)}getEndlessEnemies(F){const b=Object.keys(Te),I=Math.min(8,4+Math.floor(F/10)),B=[];for(let O=0;O<I;O++)B.push(b[Math.floor(Math.random()*b.length)]);return B}advanceFloor(){if(this.stopAutoExplore(),this.dungeonDef.id!=="endlessDungeon"&&this.currentFloor>=this.dungeonDef.floors){this.showDungeonClear();return}this.modifierEffects.healOnFloor&&(this.player.stats.hp=this.player.stats.maxHp);const F=this.heldItemEffect.healPerFloor??0;if(F>0&&this.player.stats.hp<this.player.stats.maxHp&&(this.player.stats.hp=Math.min(this.player.stats.maxHp,this.player.stats.hp+F),this.showLog(`Held item healed ${F} HP!`)),this.floorTurns<20){const I=gt(this.scoreChain,"quickFloor");I>0&&this.showLog(`Quick clear! Chain +${I} pts!`),this.updateChainHUD()}this.autoSave(),this.gameOver=!0,nr(),this.showLog(`Went to B${this.currentFloor+1}F!`);const b=this.activeModifiers.length>0?this.activeModifiers.map(I=>I.id):void 0;this.cameras.main.fadeOut(500,0,0,0),this.time.delayedCall(600,()=>{this.scene.restart({floor:this.currentFloor+1,hp:this.player.stats.hp,maxHp:this.player.stats.maxHp,skills:this.player.skills,inventory:this.inventory,level:this.player.stats.level,atk:this.player.stats.atk,def:this.player.stats.def,exp:this.totalExp,dungeonId:this.dungeonDef.id,allies:this.serializeAllies(),belly:this.belly,starter:this.starterId,challengeMode:this.challengeMode??void 0,modifiers:b,runElapsedTime:this.runElapsedSeconds,scoreChain:this.scoreChain,legendaryEncountered:this.legendaryEncountered})})}showDungeonClear(){this.gameOver=!0,Tt(),bi(),wt();const F=Fi(this.currentFloor,this.enemiesDefeated,!0),b=1+this.ngPlusBonuses.goldPercent/100,I=this.challengeMode==="speedrun"?2:1,B=this.modifierEffects.goldMult,O=1+(this.heldItemEffect.goldBonus??0)/100,f=this.enchantment?.id==="abundance"?1.15:1,x=this.dungeonDef.boss||this.isBossRush,e=Ne(this.floorMutations,ye.GoldenAge)?Ge(ye.GoldenAge,"goldMult"):1,o=Math.floor((x?F*1.5:F)*b*I*B*O*this.difficultyMods.goldMult*f*e);this.add.rectangle(J/2,ee/2,J,ee,0,.7).setScrollFactor(0).setDepth(200);const m=this.add.text(J/2,ee/2-50,"DUNGEON CLEAR!",{fontSize:"20px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(201);if(this.add.text(J/2,ee/2-15,`${this.dungeonDef.name} B${this.dungeonDef.floors}F cleared!`,{fontSize:"12px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201),this.add.text(J/2,ee/2+10,`Earned ${o} Gold!`,{fontSize:"13px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201),this.challengeMode){const w=kt.find(T=>T.id===this.challengeMode);w&&this.add.text(J/2,ee/2-30,`Challenge: ${w.name}`,{fontSize:"10px",color:w.color,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(201)}let n=0;if(this.dungeonDef.id==="dailyDungeon"){const w=Gt();n=gs(this.currentFloor,this.enemiesDefeated,this.turnManager.turn,!0),vs({date:w.date,floorsReached:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turnsUsed:this.turnManager.turn,score:n,cleared:!0,starter:this.starterId})}const r=Us({dungeonId:this.dungeonDef.id,starter:this.starterId,floorsCleared:this.dungeonDef.floors,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,goldEarned:o,cleared:!0,totalFloors:this.dungeonDef.floors,challengeMode:this.challengeMode??void 0}),a=this.scoreChain.totalBonusScore,t=r+a;Xs({dungeonId:this.dungeonDef.id,starter:this.starterId,score:t,floorsCleared:this.dungeonDef.floors,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,goldEarned:o,cleared:!0,date:new Date().toISOString(),challengeMode:this.challengeMode??void 0,difficulty:$s(this.difficultyLevel)?this.difficultyLevel:void 0});const s=Ye(),l=(s.dungeonRunCounts??{})[this.dungeonDef.id]??0,i=this.runElapsedSeconds;s.bestTimes||(s.bestTimes={});const h=s.bestTimes[this.dungeonDef.id],d=h===void 0||i<h;d&&(s.bestTimes[this.dungeonDef.id]=i,Ke(s));const c=`Time: ${this.formatTime(i)}`,u=d?`Best: ${this.formatTime(i)}`:`Best: ${this.formatTime(h)}`;this.add.text(J/2,ee/2+28,`${c}    ${u}`,{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201),d&&this.add.text(J/2,ee/2+40,"New Best Time!",{fontSize:"10px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(201);const p=Di(this.scoreChain.maxChainReached),g=p?`Best Chain: ${p} (x${this.scoreChain.maxChainReached.toFixed(1)})  +${a} pts`:"",y=[`Run #${l}`,`Lv.${this.player.stats.level}  Defeated: ${this.enemiesDefeated}  Turns: ${this.turnManager.turn}`,this.allies.length>0?`Team: ${this.allies.filter(w=>w.alive).map(w=>w.name).join(", ")}`:"",this.ngPlusLevel>0?`NG+${this.ngPlusLevel}`:"",this.challengeMode==="speedrun"?"Speed Run Bonus: 2x Gold!":"",this.dungeonDef.id==="dailyDungeon"?`Daily Score: ${n}`:"",this.isBossRush?`Bosses Defeated: ${this.bossesDefeated}/10`:"",this.gauntletTotalWavesCleared>0?`Gauntlet Waves: ${this.gauntletTotalWavesCleared}`:"",g,`Score: ${t}`].filter(Boolean).join(`
`);this.add.text(J/2,ee/2+55,y,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace",align:"center"}).setOrigin(.5).setScrollFactor(0).setDepth(201),this.add.text(J/2,ee/2+107,"[Return to Town]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201).setInteractive().on("pointerdown",()=>{this.scene.start("HubScene",{gold:o,cleared:!0,bestFloor:this.dungeonDef.floors,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,dungeonId:this.dungeonDef.id,starter:this.starterId,challengeMode:this.challengeMode??void 0,pokemonSeen:Array.from(this.seenSpecies),inventory:ut(this.inventory)})}),this.add.text(J/2,ee/2+129,"[Run Again]",{fontSize:"14px",color:"#f59e0b",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201).setInteractive().on("pointerdown",()=>{this.quickRetry(o,!0)}),this.tweens.add({targets:m,alpha:{from:1,to:.6},duration:800,yoyo:!0,repeat:-1})}showGameOver(){this.stopAutoExplore(),this.gameOver=!0,Tt(),ls(),wt();const F=1+(this.heldItemEffect.goldBonus??0)/100,b=1+this.ngPlusBonuses.goldPercent/100,I=this.enchantment?.id==="abundance"?1.15:1,B=Ne(this.floorMutations,ye.GoldenAge)?Ge(ye.GoldenAge,"goldMult"):1,O=Math.floor(Fi(this.currentFloor,this.enemiesDefeated,!1)*this.modifierEffects.goldMult*F*this.difficultyMods.goldMult*b*I*B);this.add.rectangle(J/2,ee/2,J,ee,0,.7).setScrollFactor(0).setDepth(200),this.add.text(J/2,ee/2-40,"GAME OVER",{fontSize:"22px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(201),this.add.text(J/2,ee/2-5,`Fainted on B${this.currentFloor}F`,{fontSize:"12px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201),this.add.text(J/2,ee/2+18,`Salvaged ${O} Gold`,{fontSize:"11px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201),this.add.text(J/2,ee/2+32,`Time: ${this.formatTime(this.runElapsedSeconds)}`,{fontSize:"10px",color:"#6b7280",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201);let f=0;if(this.dungeonDef.id==="dailyDungeon"){const i=Gt();f=gs(this.currentFloor,this.enemiesDefeated,this.turnManager.turn,!1),vs({date:i.date,floorsReached:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turnsUsed:this.turnManager.turn,score:f,cleared:!1,starter:this.starterId})}const x=Us({dungeonId:this.dungeonDef.id,starter:this.starterId,floorsCleared:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,goldEarned:O,cleared:!1,totalFloors:this.dungeonDef.floors,challengeMode:this.challengeMode??void 0}),e=this.scoreChain.totalBonusScore,o=x+e;Xs({dungeonId:this.dungeonDef.id,starter:this.starterId,score:o,floorsCleared:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,goldEarned:O,cleared:!1,date:new Date().toISOString(),challengeMode:this.challengeMode??void 0,difficulty:$s(this.difficultyLevel)?this.difficultyLevel:void 0});const n=(Ye().dungeonRunCounts??{})[this.dungeonDef.id]??0,r=Di(this.scoreChain.maxChainReached),a=r?`Best Chain: ${r} (x${this.scoreChain.maxChainReached.toFixed(1)})  +${e} pts`:"",t=[`Run #${n}`,`Lv.${this.player.stats.level}  Defeated: ${this.enemiesDefeated}  Turns: ${this.turnManager.turn}`,this.dungeonDef.id==="dailyDungeon"?`Daily Score: ${f}`:"",this.isBossRush?`Bosses Defeated: ${this.bossesDefeated}/10`:"",this.gauntletTotalWavesCleared>0?`Gauntlet Waves: ${this.gauntletTotalWavesCleared}`:"",a,`Score: ${o}`].filter(Boolean).join(`
`);this.add.text(J/2,ee/2+48,t,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace",align:"center"}).setOrigin(.5).setScrollFactor(0).setDepth(201),this.add.text(J/2,ee/2+82,"[Return to Town]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201).setInteractive().on("pointerdown",()=>{this.scene.start("HubScene",{gold:O,cleared:!1,bestFloor:this.currentFloor,enemiesDefeated:this.enemiesDefeated,turns:this.turnManager.turn,dungeonId:this.dungeonDef.id,starter:this.starterId,challengeMode:this.challengeMode??void 0,pokemonSeen:Array.from(this.seenSpecies),inventory:ut(this.inventory)})}),this.add.text(J/2,ee/2+104,"[Quick Retry]",{fontSize:"14px",color:"#f59e0b",fontFamily:"monospace"}).setOrigin(.5).setScrollFactor(0).setDepth(201).setInteractive().on("pointerdown",()=>{this.quickRetry(O,!1)})}quickRetry(F,b){const I=Ye();I.gold+=F,I.totalGold+=F,I.totalRuns++,b&&I.totalClears++;const B=b?this.dungeonDef.floors:this.currentFloor;B>I.bestFloor&&(I.bestFloor=B),I.totalEnemiesDefeated+=this.enemiesDefeated,I.totalTurns+=this.turnManager.turn,this.dungeonDef.id==="endlessDungeon"&&B>I.endlessBestFloor&&(I.endlessBestFloor=B),b&&this.challengeMode&&I.challengeClears++,this.starterId&&!I.startersUsed.includes(this.starterId)&&I.startersUsed.push(this.starterId);const O=new Set(I.pokemonSeen);for(const x of this.seenSpecies)O.add(x);I.pokemonSeen=Array.from(O),this.starterId&&!I.pokemonUsed.includes(this.starterId)&&I.pokemonUsed.push(this.starterId);const f=ut(this.inventory);for(const x of f)Vi(I.storage,x.itemId,x.count);b&&(I.clearedDungeons||(I.clearedDungeons=[]),I.clearedDungeons.includes(this.dungeonDef.id)||I.clearedDungeons.push(this.dungeonDef.id)),I.lastDungeonId=this.dungeonDef.id,I.lastChallenge=this.challengeMode??void 0,I.dungeonRunCounts||(I.dungeonRunCounts={}),I.dungeonRunCounts[this.dungeonDef.id]=(I.dungeonRunCounts[this.dungeonDef.id]??0)+1,I.totalRuns++,Ke(I),wt(),Tt(),this.cameras.main.fadeOut(400,0,0,0),this.time.delayedCall(450,()=>{const x={floor:1,fromHub:!0,dungeonId:this.dungeonDef.id,starter:this.starterId};this.challengeMode&&(x.challengeMode=this.challengeMode),this.scene.start("DungeonScene",x)})}async handlePlayerAction(F){this.player.facing=F;const b=this.player.tileX+Ie[F],I=this.player.tileY+Be[F],B=this.enemies.find(O=>O.alive&&O.tileX===b&&O.tileY===I);if(B)await this.turnManager.executeTurn(()=>this.performBasicAttack(this.player,B),[...this.getAllyActions(),...this.getEnemyActions()]);else{const O=this.allies.find(x=>x.alive&&x.tileX===b&&x.tileY===I);if(O)await this.turnManager.executeTurn(()=>this.swapWithAlly(this.player,O,F),[...this.getAllyActions(),...this.getEnemyActions()]);else{if(!this.canEntityMove(this.player,F)){this.player.sprite.play(`${this.player.spriteKey}-idle-${F}`);return}await this.turnManager.executeTurn(()=>this.moveEntity(this.player,F),[...this.getAllyActions(),...this.getEnemyActions()])}this.recoverPP(this.player);const f=this.floorItems.find(x=>x.x===this.player.tileX&&x.y===this.player.tileY);f&&this.showLog(`There's a ${f.item.name} here. [] to pick up.`),this.checkTraps(),this.checkPlayerHazard(),this.revealNearbyTraps(),this.checkStairs(),this.checkShop(),this.checkMonsterHouse(),this.checkEventRoom(),this.checkPuzzleRoom()}this.tickBelly(),this.tickWeather(),this.tickEntityStatus(this.player),this.updateHUD(),!this.player.alive&&!this.gameOver&&this.showGameOver()}async handleSkillUse(F,b){const I=this.player.skills[F];if(!I||I.currentPp<=0)return;this.player.facing=b,I.currentPp--,await this.turnManager.executeTurn(()=>this.performSkill(this.player,I,b),this.getEnemyActions()),this.recentSkillIds.push(I.id),this.recentSkillIds.length>3&&this.recentSkillIds.shift();const B=no(this.recentSkillIds);if(B&&(this.triggerSkillCombo(B),this.recentSkillIds=[]),this.comboSpeedBoost){this.comboSpeedBoost=!1,this.updateHUD();return}if(this.enchantment?.id==="haste"&&Math.random()<.15){this.showLog("Haste! Extra action!"),this.updateHUD();return}this.tickBelly(),this.tickWeather(),this.tickEntityStatus(this.player),this.updateHUD(),!this.player.alive&&!this.gameOver&&this.showGameOver()}triggerSkillCombo(F){hs(),this.cameras.main.shake(200,.01);const b=this.player.sprite?this.player.sprite.x:this.tileToPixelX(this.player.tileX),I=this.player.sprite?this.player.sprite.y:this.tileToPixelY(this.player.tileY),B=this.add.text(b,I-30,`COMBO: ${F.name}!`,{fontSize:"14px",color:"#ffd700",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setDepth(310);switch(this.tweens.add({targets:B,y:I-70,alpha:{from:1,to:0},scaleX:{from:1.2,to:.8},scaleY:{from:1.2,to:.8},duration:1200,ease:"Quad.easeOut",onComplete:()=>B.destroy()}),this.showLog(`COMBO: ${F.name}! ${F.description}`),F.effect){case Pt.DoubleDamage:this.comboDoubleDamage=!0,this.showLog("Next skill will deal 2x damage!");break;case Pt.AreaBlast:{const O=Math.max(1,Math.floor(Jt(this.player)*.6));let f=0;for(const x of this.enemies){if(!x.alive)continue;Xe(this.player.tileX,this.player.tileY,x.tileX,x.tileY)<=5&&(x.stats.hp=Math.max(0,x.stats.hp-O),f++,x.sprite&&(this.showDamagePopup(x.sprite.x,x.sprite.y,O,1),this.showEnemyHpBar(x),this.flashEntity(x,1.5)),this.checkDeath(x))}f>0&&this.showLog(`Area blast hit ${f} enemies for ${O} damage each!`);break}case Pt.HealBurst:{const O=Math.floor(this.player.stats.maxHp*.3);this.player.stats.hp=Math.min(this.player.stats.maxHp,this.player.stats.hp+O),this.showLog(`Heal burst restored ${O} HP!`),this.player.sprite&&(this.player.sprite.setTint(4521796),this.showHealPopup(this.player.sprite.x,this.player.sprite.y,O),this.time.delayedCall(300,()=>{this.player.sprite&&this.player.sprite.clearTint()}));break}case Pt.SpeedBoost:this.comboSpeedBoost=!0,this.showLog("Speed Boost! You can act again this turn!");break;case Pt.CritGuarantee:this.comboCritGuarantee=!0,this.showLog("Next attack is a guaranteed critical hit!");break}this.updateHUD()}canEntityMove(F,b){const I=F.tileX+Ie[b],B=F.tileY+Be[b];return gi(I,B,this.dungeon.terrain,this.dungeon.width,this.dungeon.height,this.allEntities,F)?vi(F.tileX,F.tileY,b,this.dungeon.terrain,this.dungeon.width,this.dungeon.height):!1}moveEntity(F,b){return new Promise(I=>{F.facing=b,F.tileX+=Ie[b],F.tileY+=Be[b],F.sprite.play(`${F.spriteKey}-walk-${b}`),this.tweens.add({targets:F.sprite,x:this.tileToPixelX(F.tileX),y:this.tileToPixelY(F.tileY),duration:Ri,ease:"Linear",onComplete:()=>{F.sprite.play(`${F.spriteKey}-idle-${b}`),I()}})})}swapWithAlly(F,b,I){return new Promise(B=>{const O=F.tileX,f=F.tileY,x=b.tileX,e=b.tileY;F.facing=I,F.tileX=x,F.tileY=e,b.tileX=O,b.tileY=f,F.sprite.play(`${F.spriteKey}-walk-${I}`);let o=0;const m=()=>{++o>=2&&B()};this.tweens.add({targets:F.sprite,x:this.tileToPixelX(F.tileX),y:this.tileToPixelY(F.tileY),duration:Ri,ease:"Linear",onComplete:()=>{F.sprite.play(`${F.spriteKey}-idle-${I}`),m()}}),this.tweens.add({targets:b.sprite,x:this.tileToPixelX(b.tileX),y:this.tileToPixelY(b.tileY),duration:Ri,ease:"Linear",onComplete:()=>{b.sprite&&b.sprite.play(`${b.spriteKey}-idle-${b.facing}`),m()}})})}recoverPP(F){const b=F.skills.filter(I=>I.currentPp<I.pp);if(b.length>0){const I=b[Math.floor(Math.random()*b.length)];I.currentPp=Math.min(I.pp,I.currentPp+1)}}performBasicAttack(F,b){return new Promise(I=>{const B=F===this.player?F.facing:Bs(F,this.player);F.facing=B,F.sprite.play(`${F.spriteKey}-idle-${B}`);let O=this.heldItemEffect.dodgeChance??0;if(b.ability===be.RunAway&&(O+=xs(b.abilityLevel??1)*100),b.ability===be.Levitate&&(O+=Ss(b.abilityLevel??1)*100),b===this.player&&O>0&&Math.random()*100<O){us(),this.showLog(`${b.name} dodged ${F.name}'s attack!`),b.sprite&&this.showDamagePopup(b.sprite.x,b.sprite.y,0,1,"Dodged!"),this.updateHUD(),this.time.delayedCall(250,I);return}const f=hi(F.attackType,b.types),x=ts(f),e=Jt(F),o=Ms(b),m=Math.max(1,e-Math.floor(o/2));let n=1;if(F.ability===be.Torrent&&F.attackType===k.Water){const p=Fr(F.abilityLevel??1);F.stats.hp<F.stats.maxHp*p.threshold&&(n=p.multiplier)}const r=zs(this.currentWeather,F.attackType),a=Ii[this.currentWeatherIntensity],t=r===1?1:1+(r-1)*a,s=F===this.player?1+Os(this.currentWeather,F.attackType):1,l=this.heldItemEffect.critChance??0,i=F===this.player&&l>0&&Math.random()*100<l,h=i?1.5:1,d=b===this.player?this.difficultyMods.playerDamageMult:1,c=Math.max(1,Math.floor(m*f*n*t*s*h*d));b.stats.hp=Math.max(0,b.stats.hp-c),i?ds():f>=2?sr():f<=.5&&f>0?ar():Ti(),this.flashEntity(b,f),i&&this.showCritFlash(b),b.sprite&&(this.showDamagePopup(b.sprite.x,b.sprite.y,c,f,void 0,i,F.attackType),b!==this.player&&this.showEnemyHpBar(b));let u=`${F.name} attacks ${b.name}! ${c} dmg!`;if(i&&(u+=" Critical hit!"),x&&(u+=` ${x}`),n>1&&(u+=" (Torrent!)"),t!==1&&(u+=` (${qt[this.currentWeather].name}!)`),s>1&&(u+=" (Weather Synergy!)"),this.showLog(u),F===this.player&&f>=2&&(gt(this.scoreChain,"effective"),this.chainActionThisTurn=!0,this.updateChainHUD()),b===this.player&&c>0&&this.scoreChain.currentMultiplier>1&&(ct(this.scoreChain),this.showLog("Chain broken!"),this.updateChainHUD()),b.ability===be.Static&&Math.random()<br(b.abilityLevel??1)&&(F.statusEffects.some(p=>p.type===ce.Paralyze)||(F.statusEffects.push({type:ce.Paralyze,turnsLeft:2}),this.showLog(`${b.name}'s Static paralyzed ${F.name}!`))),b.ability===be.FlameBody&&Math.random()<Er(b.abilityLevel??1)&&(F.statusEffects.some(p=>p.type===ce.Burn)||(F.statusEffects.push({type:ce.Burn,turnsLeft:3}),this.showLog(`${b.name}'s Flame Body burned ${F.name}!`))),this.enchantment?.id==="thorns"&&b===this.player&&F.alive&&c>0){const p=Math.max(1,Math.floor(c*.1));F.stats.hp=Math.max(0,F.stats.hp-p),F.sprite&&this.showDamagePopup(F.sprite.x,F.sprite.y,p,1,`${p} Thorns`),this.showLog(`Thorns reflected ${p} damage!`),this.checkDeath(F)}this.updateHUD(),this.checkDeath(b),this.time.delayedCall(250,I)})}performSkill(F,b,I){return new Promise(B=>{if(F.facing=I,F.sprite.play(`${F.spriteKey}-idle-${I}`),os(),b.range===Je.Self){this.applySkillEffect(F,F,b),this.showLog(`${F.name} used ${b.name}!`),this.time.delayedCall(250,B);return}const O=Ls(b.range,F.tileX,F.tileY,I,this.dungeon.terrain,this.dungeon.width,this.dungeon.height);this.showSkillEffect(O,b);const f=F===this.player||F.isAlly,x=this.allEntities.filter(o=>{if(!o.alive||o===F||!O.some(n=>n.x===o.tileX&&n.y===o.tileY))return!1;const m=o===this.player||o.isAlly;return f!==m});if(x.length===0){this.showLog(`${F.name} used ${b.name}! But it missed!`),this.time.delayedCall(200,B);return}let e=0;for(const o of x){if(!(F.ability===be.NoGuard||o.ability===be.NoGuard)&&Math.random()*100>b.accuracy){this.showLog(`${F.name}'s ${b.name} missed ${o.name}!`);continue}if(b.power>0){let n=this.heldItemEffect.dodgeChance??0;if(o.ability===be.RunAway&&(n+=xs(o.abilityLevel??1)*100),o.ability===be.Levitate&&(n+=Ss(o.abilityLevel??1)*100),o===this.player&&!F.isAlly&&F!==this.player&&n>0&&Math.random()*100<n){us(),this.showLog(`${o.name} dodged ${F.name}'s ${b.name}!`),o.sprite&&this.showDamagePopup(o.sprite.x,o.sprite.y,0,1,"Dodged!");continue}const r=hi(b.type,o.types),a=ts(r),t=Jt(F),s=Ms(o),l=Math.max(1,Math.floor(b.power*t/10)-Math.floor(s/2)),i=zs(this.currentWeather,b.type),h=Ii[this.currentWeatherIntensity],d=i===1?1:1+(i-1)*h,c=F===this.player?1+Os(this.currentWeather,F.attackType):1,u=this.heldItemEffect.critChance??0,p=F===this.player&&(this.comboCritGuarantee||u>0&&Math.random()*100<u),g=p?1.5:1,y=F===this.player&&this.comboDoubleDamage?2:1,v=o===this.player?this.difficultyMods.playerDamageMult:1,S=Math.max(1,Math.floor(l*r*d*c*g*y*v));o.stats.hp=Math.max(0,o.stats.hp-S),this.flashEntity(o,r),p&&this.showCritFlash(o),o.sprite&&(this.showDamagePopup(o.sprite.x,o.sprite.y,S,r,void 0,p,b.type),o!==this.player&&this.showEnemyHpBar(o)),p&&ds();let w=`${F.name}'s ${b.name} hit ${o.name}! ${S} dmg!`;if(p&&(w+=" Critical hit!"),a&&(w+=` ${a}`),d!==1&&(w+=` (${qt[this.currentWeather].name}!)`),c>1&&(w+=" (Weather Synergy!)"),this.showLog(w),F===this.player&&r>=2&&(gt(this.scoreChain,"effective"),this.chainActionThisTurn=!0,this.updateChainHUD()),o===this.player&&S>0&&this.scoreChain.currentMultiplier>1&&(ct(this.scoreChain),this.showLog("Chain broken!"),this.updateChainHUD()),this.enchantment?.id==="thorns"&&o===this.player&&F.alive&&S>0){const T=Math.max(1,Math.floor(S*.1));F.stats.hp=Math.max(0,F.stats.hp-T),F.sprite&&this.showDamagePopup(F.sprite.x,F.sprite.y,T,1,`${T} Thorns`),this.showLog(`Thorns reflected ${T} damage!`),this.checkDeath(F)}e++}this.applySkillEffect(F,o,b),this.updateHUD(),this.checkDeath(o)}if(F===this.player&&(this.comboDoubleDamage&&(this.comboDoubleDamage=!1),this.comboCritGuarantee&&(this.comboCritGuarantee=!1)),e===0&&b.power>0&&this.showLog(`${F.name} used ${b.name}!`),F===this.player&&b.power>0&&e>0&&this.allies.length>0)for(const o of x){if(!o.alive)continue;const m=this.allies.filter(n=>{if(!n.alive)return!1;const r=Math.abs(n.tileX-o.tileX),a=Math.abs(n.tileY-o.tileY);return r<=1&&a<=1&&r+a>0});if(m.length>0&&Math.random()<.25){const n=m[Math.floor(Math.random()*m.length)],r=Jt(n),a=Math.max(1,Math.floor(r*.5));o.stats.hp=Math.max(0,o.stats.hp-a),this.showLog(`COMBO! ${n.name} follows up for ${a} damage!`),hs(),this.cameras.main.shake(100,.005),n.sprite&&this.tweens.add({targets:n.sprite,alpha:{from:1,to:.3},duration:100,yoyo:!0,repeat:1}),o.sprite&&(this.showDamagePopup(o.sprite.x,o.sprite.y,a,1),this.showEnemyHpBar(o));const t=o.tileX*re+re/2,s=o.tileY*re-20,l=this.add.text(t,s,"COMBO!",{fontSize:"12px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(300);this.tweens.add({targets:l,y:s-30,alpha:0,duration:800,onComplete:()=>l.destroy()}),this.updateHUD(),this.checkDeath(o)}}this.updateHUD(),this.time.delayedCall(300,B)})}applySkillEffect(F,b,I){if(!I.effect||I.effect===ce.None)return;const B=I.effectChance??100;if(!(Math.random()*100>B)){if(b.ability===be.ShieldDust&&F!==b&&(I.effect===ce.Paralyze||I.effect===ce.Burn)){this.showLog(`${b.name}'s Shield Dust blocked the effect!`);return}switch(I.effect){case ce.AtkUp:b.statusEffects.push({type:ce.AtkUp,turnsLeft:10}),nt(),this.showLog(`${b.name}'s ATK rose! (10 turns)`),b.sprite&&b.sprite.setTint(16746564),this.time.delayedCall(300,()=>{b.sprite&&b.sprite.clearTint()});break;case ce.DefUp:b.statusEffects.push({type:ce.DefUp,turnsLeft:10}),nt(),this.showLog(`${b.name}'s DEF rose! (10 turns)`);break;case ce.Heal:{const O=Math.floor(b.stats.maxHp*.3);b.stats.hp=Math.min(b.stats.maxHp,b.stats.hp+O),this.showLog(`${b.name} recovered ${O} HP!`),b.sprite&&(b.sprite.setTint(4521796),this.showHealPopup(b.sprite.x,b.sprite.y,O)),this.time.delayedCall(300,()=>{b.sprite&&b.sprite.clearTint()});break}case ce.Paralyze:b.statusEffects.some(O=>O.type===ce.Paralyze)||(b.statusEffects.push({type:ce.Paralyze,turnsLeft:3}),this.showLog(`${b.name} was paralyzed! (3 turns)`),b.sprite&&b.sprite.setTint(16776960),this.time.delayedCall(300,()=>{b.sprite&&b.sprite.clearTint()}));break;case ce.Burn:b.statusEffects.some(O=>O.type===ce.Burn)||(b.statusEffects.push({type:ce.Burn,turnsLeft:5}),this.showLog(`${b.name} was burned! (5 turns)`));break}}}flashEntity(F,b){if(!F.sprite)return;const I=b>=2?16720418:b<1?8947967:16729156;F.sprite.setTint(I),this.time.delayedCall(200,()=>{F.sprite&&F.sprite.clearTint()}),b>=2&&this.cameras.main.shake(200,.008)}showSkillEffect(F,b){const I={Water:{color:3900150,symbol:"~"},Fire:{color:15680580,symbol:"*"},Electric:{color:16498468,symbol:""},Grass:{color:2278750,symbol:""},Flying:{color:10980346,symbol:">"},Poison:{color:11032055,symbol:""},Rock:{color:9584654,symbol:""},Ground:{color:14251782,symbol:""},Bug:{color:8702998,symbol:""},Fighting:{color:14427686,symbol:""},Steel:{color:9741240,symbol:""},Ghost:{color:8141549,symbol:""},Psychic:{color:15485081,symbol:""},Ice:{color:6809849,symbol:""},Dark:{color:7020968,symbol:""},Fairy:{color:16361684,symbol:""},Dragon:{color:8141549,symbol:""},Normal:{color:13751771,symbol:""}},B=I[b.type]??I.Normal;for(const O of F){const f=O.x*re+re/2,x=O.y*re+re/2,e=this.add.graphics().setDepth(15);e.fillStyle(B.color,.4),e.fillRect(O.x*re,O.y*re,re,re);const o=this.add.text(f,x,B.symbol,{fontSize:"16px",color:"#ffffff",fontFamily:"monospace",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setDepth(16);this.tweens.add({targets:[e,o],alpha:{from:1,to:0},duration:400,ease:"Quad.easeOut",onComplete:()=>{e.destroy(),o.destroy()}})}}showDamagePopup(F,b,I,B,O,f,x){let e;B===0?e="#999999":B>=2?e="#ff3333":B<1?e="#999999":e="#ffffff",f&&(e="#ffd700");let o;O?o=O:B===0?o="Immune":f?o=`CRIT ${I}`:B>=2?o=`${I}!`:o=`${I}`;let m;B===0||B<1?m=10:I>=31?m=16:I>=16?m=14:I>=6?m=12:m=10,B>=2&&m<14&&(m=14),f&&m<14&&(m=14);const n=(Math.random()-.5)*16,r=this.add.text(F+n,b-10,o,{fontSize:`${m}px`,color:e,fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(50);r.setScale(1.5),this.tweens.add({targets:r,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut"}),this.tweens.add({targets:r,y:b-45,alpha:{from:1,to:0},duration:900,ease:"Quad.easeOut",onComplete:()=>r.destroy()}),I>=31&&B>0&&this.tweens.add({targets:r,scaleX:{from:1.3,to:1},scaleY:{from:.8,to:1},duration:150,delay:200,ease:"Bounce.easeOut"}),B>0&&!O&&this.showHitSpark(F,b,x)}showHitSpark(F,b,I){const B={[k.Fire]:16747520,[k.Water]:3900150,[k.Electric]:16498468,[k.Grass]:2278750,[k.Ice]:6809849,[k.Poison]:11032055,[k.Fighting]:14427686,[k.Ghost]:8141549,[k.Psychic]:15485081,[k.Dark]:7020968},O=I&&B[I]?B[I]:16777215,f=this.add.graphics().setDepth(49);f.fillStyle(O,.9),f.fillCircle(F,b,8),f.fillStyle(O,.4),f.fillCircle(F,b,14),this.tweens.add({targets:f,alpha:{from:1,to:0},scaleX:{from:1,to:1.8},scaleY:{from:1,to:1.8},duration:150,ease:"Quad.easeOut",onComplete:()=>f.destroy()})}showCritFlash(F){F.sprite&&(F.sprite.setTint(16766720),this.time.delayedCall(100,()=>{F.sprite&&F.sprite.setTint(16777215),this.time.delayedCall(80,()=>{F.sprite&&F.sprite.setTint(16766720),this.time.delayedCall(100,()=>{F.sprite&&F.sprite.clearTint()})})}))}showEnemyHpBar(F){if(!F.sprite||F.stats.hp<=0)return;const b=F.sprite.x,I=F.sprite.y-18,B=24,O=3,f=Math.max(0,F.stats.hp/F.stats.maxHp),x=this.add.graphics().setDepth(51);x.fillStyle(0,.7),x.fillRect(b-B/2-1,I-1,B+2,O+2);const e=f>.5?2280516:f>.25?13421602:13378082;x.fillStyle(e,1),x.fillRect(b-B/2,I,B*f,O),this.tweens.add({targets:x,alpha:{from:1,to:0},delay:1200,duration:600,onComplete:()=>x.destroy()})}showHealPopup(F,b,I){const B=(Math.random()-.5)*12,O=this.add.text(F+B,b-10,`+${I}`,{fontSize:"12px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(50);O.setScale(1.5),this.tweens.add({targets:O,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut"}),this.tweens.add({targets:O,y:b-45,alpha:{from:1,to:0},duration:900,ease:"Quad.easeOut",onComplete:()=>O.destroy()})}showStatPopup(F,b,I,B,O){this.time.delayedCall(O,()=>{const f=this.add.text(F,b,I,{fontSize:"8px",color:B,fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setDepth(52);this.tweens.add({targets:f,y:b-30,alpha:{from:1,to:0},duration:1200,ease:"Quad.easeOut",onComplete:()=>f.destroy()})})}checkDeath(F){if(!(F.stats.hp>0||!F.alive)){if(F.ability===be.Sturdy&&!F.sturdyUsed){F.stats.hp=Tr(F.abilityLevel??1),F.sturdyUsed=!0,this.showLog(`${F.name}'s Sturdy held on!`),F.sprite&&(F.sprite.setTint(16777028),this.time.delayedCall(400,()=>{F.sprite&&F.sprite.clearTint()}));return}if(!(F===this.player&&this.tryRevive()))if(F.alive=!1,F.sprite&&this.tweens.add({targets:F.sprite,alpha:0,duration:300,onComplete:()=>{F.sprite?.destroy(),F.sprite=void 0}}),F===this.player)or(),this.showLog(`${this.player.name} fainted!`);else if(F.isAlly)this.showLog(`${F.name} fainted!`),this.allies=this.allies.filter(b=>b!==F);else{this.enemiesDefeated++;{const n=gt(this.scoreChain,"kill");this.chainActionThisTurn=!0,n>0&&this.showLog(`Chain x${this.scoreChain.currentMultiplier.toFixed(1)}! +${n} bonus`),this.updateChainHUD()}this.enchantment?.id==="vampiric"&&this.player.alive&&this.player.stats.hp<this.player.stats.maxHp&&(this.player.stats.hp=Math.min(this.player.stats.maxHp,this.player.stats.hp+1),this.showLog("Vampiric: Drained 1 HP!"));const b=F.isBoss,I=En(F.stats.level,this.currentFloor),B=1+(this.heldItemEffect.expBonus??0)/100,O=1+this.ngPlusBonuses.expPercent/100,f=Math.floor((b?I*5:I)*this.modifierEffects.expMult*B*this.difficultyMods.expMult*O);if(this.totalExp+=f,this.legendaryEntity===F&&this.legendaryEncounter!==null&&this.legendaryEncounter){ns(),this.cameras.main.shake(600,.02),this.cameras.main.flash(500,255,215,0),this.showLog(` You defeated ${F.name}! `);const n=Ne(this.floorMutations,ye.GoldenAge)?Ge(ye.GoldenAge,"goldMult"):1,r=Math.floor(this.legendaryEncounter.reward.gold*n);this.gold+=r,this.time.delayedCall(800,()=>{this.showLog(`Received ${r}G!`)});const a=this.legendaryEncounter.reward.exp;if(this.totalExp+=a,this.time.delayedCall(1200,()=>{this.showLog(`Bonus EXP: +${a}!`)}),this.legendaryEncounter.reward.skillId){const t=this.legendaryEncounter.reward.skillId,s=Me[t];s&&!this.player.skills.some(l=>l.id===t)&&this.time.delayedCall(1800,()=>{if(this.player.skills.length<4)this.player.skills.push(st(s));else{const l=this.player.skills.reduce((i,h,d)=>h.power<this.player.skills[i].power?d:i,0);this.player.skills[l]=st(s)}this.showLog(`Learned ${s.name}!`),this.createSkillButtons()})}if(this.legendaryEncounter.reward.uniqueItem){const t=this.legendaryEncounter.reward.uniqueItem,s=We[t];s&&this.time.delayedCall(2200,()=>{this.showLog(`Obtained ${s.name}!`);const l=this.inventory.find(i=>i.item.id===t&&s.stackable);l?l.count++:this.inventory.length<rt&&this.inventory.push({item:s,count:1})})}this.legendaryEntity=null,this.legendaryEncounter=null,this.legendaryParticleTimer&&(this.legendaryParticleTimer.destroy(),this.legendaryParticleTimer=null),this.legendaryParticleGraphics&&(this.legendaryParticleGraphics.destroy(),this.legendaryParticleGraphics=null)}else b?(ns(),this.cameras.main.shake(500,.015),this.showLog(` BOSS DEFEATED! ${F.name} fell! +${f} EXP `),this.bossEntity=null,this.cameras.main.flash(300,255,255,200),this.isBossRush&&this.bossesDefeated++):this.showLog(`${F.name} fainted! +${f} EXP`);const e=Qt(this.player.stats,f,this.totalExp);this.totalExp=e.totalExp;const o=e.results;for(const n of o)this.time.delayedCall(500,()=>{if(ki(),this.showLog(`Level up! Lv.${n.newLevel}! HP+${n.hpGain} ATK+${n.atkGain} DEF+${n.defGain}`),this.player.sprite){this.player.sprite.setTint(16777028),this.tweens.add({targets:this.player.sprite,scaleX:De*1.3,scaleY:De*1.3,duration:200,yoyo:!0,ease:"Quad.easeOut"}),this.time.delayedCall(600,()=>{this.player.sprite&&this.player.sprite.clearTint()});const t=this.player.sprite.x,s=this.player.sprite.y;this.showStatPopup(t-16,s-20,`HP+${n.hpGain}`,"#4ade80",0),this.showStatPopup(t,s-20,`ATK+${n.atkGain}`,"#f87171",200),this.showStatPopup(t+16,s-20,`DEF+${n.defGain}`,"#60a5fa",400)}this.updateHUD();const r=Cn(this.player.speciesId??this.starterId,n.newLevel);if(r&&Me[r]&&!this.player.skills.some(t=>t.id===r)){if(this.player.skills.length<4)this.player.skills.push(st(Me[r])),this.showLog(`Learned ${Me[r].name}!`);else{const t=this.player.skills.reduce((l,i,h)=>i.power<this.player.skills[l].power?h:l,0),s=this.player.skills[t];this.player.skills[t]=st(Me[r]),this.showLog(`Learned ${Me[r].name}! (Forgot ${s.name})`)}this.createSkillButtons()}const a=kn(this.player.speciesId??this.starterId,n.newLevel);a&&this.time.delayedCall(800,()=>{this.player.name=a.newName,this.player.stats.maxHp+=a.hpBonus,this.player.stats.hp+=a.hpBonus,this.player.stats.atk+=a.atkBonus,this.player.stats.def+=a.defBonus,this.player.speciesId=a.to,a.newSkillId&&Me[a.newSkillId]&&this.player.skills.length<4&&this.player.skills.push(st(Me[a.newSkillId])),lr(),this.cameras.main.flash(800,255,255,255),this.cameras.main.shake(400,.01),this.player.sprite&&this.tweens.add({targets:this.player.sprite,scaleX:De*1.5,scaleY:De*1.5,duration:400,yoyo:!0,ease:"Quad.easeInOut"}),this.showLog(`Congratulations! ${a.from} evolved into ${a.newName}!`),this.updateHUD()})});if(this.challengeMode!=="noItems"&&this.player.ability===be.Pickup&&Math.random()<Pr(this.player.abilityLevel??1)&&this.inventory.length<rt){const n=dt(),r=this.inventory.find(a=>a.item.id===n.id&&n.stackable);r?r.count++:this.inventory.push({item:n,count:1}),this.showLog(`Pickup found a ${n.name}!`)}const m=lt(Ye(),"recruitRate")*5;this.challengeMode!=="solo"&&!this.modifierEffects.noRecruits&&!b&&F.speciesId&&this.allies.length<ra&&on(this.player.stats.level,F.stats.level,m)&&this.time.delayedCall(800,()=>{this.recruitEnemy(F)}),this.time.delayedCall(300,()=>{this.checkMonsterHouseCleared()}),this.gauntletActive&&this.time.delayedCall(400,()=>{this.checkGauntletWaveCleared()}),this.puzzleActive&&this.puzzleData?.type===Pe.EnemyRush&&this.time.delayedCall(350,()=>{this.handleEnemyRushTurn()})}}}startGauntlet(){if(!this.gauntletConfig)return;this.cameras.main.shake(500,.02),this.cameras.main.flash(400,255,50,50);const F=this.add.text(J/2,ee/2-40,"BOSS GAUNTLET!",{fontSize:"22px",color:"#ff2222",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5).setScrollFactor(0).setDepth(300);this.tweens.add({targets:F,y:ee/2-80,alpha:{from:1,to:0},scaleX:{from:1,to:1.5},scaleY:{from:1,to:1.5},duration:2500,ease:"Quad.easeOut",onComplete:()=>F.destroy()}),this.showLog("A Boss Gauntlet begins! Defeat all waves!"),this.gauntletWaveText=this.add.text(J/2,86,`Wave 1/${this.gauntletConfig.waves.length}`,{fontSize:"11px",color:"#ff4444",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setScrollFactor(0).setDepth(103),this.gauntletVignette=this.add.graphics().setScrollFactor(0).setDepth(99),this.drawGauntletVignette(.3);const b={alpha:.3};this.gauntletVignetteTween=this.tweens.add({targets:b,alpha:{from:.15,to:.4},duration:1200,yoyo:!0,repeat:-1,onUpdate:()=>{this.drawGauntletVignette(b.alpha)}}),Pi(),this.time.delayedCall(800,()=>{this.spawnGauntletWave(0)})}drawGauntletVignette(F){if(!this.gauntletVignette)return;this.gauntletVignette.clear();const b=12;this.gauntletVignette.fillStyle(16711680,F),this.gauntletVignette.fillRect(0,0,J,b),this.gauntletVignette.fillRect(0,ee-b,J,b),this.gauntletVignette.fillRect(0,0,b,ee),this.gauntletVignette.fillRect(J-b,0,b,ee)}spawnGauntletWave(F){if(!this.gauntletConfig||F>=this.gauntletConfig.waves.length)return;this.gauntletCurrentWave=F,this.gauntletEnemies=[];const b=this.gauntletConfig.waves[F],I=b.count??1,B=this.dungeon.rooms,O=B.length>1?B.slice(1).reduce((f,x)=>x.w*x.h>f.w*f.h?x:f,B[1]):B[0];for(let f=0;f<I;f++){const x=f===0?b.bossSpecies:this.gauntletConfig.waves[F].bossSpecies,e=Te[x];if(!e)continue;const o=f===0?0:f%2===0?1:-1,m=f>1?1:0;let n=O.x+Math.floor(O.w/2)+o,r=O.y+Math.floor(O.h/2)+m;if(n=Math.max(O.x+1,Math.min(O.x+O.w-2,n)),r=Math.max(O.y+1,Math.min(O.y+O.h-2,r)),this.dungeon.terrain[r]?.[n]!==xe.GROUND)continue;this.allEntities.some(h=>h.alive&&h.tileX===n&&h.tileY===r)&&(n=Math.min(O.x+O.w-2,n+1));const a=ot(this.currentFloor,this.dungeonDef.difficulty,e,this.ngPlusLevel),t={hp:Math.floor(a.hp*b.hpMultiplier*this.difficultyMods.enemyHpMult),maxHp:Math.floor(a.hp*b.hpMultiplier*this.difficultyMods.enemyHpMult),atk:Math.floor(a.atk*b.hpMultiplier*this.difficultyMods.enemyAtkMult),def:Math.floor(a.def*b.hpMultiplier),level:b.level},s=F===this.gauntletConfig.waves.length-1&&this.gauntletConfig.waves.length>=3?`Elite ${e.name}`:`Gauntlet ${e.name}`,l={tileX:n,tileY:r,facing:ge.Down,stats:t,alive:!0,spriteKey:e.spriteKey,name:s,types:e.types,attackType:e.attackType,skills:et(e),statusEffects:[],speciesId:e.spriteKey,isBoss:!0,ability:He[e.spriteKey]},i=`${e.spriteKey}-idle`;if(this.textures.exists(i)){l.sprite=this.add.sprite(this.tileToPixelX(n),this.tileToPixelY(r),i),l.sprite.setScale(0).setDepth(11).setAlpha(0);const h=`${e.spriteKey}-idle-${ge.Down}`;this.anims.exists(h)&&l.sprite.play(h),this.tweens.add({targets:l.sprite,scaleX:De*1.5,scaleY:De*1.5,alpha:1,duration:500,ease:"Back.easeOut",onComplete:()=>{l.sprite&&this.tweens.add({targets:l.sprite,scaleX:De*1.4,scaleY:De*1.4,duration:200,ease:"Quad.easeOut"})}})}l.sprite&&l.sprite.setTint(16746547),this.time.delayedCall(800,()=>{l.sprite&&l.sprite.clearTint()}),f===0&&(this.bossEntity=l),this.gauntletEnemies.push(l),this.enemies.push(l),this.allEntities.push(l),this.seenSpecies.add(e.id)}this.createGauntletBossHpBar(),this.gauntletWaveText&&this.gauntletWaveText.setText(`Wave ${F+1}/${this.gauntletConfig.waves.length}`),this.updateHUD()}createGauntletBossHpBar(){if(this.bossHpBg&&this.bossHpBg.destroy(),this.bossHpBar&&this.bossHpBar.destroy(),this.bossNameText&&this.bossNameText.destroy(),!this.bossEntity)return;const F=200,b=(J-F)/2,I=56;this.bossHpBg=this.add.graphics().setScrollFactor(0).setDepth(100),this.bossHpBg.fillStyle(1710638,.95),this.bossHpBg.fillRoundedRect(b-4,I-4,F+8,24,4),this.bossHpBg.lineStyle(2,16729156),this.bossHpBg.strokeRoundedRect(b-4,I-4,F+8,24,4),this.bossHpBar=this.add.graphics().setScrollFactor(0).setDepth(101),this.bossNameText=this.add.text(J/2,I-2,` ${this.bossEntity.name} `,{fontSize:"10px",color:"#ff6666",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5,1).setScrollFactor(0).setDepth(102)}checkGauntletWaveCleared(){if(!this.gauntletActive||!this.gauntletConfig||!this.gauntletEnemies.every(B=>!B.alive))return;this.gauntletTotalWavesCleared++;const b=this.gauntletConfig.waves.length,I=this.gauntletCurrentWave+1;if(I<b){const B=this.add.text(J/2,ee/2-20,`Wave ${I}/${b} Cleared!`,{fontSize:"18px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(300);if(this.tweens.add({targets:B,y:ee/2-50,alpha:{from:1,to:0},duration:2e3,ease:"Quad.easeOut",onComplete:()=>B.destroy()}),this.cameras.main.flash(300,255,200,100),this.showLog(`Wave ${I}/${b} cleared!`),this.gauntletConfig.restBetweenWaves&&this.player.alive){const O=Math.floor(this.player.stats.maxHp*.2);this.player.stats.hp=Math.min(this.player.stats.maxHp,this.player.stats.hp+O),this.showLog(`Resting... Recovered ${O} HP!`),this.updateHUD()}this.bossEntity=null,this.time.delayedCall(3e3,()=>{this.spawnGauntletWave(this.gauntletCurrentWave+1)})}else{this.gauntletActive=!1,this.gauntletStairsLocked=!1,this.bossEntity=null;const B=this.add.text(J/2,ee/2-30,"GAUNTLET COMPLETE!",{fontSize:"20px",color:"#ffd700",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:5}).setOrigin(.5).setScrollFactor(0).setDepth(300);this.tweens.add({targets:B,y:ee/2-70,alpha:{from:1,to:0},scaleX:{from:1,to:1.4},scaleY:{from:1,to:1.4},duration:3e3,ease:"Quad.easeOut",onComplete:()=>B.destroy()}),this.spawnGauntletParticles(),this.cameras.main.shake(600,.02),this.cameras.main.flash(500,255,215,0);const O=ko(this.gauntletConfig,this.gauntletTotalWavesCleared),f=Ne(this.floorMutations,ye.GoldenAge)?Ge(ye.GoldenAge,"goldMult"):1;if(this.gold+=Math.floor(O.gold*f),this.totalExp+=O.exp,this.showLog(`Gauntlet complete! +${O.gold}G +${O.exp} EXP`),O.item){const x=We[O.item];if(x&&this.inventory.length<rt){const e=this.inventory.find(o=>o.item.id===x.id&&x.stackable);e?e.count++:this.inventory.push({item:x,count:1}),this.showLog(`Bonus: Received ${x.name}!`)}}this.cleanupGauntletHUD(),this.updateHUD()}}spawnGauntletParticles(){const F=[16766720,16737826,16729156,16755200,16777215];for(let b=0;b<20;b++){const I=J/2+(Math.random()-.5)*200,B=ee/2+(Math.random()-.5)*100,O=F[Math.floor(Math.random()*F.length)],f=2+Math.random()*4,x=this.add.graphics().setScrollFactor(0).setDepth(301);x.fillStyle(O,1),x.fillCircle(I,B,f),this.tweens.add({targets:x,x:(Math.random()-.5)*120,y:-40-Math.random()*80,alpha:{from:1,to:0},scaleX:{from:1,to:.2},scaleY:{from:1,to:.2},duration:800+Math.random()*600,ease:"Quad.easeOut",onComplete:()=>x.destroy()})}}cleanupGauntletHUD(){this.gauntletWaveText&&(this.gauntletWaveText.destroy(),this.gauntletWaveText=null),this.gauntletVignetteTween&&(this.gauntletVignetteTween.stop(),this.gauntletVignetteTween=null),this.gauntletVignette&&(this.gauntletVignette.destroy(),this.gauntletVignette=null),this.bossHpBg&&(this.bossHpBg.destroy(),this.bossHpBg=null),this.bossHpBar&&(this.bossHpBar.destroy(),this.bossHpBar=null),this.bossNameText&&(this.bossNameText.destroy(),this.bossNameText=null),this.legendaryHpBg&&(this.legendaryHpBg.destroy(),this.legendaryHpBg=null),this.legendaryHpBar&&(this.legendaryHpBar.destroy(),this.legendaryHpBar=null),this.legendaryNameText&&(this.legendaryNameText.destroy(),this.legendaryNameText=null),this.legendaryParticleTimer&&(this.legendaryParticleTimer.destroy(),this.legendaryParticleTimer=null),this.legendaryParticleGraphics&&(this.legendaryParticleGraphics.destroy(),this.legendaryParticleGraphics=null)}recruitEnemy(F){const b=F.speciesId?Te[F.speciesId]:null;if(!b)return;const I={tileX:F.tileX,tileY:F.tileY,facing:ge.Down,stats:{hp:Math.floor(F.stats.maxHp*.5),maxHp:F.stats.maxHp,atk:F.stats.atk,def:F.stats.def,level:F.stats.level},alive:!0,spriteKey:b.spriteKey,name:b.name,types:b.types,attackType:b.attackType,skills:et(b),statusEffects:[],isAlly:!0,speciesId:F.speciesId,ability:F.ability,allyTactic:ze.FollowMe},B=`${b.spriteKey}-idle`;if(this.textures.exists(B)){I.sprite=this.add.sprite(this.tileToPixelX(I.tileX),this.tileToPixelY(I.tileY),B).setScale(De).setDepth(10);const f=`${b.spriteKey}-idle-${ge.Down}`;this.anims.exists(f)&&I.sprite.play(f)}I.sprite&&I.sprite.setTint(16746700),this.time.delayedCall(400,()=>{I.sprite&&I.sprite.clearTint()});const O=this.add.text(this.tileToPixelX(I.tileX),this.tileToPixelY(I.tileY)-20,"",{fontSize:"18px",color:"#ff6b9d",fontFamily:"monospace"}).setOrigin(.5).setDepth(50);this.tweens.add({targets:O,y:O.y-30,alpha:{from:1,to:0},duration:1e3,ease:"Quad.easeOut",onComplete:()=>O.destroy()}),rs(),this.allies.push(I),this.allEntities.push(I),this.showLog(`${b.name} joined your team!`),this.updateHUD()}getEnemyActions(){return this.enemies.filter(F=>F.alive).map(F=>async()=>{if(!F.alive||!this.player.alive)return;if(As(F)){this.showLog(`${F.name} is paralyzed and can't move!`);return}this.tickEntityStatus(F);const b=[this.player,...this.allies].filter(B=>B.alive&&Xe(F.tileX,F.tileY,B.tileX,B.tileY)===1);if(b.length>0){const B=b.find(x=>x===this.player)??b[0],O=Bs(F,B);F.facing=O;const f=F.skills.filter(x=>x.currentPp>0&&x.power>0);if(f.length>0&&Math.random()<.4){const x=f[Math.floor(Math.random()*f.length)];x.currentPp--,await this.performSkill(F,x,O)}else await this.performBasicAttack(F,B);this.updateHUD();return}const I=Is(F,this.player,this.dungeon.terrain,this.dungeon.width,this.dungeon.height,this.allEntities);if(I!==null&&this.canEntityMove(F,I)&&(await this.moveEntity(F,I),this.checkEntityHazard(F,!1)),Ne(this.floorMutations,ye.FastEnemies)&&F.alive&&this.player.alive){const B=Ge(ye.FastEnemies,"doubleMoveChance");if(Math.random()<B){const O=Is(F,this.player,this.dungeon.terrain,this.dungeon.width,this.dungeon.height,this.allEntities);O!==null&&this.canEntityMove(F,O)&&(await this.moveEntity(F,O),this.checkEntityHazard(F,!1))}}})}getAllyActions(){return this.allies.filter(F=>F.alive).map(F=>async()=>{if(!F.alive||!this.player.alive||As(F))return;this.tickEntityStatus(F);const b=this.allies.indexOf(F),{moveDir:I,attackTarget:B}=hn(F,this.player,this.enemies,this.dungeon.terrain,this.dungeon.width,this.dungeon.height,this.allEntities,b>=0?b:0),O=wn(F,B,this.allies,this.player);if(O&&O.range===Je.Self)O.currentPp--,this.showAllySkillPopup(F,O),await this.performSkill(F,O,F.facing),this.updateHUD();else if(B){const f=ln(F,B);F.facing=f,O?(O.currentPp--,this.showAllySkillPopup(F,O),await this.performSkill(F,O,f)):await this.performBasicAttack(F,B),this.updateHUD()}else I!==null&&this.canEntityMove(F,I)&&(await this.moveEntity(F,I),this.recoverPP(F),this.checkEntityHazard(F,!1))})}showAllySkillPopup(F,b){if(!F.sprite)return;const I=F.sprite.x,B=F.sprite.y-20,O=this.add.text(I,B,b.name,{fontSize:"9px",color:"#a5f3fc",fontFamily:"monospace",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setDepth(300);this.tweens.add({targets:O,y:B-18,alpha:{from:1,to:0},duration:700,ease:"Quad.easeOut",onComplete:()=>O.destroy()})}serializeAllies(){return this.allies.filter(F=>F.alive).map(F=>({speciesId:F.speciesId,hp:F.stats.hp,maxHp:F.stats.maxHp,atk:F.stats.atk,def:F.stats.def,level:F.stats.level,skills:wi(F.skills)}))}formatTime(F){const b=Math.floor(F/60),I=F%60;return`${String(b).padStart(2,"0")}:${String(I).padStart(2,"0")}`}autoExploreBFS(){const{width:F,height:b,terrain:I}=this.dungeon,B=this.player.tileX,O=this.player.tileY,f=Array.from({length:b},()=>new Array(F).fill(-1)),x=Array.from({length:b},()=>new Array(F).fill(null));f[O][B]=0;const e=[[B,O]];let o=0;const m=[{dx:0,dy:-1},{dx:1,dy:0},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:-1},{dx:1,dy:1},{dx:-1,dy:1},{dx:-1,dy:-1}];for(;o<e.length;){const[n,r]=e[o++];for(const a of m){const t=n+a.dx,s=r+a.dy;if(t<0||t>=F||s<0||s>=b||f[s][t]!==-1||I[s][t]!==xe.GROUND||a.dx!==0&&a.dy!==0&&(I[r][n+a.dx]!==xe.GROUND||I[r+a.dy][n]!==xe.GROUND))continue;if(f[s][t]=f[r][n]+1,x[s][t]={dx:a.dx,dy:a.dy},!this.visited[s][t])return this.traceAutoExplorePath(B,O,t,s,x);this.allEntities.some(i=>i!==this.player&&i.alive&&i.tileX===t&&i.tileY===s)||e.push([t,s])}}return null}traceAutoExplorePath(F,b,I,B,O){let f=I,x=B;for(;;){const e=O[x][f];if(!e)return null;const o=f-e.dx,m=x-e.dy;if(o===F&&m===b)return this.dxdyToDirection(e.dx,e.dy);f=o,x=m}}dxdyToDirection(F,b){for(let I=0;I<8;I++)if(Ie[I]===F&&Be[I]===b)return I;return null}checkAutoExploreStop(){const F=this.player.tileX,b=this.player.tileY;if(!this.player.alive||this.gameOver)return"danger";for(const B of this.enemies)if(B.alive&&this.visited[B.tileY]?.[B.tileX]&&Xe(F,b,B.tileX,B.tileY)<=4)return`${B.name} spotted nearby!`;for(const B of this.floorItems)if(Xe(F,b,B.x,B.y)<=2&&this.visited[B.y]?.[B.x])return`Found ${B.item.name} nearby!`;const{stairsPos:I}=this.dungeon;return this.visited[I.y]?.[I.x]&&Xe(F,b,I.x,I.y)<=3?"Stairs nearby!":null}startAutoExplore(){if(this.autoExploring){this.stopAutoExplore("Cancelled.");return}if(this.turnManager.isBusy||!this.player.alive||this.gameOver||this.bagOpen||this.menuOpen||this.settingsOpen||this.shopOpen||this.teamPanelOpen||this.eventOpen||this.fullMapOpen)return;const F=this.checkAutoExploreStop();if(F){this.showLog(F);return}this.autoExploring=!0,this.showLog("Auto-exploring..."),this.showAutoExploreIndicator(),this.time.delayedCall(200,()=>{this.autoExploring&&this.input.on("pointerdown",this.onAutoExploreInterrupt,this)}),this.autoExploreStep()}async autoExploreStep(){if(!this.autoExploring)return;if(this.turnManager.isBusy){this.autoExploreTimer=this.time.delayedCall(50,()=>this.autoExploreStep());return}const F=this.checkAutoExploreStop();if(F){this.stopAutoExplore(F);return}const b=this.autoExploreBFS();if(b===null){this.stopAutoExplore("No more areas to explore.");return}if(!this.canEntityMove(this.player,b)){this.autoExploreTimer=this.time.delayedCall(100,()=>this.autoExploreStep());return}const I=this.player.stats.hp;this.player.facing=b,await this.turnManager.executeTurn(()=>this.moveEntity(this.player,b),[...this.getAllyActions(),...this.getEnemyActions()]),this.recoverPP(this.player);const B=this.floorItems.find(f=>f.x===this.player.tileX&&f.y===this.player.tileY);if(B){this.stopAutoExplore(`Found ${B.item.name}!`),this.tickBelly(),this.tickWeather(),this.tickEntityStatus(this.player),this.updateHUD();return}if(this.checkTraps(),this.checkPlayerHazard(),this.revealNearbyTraps(),this.checkShop(),this.checkMonsterHouse(),this.checkEventRoom(),this.checkPuzzleRoom(),this.tickBelly(),this.tickWeather(),this.tickEntityStatus(this.player),this.updateHUD(),!this.player.alive&&!this.gameOver){this.stopAutoExplore(),this.showGameOver();return}if(this.player.stats.hp<I){this.stopAutoExplore("Took damage!");return}if(!this.autoExploring)return;const O=this.checkAutoExploreStop();if(O){this.stopAutoExplore(O);return}this.autoExploreTimer=this.time.delayedCall(150,()=>this.autoExploreStep())}stopAutoExplore(F){this.autoExploring&&(this.autoExploring=!1,this.autoExploreTimer&&(this.autoExploreTimer.destroy(),this.autoExploreTimer=null),this.input.off("pointerdown",this.onAutoExploreInterrupt,this),this.hideAutoExploreIndicator(),F&&this.showLog(F))}showAutoExploreIndicator(){this.autoExploreText&&this.autoExploreText.destroy(),this.autoExploreTween&&this.autoExploreTween.destroy(),this.autoExploreText=this.add.text(J-8,66,"AUTO",{fontSize:"11px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#00000088",padding:{x:4,y:2}}).setOrigin(1,0).setScrollFactor(0).setDepth(105),this.autoExploreTween=this.tweens.add({targets:this.autoExploreText,alpha:{from:1,to:.5},duration:600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}hideAutoExploreIndicator(){this.autoExploreTween&&(this.autoExploreTween.destroy(),this.autoExploreTween=null),this.autoExploreText&&(this.autoExploreText.destroy(),this.autoExploreText=null)}}const vt=[{id:"firstRun",name:"First Steps",description:"Complete your first dungeon run",condition:G=>G.totalRuns>=1,icon:"I"},{id:"tenRuns",name:"Adventurer",description:"Complete 10 dungeon runs",condition:G=>G.totalRuns>=10,icon:"II"},{id:"fiftyRuns",name:"Veteran Explorer",description:"Complete 50 dungeon runs",condition:G=>G.totalRuns>=50,icon:"III"},{id:"hundredRuns",name:"Dungeon Master",description:"Complete 100 dungeon runs",condition:G=>G.totalRuns>=100,icon:"IV"},{id:"firstClear",name:"Victorious",description:"Clear your first dungeon",condition:G=>G.totalClears>=1,icon:"*"},{id:"tenClears",name:"Conqueror",description:"Clear 10 dungeons",condition:G=>G.totalClears>=10,icon:"**"},{id:"fiftyClears",name:"Legend",description:"Clear 50 dungeons",condition:G=>G.totalClears>=50,icon:"***"},{id:"hundredClears",name:"Mythic Explorer",description:"Clear 100 dungeons",condition:G=>G.totalClears>=100,icon:"****"},{id:"thousandGold",name:"Rich",description:"Earn 1,000 total gold",condition:G=>G.totalGold>=1e3,icon:"$"},{id:"tenThousandGold",name:"Wealthy",description:"Earn 10,000 total gold",condition:G=>G.totalGold>=1e4,icon:"$$"},{id:"hundredThousandGold",name:"Tycoon",description:"Earn 100,000 total gold",condition:G=>G.totalGold>=1e5,icon:"$$$"},{id:"hundredEnemies",name:"Fighter",description:"Defeat 100 enemies",condition:G=>G.totalEnemiesDefeated>=100,icon:"!"},{id:"thousandEnemies",name:"Warrior",description:"Defeat 1,000 enemies",condition:G=>G.totalEnemiesDefeated>=1e3,icon:"!!"},{id:"fiveThousandEnemies",name:"Champion",description:"Defeat 5,000 enemies",condition:G=>G.totalEnemiesDefeated>=5e3,icon:"!!!"},{id:"endless20",name:"Deep Diver",description:"Reach B20F in Endless Abyss",condition:G=>G.endlessBestFloor>=20,icon:"~"},{id:"endless50",name:"Abyss Walker",description:"Reach B50F in Endless Abyss",condition:G=>G.endlessBestFloor>=50,icon:"~~"},{id:"endless100",name:"Infinity",description:"Reach B100F in Endless Abyss",condition:G=>G.endlessBestFloor>=100,icon:"~~~"},{id:"challenge1",name:"Challenger",description:"Clear a challenge mode",condition:G=>G.challengeClears>=1,icon:"+"},{id:"challenge5",name:"Elite Challenger",description:"Clear 5 challenge modes",condition:G=>G.challengeClears>=5,icon:"++"},{id:"fiveStarters",name:"Collector",description:"Use 5 different starters",condition:G=>G.uniqueStartersUsed>=5,icon:"#"},{id:"twentyStarters",name:"Pokemon Trainer",description:"Use 20 different starters",condition:G=>G.uniqueStartersUsed>=20,icon:"##"}];class Vo extends $e.Scene{constructor(){super({key:"AchievementScene"}),this.activeTab="achievements",this.achFixedElements=[],this.scrollOffset=0,this.maxScroll=0,this.isDragging=!1,this.dragStartY=0,this.SCROLL_TOP=90,this.SCROLL_BOTTOM=ee-40,this.achMaxScroll=0,this.statsMaxScroll=0}create(){this.meta=Ye(),this.stats={totalRuns:this.meta.totalRuns,totalClears:this.meta.totalClears,totalGold:this.meta.totalGold,bestFloor:this.meta.bestFloor,totalEnemiesDefeated:this.meta.totalEnemiesDefeated??0,totalTurns:this.meta.totalTurns??0,endlessBestFloor:this.meta.endlessBestFloor??0,challengeClears:this.meta.challengeClears??0,uniqueStartersUsed:(this.meta.startersUsed??[]).length},this.add.rectangle(J/2,ee/2,J,ee,657946),this.add.text(J/2,18,"Stats & Achievements",{fontSize:"15px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.createTabs(),this.achievementContainer=this.add.container(0,0),this.statisticsContainer=this.add.container(0,0),this.buildAchievementsTab(),this.buildStatisticsTab();const F=this.SCROLL_BOTTOM-this.SCROLL_TOP,b=this.make.graphics({x:0,y:0});b.fillRect(0,this.SCROLL_TOP,J,F);const I=b.createGeometryMask();this.achievementContainer.setMask(I),this.statisticsContainer.setMask(I),this.setupScrollInput(),this.switchTab("achievements"),this.add.text(J/2,ee-20,"[Back to Town]",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive().on("pointerdown",()=>this.scene.start("HubScene"))}createTabs(){const b=J/4,I=J/4*3;this.tabAchBtn=this.add.text(b,42,"Achievements",{fontSize:"11px",color:"#ffffff",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setInteractive({useHandCursor:!0}),this.tabAchBtn.on("pointerdown",()=>this.switchTab("achievements")),this.tabStatsBtn=this.add.text(I,42,"Statistics",{fontSize:"11px",color:"#ffffff",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setInteractive({useHandCursor:!0}),this.tabStatsBtn.on("pointerdown",()=>this.switchTab("statistics")),this.tabAchUnderline=this.add.rectangle(b,54,90,2,16498468),this.tabStatsUnderline=this.add.rectangle(I,54,80,2,16498468),this.add.rectangle(J/2,60,J-20,1,2236996)}switchTab(F){this.activeTab=F,this.scrollOffset=0;const b="#fbbf24",I="#667eea";if(F==="achievements"){this.tabAchBtn.setColor(b),this.tabStatsBtn.setColor(I),this.tabAchUnderline.setVisible(!0),this.tabStatsUnderline.setVisible(!1),this.achievementContainer.setVisible(!0),this.achievementContainer.y=0,this.statisticsContainer.setVisible(!1);for(const B of this.achFixedElements)B.setVisible(!0);this.maxScroll=this.achMaxScroll}else{this.tabAchBtn.setColor(I),this.tabStatsBtn.setColor(b),this.tabAchUnderline.setVisible(!1),this.tabStatsUnderline.setVisible(!0),this.achievementContainer.setVisible(!1),this.statisticsContainer.setVisible(!0),this.statisticsContainer.y=0;for(const B of this.achFixedElements)B.setVisible(!1);this.maxScroll=this.statsMaxScroll}}setupScrollInput(){this.input.on("pointerdown",F=>{F.y>=this.SCROLL_TOP&&F.y<=this.SCROLL_BOTTOM&&(this.isDragging=!0,this.dragStartY=F.y)}),this.input.on("pointermove",F=>{if(!F.isDown||!this.isDragging)return;const b=F.y-this.dragStartY;this.dragStartY=F.y,this.scrollOffset=Math.max(-this.maxScroll,Math.min(0,this.scrollOffset+b)),this.activeTab==="achievements"?this.achievementContainer.y=this.scrollOffset:this.statisticsContainer.y=this.scrollOffset}),this.input.on("pointerup",()=>{this.isDragging=!1})}buildAchievementsTab(){const F=this.SCROLL_TOP,b=this.SCROLL_BOTTOM,I=this.achievementContainer,B=vt.filter(t=>t.condition(this.stats)),O=vt.filter(t=>!t.condition(this.stats)),f=this.add.text(J/2,F-8,`Unlocked: ${B.length} / ${vt.length}`,{fontSize:"10px",color:"#667eea",fontFamily:"monospace"}).setOrigin(.5);this.achFixedElements.push(f);const x=280,e=vt.length>0?B.length/vt.length:0,o=this.add.rectangle(J/2,F+4,x,4,2236996),m=this.add.rectangle(J/2-x/2+x*e/2,F+4,x*e,4,6717162);this.achFixedElements.push(o,m);let n=F+18;for(const t of[...B,...O]){const s=B.includes(t),l=this.add.rectangle(J/2,n,320,34,s?1714714:1710638,.9).setStrokeStyle(1,s?4906624:2236979),i=this.add.text(J/2-148,n-6,s?t.icon:"?",{fontSize:"12px",color:s?"#fbbf24":"#444460",fontFamily:"monospace",fontStyle:"bold"}),h=this.add.text(J/2-120,n-8,t.name,{fontSize:"10px",color:s?"#4ade80":"#444460",fontFamily:"monospace",fontStyle:"bold"}),d=this.add.text(J/2-120,n+5,t.description,{fontSize:"8px",color:s?"#94a3b8":"#333350",fontFamily:"monospace"});I.add([l,i,h,d]),n+=40}const r=n-F-18,a=b-F;this.achMaxScroll=Math.max(0,r-a+18)}buildStatisticsTab(){const F=this.statisticsContainer,b=this.SCROLL_TOP,I=this.SCROLL_BOTTOM,B=this.meta,O=this.stats,f=24,x=J-24;let e=b+4;const o=A=>{const D=this.add.text(f,e,A,{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"});F.add(D),e+=4;const W=this.add.rectangle(J/2,e+8,J-48,1,3355472);F.add(W),e+=14},m=(A,D,W="#ffffff")=>{const V=this.add.text(f+4,e,A,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}),K=this.add.text(x-4,e,D,{fontSize:"9px",color:W,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(1,0);F.add([V,K]),e+=16},n=(A=8)=>{e+=A};o("General Stats"),m("Total Runs",`${O.totalRuns}`),m("Total Clears",`${O.totalClears}`);const r=O.totalRuns>0?(O.totalClears/O.totalRuns*100).toFixed(1)+"%":"0.0%";m("Clear Rate",r,"#4ade80"),m("Total Gold Earned",this.formatNumber(O.totalGold),"#fbbf24"),m("Current Gold",this.formatNumber(B.gold),"#fbbf24"),m("Best Floor Reached",`B${O.bestFloor}F`),m("Total Turns Taken",this.formatNumber(O.totalTurns)),m("Total Enemies Defeated",this.formatNumber(O.totalEnemiesDefeated)),n(),o("Endless Mode"),m("Best Floor (Endless)",O.endlessBestFloor>0?`B${O.endlessBestFloor}F`:"---"),n(),o("Challenge Mode"),m("Total Challenge Clears",`${O.challengeClears}`);for(const A of kt){const D=O.challengeClears>0,W=`  ${A.name}`;m(W,D?"Cleared":"---",D?"#4ade80":"#444460")}n(),o("Collection");const a=this.getStarterList(),t=a.filter(A=>B.totalClears>=A.unlock).length;m("Starters Unlocked",`${t} / ${a.length}`,"#a855f7");const s=Object.keys(Te).length,l=(B.pokemonSeen??[]).length;m("Pokemon Seen",`${l} / ${s}`,"#60a5fa");const i=(B.pokemonUsed??[]).length;m("Pokemon Used as Starter",`${i} / ${s}`,"#60a5fa");const h=Object.keys(Qe).filter(A=>A!=="endlessDungeon"&&A!=="bossRush"&&A!=="dailyDungeon"),d=h.length,c=h.filter(A=>B.totalClears>=Qe[A].unlockClears).length;m("Dungeons Unlocked",`${c} / ${d}`,"#a855f7");const u=vt.filter(A=>A.condition(O)).length;m("Achievements Earned",`${u} / ${vt.length}`,"#667eea"),n(),o("Averages");const p=O.totalRuns>0?Math.floor(O.totalGold/O.totalRuns):0;m("Avg Gold per Run",this.formatNumber(p),"#fbbf24");const g=O.totalRuns>0?Math.floor(O.totalEnemiesDefeated/O.totalRuns):0;m("Avg Enemies per Run",`${g}`);const y=O.totalRuns>0?Math.floor(O.totalTurns/O.totalRuns):0;m("Avg Turns per Run",`${y}`),n(),o("Item Storage");const v=(B.storage??[]).reduce((A,D)=>A+D.count,0);m("Total Items in Storage",`${v}`);const S=(B.storage??[]).length;m("Unique Item Types",`${S}`),n(),o("Equipment");const w=(B.ownedHeldItems??[]).length;m("Held Items Owned",`${w}`);const T=B.equippedHeldItem??"None",C=T==="None"?"None":T.charAt(0).toUpperCase()+T.slice(1);m("Equipped Item",C,T==="None"?"#444460":"#f472b6");const M=Object.keys(B.abilityLevels??{}).length;m("Abilities Upgraded",`${M}`);const E=e-b,P=I-b;this.statsMaxScroll=Math.max(0,E-P+10)}formatNumber(F){return F>=1e6?(F/1e6).toFixed(1)+"M":F>=1e4?(F/1e3).toFixed(1)+"K":F.toLocaleString()}getStarterList(){return ya}}let Bt=null,Dt=null;function Na(){if(!Bt){Bt=new Map;for(const G of Qi){const F=Bt.get(G.from);F?F.push(G):Bt.set(G.from,[G])}}return Bt}function qi(){if(!Dt){Dt=new Map;for(const G of Qi)Dt.has(G.to)||Dt.set(G.to,G)}return Dt}function Yo(G){const F=qi();let b=G;const I=new Set;for(;!I.has(b);){I.add(b);const B=F.get(b);if(B)b=B.from;else break}return b}function Ko(G){const F=Yo(G);return Ua(F,void 0)}function Ua(G,F){const b=Na(),I=Te[G];let B,O,f;if(I)B=I.name,O=I.types,f=!0;else{const m=qi().get(G);B=m?m.newName:G;const n=m?Te[m.from]:null;O=n?n.types:[],f=!1}const e=(b.get(G)??[]).map(o=>Ua(o.to,o.level));return{speciesId:G,name:B,types:O,evolvesTo:e,evolveLevel:F,inSpecies:f}}function $o(G){const F=Na(),b=qi();return F.has(G)||b.has(G)}const Rt={Water:"#6390F0",Fire:"#EE8130",Grass:"#7AC74C",Electric:"#F7D02C",Poison:"#A33EA1",Ground:"#E2BF65",Rock:"#B6A136",Bug:"#A6B91A",Fighting:"#C22E28",Steel:"#B7B7CE",Ghost:"#735797",Psychic:"#F95587",Ice:"#96D9D6",Dark:"#705746",Fairy:"#D685AD",Dragon:"#6F35FC",Flying:"#A98FF3",Normal:"#A8A77A"};class Zo extends $e.Scene{constructor(){super({key:"PokedexScene"})}create(){const F=Ye(),b=new Set(F.pokemonSeen??[]),I=new Set(F.pokemonUsed??[]),B=Object.values(Te);B.sort((U,Y)=>U.name.localeCompare(Y.name));const O=B.length,f=B.filter(U=>b.has(U.id)).length;let x=!1,e=[];this.add.rectangle(J/2,ee/2,J,ee,657946),this.add.text(J/2,20,"Pokemon Codex",{fontSize:"16px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,40,`Seen: ${f} / ${O}`,{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);const o=280,m=O>0?f/O:0;this.add.rectangle(J/2,53,o,4,2236996),m>0&&this.add.rectangle(J/2-o/2+o*m/2,53,o*m,4,6717162);let n="all";const r=68,a=90,t=[{mode:"all",label:"All"},{mode:"seen",label:"Seen"},{mode:"used",label:"Used"}],s=[],l=[];for(let U=0;U<t.length;U++){const Y=J/2+(U-1)*(a+4),$=this.add.rectangle(Y,r,a,18,1710638,.95).setStrokeStyle(1,3359061).setInteractive({useHandCursor:!0}),Z=this.add.text(Y,r,t[U].label,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);s.push($),l.push(Z);const Q=t[U].mode;$.on("pointerdown",()=>{x||(n=Q,i(),P())})}const i=()=>{for(let U=0;U<t.length;U++){const Y=t[U].mode===n;s[U].setFillStyle(Y?2763342:1710638,.95),s[U].setStrokeStyle(1,Y?6717162:3359061),l[U].setColor(Y?"#667eea":"#94a3b8")}};i();const h=82,d=ee-35,c=d-h,u=32,p=Math.ceil(c/u)+2,g=this.make.graphics({x:0,y:0});g.fillRect(0,h,J,c);const y=g.createGeometryMask(),v=this.add.container(0,0).setMask(y),S=[];for(let U=0;U<p;U++){const Y=this.add.rectangle(J/2,0,340,u-2,1710638,.9).setStrokeStyle(1,2236979),$=this.add.text(12,0,"",{fontSize:"8px",color:"#555570",fontFamily:"monospace"}),Z=this.add.text(50,0,"",{fontSize:"10px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"}),Q=this.add.text(180,0,"",{fontSize:"8px",color:"#94a3b8",fontFamily:"monospace"}),q=this.add.text(268,0,"",{fontSize:"8px",color:"#777790",fontFamily:"monospace"}),j=this.add.text(40,0,"",{fontSize:"9px",color:"#fbbf24",fontFamily:"monospace"});v.add([Y,$,Z,Q,q,j]),S.push({bg:Y,idxText:$,nameText:Z,typeText:Q,statsText:q,starIcon:j,idx:-1})}let w=[];const T=()=>{switch(n){case"seen":return B.filter(U=>b.has(U.id));case"used":return B.filter(U=>I.has(U.id));default:return B}};let C=0,M=0;const E=(U,Y,$)=>{U.idx=Y;const Z=$;if(U.bg.setY(Z),Y<0||Y>=w.length){U.bg.setVisible(!1),U.idxText.setVisible(!1),U.nameText.setVisible(!1),U.typeText.setVisible(!1),U.statsText.setVisible(!1),U.starIcon.setVisible(!1);return}const Q=w[Y],q=b.has(Q.id),j=I.has(Q.id);if(U.bg.setVisible(!0),U.idxText.setVisible(!0),U.nameText.setVisible(!0),U.typeText.setVisible(!0),U.statsText.setVisible(!0),U.starIcon.setVisible(!0),q){const _=B.indexOf(Q)+1,te=String(_).padStart(4,"0");U.idxText.setText(te).setColor("#555570").setY(Z-4),U.nameText.setText(Q.name).setColor("#e0e0e0").setY(Z-6);const se=Q.types.map(he=>he).join("/"),ie=Rt[Q.types[0]]??"#94a3b8";U.typeText.setText(se).setColor(ie).setY(Z-6);const ne=Q.baseStats;U.statsText.setText(`${ne.hp}/${ne.atk}/${ne.def}`).setColor("#777790").setY(Z-6),U.bg.setStrokeStyle(1,j?4906624:2236979),U.starIcon.setText(j?"":"").setY(Z-5)}else U.idxText.setText("????").setColor("#333350").setY(Z-4),U.nameText.setText("???").setColor("#333350").setY(Z-6),U.typeText.setText("???").setColor("#333350").setY(Z-6),U.statsText.setText("??/??/??").setColor("#333350").setY(Z-6),U.bg.setStrokeStyle(1,2236979),U.starIcon.setText("").setY(Z-5)},P=()=>{w=T();const U=w.length*u;M=Math.max(0,U-c),C=Math.min(C,M);const Y=Math.floor(C/u);for(let $=0;$<p;$++){const Z=Y+$,Q=h+10+Z*u-C;E(S[$],Z,Q)}if(M>0){A.setVisible(!0);const $=Math.max(20,c/U*c);A.setSize(3,$);const Z=M>0?C/M:0;A.y=h+Z*(c-$)}else A.setVisible(!1)},A=this.add.rectangle(J-4,h,3,20,6717162,.5).setOrigin(.5,0).setVisible(!1);P();let D=0,W=0,V=!1,K=0;const X=6;this.input.on("pointerdown",U=>{x||U.y>=h&&U.y<=d&&(D=U.y,W=U.x,V=!0,K=0)}),this.input.on("pointermove",U=>{if(x||!U.isDown||!V)return;const Y=U.y-D;K+=Math.abs(Y)+Math.abs(U.x-W),D=U.y,W=U.x,C=Math.max(0,Math.min(M,C-Y)),P()}),this.input.on("pointerup",U=>{x||(V&&K<X&&R(U.y),V=!1)});const R=U=>{if(U<h||U>d)return;const Y=U-h+C-10,$=Math.floor(Y/u);if($<0||$>=w.length)return;const Z=w[$];b.has(Z.id)&&N(Z)};this.add.rectangle(J/2,h-4,340,12,657946),this.add.text(12,h-8,"#",{fontSize:"7px",color:"#555570",fontFamily:"monospace"}),this.add.text(50,h-8,"Name",{fontSize:"7px",color:"#555570",fontFamily:"monospace"}),this.add.text(180,h-8,"Type",{fontSize:"7px",color:"#555570",fontFamily:"monospace"}),this.add.text(268,h-8,"HP/ATK/DEF",{fontSize:"7px",color:"#555570",fontFamily:"monospace"}),this.add.text(J/2,ee-18,"[Back to Town]",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{x||this.scene.start("HubScene")});const L=()=>{for(const U of e)U.destroy();e=[],x=!1},N=U=>{x&&L(),x=!0;const Y=330,$=520,Z=J/2,Q=ee/2,q=this.add.rectangle(J/2,ee/2,J,ee,0,.7).setInteractive().setDepth(100);q.on("pointerdown",()=>L()),e.push(q);const j=this.add.rectangle(Z,Q,Y,$,1118498,.98).setStrokeStyle(2,6717162).setDepth(101).setInteractive();e.push(j);let _=Q-$/2+20;const te=Z-Y/2+16,se=Z,ie=this.add.text(se,_,U.name,{fontSize:"18px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(102);e.push(ie),_+=24;const ne=[];for(const Fe of U.types)ne.push(Fe);const he=ne.join(" / "),ue=Rt[U.types[0]]??"#94a3b8",ae=this.add.text(se,_,he,{fontSize:"11px",color:ue,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(102);e.push(ae),_+=20;const oe=U.baseStats,le=this.add.text(se,_,`HP: ${oe.hp}  ATK: ${oe.atk}  DEF: ${oe.def}`,{fontSize:"10px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5).setDepth(102);e.push(le),_+=14;const fe=120,de=6,me=[{label:"HP",value:oe.hp,max:80,color:4906624},{label:"ATK",value:oe.atk,max:30,color:15680580},{label:"DEF",value:oe.def,max:20,color:6333946}];for(const Fe of me){const Re=this.add.text(te,_,Fe.label,{fontSize:"8px",color:"#94a3b8",fontFamily:"monospace"}).setDepth(102);e.push(Re);const Oe=te+30,Le=this.add.rectangle(Oe+fe/2,_+3,fe,de,2236996).setDepth(102);e.push(Le);const je=Math.min(1,Fe.value/Fe.max);if(je>0){const Ut=fe*je,yi=this.add.rectangle(Oe+Ut/2,_+3,Ut,de,Fe.color).setDepth(102);e.push(yi)}const at=this.add.text(Oe+fe+6,_,String(Fe.value),{fontSize:"8px",color:"#e0e0e0",fontFamily:"monospace"}).setDepth(102);e.push(at),_+=14}_+=4;const pe=this.add.text(te,_,"-- Skills --",{fontSize:"9px",color:"#667eea",fontFamily:"monospace",fontStyle:"bold"}).setDepth(102);e.push(pe),_+=14;const ve=new Set;for(const Fe of U.skillIds){const Re=Me[Fe];if(!Re)continue;ve.add(Fe);const Oe=Rt[Re.type]??"#94a3b8",Le=this.add.text(te+4,_,`${Re.name} (${Re.type}, Pow:${Re.power})`,{fontSize:"8px",color:Oe,fontFamily:"monospace"}).setDepth(102);e.push(Le),_+=12}const we=Ma[U.id];if(we)for(const[Fe,Re]of Object.entries(we)){if(ve.has(Re))continue;ve.add(Re);const Oe=Me[Re];if(!Oe)continue;const Le=Rt[Oe.type]??"#94a3b8",je=this.add.text(te+4,_,`Lv${Fe}: ${Oe.name} (${Oe.type})`,{fontSize:"8px",color:Le,fontFamily:"monospace"}).setDepth(102);e.push(je),_+=12}_+=6;const Ae=this.add.text(te,_,"-- Evolution Chain --",{fontSize:"9px",color:"#667eea",fontFamily:"monospace",fontStyle:"bold"}).setDepth(102);if(e.push(Ae),_+=16,$o(U.id)){const Fe=Ko(U.id);_=z(Fe,se,_,0)}else{const Fe=this.add.text(se,_,"Does not evolve",{fontSize:"9px",color:"#555570",fontFamily:"monospace"}).setOrigin(.5).setDepth(102);e.push(Fe),_+=14}const Se=Q+$/2-22,Ce=this.add.rectangle(se,Se,100,22,2763342,.95).setStrokeStyle(1,6717162).setDepth(102).setInteractive({useHandCursor:!0});Ce.on("pointerdown",()=>L()),e.push(Ce);const Ee=this.add.text(se,Se,"[Close]",{fontSize:"11px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setDepth(102);e.push(Ee)},z=(U,Y,$,Z)=>{let Q=$;const q=b.has(U.speciesId),j=I.has(U.speciesId);let _="#555570";j?_="#4ade80":q&&(_="#e0e0e0"),!U.inSpecies&&!q&&(_=Z!==0?"#777790":"#555570");const te=q||U.inSpecies?U.name:"???";let se="";Z>0&&(se="  ".repeat(Z));const ie=U.evolveLevel?` (Lv.${U.evolveLevel})`:"";if(Z>0){const ne=Q-6,he=this.add.text(Y,ne,`${se}-> ${te}${ie}`,{fontSize:"9px",color:_,fontFamily:"monospace"}).setOrigin(.5).setDepth(102);if(e.push(he),j){const ue=this.add.text(Y+he.width/2+6,ne,"",{fontSize:"8px",color:"#fbbf24",fontFamily:"monospace"}).setOrigin(0,.5).setDepth(102);e.push(ue)}}else{const ne=this.add.text(Y,Q-6,`${te}`,{fontSize:"10px",color:_,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(102);if(e.push(ne),j){const he=this.add.text(Y+ne.width/2+6,Q-6,"",{fontSize:"8px",color:"#fbbf24",fontFamily:"monospace"}).setOrigin(0,.5).setDepth(102);e.push(he)}}if((q||U.inSpecies)&&U.types.length>0){const ne=U.types.join("/"),he=Rt[U.types[0]]??"#94a3b8",ue=this.add.text(Y,Q+4,ne,{fontSize:"7px",color:he,fontFamily:"monospace"}).setOrigin(.5).setDepth(102);e.push(ue),Q+=20}else Q+=14;if(U.evolvesTo.length===1)Q=z(U.evolvesTo[0],Y,Q,Z+1);else if(U.evolvesTo.length>1)for(const ne of U.evolvesTo)Q=z(ne,Y,Q,Z+1);return Q}}}function Jo(G,F){const b=Te[G];if(!b)return[];const I=b.types,B=[];for(const[O,f]of Object.entries(Me)){const x=I.includes(f.type),e=f.type===k.Normal;if(!x&&!e)continue;let o;f.power===0?o=150:f.power<=10?o=80+f.power*8:f.power<=16?o=120+f.power*14:o=200+f.power*18,x&&!e&&(o=Math.floor(o*.85));let m;f.power<=10?m=0:f.power<=14?m=1:f.power<=18?m=3:m=5,B.push({skillId:O,cost:o,requiredClears:m})}return B.filter(O=>O.requiredClears<=F).sort((O,f)=>O.cost-f.cost)}const ti={[Je.Front1]:"1-tile",[Je.Front2]:"2-tile",[Je.FrontLine]:"Line",[Je.Around]:"Around",[Je.Room]:"Room",[Je.Self]:"Self"},ii={Normal:"#a8a878",Water:"#6890f0",Fire:"#f08030",Grass:"#78c850",Electric:"#f8d030",Flying:"#a890f0",Poison:"#a040a0",Ground:"#e0c068",Rock:"#b8a038",Bug:"#a8b820",Fighting:"#c03028",Steel:"#b8b8d0",Ghost:"#705898",Psychic:"#f85888",Ice:"#98d8d8",Dark:"#705848",Fairy:"#ee99ac",Dragon:"#7038f8"};class Qo extends $e.Scene{constructor(){super({key:"MoveTutorScene"}),this.currentSkills=[],this.availableMoves=[],this.currentSkillObjects=[],this.moveListObjects=[],this.confirmUI=[],this.scrollOffset=0,this.maxScroll=0,this.scrollTop=0,this.scrollHeight=0}create(){this.meta=Ye(),this.starterId=this.meta.starter??"mudkip";const F=Te[this.starterId];if(!F){this.scene.start("HubScene");return}const b=this.meta.customSkills?.[this.starterId];b&&b.length>0?this.currentSkills=[...b]:this.currentSkills=[...F.skillIds.slice(0,4)],this.availableMoves=Jo(this.starterId,this.meta.totalClears),this.add.rectangle(J/2,ee/2,J,ee,986906),this.add.text(J/2,24,"Move Tutor",{fontSize:"16px",color:"#a855f7",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);const I=F.types.join(" / ");this.add.text(J/2,48,`${F.name}  (${I})`,{fontSize:"11px",color:"#e0e0e0",fontFamily:"monospace"}).setOrigin(.5),this.goldText=this.add.text(J/2,66,`Gold: ${this.meta.gold}`,{fontSize:"11px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5),this.add.text(15,86,"Current Skills:",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace",fontStyle:"bold"}),this.renderCurrentSkills(),this.add.text(15,200,"Available Moves:",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace",fontStyle:"bold"}),this.scrollTop=218;const B=ee-50;this.scrollHeight=B-this.scrollTop-10,this.scrollContainer=this.add.container(0,0).setDepth(10);const O=this.make.graphics({x:0,y:0});O.fillRect(0,this.scrollTop,J,this.scrollHeight);const f=O.createGeometryMask();this.scrollContainer.setMask(f),this.renderMoveList(),this.input.on("wheel",(m,n,r,a)=>{this.scroll(a)});let x=0,e=0;this.input.on("pointerdown",m=>{m.y>=this.scrollTop&&m.y<=this.scrollTop+this.scrollHeight&&(x=m.y,e=this.scrollOffset)}),this.input.on("pointermove",m=>{if(m.isDown&&x>=this.scrollTop){const n=x-m.y;this.scrollTo(e+n)}}),this.add.rectangle(J/2,ee-28,J,56,986906).setDepth(50),this.add.text(J/2,ee-30,"[Back to Town]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive().setDepth(51).on("pointerdown",()=>{this.scene.start("HubScene")})}scroll(F){this.scrollTo(this.scrollOffset+F*.5)}scrollTo(F){this.scrollOffset=Math.max(0,Math.min(this.maxScroll,F)),this.scrollContainer.setY(-this.scrollOffset)}renderCurrentSkills(){for(const F of this.currentSkillObjects)F.destroy();this.currentSkillObjects=[];for(let F=0;F<4;F++){const b=104+F*24,I=this.currentSkills[F];if(I&&Me[I]){const B=Me[I],O=ii[B.type]??"#a8a878",f=ti[B.range]??B.range,x=this.add.text(15,b,`[${F+1}]`,{fontSize:"10px",color:"#666680",fontFamily:"monospace"}),e=this.add.text(40,b,B.name,{fontSize:"10px",color:O,fontFamily:"monospace",fontStyle:"bold"}),o=B.power>0?`Pwr:${B.power}  ${f}`:`${f}`,m=this.add.text(160,b,o,{fontSize:"9px",color:"#888888",fontFamily:"monospace"}),n=this.add.text(290,b,B.type,{fontSize:"8px",color:O,fontFamily:"monospace"});this.currentSkillObjects.push(x,e,m,n)}else{const B=this.add.text(15,b,`[${F+1}]`,{fontSize:"10px",color:"#666680",fontFamily:"monospace"}),O=this.add.text(40,b,"(empty)",{fontSize:"10px",color:"#444460",fontFamily:"monospace"});this.currentSkillObjects.push(B,O)}}}renderMoveList(){this.scrollContainer.removeAll(!0);for(const B of this.moveListObjects)B.destroy();this.moveListObjects=[];let F=this.scrollTop;const b=42;for(const B of this.availableMoves){const O=Me[B.skillId];if(!O||this.currentSkills.includes(B.skillId))continue;const f=ii[O.type]??"#a8a878",x=ti[O.range]??O.range,e=this.meta.gold>=B.cost,o=this.add.rectangle(J/2,F+b/2,J-16,b-4,1710638,.85).setStrokeStyle(1,e?3359061:2236979);this.scrollContainer.add(o);const m=this.add.text(18,F+4,O.name,{fontSize:"10px",color:f,fontFamily:"monospace",fontStyle:"bold"});this.scrollContainer.add(m);const n=O.power>0?`Pwr:${O.power}`:"Status",r=this.add.text(18,F+20,`${n}  ${x}  ${O.type}`,{fontSize:"8px",color:"#888888",fontFamily:"monospace"});this.scrollContainer.add(r);const a=O.description.length>30?O.description.substring(0,28)+"..":O.description,t=this.add.text(150,F+4,a,{fontSize:"7px",color:"#666680",fontFamily:"monospace",wordWrap:{width:180}});this.scrollContainer.add(t);const s=this.add.text(J-18,F+12,`${B.cost}G`,{fontSize:"11px",color:e?"#fde68a":"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(1,0);this.scrollContainer.add(s),e&&(o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>o.setFillStyle(2763342,1)),o.on("pointerout",()=>o.setFillStyle(1710638,.85)),o.on("pointerdown",()=>{this.showLearnConfirm(B)})),F+=b}const I=F-this.scrollTop;this.maxScroll=Math.max(0,I-this.scrollHeight),this.scrollOffset=0,this.scrollContainer.setY(0)}showLearnConfirm(F){this.clearConfirmUI();const b=Me[F.skillId];if(!b)return;const I=ii[b.type]??"#a8a878",B=this.add.rectangle(J/2,ee/2,J,ee,0,.7).setDepth(100).setInteractive();this.confirmUI.push(B);const O=280,f=ee/2-20,x=this.add.rectangle(J/2,f,J-30,O,1710638,.95).setStrokeStyle(2,11032055).setDepth(101);this.confirmUI.push(x);const e=this.add.text(J/2,f-O/2+20,`Learn ${b.name}?`,{fontSize:"14px",color:I,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(102);this.confirmUI.push(e);const o=ti[b.range]??b.range,m=b.power>0?`Power: ${b.power}`:"Status Move",n=this.add.text(J/2,f-O/2+42,`${m}  |  ${o}  |  ${b.type}`,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5).setDepth(102);this.confirmUI.push(n);const r=this.add.text(J/2,f-O/2+58,b.description,{fontSize:"8px",color:"#666680",fontFamily:"monospace",wordWrap:{width:280}}).setOrigin(.5).setDepth(102);this.confirmUI.push(r);const a=this.add.text(J/2,f-O/2+76,`Cost: ${F.cost}G`,{fontSize:"11px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5).setDepth(102);this.confirmUI.push(a);const t=this.add.text(J/2,f-O/2+100,"Replace which skill?",{fontSize:"11px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(102);this.confirmUI.push(t);for(let i=0;i<4;i++){const h=f-O/2+125+i*32,d=this.currentSkills[i],c=d?Me[d]:null,u=this.add.rectangle(J/2,h+8,J-60,28,2236992,.9).setStrokeStyle(1,4478310).setDepth(102).setInteractive({useHandCursor:!0});if(this.confirmUI.push(u),c){const p=ii[c.type]??"#a8a878",g=ti[c.range]??c.range,y=c.power>0?`Pwr:${c.power}`:"Status",v=this.add.text(30,h+1,`[${i+1}] ${c.name}  ${y}  ${g}`,{fontSize:"9px",color:p,fontFamily:"monospace"}).setDepth(103);this.confirmUI.push(v)}else{const p=this.add.text(30,h+1,`[${i+1}] (empty)`,{fontSize:"9px",color:"#444460",fontFamily:"monospace"}).setDepth(103);this.confirmUI.push(p)}u.on("pointerover",()=>u.setFillStyle(3816030,1)),u.on("pointerout",()=>u.setFillStyle(2236992,.9)),u.on("pointerdown",()=>{this.learnSkill(F,i)})}const s=f+O/2-22,l=this.add.text(J/2,s,"[Cancel]",{fontSize:"12px",color:"#ef4444",fontFamily:"monospace"}).setOrigin(.5).setDepth(102).setInteractive({useHandCursor:!0});this.confirmUI.push(l),l.on("pointerdown",()=>this.clearConfirmUI())}learnSkill(F,b){if(this.meta.gold<F.cost){this.clearConfirmUI();return}if(!Me[F.skillId]){this.clearConfirmUI();return}this.meta.gold-=F.cost,this.meta.customSkills||(this.meta.customSkills={}),this.currentSkills[b]=F.skillId,this.meta.customSkills[this.starterId]=[...this.currentSkills],Ke(this.meta),this.clearConfirmUI(),this.goldText.setText(`Gold: ${this.meta.gold}`),this.renderCurrentSkills(),this.renderMoveList(),this.scrollTo(0)}clearConfirmUI(){for(const F of this.confirmUI)F.destroy();this.confirmUI=[]}}class jo extends $e.Scene{constructor(){super({key:"HeldItemScene"}),this.scrollOffset=0,this.maxScroll=0}create(){this.meta=Ye(),this.add.rectangle(J/2,ee/2,J,ee,986906),this.add.text(J/2,25,"Held Items",{fontSize:"18px",color:"#f59e0b",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.goldText=this.add.text(J/2,50,`Gold: ${this.meta.gold}`,{fontSize:"13px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5);const F=this.meta.equippedHeldItem?ci(this.meta.equippedHeldItem):void 0,b=li(this.meta);let I="Equipped: None",B="#666680";F&&(I=b?`Equipped: ${F.name} [${b.name}]`:`Equipped: ${F.name}`,B=b?Ns(b.tier):"#4ade80"),this.equippedText=this.add.text(J/2,70,I,{fontSize:"11px",color:B,fontFamily:"monospace"}).setOrigin(.5),this.add.text(J/2,90,"",{fontSize:"8px",color:"#334155",fontFamily:"monospace"}).setOrigin(.5);const O=100,f=ee-55,x=f-O;this.listContainer=this.add.container(0,0).setDepth(10);const e=this.make.graphics({x:0,y:0});e.fillRect(0,O,J,x);const o=e.createGeometryMask();this.listContainer.setMask(o),this.renderItemList(O);const m=this.getContentHeight();this.maxScroll=Math.max(0,m-x);const n=this.add.rectangle(J-4,O,3,20,6717162,.5).setOrigin(.5,0).setDepth(11).setVisible(this.maxScroll>0);if(this.maxScroll>0){const s=Math.max(20,x/m*x);n.setSize(3,s)}const r=()=>{if(this.maxScroll<=0)return;const s=n.height,l=-this.scrollOffset/this.maxScroll;n.y=O+l*(x-s)};let a=0;this.input.on("pointerdown",s=>{s.y>=O&&s.y<=f&&(a=s.y)}),this.input.on("pointermove",s=>{if(!s.isDown||s.y<O||s.y>f)return;const l=s.y-a;a=s.y,this.scrollOffset=Math.max(-this.maxScroll,Math.min(0,this.scrollOffset+l)),this.listContainer.y=this.scrollOffset,r()}),this.add.rectangle(J/2,ee-30,J,50,986906).setDepth(50),this.add.text(J/2,ee-30,"[Back to Town]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive().setDepth(51).on("pointerdown",()=>{this.scene.start("HubScene")})}getContentHeight(){let F=10;const b=this.meta.ownedHeldItems??[],I=Lt.filter(x=>b.includes(x.id)),B=Lt.filter(x=>!b.includes(x.id));I.length>0&&(F+=20,F+=I.length*56,F+=10),B.length>0&&(F+=20,F+=B.length*56),F+=15,F+=20;const O=Ws(this.meta.totalClears);return F+=O.length*56,O.length<10&&(F+=20),F+=20,F}renderItemList(F){this.listContainer.removeAll(!0);let b=F+10;const I=this.meta.ownedHeldItems??[],B=this.meta.equippedHeldItem,O=Lt.filter(x=>I.includes(x.id)),f=Lt.filter(x=>!I.includes(x.id));if(O.length>0){const x=this.add.text(15,b," Owned Items ",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"});this.listContainer.add(x),b+=20;for(const e of O){const o=B===e.id;this.renderOwnedItem(e,b,o),b+=56}b+=10}if(f.length>0){const x=this.add.text(15,b," Shop ",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"});this.listContainer.add(x),b+=20;for(const e of f)this.renderShopItem(e,b),b+=56}b+=15,this.renderEnchantmentSection(b)}renderOwnedItem(F,b,I){const O=this.add.rectangle(J/2,b+20,320,50,1710638,.9).setStrokeStyle(1,I?4906624:3359061);this.listContainer.add(O);const f=I?"#4ade80":"#e0e0e0",x=I?"* ":"",e=I?li(this.meta):null,o=e?` [${e.name}]`:"",m=this.add.text(J/2-320/2+12,b+8,`${x}${F.name}${o}`,{fontSize:"12px",color:f,fontFamily:"monospace",fontStyle:"bold"});this.listContainer.add(m);const n=this.add.text(J/2-320/2+12,b+24,F.description,{fontSize:"9px",color:"#888898",fontFamily:"monospace"});if(this.listContainer.add(n),I){const r=this.add.text(J/2+160-12,b+16,"[Unequip]",{fontSize:"10px",color:"#ef4444",fontFamily:"monospace",backgroundColor:"#2e1a1a",padding:{x:6,y:4}}).setOrigin(1,0).setInteractive();this.listContainer.add(r),r.on("pointerdown",()=>{this.meta.equippedHeldItem=void 0,Ke(this.meta),this.scene.restart()})}else{const r=this.add.text(J/2+160-12,b+16,"[Equip]",{fontSize:"10px",color:"#4ade80",fontFamily:"monospace",backgroundColor:"#1a2e1a",padding:{x:6,y:4}}).setOrigin(1,0).setInteractive();this.listContainer.add(r),r.on("pointerdown",()=>{this.meta.equippedHeldItem=F.id,Ke(this.meta),this.scene.restart()})}}renderShopItem(F,b){const B=this.meta.totalClears>=F.unlockClears,O=this.meta.gold>=F.cost,f=this.add.rectangle(J/2,b+20,320,50,1710638,.9).setStrokeStyle(1,B?3359061:2236979);if(this.listContainer.add(f),!B){const m=this.add.text(J/2-160+12,b+8,`??? (${F.unlockClears} clears)`,{fontSize:"12px",color:"#444460",fontFamily:"monospace",fontStyle:"bold"}),n=this.add.text(J/2-320/2+12,b+24,`Need ${F.unlockClears} clears to unlock`,{fontSize:"9px",color:"#333348",fontFamily:"monospace"});this.listContainer.add([m,n]);return}const x=this.add.text(J/2-320/2+12,b+8,F.name,{fontSize:"12px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"});this.listContainer.add(x);const e=this.add.text(J/2-320/2+12,b+24,`${F.description}  |  ${F.cost}G`,{fontSize:"9px",color:O?"#888898":"#664444",fontFamily:"monospace"});this.listContainer.add(e);const o=this.add.text(J/2+320/2-12,b+16,"[Buy]",{fontSize:"10px",color:O?"#fbbf24":"#444460",fontFamily:"monospace",backgroundColor:O?"#2e2a1a":"#1a1a1a",padding:{x:6,y:4}}).setOrigin(1,0);this.listContainer.add(o),O&&(o.setInteractive(),o.on("pointerdown",()=>{this.purchaseItem(F)}))}renderEnchantmentSection(F){let b=F;const I=320,B=this.add.text(15,b," Enchantments ",{fontSize:"10px",color:"#c084fc",fontFamily:"monospace"});this.listContainer.add(B),b+=20;const O=!!this.meta.equippedHeldItem,f=li(this.meta),x=Ws(this.meta.totalClears);for(const m of x){const n=f?.id===m.id,r=this.meta.gold>=m.goldCost,a=Ns(m.tier),t=Kn(m.tier),s=this.add.rectangle(J/2,b+20,I,50,1710638,.9).setStrokeStyle(1,n?12616956:2763326);this.listContainer.add(s);const l=`${t} ${m.name}`,i=this.add.text(J/2-I/2+12,b+8,l,{fontSize:"12px",color:n?"#c084fc":a,fontFamily:"monospace",fontStyle:"bold"});this.listContainer.add(i);const h=n?"(Active)":`${m.goldCost}G`,d=`${m.description}  |  ${h}`,c=n?"#a78bfa":r&&O?"#888898":"#554444",u=this.add.text(J/2-I/2+12,b+24,d,{fontSize:"9px",color:c,fontFamily:"monospace"});if(this.listContainer.add(u),n){const p=this.add.text(J/2+I/2-12,b+16,"[Active]",{fontSize:"10px",color:"#c084fc",fontFamily:"monospace",backgroundColor:"#2a1a3e",padding:{x:6,y:4}}).setOrigin(1,0);this.listContainer.add(p)}else{const p=O&&r;let g="[Enchant]",y="#c084fc",v="#2a1a3e";O?r||(y="#444460",v="#1a1a1a"):(g="[No Item]",y="#444460",v="#1a1a1a");const S=this.add.text(J/2+I/2-12,b+16,g,{fontSize:"10px",color:y,fontFamily:"monospace",backgroundColor:v,padding:{x:6,y:4}}).setOrigin(1,0);this.listContainer.add(S),p&&(S.setInteractive(),S.on("pointerdown",()=>{this.applyEnchantment(m)}))}b+=56}const o=10-x.length;if(o>0){const m=this.add.text(J/2,b+5,`${o} more enchantment${o>1?"s":""} unlock with more clears...`,{fontSize:"9px",color:"#444460",fontFamily:"monospace"}).setOrigin(.5,0);this.listContainer.add(m)}}applyEnchantment(F){this.meta.gold<F.goldCost||this.meta.equippedHeldItem&&(this.meta.gold-=F.goldCost,this.meta.enchantmentId=F.id,Ke(this.meta),this.scene.restart())}purchaseItem(F){this.meta.gold<F.cost||(this.meta.gold-=F.cost,this.meta.ownedHeldItems||(this.meta.ownedHeldItems=[]),this.meta.ownedHeldItems.push(F.id),this.meta.equippedHeldItem||(this.meta.equippedHeldItem=F.id),Ke(this.meta),this.scene.restart())}}const qo=[{id:"synth_megaOran",inputId:"oranBerry",inputCount:3,outputId:"megaOranBerry",goldCost:50,tier:"enhanced"},{id:"synth_megaSitrus",inputId:"sitrusBerry",inputCount:3,outputId:"megaSitrusBerry",goldCost:50,tier:"enhanced"},{id:"synth_goldenApple",inputId:"apple",inputCount:3,outputId:"goldenApple",goldCost:50,tier:"enhanced"},{id:"synth_crystalPebble",inputId:"pebble",inputCount:3,outputId:"crystalPebble",goldCost:50,tier:"enhanced"},{id:"synth_meteorRock",inputId:"gravelrock",inputCount:3,outputId:"meteorRock",goldCost:50,tier:"enhanced"},{id:"synth_megaBlast",inputId:"blastSeed",inputCount:3,outputId:"megaBlastSeed",goldCost:100,tier:"enhanced"},{id:"synth_deepSleep",inputId:"sleepSeed",inputCount:3,outputId:"deepSleepSeed",goldCost:100,tier:"enhanced"},{id:"synth_megaXAttack",inputId:"xAttack",inputCount:3,outputId:"megaXAttack",goldCost:100,tier:"enhanced"},{id:"synth_megaXDefend",inputId:"xDefend",inputCount:3,outputId:"megaXDefend",goldCost:100,tier:"enhanced"},{id:"synth_autoReviver",inputId:"reviveSeed",inputCount:2,outputId:"autoReviver",goldCost:200,tier:"superior"},{id:"synth_megaElixir",inputId:"maxElixir",inputCount:3,outputId:"megaElixir",goldCost:200,tier:"superior"}];function na(){return qo}function Li(G){const F=We[G];return F?F.name:G}function Wi(G,F,b){if(b<G.goldCost)return!1;const I=F.find(B=>B.itemId===G.inputId);return!(!I||I.count<G.inputCount)}function _o(G,F,b){if(!Wi(G,F,b))return{storage:F,goldSpent:0};const I=F.find(f=>f.itemId===G.inputId);I&&(I.count-=G.inputCount);const B=F.find(f=>f.itemId===G.outputId);return B?B.count+=1:F.push({itemId:G.outputId,count:1}),{storage:F.filter(f=>f.count>0),goldSpent:G.goldCost}}function el(G){switch(G){case"basic":return"#b0b0c0";case"enhanced":return"#4ade80";case"superior":return"#60a5fa";case"legendary":return"#fbbf24"}}function tl(G){switch(G){case"basic":return"Basic";case"enhanced":return"Enhanced";case"superior":return"Superior";case"legendary":return"Legendary"}}class il extends $e.Scene{constructor(){super({key:"CraftingScene"}),this.scrollOffset=0,this.maxScroll=0,this.currentTab="crafting",this.scrollTop=95,this.scrollBottom=0,this.scrollH=0}create(){this.meta=Ye(),this.scrollBottom=ee-55,this.scrollH=this.scrollBottom-this.scrollTop,this.add.rectangle(J/2,ee/2,J,ee,986906),this.add.text(J/2,18,"Item Forge",{fontSize:"18px",color:"#ff8c42",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.goldText=this.add.text(J/2,40,`Gold: ${this.meta.gold}`,{fontSize:"13px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5);const F=va(this.meta.storage);this.storageText=this.add.text(J/2,56,`Stored Items: ${F}`,{fontSize:"11px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);const b=74,I=140;this.craftingTabBtn=this.add.text(J/2-I/2-5,b,"Crafting",{fontSize:"12px",color:"#ff8c42",fontFamily:"monospace",fontStyle:"bold",backgroundColor:"#1a1a2e",padding:{x:10,y:4}}).setOrigin(1,.5).setInteractive({useHandCursor:!0}),this.synthesisTabBtn=this.add.text(J/2+I/2+5,b,"Synthesis",{fontSize:"12px",color:"#666680",fontFamily:"monospace",backgroundColor:"#0f0f1a",padding:{x:10,y:4}}).setOrigin(0,.5).setInteractive({useHandCursor:!0}),this.craftingTabBtn.on("pointerdown",()=>{this.currentTab!=="crafting"&&(this.currentTab="crafting",this.refreshTabs(),this.rebuildList())}),this.synthesisTabBtn.on("pointerdown",()=>{this.currentTab!=="synthesis"&&(this.currentTab="synthesis",this.refreshTabs(),this.rebuildList())}),this.add.text(J/2,88,"",{fontSize:"8px",color:"#334155",fontFamily:"monospace"}).setOrigin(.5),this.listContainer=this.add.container(0,0).setDepth(10);const B=this.make.graphics({x:0,y:0});B.fillRect(0,this.scrollTop,J,this.scrollH);const O=B.createGeometryMask();this.listContainer.setMask(O),this.scrollIndicator=this.add.rectangle(J-4,this.scrollTop,3,20,6717162,.5).setOrigin(.5,0).setDepth(11),this.rebuildList();let f=0;this.input.on("pointerdown",e=>{e.y>=this.scrollTop&&e.y<=this.scrollBottom&&(f=e.y)}),this.input.on("pointermove",e=>{if(!e.isDown||e.y<this.scrollTop||e.y>this.scrollBottom)return;const o=e.y-f;f=e.y,this.scrollOffset=Math.max(-this.maxScroll,Math.min(0,this.scrollOffset+o)),this.listContainer.y=this.scrollOffset,this.updateIndicatorPos()}),this.add.rectangle(J/2,ee-30,J,50,986906).setDepth(50),this.add.text(J/2,ee-30,"[Back to Town]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive().setDepth(51).on("pointerdown",()=>{this.scene.start("HubScene")})}refreshTabs(){this.currentTab==="crafting"?(this.craftingTabBtn.setColor("#ff8c42").setFontStyle("bold").setBackgroundColor("#1a1a2e"),this.synthesisTabBtn.setColor("#666680").setFontStyle("").setBackgroundColor("#0f0f1a")):(this.craftingTabBtn.setColor("#666680").setFontStyle("").setBackgroundColor("#0f0f1a"),this.synthesisTabBtn.setColor("#fbbf24").setFontStyle("bold").setBackgroundColor("#1a1a2e"))}rebuildList(){this.scrollOffset=0,this.listContainer.y=0,this.currentTab==="crafting"?this.renderCraftingList(this.scrollTop):this.renderSynthesisList(this.scrollTop);const F=this.currentTab==="crafting"?this.getCraftingContentHeight():this.getSynthesisContentHeight();if(this.maxScroll=Math.max(0,F-this.scrollH),this.scrollIndicator.setVisible(this.maxScroll>0),this.maxScroll>0){const b=Math.max(20,this.scrollH/F*this.scrollH);this.scrollIndicator.setSize(3,b)}this.updateIndicatorPos()}updateIndicatorPos(){if(this.maxScroll<=0)return;const F=this.scrollIndicator.height,b=-this.scrollOffset/this.maxScroll;this.scrollIndicator.y=this.scrollTop+b*(this.scrollH-F)}getCraftingContentHeight(){let F=10;const b=Yt.filter(O=>Kt(O,this.meta.totalClears)),I=Yt.filter(O=>!Kt(O,this.meta.totalClears));b.length>0&&(F+=18,F+=b.length*80),I.length>0&&(F+=10,F+=18,F+=I.length*36),F+=20,F+=18;const B=this.meta.storage.filter(O=>O.count>0);return F+=Math.max(1,Math.ceil(B.length/2))*22,F}renderCraftingList(F){this.listContainer.removeAll(!0);let b=F+10;const I=320,B=Yt.filter(f=>Kt(f,this.meta.totalClears)),O=Yt.filter(f=>!Kt(f,this.meta.totalClears));if(B.length>0){const f=this.add.text(15,b," Recipes ",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"});this.listContainer.add(f),b+=18;for(const x of B)this.renderRecipeRow(x,b,I),b+=80}if(O.length>0){b+=10;const f=this.add.text(15,b," Locked ",{fontSize:"10px",color:"#555568",fontFamily:"monospace"});this.listContainer.add(f),b+=18;for(const x of O)this.renderLockedRow(x,b,I),b+=36}this.renderStorageSection(b)}renderRecipeRow(F,b,I){const B=ys(F,this.meta.storage,this.meta.gold,this.meta.totalClears),O=this.add.rectangle(J/2,b+34,I,72,1710638,.9).setStrokeStyle(1,B?4478310:2236979);this.listContainer.add(O);const f=B?"#ff8c42":"#666680",x=this.add.text(J/2-I/2+12,b+6,F.name,{fontSize:"12px",color:f,fontFamily:"monospace",fontStyle:"bold"});this.listContainer.add(x);const e=this.meta.gold>=F.goldCost?"#fde68a":"#664444",o=this.add.text(J/2+I/2-12,b+7,`${F.goldCost}G`,{fontSize:"10px",color:e,fontFamily:"monospace"}).setOrigin(1,0);this.listContainer.add(o);const m=[];for(const s of F.ingredients){const l=$t(s.itemId),i=this.meta.storage.find(c=>c.itemId===s.itemId),h=i?i.count:0,d=h>=s.count?"":"!";m.push(`${l} x${s.count}${d.length>0?` (${h})`:""}`)}const n=this.add.text(J/2-I/2+12,b+24,m.join(" + "),{fontSize:"8px",color:B?"#88aa88":"#666680",fontFamily:"monospace",wordWrap:{width:I-24}});this.listContainer.add(n);const a=`-> ${$t(F.result.itemId)} x${F.result.count}`,t=this.add.text(J/2-I/2+12,b+40,a,{fontSize:"9px",color:B?"#4ade80":"#555568",fontFamily:"monospace"});if(this.listContainer.add(t),B){const s=this.add.text(J/2+I/2-12,b+38,"[Craft]",{fontSize:"11px",color:"#ff8c42",fontFamily:"monospace",backgroundColor:"#2e2a1a",padding:{x:6,y:3}}).setOrigin(1,0).setInteractive({useHandCursor:!0});this.listContainer.add(s),s.on("pointerdown",()=>{this.executeCraft(F)})}else{let s="";if(this.meta.gold<F.goldCost)s="Not enough gold";else for(const l of F.ingredients){const i=this.meta.storage.find(d=>d.itemId===l.itemId);if((i?i.count:0)<l.count){s=`Need ${$t(l.itemId)}`;break}}if(s){const l=this.add.text(J/2+I/2-12,b+42,s,{fontSize:"8px",color:"#664444",fontFamily:"monospace"}).setOrigin(1,0);this.listContainer.add(l)}}}renderLockedRow(F,b,I){const B=this.add.rectangle(J/2,b+12,I,30,1710638,.6).setStrokeStyle(1,2236979);this.listContainer.add(B);const O=this.add.text(J/2-I/2+12,b+5,`???  ${F.requiredClears} clears to unlock`,{fontSize:"10px",color:"#444460",fontFamily:"monospace"});this.listContainer.add(O)}executeCraft(F){if(ys(F,this.meta.storage,this.meta.gold,this.meta.totalClears)){for(const b of F.ingredients)yr(this.meta.storage,b.itemId,b.count);this.meta.gold-=F.goldCost,Vi(this.meta.storage,F.result.itemId,F.result.count),this.meta.storage=xr(this.meta.storage),Ke(this.meta),this.scene.restart()}}getSynthesisContentHeight(){let F=10;const b=na();F+=18,F+=b.length*80,F+=20,F+=18;const I=this.meta.storage.filter(B=>B.count>0);return F+=Math.max(1,Math.ceil(I.length/2))*22,F}renderSynthesisList(F){this.listContainer.removeAll(!0);let b=F+10;const I=320,B=na(),O=this.add.text(15,b," Upgrade Recipes ",{fontSize:"10px",color:"#fbbf24",fontFamily:"monospace"});this.listContainer.add(O),b+=18;for(const f of B)this.renderSynthesisRow(f,b,I),b+=80;this.renderStorageSection(b)}renderSynthesisRow(F,b,I){const B=Wi(F,this.meta.storage,this.meta.gold),O=this.add.rectangle(J/2,b+34,I,72,1710638,.9).setStrokeStyle(1,B?4482628:2236979);this.listContainer.add(O);const f=Li(F.outputId),x=B?el(F.tier):"#666680",e=this.add.text(J/2-I/2+12,b+6,f,{fontSize:"12px",color:x,fontFamily:"monospace",fontStyle:"bold"});this.listContainer.add(e);const o=this.add.text(J/2+I/2-55,b+7,tl(F.tier),{fontSize:"8px",color:x,fontFamily:"monospace"}).setOrigin(1,0);this.listContainer.add(o);const m=this.meta.gold>=F.goldCost?"#fde68a":"#664444",n=this.add.text(J/2+I/2-12,b+7,`${F.goldCost}G`,{fontSize:"10px",color:m,fontFamily:"monospace"}).setOrigin(1,0);this.listContainer.add(n);const r=Li(F.inputId),a=this.meta.storage.find(c=>c.itemId===F.inputId),t=a?a.count:0,s=t>=F.inputCount,l=`${r} x${F.inputCount}${s?"":` (have ${t})`}`,i=this.add.text(J/2-I/2+12,b+24,l,{fontSize:"9px",color:s?"#88aa88":"#666680",fontFamily:"monospace"});this.listContainer.add(i);const h=Li(F.outputId),d=this.add.text(J/2-I/2+12,b+40,`-> ${h} x1`,{fontSize:"9px",color:B?"#fbbf24":"#555568",fontFamily:"monospace"});if(this.listContainer.add(d),B){const c=this.add.text(J/2+I/2-12,b+38,"[Synthesize]",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",backgroundColor:"#2e2a1a",padding:{x:6,y:3}}).setOrigin(1,0).setInteractive({useHandCursor:!0});this.listContainer.add(c),c.on("pointerdown",()=>{this.executeSynthesis(F)})}else{let c="";if(this.meta.gold<F.goldCost?c="Not enough gold":s||(c=`Need ${F.inputCount-t} more`),c){const u=this.add.text(J/2+I/2-12,b+42,c,{fontSize:"8px",color:"#664444",fontFamily:"monospace"}).setOrigin(1,0);this.listContainer.add(u)}}}executeSynthesis(F){if(!Wi(F,this.meta.storage,this.meta.gold))return;const b=_o(F,this.meta.storage,this.meta.gold);this.meta.storage=b.storage,this.meta.gold-=b.goldSpent,Ke(this.meta),this.cameras.main.flash(400,255,215,0),this.time.delayedCall(450,()=>{this.scene.restart()})}renderStorageSection(F){F+=20;const b=this.add.text(15,F," Your Storage ",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"});this.listContainer.add(b),F+=18;const I=this.meta.storage.filter(B=>B.count>0);if(I.length===0){const B=this.add.text(J/2,F+4,"No items stored yet",{fontSize:"9px",color:"#555568",fontFamily:"monospace"}).setOrigin(.5,0);this.listContainer.add(B)}else for(let O=0;O<I.length;O++){const f=I[O],x=O%2,e=Math.floor(O/2),o=20+x*155,m=F+e*22,n=$t(f.itemId),r=n.startsWith(""),a=this.add.text(o,m,`${n} x${f.count}`,{fontSize:"9px",color:r?"#fbbf24":"#b0b0c0",fontFamily:"monospace"});this.listContainer.add(a)}}}function sl(){const G=oo(),F=[`Using certain skills in sequence triggers combos!
Combo effects activate after your skill resolves.
The skill history resets after each combo.
`];for(const b of G)F.push(`${b.name}: ${b.description}`);return F.join(`
`)}const al=[{title:"Basics",body:`Use the D-Pad to move in 8 directions.
The game is turn-based: you move, then enemies move.
Find the gold stairs marker to descend deeper.
Reach the final floor and defeat the boss to clear!`},{title:"Combat",body:`Walk into an enemy to perform a basic attack.
Use skills (right-side buttons) for stronger moves.
Type effectiveness matters: super effective = 1.5x,
not very effective = 0.5x, immune = 0x damage.
Face the enemy with the D-Pad before using a skill.`},{title:"Items",body:`Items appear on the dungeon floor as icons.
Walk over an item and tap the bag icon to pick up.
Open inventory to use items: Oran Berry heals HP,
Apple restores Belly, Elixir restores PP.
Max inventory: 16 items. Choose wisely!`},{title:"Allies",body:`Defeated enemies have a ~10% chance to be recruited.
Recruited allies follow you and fight alongside you.
Max party size: 4 allies + you.
Allies persist across floors in the same dungeon run.
Keep them alive -- they don't revive!`},{title:"Belly",body:`Your Belly decreases by 1 each turn you take.
When Belly reaches 0, you lose HP every turn!
Eat Apples (plain, Big, Perfect) to restore Belly.
Upgrade max Belly at the shop in town.
Plan your food supply before long dungeons.`},{title:"Skills",body:`You can equip up to 4 skills at a time.
Each skill has limited PP (power points).
When PP runs out, you can't use that skill.
Elixirs restore PP. Max Elixir restores all PP.
Learn new skills at level up or from the Move Tutor.`},{title:"Skill Combos",body:sl()},{title:"Held Items",body:`Equip one held item for a passive bonus.
Examples: HP boost, ATK boost, hunger reduction.
Buy held items from the Held Item shop in town.
Only one held item can be active at a time.
Choose one that fits your playstyle!`},{title:"Weather",body:`Some floors have weather effects:
Rain: Water moves boosted, Fire moves weakened.
Sandstorm: Damages non-Rock/Ground/Steel each turn.
Hail: Damages non-Ice types each turn.
Sun: Fire moves boosted, Water moves weakened.
Certain abilities grant weather immunity.`},{title:"Traps",body:`Hidden traps are scattered on dungeon floors.
Traps are revealed when you step nearby.
Effects: damage, stat drop, warp, PP drain, etc.
Watch for trap icons on revealed tiles!
Some upgrades reduce trap damage.`},{title:"Special Modes",body:`Endless Abyss: Infinite floors. How deep can you go?
  Unlocks at 10 clears.
Boss Rush: 10 boss fights in a row!
  Unlocks at 30 clears.
Daily Dungeon: Seeded run with unique modifiers.
  Unlocks at 5 clears. One attempt per day.
Challenges: Speedrun, No Items, Solo modes.`},{title:"Tips",body:`- Save Apples for deep floors where Belly matters.
- Use type advantages: bring varied skill types.
- Recruit allies early for extra damage and tanking.
- Upgrade HP and Belly first at the shop.
- Check the Pokedex to track seen Pokemon.
- Boss floors: heal up and restore PP before stairs.
- Kecleon Shops appear randomly -- buy wisely!`}];class rl extends $e.Scene{constructor(){super({key:"HelpScene"})}create(){this.add.rectangle(J/2,ee/2,J,ee,657946),this.add.text(J/2,25,"Help & Tutorial",{fontSize:"16px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,45,"Scroll down to read all sections",{fontSize:"8px",color:"#666680",fontFamily:"monospace"}).setOrigin(.5);const F=60,I=ee-40-F,B=this.add.container(0,0);let O=F+8;const f=J-32,x=16;for(const a of al){const t=this.add.text(x,O,`-- ${a.title} --`,{fontSize:"12px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"});B.add(t),O+=20;const s=this.add.text(x,O,a.body,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace",lineSpacing:3,wordWrap:{width:f,useAdvancedWrap:!0}});B.add(s),O+=s.height+16}const e=O-F,o=Math.max(0,e-I),m=this.make.graphics({x:0,y:0});m.fillRect(0,F,J,I),B.setMask(m.createGeometryMask());const n=this.add.rectangle(J-4,F,3,20,6717162,.5).setOrigin(.5,0).setDepth(11).setVisible(o>0);if(o>0){const a=Math.max(20,I/e*I);n.setSize(3,a);let t=0,s=0;const l=()=>{const i=-s/o;n.y=F+i*(I-a)};this.input.on("pointerdown",i=>{t=i.y}),this.input.on("pointermove",i=>{if(!i.isDown)return;const h=i.y-t;t=i.y,s=Math.max(-o,Math.min(0,s+h)),B.y=s,l()})}this.add.text(J/2,ee-20,"[Back to Town]",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive().on("pointerdown",()=>this.scene.start("HubScene"))}}class nl extends $e.Scene{constructor(){super({key:"AbilityUpgradeScene"})}create(){this.meta=Ye(),this.add.rectangle(J/2,ee/2,J,ee,986906),this.add.rectangle(J/2,60,J-40,2,6717162,.3),this.add.text(J/2,30,"Ability Dojo",{fontSize:"18px",color:"#667eea",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,55,`Gold: ${this.meta.gold}`,{fontSize:"13px",color:"#fde68a",fontFamily:"monospace"}).setOrigin(.5);const F=this.meta.starter??"mudkip",b=He[F]??He.mudkip,I=fi[b],B=di[b];if(!I||!B){this.add.text(J/2,ee/2,"No ability data found.",{fontSize:"12px",color:"#ef4444",fontFamily:"monospace"}).setOrigin(.5),this.addBackButton();return}const O=pi(this.meta.abilityLevels,b),f=Sr(b,O),x=wr(b,O),e=!x,o=F.charAt(0).toUpperCase()+F.slice(1);this.add.text(J/2,80,`${o}'s Ability`,{fontSize:"11px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5),this.add.text(J/2,105,f.name,{fontSize:"16px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,128,f.description,{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);const m=B.length;let n="";for(let r=1;r<=m;r++)n+=r<=O?"":"";if(this.add.text(J/2,155,n,{fontSize:"22px",color:"#fbbf24",fontFamily:"monospace"}).setOrigin(.5),this.add.text(J/2,178,`Level ${O} / ${m}`,{fontSize:"10px",color:"#666680",fontFamily:"monospace"}).setOrigin(.5),this.add.rectangle(J/2,195,J-60,1,3359061,.5),e)this.add.text(J/2,220,"-- MAX LEVEL --",{fontSize:"14px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,245,"This ability is fully enhanced!",{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);else{this.add.text(J/2,210,"Next Upgrade:",{fontSize:"11px",color:"#60a5fa",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,232,x.name,{fontSize:"14px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(J/2,252,x.description,{fontSize:"10px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);const r=this.meta.gold>=x.cost?"#4ade80":"#ef4444";this.add.text(J/2,278,`Cost: ${x.cost}G`,{fontSize:"12px",color:r,fontFamily:"monospace"}).setOrigin(.5);const a=this.meta.totalClears>=x.requiredClears,t=a?"#4ade80":"#ef4444";this.add.text(J/2,296,`Requires: ${x.requiredClears} clears (have ${this.meta.totalClears})`,{fontSize:"10px",color:t,fontFamily:"monospace"}).setOrigin(.5);const s=this.meta.gold>=x.cost&&a,l=s?2771514:2236979,i=s?4906624:3355460,h=s?"#4ade80":"#444460",d=this.add.rectangle(J/2,340,200,40,l,.9).setStrokeStyle(2,i);this.add.text(J/2,340,"[ Upgrade ]",{fontSize:"14px",color:h,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),s&&(d.setInteractive({useHandCursor:!0}),d.on("pointerover",()=>d.setFillStyle(3824202,1)),d.on("pointerout",()=>d.setFillStyle(2771514,.9)),d.on("pointerdown",()=>{this.meta.gold-=x.cost,this.meta.abilityLevels||(this.meta.abilityLevels={}),this.meta.abilityLevels[b]=O+1,Ke(this.meta),this.cameras.main.flash(300,102,126,234),this.scene.restart()}))}this.addAbilityOverview(b,O,390),this.addBackButton()}addAbilityOverview(F,b,I){this.add.rectangle(J/2,I-10,J-60,1,3359061,.5),this.add.text(J/2,I+5,"All Ability Tiers",{fontSize:"10px",color:"#667eea",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);const B=di[F];if(!B)return;let O=I+28;for(const f of B){const x=f.level===b,e=f.level<=b,o=e?"":"",m=x?"#fbbf24":e?"#4ade80":"#666680";this.add.text(30,O,`${o} Lv.${f.level}: ${f.name}`,{fontSize:"9px",color:m,fontFamily:"monospace",fontStyle:x?"bold":"normal"}),this.add.text(J-30,O,f.level===1?"Free":`${f.cost}G`,{fontSize:"9px",color:e?"#4ade80":"#666680",fontFamily:"monospace"}).setOrigin(1,0),this.add.text(30,O+12,`  ${f.description}`,{fontSize:"8px",color:"#555566",fontFamily:"monospace"}),O+=30}}addBackButton(){const F=this.add.rectangle(J/2,ee-40,200,36,1710638,.9).setStrokeStyle(1,3359061).setInteractive({useHandCursor:!0});this.add.text(J/2,ee-40,"[ Back to Town ]",{fontSize:"13px",color:"#60a5fa",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),F.on("pointerover",()=>F.setFillStyle(2763342,1)),F.on("pointerout",()=>F.setFillStyle(1710638,.9)),F.on("pointerdown",()=>this.scene.start("HubScene"))}}class ol extends $e.Scene{constructor(){super({key:"DungeonPreviewScene"})}init(F){this.dungeonId=F.dungeonId,this.meta=F.meta,this.challengeMode=F.challengeMode}create(){const F=Qe[this.dungeonId];if(!F){this.scene.start("HubScene");return}this.add.rectangle(J/2,ee/2,J,ee,657946);const b=this.add.container(0,0).setDepth(10),I=0,B=ee-70,O=B-I,f=this.make.graphics({x:0,y:0});f.fillRect(0,I,J,O);const x=f.createGeometryMask();b.setMask(x);let e=20;const o=20,m=J-o*2,n=this.add.text(J/2,e,F.name,{fontSize:"18px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);b.add(n),e+=28;const r=this.dungeonId==="endlessDungeon"?"Infinite Floors":`B1F - B${F.floors}F`,a=this.add.text(J/2,e,r,{fontSize:"11px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);b.add(a),e+=18;const t=5,s=Math.min(t,Math.round(F.difficulty)),l="".repeat(s),i="".repeat(t-s),h=this.add.text(J/2,e,`Difficulty: ${l}${i}`,{fontSize:"12px",color:"#f59e0b",fontFamily:"monospace"}).setOrigin(.5);b.add(h),e+=18;const d=this.inferDungeonType(F),c=this.add.text(J/2,e,d,{fontSize:"10px",color:this.getTypeColor(d),fontFamily:"monospace",backgroundColor:"#1a1a2e",padding:{x:8,y:3}}).setOrigin(.5);if(b.add(c),e+=22,this.challengeMode){const de=kt.find(me=>me.id===this.challengeMode);if(de){const me=this.add.text(J/2,e,`Challenge: ${de.name}`,{fontSize:"10px",color:de.color,fontFamily:"monospace",backgroundColor:"#1a1a2e",padding:{x:8,y:3}}).setOrigin(.5);b.add(me),e+=20;const pe=this.add.text(J/2,e,de.description,{fontSize:"9px",color:"#666680",fontFamily:"monospace"}).setOrigin(.5);b.add(pe),e+=18}}const p=(this.meta.bestTimes??{})[this.dungeonId],g=p!==void 0?`Best Time: ${String(Math.floor(p/60)).padStart(2,"0")}:${String(p%60).padStart(2,"0")}`:"No clear yet",y=this.add.text(J/2,e,g,{fontSize:"9px",color:p!==void 0?"#4ade80":"#666680",fontFamily:"monospace"}).setOrigin(.5);b.add(y),e+=16,e+=4;const v=this.add.rectangle(J/2,e,m,1,3359061);b.add(v),e+=10;const S=this.add.text(o,e,"-- Known Pokemon --",{fontSize:"11px",color:"#60a5fa",fontFamily:"monospace",fontStyle:"bold"});b.add(S),e+=18;const w=F.enemySpeciesIds.length>0?F.enemySpeciesIds:this.getSpecialDungeonEnemies(F),T=w.slice(0,4);if(T.length===0){const de=this.add.text(o+10,e,"??? (Unknown enemies)",{fontSize:"10px",color:"#666680",fontFamily:"monospace"});b.add(de),e+=16}else for(const de of T){const me=Te[de];if(!me)continue;const pe=me.types.map(we=>we).join("/"),ve=this.add.text(o+10,e,`${me.name}  [${pe}]`,{fontSize:"10px",color:"#e0e0e0",fontFamily:"monospace"});b.add(ve),e+=16}if(w.length>4){const de=this.add.text(o+10,e,`...and ${w.length-4} more`,{fontSize:"9px",color:"#666680",fontFamily:"monospace"});b.add(de),e+=16}if(e+=6,F.boss){const de=this.add.rectangle(J/2,e,m,1,3359061);b.add(de),e+=10;const me=this.add.text(o,e,"-- Floor Boss --",{fontSize:"11px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold"});b.add(me),e+=18;const pe=Te[F.boss.speciesId],ve=pe?pe.types.map(je=>je).join("/"):"???",we=this.add.text(o+10,e,`${F.boss.name}  [${ve}]`,{fontSize:"10px",color:"#fca5a5",fontFamily:"monospace"});b.add(we),e+=16;const Ae=F.boss.statMultiplier,Se=Math.min(10,Math.round(Ae)),Ce=m-20,Ee=this.add.rectangle(o+10+Ce/2,e+4,Ce,10,1710638).setStrokeStyle(1,3359061);b.add(Ee);const Fe=Se/10*Ce,Re=Se<=3?4906624:Se<=6?16498468:15680580,Oe=this.add.rectangle(o+10+Fe/2,e+4,Fe,8,Re);b.add(Oe);const Le=this.add.text(o+10+Ce+5,e,`x${Ae.toFixed(1)}`,{fontSize:"9px",color:"#ef4444",fontFamily:"monospace"});b.add(Le),e+=20}else if(this.dungeonId==="bossRush"){const de=this.add.rectangle(J/2,e,m,1,3359061);b.add(de),e+=10;const me=this.add.text(o,e,"-- Boss Rush --",{fontSize:"11px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold"});b.add(me),e+=18;const pe=this.add.text(o+10,e,"10 consecutive boss fights!",{fontSize:"10px",color:"#fca5a5",fontFamily:"monospace"});b.add(pe),e+=16}e+=6;const C=this.add.rectangle(J/2,e,m,1,3359061);b.add(C),e+=10;const M=this.add.text(o,e,"-- Your Team --",{fontSize:"11px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold"});b.add(M),e+=18;const E=this.meta.starter??"mudkip",P=Te[E],A=P?P.name:E,D=P?P.types.map(de=>de).join("/"):"???",W=lt(this.meta,"maxHp")*5;lt(this.meta,"atk"),lt(this.meta,"def");const V=P?P.baseStats.hp:50,K=this.meta.equippedHeldItem,X=K?ci(K):void 0,R=X?.effect.hpBonus??0,H=V+W+R,L=this.add.text(o+10,e,`${A}  [${D}]`,{fontSize:"10px",color:"#e0e0e0",fontFamily:"monospace"});b.add(L),e+=16;const N=this.add.text(o+10,e,`Lv.1  HP: ${H}`,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"});b.add(N),e+=16;const z=X?X.name:"None",U=this.add.text(o+10,e,`Held Item: ${z}`,{fontSize:"9px",color:X?"#f59e0b":"#666680",fontFamily:"monospace"});b.add(U),e+=16;const Y=He[E]??He.mudkip,$=fi[Y],Z=pi(this.meta.abilityLevels,Y);if($){const de=this.add.text(o+10,e,`Ability: ${$.name} Lv.${Z}`,{fontSize:"9px",color:"#667eea",fontFamily:"monospace"});b.add(de),e+=16}e+=6;const Q=["endlessDungeon","bossRush","dailyDungeon"].includes(this.dungeonId);let q=[];if(this.dungeonId==="dailyDungeon"){const de=Gt();if(de.modifiers.length>0){const me=this.add.rectangle(J/2,e,m,1,3359061);b.add(me),e+=10;const pe=this.add.text(o,e,"-- Daily Modifiers --",{fontSize:"11px",color:"#10b981",fontFamily:"monospace",fontStyle:"bold"});b.add(pe),e+=18;for(const ve of de.modifiers){const we=this.add.text(o+10,e,`* ${ve}`,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"});b.add(we),e+=14}e+=6}}else if(!Q&&!this.challengeMode&&(q=Oa(),q.length>0)){const de=this.add.rectangle(J/2,e,m,1,3359061);b.add(de),e+=10;const me=this.add.text(o,e,"-- Run Modifiers --",{fontSize:"11px",color:"#a855f7",fontFamily:"monospace",fontStyle:"bold"});b.add(me),e+=18;for(const pe of q){const ve=this.add.text(o+10,e,`${pe.name}: ${pe.description}`,{fontSize:"9px",color:pe.color,fontFamily:"monospace"});b.add(ve),e+=14}e+=6}const j=this.add.rectangle(J/2,e,m,1,3359061);b.add(j),e+=10;const _=this.add.text(J/2,e,F.description,{fontSize:"9px",color:"#666680",fontFamily:"monospace",align:"center",wordWrap:{width:m}}).setOrigin(.5,0);b.add(_),e+=_.height+20;const se=Math.max(0,e-O);let ie=0,ne=0;this.input.on("pointerdown",de=>{de.y>=I&&de.y<=B&&(ne=de.y)}),this.input.on("pointermove",de=>{if(!de.isDown||de.y<I||de.y>B)return;const me=de.y-ne;ne=de.y,ie=Math.max(-se,Math.min(0,ie+me)),b.y=ie});const he=ee-35,ue=140,ae=36,oe=10;this.add.rectangle(J/2,ee-35,J,70,657946).setDepth(50);const le=this.add.rectangle(J/2-ue/2-oe/2,he,ue,ae,1710638,.95).setStrokeStyle(1,3359061).setDepth(51).setInteractive({useHandCursor:!0});this.add.text(J/2-ue/2-oe/2,he,"Back",{fontSize:"13px",color:"#94a3b8",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(52),le.on("pointerover",()=>le.setFillStyle(2763342,1)),le.on("pointerout",()=>le.setFillStyle(1710638,.95)),le.on("pointerdown",()=>{this.scene.start("HubScene")});const fe=this.add.rectangle(J/2+ue/2+oe/2,he,ue,ae,1718810,.95).setStrokeStyle(1,4906624).setDepth(51).setInteractive({useHandCursor:!0});this.add.text(J/2+ue/2+oe/2,he,"Enter Dungeon",{fontSize:"12px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(52),this.tweens.add({targets:fe,alpha:{from:.95,to:.7},duration:800,yoyo:!0,repeat:-1}),fe.on("pointerover",()=>fe.setFillStyle(2775594,1)),fe.on("pointerout",()=>fe.setFillStyle(1718810,.95)),fe.on("pointerdown",()=>{this.launchDungeon(q)})}launchDungeon(F){Tt(),wt(),this.meta.totalRuns++,this.meta.lastDungeonId=this.dungeonId,this.meta.lastChallenge=this.challengeMode??void 0,this.meta.dungeonRunCounts||(this.meta.dungeonRunCounts={}),this.meta.dungeonRunCounts[this.dungeonId]=(this.meta.dungeonRunCounts[this.dungeonId]??0)+1,Ke(this.meta);const b=F.map(I=>I.id);this.cameras.main.fadeOut(400,0,0,0),this.time.delayedCall(450,()=>{const I={floor:1,fromHub:!0,dungeonId:this.dungeonId,starter:this.meta.starter??"mudkip"};this.challengeMode&&(I.challengeMode=this.challengeMode),b.length>0&&(I.modifiers=b),this.scene.start("DungeonScene",I)})}inferDungeonType(F){if(this.dungeonId==="endlessDungeon")return"Mixed";if(this.dungeonId==="bossRush")return"Boss Rush";if(this.dungeonId==="dailyDungeon")return"Daily";const b={};for(const O of F.enemySpeciesIds){const f=Te[O];if(f)for(const x of f.types)b[x]=(b[x]??0)+1}let I="Normal",B=0;for(const[O,f]of Object.entries(b))f>B&&(B=f,I=O);return I}getSpecialDungeonEnemies(F){const b=new Set;for(const I of Object.values(F.floorEnemies))for(const B of I)b.add(B);return Array.from(b)}getTypeColor(F){return{Normal:"#a8a878",Water:"#6890f0",Fire:"#f08030",Grass:"#78c850",Electric:"#f8d030",Flying:"#a890f0",Poison:"#a040a0",Ground:"#e0c068",Rock:"#b8a038",Bug:"#a8b820",Fighting:"#c03028",Steel:"#b8b8d0",Ghost:"#705898",Psychic:"#f85888",Ice:"#98d8d8",Dark:"#705848",Fairy:"#ee99ac",Dragon:"#7038f8",Mixed:"#94a3b8","Boss Rush":"#dc2626",Daily:"#10b981"}[F]??"#94a3b8"}}class ll extends $e.Scene{constructor(){super({key:"LeaderboardScene"}),this.activeTab="dungeon",this.selectedDungeonId=null,this.uiElements=[],this.tabButtons=[],this.scrollOffset=0,this.maxScroll=0}create(){this.scrollOffset=0,this.maxScroll=0,this.uiElements=[],this.tabButtons=[],this.add.rectangle(J/2,ee/2,J,ee,657946),this.add.text(J/2,25,"Hall of Fame",{fontSize:"16px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);const F=_n(),b=F.bestScore?`Best: ${F.bestScore.score} pts  |  Runs Tracked: ${F.totalRuns}`:"No runs recorded yet!";this.add.text(J/2,48,b,{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5),this.createTabs(),this.indicator=this.add.rectangle(J-4,110,3,20,6717162,.5).setOrigin(.5,0).setDepth(11).setVisible(!1),this.contentContainer=this.add.container(0,0).setDepth(5);const I=110,B=ee-45,O=this.make.graphics({x:0,y:0});O.fillRect(0,I,J,B-I);const f=O.createGeometryMask();this.contentContainer.setMask(f);const x=Ys();x.length>0&&(this.selectedDungeonId=x[0]),this.renderContent(),this.add.text(J/2,ee-20,"[Back]",{fontSize:"14px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(.5).setInteractive({useHandCursor:!0}).setDepth(20).on("pointerdown",()=>this.scene.start("HubScene"));let o=0;const m=110,n=ee-45;this.input.on("pointerdown",r=>{r.y>=m&&r.y<=n&&(o=r.y)}),this.input.on("pointermove",r=>{if(!r.isDown||r.y<m||r.y>n)return;const a=r.y-o;o=r.y,this.scrollOffset=Math.max(-this.maxScroll,Math.min(0,this.scrollOffset+a)),this.contentContainer.y=this.scrollOffset,this.updateIndicator()})}createTabs(){this.tabButtons.forEach(f=>f.destroy()),this.tabButtons=[];const F=[{id:"dungeon",label:"By Dungeon"},{id:"allTime",label:"All Time"},{id:"recent",label:"Recent"}],b=100,I=24,B=J/2-F.length*b/2+b/2,O=72;for(let f=0;f<F.length;f++){const x=F[f],e=B+f*b,o=this.activeTab===x.id,m=this.add.rectangle(e,O,b-4,I,o?3359061:1710638,o?1:.7).setStrokeStyle(1,o?6717162:2236979).setInteractive({useHandCursor:!0}).setDepth(10),n=this.add.text(e,O,x.label,{fontSize:"10px",color:o?"#60a5fa":"#666680",fontFamily:"monospace",fontStyle:o?"bold":"normal"}).setOrigin(.5).setDepth(10);m.on("pointerdown",()=>{this.activeTab=x.id,this.scrollOffset=0,this.contentContainer.y=0,this.createTabs(),this.renderContent()}),this.tabButtons.push(m,n)}}renderContent(){switch(this.contentContainer.removeAll(!0),this.uiElements=[],this.activeTab){case"dungeon":this.renderDungeonTab();break;case"allTime":this.renderAllTimeTab();break;case"recent":this.renderRecentTab();break}}renderDungeonTab(){const b=ee-45-110;let I=115;const B=Ys();if(B.length===0){const x=this.add.text(J/2,I+40,`No runs recorded yet!
Complete a dungeon to see
your scores here.`,{fontSize:"11px",color:"#666680",fontFamily:"monospace",align:"center"}).setOrigin(.5,0);this.contentContainer.add(x),this.maxScroll=0,this.indicator.setVisible(!1);return}const O=this.add.text(15,I,"Select Dungeon:",{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"});this.contentContainer.add(O),I+=16;for(const x of B){const o=Qe[x]?.name??x,m=x===this.selectedDungeonId,n=this.add.rectangle(J/2,I,320,22,m?3359061:1710638,m?1:.8).setStrokeStyle(1,m?16498468:2236979).setInteractive({useHandCursor:!0}),r=this.add.text(J/2,I,o,{fontSize:"10px",color:m?"#fbbf24":"#e0e0e0",fontFamily:"monospace",fontStyle:m?"bold":"normal"}).setOrigin(.5),a=Vs(x,1),t=a.length>0?`Best: ${a[0].score}`:"",s=this.add.text(J/2+130,I,t,{fontSize:"8px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(1,.5);n.on("pointerdown",()=>{this.selectedDungeonId=x,this.scrollOffset=0,this.contentContainer.y=0,this.renderContent()}),this.contentContainer.add([n,r,s]),I+=26}if(I+=8,this.selectedDungeonId){const x=Vs(this.selectedDungeonId,10),o=Qe[this.selectedDungeonId]?.name??this.selectedDungeonId,m=this.add.text(J/2,I,`Top Scores - ${o}`,{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);if(this.contentContainer.add(m),I+=20,x.length===0){const n=this.add.text(J/2,I+10,"No scores yet.",{fontSize:"10px",color:"#666680",fontFamily:"monospace"}).setOrigin(.5);this.contentContainer.add(n),I+=30}else I=this.renderScoreList(x,I,!0)}const f=I-110;this.maxScroll=Math.max(0,f-b),this.updateIndicator()}renderAllTimeTab(){const b=ee-45-110;let I=115;const B=qn(10),O=this.add.text(J/2,I,"All-Time Best Scores",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);if(this.contentContainer.add(O),I+=20,B.length===0){const x=this.add.text(J/2,I+20,`No runs recorded yet!
Complete a dungeon to see
your scores here.`,{fontSize:"11px",color:"#666680",fontFamily:"monospace",align:"center"}).setOrigin(.5,0);this.contentContainer.add(x),this.maxScroll=0,this.indicator.setVisible(!1);return}I=this.renderScoreList(B,I,!1);const f=I-110;this.maxScroll=Math.max(0,f-b),this.updateIndicator()}renderRecentTab(){const b=ee-45-110;let I=115;const B=jn(10),O=this.add.text(J/2,I,"Recent Runs",{fontSize:"11px",color:"#fbbf24",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);if(this.contentContainer.add(O),I+=20,B.length===0){const x=this.add.text(J/2,I+20,`No runs recorded yet!
Complete a dungeon to see
your history here.`,{fontSize:"11px",color:"#666680",fontFamily:"monospace",align:"center"}).setOrigin(.5,0);this.contentContainer.add(x),this.maxScroll=0,this.indicator.setVisible(!1);return}for(let x=0;x<B.length;x++){const e=B[x];I=this.renderRunEntry(e,x+1,I,!1)}const f=I-110;this.maxScroll=Math.max(0,f-b),this.updateIndicator()}renderScoreList(F,b,I){let B=b;for(let O=0;O<F.length;O++){const f=O+1;B=this.renderRunEntry(F[O],f,B,!I)}return B}renderRunEntry(F,b,I,B){const O=B?58:48;let f="#e0e0e0",x=1710638,e=2236979;b===1?(f="#fbbf24",x=2762016,e=6706464):b===2?(f="#c0c0c0",x=2237744,e=5592416):b===3&&(f="#cd7f32",x=2433050,e=5589040);const o=this.add.rectangle(J/2,I+O/2,330,O-4,x,.9).setStrokeStyle(1,e);this.contentContainer.add(o);const m=b<=3?["","#1","#2","#3"][b]:`#${b}`,n=this.add.text(20,I+6,m,{fontSize:"12px",color:f,fontFamily:"monospace",fontStyle:"bold"});this.contentContainer.add(n);const r=this.add.text(55,I+4,`${F.score} pts`,{fontSize:"12px",color:f,fontFamily:"monospace",fontStyle:"bold"});this.contentContainer.add(r);const a=F.cleared?"CLEAR":"FAIL",t=F.cleared?"#4ade80":"#ef4444",s=this.add.text(J-20,I+4,a,{fontSize:"9px",color:t,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(1,0);this.contentContainer.add(s);const i=`${F.starter.charAt(0).toUpperCase()+F.starter.slice(1)}  B${F.floorsCleared}F  ${F.enemiesDefeated} KOs  ${F.turns}T`,h=this.add.text(55,I+20,i,{fontSize:"8px",color:"#94a3b8",fontFamily:"monospace"});this.contentContainer.add(h);let c=this.formatDate(F.date);if(F.challengeMode&&(c+=`  [${{speedrun:"Speed Run",noItems:"No Items",solo:"Solo"}[F.challengeMode]??F.challengeMode}]`),F.difficulty&&(c+=`  [${{easy:"Easy",hard:"Hard",nightmare:"Nightmare"}[F.difficulty]??F.difficulty}]`),B){const p=Qe[F.dungeonId]?.name??F.dungeonId,g=this.add.text(55,I+32,p,{fontSize:"8px",color:"#667eea",fontFamily:"monospace"});this.contentContainer.add(g);const y=this.add.text(55,I+44,c,{fontSize:"7px",color:"#555566",fontFamily:"monospace"});this.contentContainer.add(y)}else{const u=this.add.text(55,I+32,c,{fontSize:"7px",color:"#555566",fontFamily:"monospace"});this.contentContainer.add(u)}return I+O+2}formatDate(F){try{const b=new Date(F),I=String(b.getMonth()+1).padStart(2,"0"),B=String(b.getDate()).padStart(2,"0");return`${b.getFullYear()}-${I}-${B}`}catch{return F}}updateIndicator(){const b=ee-45-110;if(this.maxScroll<=0){this.indicator.setVisible(!1);return}const I=Math.max(20,b/(b+this.maxScroll)*b);this.indicator.setVisible(!0).setSize(3,I);const B=-this.scrollOffset/this.maxScroll;this.indicator.y=110+B*(b-I)}}class hl extends $e.Scene{constructor(){super({key:"SettingsScene"}),this.diffButtons=[],this.modifierTexts=[]}create(){this.selectedDifficulty=Ha(),this.diffButtons=[],this.modifierTexts=[],this.add.rectangle(J/2,ee/2,J,ee,988969),this.add.text(J/2,28,"Settings",{fontSize:"18px",color:"#e0e0e0",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),this.add.text(16,24,"[Back]",{fontSize:"12px",color:"#60a5fa",fontFamily:"monospace"}).setOrigin(0,.5).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.scene.start("HubScene")),this.add.text(J/2,60,"-- Difficulty --",{fontSize:"11px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);const b=[{level:ft.Easy,label:"Easy",color:1467700,textColor:"#4ade80"},{level:ft.Normal,label:"Normal",color:3359061,textColor:"#e0e0e0"},{level:ft.Hard,label:"Hard",color:8138002,textColor:"#fb923c"},{level:ft.Nightmare,label:"Nightmare",color:8330525,textColor:"#ef4444"}],I=150,B=34,O=84,f=4,x=I/2;for(let u=0;u<b.length;u++){const{level:p,label:g,color:y,textColor:v}=b[u],S=u%2,w=Math.floor(u/2),T=J/2+(S===0?-x-f/2:x+f/2),C=O+w*(B+4),M=p===this.selectedDifficulty,E=this.add.rectangle(T,C,I+4,B+4,0,0).setStrokeStyle(2,16498468).setVisible(M),P=this.add.rectangle(T,C,I,B,y,M?1:.5).setStrokeStyle(1,M?16498468:5596791).setInteractive({useHandCursor:!0}),A=this.add.text(T,C-5,g,{fontSize:"12px",color:v,fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),D=this.add.text(T,C+9,ao[p],{fontSize:"7px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);P.on("pointerover",()=>{p!==this.selectedDifficulty&&P.setAlpha(.8)}),P.on("pointerout",()=>{p!==this.selectedDifficulty&&P.setAlpha(1)}),P.on("pointerdown",()=>this.selectDifficulty(p)),this.diffButtons.push({level:p,bg:P,label:A,desc:D,border:E})}const e=O+2*(B+4)+12;this.add.text(J/2,e,"Current modifiers:",{fontSize:"9px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5),this.renderModifierSummary(e+14);const o=e+80;this.add.text(J/2,o,"-- Sound --",{fontSize:"11px",color:"#94a3b8",fontFamily:"monospace"}).setOrigin(.5);const m=zt(),n=Ot(),r=m>0,a=n>0,t=this.add.rectangle(J/2-60,o+26,100,28,r?1467700:4133394,.8).setStrokeStyle(1,5596791).setInteractive({useHandCursor:!0}),s=this.add.text(J/2-60,o+26,`BGM: ${r?"ON":"OFF"}`,{fontSize:"11px",color:r?"#4ade80":"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);t.on("pointerdown",()=>{const u=zt()>0;pa(u?0:.3);const p=zt()>0;s.setText(`BGM: ${p?"ON":"OFF"}`).setColor(p?"#4ade80":"#ef4444"),t.setFillStyle(p?1467700:4133394,.8)});const l=this.add.rectangle(J/2+60,o+26,100,28,a?1467700:4133394,.8).setStrokeStyle(1,5596791).setInteractive({useHandCursor:!0}),i=this.add.text(J/2+60,o+26,`SFX: ${a?"ON":"OFF"}`,{fontSize:"11px",color:a?"#4ade80":"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5);l.on("pointerdown",()=>{const u=Ot()>0;ua(u?0:.4);const p=Ot()>0;i.setText(`SFX: ${p?"ON":"OFF"}`).setColor(p?"#4ade80":"#ef4444"),l.setFillStyle(p?1467700:4133394,.8)});const h=o+80;this.add.text(J/2,h,"-- Danger Zone --",{fontSize:"11px",color:"#ef4444",fontFamily:"monospace"}).setOrigin(.5);const d=this.add.rectangle(J/2,h+28,200,32,4133394,.8).setStrokeStyle(1,15680580).setInteractive({useHandCursor:!0});this.add.text(J/2,h+28,"Reset All Progress",{fontSize:"12px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5),d.on("pointerdown",()=>this.showResetConfirmation());const c=h+72;this.add.text(J/2,c,`Note: Non-Normal difficulty runs are
tagged on the leaderboard.`,{fontSize:"8px",color:"#666680",fontFamily:"monospace",align:"center"}).setOrigin(.5)}selectDifficulty(F){this.selectedDifficulty=F,so(F);for(const O of this.diffButtons){const f=O.level===F;O.border.setVisible(f),O.bg.setAlpha(1),f?(O.bg.setStrokeStyle(1,16498468),O.bg.setFillStyle(O.bg.fillColor,1)):(O.bg.setStrokeStyle(1,5596791),O.bg.setFillStyle(O.bg.fillColor,.5))}for(const O of this.modifierTexts)O.destroy();this.modifierTexts=[];const B=84+2*(34+4)+12+14;this.renderModifierSummary(B)}renderModifierSummary(F){const b=Hi(this.selectedDifficulty),I=[{label:"Enemy HP",value:b.enemyHpMult,unit:"x",goodIfLow:!0},{label:"Enemy ATK",value:b.enemyAtkMult,unit:"x",goodIfLow:!0},{label:"Damage Taken",value:b.playerDamageMult,unit:"x",goodIfLow:!0},{label:"Gold",value:b.goldMult,unit:"x"},{label:"EXP",value:b.expMult,unit:"x"},{label:"Items",value:b.itemDropMult,unit:"x"},{label:"Hunger",value:b.bellyDrainMult,unit:"x",goodIfLow:!0},{label:"Traps",value:b.trapFreqMult,unit:"x",goodIfLow:!0}],B=2,O=150,f=12;for(let x=0;x<I.length;x++){const{label:e,value:o,goodIfLow:m}=I[x],n=x%B,r=Math.floor(x/B),a=J/2+(n===0?-O/2:O/2),t=F+r*f;let s="#94a3b8";o<1?s=m?"#4ade80":"#ef4444":o>1&&(s=m?"#ef4444":"#4ade80");const l=this.add.text(a,t,`${e}: ${o.toFixed(1)}x`,{fontSize:"8px",color:s,fontFamily:"monospace"}).setOrigin(.5,0);this.modifierTexts.push(l)}}showResetConfirmation(){const F=this.add.rectangle(J/2,ee/2,J,ee,0,.85).setDepth(300).setInteractive(),b=this.add.rectangle(J/2,ee/2,280,140,1710638,.98).setStrokeStyle(2,15680580).setDepth(301),I=this.add.text(J/2,ee/2-45,"Are you sure?",{fontSize:"14px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(302),B=this.add.text(J/2,ee/2-20,`This will delete ALL save data.
This cannot be undone!`,{fontSize:"10px",color:"#e0e0e0",fontFamily:"monospace",align:"center"}).setOrigin(.5).setDepth(302),O=this.add.rectangle(J/2-55,ee/2+25,90,30,8330525,.9).setStrokeStyle(1,15680580).setDepth(302).setInteractive({useHandCursor:!0}),f=this.add.text(J/2-55,ee/2+25,"Delete All",{fontSize:"10px",color:"#ef4444",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(303),x=this.add.rectangle(J/2+55,ee/2+25,90,30,1981023,.9).setStrokeStyle(1,6333946).setDepth(302).setInteractive({useHandCursor:!0}),e=this.add.text(J/2+55,ee/2+25,"Cancel",{fontSize:"10px",color:"#60a5fa",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(303),o=()=>{F.destroy(),b.destroy(),I.destroy(),B.destroy(),O.destroy(),f.destroy(),x.destroy(),e.destroy()};x.on("pointerdown",o),F.on("pointerdown",o),O.on("pointerdown",()=>{const m=["poke-roguelite-meta","poke-roguelite-save","poke-roguelite-leaderboard","poke-roguelite-recent-runs","poke-roguelite-daily-scores","poke-roguelite-daily-attempt","poke-roguelite-difficulty","poke-roguelite-audio","poke-roguelite-dpadSide"];for(const r of m)try{localStorage.removeItem(r)}catch{}o();const n=this.add.text(J/2,ee/2,`Progress reset!
Restarting...`,{fontSize:"14px",color:"#4ade80",fontFamily:"monospace",fontStyle:"bold",align:"center"}).setOrigin(.5).setDepth(400);this.time.delayedCall(1200,()=>{n.destroy(),this.scene.start("HubScene")})})}}const dl={type:$e.AUTO,parent:"game-container",width:J,height:ee,backgroundColor:er.BG,pixelArt:!0,scale:{mode:$e.Scale.FIT,autoCenter:$e.Scale.CENTER_BOTH},render:{preserveDrawingBuffer:!0,antialias:!1},dom:{createContainer:!0},scene:[fr,Hr,ol,Xo,Yn,Vo,Zo,Qo,jo,il,rl,nl,ll,hl]},ul=new $e.Game(dl);window.__GAME=ul;
